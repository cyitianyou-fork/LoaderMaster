function checkBrower(){var e=!0;if(navigator.userAgent.indexOf("Safari")>0&&navigator.userAgent.indexOf("Chrome")<=0)return e}function mobilecheck(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),document.body&&document.body.clientWidth&&document.body.clientHeight&&document.body.clientWidth<350&&document.body.clientHeight<500&&(e=!0),e}function iphoneCheck(){var e=!1;return/iPhone/i.test(navigator.userAgent)&&(e=!0),!0}function isWeixin(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)}function isAndroid(){var e=navigator.userAgent,t=(navigator.appVersion,e.indexOf("Android")>-1||e.indexOf("Linux")>-1);return t}function tabletCheck(){var e=/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase());return e}function countCharacters(e){var t=0;if(!e)return 0;for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);n>=1&&n<=126||65376<=n&&n<=65439?t++:t+=2}return t}function renderPage(e,t,i,n){function a(e,t){var i=t.properties.longPage,n=1;if(t.elements)for(var a=0;a<t.elements.length;a++)if(3==t.elements[a].type){2==t.elements[a].properties.croptype&&(n=2);break}var s,o,r,l,c,u=window.scene?scene.pageMode:0,h=0,g={touchPos:0,pLen:(i-1)*-486,contain:$("#page"+e),cH:mobilecheck()?$(document).height():486,stopInertiaMove:!1},m=1==n?".edit_area":".edit_wrapper";0==u||1==u||2==u||6==u||7==u||8==u||11==u||12==u||13==u?u="NS":(u="WE",$('<section class="u-arrow-bottom"><div class="pre-wrap"><div class="pre-box1"><div class="pre1"></div></div><div class="pre-box2"><div class="pre2"></div></div></div></section>').appendTo("#page"+e));var f=0,v=0;g.contain.on("mousedown touchstart",function(e){return"button"==e.target.tagName.toLowerCase()||e.target.getAttribute("data")||e.target.getAttribute("href")||"8"==e.target.getAttribute("ctype")||"z"==e.target.getAttribute("ctype")?void e.stopPropagation():(e.stopPropagation(),e.preventDefault(),void(g.touchPos<g.pLen||g.touchPos>0||(s=!0,r=0,g.stopInertiaMove=!0,o=e.originalEvent.touches?e.originalEvent.changedTouches[0].clientY:e.clientY,"WE"==u&&(l=e.originalEvent.touches?e.originalEvent.changedTouches[0].clientX:e.clientX),v=g.touchPos,f=Date.now())))}),g.contain.on("mousemove touchmove",function(e){if(e.stopPropagation(),s){if(r=g.touchPos+(e.originalEvent.touches?e.originalEvent.changedTouches[0].clientY:e.clientY)-o,"WE"==u&&(c=(e.originalEvent.touches?e.originalEvent.touches[0].clientX:e.clientX)-l,Math.abs(c)>Math.abs(r-g.touchPos)&&!scene.property.forbidHandFlip)){if(c>0){if(c<5)return;eqxiu.prePage()}else eqxiu.nextPage();return void(s=!1)}if(r<g.pLen||r>5)return s=!1,r>0&&"NS"==u&&(scene.property.forbidHandFlip?g.touchPos=0:eqxiu.prePage()),void(r<0&&"NS"==u&&(scene.property.forbidHandFlip?g.touchPos=g.pLen:eqxiu.nextPage()));if(r>0)return;g.stopInertiaMove=!0,$(this).find(m).css("transform","translate3d(0,"+(r-h)+"px,0)"),$(this).find(m).css("-webkit-transform","translate3d(0,"+(r-h)+"px,0)");var t=$(this).find(".alock");if(t.length>0)for(var i=0;i<t.length;i++)p(t[i],t[i].style.transform,h-r);var n=Date.now();$(document).trigger("pageScrollPos",[r-g.cH]),n-f>300&&(f=n,v=r),g.stopInertiaMove=!1}}),g.contain.on("mouseup touchend mouseleave",function(e){if(e.stopPropagation(),s){if(s=!1,0===r||r-v==0)return void $(e.target).trigger("click","longPage");if(!(r<0&&r>g.pLen))return r>=0?void(g.touchPos=0):void(g.touchPos=g.pLen);g.touchPos=r,"WE"==u&&g.contain.find(".u-arrow-bottom").hide();var t=Date.now(),i=(r-v)/(t-f);!function(e,t,i,n){function a(){if(!n.stopInertiaMove){var r=Date.now(),l=r-t,c=e+l*o;if(!(s*c<0)){var d=(e+c)/2*l,u=i+d;if(!(u>0||u<n.pLen)){n.timmer=null,n.contain.find(m).css("transform","translate3d(0,"+(u-h)+"px,0)"),n.contain.find(m).css("-webkit-transform","translate3d(0,"+(u-h)+"px,0)");var g=n.contain.find(".alock");if(g.length>0)for(var f=0;f<g.length;f++)p(g[f],g[f].style.transform,h-u);n.touchPos=u,$(document).trigger("pageScrollPos",[u-n.cH]),setTimeout(a,10)}}}}var s=e<0?-1:1,o=s*-6e-4;a()}(i,t,r,g)}}),$(document).on("clearTouchPos",function(){g.touchPos=0,g.contain.find(m).css("transform","translateY(0px)"),g.contain.find(m).css("-webkit-transform","translateY(0px)");var e,t=g.contain.find(".alock");if(t.length>0)for(var i=0;i<t.length;i++)e=t[i].style.transform.replace(d,""),t[i].style.transform="translate3d(0,0,0) "+e})}e.templateParser("jsonParser").parse({def:i[t-1],appendTo:"#page"+t,mode:"view",disEvent:n}),listPages=i;var s,o,r=1,l=$(".z-current").width(),c=$(".z-current").height();imageWidth=$(".m-img").width(),imageHeight=$(".m-img").height(),l/c>=320/486?(r=c/486,s=(l/r-320)/2):(r=l/320,o=(c/r-486)/2),window!=window.top&&$(".phoneBox .nr").css({width:"100%",height:"486px"}),window===window.top&&mobilecheck()&&$(".edit_area").css({marginTop:o||0}),s&&$(".edit_area").css({marginLeft:s}),tplCount==i.length&&$("#eqMobileViewport").attr("content","width=320, initial-scale="+r+", maximum-scale="+r+", user-scalable=no"),i[t-1].properties&&i[t-1].properties.longPage&&a(t,i[t-1]);var d=/translate3d\(.*?\)/g,p=function(e,t,i){t=t.replace(d,""),t&&(e.style.transform="translate3d(0,"+i+"px,0) "+t)}}function QR8bitByte(e){this.mode=QRMode.MODE_8BIT_BYTE,this.data=e}function QRCode(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}function QRPolynomial(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=new Array(e.length-i+t);for(var n=0;n<e.length-i;n++)this.num[n]=e[n+i]}function QRRSBlock(e,t){this.totalCount=e,this.dataCount=t}function QRBitBuffer(){this.buffer=new Array,this.length=0}function randomRange(e,t){return Math.random()*(t-e)+e}function preview(e,t){function i(i,n,a){n.on("$destroy",function(){n.unbind("click")}),n.click(function(){e.getPrintBase(a.viewId).then(function(e){if(e){var i=e.properties;if(i&&i.shareType){var n=$("#preview_wrap"),s=$("#pc_preview");s.attr("src",PREFIX_HOST+"/print/share.html?code="+a.viewCode),n.show(),n.find("span").click(function(){n.hide(),s.attr("src",""),$(this).unbind("click")})}else t.openConfirmDialog({msg:"您还没有分享此作品，请分享后再预览",confirmName:"分享"},function(){window.open("print/shareSet/"+a.viewId,"_blank")})}})})}return{restrict:"A",scope:{},link:i}}angular.module("eqxAuth",["eqxDialog"]).provider("authService",function(){var e="http://localhost";this.setConfig=function(t){e=t.host||e},this.$get=["dialogService","authMessageType",function(t,i){function n(n){var s="";switch(n.type){case i.LOGIN:s="/auth/login";break;case i.REGISTER:s="/auth/register";break;case i.REGISTER_ENTERPRISE:s="/auth/register/mobile/2";break;case i.RESET:s="/auth/reset/"+n.resetToken}return t.open({template:a.replace("{{src}}",e+s+"?t="+Date.now()),plain:!0})}var a='<div class="eqc-auth" ng-style="dialogSize" eqd-message-event><iframe class="eqc-auth" src="{{src}}" frameborder="0" scrolling="no" ng-style="domSize"></iframe></div>';return{showAuth:n}}]}).constant("authMessageType",{LOGIN:"login",REGISTER:"register",REGISTER_ENTERPRISE:"registerEnterprise",RESET:"reset",CLOSE:"close"}).directive("eqdMessageEvent",["authMessageType",function(e){function t(t,i){function n(i){var n=JSON.parse(i.data);n.type===e.CLOSE&&(n=void 0),t.closeThisDialog(n)}i.on("$destroy",function(){window.removeEventListener("message",n)}),window.addEventListener("message",n)}return{link:t}}]),angular.module("eqxDialog",["ngDialog"]).factory("dialogService",["$q","ngDialog",function(e,t){function i(i){var n=e.defer();i=angular.extend({appendTo:"body",showClose:!1},i);var a=t.open(i);return a.closePromise.then(function(e){var t=e.value;t&&"$document"!=t?n.resolve(t):n.reject()})["catch"](function(e){n.reject(e)}),n.promise}return{open:i}}]),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.html2canvas=e()}}(function(){var e;return function t(e,i,n){function a(o,r){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var i=e[o][1][t];return a(i?i:t)},d,d.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(t,i,n){(function(t,n){(function(){function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function r(){}function l(){return function(){t.nextTick(u)}}function c(){var e=0,t=new U(u),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function d(){var e=new MessageChannel;return e.port1.onmessage=u,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(u,1)}}function u(){for(var e=0;e<z;e+=2){var t=j[e],i=j[e+1];t(i),j[e]=void 0,j[e+1]=void 0}z=0}function h(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function f(e){try{return e.then}catch(t){return W.error=t,W}}function v(e,t,i,n){try{e.call(t,i,n)}catch(a){return a}}function b(e,t,i){N(function(e){var n=!1,a=v(i,t,function(i){n||(n=!0,t!==i?x(e,i):S(e,i))},function(t){n||(n=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&a&&(n=!0,T(e,a))},e)}function y(e,t){t._state===X?S(e,t._result):e._state===V?T(e,t._result):C(t,void 0,function(t){x(e,t)},function(t){T(e,t)})}function w(e,t){if(t.constructor===e.constructor)y(e,t);else{var i=f(t);i===W?T(e,W.error):void 0===i?S(e,t):s(i)?b(e,t,i):S(e,t)}}function x(e,t){e===t?T(e,g()):a(t)?w(e,t):S(e,t)}function k(e){e._onerror&&e._onerror(e._result),E(e)}function S(e,t){e._state===B&&(e._result=t,e._state=X,0===e._subscribers.length||N(E,e))}function T(e,t){e._state===B&&(e._state=V,e._result=t,N(k,e))}function C(e,t,i,n){var a=e._subscribers,s=a.length;e._onerror=null,a[s]=t,a[s+X]=i,a[s+V]=n,0===s&&e._state&&N(E,e)}function E(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n,a,s=e._result,o=0;o<t.length;o+=3)n=t[o],a=t[o+i],n?$(i,n,a,s):a(s);e._subscribers.length=0}}function P(){this.error=null}function I(e,t){try{return e(t)}catch(i){return G.error=i,G}}function $(e,t,i,n){var a,o,r,l,c=s(i);if(c){if(a=I(i,n),a===G?(l=!0,o=a.error,a=null):r=!0,t===a)return void T(t,m())}else a=n,r=!0;t._state!==B||(c&&r?x(t,a):l?T(t,o):e===X?S(t,a):e===V&&T(t,a))}function _(e,t){try{t(function(t){x(e,t)},function(t){T(e,t)})}catch(i){T(e,i)}}function L(e,t,i,n){this._instanceConstructor=e,this.promise=new e(h,n),this._abortOnReject=i,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):T(this.promise,this._validationError())}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function R(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(e){this._id=ee++,this._state=void 0,this._result=void 0,this._subscribers=[],h!==e&&(s(e)||M(),this instanceof q||R(),_(this,e))}var D;D=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var A,F=D,z=(Date.now||function(){return(new Date).getTime()},Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return r.prototype=e,new r},0),N=function(e,t){j[z]=e,j[z+1]=t,z+=2,2===z&&A()},O="undefined"!=typeof window?window:{},U=O.MutationObserver||O.WebKitMutationObserver,H="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,j=new Array(1e3);A="undefined"!=typeof t&&"[object process]"==={}.toString.call(t)?l():U?c():H?d():p();var B=void 0,X=1,V=2,W=new P,G=new P;L.prototype._validateInput=function(e){return F(e)},L.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},L.prototype._init=function(){this._result=new Array(this.length)};var Y=L;L.prototype._enumerate=function(){for(var e=this.length,t=this.promise,i=this._input,n=0;t._state===B&&n<e;n++)this._eachEntry(i[n],n)},L.prototype._eachEntry=function(e,t){var i=this._instanceConstructor;o(e)?e.constructor===i&&e._state!==B?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(i.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(X,t,e))},L.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===B&&(this._remaining--,this._abortOnReject&&e===V?T(n,i):this._result[t]=this._makeResult(e,t,i)),0===this._remaining&&S(n,this._result)},L.prototype._makeResult=function(e,t,i){return i},L.prototype._willSettleAt=function(e,t){var i=this;C(e,void 0,function(e){i._settledAt(X,t,e)},function(e){i._settledAt(V,t,e)})};var Q=function(e,t){return new Y(this,e,(!0),t).promise},Z=function(e,t){function i(e){x(s,e)}function n(e){T(s,e)}var a=this,s=new a(h,t);if(!F(e))return T(s,new TypeError("You must pass an array to race.")),s;for(var o=e.length,r=0;s._state===B&&r<o;r++)C(a.resolve(e[r]),void 0,i,n);return s},J=function(e,t){var i=this;if(e&&"object"==typeof e&&e.constructor===i)return e;var n=new i(h,t);return x(n,e),n},K=function(e,t){var i=this,n=new i(h,t);return T(n,e),n},ee=0,te=q;q.all=Q,q.race=Z,q.resolve=J,q.reject=K,q.prototype={constructor:q,then:function(e,t){var i=this,n=i._state;if(n===X&&!e||n===V&&!t)return this;var a=new this.constructor(h),s=i._result;if(n){var o=arguments[n-1];N(function(){$(n,a,o,s)})}else C(i,a,e,t);return a},"catch":function(e){return this.then(null,e)}};var ie=function(){var e;e="undefined"!=typeof n?n:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),s(t)}();t||(e.Promise=te)},ne={Promise:te,polyfill:ie};"function"==typeof e&&e.amd?e(function(){return ne}):"undefined"!=typeof i&&i.exports?i.exports=ne:"undefined"!=typeof this&&(this.ES6Promise=ne)}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,i){function n(){if(!r){r=!0;for(var e,t=o.length;t;){e=o,o=[];for(var i=-1;++i<t;)e[i]();t=o.length}r=!1}}function a(){}var s=t.exports={},o=[],r=!1;s.nextTick=function(e){o.push(e),r||setTimeout(n,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],3:[function(t,i,n){(function(t){!function(a){function s(e){throw RangeError(q[e])}function o(e,t){for(var i=e.length;i--;)e[i]=t(e[i]);return e}function r(e,t){return o(e.split(R),t).join(".")}function l(e){for(var t,i,n=[],a=0,s=e.length;a<s;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<s?(i=e.charCodeAt(a++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),a--)):n.push(t);return n}function c(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function d(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:S}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function u(e,t,i){var n=0;for(e=i?A(e/P):e>>1,e+=A(e/t);e>D*C>>1;n+=S)e=A(e/D);return A(n+(D+1)*e/(e+E))}function h(e){var t,i,n,a,o,r,l,p,h,g,m=[],f=e.length,v=0,b=$,y=I;for(i=e.lastIndexOf(_),i<0&&(i=0),n=0;n<i;++n)e.charCodeAt(n)>=128&&s("not-basic"),m.push(e.charCodeAt(n));for(a=i>0?i+1:0;a<f;){for(o=v,r=1,l=S;a>=f&&s("invalid-input"),p=d(e.charCodeAt(a++)),(p>=S||p>A((k-v)/r))&&s("overflow"),v+=p*r,h=l<=y?T:l>=y+C?C:l-y,!(p<h);l+=S)g=S-h,r>A(k/g)&&s("overflow"),r*=g;t=m.length+1,y=u(v-o,t,0==o),A(v/t)>k-b&&s("overflow"),b+=A(v/t),v%=t,m.splice(v++,0,b)}return c(m)}function g(e){var t,i,n,a,o,r,c,d,h,g,m,f,v,b,y,w=[];for(e=l(e),f=e.length,t=$,i=0,o=I,r=0;r<f;++r)m=e[r],m<128&&w.push(F(m));for(n=a=w.length,a&&w.push(_);n<f;){for(c=k,r=0;r<f;++r)m=e[r],m>=t&&m<c&&(c=m);for(v=n+1,c-t>A((k-i)/v)&&s("overflow"),i+=(c-t)*v,t=c,r=0;r<f;++r)if(m=e[r],m<t&&++i>k&&s("overflow"),m==t){for(d=i,h=S;g=h<=o?T:h>=o+C?C:h-o,!(d<g);h+=S)y=d-g,b=S-g,w.push(F(p(g+y%b,0))),d=A(y/b);w.push(F(p(d,0))),o=u(i,v,n==a),i=0,++n}++i,++t}return w.join("")}function m(e){return r(e,function(e){return L.test(e)?h(e.slice(4).toLowerCase()):e})}function f(e){return r(e,function(e){return M.test(e)?"xn--"+g(e):e})}var v="object"==typeof n&&n,b="object"==typeof i&&i&&i.exports==v&&i,y="object"==typeof t&&t;y.global!==y&&y.window!==y||(a=y);var w,x,k=2147483647,S=36,T=1,C=26,E=38,P=700,I=72,$=128,_="-",L=/^xn--/,M=/[^ -~]/,R=/\x2E|\u3002|\uFF0E|\uFF61/g,q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=S-T,A=Math.floor,F=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:l,encode:c},decode:h,encode:g,toASCII:f,toUnicode:m},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(v&&!v.nodeType)if(b)b.exports=w;else for(x in w)w.hasOwnProperty(x)&&(v[x]=w[x]);else a.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,i){function n(e,t,i){!e.defaultView||t===e.defaultView.pageXOffset&&i===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,i)}function a(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(i){r("Unable to copy canvas content from",e,i)}}function s(e,t){for(var i=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),n=e.firstChild;n;)t!==!0&&1===n.nodeType&&"SCRIPT"===n.nodeName||i.appendChild(s(n,t)),n=n.nextSibling;return 1===e.nodeType&&(i._scrollTop=e.scrollTop,i._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?a(e,i):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(i.value=e.value)),i}function o(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var t=e.firstChild;t;)o(t),t=t.nextSibling}}var r=e("./log"),l=e("./promise");t.exports=function(e,t,i,a,r,c,d){var p=s(e.documentElement,r.javascriptEnabled),u=t.createElement("iframe");return u.className="html2canvas-container",u.style.visibility="hidden",u.style.position="fixed",u.style.left="-10000px",u.style.top="0px",u.style.border="0",u.width=i,u.height=a,u.scrolling="no",t.body.appendChild(u),new l(function(t){var i=u.contentWindow.document;u.contentWindow.onload=u.onload=function(){var e=setInterval(function(){i.body.childNodes.length>0&&(o(i.documentElement),clearInterval(e),"view"===r.type&&(u.contentWindow.scrollTo(c,d),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||u.contentWindow.scrollY===d&&u.contentWindow.scrollX===c||(i.documentElement.style.top=-d+"px",i.documentElement.style.left=-c+"px",i.documentElement.style.position="absolute")),t(u))},50)},i.open(),i.write("<!DOCTYPE html><html></html>"),n(e,c,d),i.replaceChild(i.adoptNode(p),i.documentElement),i.close()})}},{"./log":15,"./promise":18}],5:[function(e,t,i){function n(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}n.prototype.darken=function(e){var t=1-e;return new n([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},n.prototype.isTransparent=function(){return 0===this.a},n.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},n.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var a=/^#([a-f0-9]{3})$/i;n.prototype.hex3=function(e){var t=null;return null!==(t=e.match(a))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var s=/^#([a-f0-9]{6})$/i;n.prototype.hex6=function(e){var t=null;return null!==(t=e.match(s))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var o=/^rgb\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3})\)$/;n.prototype.rgb=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var r=/^rgba\((\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d+\.?\d*)\)$/;n.prototype.rgba=function(e){var t=null;return null!==(t=e.match(r))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},n.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},n.prototype.namedColor=function(e){var t=l[e.toLowerCase()];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e.toLowerCase())return this.r=this.g=this.b=this.a=0,!0;return!!t},n.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};t.exports=n},{}],6:[function(e,t,i){function n(e,t){var i=S++;if(t=t||{},t.logging&&(window.html2canvas.logging=!0,window.html2canvas.start=Date.now()),t.async="undefined"==typeof t.async||t.async,t.allowTaint="undefined"!=typeof t.allowTaint&&t.allowTaint,t.removeContainer="undefined"==typeof t.removeContainer||t.removeContainer,t.javascriptEnabled="undefined"!=typeof t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout="undefined"==typeof t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:h,t.strict=!!t.strict,"string"==typeof e){if("string"!=typeof t.proxy)return p.reject("Proxy must be used when rendering url");var n=null!=t.width?t.width:window.innerWidth,o=null!=t.height?t.height:window.innerHeight;return w(d(e),t.proxy,document,n,o,t).then(function(e){return s(e.contentWindow.document.documentElement,e,t,n,o)})}var r=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return r.setAttribute(k+i,i),a(r.ownerDocument,t,t.innerWidth||r.ownerDocument.defaultView.innerWidth,t.innerHeight||r.ownerDocument.defaultView.innerHeight,i).then(function(e){return"function"==typeof t.onrendered&&(v("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}function a(e,t,i,n,a){return y(e,e,i,n,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(o){v("Document cloned");var r=k+a,l="["+r+"='"+a+"']";e.querySelector(l).removeAttribute(r);var c=o.contentWindow,d=c.document.querySelector(l),u="function"==typeof t.onclone?p.resolve(t.onclone(c.document)):p.resolve(!0);return u.then(function(){return s(d,o,t,i,n)})})}function s(e,t,i,n,a){var s=t.contentWindow,d=new u(s.document),p=new g(i,d),h=x(e),f="view"===i.type?n:l(s.document),b="view"===i.type?a:c(s.document),y=new i.renderer(f,b,p,i,document),w=new m(e,y,d,p,i);return w.ready.then(function(){v("Finished rendering");var n;return n="view"===i.type?r(y.canvas,{width:y.canvas.width,height:y.canvas.height,top:0,left:0,x:0,y:0}):e===s.document.body||e===s.document.documentElement||null!=i.canvas?y.canvas:r(y.canvas,{width:null!=i.width?i.width:h.width,height:null!=i.height?i.height:h.height,top:h.top,left:h.left,x:s.pageXOffset,y:s.pageYOffset}),o(t,i),n})}function o(e,t){t.removeContainer&&(e.parentNode.removeChild(e),v("Cleaned up container"))}function r(e,t){var i=document.createElement("canvas"),n=Math.min(e.width-1,Math.max(0,t.left)),a=Math.min(e.width,Math.max(1,t.left+t.width)),s=Math.min(e.height-1,Math.max(0,t.top)),o=Math.min(e.height,Math.max(1,t.top+t.height));return i.width=t.width,i.height=t.height,v("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",a-n,"height:",o-s),v("Resulting crop with width",t.width,"and height",t.height," with x",n,"and y",s),i.getContext("2d").drawImage(e,n,s,a-n,o-s,t.x,t.y,a-n,o-s),i}function l(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function c(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function d(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}var p=e("./promise"),u=e("./support"),h=e("./renderers/canvas"),g=e("./imageloader"),m=e("./nodeparser"),f=e("./nodecontainer"),v=e("./log"),b=e("./utils"),y=e("./clone"),w=e("./proxy").loadUrlDocument,x=b.getBounds,k="data-html2canvas-node",S=0;n.Promise=p,n.CanvasRenderer=h,n.NodeContainer=f,n.log=v,n.utils=b,t.exports="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return p.reject("No canvas support")}:n},{"./clone":4,"./imageloader":13,"./log":15,"./nodecontainer":16,"./nodeparser":17,"./promise":18,"./proxy":19,"./renderers/canvas":23,"./support":25,"./utils":29}],7:[function(e,t,i){function n(e){if(this.src=e,s("DummyImageContainer for",e),!this.promise||!this.image){s("Initiating DummyImageContainer"),n.prototype.image=new Image;var t=this.image;n.prototype.promise=new a(function(e,i){t.onload=e,t.onerror=i,t.src=o(),t.complete===!0&&e(t)})}}var a=e("./promise"),s=e("./log"),o=e("./utils").smallImage;t.exports=n},{"./log":15,"./promise":18,"./utils":29}],8:[function(e,t,i){function n(e,t){var i,n,s=document.createElement("div"),o=document.createElement("img"),r=document.createElement("span"),l="Hidden Text";s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,document.body.appendChild(s),o.src=a(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin=0,r.style.padding=0,r.appendChild(document.createTextNode(l)),
s.appendChild(r),s.appendChild(o),i=o.offsetTop-r.offsetTop+1,s.removeChild(r),s.appendChild(document.createTextNode(l)),s.style.lineHeight="normal",o.style.verticalAlign="super",n=o.offsetTop-s.offsetTop+1,document.body.removeChild(s),this.baseline=i,this.lineWidth=1,this.middle=n}var a=e("./utils").smallImage;t.exports=n},{"./utils":29}],9:[function(e,t,i){function n(){this.data={}}var a=e("./font");n.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new a(e,t)),this.data[e+"-"+t]},t.exports=n},{"./font":8}],10:[function(e,t,i){function n(t,i,n){this.image=null,this.src=t;var a=this,r=o(t);this.promise=(i?new s(function(e){"about:blank"===t.contentWindow.document.URL||null==t.contentWindow.document.documentElement?t.contentWindow.onload=t.onload=function(){e(t)}:e(t)}):this.proxyLoad(n.proxy,r,n)).then(function(t){var i=e("./core");return i(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(e){return a.image=e})}var a=e("./utils"),s=e("./promise"),o=a.getBounds,r=e("./proxy").loadUrlDocument;n.prototype.proxyLoad=function(e,t,i){var n=this.src;return r(n.src,e,n.ownerDocument,t.width,t.height,i)},t.exports=n},{"./core":6,"./promise":18,"./proxy":19,"./utils":29}],11:[function(e,t,i){function n(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=a.resolve(!0)}var a=e("./promise");n.prototype.TYPES={LINEAR:1,RADIAL:2},t.exports=n},{"./promise":18}],12:[function(e,t,i){function n(e,t){this.src=e,this.image=new Image;var i=this;this.tainted=null,this.promise=new a(function(n,a){i.image.onload=n,i.image.onerror=a,t&&(i.image.crossOrigin="anonymous"),i.image.src=e,i.image.complete===!0&&n(i.image)})}var a=e("./promise");t.exports=n},{"./promise":18}],13:[function(e,t,i){function n(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var a=e("./promise"),s=e("./log"),o=e("./imagecontainer"),r=e("./dummyimagecontainer"),l=e("./proxyimagecontainer"),c=e("./framecontainer"),d=e("./svgcontainer"),p=e("./svgnodecontainer"),u=e("./lineargradientcontainer"),h=e("./webkitgradientcontainer"),g=e("./utils").bind;n.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},n.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},n.prototype.addImage=function(e,t){return function(i){i.args.forEach(function(n){this.imageExists(e,n)||(e.splice(0,0,t.call(this,i)),s("Added image #"+e.length,"string"==typeof n?n.substring(0,100):n))},this)}},n.prototype.hasImageBackground=function(e){return"none"!==e.method},n.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new o(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),(!1)):this.isSameOrigin(t)||this.options.allowTaint===!0||this.isSVG(t)?new o(t,(!1)):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(t,(!0)):this.options.proxy?new l(t,this.options.proxy):new r(t):new d(t)}return"linear-gradient"===e.method?new u(e):"gradient"===e.method?new h(e):"svg"===e.method?new p(e.args[0],this.support.svg):"IFRAME"===e.method?new c(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new r(e)},n.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||d.prototype.isInline(e)},n.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},n.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},n.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},n.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout)["catch"](function(){var t=new r(e.src);return t.promise.then(function(t){e.image=t})})},n.prototype.get=function(e){var t=null;return this.images.some(function(i){return(t=i).src===e})?t:null},n.prototype.fetch=function(e){return this.images=e.reduce(g(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,t){e.promise.then(function(){s("Succesfully loaded image #"+(t+1),e)},function(i){s("Failed loading image #"+(t+1),e,i)})}),this.ready=a.all(this.images.map(this.getPromise,this)),s("Finished searching images"),this},n.prototype.timeout=function(e,t){var i,n=a.race([e.promise,new a(function(n,a){i=setTimeout(function(){s("Timed out loading image",e),a(e)},t)})]).then(function(e){return clearTimeout(i),e});return n["catch"](function(){clearTimeout(i)}),n},t.exports=n},{"./dummyimagecontainer":7,"./framecontainer":10,"./imagecontainer":12,"./lineargradientcontainer":14,"./log":15,"./promise":18,"./proxyimagecontainer":20,"./svgcontainer":26,"./svgnodecontainer":27,"./utils":29,"./webkitgradientcontainer":30}],14:[function(e,t,i){function n(e){a.apply(this,arguments),this.type=this.TYPES.LINEAR;var t=null===e.args[0].match(this.stepRegExp);t?e.args[0].split(" ").reverse().forEach(function(e){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var t=this.y0,i=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=i,this.y1=t}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)|\w+)\s*(\d{1,3})?(%|px)?/);return{color:new s(t[1]),stop:"%"===t[3]?t[2]/100:null}},this),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(i,n){return null!==i.stop&&(e.stop=(i.stop-this.colorStops[t-1].stop)/(n+1)+this.colorStops[t-1].stop,!0)},this)},this)}var a=e("./gradientcontainer"),s=e("./color");n.prototype=Object.create(a.prototype),n.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/,t.exports=n},{"./color":5,"./gradientcontainer":11}],15:[function(e,t,i){t.exports=function(){window.html2canvas.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-window.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}},{}],16:[function(e,t,i){function n(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function a(e){var t=e.options[e.selectedIndex||0];return t?t.text||"":""}function s(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function o(e){return e.toString().indexOf("%")!==-1}function r(e){return e.replace("px","")}function l(e){return parseFloat(e)}var c=e("./color"),d=e("./utils"),p=d.getBounds,u=d.parseBackgrounds,h=d.offsetBounds;n.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},n.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},n.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},n.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},n.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},n.prototype.prefixedCss=function(e){var t=["webkit","moz","ms","o"],i=this.css(e);return void 0===i&&t.some(function(t){return i=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)),void 0!==i},this),void 0===i?null:i},n.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},n.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},n.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new c(this.css(e)))},n.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},n.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},n.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},n.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=u(this.css("backgroundImage")))},n.prototype.cssList=function(e,t){var i=(this.css(e)||"").split(",");return i=i[t||0]||i[0]||"auto",i=i.trim().split(" "),1===i.length&&(i=[i[0],o(i[0])?"auto":i[0]]),i},n.prototype.parseBackgroundSize=function(e,t,i){var n,a,s=this.cssList("backgroundSize",i);if(o(s[0]))n=e.width*parseFloat(s[0])/100;else{if(/contain|cover/.test(s[0])){var r=e.width/e.height,l=t.width/t.height;return r<l^"contain"===s[0]?{width:e.height*l,height:e.height}:{width:e.width,height:e.width/l}}n=parseInt(s[0],10)}return a="auto"===s[0]&&"auto"===s[1]?t.height:"auto"===s[1]?n/t.width*t.height:o(s[1])?e.height*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(n=a/t.height*t.width),{width:n,height:a}},n.prototype.parseBackgroundPosition=function(e,t,i,n){var a,s,r=this.cssList("backgroundPosition",i);return a=o(r[0])?(e.width-(n||t).width)*(parseFloat(r[0])/100):parseInt(r[0],10),s="auto"===r[1]?a/t.width*t.height:o(r[1])?(e.height-(n||t).height)*parseFloat(r[1])/100:parseInt(r[1],10),"auto"===r[0]&&(a=s/t.height*t.width),{left:a,top:s}},n.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},n.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var i=e.match(this.TEXT_SHADOW_PROPERTY),n=0;i&&n<i.length;n++){var a=i[n].match(this.TEXT_SHADOW_VALUES);t.push({color:new c(a[0]),offsetX:a[1]?parseFloat(a[1].replace("px","")):0,offsetY:a[2]?parseFloat(a[2].replace("px","")):0,blur:a[3]?a[3].replace("px",""):0})}return t},n.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(r).map(l);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},n.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?s(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t?t:[1,0,0,1,0,0]}return this.transformMatrix},n.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?h(this.node):p(this.node))},n.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},n.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=a(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("•")),0===e.length?this.node.placeholder||"":e},n.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,n.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,n.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,n.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,t.exports=n},{"./color":5,"./utils":29}],17:[function(e,t,i){function n(e,t,i,n,a){O("Starting NodeParser"),this.renderer=t,this.options=a,this.range=null,this.support=i,this.renderQueue=[],this.stack=new G((!0),1,e.ownerDocument,null);var s=new H(e,null);if(a.background&&t.rectangle(0,0,t.width,t.height,new V(a.background)),e===e.ownerDocument.documentElement){var o=new H(s.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,o.color("backgroundColor"))}s.visibile=s.isElementVisible(),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=D([s].concat(this.getChildren(s)).filter(function(e){return e.visible=e.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new X,O("Fetched nodes, total:",this.nodes.length),O("Calculate overflow clips"),this.calculateOverflowClips(),O("Start fetching images"),this.images=n.fetch(this.nodes.filter(P)),this.ready=this.images.ready.then(Q(function(){return O("Images loaded, starting parsing"),O("Creating stacking contexts"),this.createStackingContexts(),O("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),O("Render queue created with "+this.renderQueue.length+" items"),new W(Q(function(e){a.async?"function"==typeof a.async?a.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function a(e){return e.parent&&e.parent.clip.length}function s(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function o(){}function r(e,t,i,n){return e.map(function(a,s){if(a.width>0){var o=t.left,r=t.top,l=t.width,c=t.height-e[2].width;switch(s){case 0:c=e[0].width,a.args=p({c1:[o,r],c2:[o+l,r],c3:[o+l-e[1].width,r+c],c4:[o+e[3].width,r+c]},n[0],n[1],i.topLeftOuter,i.topLeftInner,i.topRightOuter,i.topRightInner);break;case 1:o=t.left+t.width-e[1].width,l=e[1].width,a.args=p({c1:[o+l,r],c2:[o+l,r+c+e[2].width],c3:[o,r+c],c4:[o,r+e[0].width]},n[1],n[2],i.topRightOuter,i.topRightInner,i.bottomRightOuter,i.bottomRightInner);break;case 2:r=r+t.height-e[2].width,c=e[2].width,a.args=p({c1:[o+l,r+c],c2:[o,r+c],c3:[o+e[3].width,r],c4:[o+l-e[3].width,r]},n[2],n[3],i.bottomRightOuter,i.bottomRightInner,i.bottomLeftOuter,i.bottomLeftInner);break;case 3:l=e[3].width,a.args=p({c1:[o,r+c+e[2].width],c2:[o,r],c3:[o+l,r+e[0].width],c4:[o+l,r+c]},n[3],n[0],i.bottomLeftOuter,i.bottomLeftInner,i.topLeftOuter,i.topLeftInner)}}return a})}function l(e,t,i,n){var a=4*((Math.sqrt(2)-1)/3),s=i*a,o=n*a,r=e+i,l=t+n;return{topLeft:d({x:e,y:l},{x:e,y:l-o},{x:r-s,y:t},{x:r,y:t}),topRight:d({x:e,y:t},{x:e+s,y:t},{x:r,y:l-o},{x:r,y:l}),bottomRight:d({x:r,y:t},{x:r,y:t+o},{x:e+s,y:l},{x:e,y:l}),bottomLeft:d({x:r,y:l},{x:r-s,y:l},{x:e,y:t+o},{x:e,y:t})}}function c(e,t,i){var n=e.left,a=e.top,s=e.width,o=e.height,r=t[0][0],c=t[0][1],d=t[1][0],p=t[1][1],u=t[2][0],h=t[2][1],g=t[3][0],m=t[3][1],f=s-d,v=o-h,b=s-u,y=o-m;return{topLeftOuter:l(n,a,r,c).topLeft.subdivide(.5),topLeftInner:l(n+i[3].width,a+i[0].width,Math.max(0,r-i[3].width),Math.max(0,c-i[0].width)).topLeft.subdivide(.5),topRightOuter:l(n+f,a,d,p).topRight.subdivide(.5),topRightInner:l(n+Math.min(f,s+i[3].width),a+i[0].width,f>s+i[3].width?0:d-i[3].width,p-i[0].width).topRight.subdivide(.5),bottomRightOuter:l(n+b,a+v,u,h).bottomRight.subdivide(.5),bottomRightInner:l(n+Math.min(b,s-i[3].width),a+Math.min(v,o+i[0].width),Math.max(0,u-i[1].width),h-i[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(n,a+y,g,m).bottomLeft.subdivide(.5),bottomLeftInner:l(n+i[3].width,a+y,Math.max(0,g-i[3].width),m-i[2].width).bottomLeft.subdivide(.5)}}function d(e,t,i,n){var a=function(e,t,i){return{x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}};return{start:e,startControl:t,endControl:i,end:n,subdivide:function(s){var o=a(e,t,s),r=a(t,i,s),l=a(i,n,s),c=a(o,r,s),p=a(r,l,s),u=a(c,p,s);return[d(e,o,c,u),d(u,p,l,n)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,i.x,i.y,n.x,n.y])},curveToReversed:function(n){n.push(["bezierCurve",i.x,i.y,t.x,t.y,e.x,e.y])}}}function p(e,t,i,n,a,s,o){var r=[];return t[0]>0||t[1]>0?(r.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(r)):r.push(["line",e.c1[0],e.c1[1]]),i[0]>0||i[1]>0?(r.push(["line",s[0].start.x,s[0].start.y]),s[0].curveTo(r),r.push(["line",o[0].end.x,o[0].end.y]),o[0].curveToReversed(r)):(r.push(["line",e.c2[0],e.c2[1]]),r.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(r.push(["line",a[1].end.x,a[1].end.y]),a[1].curveToReversed(r)):r.push(["line",e.c4[0],e.c4[1]]),r}function u(e,t,i,n,a,s,o){t[0]>0||t[1]>0?(e.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(e),n[1].curveTo(e)):e.push(["line",s,o]),(i[0]>0||i[1]>0)&&e.push(["line",a[0].start.x,a[0].start.y])}function h(e){return e.cssInt("zIndex")<0}function g(e){return e.cssInt("zIndex")>0}function m(e){return 0===e.cssInt("zIndex")}function f(e){return["inline","inline-block","inline-table"].indexOf(e.css("display"))!==-1}function v(e){return e instanceof G}function b(e){return e.node.data.trim().length>0}function y(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function w(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var i=e.css("border"+t+"Radius"),n=i.split(" ");return n.length<=1&&(n[1]=n[0]),n.map(M)})}function x(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function k(e){var t=e.css("position"),i=["absolute","relative","fixed"].indexOf(t)!==-1?e.css("zIndex"):"auto";return"auto"!==i}function S(e){return"static"!==e.css("position")}function T(e){return"none"!==e.css("float")}function C(e){return["inline-block","inline-table"].indexOf(e.css("display"))!==-1}function E(e){var t=this;return function(){return!e.apply(t,arguments)}}function P(e){return e.node.nodeType===Node.ELEMENT_NODE}function I(e){return e.isPseudoElement===!0}function $(e){return e.node.nodeType===Node.TEXT_NODE}function _(e){return function(t,i){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(i.cssInt("zIndex")+e.indexOf(i)/e.length)}}function L(e){return e.getOpacity()<1}function M(e){return parseInt(e,10)}function R(e){return e.width}function q(e){return e.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)===-1}function D(e){return[].concat.apply([],e)}function A(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}function F(e){for(var t,i=[],n=0,a=!1;e.length;)z(e[n])===a?(t=e.splice(0,n),t.length&&i.push(U.ucs2.encode(t)),a=!a,n=0):n++,n>=e.length&&(t=e.splice(0,n),t.length&&i.push(U.ucs2.encode(t)));return i}function z(e){return[32,13,10,9,45].indexOf(e)!==-1}function N(e){return/[^\u0000-\u00ff]/.test(e)}var O=e("./log"),U=e("punycode"),H=e("./nodecontainer"),j=e("./textcontainer"),B=e("./pseudoelementcontainer"),X=e("./fontmetrics"),V=e("./color"),W=e("./promise"),G=e("./stackingcontext"),Y=e("./utils"),Q=Y.bind,Z=Y.getBounds,J=Y.parseBackgrounds,K=Y.offsetBounds;n.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(P(e)){I(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],i=e.parseClip();i&&["absolute","fixed"].indexOf(e.css("position"))!==-1&&t.push([["rect",e.bounds.left+i.left,e.bounds.top+i.top,i.right-i.left,i.bottom-i.top]]),e.clip=a(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,I(e)&&e.cleanDOM()}else $(e)&&(e.clip=a(e)?e.parent.clip:[]);I(e)||(e.bounds=null)},this)},n.prototype.asyncRenderer=function(e,t,i){i=i||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():i+20>Date.now()?this.asyncRenderer(e,t,i):setTimeout(Q(function(){this.asyncRenderer(e,t)},this),0)},n.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+B.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+B.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},n.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},n.prototype.createStyles=function(e,t){var i=e.createElement("style");i.innerHTML=t,e.body.appendChild(i)},n.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var i=this.getPseudoElement(e,":before"),n=this.getPseudoElement(e,":after");i&&t.push(i),n&&t.push(n)}return D(t)},n.prototype.getPseudoElement=function(e,t){var i=e.computedStyle(t);if(!i||!i.content||"none"===i.content||"-moz-alt-content"===i.content||"none"===i.display)return null;for(var n=A(i.content),a="url"===n.substr(0,3),o=document.createElement(a?"img":"html2canvaspseudoelement"),r=new B(o,e,t),l=i.length-1;l>=0;l--){var c=s(i.item(l));o.style[c]=i[c]}if(o.className=B.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+B.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,a)return o.src=J(n)[0].args[0],[r];var d=document.createTextNode(n);return o.appendChild(d),[r,new j(d,r)]},n.prototype.getChildren=function(e){return D([].filter.call(e.node.childNodes,x).map(function(t){var i=[t.nodeType===Node.TEXT_NODE?new j(t,e):new H(t,e)].filter(q);return t.nodeType===Node.ELEMENT_NODE&&i.length&&"TEXTAREA"!==t.tagName?i[0].isElementVisible()?i.concat(this.getChildren(i[0])):[]:i},this))},n.prototype.newStackingContext=function(e,t){var i=new G(t,e.getOpacity(),e.node,e.parent);e.cloneTo(i);var n=t?i.getParentStack(this):i.parent.stack;n.contexts.push(i),e.stack=i},n.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){P(e)&&(this.isRootElement(e)||L(e)||k(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):P(e)&&(S(e)&&m(e)||C(e)||T(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},n.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},n.prototype.isRootElement=function(e){return null===e.parent},n.prototype.sortStackingContexts=function(e){e.contexts.sort(_(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},n.prototype.parseTextBounds=function(e){return function(t,i,n){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var a=n.slice(0,i).join("").length;return this.getRangeBounds(e.node,a,t.length)}if(e.node&&"string"==typeof e.node.data){var s=e.node.splitText(t.length),o=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=s,o}}else this.support.rangeBounds&&!e.parent.hasTransform()||(e.node=e.node.splitText(t.length));return{}}},n.prototype.getWrapperBounds=function(e,t){var i=e.ownerDocument.createElement("html2canvaswrapper"),n=e.parentNode,a=e.cloneNode(!0);i.appendChild(e.cloneNode(!0)),n.replaceChild(i,e);var s=t?K(i):Z(i);return n.replaceChild(a,i),s},n.prototype.getRangeBounds=function(e,t,i){var n=this.range||(this.range=e.ownerDocument.createRange());return n.setStart(e,t),n.setEnd(e,t+i),n.getBoundingClientRect()},n.prototype.parse=function(e){var t=e.contexts.filter(h),i=e.children.filter(P),n=i.filter(E(T)),a=n.filter(E(S)).filter(E(f)),s=i.filter(E(S)).filter(T),r=n.filter(E(S)).filter(f),l=e.contexts.concat(n.filter(S)).filter(m),c=e.children.filter($).filter(b),d=e.contexts.filter(g);t.concat(a).concat(s).concat(r).concat(l).concat(c).concat(d).forEach(function(e){this.renderQueue.push(e),v(e)&&(this.parse(e),this.renderQueue.push(new o))},this)},n.prototype.paint=function(e){try{e instanceof o?this.renderer.ctx.restore():$(e)?(I(e.parent)&&e.parent.appendToDOM(),this.paintText(e),I(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(t){if(O(t),this.options.strict)throw t}},n.prototype.paintNode=function(e){v(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},n.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(R))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var i=this.images.get(e.node);i?this.renderer.renderImage(e,t,e.borders,i):O("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var n=this.images.get(e.node.src);n?this.renderer.renderImage(e,t,e.borders,n):O("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},n.prototype.paintCheckbox=function(e){var t=e.parseBounds(),i=Math.min(t.width,t.height),n={width:i-1,height:i-1,top:t.top,left:t.left},a=[3,3],s=[a,a,a,a],o=[1,1,1,1].map(function(e){return{color:new V("#A5A5A5"),width:e}}),l=c(n,s,o);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(n.left+1,n.top+1,n.width-2,n.height-2,new V("#DEDEDE")),this.renderer.renderBorders(r(o,n,l,s)),e.node.checked&&(this.renderer.font(new V("#424242"),"normal","normal","bold",i-3+"px","arial"),this.renderer.text("✔",n.left+i/6,n.top+i-1))},this)},n.prototype.paintRadio=function(e){var t=e.parseBounds(),i=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,i,new V("#DEDEDE"),1,new V("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+i/4)+1,Math.ceil(t.top+i/4)+1,Math.floor(i/2),new V("#424242"))},this)},n.prototype.paintFormValue=function(e){var t=e.getValue();if(t.length>0){var i=e.node.ownerDocument,n=i.createElement("html2canvaswrapper"),a=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];a.forEach(function(t){try{n.style[t]=e.css(t)}catch(i){O("html2canvas: Parse: Exception caught in renderFormValue: "+i.message)}});var s=e.parseBounds();n.style.position="fixed",n.style.left=s.left+"px",n.style.top=s.top+"px",n.textContent=t,i.body.appendChild(n),this.paintText(new j(n.firstChild,e)),i.body.removeChild(n)}},n.prototype.paintText=function(e){e.applyTextTransform();var t=U.ucs2.decode(e.node.data),i=this.options.letterRendering&&!y(e)||N(e.node.data)?t.map(function(e){return U.ucs2.encode([e])}):F(t),n=e.parent.fontWeight(),a=e.parent.css("fontSize"),s=e.parent.css("fontFamily"),o=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),n,a,s),o.length?this.renderer.fontShadow(o[0].color,o[0].offsetX,o[0].offsetY,o[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){i.map(this.parseTextBounds(e),this).forEach(function(t,n){t&&(this.renderer.text(i[n],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(s,a)))},this)},this)},n.prototype.renderTextDecoration=function(e,t,i){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+i.baseline+i.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+i.middle+i.lineWidth),t.width,1,e.color("color"))}};var ee={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};n.prototype.parseBorders=function(e){var t=e.parseBounds(),i=w(e),n=["Top","Right","Bottom","Left"].map(function(t,i){var n=e.css("border"+t+"Style"),a=e.color("border"+t+"Color");"inset"===n&&a.isBlack()&&(a=new V([255,255,255,a.a]));var s=ee[n]?ee[n][i]:null;return{width:e.cssInt("border"+t+"Width"),color:s?a[s[0]](s[1]):a,args:null}}),a=c(t,i,n);return{clip:this.parseBackgroundClip(e,a,n,i,t),borders:r(n,t,a,i)}},n.prototype.parseBackgroundClip=function(e,t,i,n,a){var s=e.css("backgroundClip"),o=[];switch(s){case"content-box":case"padding-box":u(o,n[0],n[1],t.topLeftInner,t.topRightInner,a.left+i[3].width,a.top+i[0].width),u(o,n[1],n[2],t.topRightInner,t.bottomRightInner,a.left+a.width-i[1].width,a.top+i[0].width),u(o,n[2],n[3],t.bottomRightInner,t.bottomLeftInner,a.left+a.width-i[1].width,a.top+a.height-i[2].width),u(o,n[3],n[0],t.bottomLeftInner,t.topLeftInner,a.left+i[3].width,a.top+a.height-i[2].width);break;default:u(o,n[0],n[1],t.topLeftOuter,t.topRightOuter,a.left,a.top),u(o,n[1],n[2],t.topRightOuter,t.bottomRightOuter,a.left+a.width,a.top),u(o,n[2],n[3],t.bottomRightOuter,t.bottomLeftOuter,a.left+a.width,a.top+a.height),u(o,n[3],n[0],t.bottomLeftOuter,t.topLeftOuter,a.left,a.top+a.height)}return o},t.exports=n},{"./color":5,"./fontmetrics":9,"./log":15,"./nodecontainer":16,"./promise":18,"./pseudoelementcontainer":21,"./stackingcontext":24,"./textcontainer":28,"./utils":29,punycode:3}],18:[function(e,t,i){t.exports=e("es6-promise").Promise},{"es6-promise":1}],19:[function(e,t,i){function n(e,t,i){var n="withCredentials"in new XMLHttpRequest;if(!t)return d.reject("No proxy configured");var a=o(n),l=r(t,e,a);return n?p(l):s(i,l,a).then(function(e){return m(e.content)})}function a(e,t,i){var n="crossOrigin"in new Image,a=o(n),l=r(t,e,a);return n?d.resolve(l):s(i,l,a).then(function(e){return"data:"+e.type+";base64,"+e.content})}function s(e,t,i){return new d(function(n,a){var s=e.createElement("script"),o=function(){delete window.html2canvas.proxy[i],e.body.removeChild(s)};window.html2canvas.proxy[i]=function(e){o(),n(e)},s.src=t,s.onerror=function(e){o(),a(e)},e.body.appendChild(s)})}function o(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++f+"_"+Math.round(1e5*Math.random())}function r(e,t,i){return e+"?url="+encodeURIComponent(t)+(i.length?"&callback=html2canvas.proxy."+i:"")}function l(e){return function(t){var i,n=new DOMParser;try{i=n.parseFromString(t,"text/html")}catch(a){h("DOMParser not supported, falling back to createHTMLDocument"),i=document.implementation.createHTMLDocument("");try{i.open(),i.write(t),i.close()}catch(s){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),i.body.innerHTML=t}}var o=i.querySelector("base");if(!o||!o.href.host){var r=i.createElement("base");r.href=e,i.head.insertBefore(r,i.head.firstChild)}return i}}function c(e,t,i,a,s,o){return new n(e,t,window.document).then(l(e)).then(function(e){return g(e,i,a,s,o,0,0)})}var d=e("./promise"),p=e("./xhr"),u=e("./utils"),h=e("./log"),g=e("./clone"),m=u.decode64,f=0;i.Proxy=n,i.ProxyURL=a,i.loadUrlDocument=c},{"./clone":4,"./log":15,"./promise":18,"./utils":29,"./xhr":31}],20:[function(e,t,i){function n(e,t){var i=document.createElement("a");
i.href=e,e=i.href,this.src=e,this.image=new Image;var n=this;this.promise=new s(function(i,s){n.image.crossOrigin="Anonymous",n.image.onload=i,n.image.onerror=s,new a(e,t,document).then(function(e){n.image.src=e})["catch"](s)})}var a=e("./proxy").ProxyURL,s=e("./promise");t.exports=n},{"./promise":18,"./proxy":19}],21:[function(e,t,i){function n(e,t,i){a.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===i}var a=e("./nodecontainer");n.prototype.cloneTo=function(e){n.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},n.prototype=Object.create(a.prototype),n.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},n.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},n.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",t.exports=n},{"./nodecontainer":16}],22:[function(e,t,i){function n(e,t,i,n,a){this.width=e,this.height=t,this.images=i,this.options=n,this.document=a}var a=e("./log");n.prototype.renderImage=function(e,t,i,n){var a=e.cssInt("paddingLeft"),s=e.cssInt("paddingTop"),o=e.cssInt("paddingRight"),r=e.cssInt("paddingBottom"),l=i.borders,c=t.width-(l[1].width+l[3].width+a+o),d=t.height-(l[0].width+l[2].width+s+r);this.drawImage(n,0,0,n.image.width||c,n.image.height||d,t.left+a+l[3].width,t.top+s+l[0].width,c,d)},n.prototype.renderBackground=function(e,t,i){t.height>0&&t.width>0&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,i))},n.prototype.renderBackgroundColor=function(e,t){var i=e.color("backgroundColor");i.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,i)},n.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},n.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},n.prototype.renderBackgroundImage=function(e,t,i){var n=e.parseBackgroundImages();n.reverse().forEach(function(n,s,o){switch(n.method){case"url":var r=this.images.get(n.args[0]);r?this.renderBackgroundRepeating(e,t,r,o.length-(s+1),i):a("Error loading background-image",n.args[0]);break;case"linear-gradient":case"gradient":var l=this.images.get(n.value);l?this.renderBackgroundGradient(l,t,i):a("Error loading background-image",n.args[0]);break;case"none":break;default:a("Unknown background-image type",n.args[0])}},this)},n.prototype.renderBackgroundRepeating=function(e,t,i,n,a){var s=e.parseBackgroundSize(t,i.image,n),o=e.parseBackgroundPosition(t,i.image,n,s),r=e.parseBackgroundRepeat(n);switch(r){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(i,o,s,t,t.left+a[3],t.top+o.top+a[0],99999,s.height,a);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(i,o,s,t,t.left+o.left+a[3],t.top+a[0],s.width,99999,a);break;case"no-repeat":this.backgroundRepeatShape(i,o,s,t,t.left+o.left+a[3],t.top+o.top+a[0],s.width,s.height,a);break;default:this.renderBackgroundRepeat(i,o,s,{top:t.top,left:t.left},a[3],a[0])}},t.exports=n},{"./log":15}],23:[function(e,t,i){function n(e,t){s.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},r("Initialized CanvasRenderer with size",e,"x",t)}function a(e){return e.length>0}var s=e("../renderer"),o=e("../lineargradientcontainer"),r=e("../log");n.prototype=Object.create(s.prototype),n.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"==typeof e&&e.isColor?e.toString():e,this.ctx},n.prototype.rectangle=function(e,t,i,n,a){this.setFillStyle(a).fillRect(e,t,i,n)},n.prototype.circle=function(e,t,i,n){this.setFillStyle(n),this.ctx.beginPath(),this.ctx.arc(e+i/2,t+i/2,i/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},n.prototype.circleStroke=function(e,t,i,n,a,s){this.circle(e,t,i,n),this.ctx.strokeStyle=s.toString(),this.ctx.stroke()},n.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},n.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},n.prototype.drawImage=function(e,t,i,n,a,s,o,r,l){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,t,i,n,a,s,o,r,l)},n.prototype.clip=function(e,t,i){this.ctx.save(),e.filter(a).forEach(function(e){this.shape(e).clip()},this),t.call(i),this.ctx.restore()},n.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},n.prototype.font=function(e,t,i,n,a,s){this.setFillStyle(e).font=[t,i,n,a,s].join(" ").split(",")[0]},n.prototype.fontShadow=function(e,t,i,n){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",i).setVariable("shadowBlur",n)},n.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},n.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},n.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},n.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},n.prototype.text=function(e,t,i){this.ctx.fillText(e,t,i)},n.prototype.backgroundRepeatShape=function(e,t,i,n,a,s,o,r,l){var c=[["line",Math.round(a),Math.round(s)],["line",Math.round(a+o),Math.round(s)],["line",Math.round(a+o),Math.round(r+s)],["line",Math.round(a),Math.round(r+s)]];this.clip([c],function(){this.renderBackgroundRepeat(e,t,i,n,l[3],l[0])},this)},n.prototype.renderBackgroundRepeat=function(e,t,i,n,a,s){var o=Math.round(n.left+t.left+a),r=Math.round(n.top+t.top+s);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,i),"repeat")),this.ctx.translate(o,r),this.ctx.fill(),this.ctx.translate(-o,-r)},n.prototype.renderBackgroundGradient=function(e,t){if(e instanceof o){var i=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){i.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,i)}},n.prototype.resizeImage=function(e,t){var i=e.image;if(i.width===t.width&&i.height===t.height)return i;var n,a=document.createElement("canvas");return a.width=t.width,a.height=t.height,n=a.getContext("2d"),n.drawImage(i,0,0,i.width,i.height,0,0,t.width,t.height),a},t.exports=n},{"../lineargradientcontainer":14,"../log":15,"../renderer":22}],24:[function(e,t,i){function n(e,t,i,n){a.call(this,i,n),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var a=e("./nodecontainer");n.prototype=Object.create(a.prototype),n.prototype.getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},t.exports=n},{"./nodecontainer":16}],25:[function(e,t,i){function n(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}n.prototype.testRangeBounds=function(e){var t,i,n,a,s=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(i=e.createElement("boundtest"),i.style.height="123px",i.style.display="block",e.body.appendChild(i),t.selectNode(i),n=t.getBoundingClientRect(),a=n.height,123===a&&(s=!0),e.body.removeChild(i))),s},n.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},n.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),i=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(e,0,0),t.toDataURL()}catch(n){return!1}return!0},t.exports=n},{}],26:[function(e,t,i){function n(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?a.resolve(t.inlineFormatting(e)):s(e)}).then(function(e){return new a(function(i){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,i))})})}var a=e("./promise"),s=e("./xhr"),o=e("./utils").decode64;n.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?a.resolve():a.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},n.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},n.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},n.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},n.prototype.createCanvas=function(e){var t=this;return function(i,n){var a=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=a.lowerCanvasEl,a.setWidth(n.width).setHeight(n.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(i,n)).renderAll(),e(a.lowerCanvasEl)}},n.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):o(e)},t.exports=n},{"./promise":18,"./utils":29,"./xhr":31}],27:[function(e,t,i){function n(e,t){this.src=e,this.image=null;var i=this;this.promise=t?new s(function(t,n){i.image=new Image,i.image.onload=t,i.image.onerror=n,i.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),i.image.complete===!0&&t(i.image)}):this.hasFabric().then(function(){return new s(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,i.createCanvas.call(i,t))})})}var a=e("./svgcontainer"),s=e("./promise");n.prototype=Object.create(a.prototype),t.exports=n},{"./promise":18,"./svgcontainer":26}],28:[function(e,t,i){function n(e,t){s.call(this,e,t)}function a(e,t,i){if(e.length>0)return t+i.toUpperCase()}var s=e("./nodecontainer");n.prototype=Object.create(s.prototype),n.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},n.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,a);case"uppercase":return t.toUpperCase();default:return t}},t.exports=n},{"./nodecontainer":16}],29:[function(e,t,i){i.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},i.bind=function(e,t){return function(){return e.apply(t,arguments)}},i.decode64=function(e){var t,i,n,a,s,o,r,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=e.length,p="";for(t=0;t<d;t+=4)i=c.indexOf(e[t]),n=c.indexOf(e[t+1]),a=c.indexOf(e[t+2]),s=c.indexOf(e[t+3]),o=i<<2|n>>4,r=(15&n)<<4|a>>2,l=(3&a)<<6|s,p+=64===a?String.fromCharCode(o):64===s||s===-1?String.fromCharCode(o,r):String.fromCharCode(o,r,l);return p},i.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),i=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+i,left:t.left,width:i,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},i.offsetBounds=function(e){var t=e.offsetParent?i.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,right:e.offsetLeft+t.left+e.offsetWidth,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},i.parseBackgrounds=function(e){var t,i,n,a,s,o,r,l=" \r\n\t",c=[],d=0,p=0,u=function(){t&&('"'===i.substr(0,1)&&(i=i.substr(1,i.length-2)),i&&r.push(i),"-"===t.substr(0,1)&&(a=t.indexOf("-",1)+1)>0&&(n=t.substr(0,a),t=t.substr(a)),c.push({prefix:n,method:t.toLowerCase(),value:s,args:r,image:null})),r=[],t=n=i=s=""};return r=[],t=n=i=s="",e.split("").forEach(function(e){if(!(0===d&&l.indexOf(e)>-1)){switch(e){case'"':o?o===e&&(o=null):o=e;break;case"(":if(o)break;if(0===d)return d=1,void(s+=e);p++;break;case")":if(o)break;if(1===d){if(0===p)return d=0,s+=e,void u();p--}break;case",":if(o)break;if(0===d)return void u();if(1===d&&0===p&&!t.match(/^url$/i))return r.push(i),i="",void(s+=e)}s+=e,0===d?t+=e:i+=e}}),u(),c}},{}],30:[function(e,t,i){function n(e){a.apply(this,arguments),this.type="linear"===e.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}var a=e("./gradientcontainer");n.prototype=Object.create(a.prototype),t.exports=n},{"./gradientcontainer":11}],31:[function(e,t,i){function n(e){return new a(function(t,i){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){200===n.status?t(n.responseText):i(new Error(n.statusText))},n.onerror=function(){i(new Error("Network Error"))},n.send()})}var a=e("./promise");t.exports=n},{"./promise":18}]},{},[6])(6)}),!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,n=e.ui.mouse.prototype,a=n._mouseInit,s=n._mouseDestroy;n._touchStart=function(e){var n=this;!i&&n._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),a.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)}}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(["exports","echarts"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports,require("echarts")):t({},e.echarts)}(this,function(e,t){var i=function(e){"undefined"!=typeof console&&console&&console.error&&console.error(e)};return t?t.registerMap?void t.registerMap("china",{type:"FeatureCollection",features:[{id:"710000",geometry:{type:"MultiPolygon",coordinates:[["@@°Ü¯Û","@@ƛĴÕƊÉɼģºðʀ\\ƎsÆNŌÔĚänÜƤɊĂǀĆĴĤǊŨxĚĮǂƺòƌâÔ®ĮXŦţƸZûÐƕƑGđ¨ĭMó·ęcëƝɉlÝƯֹÅŃ^Ó·śŃǋƏďíåɛGɉ¿IċããF¥ĘWǬÏĶñÄ","@@\\p|WoYG¿¥Ij@","@@¡@V^RqBbAnTXeQr©C","@@ÆEEkWqë I"]],encodeOffsets:[[[122886,24033],[123335,22980],[122375,24193],[122518,24117],[124427,22618]]]},properties:{cp:[121.509062,25.044332],name:"台湾",childNum:5}},{id:"130000",geometry:{type:"MultiPolygon",coordinates:[["@@\\aM`Ç½ÓnUKĜēs¤­©yrý§uģcJ»eIP]ªrºc_ħ²G¼s`jÎŸnüsÂľP","@@U`Ts¿mÄ","@@FOhđ©OiÃ`ww^ÌkÑH«ƇǤŗĺtFu{Z}Ö@U´ʚLg®¯Oı°Ãw ^VbÉsmAê]]w§RRl£ŭuwNÁ`ÇFēÝčȻuT¡Ĺ¯Õ¯sŗő£YªhVƍ£ƅnëYNgq¼ś¿µı²UºÝUąąŖóxV@tƯJ]eR¾fe|rHA|h~Ėƍl§ÏjVë` ØoÅbbx³^zÃĶ¶Sj®AyÂhðk`«PËµEFÛ¬Y¨Ļrõqi¼Wi°§Ð±²°`[À|ĠO@ÆxO\\ta\\p_Zõ^û{ġȧXýĪÓjùÎRb^Î»j{íděYfíÙTymńŵōHim½éŅ­aVcř§ax¹XŻácWU£ôãºQ¨÷Ñws¥qEHÙ|šYQoŕÇyáĂ£MÃ°oťÊP¡mWO¡v{ôvîēÜISpÌhp¨ jdeŔQÖjX³àĈ[n`Yp@UcM`RKhEbpŞlNut®EtqnsÁgAiúoHqCXhfgu~ÏWP½¢G^}¯ÅīGCÑ^ãziMáļMTÃƘrMc|O_¯Ŏ´|morDkO\\mĆJfl@cĢ¬¢aĦtRıÒXòë¬WP{ŵǫƝīÛ÷ąV×qƥV¿aȉd³BqPBmaËđŻģmÅ®V¹d^KKonYg¯XhqaLdu¥Ípǅ¡KąÅkĝęěhq}HyÃ]¹ǧ£Í÷¿qágPmoei¤o^á¾ZEY^Ný{nOl±Í@Mċèk§daNaÇį¿]øRiiñEūiǱàUtėGyl}ÓM}jpEC~¡FtoQiHkk{ILgĽxqÈƋÄdeVDJj£J|ÅdzÂFt~KŨ¸IÆv|¢r}èonb}`RÎÄn°ÒdÞ²^®lnÐèĄlðÓ×]ªÆ}LiĂ±Ö`^°Ç¶p®đDcŋ`ZÔ¶êqvFÆN®ĆTH®¦O¾IbÐã´BĐɢŴÆíȦpĐÞXR·nndO¤OÀĈƒ­QgµFo|gȒęSWb©osx|hYhgŃfmÖĩnºTÌSp¢dYĤ¶UĈjlǐpäðëx³kÛfw²Xjz~ÂqbTÑěŨ@|oMzv¢ZrÃVw¬ŧĖ¸f°ÐTªqs{S¯r æÝl¼ÖĞ ǆiGĘJ¼lr}~K¨ŸƐÌWö¼Þ°nÞoĦL|C~D©|q]SvKÑcwpÏÏĿćènĪWlĄkT}¬Tp~®Hgd˒ĺBVtEÀ¢ôPĎƗè@~kü\\rÊĔÖæW_§¼F´©òDòjYÈrbĞāøŀG{ƀ|¦ðrb|ÀH`pʞkvGpuARhÞÆǶgĘTǼƹS£¨¡ù³ŘÍ]¿ÂyôEP xX¶¹ÜO¡gÚ¡IwÃé¦ÅBÏ|Ç°N«úmH¯âbęU~xĈbȒ{^xÖlD¸dɂ~"]],encodeOffsets:[[[120023,41045],[121616,39981],[122102,42307]]]},properties:{cp:[114.502461,38.045474],name:"河北",childNum:3}},{id:"140000",geometry:{type:"Polygon",coordinates:["@@ħÜ_ªlìwGkÛÃǏokćiµVZģ¡coTSË¹ĪmnÕńehZg{gtwªpXaĚThȑp{¶Eh®RćƑP¿£PmcªaJyý{ýȥoÅîɡųAďä³aÏJ½¥PG­ąSM­sWz½µÛYÓŖgxoOkĒCo­Èµ]¯_²ÕjāK~©ÅØ^ÔkïçămÏk]­±cÝ¯ÑÃmQÍ~_apm~ç¡qu{JÅŧ·Ls}EyÁÆcI{¤IiCfUcƌÃp§]ě«vD@¡SÀµMÅwuYY¡DbÑc¡h×]nkoQdaMç~eDÛtT©±@¥ù@É¡ZcW|WqOJmĩl«ħşvOÓ«IqăV¥D[mI~Ó¢cehiÍ]Ɠ~ĥqX·eƷn±}v[ěďŕ]_œ`¹§ÕōIo©b­s^}Ét±ū«³p£ÿ¥WÑxçÁ«h×u×¥ř¾dÒ{ºvĴÎêÌɊ²¶ü¨|ÞƸµȲLLúÉƎ¤ϊęĔV`_bªS^|dzY|dz¥pZbÆ£¶ÒK}tĦÔņƠPYznÍvX¶Ěn ĠÔzý¦ª÷ÑĸÙUȌ¸dòÜJð´ìúNM¬XZ´¤ŊǸ_tldI{¦ƀðĠȤ¥NehXnYGR° ƬDj¬¸|CĞKqºfƐiĺ©ª~ĆOQª ¤@ìǦɌ²æBÊTĞHƘÁĪËĖĴŞȀÆÿȄlŤĒötÎ½î¼ĨXh|ªM¤ÐzÞĩÒSrao³"],encodeOffsets:[[117016,41452]]},properties:{cp:[112.549248,37.857014],name:"山西",childNum:1}},{id:"150000",geometry:{type:"MultiPolygon",coordinates:[["@@ǪƫÌÛMĂ[`ÕCn}¶Vcês¯PqFB|S³C|kñHdiÄ¥sŉÅPóÑÑE^ÅPpy_YtShQ·aHwsOnŉÃs©iqjUSiº]ïW«gW¡ARëśĳĘů`çõh]y»ǃǛҤxÒm~zf}pf|ÜroÈzrKÈĵSƧż؜Ġu~è¬vîS¼ĂhĖMÈÄw\\fŦ°W ¢¾luŸDw\\Ŗĝ","@@GVu»Aylßí¹ãe]Eāò³C¹ð¾²iÒAdkò^P²CǜңǄ z¼g^èöŰ_Ĳĕê}gÁnUI«m]jvV¼euhwqAaW_µj»çjioQR¹ēÃßt@r³[ÛlćË^ÍÉáGOUÛOB±XkÅ¹£k|e]olkVÍ¼ÕqtaÏõjgÁ£§U^RLËnX°ÇBz^~wfvypV ¯ƫĉ˭ȫƗŷɿÿĿƑ˃ĝÿÃǃßËőó©ǐȍŒĖM×ÍEyxþp]ÉvïèvƀnÂĴÖ@V~Ĉ³MEĸÅĖtējyÄDXÄxGQuv_i¦aBçw˛wD©{tāmQ{EJ§KPśƘƿ¥@sCTÉ}ɃwƇy±gÑ}T[÷kÐç¦«SÒ¥¸ëBX½HáÅµÀğtSÝÂa[ƣ°¯¦Pï¡]£ġÒk®G²èQ°óMq}EóƐÇ\\@áügQÍu¥FTÕ¿Jû]|mvāÎYua^WoÀa·­ząÒot×¶CLƗi¯¤mƎHǊ¤îìɾŊìTdåwsRÖgĒųúÍġäÕ}Q¶¿A[¡{d×uQAMxVvMOmăl«ct[wº_ÇÊjbÂ£ĦS_éQZ_lwgOiýe`YYJq¥IÁǳ£ÙË[ÕªuƏ³ÍTs·bÁĽäė[b[ŗfãcn¥îC¿÷µ[ŏÀQ­ōĉm¿Á^£mJVmL[{Ï_£F¥Ö{ŹA}×Wu©ÅaųĳƳhB{·TQqÙIķËZđ©Yc|M¡LeVUóK_QWk_ĥ¿ãZ»X\\ĴuUèlG®ěłTĠğDŃGÆÍz]±ŭ©Å]ÅÐ}UË¥©TċïxgckfWgi\\ÏĒ¥HkµEë{»ÏetcG±ahUiñiWsɁ·cCÕk]wȑ|ća}wVaĚá G°ùnM¬¯{ÈÐÆA¥ÄêJxÙ¢hP¢ÛºµwWOóFÁz^ÀŗÎú´§¢T¤ǻƺSėǵhÝÅQgvBHouʝl_o¿Ga{ïq{¥|ſĿHĂ÷aĝÇqZñiñC³ª»E`¨åXēÕqÉû[l}ç@čƘóO¿¡FUsAʽīccocÇS}£IS~ălkĩXçmĈŀÐoÐdxÒuL^T{r@¢ÍĝKén£kQyÅõËXŷƏL§~}kq»IHėǅjĝ»ÑÞoå°qTt|r©ÏS¯·eŨĕx«È[eM¿yupN~¹ÏyN£{©għWí»Í¾səšǅ_ÃĀɗ±ąĳĉʍŌŷSÉA±åǥɋ@ë£R©ąP©}ĹªƏj¹erLDĝ·{i«ƫC½ÉshVzGS|úþXgp{ÁX¿ć{ƱȏñZáĔyoÁhA}ŅĆfdŉ_¹Y°ėǩÑ¡H¯¶oMQqð¡Ë|Ñ`ƭŁX½·óÛxğįÅcQs«tȋǅFù^it«Č¯[hAi©á¥ÇĚ×l|¹y¯Kȝqgů{ñǙµïċĹzŚȭ¶¡oŽäÕG\\ÄT¿Òõr¯LguÏYęRƩɷŌO\\İÐ¢æ^Ŋ ĲȶȆbÜGĝ¬¿ĚVĎgª^íu½jÿĕęjık@Ľ]ėl¥ËĭûÁėéV©±ćn©­ȇÍq¯½YÃÔŉÉNÑÅÝy¹NqáʅDǡËñ­ƁYÅy̱os§ȋµʽǘǏƬɱàưN¢ƔÊuľýľώȪƺɂļxZĈ}ÌŉŪĺœĭFЛĽ̅ȣͽÒŵìƩÇϋÿȮǡŏçƑůĕ~Ç¼ȳÐUfdIxÿ\\G zâɏÙOº·pqy£@qþ@Ǟ˽IBäƣzsÂZÁàĻdñ°ŕzéØűzșCìDȐĴĺf®Àľưø@ɜÖÞKĊŇƄ§͑těï͡VAġÑÑ»d³öǍÝXĉĕÖ{þĉu¸ËʅğU̎éhɹƆ̗̮ȘǊ֥ड़ࡰţાíϲäʮW¬®ҌeרūȠkɬɻ̼ãüfƠSצɩςåȈHϚÎKǳͲOðÏȆƘ¼CϚǚ࢚˼ФÔ¤ƌĞ̪Qʤ´¼mȠJˀƲÀɠmɆǄĜƠ´ǠN~ʢĜ¶ƌĆĘźʆȬ˪ĚĒ¸ĞGȖƴƀj`ĢçĶāàŃºēĢĖćYÀŎüôQÐÂŎŞǆŞêƖoˆDĤÕºÑǘÛˤ³̀gńƘĔÀ^ªƂ`ªt¾äƚêĦĀ¼ÐĔǎ¨Ȕ»͠^ˮÊȦƤøxRrŜH¤¸ÂxDÄ|ø˂˜ƮÐ¬ɚwɲFjĔ²Äw°ǆdÀÉ_ĸdîàŎjÊêTĞªŌŜWÈ|tqĢUB~´°ÎFCU¼pĀēƄN¦¾O¶łKĊOjĚj´ĜYp{¦SĚÍ\\T×ªV÷Ší¨ÅDK°ßtŇĔK¨ǵÂcḷ̌ĚǣȄĽFlġUĵŇȣFʉɁMğįʏƶɷØŭOǽ«ƽū¹Ʊő̝Ȩ§ȞʘĖiɜɶʦ}¨֪ࠜ̀ƇǬ¹ǨE˦ĥªÔêFxúQEr´Wrh¤Ɛ \\talĈDJÜ|[Pll̚¸ƎGú´P¬W¦^¦H]prRn|or¾wLVnÇIujkmon£cX^Bh`¥V¦U¤¸}xRj[^xN[~ªxQ[`ªHÆÂExx^wN¶Ê|¨ìMrdYpoRzNyÀDs~bcfÌ`L¾n|¾T°c¨È¢ar¤`[|òDŞĔöxElÖdHÀI`Ď\\Àì~ÆR¼tf¦^¢ķ¶eÐÚMptgjɡČÅyġLûŇV®ÄÈƀĎ°P|ªVVªj¬ĚÒêp¬E|ŬÂ_~¼rƐK f{ĘFĒƌXưăkÃĄ}nµo×q£ç­kX{uĩ«āíÓUŅÝVUŌ]Ť¥lyň[oi{¦LĸĦ^ôâJ¨^UZðÚĒL¿Ìf£K£ʺoqNwğc`uetOj×°KJ±qÆġmĚŗos¬qehqsuH{¸kH¡ÊRǪÇƌbȆ¢´äÜ¢NìÉʖ¦â©Ɨؗ"]],encodeOffsets:[[[128500,52752],[127089,51784]]]},properties:{cp:[111.670801,40.818311],name:"内蒙古",childNum:2}},{id:"210000",geometry:{type:"MultiPolygon",coordinates:[["@@L@@s]","@@MnNm","@@dc","@@eÀC@b","@@fXwkbrÄ`qg","@@^jtWQ","@@~ Y[c","@@I`ĖN^_¿ZÁM","@@Ïxǌ{q_×^Gigp","@@iX¶BY","@@YZ","@@L_yG`b","@@^WqCTZ","@@\\[§t|]","@@m`p[","@@@é^BntaÊU]x ¯ÄPĲ­°hʙK³VÕ@Y~|EvĹsÇ¦­L^pÃ²ŸÒG Ël]xxÄ_fT¤Ď¤cPC¨¸TVjbgH²sdÎdHt`B²¬GJję¶[ÐhjeXdlwhðSČ¦ªVÊÏÆZÆŶ®²^ÎyÅHńĚDMħĜŁH­kçvV[ĳ¼WYÀäĦ`XlR`ôLUVfK¢{NZdĒªYĸÌÚJRr¸SA|ƴgŴĴÆbvªØX~źB|¦ÕE¤Ð`\\|KUnnI]¤ÀÂĊnŎR®Ő¿¶\\ÀøíDm¦ÎbŨabaĘ\\ľãÂ¸atÎSƐ´©v\\ÖÚÌǴ¤Â¨JKrZ_ZfjþhPkx`YRIjJcVf~sCN¤ EhæmsHy¨SðÑÌ\\\\ĐRÊwS¥fqŒßýáĞÙÉÖ[^¯ǤŲê´\\¦¬ĆPM¯£»uïpùzExanµyoluqe¦W^£ÊL}ñrkqWňûPUP¡ôJoo·U}£[·¨@XĸDXm­ÛÝºGUCÁª½{íĂ^cjk¶Ã[q¤LÉö³cux«|Zd²BWÇ®Yß½ve±ÃCý£W{Ú^q^sÑ·¨ËMr¹·C¥GDrí@wÕKţÃ«V·i}xËÍ÷i©ĝɝǡ]{c±OW³Ya±_ç©HĕoƫŇqr³Lys[ñ³¯OSďOMisZ±ÅFC¥Pq{Ã[Pg}\\¿ghćOk^ĩÃXaĕËĥM­oEqqZûěŉ³F¦oĵhÕP{¯~TÍlªNßYÐ{Ps{ÃVUeĎwk±ŉVÓ½ŽJãÇÇ»Jm°dhcÀffdF~ĀeĖd`sx² ®EĦ¦dQÂd^~ăÔH¦\\LKpĄVez¤NP ǹÓRÆąJSh­a[¦´ÂghwmBÐ¨źhI|VV|p] Â¼èNä¶ÜBÖ¼L`¼bØæKVpoúNZÞÒKxpw|ÊEMnzEQIZZNBčÚFÜçmĩWĪñtÞĵÇñZ«uD±|ƏlǗw·±PmÍada CLǑkùó¡³Ï«QaċÏOÃ¥ÕđQȥċƭy³ÁA"]],encodeOffsets:[[[123686,41445],[126019,40435],[124393,40128],[126117,39963],[125322,40140],[126686,40700],[126041,40374],[125584,40168],[125509,40217],[125453,40165],[125362,40214],[125280,40291],[125774,39997],[125976,40496],[125822,39993],[122731,40949]]]},properties:{cp:[123.429096,41.796767],name:"辽宁",childNum:16}},{id:"220000",geometry:{type:"Polygon",coordinates:["@@ñr½ÉKāGÁ¤ia ÉÈ¹`\\xs¬dĆkNnuNUwNx¶c¸|\\¢GªóĄ~RãÖÎĢùđŴÕhQxtcæëSɽŉíëǉ£ƍG£nj°KƘµDsØÑpyĆ¸®¿bXp]vbÍZuĂ{n^IüÀSÖ¦EvRÎûh@â[ƏÈô~FNr¯ôçR±­HÑlĢ^¤¢OðætxsŒ]ÞÁTĠs¶¿âÆGW¾ìA¦·TÑ¬è¥ÏÐJ¨¼ÒÖ¼ƦɄxÊ~StD@Ă¼Ŵ¡jlºWvÐzƦZÐ²CH AxiukdGgetqmcÛ£Ozy¥cE}|¾cZk¿uŐã[oxGikfeäT@SUwpiÚFM©£è^Ú`@v¶eňf heP¶täOlÃUgÞzŸU`l}ÔÆUvØ_Ō¬Öi^ĉi§²ÃB~¡ĈÚEgc|DC_Ȧm²rBx¼MÔ¦ŮdĨÃâYxƘDVÇĺĿg¿cwÅ\\¹¥Yĭl¤OvLjM_a W`zļMž·\\swqÝSAqŚĳ¯°kRē°wx^ĐkǂÒ\\]nrĂ}²ĊŲÒøãh·M{yMzysěnĒġV·°G³¼XÀ¤¹i´o¤ŃÈ`ÌǲÄUĞd\\iÖmÈBĤÜɲDEh LG¾ƀÄ¾{WaYÍÈĢĘÔRîĐj}ÇccjoUb½{h§Ǿ{KƖµÎ÷GĄØŜçưÌs«lyiē«`å§H¥Ae^§GK}iã\\c]v©ģZmÃ|[M}ģTɟĵÂÂ`ÀçmFK¥ÚíÁbX³ÌQÒHof{]ept·GŋĜYünĎųVY^ydõkÅZW«WUa~U·SbwGçǑiW^qFuNĝ·EwUtW·Ýďæ©PuqEzwAVXRãQ`­©GYYhcUGorBd}ģÉb¡·µMicF«Yƅ»é\\ɹ~ǙG³mØ©BšuT§Ĥ½¢Ã_Ã½L¡ûsT\\rke\\PnwAKy}ywdSefµ]UhĿD@mÿvaÙNSkCuncÿ`lWėVâ¦÷~^fÏ~vwHCį`xqT­­lW«ï¸skmßEGqd¯R©Ý¯¯S\\cZ¹iűƏCuƍÓXoR}M^o£R}oªU­FuuXHlEÅÏ©¤ßgXþ¤D²ÄufàÀ­XXÈ±Ac{Yw¬dvõ´KÊ£\\rµÄlidā]|î©¾DÂVH¹Þ®ÜWnCķ W§@\\¸~¤Vp¸póIO¢VOŇürXql~òÉK]¤¥Xrfkvzpm¶bwyFoúvð¼¤ N°ąO¥«³[éǣű]°Õ\\ÚÊĝôîŇÔaâBYlďQ[ Ë[ïÒ¥RI|`j]P"],encodeOffsets:[[126831,44503]]},properties:{cp:[125.3245,43.886841],name:"吉林",childNum:1}},{id:"230000",geometry:{type:"MultiPolygon",coordinates:[["@@UµNÿ¥īèçHÍøƕ¶Lǽ|g¨|a¾pVidd~ÈiíďÓQġėÇZÎXb½|ſÃH½KFgɱCģÛÇAnjÕc[VĝǱÃËÇ_ £ń³pj£º¿»WH´¯U¸đĢmtĜyzzNN|g¸÷äűÑ±ĉā~mq^[ǁÑďlw]¯xQĔ¯l°řĴrBÞTxr[tŽ¸ĻN_yX`biNKuP£kZĮ¦[ºxÆÀdhĹŀUÈƗCwáZħÄŭcÓ¥»NAw±qȥnD`{ChdÙFć}¢A±Äj¨]ĊÕjŋ«×`VuÓÅ~_kŷVÝyhVkÄãPsOµfgeŇµf@u_Ù ÙcªNªÙEojVxT@ãSefjlwH\\pŏäÀvlY½d{F~¦dyz¤PÜndsrhfHcvlwjF£G±DÏƥYyÏu¹XikĿ¦ÏqƗǀOŜ¨LI|FRĂn sª|C˜zxAè¥bfudTrFWÁ¹Am|ĔĕsķÆF´N}ćUÕ@Áĳſmuçuð^ÊýowFzØÎĕNőǏȎôªÌŒǄàĀÄ˄ĞŀƒʀĀƘŸˮȬƬĊ°Uzouxe]}AyÈW¯ÌmKQ]Īºif¸ÄX|sZt|½ÚUÎ lk^p{f¤lºlÆW A²PVÜPHÊâ]ÎĈÌÜk´\\@qàsĔÄQºpRij¼èi`¶bXrBgxfv»uUi^v~J¬mVp´£´VWrnP½ì¢BX¬hðX¹^TjVriªjtŊÄmtPGx¸bgRsT`ZozÆO]ÒFôÒOÆŊvÅpcGêsx´DR{AEOr°x|íb³Wm~DVjºéNNËÜ˛ɶ­GxŷCSt}]ûōSmtuÇÃĕNāg»íT«u}ç½BĵÞʣ¥ëÊ¡MÛ³ãȅ¡ƋaǩÈÉQG¢·lG|tvgrrf«ptęŘnÅĢrI²¯LiØsPf_vĠdxM prʹL¤¤eËÀđKïÙVY§]Ióáĥ]ķK¥j|pŇ\\kzţ¦šnņäÔVĂîĪ¬|vW®l¤èØrxm¶ă~lÄƯĄ̈́öȄEÔ¤ØQĄĄ»ƢjȦOǺ¨ìSŖÆƬyQv`cwZSÌ®ü±Ǆ]ŀç¬B¬©ńzƺŷɄeeOĨSfm ĊƀP̎ēz©ĊÄÕÊmgÇsJ¥ƔŊśæÎÑqv¿íUOµªÂnĦÁ_½ä@êí£P}Ġ[@gġ}gɊ×ûÏWXá¢užƻÌsNÍ½ƎÁ§čŐAēeL³àydl¦ĘVçŁpśǆĽĺſÊQíÜçÛġÔsĕ¬Ǹ¯YßċġHµ ¡eå`ļrĉŘóƢFìĎWøxÊkƈdƬv|I|·©NqńRŀ¤éeŊŀàŀU²ŕƀBQ£Ď}L¹Îk@©ĈuǰųǨÚ§ƈnTËÇéƟÊcfčŤ^XmHĊĕË«W·ċëx³ǔķÐċJāwİ_ĸȀ^ôWr­°oú¬ĦŨK~ȰCĐ´Ƕ£fNÎèâw¢XnŮeÂÆĶ¾¾xäLĴĘlļO¤ÒĨA¢Êɚ¨®ØCÔ ŬGƠƦYĜĘÜƬDJg_ͥœ@čŅĻA¶¯@wÎqC½Ĉ»NăëKďÍQÙƫ[«ÃígßÔÇOÝáWñuZ¯ĥŕā¡ÑķJu¤E å¯°WKÉ±_d_}}vyõu¬ï¹ÓU±½@gÏ¿rÃ½DgCdµ°MFYxw¿CG£Rƛ½Õ{]L§{qqą¿BÇƻğëܭǊË|c²}Fµ}ÙRsÓpg±QNqǫŋRwŕnéÑÉK«SeYRŋ@{¤SJ}D Ûǖ֍]gr¡µŷjqWÛham³~S«Ü[","@@ƨĶTLÇyqpÇÛqe{~oyen}s`qiXGù]Ëp½©lÉÁp]Þñ´FĂ^fäîºkàz¼BUv¬D"]],encodeOffsets:[[[134456,44547],[127123,51780]]]},properties:{cp:[126.642464,45.756967],name:"黑龙江",childNum:2}},{id:"320000",geometry:{type:"Polygon",coordinates:["@@Õg^vÁbnÀ`Jnĝ¬òM¶ĘTÖŒbe¦¦{¸ZâćNp©Hp|`mjhSEb\\afv`sz^lkljÄtg¤D­¾X¿À|ĐiZȀåB·î}GL¢õcßjayBFµÏC^ĭcÙt¿sğH]j{s©HM¢QnDÀ©DaÜÞ·jgàiDbPufjDk`dPOîhw¡ĥ¥GP²ĐobºrYî¶aHŢ´ ]´rılw³r_{£DB_Ûdåuk|Ũ¯F Cºyr{XFye³Þċ¿ÂkĭB¿MvÛpm`rÚã@Ę¹hågËÖƿxnlč¶Åì½Ot¾dJlVJĂǀŞqvnO^JZż·Q}êÍÅmµÒ]ƍ¦Dq}¬R^èĂ´ŀĻĊIÔtĲyQŐĠMNtR®òLhĚs©»}OÓGZz¶A\\jĨFäOĤHYJvÞHNiÜaĎÉnFQlNM¤B´ĄNöɂtpŬdZÅglmuÇUšŞÚb¤uŃJŴu»¹ĄlȖħŴw̌ŵ²ǹǠ͛hĭłƕrçü±Yrřl¥i`ã__¢ćSÅr[Çq^ùzWmOĈaŐÝɞï²ʯʊáĘĳĒǭPħ͍ôƋÄÄÍīçÛɈǥ£­ÛmY`ó£Z«§°Ó³QafusNıǅ_k}¢m[ÝóDµ¡RLčiXyÅNïă¡¸iĔÏNÌķoıdōîåŤûHcs}~Ûwbù¹£¦ÓCtOPrE^ÒogĉIµÛÅʹK¤½phMú`mR¸¦PƚgÉLRs`£¯ãhD¨|³¤C"],encodeOffsets:[[121451,32518]]},properties:{cp:[118.767413,32.041544],name:"江苏",childNum:1}},{id:"330000",geometry:{type:"MultiPolygon",coordinates:[["@@jX^n","@@sfdM","@@qP\\xz[_i","@@o\\VzRZ}mECy","@@R¢FX}°[m]","@@Cb\\}","@@e|v\\laus","@@v~s{","@@QxÂF©}","@@¹nvÞs©m","@@rQgYIh","@@bi«ZX","@@p[}ILd","@@À¿|","@@¹dnb","@@rS}[Kl","@@g~h}","@@FlCk","@@ůTG°ĄLHm°UF","@@OdRe","@@v[u\\","@@FjâL~wyoo~sµLZ","@@¬e¹aH","@@\\nÔ¡q]L³ë\\ÿ®QÌ","@@ÊA­©]ª","@@Kxv{­","@@@hlIk_","@@pWcrxp","@@Md|_iA","@@¢X£½z\\ðpN","@@hlÜ[LykAvyfw^E ","@@fp¤MusH","@@®_ma~LÁ¬`","@@@°¡mÛGĕ¨§Ianá[ýƤjfæÐNäGp","@@iMt\\","@@Zc[b","@@X®±GrÆ°Zæĉm","@@Z~dOSo|A¿qZv","@@@`EN£p","@@|s","@@@nDi","@@na£¾uYL¯QªmĉÅdMgÇjcº«ę¬­K­´B«Âącoċ\\xK`cįŧ«®á[~ıxu·ÅKsËÉc¢Ù\\ĭƛëbf¹­ģSĜkáƉÔ­ĈZB{aMµfzŉfÓÔŹŁƋǝÊĉ{ğč±g³ne{ç­ií´S¬\\ßðK¦w\\iqªĭiAuA­µ_W¥ƣO\\lċĢttC¨£t`PZäuXßBsĻyekOđġĵHuXBµ]×­­\\°®¬F¢¾pµ¼kŘó¬Wät¸|@L¨¸µrºù³Ù~§WIZW®±Ð¨ÒÉx`²pĜrOògtÁZ{üÙ[|ûKwsPlU[}¦Rvn`hsª^nQ´ĘRWb_ rtČFIÖkĦPJ¶ÖÀÖJĈĄTĚòC ²@PúØz©Pî¢£CÈÚĒ±hŖl¬â~nm¨f©iļ«mntqÒTÜÄjL®EÌFª²iÊxØ¨IÈhhst[Ôx}dtüGæţŔïĬaĸpMËÐjē¢·ðĄÆMzjWKĎ¢Q¶À_ê_@ıi«pZgf¤Nrq]§ĂN®«H±yƳí¾×ŊďŀĐÏŴǝĂíÀBŖÕªÁŐTFqĉ¯³ËCĕģi¨hÜ·ñt»¯Ï","@@ºwZRkĕWK "]],encodeOffsets:[[[125785,31436],[125729,31431],[125513,31380],[125329,30690],[125223,30438],[125115,30114],[124815,29155],[124419,28746],[124095,28635],[124005,28609],[125e3,30713],[125111,30698],[125078,30682],[125150,30684],[124014,28103],[125008,31331],[125411,31468],[125329,31479],[125369,31139],[125626,30916],[125417,30956],[125254,30976],[125199,30997],[125095,31058],[125083,30915],[124885,31015],[125218,30798],[124867,30838],[124755,30788],[124802,30809],[125267,30657],[125218,30578],[125200,30562],[125192,30787],[124968,30474],[125167,30396],[125115,30363],[124955,29879],[124714,29781],[124762,29462],[124325,28754],[124863,30077],[125366,31477]]]},properties:{cp:[120.153576,30.287459],name:"浙江",childNum:43}},{id:"340000",geometry:{type:"MultiPolygon",coordinates:[["@@^iuLV\\","@@e©Edh","@@´CE¶zAXêeödK¡~H¸íæAȽd{ďÅÀ½W®£ChÃsikkly]_teu[bFaTign{]GqªoĈMYá|·¥f¥őaSÕėNµñĞ«Im_m¿Âa]uĜp Z_§{Cäg¤°r[_YjÆOdý[I[á·¥Q_nùgL¾mzˆDÜÆ¶ĊJhpc¹O]iŠ]¥ jtsggDÑ¡w×jÉ©±EFË­KiÛÃÕYvsm¬njĻª§emná}k«ŕgđ²ÙDÇ¤í¡ªOy×Où±@DñSęćăÕIÕ¿IµĥOlJÕÍRÍ|JìĻÒåyķrĕq§ÄĩsWÆßF¶X®¿mwRIÞfßoG³¾©uyHį{Ɓħ¯AFnuPÍÔzVdàôº^Ðæd´oG¤{S¬ćxã}ŧ×Kǥĩ«ÕOEÐ·ÖdÖsƘÑ¨[Û^Xr¢¼§xvÄÆµ`K§ tÒ´Cvlo¸fzŨð¾NY´ı~ÉĔēßúLÃÃ_ÈÏ|]ÂÏHlg`ben¾¢pUh~ƴĖ¶_r sĄ~cƈ]|r c~`¼{À{ȒiJjz`îÀT¥Û³]u}fïQl{skloNdjäËzDvčoQďHI¦rbrHĖ~BmlNRaĥTX\\{fÁKÁ®TLÂÄMtÊgĀDĄXƔvDcÎJbt[¤D@®hh~kt°ǾzÖ@¾ªdbYhüóV´ŮŒ¨Üc±r@J|àuYÇÔG·ĚąĐlŪÚpSJ¨ĸLvÞcPæķŨ®mÐálsgd×mQ¨ųÆ©Þ¤IÎs°KZpĄ|XwWdĎµmkǀwÌÕæhºgBĝâqÙĊzÖgņtÀÁĂÆáhEz|WzqD¹°Eŧl{ævÜcA`¤C`|´qxĲkq^³³GšµbíZ¹qpa±ď OH¦Ħx¢gPícOl_iCveaOjChß¸iÝbÛªCC¿mRV§¢A|tbkĜEÀtîm^g´fÄ"]],encodeOffsets:[[[121722,32278],[119475,30423],[121606,33646]]]},properties:{cp:[117.283042,31.86119],name:"安徽",childNum:3}},{id:"350000",geometry:{type:"MultiPolygon",coordinates:[["@@zht´}[","@@aj^~ĆGå","@@edHse","@@@vPGsyQ","@@sBzddW[O","@@S¨Qy","@@NVucW","@@qptB@q","@@¸[iu","@@Q\\pD[_","@@jSwUappI","@@eXª~","@@AjvFoo","@@fT_Çí\\v|ba¦jZÆy|®","@@IjLg","@@wJIx«¼AoNe{M¥","@@K±¡ÓČ~N¾","@@k¡¹Eh~c®uDqZì¡I~Māe£bN¨gZý¡a±Öcp©PhI¢QqÇGj|¥U g[Ky¬ŏv@OptÉEF\\@ åA¬V{XģĐBycpě¼³Ăp·¤¥ohqqÚ¡ŅLs^Ã¡§qlÀhH¨MCe»åÇGD¥zPO£čÙkJA¼ßėuĕeûÒiÁŧS[¡Uûŗ½ùěcÝ§SùĩąSWó«íęACµeRåǃRCÒÇZÍ¢ź±^dlstjD¸ZpuÔâÃH¾oLUêÃÔjjēò´ĄWƛ^Ñ¥Ħ@ÇòmOw¡õyJyD}¢ďÑÈġfZda©º²z£NjD°Ötj¶¬ZSÎ~¾c°¶ÐmxO¸¢Pl´SL|¥AȪĖMņĲg®áIJČĒü` QF¬h|ĂJ@zµ |ê³È ¸UÖŬŬÀCtrĸr]ðM¤ĶĲHtÏ AĬkvsq^aÎbvdfÊòSD´Z^xPsĂrvƞŀjJd×ŘÉ ®AÎ¦ĤdxĆqAZRÀMźnĊ»İÐZ YXæJyĊ²·¶q§·K@·{sXãô«lŗ¶»o½E¡­«¢±¨Y®Ø¶^AvWĶGĒĢPlzfļtàAvWYãO_¤sD§ssČġ[kƤPX¦`¶®BBvĪjv©jx[L¥àï[F¼ÍË»ğV`«Ip}ccÅĥZEãoP´B@D¸m±z«Ƴ¿å³BRØ¶Wlâþäą`]Z£Tc ĹGµ¶Hm@_©k¾xĨôȉðX«½đCIbćqK³ÁÄš¬OAwã»aLŉËĥW[ÂGIÂNxĳ¤D¢îĎÎB§°_JGs¥E@¤ućPåcuMuw¢BI¿]zG¹guĮI"]],encodeOffsets:[[[123250,27563],[122541,27268],[123020,27189],[122916,27125],[122887,26845],[122808,26762],[122568,25912],[122778,26197],[122515,26757],[122816,26587],[123388,27005],[122450,26243],[122578,25962],[121255,25103],[120987,24903],[122339,25802],[121042,25093],[122439,26024]]]},properties:{cp:[119.306239,26.075302],name:"福建",childNum:18}},{id:"360000",geometry:{type:"Polygon",coordinates:["@@ÖP¬ǦĪØLŨä~Ĉw«|TH£pc³Ïå¹]ĉđxe{ÎÓvOEm°BƂĨİ|Gvz½ª´HàpeJÝQxnÀW­EµàXÅĪt¨ÃĖrÄwÀFÎ|Ă¡WÕ¸cf¥XaęST±m[r«_gmQu~¥V\\OkxtL E¢Ú^~ýØkbēqoě±_Êw§Ñ²ÏƟė¼mĉŹ¿NQYBąrwģcÍ¥B­ŗÊcØiIƝĿuqtāwO]³YCñTeÉcaubÍ]trluīBÐGsĵıN£ï^ķqsq¿DūūVÕ·´Ç{éĈýÿOER_đûIċâJh­ŅıNȩĕB¦K{Tk³¡OP·wnµÏd¯}½TÍ«YiµÕsC¯iM¤­¦¯P|ÿUHvhe¥oFTuõ\\OSsMòđƇiaºćXĊĵà·çhƃ÷Ç{ígu^đgm[ÙxiIN¶Õ»lđÕwZSÆv©_ÈëJbVkĔVÀ¤P¾ºÈMÖxlò~ªÚàGĂ¢B±ÌKyñ`w²¹·`gsÙfIěxŕeykpudjuTfb·hh¿Jd[\\LáƔĨƐAĈepÀÂMD~ņªe^\\^§ý©j×cZØ¨zdÒa¶lÒJìõ`oz÷@¤uŞ¸´ôęöY¼HČƶajlÞƩ¥éZ[|h}^U  ¥pĄžƦO lt¸Æ Q\\aÆ|CnÂOjt­ĚĤdÈF`¶@Ðë ¦ōÒ¨SêvHĢÛ@[ÆQoxHW[ŰîÀt¦Ǆ~NĠ¢lĄtZoCƞÔºCxrpČNpj¢{f_Y`_eq®Aot`@oDXfkp¨|s¬\\DÄSfè©Hn¬^DhÆyøJhØxĢĀLÊƠPżċĄwĮ¶"],encodeOffsets:[[118923,30536]]},properties:{cp:[115.892151,28.676493],name:"江西",childNum:1}},{id:"370000",geometry:{type:"MultiPolygon",coordinates:[["@@Xjd]mE","@@itnq","@@Dl@k","@@TGw","@@K¬U","@@Wd`c","@@PtMs","@@LnXlc","@@ppVu]Qn","@@cdzAU_","@@udRhnCE","@@oIpP","@@M{ĿčwbxƨîKÎMĮ]ZF½Y]â£ph¶¨râøÀÎǨ¤^ºÄGz~grĚĜlĞÆLĆǆ¢Îo¦cvKbgr°WhmZp L]LºcUÆ­nżĤÌĒbAnrOA´ȊcÀbƦUØrĆUÜøĬƞŶǬĴóò_A̈«ªdÎÉnb²ĦhņBĖįĦåXćì@L¯´ywƕCéÃµė ƿ¸lµZæyj|BíÂKNNnoƈfÈMZwnŐNàúÄsTJULîVjǎ¾ĒØDz²XPn±ŴPè¸ŔLƔÜƺ_TüÃĤBBċÈöA´faM¨{«M`¶d¡ôÖ°mȰBÔjj´PM|c^d¤u¤Û´ä«ƢfPk¶Môl]Lb}su^ke{lCMrDÇ­]NÑFsmoõľHyGă{{çrnÓEƕZGª¹Fj¢ÿ©}ÌCǷë¡ąuhÛ¡^KxC`C\\bÅxì²ĝÝ¿_NīCȽĿåB¥¢·IŖÕy\\¹kxÃ£ČáKµË¤ÁçFQ¡KtŵƋ]CgÏAùSedcÚźuYfyMmhUWpSyGwMPqŀÁ¼zK¶G­Y§Ë@´śÇµƕBm@IogZ¯uTMx}CVKï{éƵP_K«pÛÙqċtkkù]gTğwoɁsMõ³ăAN£MRkmEÊčÛbMjÝGuIZGPģãħE[iµBEuDPÔ~ª¼ęt]ûG§¡QMsğNPŏįzs£Ug{đJĿļā³]ç«Qr~¥CƎÑ^n¶ÆéÎR~Ż¸YI] PumŝrƿIā[xeÇ³L¯v¯s¬ÁY~}ťuŁgƋpÝĄ_ņī¶ÏSR´ÁP~¿Cyċßdwk´SsX|t`Ä ÈðAªìÎT°¦Dda^lĎDĶÚY°`ĪŴǒàŠv\\ebZHŖR¬ŢƱùęOÑM­³FÛaj"]],encodeOffsets:[[[123806,39303],[123821,39266],[123742,39256],[123702,39203],[123649,39066],[123847,38933],[123580,38839],[123894,37288],[123043,36624],[123344,38676],[123522,38857],[123628,38858],[118267,36772]]]
},properties:{cp:[117.000923,36.675807],name:"山东",childNum:13}},{id:"410000",geometry:{type:"MultiPolygon",coordinates:[["@@dXD}~Hgq~ÔN~zkĘHVsǲßjŬŢ`Pûàl¢\\ÀEhİgÞē X¼`khÍLùµP³swIÓzeŠĠð´E®ÚPtºIŊÊºL«šŕQGYfa[şußǑĩų_Z¯ĵÙčC]kbc¥CS¯ëÍB©ïÇÃ_{sWTt³xlàcČzÀD}ÂOQ³ÐTĬµƑÐ¿ŸghłŦv~}ÂZ«¤lPÇ£ªÝŴÅR§ØnhctâknÏ­ľŹUÓÝdKuķI§oTũÙďkęĆH¸Ó\\Ä¿PcnS{wBIvÉĽ[GqµuŇôYgûZca©@½Õǽys¯}lgg@­C\\£asIdÍuCQñ[L±ęk·ţb¨©kK»KC²òGKmĨS`UQnk}AGēsqaJ¥ĐGRĎpCuÌy ã iMcplk|tRkðev~^´¦ÜSí¿_iyjI|ȑ|¿_»d}q^{Ƈdă}tqµ`ŷé£©V¡om½ZÙÏÁRD|JOÈpÀRsI{ùÓjuµ{t}uËRivGçJFjµåkWê´MÂHewixGw½Yŷpµú³XU½ġyłåkÚwZX·l¢Á¢KzOÎÎjc¼htoDHr|­J½}JZ_¯iPq{tę½ĕ¦Zpĵø«kQĹ¤]MÛfaQpě±ǽ¾]u­Fu÷nčÄ¯ADp}AjmcEÇaª³o³ÆÍSƇĈÙDIzçñİ^KNiÞñ[aA²zzÌ÷D|[íÄ³gfÕÞd®|`Ć~oĠƑô³ŊD×°¯CsøÂ«ìUMhTº¨¸ǝêWÔDruÂÇZ£ĆPZW~ØØv¬gèÂÒw¦X¤Ā´oŬ¬²Ês~]®tªapŎJ¨Öº_ŔfŐ\\Đ\\Ĝu~m²Ƹ¸fWĦrƔ}Î^gjdfÔ¡J}\\n C¦þWxªJRÔŠu¬ĨĨmFdM{\\d\\YÊ¢ú@@¦ª²SÜsC}fNècbpRmlØ^gd¢aÒ¢CZZxvÆ¶N¿¢T@uC¬^ĊðÄn|lIlXhun[","@@hzUq"]],encodeOffsets:[[[116744,37216],[116480,33048]]]},properties:{cp:[113.665412,34.757975],name:"河南",childNum:2}},{id:"420000",geometry:{type:"MultiPolygon",coordinates:[["@@ASd","@@ls{d","@@¾«}{ra®pîÃ\\{øCËyyB±b\\òÝjKL ]ĎĽÌJyÚCƈćÎT´Å´pb©ÈdFin~BCo°BĎÃømv®E^vǾ½Ĝ²RobÜeN^ĺ£R¬lĶ÷YoĖ¥Ě¾|sOr°jY`~I¾®I{GqpCgyl{£ÍÍyPLÂ¡¡¸kWxYlÙæŁĢz¾V´W¶ùŸo¾ZHxjwfxGNÁ³Xéæl¶EièIH ujÌQ~v|sv¶Ôi|ú¢FhQsğ¦SiŠBgÐE^ÁÐ{čnOÂÈUÎóĔÊēĲ}Z³½Mŧïeyp·uk³DsÑ¨L¶_ÅuÃ¨w»¡WqÜ]\\Ò§tƗcÕ¸ÕFÏǝĉăxŻČƟOKÉġÿ×wg÷IÅzCg]m«ªGeçÃTC«[t§{loWeC@ps_Bp­rf_``Z|ei¡oċMqow¹DƝÓDYpûsYkıǃ}s¥ç³[§cY§HK«Qy]¢wwö¸ïx¼ņ¾Xv®ÇÀµRĠÐHM±cÏdƒǍũȅȷ±DSyúĝ£ŤĀàtÖÿï[îb\\}pĭÉI±Ñy¿³x¯No|¹HÏÛmjúË~TuęjCöAwě¬Rđl¯ Ñb­ŇTĿ_[IčĄʿnM¦ğ\\É[T·k¹©oĕ@A¾wya¥Y\\¥Âaz¯ãÁ¡k¥ne£ÛwE©Êō¶˓uoj_U¡cF¹­[WvP©whuÕyBF`RqJUw\\i¡{jEPïÿ½fćQÑÀQ{°fLÔ~wXgītêÝ¾ĺHd³fJd]HJ²EoU¥HhwQsƐ»Xmg±çve]DmÍPoCc¾_hhøYrŊU¶eD°Č_N~øĹĚ·`z]Äþp¼äÌQv\\rCé¾TnkžŐÚÜa¼ÝƆĢ¶ÛodĔňÐ¢JqPb ¾|J¾fXƐîĨ_Z¯À}úƲN_ĒÄ^ĈaŐyp»CÇÄKñL³ġM²wrIÒŭxjb[n«øæà ^²­h¯ÚŐªÞ¸Y²ĒVø}Ā^İ´LÚm¥ÀJÞ{JVųÞŃx×sxxƈē ģMřÚðòIfĊŒ\\Ʈ±ŒdÊ§ĘDvČ_Àæ~Dċ´A®µ¨ØLV¦êHÒ¤"]],encodeOffsets:[[[113712,34e3],[115612,30507],[113649,34054]]]},properties:{cp:[114.298572,30.584355],name:"湖北",childNum:3}},{id:"430000",geometry:{type:"MultiPolygon",coordinates:[["@@nFZw","@@ãÆá½ÔXrCOËRïÿĩ­TooQyÓ[ŅBE¬ÎÓXaį§Ã¸G °ITxpúxÚĳ¥ÏĢ¾edÄ©ĸGàGhM¤Â_U}Ċ}¢pczfþg¤ÇôAV","@@ȴÚĖÁĐiOĜ«BxDõĚivSÌ}iùÜnÐºG{p°M°yÂÒzJ²Ì ÂcXëöüiáÿñőĞ¤ùTz²CȆȸǎŪƑÐc°dPÎğË¶[È½u¯½WM¡­ÉB·rínZÒ `¨GA¾\\pēXhÃRC­üWGġuTé§ŎÑ©êLM³}_EÇģc®ęisÁPDmÅ{b[RÅs·kPŽƥóRoOV~]{g\\êYƪ¦kÝbiċƵGZ»Ěõó·³vŝ£ø@pyö_ëIkÑµbcÑ§y×dYØªiþUjŅ³C}ÁN»hĻħƏâƓKA·³CQ±µ§¿AUƑ¹AtćOwD]JUÖgk¯b£ylZFËÑ±H­}EbóľA¡»Ku¦·³åş¥ùBD^{ÌC´­¦ŷJ£^[ª¿ğ|ƅN skóā¹¿ï]ă~÷O§­@Vm¡Qđ¦¢Ĥ{ºjÔª¥nf´~Õo×ÛąGû¥cÑ[Z¶ŨĪ²SÊǔƐƀAÚŌ¦QØ¼rŭ­«}NÏürÊ¬mjr@ĘrTW ­SsdHzƓ^ÇÂyUi¯DÅYlŹu{hT}mĉ¹¥ěDÿë©ıÓ[Oº£¥ótł¹MÕƪ`PDiÛU¾ÅâìUñBÈ£ýhedy¡oċ`pfmjP~kZaZsÐd°wj§@Ĵ®w~^kÀÅKvNmX\\¨aŃqvíó¿F¤¡@ũÑVw}S@j}¾«pĂrªg àÀ²NJ¶¶DôK|^ª°LX¾ŴäPĪ±£EXd^¶ĲÞÜ~u¸ǔMRhsRe`ÄofIÔ\\Ø  ićymnú¨cj ¢»GČìƊÿÐ¨XeĈĀ¾Oð Fi ¢|[jVxrIQ_EzAN¦zLU`cªxOTu RLÄªpUĪȴ^ŎµªÉFxÜf¤ºgĲèy°Áb[¦Zb¦z½xBĖ@ªpºjS´rVźOd©ʪiĎăJP`"]],encodeOffsets:[[[115640,30489],[112577,27316],[114113,30649]]]},properties:{cp:[112.982279,28.19409],name:"湖南",childNum:3}},{id:"440000",geometry:{type:"MultiPolygon",coordinates:[["@@QdAsa","@@lxDRm","@@sbhNLo","@@Ă ý","@@WltOY[","@@Kr]S","@@e~AS}","@@I|Mym","@@Û³LS²Q","@@nvºBë¥cÕº","@@zdÛJm","@@°³","@@a yAª¸ËJIxØ@ĀHÉÕZofoo","@@sŗÃÔėAƁZÄ ~°ČPºb","@@¶ÝÌvmĞh¹Ĺ","@@HdSjĒ¢D}waru«ZqadY{K","@@el\\LqqO","@@~rMmX","@@f^E","@@øPªoj÷ÍÝħXČx°Q¨ıXJp","@@gÇƳmxatfu","@@EÆC½","@@¸B_¶ekWvSivc}p}Ăº¾NĎyj¦Èm th_®Ä}»âUzLË²Aā¡ßH©Ùñ}wkNÕ¹ÇO½¿£ēUlaUìIÇª`uTÅxYĒÖ¼kÖµMjJÚwn\\hĒv]îh|ÈƄøèg¸Ķß ĉĈWb¹ƀdéĘNTtP[öSvrCZaGubo´ŖÒÇĐ~¡zCIözx¢PnÈñ @ĥÒ¦]ƜX³ăĔñiiÄÓVépKG½ÄÓávYoC·sitiaÀyŧÎ¡ÈYDÑům}ý|m[węõĉZÅxUO}÷N¹³ĉo_qtăqwµŁYÙǝŕ¹tïÛUÃ¯mRCºĭ|µÕÊK½Rē ó]GªęAxNqSF|ām¡diď×YïYWªŉOeÚtĐ«zđ¹TāúEáÎÁWwíHcòßÎſ¿Çdğ·ùT×Çūʄ¡XgWÀǇğ·¿ÃOj YÇ÷Sğ³kzőõmĝ[³¡VÙæÅöMÌ³¹pÁaËýý©D©ÜJŹƕģGą¤{ÙūÇO²«BƱéAÒĥ¡«BhlmtÃPµyU¯ucd·w_bŝcīímGOGBȅŹãĻFŷŽŕ@Óoo¿ē±ß}}ÓF÷tĲWÈCőâUâǙIğŉ©IĳE×Á³AĥDĈ±ÌÜÓĨ£L]ĈÙƺZǾĆĖMĸĤfÎĵlŨnÈĐtFFĤêk¶^k°f¶g}®Faf`vXŲxl¦ÔÁ²¬Ð¦pqÊÌ²iXØRDÎ}Ä@ZĠsx®AR~®ETtĄZƈfŠŠHâÒÐAµ\\S¸^wĖkRzalŜ|E¨ÈNĀňZTpBh£\\ĎƀuXĖtKL¶G|»ĺEļĞ~ÜĢÛĊrOÙîvd]n¬VÊĜ°RÖpMƀ¬HbwEÀ©\\¤]ŸI®¥D³|Ë]CúAŠ¦æ´¥¸Lv¼¢ĽBaôF~®²GÌÒEYzk¤°ahlVÕI^CxĈPsBƒºVÀB¶¨R²´D","@@OR"]],encodeOffsets:[[[117381,22988],[116552,22934],[116790,22617],[116973,22545],[116444,22536],[116931,22515],[116496,22490],[116453,22449],[113301,21439],[118726,21604],[118709,21486],[113210,20816],[115482,22082],[113171,21585],[113199,21590],[115232,22102],[115739,22373],[115134,22184],[113056,21175],[119573,21271],[119957,24020],[115859,22356],[116680,26053],[116561,22649]]]},properties:{cp:[113.280637,23.125178],name:"广东",childNum:24}},{id:"450000",geometry:{type:"MultiPolygon",coordinates:[["@@H TI¡U","@@Ɣ_LÊFZgčP­kini«qÇczÍY®¬Ů»qR×ō©DÕ§ƙǃŵTÉĩ±ıdÑnYYĲvNĆĆØÜ Öp}e³¦m©iÓ|¹ħņ|ª¦QF¢Â¬ʖovg¿em^ucäāmÇÖåB¡Õçĝ}FĻ¼Ĺ{µHKsLSđƃrč¤[AgoSŇYMÿ§Ç{FśbkylQxĕ]T·¶[BÑÏGáşşƇeăYSs­FQ}­BwtYğÃ@~CÍQ ×WjË±rÉ¥oÏ ±«ÓÂ¥kwWűue_b­E~µh¯ecl¯Ïr¯EģJğ}w³Ƈē`ãògK_ÛsUʝćğ¶höO¤Ǜn³c`¡yię[ďĵűMę§]XÎ_íÛ]éÛUćİÕBƣ±dy¹T^dûÅÑŦ·PĻþÙ`K¦¢ÍeĥR¿³£[~äu¼dltW¸oRM¢ď\\z}Æzdvň{ÎXF¶°Â_ÒÂÏL©ÖTmu¼ãlīkiqéfA·Êµ\\őDc¥ÝFyÔćcűH_hLÜêĺĐ¨c}rn`½Ì@¸¶ªVLhŒ\\Ţĺk~Ġið°|gtTĭĸ^xvKVGréAébUuMJVÃO¡qĂXËSģãlýà_juYÛÒBG^éÖ¶§EGÅzěƯ¤EkN[kdåucé¬dnYpAyČ{`]þ±X\\ÞÈk¡ĬjàhÂƄ¢Hè ŔâªLĒ^Öm¶ħĊAǦė¸zÚGn£¾rªŀÜt¬@ÖÚSx~øOŒŶÐÂæȠ\\ÈÜObĖw^oÞLf¬°bI lTØBÌF£Ć¹gñĤaYt¿¤VSñK¸¤nM¼JE±½¸ñoÜCƆæĪ^ĚQÖ¦^f´QüÜÊz¯lzUĺš@ìp¶n]sxtx¶@~ÒĂJb©gk{°~c°`Ô¬rV\\la¼¤ôá`¯¹LCÆbxEræOv[H­[~|aB£ÖsºdAĐzNÂðsÞÆĤªbab`ho¡³F«èVZs\\\\ÔRzpp®SĪº¨ÖºNĳd`a¦¤F³¢@`¢ĨĀìhYvlĆº¦Ċ~nS|gźv^kGÆÀè·"]],encodeOffsets:[[[111707,21520],[113706,26955]]]},properties:{cp:[108.320004,22.82402],name:"广西",childNum:2}},{id:"460000",geometry:{type:"Polygon",coordinates:["@@¦Ŝil¢XƦƞòïè§ŞCêɕrŧůÇąĻõ·ĉ³œ̅kÇm@ċȧŧĥĽʉ­ƅſȓÒË¦ŝE}ºƑ[ÍĜȋ gÎfǐÏĤ¨êƺ\\Ɔ¸ĠĎvʄȀÐ¾jNðĀÒRZǆzÐĊ¢DÀɘZ"],encodeOffsets:[[112750,20508]]},properties:{cp:[110.33119,20.031971],name:"海南",childNum:1}},{id:"510000",geometry:{type:"MultiPolygon",coordinates:[["@@LqSn","@@ĆOìÛÐ@ĞǔNY{¤Á§di´ezÝúØãwIþËQÇ¦ÃqÉSJ»ĂéʔõÔƁİlƞ¹§ĬqtÀƄmÀêErĒtD®ċæcQE®³^ĭ¥©l}äQtoŖÜqÆkµªÔĻĴ¡@Ċ°B²Èw^^RsºTĀ£ŚæQPJvÄz^Đ¹Æ¯fLà´GC²dt­ĀRt¼¤ĦOðğfÔðDŨŁĞƘïPÈ®âbMüÀXZ ¸£@Å»»QÉ­]dsÖ×_Í_ÌêŮPrĔĐÕGĂeZÜîĘqBhtO ¤tE[h|YÔZśÎs´xº±Uñt|OĩĠºNbgþJy^dÂY Į]Řz¦gC³R`Āz¢Aj¸CL¤RÆ»@­Ŏk\\Ç´£YW}z@Z}Ã¶oû¶]´^NÒ}èNªPÍy¹`S°´ATeVamdUĐwʄvĮÕ\\uÆŗ¨Yp¹àZÂmWh{á}WØǍÉüwga§ßAYrÅÂQĀÕ¬LŐý®Xøxª½Ű¦¦[þ`ÜUÖ´òrÙŠ°²ÄkĳnDX{U~ET{ļº¦PZcjF²Ė@pg¨B{u¨ŦyhoÚD®¯¢ WòàFÎ¤¨GDäz¦kŮPġqË¥À]eâÚ´ªKxīPÖ|æ[xÃ¤JÞĥsNÖ½I¬nĨY´®ÐƐmDŝuäđđEbee_v¡}ìęǊē}qÉåT¯µRs¡M@}ůaa­¯wvƉåZw\\Z{åû`[±oiJDÅ¦]ĕãïrG réÏ·~ąSfy×Í·ºſƽĵȁŗūmHQ¡Y¡®ÁÃ×t«­T¤JJJyJÈ`Ohß¦¡uËhIyCjmÿwZGTiSsOB²fNmsPa{M{õE^Hj}gYpaeu¯oáwHjÁ½M¡pMuåmni{fk\\oÎqCwEZ¼KĝAy{m÷LwO×SimRI¯rKõBS«sFe]fµ¢óY_ÆPRcue°Cbo×bd£ŌIHgtrnyPt¦foaXďxlBowz_{ÊéWiêEGhÜ¸ºuFĈIxf®Y½ĀǙ]¤EyF²ċw¸¿@g¢§RGv»áW`ÃĵJwi]t¥wO­½a[×]`Ãi­üL¦LabbTÀåc}ÍhÆh®BHî|îºÉk­¤Sy£ia©taį·Ɖ`ō¥UhOĝLk}©Fos´JmµlŁuønÑJWÎªYÀïAetTŅÓGË«bo{ıwodƟ½OġÜÂµxàNÖ¾P²§HKv¾]|BÆåoZ`¡Ø`ÀmºĠ~ÌÐ§nÇ¿¤]wğ@srğu~Io[é±¹ ¿ſđÓ@qg¹zƱřaí°KtÇ¤V»Ã[ĩǭƑ^ÇÓ@áťsZÏÅĭƋěpwDóÖáŻneQËq·GCœýS]x·ýq³OÕ¶Qzßti{řáÍÇWŝŭñzÇWpç¿JXĩè½cFÂLiVjx}\\NŇĖ¥GeJA¼ÄHfÈu~¸Æ«dE³ÉMA|bÒćhG¬CMõƤąAvüVéŀ_VÌ³ĐwQj´·ZeÈÁ¨X´Æ¡Qu·»ÕZ³ġqDoy`L¬gdp°şp¦ėìÅĮZ°Iähzĵf²å ĚÑKpIN|Ñz]ń·FU×é»R³MÉ»GM«kiér}Ã`¹ăÞmÈnÁîRǀ³ĜoİzŔwǶVÚ£À]ɜ»ĆlƂ²ĠþTº·àUȞÏʦ¶I«dĽĢdĬ¿»Ĕ×h\\c¬ä²GêëĤł¥ÀǿżÃÆMº}BÕĢyFVvwxBèĻĒ©Ĉt@Ğû¸£B¯¨ˋäßkķ½ªôNÔ~t¼Ŵu^s¼{TA¼ø°¢İªDè¾Ň¶ÝJ®Z´ğ~Sn|ªWÚ©òzPOȸbð¢|øĞA"]],encodeOffsets:[[[108815,30935],[100197,35028]]]},properties:{cp:[104.065735,30.659462],name:"四川",childNum:2}},{id:"520000",geometry:{type:"MultiPolygon",coordinates:[["@@G\\lY£cj","@@q|mc¯vÏV","@@hÑ£IsNgßHHªķÃh_¹¡ĝÄ§ń¦uÙùgS¯JH|sÝÅtÁïyMDč»eÕtA¤{b\\}G®u\\åPFqwÅaDK°ºâ_£ùbµmÁÛĹM[q|hlaªāI}Ñµ@swtwm^oµDéĽŠyVky°ÉûÛR³e¥]RÕěħ[ƅåÛDpJiVÂF²I»mN·£LbÒYbWsÀbpkiTZĄă¶Hq`ĥ_J¯ae«KpÝx]aĕÛPÇȟ[ÁåŵÏő÷Pw}TÙ@Õs«ĿÛq©½m¤ÙH·yǥĘĉBµĨÕnđ]K©œáGçş§ÕßgǗĦTèƤƺ{¶ÉHÎd¾ŚÊ·OÐjXWrãLyzÉAL¾ę¢bĶėy_qMĔąro¼hĊw¶øV¤w²Ĉ]ÊKx|`ź¦ÂÈdrcÈbe¸`I¼čTF´¼Óýȃr¹ÍJ©k_șl³´_pĐ`oÒh¶pa^ÓĔ}D»^Xy`d[KvJPhèhCrĂĚÂ^Êƌ wZL­Ġ£ÁbrzOIlMMĪŐžËr×ÎeŦtw|¢mKjSǘňĂStÎŦEtqFT¾Eì¬¬ôxÌO¢ K³ŀºäYPVgŎ¦ŊmŞ¼VZwVlz¤£Tl®ctĽÚó{G­AÇge~Îd¿æaSba¥KKûj®_Ä^\\Ø¾bP®¦x^sxjĶI_Ä Xâ¼Hu¨Qh¡À@Ëô}±GNìĎlT¸`V~R°tbÕĊ`¸úÛtÏFDu[MfqGH·¥yAztMFe|R_GkChZeÚ°tov`xbDnÐ{E}ZèxNEÞREn[Pv@{~rĆAB§EO¿|UZ~ìUf¨J²ĂÝÆsªB`s¶fvö¦Õ~dÔq¨¸º»uù[[§´sb¤¢zþF¢ÆÀhÂW\\ıËIÝo±ĭŠ£þÊs}¡R]ěDg´VG¢j±®èºÃmpU[Áëº°rÜbNu¸}º¼`niºÔXĄ¤¼ÔdaµÁ_ÃftQQgR·Ǔv}Ý×ĵ]µWc¤F²OĩųãW½¯K©]{LóµCIµ±Mß¿h©āq¬o½~@i~TUxð´Đhw­ÀEîôuĶb[§nWuMÆJl½]vuıµb"]],encodeOffsets:[[[112158,27383],[112105,27474],[112095,27476]]]},properties:{cp:[106.713478,26.578343],name:"贵州",childNum:3}},{id:"530000",geometry:{type:"Polygon",coordinates:["@@[ùx½}ÑRHYīĺûsÍniEoã½Ya²ė{c¬ĝgĂsAØÅwďõzFjw}«Dx¿}Uũlê@HÅ­F¨ÇoJ´Ónũuą¡Ã¢pÒÅØ TF²xa²ËXcÊlHîAßËŁkŻƑŷÉ©hW­æßUËs¡¦}teèÆ¶StÇÇ}Fd£jĈZĆÆ¤Tč\\D}O÷£U§~ŃGåŃDĝ¸Tsd¶¶Bª¤u¢ŌĎo~t¾ÍŶÒtD¦ÚiôözØX²ghįh½Û±¯ÿm·zR¦Ɵ`ªŊÃh¢rOÔ´£Ym¼èêf¯ŪĽncÚbw\\zlvWªâ ¦gmĿBĹ£¢ƹřbĥkǫßeeZkÙIKueT»sVesbaĕ  ¶®dNĄÄpªy¼³BE®lGŭCǶwêżĔÂepÍÀQƞpC¼ŲÈ­AÎô¶RäQ^Øu¬°_Èôc´¹ò¨PÎ¢hlĎ¦´ĦÆ´sâÇŲPnÊD^¯°Upv}®BPÌªjǬxSöwlfòªvqĸ|`H­viļndĜ­Ćhňem·FyÞqóSį¯³X_ĞçêtryvL¤§z¦c¦¥jnŞklD¤øz½ĜàĂŧMÅ|áƆàÊcðÂFÜáŢ¥\\\\ºİøÒÐJĴîD¦zK²ǏÎEh~CD­hMn^ÌöÄ©ČZÀaüfɭyœpį´ěFűk]Ôě¢qlÅĆÙa¶~ÄqêljN¬¼HÊNQ´ê¼VØ¸E^ŃÒyM{JLoÒęæe±Ķygã¯JYÆĭĘëo¥Šo¯hcK«z_prC´ĢÖY¼ v¸¢RÅW³Â§fÇ¸Yi³xR´ďUË`êĿUûuĆBƣöNDH«ĈgÑaB{ÊNF´¬c·Åv}eÇÃGB»If¦HňĕM~[iwjUÁKE¾dĪçWIèÀoÈXòyŞŮÈXâÎŚj|àsRyµÖPr´þ ¸^wþTDŔHr¸RÌmfżÕâCôoxĜƌÆĮÐYtâŦÔ@]ÈǮƒ\\Ī¼Ä£UsÈ¯LbîƲŚºyhr@ĒÔƀÀ²º\\êpJ}ĠvqtĠ@^xÀ£È¨mËÏğ}n¹_¿¢×Y_æpÅA^{½Lu¨GO±Õ½ßM¶wÁĢÛPƢ¼pcĲx|apÌ¬HÐŊSfsðBZ¿©XÏÒKk÷Eû¿SrEFsÕūkóVǥŉiTL¡n{uxţÏhôŝ¬ğōNNJkyPaqÂğ¤K®YxÉƋÁ]āęDqçgOgILu\\_gz]W¼~CÔē]bµogpÑ_oď`´³Țkl`IªºÎȄqÔþ»E³ĎSJ»_f·adÇqÇc¥Á_Źw{L^É±ćxU£µ÷xgĉp»ĆqNē`rĘzaĵĚ¡K½ÊBzyäKXqiWPÏÉ¸½řÍcÊG|µƕƣGË÷k°_^ý|_zċBZocmø¯hhcæ\\lMFlư£ĜÆyHF¨µêÕ]HAàÓ^it `þßäkĤÎT~Wlÿ¨ÔPzUCNVv [jâôDôď[}z¿msSh¯{jïğl}šĹ[őgK©U·µË@¾m_~q¡f¹ÅË^»f³ø}Q¡ÖË³gÍ±^Ç\\ëÃA_¿bWÏ[¶ƛé£F{īZgm@|kHǭƁć¦UĔť×ëǟeċ¼ȡȘÏíBÉ£āĘPªĳ¶ŉÿy©nď£G¹¡I±LÉĺÑdĉÜW¥}gÁ{aqÃ¥aıęÏZÁ`"],encodeOffsets:[[104636,22969]]},properties:{cp:[102.712251,25.040609],name:"云南",childNum:1}},{id:"540000",geometry:{type:"Polygon",coordinates:["@@ÂhľxŖxÒVºÅâAĪÝȆµę¯Ňa±r_w~uSÕňqOj]ɄQ£ZUDûoY»©M[L¼qãË{VÍçWVi]ë©Ä÷àyƛhÚU°adcQ~Mx¥caÛcSyFÖk­uRýq¿ÔµQĽ³aG{¿FµëªéĜÿª@¬·K·àariĕĀ«V»ŶĴūgèLǴŇƶaftèBŚ£^âǐÝ®M¦ÁǞÿ¬LhJ¾óƾÆºcxwf]Y´¦|QLn°adĊ\\¨oǀÍŎ´ĩĀd`tÊQŞŕ|¨C^©Ĉ¦¦ÎJĊ{ëĎjª²rÐl`¼Ą[t|¦Stè¾PÜK¸dƄı]s¤î_v¹ÎVòŦj£Əsc¬_Ğ´|Ł¦Av¦w`ăaÝaa­¢e¤ı²©ªSªÈMĄwÉØŔì@T¤Ę\\õª@þo´­xA sÂtŎKzó²ÇČµ¢r^nĊ­Æ¬×üG¢³ {âĊ]G~bÀgVjzlhǶfOfdªB]pjTOtĊn¤}®¦Č¥d¢¼»ddY¼t¢eȤJ¤}Ǿ¡°§¤AÐlc@ĝsªćļđAçwxUuzEÖġ~AN¹ÄÅȀŻ¦¿ģŁéì±Hãd«g[Ø¼ēÀcīľġ¬cJµÐʥVȝ¸ßS¹ý±ğkƁ¼ą^ɛ¤Ûÿb[}¬ōõÃ]ËNm®g@Bg}ÍF±ǐyL¥íCIĳÏ÷Ñį[¹¦[âšEÛïÁÉdƅß{âNÆāŨß¾ě÷yC£k­´ÓH@Â¹TZ¥¢į·ÌAÐ§®Zcv½Z­¹|ÅWZqgW|ieZÅYVÓqdqbc²R@c¥Rã»GeeƃīQ}J[ÒK¬Ə|oėjġĠÑN¡ð¯EBčnwôɍėª²CλŹġǝʅįĭạ̃ūȹ]ΓͧgšsgȽóϧµǛęgſ¶ҍć`ĘąŌJÞä¤rÅň¥ÖÁUětęuůÞiĊÄÀ\\Æs¦ÓRb|Â^řÌkÄŷ¶½÷f±iMÝ@ĥ°G¬ÃM¥n£Øąğ¯ß§aëbéüÑOčk£{\\eµª×MÉfm«Ƒ{Å×Gŏǩãy³©WÑăû··Qòı}¯ãIéÕÂZ¨īès¶ZÈsæĔTŘvgÌsN@îá¾ó@ÙwU±ÉTå»£TđWxq¹Zobs[×¯cĩvėŧ³BM|¹kªħ¥TzNYnÝßpęrñĠĉRS~½ěVVµõ«M££µBĉ¥áºae~³AuĐh`Ü³ç@BÛïĿa©|z²Ý¼D£àč²ŸIûI āóK¥}rÝ_Á´éMaň¨~ªSĈ½½KÙóĿeƃÆB·¬ën×W|Uº}LJrƳlŒµ`bÔ`QÐÓ@s¬ñIÍ@ûws¡åQÑßÁ`ŋĴ{ĪTÚÅTSÄ³Yo|Ç[Ç¾µMW¢ĭiÕØ¿@MhpÕ]jéò¿OƇĆƇpêĉâlØwěsǩĵ¸cbU¹ř¨WavquSMzeo_^gsÏ·¥Ó@~¯¿RiīB\\qTGªÇĜçPoÿfñòą¦óQīÈáPābß{ZŗĸIæÅhnszÁCËìñÏ·ąĚÝUm®ó­L·ăUÈíoù´Êj°ŁŤ_uµ^°ìÇ@tĶĒ¡ÆM³Ģ«İĨÅ®ğRāðggheÆ¢zÊ©Ô\\°ÝĎz~ź¤PnMĪÖB£kné§żćĆKĒ°¼L¶èâz¨u¦¥LDĘz¬ýÎmĘd¾ßFzhg²Fy¦ĝ¤ċņbÎ@yĄæm°NĮZRÖíJ²öLĸÒ¨Y®ƌÐVàtt_ÚÂyĠz]ŢhzĎ{ÂĢXc|ÐqfO¢¤ögÌHNPKŖUú´xx[xvĐCûĀìÖT¬¸^}Ìsòd´_KgžLĴÀBon|H@Êx¦BpŰŌ¿fµƌA¾zǈRx¶FkĄźRzŀ~¶[´HnªVƞuĒ­È¨ƎcƽÌm¸ÁÈM¦x͊ëÀxǆBú^´W£dkɾĬpw˂ØɦļĬIŚÊnŔa¸~J°îlɌxĤÊÈðhÌ®gT´øàCÀ^ªerrƘd¢İP|Ė ŸWªĦ^¶´ÂLaT±üWƜǀRÂŶUńĖ[QhlLüAÜ\\qRĄ©"],encodeOffsets:[[90849,37210]]},properties:{cp:[91.132212,29.660361],name:"西藏",childNum:1}},{id:"610000",geometry:{type:"Polygon",coordinates:["@@¸ÂW¢xR­Fq§uF@N¢XLRMº[ğȣſï|¥Jkc`sŉǷ£Y³WN«ùMëï³ÛIg÷±mTșÚÒķø©þ¥yÓğęmWµÎumZyOŅƟĥÓ~sÑL¤µaÅY¦ocyZ{y c]{Ta©`U_Ěē£ωÊƍKùK¶ȱÝƷ§{û»ÅÁȹÍéuĳ|¹cÑdìUYOuFÕÈYvÁCqÓTǢí§·S¹NgV¬ë÷Át°DØ¯C´ŉƒópģ}ąiEËFéGU¥×K§­¶³BČ}C¿åċ`wġB·¤őcƭ²ő[Å^axwQOñJÙïŚĤNĔwƇÄńwĪ­o[_KÓª³ÙnKÇěÿ]ďă_d©·©Ýŏ°Ù®g]±ß×¥¬÷m\\iaǑkěX{¢|ZKlçhLtŇîŵœè[É@ƉĄEtƇÏ³­ħZ«mJ×¾MtÝĦ£IwÄå\\Õ{OwĬ©LÙ³ÙTª¿^¦rÌĢŭO¥lãyC§HÍ£ßEñX¡­°ÙCgpťzb`wIvA|¥hoĕ@E±iYd¥OÿµÇvPW|mCĴŜǂÒW¶¸AĜh^Wx{@¬­F¸¡ķn£P|ªĴ@^ĠĈæbÔc¶lYi^MicĎ°Â[ävï¶gv@ÀĬ·lJ¸sn|¼u~a]ÆÈtŌºJpþ£KKf~¦UbyäIĺãnÔ¿^­ŵMThĠÜ¤ko¼Ŏìąǜh`[tRd²Ĳ_XPrɲlXiL§à¹H°Ȧqº®QCbAŌJ¸ĕÚ³ĺ§ `d¨YjiZvRĺ±öVKkjGȊÄePĞZmļKÀ[`ösìhïÎoĬdtKÞ{¬èÒÒBÔpĲÇĬJŊ¦±J«[©ārHµàåVKe§|P²ÇÓ·vUzgnN¾yI@oHĆÛķhxen¡QQ±ƝJǖRbzy¸ËÐl¼EºpĤ¼x¼½~Ğà@ÚüdK^mÌSjp²ȮµûGĦ}Ħðǚ¶òƄjɂz°{ºØkÈęâ¦jªBg\\ċ°s¬]jú EȌǆ¬stRÆdĠİwÜ¸ôW¾ƮłÒ_{Ìû¼jº¹¢GǪÒ¯ĘZ`ºŊecņą~BÂgzpâēòYƲȐĎ"],encodeOffsets:[[113634,40474]]},properties:{cp:[108.948024,34.263161],name:"陕西",childNum:1}},{id:"620000",geometry:{type:"MultiPolygon",coordinates:[["@@Vu_^","@@ųEĠtt~nkh`Q¦ÅÄÜdwAb×ĠąJ¤DüègĺqBqj°lI¡Ĩ¶ĖIHdjÎB°aZ¢KJO[|A£Dx}NĂ¬HUnrk kp¼Y kMJn[aGáÚÏ[½rc}aQxOgsPMnUsncZsKúvAtÞġ£®ĀYKdnFw¢JE°Latf`¼h¬we|Æbj}GA·~W`¢MC¤tL©Ĳ°qdfObÞĬ¹ttu`^ZúE`[@Æsîz®¡CƳƜG²R¢RmfwĸgÜą G@pzJM½mhVy¸uÈÔO±¨{LfæU¶ßGĂq\\ª¬²I¥IŉÈīoıÓÑAçÑ|«LÝcspīðÍgtë_õ\\ĉñLYnĝgRǡÁiHLlõUĹ²uQjYi§Z_c¨´ĹĖÙ·ŋIaBD­R¹ȥr¯GºßK¨jWkɱOqWĳ\\a­Q\\sg_ĆǛōëp»£lğÛgSŶN®À]ÓämĹãJaz¥V}Le¤Lýo¹IsŋÅÇ^bz³tmEÁ´a¹cčecÇNĊãÁ\\č¯dNj]jZµkÓdaćå]ğĳ@ ©O{¤ĸm¢E·®«|@Xwg]Aģ±¯XǁÑǳªcwQÚŝñsÕ³ÛV_ý¥\\ů¥©¾÷w©WÕÊĩhÿÖÁRo¸V¬âDb¨hûxÊ×ǌ~Zâg|XÁnßYoº§ZÅŘv[ĭÖʃuďxcVbnUSfB¯³_TzºÎO©çMÑ~M³]µ^püµÄY~y@X~¤Z³[Èōl@®Å¼£QK·Di¡ByÿQ_´D¥hŗy^ĭÁZ]cIzýah¹MĪğPs{ò²Vw¹t³ŜË[Ñ}X\\gsF£sPAgěp×ëfYHāďÖqēŭOÏëdLü\\it^c®RÊº¶¢H°mrY£B¹čIoľu¶uI]vģSQ{UŻÅ}QÂ|Ì°ƅ¤ĩŪU ęĄÌZÒ\\v²PĔ»ƢNHĂyAmƂwVm`]ÈbH`Ì¢²ILvĜH®¤Dlt_¢JJÄämèÔDëþgºƫaʎÌrêYi~ Îİ¤NpÀA¾Ĕ¼bð÷®üszMzÖĖQdȨýv§Tè|ªHÃ¾a¸|Ð ƒwKĢx¦ivr^ÿ ¸l öæfƟĴ·PJv}n\\h¹¶v·À|\\ƁĚN´ĜçèÁz]ġ¤²¨QÒŨTIlªťØ}¼˗ƦvÄùØEÂ«FïËIqōTvāÜŏíÛßÛVj³âwGăÂíNOPìyV³ŉĖýZso§HÑiYw[ß\\X¦¥c]ÔƩÜ·«jÐqvÁ¦m^ċ±R¦΋ƈťĚgÀ»IïĨʗƮ°ƝĻþÍAƉſ±tÍEÕÞāNUÍ¡\\ſčåÒʻĘm ƭÌŹöʥëQ¤µ­ÇcƕªoIýIÉ_mkl³ăƓ¦j¡YzŇi}Msßõīʋ }ÁVm_[n}eı­Uĥ¼ªI{Î§DÓƻėojqYhĹT©oūĶ£]ďxĩǑMĝq`B´ƃ˺Чç~²ņj@¥@đ´ί}ĥtPńÇ¾V¬ufÓÉCtÓ̻¹£G³]ƖƾŎĪŪĘ̖¨ʈĢƂlɘ۪üºňUðǜȢƢż̌ȦǼĤŊɲĖÂ­KqĘŉ¼ĔǲņɾªǀÞĈĂD½ĄĎÌŗĞrôñnN¼â¾ʄľԆ|Ǆ֦ज़ȗǉ̘̭ɺƅêgV̍ʆĠ·ÌĊv|ýĖÕWĊǎÞ´õ¼cÒÒBĢ͢UĜð͒s¨ňƃLĉÕÝ@ɛƯ÷¿Ľ­ĹeȏĳëCȚDŲyê×Ŗyò¯ļcÂßYtÁƤyAã˾J@ǝrý@¤rz¸oP¹ɐÚyáHĀ[JwcVeȴÏ»ÈĖ}ƒŰŐèȭǢόĀƪÈŶë;Ñ̆ȤМľĮEŔĹŊũ~ËUă{ĻƹɁύȩþĽvĽƓÉ@ēĽɲßǐƫʾǗĒpäWÐxnsÀ^ƆwW©¦cÅ¡Ji§vúF¶¨c~c¼īeXǚ\\đ¾JwÀďksãAfÕ¦L}waoZD½Ml«]eÒÅaÉ²áo½FõÛ]ĻÒ¡wYR£¢rvÓ®y®LFLzĈôe]gx}|KK}xklL]c¦£fRtív¦PŨ£","@@M T¥"]],encodeOffsets:[[[108619,36299],[108594,36341],[108600,36306]]]},properties:{cp:[103.823557,36.058039],name:"甘肃",childNum:3}},{id:"630000",geometry:{type:"MultiPolygon",coordinates:[["@@InJo","@@CÆ½OŃĦsΰ~Ē³¦@@Ņi±è}ШƄ˹A³r_ĞǒNĪĐw¤^ŬĵªpĺSZgrpiƼĘÔ¨C|ÍJ©Ħ»®VĲ~f\\m `UnÂ~ʌĬàöNt~ňjy¢ZiƔ¥Ąk´nl`JÊJþ©pdƖ®È£¶ìRʦźõƮËnʼėæÑƀĎ[¢VÎĂMÖÝÎF²sƊƀÎBļýƞ¯ʘƭðħ¼Jh¿ŦęΌƇ¥²Q]Č¥nuÂÏri¸¬ƪÛ^Ó¦d¥[Wàx\\ZjÒ¨GtpþYŊĕ´zUOëPîMĄÁxH´áiÜUàîÜŐĂÛSuŎrJðÌ¬EFÁú×uÃÎkrĒ{V}İ«O_ÌËĬ©ÓŧSRÑ±§Ģ£^ÂyèçěM³Ƃę{[¸¿uºµ[gt£¸OƤĿéYõ·kĀq]juw¥DĩƍõÇPéÄ½G©ã¤GuȧþRcÕĕNyyût­øï»a½ē¿BMoį£Íj}éZËqbʍƬh¹ìÿÓAçãnIÃ¡I`ks£CG­ěUy×Cy@¶ʡÊBnāzGơMē¼±O÷õJËĚăVĪũƆ£¯{ËL½ÌzżVR|ĠTbuvJvµhĻĖHAëáa­OÇðñęNwœľ·LmI±íĠĩPÉ×®ÿscB³±JKßĊ«`ađ»·QAmOVţéÿ¤¹SQt]]Çx±¯A@ĉĳ¢Óļ©l¶ÅÛrŕspãRk~¦ª]Į­´FRåd­ČsCqđéFn¿ÅƃmÉx{W©ºƝºįkÕƂƑ¸wWūÐ©ÈF£\\tÈ¥ÄRÈýÌJ lGr^×äùyÞ³fjc¨£ÂZ|ǓMĝÏ@ëÜőRĝ÷¡{aïȷPu°ËXÙ{©TmĠ}Y³­ÞIňµç½©C¡į÷¯B»|St»]vųs»}MÓ ÿʪƟǭA¡fs»PY¼c¡»¦cċ­¥£~msĉPSi^o©AecPeǵkgyUi¿h}aHĉ^|á´¡HØûÅ«ĉ®]m¡qċ¶±ÈyôōLÁstB®wn±ă¥HSòė£Së@×œÊăxÇN©©T±ª£Ĳ¡fb®Þbb_Ą¥xu¥B{łĝ³«`dƐt¤ťiñÍUuºí`£^tƃĲc·ÛLO½sç¥Ts{ă\\_»kÏ±q©čiìĉ|ÍI¥ć¥]ª§D{ŝŖÉR_sÿc³ĪōƿÎ§p[ĉc¯bKmR¥{³Ze^wx¹dƽÅ½ôIg §Mĕ ƹĴ¿ǣÜÍ]Ý]snåA{eƭ`ǻŊĿ\\ĳŬűYÂÿ¬jĖqßb¸L«¸©@ěĀ©ê¶ìÀEH|´bRľÓ¶rÀQþvl®ÕETzÜdb hw¤{LRdcb¯ÙVgƜßzÃôì®^jUèXÎ|UäÌ»rK\\ªN¼pZCüVY¤ɃRi^rPŇTÖ}|br°qňbĚ°ªiƶGQ¾²x¦PmlŜ[Ĥ¡ΞsĦÔÏâ\\ªÚŒU\\f¢N²§x|¤§xĔsZPòʛ²SÐqF`ªVÞŜĶƨVZÌL`¢dŐIqr\\oäõFÎ·¤»Ŷ×h¹]ClÙ\\¦ďÌį¬řtTӺƙgQÇÓHţĒ´ÃbEÄlbʔC|CŮkƮ[ʼ¬ň´KŮÈΰÌĪ¶ƶlðļATUvdTGº̼ÔsÊDÔveMg"]],encodeOffsets:[[[105308,37219],[95370,40081]]]},properties:{cp:[101.778916,36.623178],name:"青海",childNum:2}},{id:"640000",geometry:{type:"Polygon",coordinates:["@@KëÀęĞ«Oęȿȕı]ŉ¡åįÕÔ«ǴõƪĚQÐZhv K°öqÀÑS[ÃÖHƖčËnL]ûcÙß@ĝ¾}w»»oģF¹»kÌÏ·{zP§B­¢íyÅt@@á]Yv_ssģ¼ißĻL¾ġsKD£¡N_X¸}B~HaiÅf{«x»ge_bsKF¯¡IxmELcÿZ¤­ĢÝsuBLùtYdmVtNmtOPhRw~bd¾qÐ\\âÙH\\bImlNZ»loqlVmGā§~QCw¤{A\\PKNY¯bFkC¥sks_Ã\\ă«¢ħkJi¯rrAhĹûç£CUĕĊ_ÔBixÅÙĄnªÑaM~ħpOu¥sîeQ¥¤^dkKwlL~{L~hw^ófćKyE­K­zuÔ¡qQ¤xZÑ¢^ļöÜ¾Ep±âbÊÑÆ^fk¬NC¾YpxbK~¥eÖäBlt¿Đx½I[ĒǙWf»Ĭ}d§dµùEuj¨IÆ¢¥dXªƅx¿]mtÏwßRĶX¢͎vÆzƂZò®ǢÌʆCrâºMÞzÆMÒÊÓŊZÄ¾r°Î®Ȉmª²ĈUªĚîøºĮ¦ÌĘk^FłĬhĚiĀĖ¾iİbjË"],encodeOffsets:[[109366,40242]]},properties:{cp:[106.278179,38.46637],name:"宁夏",childNum:1}},{id:"650000",geometry:{type:"Polygon",coordinates:["@@QØĔ²X¨~ǘBºjʐßØvKƔX¨vĊOÃ·¢i@~cĝe_«E}QxgɪëÏÃ@sÅyXoŖ{ô«ŸuXêÎf`C¹ÂÿÐGĮÕĞXŪōŸMźÈƺQèĽôe|¿ƸJR¤ĘEjcUóº¯Ĩ_ŘÁMª÷Ð¥OéÈ¿ÖğǤǷÂFÒzÉx[]­Ĥĝœ¦EP}ûƥé¿İƷTėƫœŕƅƱB»Đ±ēO¦E}`cȺrĦáŖuÒª«ĲπdƺÏØZƴwʄ¤ĖGĐǂZĶèH¶}ÚZצʥĪï|ÇĦMŔ»İĝǈì¥Βba­¯¥ǕǚkĆŵĦɑĺƯxūД̵nơʃĽá½M»òmqóŘĝčË¾ăCćāƿÝɽ©ǱŅ»ēėŊLrÁ®ɱĕģŉǻ̋ȥơŻǛȡVï¹Ň۩ûkɗġƁ§ʇė̕ĩũƽō^ƕUv£ƁQïƵkŏ½ΉÃŭÇ³LŇʻ«ƭ\\lŭD{ʓDkaFÃÄa³ŤđÔGRÈƚhSӹŚsİ«ĐË[¥ÚDkº^Øg¼ŵ¸£EÍöůŉT¡c_ËKYƧUśĵÝU_©rETÏʜ±OñtYwē¨{£¨uM³x½şL©Ùá[ÓÐĥ Νtģ¢\\śnkOw¥±T»ƷFɯàĩÞáB¹ÆÑUwŕĽw]kE½Èå~Æ÷QyěCFmĭZīŵVÁƿQƛûXS²b½KÏ½ĉS©ŷXĕ{ĕK·¥Ɨcqq©f¿]ßDõU³h­gËÇïģÉɋwk¯í}I·œbmÉřīJɥĻˁ×xoɹīlc¤³Xù]ǅA¿w͉ì¥wÇN·ÂËnƾƍdÇ§đ®ƝvUm©³G\\}µĿQyŹlăµEwǇQ½yƋBe¶ŋÀůo¥AÉw@{Gpm¿AĳŽKLh³`ñcËtW±»ÕSëüÿďDu\\wwwù³VLŕOMËGh£õP¡erÏd{ġWÁč|yšg^ğyÁzÙs`s|ÉåªÇ}m¢Ń¨`x¥ù^}Ì¥H«YªƅAÐ¹n~ź¯f¤áÀzgÇDIÔ´AňĀÒ¶ûEYospõD[{ù°]uJqU|Soċxţ[õÔĥkŋÞŭZËºóYËüċrw ÞkrťË¿XGÉbřaDü·Ē÷AÃª[ÄäIÂ®BÕĐÞ_¢āĠpÛÄȉĖġDKwbmÄNôfƫVÉviǳHQµâFù­Âœ³¦{YGd¢ĚÜO {Ö¦ÞÍÀP^bƾl[vt×ĈÍEË¨¡Đ~´î¸ùÎhuè`¸HÕŔVºwĠââWò@{ÙNÝ´ə²ȕn{¿¥{l÷eé^eďXj©î\\ªÑòÜìc\\üqÕ[Č¡xoÂċªbØ­ø|¶ȴZdÆÂońéG\\¼C°ÌÆn´nxÊOĨŪƴĸ¢¸òTxÊǪMīĞÖŲÃɎOvʦƢ~FRěò¿ġ~åŊúN¸qĘ[Ĕ¶ÂćnÒPĒÜvúĀÊbÖ{Äî¸~Ŕünp¤ÂH¾ĄYÒ©ÊfºmÔĘcDoĬMŬS¤s²ʘÚžȂVŦ èW°ªB|ĲXŔþÈJĦÆæFĚêYĂªĂ]øªŖNÞüAfɨJ¯ÎrDDĤ`mz\\§~D¬{vJÂ«lµĂb¤pŌŰNĄ¨ĊXW|ų ¿¾ɄĦƐMTòP÷fØĶK¢ȝ˔Sô¹òEð­`Ɩ½ǒÂň×äı§ĤƝ§C~¡hlåǺŦŞkâ~}FøàĲaĞfƠ¥Ŕd®U¸źXv¢aƆúŪtŠųƠjdƺƺÅìnrh\\ĺ¯äɝĦ]èpĄ¦´LƞĬ´ƤǬ˼Ēɸ¤rºǼ²¨zÌPðŀbþ¹ļD¢¹\\ĜÑŚ¶ZƄ³âjĦoâȴLÊȮĐ­ĚăÀêZǚŐ¤qȂ\\L¢ŌİfÆs|zºeªÙæ§΢{Ā´ƐÚ¬¨Ĵà²łhʺKÞºÖTiƢ¾ªì°`öøu®Ê¾ãÖ"],encodeOffsets:[[88824,50096]]},properties:{cp:[87.617733,43.792818],name:"新疆",childNum:1}},{id:"110000",geometry:{type:"Polygon",coordinates:["@@RºaYÕQaúÍÔiþĩȨWĢü|Ėu[qb[swP@ÅğP¿{\\¯Y²·Ñ¨j¯X\\¯MSvU¯YIŕY{[fk­VÁûtŷmiÍt_H»Ĩ±d`¹­{bwYr³S]§§o¹qGtm_SŧoaFLgQN_dV@Zom_ć\\ßW´ÕiœRcfio§ËgToÛJíĔóu|wP¤XnO¢ÉŦ¯pNÄā¤zâŖÈRpŢZÚ{GrFt¦Òx§ø¹RóäV¤XdżâºWbwŚ¨Ud®bêņ¾jnŎGŃŶnzÚScîĚZen¬"],encodeOffsets:[[119421,42013]]},properties:{cp:[116.405285,39.904989],name:"北京",childNum:1}},{id:"120000",geometry:{type:"Polygon",coordinates:["@@ŬgX§Ü«E¶FÌ¬O_ïlÁgz±AXeµÄĵ{¶]gitgIj·¥ì_iU¨ÐƎk}ĕ{gBqGf{¿aU^fIư³õ{YıëNĿk©ïËZukāAīlĕĥs¡bġ«@dekąI[nlPqCnp{ō³°`{PNdƗqSÄĻNNâyj]äÒD ĬH°Æ]~¡HO¾X}ÐxgpgWrDGpù^LrzWxZ^¨´T\\|~@IzbĤjeĊªz£®ĔvěLmV¾Ô_ÈNW~zbĬvG²ZmDM~~"],encodeOffsets:[[120237,41215]]},properties:{cp:[117.190182,39.125596],name:"天津",childNum:1}},{id:"310000",geometry:{type:"MultiPolygon",coordinates:[["@@ɧư¬EpƸÁx]","@@©²","@@MA","@@QpªKWT§¨","@@bŝÕÕEȣÚƥêImɇǦèÜĠÚÄÓŴ·ʌÇ","@@Sô¤r]ìƬįǜûȬɋŭ×^sYɍDŋŽąñCG²«ªč@h_p¯A{oloY¬j@Ĳ`gQÚpptǀ^MĲvtbe´Rh@oj¨","@@ÆLH{a}Eo¦"]],encodeOffsets:[[[124702,32062],[124547,32200],[124808,31991],[124726,32110],[124903,32376],[124065,32166],[124870,31965]]]},properties:{cp:[121.472644,31.231706],name:"上海",childNum:7}},{id:"500000",geometry:{type:"Polygon",coordinates:["@@TÂÛ`Ùƅően½SêqDu[RåÍ¹÷eXÍy¸_ĺę}÷`M¯ċfCVµqŉ÷Zgg^d½pDOÎCn^uf²ènh¼WtƏxRGg¦pVFI±G^Ic´ecGĹÞ½sëÆNäÌ¤KÓe¯|R¸§LÜkPoïƭNï¶}Gywdiù©nkĈzj@Óc£»Wă¹Óf§c[µo·Ó|MvÛaq½«è\\ÂoVnÓØÍ²«bq¿ehCĜ^Q~ Évýş¤²ĮpEĶyhsŊwH½¿gÅ¡ýE¡ya£³t\\¨\\vú¹¼©·Ñr_oÒý¥et³]Et©uÖ¥±ă©KVeë]}wVPÀFA¨ąB}qTjgRemfFmQFÝMyùnÑAmÑCawu_p¯sfÛ_gI_pNysB¦zG¸rHeN\\CvEsÐñÚkcDÖĉsaQ¯}_UzÁē}^R Äd^ÍĸZ¾·¶`wećJE¹vÛ·HgéFXjÉê`|ypxkAwWĐpb¥eOsmzwqChóUQl¥F^lafanòsrEvfQdÁUVfÎvÜ^eftET¬ôA\\¢sJnQTjPØxøK|nBzĞ»LYFDxÓvr[ehľvN¢o¾NiÂxGpâ¬zbfZo~hGi]öF||NbtOMn eA±tPTLjpYQ|SHYĀxinzDJÌg¢và¥Pg_ÇzIIII£®S¬ØsÎ¼¥¨^LnGĲļĲƤjÎƀƾ¹¸ØÎezĆT¸}êÐqHðqĖä¥^CÆIj²p\\_ æüY|[YxƊæu°xb®Űb@~¢NQt°¶Sæ Ê~rǉĔëĚ¢~uf`faĔJåĊnÔ]jƎćÊ@£¾a®£Ű{ŶĕFègLk{Y|¡ĜWƔtƬJÑxq±ĢN´òKLÈÃ¼D|s`ŋć]Ã`đMùƱ¿~Y°ħ`ƏíW½eI½{aOIrÏ¡ĕŇapµÜƃġ²"],encodeOffsets:[[111728,31311]]},properties:{cp:[106.504962,29.533155],name:"重庆",childNum:1}},{id:"810000",geometry:{type:"MultiPolygon",coordinates:[["@@AlFi","@@mp","@@EpHo","@@rMUwAS¬]","@@ea¢pl¸Eõ¹hj[]ÔCÎ@lj¡uBX´AI¹[yDU]W`çwZkmcMpÅv}IoJlcafŃK°ä¬XJmÐ đhI®æÔtSHnEÒrÄc"]],encodeOffsets:[[[117111,23002],[117072,22876],[117045,22887],[116882,22747],[116975,23082]]]},properties:{cp:[114.173355,22.320048],name:"香港",childNum:5}},{id:"820000",geometry:{type:"Polygon",coordinates:["@@áw{Îr"],encodeOffsets:[[116285,22746]]},properties:{cp:[113.54909,22.198951],name:"澳门",childNum:1}}],UTF8Encoding:!0}):void i("ECharts Map is not loaded"):void i("ECharts is not Loaded")}),angular.module("app.upload",[]).directive("ngThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(t)}};return{restrict:"A",template:"<canvas/>",link:function(e,i,n){function a(e){var t=new Image;t.onload=s,t.src=e.target.result}function s(){var e=o.width||this.width/this.height*o.height,t=o.height||this.height/this.width*o.width;e>300&&(e=300,t=this.height/this.width*300),r.attr({width:e,height:t}),r[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var o=e.$eval(n.ngThumb);if(t.isFile(o.file)&&t.isImage(o.file)){var r=i.find("canvas"),l=new FileReader;l.onload=a,l.readAsDataURL(o.file)}}}}}]).directive("ngThumbnail",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(t)}};return{restrict:"A",link:function(e,i,n){function a(e){l.onload=s,l.src=e.target.result}function s(){var e=o.width||this.width/this.height*o.height,t=o.height||this.height/this.width*o.width;e>300&&(e=300,t=this.height/this.width*300),$(l).attr({width:e,height:t}),i.append(l)}if(t.support){var o=e.$eval(n.ngThumbnail),r=new FileReader;r.onload=a,r.readAsDataURL(o.file);var l=new Image;l.id="uploadThumbnail"}}}}]),!function(e,t){return"function"==typeof define&&define.amd?void define("angular-file-upload",["angular"],function(e){return t(e)}):t(e)}("undefined"==typeof angular?null:angular,function(e){var t=e.module("angularFileUpload",[]);return t.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(t,i,n,a,s){function o(i){var n=e.copy(t);e.extend(this,n,i,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function r(t){var i=e.isElement(t),n=i?t.value:t,a=e.isString(n)?"FakePath":"Object",s="_createFrom"+a;this[s](n)}function l(t,i,n){var a=e.isElement(i),s=a?e.element(i):null,r=a?null:i;e.extend(this,{url:t.url,alias:t.alias,headers:e.copy(t.headers),formData:e.copy(t.formData),removeAfterUpload:t.removeAfterUpload,withCredentials:t.withCredentials,method:t.method},n,{uploader:t,file:new o.FileLikeObject(i),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:r,_input:s}),s&&this._replaceNode(s)}function c(t){e.extend(this,t),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function d(){d.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function p(){p.super_.apply(this,arguments)}function u(){u.super_.apply(this,arguments)}return o.prototype.isHTML5=!(!a.File||!a.FormData),o.prototype.addToQueue=function(t,i,n){var a=this.isArrayLikeObject(t)?t:[t],s=this._getFilters(n),r=this.queue.length,l=[];e.forEach(a,function(e){var t=new o.FileLikeObject(e);if(this._isValidFile(t,s,i)){var n=new o.FileItem(this,e,i);l.push(n),this.queue.push(n),this._onAfterAddingFile(n)}else{if(this.queue&&1==this.queueLimit){var a=this.queue[0];a.isUploading&&a.cancel(),this.queue.splice(0,1),a._destroy(),this.progress=this._getTotalProgress();var n=new o.FileItem(this,e,i);l.push(n),this.queue.push(n),this._onAfterAddingFile(n)}var r=this.filters[this._failFilterIndex];this._onWhenAddingFileFailed(t,r,i)}},this),this.queue.length!==r&&(this._onAfterAddingAll(l),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},o.prototype.removeFromQueue=function(e){var t=this.getIndexOfItem(e),i=this.queue[t];i.isUploading&&i.cancel(),this.queue.splice(t,1),i._destroy(),this.progress=this._getTotalProgress()},o.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},o.prototype.uploadItem=function(e){var t=this.getIndexOfItem(e),i=this.queue[t],n=this.isHTML5?"_xhrTransport":"_iframeTransport";i._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[n](i))},o.prototype.cancelItem=function(e){var t=this.getIndexOfItem(e),i=this.queue[t],n=this.isHTML5?"_xhr":"_form";i&&i.isUploading&&i[n].abort()},o.prototype.uploadAll=function(){var t=this.getNotUploadedItems().filter(function(e){return!e.isUploading});t.length&&(e.forEach(t,function(e){e._prepareToUploading()}),t[0].upload())},o.prototype.cancelAll=function(){var t=this.getNotUploadedItems();e.forEach(t,function(e){e.cancel()})},o.prototype.isFile=function(e){var t=a.File;return t&&e instanceof t},o.prototype.isFileLikeObject=function(e){return e instanceof o.FileLikeObject},o.prototype.isArrayLikeObject=function(t){return e.isObject(t)&&"length"in t},o.prototype.getIndexOfItem=function(t){return e.isNumber(t)?t:this.queue.indexOf(t)},o.prototype.getNotUploadedItems=function(){return this.queue.filter(function(e){return!e.isUploaded})},o.prototype.getReadyItems=function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})},o.prototype.destroy=function(){e.forEach(this._directives,function(t){e.forEach(this._directives[t],function(e){e.destroy()},this)},this)},o.prototype.onAfterAddingAll=function(){},o.prototype.onAfterAddingFile=function(){},o.prototype.onWhenAddingFileFailed=function(){},o.prototype.onBeforeUploadItem=function(){},o.prototype.onProgressItem=function(){},o.prototype.onProgressAll=function(){},o.prototype.onSuccessItem=function(){},o.prototype.onErrorItem=function(){},o.prototype.onCancelItem=function(){},o.prototype.onCompleteItem=function(){},o.prototype.onCompleteAll=function(){},o.prototype._getTotalProgress=function(e){if(this.removeAfterUpload)return e||0;var t=this.getNotUploadedItems().length,i=t?this.queue.length-t:this.queue.length,n=100/this.queue.length,a=(e||0)*n/100;return Math.round(i*n+a)},o.prototype._getFilters=function(t){if(e.isUndefined(t))return this.filters;if(e.isArray(t))return t;var i=t.match(/[^\s,]+/g);return this.filters.filter(function(e){return-1!==i.indexOf(e.name)},this)},o.prototype._render=function(){i.$$phase||i.$apply()},o.prototype._folderFilter=function(e){return!(!e.size&&!e.type)},o.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},o.prototype._isValidFile=function(e,t,i){return this._failFilterIndex=-1,!t.length||t.every(function(t){return this._failFilterIndex++,t.fn.call(this,e,i)},this)},o.prototype._isSuccessCode=function(e){return e>=200&&300>e||304===e},o.prototype._transformResponse=function(t){return e.forEach(n.defaults.transformResponse,function(e){t=e(t)}),t},o.prototype._parseHeaders=function(t){function i(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function n(e){return e.toLowerCase()}var a,s,o,r={};return t?(e.forEach(t.split("\n"),function(e){o=e.indexOf(":"),a=n(i(e.substr(0,o))),s=i(e.substr(o+1)),a&&(r[a]=r[a]?r[a]+", "+s:s)}),r):r},o.prototype._xhrTransport=function(t){var i=t._xhr=new XMLHttpRequest,n=new FormData,a=this;a._onBeforeUploadItem(t),e.forEach(t.formData,function(t){e.forEach(t,function(e,t){n.append(t,e)})}),n.append(t.alias,t._file,t.file.name),i.onload=function(){var e=a._parseHeaders(i.getAllResponseHeaders()),n=a._transformResponse(i.response),s=a._isSuccessCode(i.status)?"Success":"Error",o="_on"+s+"Item";a[o](t,n,i.status,e),a._onCompleteItem(t,n,i.status,e)},i.onerror=function(){var e=a._parseHeaders(i.getAllResponseHeaders()),n=a._transformResponse(i.response);a._onErrorItem(t,n,i.status,e),a._onCompleteItem(t,n,i.status,e)},i.onabort=function(){var e=a._parseHeaders(i.getAllResponseHeaders()),n=a._transformResponse(i.response);a._onCancelItem(t,n,i.status,e),a._onCompleteItem(t,n,i.status,e)},i.open(t.method,t.url,!0),i.withCredentials=t.withCredentials,e.forEach(t.headers,function(e,t){i.setRequestHeader(t,e)}),i.send(n),this._render()},o.prototype._iframeTransport=function(t){var i=e.element('<form style="display: none;" />'),n=e.element('<iframe name="iframeTransport'+Date.now()+'">'),a=t._input,s=this;t._form&&t._form.replaceWith(a),t._form=i,s._onBeforeUploadItem(t),a.prop("name",t.alias),e.forEach(t.formData,function(t){e.forEach(t,function(t,n){i.append(e.element('<input type="hidden" name="'+n+'" value="'+t+'" />'))})}),i.prop({action:t.url,method:"POST",target:n.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),n.bind("load",function(){try{var e=n[0].contentDocument.body.innerHTML;
}catch(i){}var a={response:e,status:200,dummy:!0},o=s._transformResponse(a.response),r={};s._onSuccessItem(t,o,a.status,r),s._onCompleteItem(t,o,a.status,r)}),i.abort=function(){var e,o={status:0,dummy:!0},r={};n.unbind("load").prop("src","javascript:false;"),i.replaceWith(a),s._onCancelItem(t,e,o.status,r),s._onCompleteItem(t,e,o.status,r)},a.after(i),i.append(a).append(n),i[0].submit(),this._render()},o.prototype._onWhenAddingFileFailed=function(e,t,i){this.onWhenAddingFileFailed(e,t,i)},o.prototype._onAfterAddingFile=function(e){this.onAfterAddingFile(e)},o.prototype._onAfterAddingAll=function(e){this.onAfterAddingAll(e)},o.prototype._onBeforeUploadItem=function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)},o.prototype._onProgressItem=function(e,t){var i=this._getTotalProgress(t);this.progress=i,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(i),this._render()},o.prototype._onSuccessItem=function(e,t,i,n){e._onSuccess(t,i,n),this.onSuccessItem(e,t,i,n)},o.prototype._onErrorItem=function(e,t,i,n){e._onError(t,i,n),this.onErrorItem(e,t,i,n)},o.prototype._onCancelItem=function(e,t,i,n){e._onCancel(t,i,n),this.onCancelItem(e,t,i,n)},o.prototype._onCompleteItem=function(t,i,n,a){t._onComplete(i,n,a),this.onCompleteItem(t,i,n,a);var s=this.getReadyItems()[0];return this.isUploading=!1,e.isDefined(s)?void s.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},o.isFile=o.prototype.isFile,o.isFileLikeObject=o.prototype.isFileLikeObject,o.isArrayLikeObject=o.prototype.isArrayLikeObject,o.isHTML5=o.prototype.isHTML5,o.inherit=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.super_=t},o.FileLikeObject=r,o.FileItem=l,o.FileDirective=c,o.FileSelect=d,o.FileDrop=p,o.FileOver=u,r.prototype._createFromFakePath=function(e){this.lastModifiedDate=null,this.size=null,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)},r.prototype._createFromObject=function(t){this.lastModifiedDate=e.copy(t.lastModifiedDate),this.size=t.size,this.type=t.type,this.name=t.name},l.prototype.upload=function(){this.uploader.uploadItem(this)},l.prototype.cancel=function(){this.uploader.cancelItem(this)},l.prototype.remove=function(){this.uploader.removeFromQueue(this)},l.prototype.onBeforeUpload=function(){},l.prototype.onProgress=function(){},l.prototype.onSuccess=function(){},l.prototype.onError=function(){},l.prototype.onCancel=function(){},l.prototype.onComplete=function(){},l.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},l.prototype._onProgress=function(e){this.progress=e,this.onProgress(e)},l.prototype._onSuccess=function(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(e,t,i)},l.prototype._onError=function(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(e,t,i)},l.prototype._onCancel=function(e,t,i){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(e,t,i)},l.prototype._onComplete=function(e,t,i){this.onComplete(e,t,i),this.removeAfterUpload&&this.remove()},l.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},l.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},l.prototype._replaceNode=function(e){var t=s(e.clone())(e.scope());t.prop("value",null),e.css("display","none"),e.after(t)},c.prototype.events={},c.prototype.bind=function(){for(var e in this.events){var t=this.events[e];this.element.bind(e,this[t])}},c.prototype.unbind=function(){for(var e in this.events)this.element.unbind(e,this.events[e])},c.prototype.destroy=function(){var e=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(e,1),this.unbind()},c.prototype._saveLinks=function(){for(var e in this.events){var t=this.events[e];this[t]=this[t].bind(this)}},o.inherit(d,c),d.prototype.events={$destroy:"destroy",change:"onChange"},d.prototype.prop="select",d.prototype.getOptions=function(){},d.prototype.getFilters=function(){},d.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},d.prototype.onChange=function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],t=this.getOptions(),i=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,t,i),this.isEmptyAfterSelection()&&this.element.prop("value",null)},o.inherit(p,c),p.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},p.prototype.prop="drop",p.prototype.getOptions=function(){},p.prototype.getFilters=function(){},p.prototype.onDrop=function(t){var i=this._getTransfer(t);if(i){var n=this.getOptions(),a=this.getFilters();this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(i.files,n,a)}},p.prototype.onDragOver=function(t){var i=this._getTransfer(t);this._haveFiles(i.types)&&(i.dropEffect="copy",this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._addOverClass,this))},p.prototype.onDragLeave=function(t){t.target===this.element[0]&&(this._preventAndStop(t),e.forEach(this.uploader._directives.over,this._removeOverClass,this))},p.prototype._getTransfer=function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer},p.prototype._preventAndStop=function(e){e.preventDefault(),e.stopPropagation()},p.prototype._haveFiles=function(e){return!!e&&(e.indexOf?-1!==e.indexOf("Files"):!!e.contains&&e.contains("Files"))},p.prototype._addOverClass=function(e){e.addOverClass()},p.prototype._removeOverClass=function(e){e.removeOverClass()},o.inherit(u,c),u.prototype.events={$destroy:"destroy"},u.prototype.prop="over",u.prototype.overClass="nv-file-over",u.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},u.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},u.prototype.getOverClass=function(){return this.overClass},o}]).directive("nvFileSelect",["$parse","FileUploader",function(e,t){return{link:function(i,n,a){var s=i.$eval(a.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var o=new t.FileSelect({uploader:s,element:n});o.getOptions=e(a.options).bind(o,i),o.getFilters=function(){return a.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(e,t){return{link:function(i,n,a){var s=i.$eval(a.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');if(s.isHTML5){var o=new t.FileDrop({uploader:s,element:n});o.getOptions=e(a.options).bind(o,i),o.getFilters=function(){return a.filters}}}}}]).directive("nvFileOver",["FileUploader",function(e){return{link:function(t,i,n){var a=t.$eval(n.uploader);if(!(a instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var s=new e.FileOver({uploader:a,element:i});s.getOverClass=function(){return n.overClass||this.overClass}}}}]),t}),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],MONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d ah:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"ah:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(¤",negSuf:")",posPre:"¤",posSuf:""}]},id:"zh-cn",pluralCat:function(){return t.OTHER}})}]),function(e){"use strict";"object"==typeof exports?module.exports=e(window.jQuery):"function"==typeof define&&define.amd?define(["jquery"],e):window.jQuery&&!window.jQuery.fn.colorpicker&&e(window.jQuery)}(function(e){"use strict";var t=function(t,i){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,i&&e.extend(this.colors,i),t&&(void 0!==t.toLowerCase?(t+="",this.setColor(t)):void 0!==t.h&&(this.value=t))};t.prototype={constructor:t,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(e){return"number"==typeof e?e:isNaN(e)||null===e||""===e||void 0===e?1:void 0!==e.toLowerCase?parseFloat(e):1},isTransparent:function(e){return!!e&&(e=e.toLowerCase().trim(),"transparent"===e||e.match(/#?00000000/)||e.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(e){return 0===e.r&&0===e.g&&0===e.b&&0===e.a},setColor:function(e){e=e.toLowerCase().trim(),e&&(this.isTransparent(e)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(e)||{h:0,s:0,b:0,a:1})},stringToHSB:function(t){t=t.toLowerCase();var i;"undefined"!=typeof this.colors[t]&&(t=this.colors[t],i="alias");var n=this,a=!1;return e.each(this.stringParsers,function(e,s){var o=s.re.exec(t),r=o&&s.parse.apply(n,[o]),l=i||s.format||"rgba";return!r||(a=l.match(/hsla?/)?n.RGBtoHSB.apply(n,n.HSLtoRGB.apply(n,r)):n.RGBtoHSB.apply(n,r),n.origFormat=l,!1)}),a},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setBrightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,i,n){e||(e=this.value.h,t=this.value.s,i=this.value.b),e*=360;var a,s,o,r,l;return e=e%360/60,l=i*t,r=l*(1-Math.abs(e%2-1)),a=s=o=i-l,e=~~e,a+=[l,r,0,0,r,l][e],s+=[r,l,l,r,0,0][e],o+=[0,0,r,l,l,r][e],{r:Math.round(255*a),g:Math.round(255*s),b:Math.round(255*o),a:n||this.value.a}},toHex:function(e,t,i,n){var a=this.toRGB(e,t,i,n);return this.rgbaIsTransparent(a)?"transparent":"#"+(1<<24|parseInt(a.r)<<16|parseInt(a.g)<<8|parseInt(a.b)).toString(16).substr(1)},toHSL:function(e,t,i,n){e=e||this.value.h,t=t||this.value.s,i=i||this.value.b,n=n||this.value.a;var a=e,s=(2-t)*i,o=t*i;return o/=s>0&&s<=1?s:2-s,s/=2,o>1&&(o=1),{h:isNaN(a)?0:a,s:isNaN(o)?0:o,l:isNaN(s)?0:s,a:isNaN(n)?0:n}},toAlias:function(e,t,i,n){var a=this.toHex(e,t,i,n);for(var s in this.colors)if(this.colors[s]===a)return s;return!1},RGBtoHSB:function(e,t,i,n){e/=255,t/=255,i/=255;var a,s,o,r;return o=Math.max(e,t,i),r=o-Math.min(e,t,i),a=0===r?null:o===e?(t-i)/r:o===t?(i-e)/r+2:(e-t)/r+4,a=(a+360)%6*60/360,s=0===r?0:r/o,{h:this._sanitizeNumber(a),s:s,b:o,a:this._sanitizeNumber(n)}},HueToRGB:function(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e},HSLtoRGB:function(e,t,i,n){t<0&&(t=0);var a;a=i<=.5?i*(1+t):i+t-i*t;var s=2*i-a,o=e+1/3,r=e,l=e-1/3,c=Math.round(255*this.HueToRGB(s,a,o)),d=Math.round(255*this.HueToRGB(s,a,r)),p=Math.round(255*this.HueToRGB(s,a,l));return[c,d,p,this._sanitizeNumber(n)]},toString:function(e){e=e||"rgba";var t=!1;switch(e){case"rgb":return t=this.toRGB(),this.rgbaIsTransparent(t)?"transparent":"rgb("+t.r+","+t.g+","+t.b+")";case"rgba":return t=this.toRGB(),"rgba("+t.r+","+t.g+","+t.b+","+t.a+")";case"hsl":return t=this.toHSL(),"hsl("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%)";case"hsla":return t=this.toHSL(),"hsla("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%,"+t.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return t}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(e){return[e[1],e[2],e[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1]}}],colorNameToHex:function(e){return"undefined"!=typeof this.colors[e.toLowerCase()]&&this.colors[e.toLowerCase()]}};var i={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null},n=function(n,a){if(this.element=e(n).addClass("colorpicker-element"),this.options=e.extend(!0,{},i,this.element.data(),a),this.component=this.options.component,this.component=this.component!==!1&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1&&e(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new t(this.options.color!==!1?this.options.color:this.getValue(),this.options.colorSelectors),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.options.color!==!1&&(this.updateInput(this.color),this.updateData(this.color)),this.picker=e(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),"rgba"!==this.format&&"hsla"!==this.format&&this.options.format!==!1||this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),this.options.inline===!0&&this.picker.addClass("colorpicker-no-arrow"),this.options.colorSelectors){var s=this;e.each(this.options.colorSelectors,function(t,i){var n=e("<i />").css("background-color",i).data("class",t);n.click(function(){s.setValue(e(this).css("background-color"))}),s.picker.find(".colorpicker-selectors").append(n)}),this.picker.find(".colorpicker-selectors").show()}this.picker.on("mousedown.colorpicker touchstart.colorpicker",e.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:e("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":e.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":e.proxy(this.change,this)}),this.component===!1&&this.element.on({"focus.colorpicker":e.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":e.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":e.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":e.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":e.proxy(this.show,this),"focus.colorpicker":e.proxy(this.show,this)}),this.update(),e(e.proxy(function(){this.element.trigger("create")},this))};n.Color=t,n.prototype={constructor:n,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var e=this.container&&this.container[0]!==document.body?"position":"offset",t=this.component||this.element,i=t[e]();"right"===this.options.align&&(i.left-=this.picker.outerWidth()-t.outerWidth()),this.picker.css({top:i.top+t.outerHeight(),left:i.left})},show:function(t){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),e(window).on("resize.colorpicker",e.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),this.options.inline===!1&&e(window.document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),e(window).off("resize.colorpicker",this.reposition),e(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(e){return e=e||this.color.toString(this.format),this.element.data("color",e),e},updateInput:function(e){if(e=e||this.color.toString(this.format),this.input!==!1){if(this.options.colorSelectors){var i=new t(e,this.options.colorSelectors),n=i.toAlias();"undefined"!=typeof this.options.colorSelectors[n]&&(e=n)}this.input.prop("value",e)}return e},updatePicker:function(e){void 0!==e&&(this.color=new t(e,this.options.colorSelectors));var i=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,n=this.picker.find("i");if(0!==n.length)return this.options.horizontal===!1?(i=this.options.sliders,n.eq(1).css("top",i.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",i.alpha.maxTop*(1-this.color.value.a))):(i=this.options.slidersHorz,n.eq(1).css("left",i.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",i.alpha.maxLeft*(1-this.color.value.a))),n.eq(0).css({top:i.saturation.maxTop-this.color.value.b*i.saturation.maxTop,left:this.color.value.s*i.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),e},updateComponent:function(e){if(e=e||this.color.toString(this.format),this.component!==!1){var t=this.component.find("i").eq(0);t.length>0?t.css({backgroundColor:e}):this.component.css({backgroundColor:e})}return e},update:function(e){var t;return this.getValue(!1)===!1&&e!==!0||(t=this.updateComponent(),this.updateInput(t),this.updateData(t),this.updatePicker()),t},setValue:function(e){this.color=new t(e,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:e})},getValue:function(e){e=void 0===e?"#000000":e;var t;return t=this.hasInput()?this.input.val():this.element.data("color"),void 0!==t&&""!==t&&null!==t||(t=e),t},hasInput:function(){return this.input!==!1},isDisabled:function(){return!!this.hasInput()&&this.input.prop("disabled")===!0},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){t.pageX||t.pageY||!t.originalEvent||(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var i=e(t.target),n=i.closest("div"),a=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!n.is(".colorpicker")){if(n.is(".colorpicker-saturation"))this.currentSlider=e.extend({},a.saturation);else if(n.is(".colorpicker-hue"))this.currentSlider=e.extend({},a.hue);else{if(!n.is(".colorpicker-alpha"))return!1;this.currentSlider=e.extend({},a.alpha)}var s=n.offset();this.currentSlider.guide=n.find("i")[0].style,this.currentSlider.left=t.pageX-s.left,this.currentSlider.top=t.pageY-s.top,this.mousePointer={left:t.pageX,top:t.pageY},e(document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"touchmove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this),"touchend.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.pageX||e.pageY||!e.originalEvent||(e.pageX=e.originalEvent.touches[0].pageX,e.pageY=e.originalEvent.touches[0].pageY),e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((e.pageX||this.mousePointer.left)-this.mousePointer.left))),i=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=t+"px",this.currentSlider.guide.top=i+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,t/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,i/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&this.options.format===!1&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),this.element.trigger({type:"completeColor",color:this.color}),!1},change:function(e){this.keyup(e)},keyup:function(e){38===e.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===e.keyCode?(this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new t(this.input.val(),this.options.colorSelectors),this.color.origFormat&&this.options.format===!1&&(this.format=this.color.origFormat),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},e.colorpicker=n,e.fn.colorpicker=function(t){var i,a=arguments,s=this.each(function(){var s=e(this),o=s.data("colorpicker"),r="object"==typeof t?t:{};o||"string"==typeof t?"string"==typeof t&&(i=o[t].apply(o,Array.prototype.slice.call(a,1))):s.data("colorpicker",new n(this,r))});return"getValue"===t?i:s},e.fn.colorpicker.constructor=n}),function(e){var t=function(t){var i=e.Deferred(),n=new FileReader;return n.onload=function(e){i.resolve(e.target.result)},n.onerror=i.reject,n.onprogress=i.notify,n.readAsDataURL(t),i.promise()};e.fn.cleanHtml=function(){var t=e(this).html();return t&&t.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},e.fn.wysiwyg_destroy=function(t){var i,n,a,s;return i=this,n=e.extend({},e.fn.wysiwyg.defaults,t),s="a[data-"+n.commandRole+"],button[data-"+n.commandRole+"],input[type=button][data-"+n.commandRole+"]",i.off("."+n.eventNamespace),i.off("paste"),e(window).off("."+n.eventNamespace),a=e(n.toolbarSelector),a.find(s).off("."+n.eventNamespace),a.find("[data-toggle=dropdown]").off("."+n.eventNamespace),a.find("input[type=text][data-"+n.commandRole+"]").off("."+n.eventNamespace),a.find("input[type=file][data-"+n.commandRole+"]").off("."+n.eventNamespace),e("#fontFamily").off("click","a[dropdown-toggle]"),this},e.fn.wysiwyg=function(i){var n,a,s,o,r,l,c,d=this,p=function(){a.activeToolbarClass&&e(a.toolbarSelector).find(s).each(function(){var t=e(this).data(a.commandRole);document.queryCommandState(t)?e(this).addClass(a.activeToolbarClass):e(this).removeClass(a.activeToolbarClass)})},u=function(t,i){var a=t.split(" "),s=a.shift(),d=a.join(" ")+(i||"");if("createLink"==s){var u=window.getSelection(),h=document.createRange();if(h.setStart(o,r),h.setEnd(l,c),u.removeAllRanges(),u.addRange(h),window.getSelection().isCollapsed)return void p();if("external"==i[0]){for(var g=(document.execCommand(s,0,PREFIX_S1_URL+"eqs/link?id="+i[2]+"&url="+encodeURIComponent(i[1])),window.getSelection().focusNode);g&&g.parentNode;)if(g=g.parentNode,g.tagName&&"a"==g.tagName.toLowerCase()){g.target="_blank",e(g).removeAttr("data");break}for(var f=window.getSelection().anchorNode;f&&f.parentNode;)if(f=f.parentNode,f.tagName&&"a"==f.tagName.toLowerCase()){f.target="_blank",e(f).removeAttr("data");break}}else if("internal"==i[0]){for(var g=(document.execCommand(s,0,d.split(",")[1]),window.getSelection().focusNode);g&&g.parentNode;)if(g=g.parentNode,g.tagName&&"a"==g.tagName.toLowerCase()){e(g).attr("data",d.split(",")[1]);break}for(var f=window.getSelection().anchorNode;f&&f.parentNode;)if(f=f.parentNode,f.tagName&&"a"==f.tagName.toLowerCase()){e(f).attr("data",d.split(",")[1]);break}}}else{if("fontSize"===s&&d.indexOf("px")>-1){n||m(),document.execCommand(s,0,d);var v=window.getSelection().focusNode;return n.commonAncestorContainer.contains(window.getSelection().focusNode.parentNode)?(v=n.commonAncestorContainer,"div"==v.nodeName.toLowerCase()&&(v=e(v).find('[style*="font-size: -webkit-xxx-large"]'))):"#text"==v.nodeName.toLowerCase()&&(v=v.parentNode),e(v).css({fontSize:d}),void(e(v).find("span").length>0&&e(v).find("span").css({fontSize:d}))}document.execCommand(s,0,d),"fontName"==s&&e(".font-dropdown").find(".dropdown-toggle").trigger("click")}p()},h=function(t){e.each(t,function(e,t){d.keydown(e,function(e){d.attr("contenteditable")&&d.is(":visible")&&(e.preventDefault(),e.stopPropagation(),u(t))}).keyup(e,function(e){d.attr("contenteditable")&&d.is(":visible")&&(e.preventDefault(),e.stopPropagation())})})},g=function(){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)},m=function(){n=g()},f=function(){var e=window.getSelection();if(n){try{e.removeAllRanges()}catch(t){document.body.createTextRange().select(),document.selection.empty()}e.addRange(n)}},v=function(i){d.focus(),e.each(i,function(i,n){/^image\//.test(n.type)?e.when(t(n)).done(function(e){u("insertimage",e)}).fail(function(e){a.fileUploadError("file-reader",e)}):a.fileUploadError("unsupported-file-type",n.type)})},b=function(t,i){function n(e){if(e)return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}t.bind("click",f),e("#toolbar-add-linkA").bind("click",function(e){e.stopPropagation()}),t.find(s).click(function(){f(),d.focus(),u(e(this).data(i.commandRole)),m()}),t.find(".btn-group").click(function(t){for(var i=window.getSelection().focusNode;i&&i.parentNode&&(i=i.parentNode,!i.style||!i.style.fontFamily)&&(!i||!/editable\-text/.test(i.className)););var a,s;if(e(".size-menu:visible").length)a=e(".size-menu").find("li"),/editable\-text/.test(i.className)?e.each(a,function(t,n){if(s=e(n).find("a"),s.removeClass("selected-size"),0==e(i).find("span").length){var a=e(i).find("a").css("font-size")||e(i).css("font-size");s.attr("data-edit")=="fontSize "+a&&s.addClass("selected-size")}else{var a=e(i).find("span").find("a").css("font-size")||e(i).find("span").css("font-size");s.attr("data-edit")=="fontSize "+a&&s.addClass("selected-size")}}):e.each(a,function(t,n){if(s=e(n).find("a"),s.removeClass("selected-size"),e(i).css("font-size")){var a=e(i).children().css("font-size")?e(i).children().css("font-size"):e(i).css("font-size");s.attr("data-edit")=="fontSize "+a&&s.addClass("selected-size")}else"fontSize 24px"==s.attr("data-edit")&&s.addClass("selected-size")});else if(e(".color-menu:visible").length)a=e(".color-menu").find("li"),
e.each(a,function(t,a){s=e(a).find("a");var o;s.removeClass("selected-color selected-blue-color").empty(),i.style&&i.style.color?o=i.style.color:e(i).find("a").get(0)&&e(i).find("a").get(0).style.color?o=e(i).find("a").get(0).style.color:e(i).parent("a").get(0)&&e(i).parent("a").get(0).style.color?o=e(i).parent("a").get(0).style.color:e(i).find("span").get(0)&&e(i).find("span").get(0).style.color&&(o=e(i).find("span").get(0).style.color),o=n(o),s.attr("data-edit")=="foreColor "+o&&(s.addClass("selected-color").append('<span class="eqf-yes2"></span>'),"foreColor #23a3d3"==s.attr("data-edit")&&s.addClass("selected-blue-color"))});else if(e(".bgcolor-menu:visible").length){var o;a=e(".bgcolor-menu").find("li"),e.each(a,function(t,a){s=e(a).find("a"),s.removeClass("selected-color").empty(),i.style&&i.style.backgroundColor?o=i.style.backgroundColor:e(i).find("a").get(0)&&e(i).find("a").get(0).style.backgroundColor?o=e(i).find("a").get(0).style.backgroundColor:e(i).parent("a").get(0)&&e(i).parent("a").get(0).style.backgroundColor?o=e(i).parent("a").get(0).style.backgroundColor:e(i).find("span").get(0)&&e(i).find("span").get(0).style.backgroundColor&&(o=e(i).find("span").get(0).style.backgroundColor);var r=n(s.get(0).style.backgroundColor);o=n(o),r==o&&s.addClass("selected-color").append('<span style="" class="eqf-yes2"></span>')})}else if(e(".fontname-menu:visible").length){a=e(".fontname-menu").find("li");var r;e.each(a,function(t,n){n.className.split(" ");r=e(n),r.hasClass("selected-font")&&r.removeClass("selected-font"),i.style?n.className==i.style.fontFamily&&r.addClass("selected-font"):e(".weiruanyahei").addClass("selected-font")}),i.style||e(".weiruanyahei").addClass("selected-font"),i.style&&(i.style.fontFamily||e(".weiruanyahei").addClass("selected-font"))}}),t.find("[data-toggle=dropdown]").click(f);var a,p;t.find(".createLink[data-toggle=dropdown]").click(function(){var t,i=e(getSelection().focusNode).parent();if(p=e(i).closest(".element").attr("id"),e("#btn-toolbar input[type=text][data-edit]").attr("id","input_"+p),e("#btn-toolbar select[data-edit]").attr("id","select_"+p),e("#btn-toolbar input[name=external]").attr("id","external_"+p),e("#btn-toolbar input[name=internal]").attr("id","internal_"+p),i.is("a")){if(i.attr("href")&&isNaN(i.attr("href")))t=e("#btn-toolbar #input_"+p),t.val(decodeURIComponent(i.attr("href").split("url=")[1])),e("#btn-toolbar #select_"+p).val(0).attr("disabled",!0),e("#btn-toolbar #external_"+p).attr("checked",!0),e("#btn-toolbar #internal_"+p).attr("checked",!1),a="external";else if(i.attr("data")||!isNaN(i.attr("href"))){t=e("#btn-toolbar #select_"+p);var n=PREFIX_URL+"m/scene/pageList/"+t.attr("sceneid")+"?date="+(new Date).getTime();e.ajax({method:"GET",url:n,xhrFields:{withCredentials:!0},crossDomain:!0}).then(function(e){var n=e.list;if(e.success)for(var a=0;a<n.length;a++)n[a].id==i.attr("data")&&t.val(n[a].num-1)}),e("#btn-toolbar #input_"+p).val("http://").attr("disabled",!0),e("#btn-toolbar #internal_"+p).attr("checked",!0),e("#btn-toolbar #external_"+p).attr("checked",!1),a="internal"}}else e("#btn-toolbar #input_"+p).val("http://"),e("#btn-toolbar #select_"+p).val(0).attr("disabled",!0),e("#btn-toolbar #internal_"+p).attr("checked",!1),e("#btn-toolbar #external_"+p).attr("checked",!0),a="external";var s=window.getSelection(),d=s.getRangeAt(0);o=d.startContainer,r=d.startOffset,l=d.endContainer,c=d.endOffset}),e("#btn-toolbar input[name=external]").change(function(){a=this.value,e("#btn-toolbar #select_"+p).val(0).attr("disabled",!0),e("#btn-toolbar #input_"+p).removeAttr("disabled"),e("#btn-toolbar #internal_"+p).attr("checked",!1)}),e("#btn-toolbar input[name=internal]").change(function(){a=this.value,e("#btn-toolbar #input_"+p).val("http://").attr("disabled",!0),e("#btn-toolbar #select_"+p).removeAttr("disabled"),e("#btn-toolbar #external_"+p).attr("checked",!1)}),e("#fontFamily").on("click","a[dropdown-toggle]",function(t){f(),d.focus(),u(e(this).data(i.commandRole)),m()}),e("a[dropdown-toggle]").click(function(){if("external"==a){var n=t.find("input[type=text][data-"+i.commandRole+"]"),s=e(n).val();e(n).val("");var o=e(n).attr("sceneid");f();var r="http://";/^http:|^https:|^ftp:/.test(s)||(s=r+s),s&&s!=r&&(d.focus(),u(e(n).data(i.commandRole),[a,s,o])),m()}else if("internal"==a){var n=t.find("select[data-"+i.commandRole+"]"),s=e(n).attr("pageid");e(n).val("");var o=e(n).attr("sceneid");f(),s&&(d.focus(),u(e(n).data(i.commandRole),[a,parseInt(s),o]))}}),t.find("input[type=file][data-"+i.commandRole+"]").change(function(){f(),"file"===this.type&&this.files&&this.files.length>0&&v(this.files),m(),this.value=""})},y=function(){d.on("dragenter dragover",!1).on("drop",function(e){var t=e.originalEvent.dataTransfer;e.stopPropagation(),e.preventDefault(),t&&t.files&&t.files.length>0&&v(t.files)})};a=e.extend({},e.fn.wysiwyg.defaults,i),s="a[data-"+a.commandRole+"],button[data-"+a.commandRole+"],input[type=button][data-"+a.commandRole+"]",h(a.hotKeys),a.dragAndDropImages&&y();try{document.execCommand("styleWithCSS",0,!0)}catch(w){}return b(e(a.toolbarSelector),a),d.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){m(),p()}),d.on("paste",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain")||prompt("Paste something..");document.execCommand("insertText",!1,t)}),e(window).bind("touchend",function(e){var t=d.is(e.target)||d.has(e.target).length>0,i=g(),n=i&&i.startContainer===i.endContainer&&i.startOffset===i.endOffset;n&&!t||(m(),p())}),this},e.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,fileUploadError:function(e,t){console.log("File upload error",e,t)}}}(window.jQuery),function(){"use strict";var e=this,t=e.Chart,i=function(e){this.canvas=e.canvas,this.ctx=e;var t=function(e,t){return e["offset"+t]?e["offset"+t]:document.defaultView.getComputedStyle(e).getPropertyValue(t)},i=this.width=t(e.canvas,"Width")||e.canvas.width,a=this.height=t(e.canvas,"Height")||e.canvas.height;return i=this.width=e.canvas.width,a=this.height=e.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};i.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipTitleTemplate:"<%= label%>",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",segmentColorDefault:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A","#B4B482","#B15928"],segmentHighlightColorDefaults:["#CEF6FF","#47A0DC","#DAFFB2","#5BC854","#FFC2C1","#FF4244","#FFE797","#FFA728","#F2DAFE","#9265C2","#DCDCAA","#D98150"],onAnimationProgress:function(){},onAnimationComplete:function(){}}},i.types={};var n=i.helpers={},a=n.each=function(e,t,i){var n=Array.prototype.slice.call(arguments,3);if(e)if(e.length===+e.length){var a;for(a=0;a<e.length;a++)t.apply(i,[e[a],a].concat(n))}else for(var s in e)t.apply(i,[e[s],s].concat(n))},s=n.clone=function(e){var t={};return a(e,function(i,n){e.hasOwnProperty(n)&&(t[n]=i)}),t},o=n.extend=function(e){return a(Array.prototype.slice.call(arguments,1),function(t){a(t,function(i,n){t.hasOwnProperty(n)&&(e[n]=i)})}),e},r=n.merge=function(e,t){var i=Array.prototype.slice.call(arguments,0);return i.unshift({}),o.apply(null,i)},l=n.indexOf=function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},c=(n.where=function(e,t){var i=[];return n.each(e,function(e){t(e)&&i.push(e)}),i},n.findNextWhere=function(e,t,i){i||(i=-1);for(var n=i+1;n<e.length;n++){var a=e[n];if(t(a))return a}},n.findPreviousWhere=function(e,t,i){i||(i=e.length);for(var n=i-1;n>=0;n--){var a=e[n];if(t(a))return a}},n.inherits=function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=function(){this.constructor=i};return n.prototype=t.prototype,i.prototype=new n,i.extend=c,e&&o(i.prototype,e),i.__super__=t.prototype,i}),d=n.noop=function(){},p=n.uid=function(){var e=0;return function(){return"chart-"+e++}}(),u=n.warn=function(e){window.console&&"function"==typeof window.console.warn&&console.warn(e)},h=n.amd="function"==typeof define&&define.amd,g=n.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},m=n.max=function(e){return Math.max.apply(Math,e)},f=n.min=function(e){return Math.min.apply(Math,e)},v=(n.cap=function(e,t,i){if(g(t)){if(e>t)return t}else if(g(i)&&i>e)return i;return e},n.getDecimalPlaces=function(e){if(e%1!==0&&g(e)){var t=e.toString();if(t.indexOf("e-")<0)return t.split(".")[1].length;if(t.indexOf(".")<0)return parseInt(t.split("e-")[1]);var i=t.split(".")[1].split("e-");return i[0].length+parseInt(i[1])}return 0}),b=n.radians=function(e){return e*(Math.PI/180)},y=(n.getAngleFromPoint=function(e,t){var i=t.x-e.x,n=t.y-e.y,a=Math.sqrt(i*i+n*n),s=2*Math.PI+Math.atan2(n,i);return 0>i&&0>n&&(s+=2*Math.PI),{angle:s,distance:a}},n.aliasPixel=function(e){return e%2===0?0:.5}),w=(n.splineCurve=function(e,t,i,n){var a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),s=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),o=n*a/(a+s),r=n*s/(a+s);return{inner:{x:t.x-o*(i.x-e.x),y:t.y-o*(i.y-e.y)},outer:{x:t.x+r*(i.x-e.x),y:t.y+r*(i.y-e.y)}}},n.calculateOrderOfMagnitude=function(e){return Math.floor(Math.log(e)/Math.LN10)}),x=(n.calculateScaleRange=function(e,t,i,n,s){var o=2,r=Math.floor(t/(1.5*i)),l=o>=r,c=[];a(e,function(e){null==e||c.push(e)});var d=f(c),p=m(c);p===d&&(p+=.5,d>=.5&&!n?d-=.5:p+=.5);for(var u=Math.abs(p-d),h=w(u),g=Math.ceil(p/(1*Math.pow(10,h)))*Math.pow(10,h),v=n?0:Math.floor(d/(1*Math.pow(10,h)))*Math.pow(10,h),b=g-v,y=Math.pow(10,h),x=Math.round(b/y);(x>r||r>2*x)&&!l;)if(x>r)y*=2,x=Math.round(b/y),x%1!==0&&(l=!0);else if(s&&h>=0){if(y/2%1!==0)break;y/=2,x=Math.round(b/y)}else y/=2,x=Math.round(b/y);return l&&(x=o,y=b/x),{steps:x,stepValue:y,min:v,max:v+x*y}},n.template=function(e,t){function i(e,t){var i=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[e]=n[e];return t?i(t):i}if(e instanceof Function)return e(t);var n={};return i(e,t)}),k=(n.generateLabels=function(e,t,i,n){var s=new Array(t);return e&&a(s,function(t,a){s[a]=x(e,{value:i+n*(a+1)})}),s},n.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1==(e/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)))},easeOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:1==(e/=1)?1:(i||(i=.3),n<Math.abs(1)?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,n=1;return 0===e?0:2==(e/=.5)?1:(i||(i=1*(.3*1.5)),n<Math.abs(1)?(n=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/n),1>e?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)):n*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-k.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?1*(7.5625*e*e):2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*k.easeInBounce(2*e):.5*k.easeOutBounce(2*e-1)+.5}}),S=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),T=(n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)}}(),n.animationLoop=function(e,t,i,n,a,s){var o=0,r=k[i]||k.linear,l=function(){o++;var i=o/t,c=r(i);e.call(s,c,i,o),n.call(s,c,i),t>o?s.animationFrame=S(l):a.apply(s)};S(l)},n.getRelativePosition=function(e){var t,i,n=e.originalEvent||e,a=e.currentTarget||e.srcElement,s=a.getBoundingClientRect();return n.touches?(t=n.touches[0].clientX-s.left,i=n.touches[0].clientY-s.top):(t=n.clientX-s.left,i=n.clientY-s.top),{x:t,y:i}},n.addEvent=function(e,t,i){e.addEventListener?e.addEventListener(t,i):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i}),C=n.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=d},E=(n.bindEvents=function(e,t,i){e.events||(e.events={}),a(t,function(t){e.events[t]=function(){i.apply(e,arguments)},T(e.chart.canvas,t,e.events[t])})},n.unbindEvents=function(e,t){a(t,function(t,i){C(e.chart.canvas,i,t)})}),P=n.getMaximumWidth=function(e){var t=e.parentNode,i=parseInt($(t,"padding-left"))+parseInt($(t,"padding-right"));return t.clientWidth-i},I=n.getMaximumHeight=function(e){var t=e.parentNode,i=parseInt($(t,"padding-bottom"))+parseInt($(t,"padding-top"));return t.clientHeight-i},$=n.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},_=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(e){var t=e.ctx,i=e.canvas.width,n=e.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=i+"px",t.canvas.style.height=n+"px",t.canvas.height=n*window.devicePixelRatio,t.canvas.width=i*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))}),L=n.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},M=n.fontString=function(e,t,i){return t+" "+e+"px "+i},R=n.longestText=function(e,t,i){e.font=t;var n=0;return a(i,function(t){var i=e.measureText(t).width;n=i>n?i:n}),n},q=n.drawRoundedRectangle=function(e,t,i,n,a,s){e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+n-s,i),e.quadraticCurveTo(t+n,i,t+n,i+s),e.lineTo(t+n,i+a-s),e.quadraticCurveTo(t+n,i+a,t+n-s,i+a),e.lineTo(t+s,i+a),e.quadraticCurveTo(t,i+a,t,i+a-s),e.lineTo(t,i+s),e.quadraticCurveTo(t,i,t+s,i),e.closePath()};i.instances={},i.Type=function(e,t,n){this.options=t,this.chart=n,this.id=p(),i.instances[this.id]=this,t.responsive&&this.resize(),this.initialize.call(this,e)},o(i.Type.prototype,{initialize:function(){return this},clear:function(){return L(this.chart),this},stop:function(){return i.animationService.cancelAnimation(this),this},resize:function(e){this.stop();var t=this.chart.canvas,i=P(this.chart.canvas),n=this.options.maintainAspectRatio?i/this.chart.aspectRatio:I(this.chart.canvas);return t.width=this.chart.width=i,t.height=this.chart.height=n,_(this.chart),"function"==typeof e&&e.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:d,render:function(e){if(e&&this.reflow(),this.options.animation&&!e){var t=new i.Animation;t.numSteps=this.options.animationSteps,t.easing=this.options.animationEasing,t.render=function(e,t){var i=n.easingEffects[t.easing],a=t.currentStep/t.numSteps,s=i(a);e.draw(s,a,t.currentStep)},t.onAnimationProgress=this.options.onAnimationProgress,t.onAnimationComplete=this.options.onAnimationComplete,i.animationService.addAnimation(this,t)}else this.draw(),this.options.onAnimationComplete.call(this);return this},generateLegend:function(){return x(this.options.legendTemplate,this)},destroy:function(){this.clear(),E(this,this.events);var e=this.chart.canvas;e.width=this.chart.width,e.height=this.chart.height,e.style.removeProperty?(e.style.removeProperty("width"),e.style.removeProperty("height")):(e.style.removeAttribute("width"),e.style.removeAttribute("height")),delete i.instances[this.id]},showTooltip:function(e,t){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var s=function(e){var t=!1;return e.length!==this.activeElements.length?t=!0:(a(e,function(e,i){e!==this.activeElements[i]&&(t=!0)},this),t)}.call(this,e);if(s||t){if(this.activeElements=e,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),e.length>0)if(this.datasets&&this.datasets.length>1){for(var o,r,c=this.datasets.length-1;c>=0&&(o=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,r=l(o,e[0]),-1===r);c--);var d=[],p=[],u=function(e){var t,i,a,s,o,l=[],c=[],u=[];return n.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[r]&&t[r].hasValue()&&l.push(t[r])}),n.each(l,function(e){c.push(e.x),u.push(e.y),d.push(n.template(this.options.multiTooltipTemplate,e)),p.push({fill:e._saved.fillColor||e.fillColor,stroke:e._saved.strokeColor||e.strokeColor})},this),o=f(u),a=m(u),s=f(c),i=m(c),{x:s>this.chart.width/2?s:i,y:(o+a)/2}}.call(this,r);new i.MultiTooltip({x:u.x,y:u.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:d,legendColors:p,legendColorBackground:this.options.multiTooltipKeyBackground,title:x(this.options.tooltipTitleTemplate,e[0]),chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else a(e,function(e){var t=e.tooltipPosition();new i.Tooltip({x:Math.round(t.x),y:Math.round(t.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:x(this.options.tooltipTemplate,e),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),i.Type.extend=function(e){var t=this,n=function(){return t.apply(this,arguments)};if(n.prototype=s(t.prototype),o(n.prototype,e),n.extend=i.Type.extend,e.name||t.prototype.name){var a=e.name||t.prototype.name,l=i.defaults[t.prototype.name]?s(i.defaults[t.prototype.name]):{};i.defaults[a]=o(l,e.defaults),i.types[a]=n,i.prototype[a]=function(e,t){var s=r(i.defaults.global,i.defaults[a],t||{});return new n(e,s,this)}}else u("Name not provided for this chart, so it hasn't been registered");return t},i.Element=function(e){o(this,e),this.initialize.apply(this,arguments),this.save()},o(i.Element.prototype,{initialize:function(){},restore:function(e){return e?a(e,function(e){this[e]=this._saved[e]},this):o(this,this._saved),this},save:function(){return this._saved=s(this),delete this._saved._saved,this},update:function(e){return a(e,function(e,t){this._saved[t]=this[t],this[t]=e},this),this},transition:function(e,t){return a(e,function(e,i){this[i]=(e-this._saved[i])*t+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return g(this.value)}}),i.Element.extend=c,i.Point=i.Element.extend({display:!0,inRange:function(e,t){var i=this.hitDetectionRadius+this.radius;return Math.pow(e-this.x,2)+Math.pow(t-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.stroke()}}}),i.Arc=i.Element.extend({inRange:function(e,t){var i=n.getAngleFromPoint(this,{x:e,y:t}),a=i.angle%(2*Math.PI),s=(2*Math.PI+this.startAngle)%(2*Math.PI),o=(2*Math.PI+this.endAngle)%(2*Math.PI)||360,r=s>o?o>=a||a>=s:a>=s&&o>=a,l=i.distance>=this.innerRadius&&i.distance<=this.outerRadius;return r&&l},tooltipPosition:function(){var e=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(e)*t,y:this.y+Math.sin(e)*t}},draw:function(e){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius<0?0:this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius<0?0:this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),i.Rectangle=i.Element.extend({draw:function(){var e=this.ctx,t=this.width/2,i=this.x-t,n=this.x+t,a=this.base-(this.base-this.y),s=this.strokeWidth/2;this.showStroke&&(i+=s,n-=s,a+=s),e.beginPath(),e.fillStyle=this.fillColor,e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.moveTo(i,this.base),e.lineTo(i,a),e.lineTo(n,a),e.lineTo(n,this.base),e.fill(),this.showStroke&&e.stroke()},height:function(){return this.base-this.y},inRange:function(e,t){return e>=this.x-this.width/2&&e<=this.x+this.width/2&&t>=this.y&&t<=this.base}}),i.Animation=i.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),i.Tooltip=i.Element.extend({draw:function(){var e=this.chart.ctx;e.font=M(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var t=this.caretPadding=2,i=e.measureText(this.text).width+2*this.xPadding,n=this.fontSize+2*this.yPadding,a=n+this.caretHeight+t;this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-a<0&&(this.yAlign="below");var s=this.x-i/2,o=this.y-a;if(e.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":e.beginPath(),e.moveTo(this.x,this.y-t),e.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight)),e.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight)),e.closePath(),e.fill();break;case"below":o=this.y+t+this.caretHeight,e.beginPath(),e.moveTo(this.x,this.y+t),e.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight),e.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight),e.closePath(),e.fill()}switch(this.xAlign){case"left":s=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":s=this.x-(this.cornerRadius+this.caretHeight)}q(e,s,o,i,n,this.cornerRadius),e.fill(),e.fillStyle=this.textColor,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,s+i/2,o+n/2)}}}),i.MultiTooltip=i.Element.extend({initialize:function(){this.font=M(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=M(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.titleHeight=this.title?1.5*this.titleFontSize:0,this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+this.titleHeight,this.ctx.font=this.titleFont;var e=this.ctx.measureText(this.title).width,t=R(this.ctx,this.font,this.labels)+this.fontSize+3,i=m([t,e]);this.width=i+2*this.xPadding;var n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(e){var t=this.y-this.height/2+this.yPadding,i=e-1;return 0===e?t+this.titleHeight/3:t+(1.5*this.fontSize*i+this.fontSize/2)+this.titleHeight},draw:function(){if(this.custom)this.custom(this);else{q(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var e=this.ctx;e.fillStyle=this.fillColor,e.fill(),e.closePath(),e.textAlign="left",e.textBaseline="middle",e.fillStyle=this.titleTextColor,e.font=this.titleFont,e.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),e.font=this.font,n.each(this.labels,function(t,i){e.fillStyle=this.textColor,e.fillText(t,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1)),e.fillStyle=this.legendColorBackground,e.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize),e.fillStyle=this.legendColors[i].fill,e.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),i.Scale=i.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(x(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}));this.yLabelWidth=this.display&&this.showLabels?R(this.ctx,this.font,this.yLabels)+10:0},addXLabel:function(e){this.xLabels.push(e),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var e,t=this.endPoint,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,e=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),e<this.yLabelWidth&&(this.endPoint=t,this.calculateXLabelRotation())},calculateXLabelRotation:function(){this.ctx.font=this.font;var e,t,i=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=i/2>this.yLabelWidth?i/2:this.yLabelWidth,this.xLabelRotation=0,this.display){var a,s=R(this.ctx,this.font,this.xLabels);this.xLabelWidth=s;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)a=Math.cos(b(this.xLabelRotation)),e=a*i,t=a*n,e+this.fontSize/2>this.yLabelWidth&&(this.xScalePaddingLeft=e+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=a*s;this.xLabelRotation>0&&(this.endPoint-=Math.sin(b(this.xLabelRotation))*s+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:d,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(e){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(e-this.min)},calculateX:function(e){var t=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=t/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),n=i*e+this.xScalePaddingLeft;return this.offsetGridLines&&(n+=i/2),Math.round(n)},update:function(e){n.extend(this,e),this.fit()},draw:function(){var e=this.ctx,t=(this.endPoint-this.startPoint)/this.steps,i=Math.round(this.xScalePaddingLeft);this.display&&(e.fillStyle=this.textColor,e.font=this.font,a(this.yLabels,function(a,s){var o=this.endPoint-t*s,r=Math.round(o),l=this.showHorizontalLines;e.textAlign="right",e.textBaseline="middle",this.showLabels&&e.fillText(a,i-10,o),0!==s||l||(l=!0),l&&e.beginPath(),s>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),r+=n.aliasPixel(e.lineWidth),l&&(e.moveTo(i,r),e.lineTo(this.width,r),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(i-5,r),e.lineTo(i,r),e.stroke(),e.closePath()},this),a(this.xLabels,function(t,i){var n=this.calculateX(i)+y(this.lineWidth),a=this.calculateX(i-(this.offsetGridLines?.5:0))+y(this.lineWidth),s=this.xLabelRotation>0,o=this.showVerticalLines;0!==i||o||(o=!0),o&&e.beginPath(),i>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),o&&(e.moveTo(a,this.endPoint),e.lineTo(a,this.startPoint-3),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(a,this.endPoint),e.lineTo(a,this.endPoint+5),e.stroke(),e.closePath(),e.save(),e.translate(n,s?this.endPoint+12:this.endPoint+8),e.rotate(-1*b(this.xLabelRotation)),e.font=this.font,e.textAlign=s?"right":"center",e.textBaseline=s?"middle":"top",e.fillText(t,0,0),e.restore()},this))}}),i.RadialScale=i.Element.extend({initialize:function(){this.size=f([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(e){var t=this.drawingArea/(this.max-this.min);return(e-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(x(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var e,t,i,n,a,s,o,r,l,c,d,p,u=f([this.height/2-this.pointLabelFontSize-5,this.width/2]),h=this.width,m=0;for(this.ctx.font=M(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),
t=0;t<this.valuesCount;t++)e=this.getPointPosition(t,u),i=this.ctx.measureText(x(this.templateString,{value:this.labels[t]})).width+5,0===t||t===this.valuesCount/2?(n=i/2,e.x+n>h&&(h=e.x+n,a=t),e.x-n<m&&(m=e.x-n,o=t)):t<this.valuesCount/2?e.x+i>h&&(h=e.x+i,a=t):t>this.valuesCount/2&&e.x-i<m&&(m=e.x-i,o=t);l=m,c=Math.ceil(h-this.width),s=this.getIndexAngle(a),r=this.getIndexAngle(o),d=c/Math.sin(s+Math.PI/2),p=l/Math.sin(r+Math.PI/2),d=g(d)?d:0,p=g(p)?p:0,this.drawingArea=u-(p+d)/2,this.setCenterPoint(p,d)},setCenterPoint:function(e,t){var i=this.width-t-this.drawingArea,n=e+this.drawingArea;this.xCenter=(n+i)/2,this.yCenter=this.height/2},getIndexAngle:function(e){var t=2*Math.PI/this.valuesCount;return e*t-Math.PI/2},getPointPosition:function(e,t){var i=this.getIndexAngle(e);return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},draw:function(){if(this.display){var e=this.ctx;if(a(this.yLabels,function(t,i){if(i>0){var n,a=i*(this.drawingArea/this.steps),s=this.yCenter-a;if(this.lineWidth>0)if(e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,this.lineArc)e.beginPath(),e.arc(this.xCenter,this.yCenter,a,0,2*Math.PI),e.closePath(),e.stroke();else{e.beginPath();for(var o=0;o<this.valuesCount;o++)n=this.getPointPosition(o,this.calculateCenterOffset(this.min+i*this.stepValue)),0===o?e.moveTo(n.x,n.y):e.lineTo(n.x,n.y);e.closePath(),e.stroke()}if(this.showLabels){if(e.font=M(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var r=e.measureText(t).width;e.fillStyle=this.backdropColor,e.fillRect(this.xCenter-r/2-this.backdropPaddingX,s-this.fontSize/2-this.backdropPaddingY,r+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.fontColor,e.fillText(t,this.xCenter,s)}}},this),!this.lineArc){e.lineWidth=this.angleLineWidth,e.strokeStyle=this.angleLineColor;for(var t=this.valuesCount-1;t>=0;t--){var i=null,n=null;if(this.angleLineWidth>0&&(i=this.calculateCenterOffset(this.max),n=this.getPointPosition(t,i),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(n.x,n.y),e.stroke(),e.closePath()),this.backgroundColors&&this.backgroundColors.length==this.valuesCount){null==i&&(i=this.calculateCenterOffset(this.max)),null==n&&(n=this.getPointPosition(t,i));var s=this.getPointPosition(0===t?this.valuesCount-1:t-1,i),o=this.getPointPosition(t===this.valuesCount-1?0:t+1,i),r={x:(s.x+n.x)/2,y:(s.y+n.y)/2},l={x:(n.x+o.x)/2,y:(n.y+o.y)/2};e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(r.x,r.y),e.lineTo(n.x,n.y),e.lineTo(l.x,l.y),e.fillStyle=this.backgroundColors[t],e.fill(),e.closePath()}var c=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);e.font=M(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e.fillStyle=this.pointLabelFontColor;var d=this.labels.length,p=this.labels.length/2,u=p/2,h=u>t||t>d-u,g=t===u||t===d-u;0===t?e.textAlign="center":t===p?e.textAlign="center":p>t?e.textAlign="left":e.textAlign="right",g?e.textBaseline="middle":h?e.textBaseline="bottom":e.textBaseline="top",e.fillText(this.labels[t],c.x,c.y)}}}}}),i.animationService={frameDuration:17,animations:[],dropFrames:0,addAnimation:function(e,t){for(var i=0;i<this.animations.length;++i)if(this.animations[i].chartInstance===e)return void(this.animations[i].animationObject=t);this.animations.push({chartInstance:e,animationObject:t}),1==this.animations.length&&n.requestAnimFrame.call(window,this.digestWrapper)},cancelAnimation:function(e){var t=n.findNextWhere(this.animations,function(t){return t.chartInstance===e});t&&this.animations.splice(t,1)},digestWrapper:function(){i.animationService.startDigest.call(i.animationService)},startDigest:function(){var e=Date.now(),t=0;this.dropFrames>1&&(t=Math.floor(this.dropFrames),this.dropFrames-=t);for(var i=0;i<this.animations.length;i++)null===this.animations[i].animationObject.currentStep&&(this.animations[i].animationObject.currentStep=0),this.animations[i].animationObject.currentStep+=1+t,this.animations[i].animationObject.currentStep>this.animations[i].animationObject.numSteps&&(this.animations[i].animationObject.currentStep=this.animations[i].animationObject.numSteps),this.animations[i].animationObject.render(this.animations[i].chartInstance,this.animations[i].animationObject),this.animations[i].animationObject.currentStep==this.animations[i].animationObject.numSteps&&(this.animations[i].animationObject.onAnimationComplete.call(this.animations[i].chartInstance),this.animations.splice(i,1),i--);var a=Date.now(),s=a-e-this.frameDuration,o=s/this.frameDuration;o>1&&(this.dropFrames+=o),this.animations.length>0&&n.requestAnimFrame.call(window,this.digestWrapper)}},n.addEvent(window,"resize",function(){var e;return function(){clearTimeout(e),e=setTimeout(function(){a(i.instances,function(e){e.options.responsive&&e.resize(e.render,!0)})},50)}}()),h?define(function(){return i}):"object"==typeof module&&module.exports&&(module.exports=i),e.Chart=i,i.noConflict=function(){return e.Chart=t,i}}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,n={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'};t.Type.extend({name:"Bar",defaults:n,initialize:function(e){var n=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(e,t,i){var a=this.calculateBaseWidth(),s=this.calculateX(i)-a/2,o=this.calculateBarWidth(e);return s+o*t+t*n.barDatasetSpacing+o/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*n.barValueSpacing},calculateBarWidth:function(e){var t=this.calculateBaseWidth()-(e-1)*n.barDatasetSpacing;return t/e}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getBarsAtEvent(e):[];this.eachBars(function(e){e.restore(["fillColor","strokeColor"])}),i.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),i.each(e.datasets,function(t,n){var a={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(a),i.each(t.data,function(i,n){a.bars.push(new this.BarClass({value:i,label:e.labels[n],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this),this.buildScale(e.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(e,t,n){i.extend(e,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,n,t),y:this.scale.endPoint}),e.save()},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachBars(function(e){e.save()}),this.render()},eachBars:function(e){i.each(this.datasets,function(t,n){i.each(t.bars,e,this,n)},this)},getBarsAtEvent:function(e){for(var t,n=[],a=i.getRelativePosition(e),s=function(e){n.push(e.bars[t])},o=0;o<this.datasets.length;o++)for(t=0;t<this.datasets[o].bars.length;t++)if(this.datasets[o].bars[t].inRange(a.x,a.y))return i.each(this.datasets,s),n;return n},buildScale:function(e){var t=this,n=function(){var e=[];return t.eachBars(function(t){e.push(t.value)}),e},a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=i.calculateScaleRange(n(),e,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,t)},xLabels:e,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(a,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(a)},addData:function(e,t){i.each(e,function(e,i){this.datasets[i].bars.push(new this.BarClass({value:e,label:t,datasetLabel:this.datasets[i].label,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(e){e.bars.shift()},this),this.update()},reflow:function(){i.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var e=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear(),this.chart.ctx,this.scale.draw(t),i.each(this.datasets,function(e,n){i.each(e.bars,function(e,i){e.hasValue()&&(e.base=this.scale.endPoint,e.transition({x:this.scale.calculateBarX(this.datasets.length,n,i),y:this.scale.calculateY(e.value),width:this.scale.calculateBarWidth(this.datasets.length)},t).draw())},this)},this)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,n={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:n,initialize:function(e){this.segments=[],this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];i.each(this.segments,function(e){e.restore(["fillColor"])}),i.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.calculateTotal(e),i.each(e,function(t,i){t.color||(t.color="hsl("+360*i/e.length+", 100%, 50%)"),this.addData(t,i,!0)},this),this.render()},getSegmentsAtEvent:function(e){var t=[],n=i.getRelativePosition(e);return i.each(this.segments,function(e){e.inRange(n.x,n.y)&&t.push(e)},this),t},addData:function(e,i,n){var a=void 0!==i?i:this.segments.length;"undefined"==typeof e.color&&(e.color=t.defaults.global.segmentColorDefault[a%t.defaults.global.segmentColorDefault.length],e.highlight=t.defaults.global.segmentHighlightColorDefaults[a%t.defaults.global.segmentHighlightColorDefaults.length]),this.segments.splice(a,0,new this.SegmentArc({value:e.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:e.color,highlightColor:e.highlight||e.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(e.value),label:e.label})),n||(this.reflow(),this.update())},calculateCircumference:function(e){return this.total>0?2*Math.PI*(e/this.total):0},calculateTotal:function(e){this.total=0,i.each(e,function(e){this.total+=Math.abs(e.value)},this)},update:function(){this.calculateTotal(this.segments),i.each(this.activeElements,function(e){e.restore(["fillColor"])}),i.each(this.segments,function(e){e.save()}),this.render()},removeData:function(e){var t=i.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(i.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,i.each(this.segments,function(e){e.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(e){var t=e?e:1;this.clear(),i.each(this.segments,function(e,i){e.transition({circumference:this.calculateCircumference(e.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},t),e.endAngle=e.startAngle+e.circumference,e.draw(),0===i&&(e.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=e.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:i.merge(n,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,n={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>',offsetGridLines:!1};t.Type.extend({name:"Line",defaults:n,initialize:function(e){this.PointClass=t.Point.extend({offsetGridLines:this.options.offsetGridLines,strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(e){return Math.pow(e-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),i.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),i.each(e.datasets,function(t){var n={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(n),i.each(t.data,function(i,a){n.points.push(new this.PointClass({value:i,label:e.labels[a],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this),this.buildScale(e.labels),this.eachPoints(function(e,t){i.extend(e,{x:this.scale.calculateX(t),y:this.scale.endPoint}),e.save()},this)},this),this.render()},update:function(){this.scale.update(),i.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachPoints(function(e){e.save()}),this.render()},eachPoints:function(e){i.each(this.datasets,function(t){i.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=[],n=i.getRelativePosition(e);return i.each(this.datasets,function(e){i.each(e.points,function(e){e.inRange(n.x,n.y)&&t.push(e)})},this),t},buildScale:function(e){var n=this,a=function(){var e=[];return n.eachPoints(function(t){e.push(t.value)}),e},s={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,offsetGridLines:this.options.offsetGridLines,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=i.calculateScaleRange(a(),e,this.fontSize,this.beginAtZero,this.integersOnly);i.extend(this,t)},xLabels:e,font:i.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&i.extend(s,{calculateYRange:i.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(s)},addData:function(e,t){i.each(e,function(e,i){this.datasets[i].points.push(new this.PointClass({value:e,label:t,datasetLabel:this.datasets[i].label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),i.each(this.datasets,function(e){e.points.shift()},this),this.update()},reflow:function(){var e=i.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear();var n=this.chart.ctx,a=function(e){return null!==e.value},s=function(e,t,n){return i.findNextWhere(t,a,n)||e},o=function(e,t,n){return i.findPreviousWhere(t,a,n)||e};this.scale&&(this.scale.draw(t),i.each(this.datasets,function(e){var r=i.where(e.points,a);i.each(e.points,function(e,i){e.hasValue()&&e.transition({y:this.scale.calculateY(e.value),x:this.scale.calculateX(i)},t)},this),this.options.bezierCurve&&i.each(r,function(e,t){var n=t>0&&t<r.length-1?this.options.bezierCurveTension:0;e.controlPoints=i.splineCurve(o(e,r,t),e,s(e,r,t),n),e.controlPoints.outer.y>this.scale.endPoint?e.controlPoints.outer.y=this.scale.endPoint:e.controlPoints.outer.y<this.scale.startPoint&&(e.controlPoints.outer.y=this.scale.startPoint),e.controlPoints.inner.y>this.scale.endPoint?e.controlPoints.inner.y=this.scale.endPoint:e.controlPoints.inner.y<this.scale.startPoint&&(e.controlPoints.inner.y=this.scale.startPoint)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=e.strokeColor,n.beginPath(),i.each(r,function(e,t){if(0===t)n.moveTo(e.x,e.y);else if(this.options.bezierCurve){var i=o(e,r,t);n.bezierCurveTo(i.controlPoints.outer.x,i.controlPoints.outer.y,e.controlPoints.inner.x,e.controlPoints.inner.y,e.x,e.y)}else n.lineTo(e.x,e.y)},this),this.options.datasetStroke&&n.stroke(),this.options.datasetFill&&r.length>0&&(n.lineTo(r[r.length-1].x,this.scale.endPoint),n.lineTo(r[0].x,this.scale.endPoint),n.fillStyle=e.fillColor,n.closePath(),n.fill()),i.each(r,function(e){e.draw()})},this))}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers,n={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><%if(segments[i].label){%><%=segments[i].label%><%}%></span></li><%}%></ul>'};t.Type.extend({name:"PolarArea",defaults:n,initialize:function(e){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:e.length}),this.updateScaleRange(e),this.scale.update(),i.each(e,function(e,t){this.addData(e,t,!0)},this),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];i.each(this.segments,function(e){e.restore(["fillColor"])}),i.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.render()},getSegmentsAtEvent:function(e){var t=[],n=i.getRelativePosition(e);return i.each(this.segments,function(e){e.inRange(n.x,n.y)&&t.push(e)},this),t},addData:function(e,t,i){var n=t||this.segments.length;this.segments.splice(n,0,new this.SegmentArc({fillColor:e.color,highlightColor:e.highlight||e.color,label:e.label,value:e.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(e.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),i||(this.reflow(),this.update())},removeData:function(e){var t=i.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},calculateTotal:function(e){this.total=0,i.each(e,function(e){this.total+=e.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(e){var t=[];i.each(e,function(e){t.push(e.value)});var n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(t,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n,{size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),i.each(this.segments,function(e){e.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),i.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),i.each(this.segments,function(e){e.update({outerRadius:this.scale.calculateCenterOffset(e.value)})},this)},draw:function(e){var t=e||1;this.clear(),i.each(this.segments,function(e,i){e.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(e.value)},t),e.endAngle=e.startAngle+e.circumference,0===i&&(e.startAngle=1.5*Math.PI),i<this.segments.length-1&&(this.segments[i+1].startAngle=e.endAngle),e.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var e=this,t=e.Chart,i=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><%if(datasets[i].label){%><%=datasets[i].label%><%}%></span></li><%}%></ul>'},initialize:function(e){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(e),this.options.showTooltips&&i.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),i.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),i.each(e.datasets,function(t){var n={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(n),i.each(t.data,function(i,a){var s;this.scale.animation||(s=this.scale.getPointPosition(a,this.scale.calculateCenterOffset(i))),n.points.push(new this.PointClass({value:i,label:e.labels[a],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:s.x,y:this.options.animation?this.scale.yCenter:s.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(e){i.each(this.datasets,function(t){i.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=i.getRelativePosition(e),n=i.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},t),a=2*Math.PI/this.scale.valuesCount,s=Math.round((n.angle-1.5*Math.PI)/a),o=[];return(s>=this.scale.valuesCount||0>s)&&(s=0),n.distance<=this.scale.drawingArea&&i.each(this.datasets,function(e){o.push(e.points[s])}),o},buildScale:function(e){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backgroundColors:this.options.scaleBackgroundColors,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:e.labels,valuesCount:e.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(e.datasets),this.scale.buildYLabels()},updateScaleRange:function(e){var t=function(){var t=[];return i.each(e,function(e){e.data?t=t.concat(e.data):i.each(e.points,function(e){t.push(e.value)})}),t}(),n=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:i.calculateScaleRange(t,i.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);i.extend(this.scale,n)},addData:function(e,t){this.scale.valuesCount++,i.each(e,function(e,i){var n=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(e));this.datasets[i].points.push(new this.PointClass({value:e,label:t,datasetLabel:this.datasets[i].label,x:n.x,y:n.y,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.labels.push(t),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),i.each(this.datasets,function(e){e.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(e){e.save()}),this.reflow(),this.render()},reflow:function(){i.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:i.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(e){var t=e||1,n=this.chart.ctx;this.clear(),this.scale.draw(),i.each(this.datasets,function(e){i.each(e.points,function(e,i){e.hasValue()&&e.transition(this.scale.getPointPosition(i,this.scale.calculateCenterOffset(e.value)),t)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=e.strokeColor,n.beginPath(),i.each(e.points,function(e,t){0===t?n.moveTo(e.x,e.y):n.lineTo(e.x,e.y)},this),n.closePath(),n.stroke(),n.fillStyle=e.fillColor,this.options.datasetFill&&n.fill(),i.each(e.points,function(e){e.hasValue()&&e.draw()})},this)}})}.call(this),function(e,t,i){function n(e,i){this.wrapper="string"==typeof e?t.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in i)this.options[n]=i[n];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"",this.options.useTransition=r.hasTransition&&this.options.useTransition,this.options.useTransform=r.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),
this.enable()}function a(e,i,n){var a=t.createElement("div"),s=t.createElement("div");return n===!0&&(a.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator","h"==e?(n===!0&&(a.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),a.className="iScrollHorizontalScrollbar"):(n===!0&&(a.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),a.className="iScrollVerticalScrollbar"),a.style.cssText+=";overflow:hidden",i||(a.style.pointerEvents="none"),a.appendChild(s),a}function s(i,n){this.wrapper="string"==typeof n.el?t.querySelector(n.el):n.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var a in n)this.options[a]=n[a];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(e,"touchend",this)),this.options.disablePointer||(r.addEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.addEvent(e,r.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[r.style.transform]=this.scroller.translateZ,this.wrapperStyle[r.style.transitionDuration]=r.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var o=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},r=function(){function n(e){return o!==!1&&(""===o?e:o+e.charAt(0).toUpperCase()+e.substr(1))}var a={},s=t.createElement("div").style,o=function(){for(var e,t=["t","webkitT","MozT","msT","OT"],i=0,n=t.length;i<n;i++)if(e=t[i]+"ransform",e in s)return t[i].substr(0,t[i].length-1);return!1}();a.getTime=Date.now||function(){return(new Date).getTime()},a.extend=function(e,t){for(var i in t)e[i]=t[i]},a.addEvent=function(e,t,i,n){e.addEventListener(t,i,!!n)},a.removeEvent=function(e,t,i,n){e.removeEventListener(t,i,!!n)},a.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},a.momentum=function(e,t,n,a,s,o){var r,l,c=e-t,d=i.abs(c)/n;return o=void 0===o?6e-4:o,r=e+d*d/(2*o)*(c<0?-1:1),l=d/o,r<a?(r=s?a-s/2.5*(d/8):a,c=i.abs(r-e),l=c/d):r>0&&(r=s?s/2.5*(d/8):0,c=i.abs(e)+r,l=c/d),{destination:i.round(r),duration:l}};var r=n("transform");return a.extend(a,{hasTransform:r!==!1,hasPerspective:n("perspective")in s,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:n("transition")in s}),a.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),a.extend(a.style={},{transform:r,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")}),a.hasClass=function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(e.className)},a.addClass=function(e,t){if(!a.hasClass(e,t)){var i=e.className.split(" ");i.push(t),e.className=i.join(" ")}},a.removeClass=function(e,t){if(a.hasClass(e,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(i," ")}},a.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},a.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},a.extend(a.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),a.extend(a.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return i.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,n=.4;return 0===e?0:1==e?1:n*i.pow(2,-10*e)*i.sin((e-t/4)*(2*i.PI)/t)+1}}}),a.tap=function(e,i){var n=t.createEvent("Event");n.initEvent(i,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)},a.click=function(e){var i,n=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,n.screenX,n.screenY,n.clientX,n.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._constructed=!0,n.dispatchEvent(i))},a}();n.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if((1==r.eventType[e.type]||0===e.button)&&this.enabled&&(!this.initiated||r.eventType[e.type]===this.initiated)){!this.options.preventDefault||r.isBadAndroid||r.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,n=e.touches?e.touches[0]:e;this.initiated=r.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=r.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,n,a,s,o=e.touches?e.touches[0]:e,l=o.pageX-this.pointX,c=o.pageY-this.pointY,d=r.getTime();if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=l,this.distY+=c,a=i.abs(this.distX),s=i.abs(this.distY),!(d-this.endTime>300&&a<10&&s<10)){if(this.directionLocked||this.options.freeScroll||(a>s+this.options.directionLockThreshold?this.directionLocked="h":s>=a+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,c=this.hasVerticalScroll?c:0,t=this.x+l,n=this.y+c,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+l/3:t>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+c/3:n>0?0:this.maxScrollY),this.directionX=l>0?-1:l<0?1:0,this.directionY=c>0?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,n),d-this.startTime>300&&(this.startTime=d,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&r.eventType[e.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,n,a=(e.changedTouches?e.changedTouches[0]:e,r.getTime()-this.startTime),s=i.round(this.x),o=i.round(this.y),l=i.abs(s-this.startX),c=i.abs(o-this.startY),d=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,o),!this.moved)return this.options.tap&&r.tap(e,this.options.tap),this.options.click&&r.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&a<200&&l<100&&c<100)return void this._execEvent("flick");if(this.options.momentum&&a<300&&(t=this.hasHorizontalScroll?r.momentum(this.x,this.startX,a,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},n=this.hasVerticalScroll?r.momentum(this.y,this.startY,a,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:o,duration:0},s=t.destination,o=n.destination,d=i.max(t.duration,n.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(s,o);this.currentPage=u,d=this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-u.x),1e3),i.min(i.abs(o-u.y),1e3)),300),s=u.x,o=u.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return s!=this.x||o!=this.y?((s>0||s<this.maxScrollX||o>0||o<this.maxScrollY)&&(p=r.ease.quadratic),void this.scrollTo(s,o,d,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(t!=this.x||i!=this.y)&&(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=r.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;t<i;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,n){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,n)},scrollTo:function(e,t,i,n){n=n||r.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(i),this._translate(e,t)):this._animate(e,t,i,n.fn)},scrollToElement:function(e,t,n,a,s){if(e=e.nodeType?e:this.scroller.querySelector(e)){var o=r.offset(e);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top,n===!0&&(n=i.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),a===!0&&(a=i.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),o.left-=n||0,o.top-=a||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,t=void 0===t||null===t||"auto"===t?i.max(i.abs(this.x-o.left),i.abs(this.y-o.top)):t,this.scrollTo(o.left,o.top,t,s)}},_transitionTime:function(e){if(e=e||0,this.scrollerStyle[r.style.transitionDuration]=e+"ms",!e&&r.isBadAndroid&&(this.scrollerStyle[r.style.transitionDuration]="0.001s"),this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[r.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=i.round(e),t=i.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(t){var i=t?r.removeEvent:r.addEvent,n=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this),i(e,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),r.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,r.prefixPointerEvent("pointerdown"),this),i(n,r.prefixPointerEvent("pointermove"),this),i(n,r.prefixPointerEvent("pointercancel"),this),i(n,r.prefixPointerEvent("pointerup"),this)),r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,i,n=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[r.style.transform].split(")")[0].split(", "),t=+(n[12]||n[4]),i=+(n[13]||n[5])):(t=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:t,y:i}},_initIndicators:function(){function e(e){for(var t=r.indicators.length;t--;)e.call(r.indicators[t])}var t,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,o=[],r=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:a("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),o.push(t)),this.options.scrollX&&(t={el:a("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),o.push(t))),this.options.indicators&&(o=o.concat(this.options.indicators));for(var l=o.length;l--;)this.indicators.push(new s(this,o[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){e(function(){this.fade()})}),this.on("scrollCancel",function(){e(function(){this.fade()})}),this.on("scrollStart",function(){e(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){e(function(){this.fade(1,!0)})})),this.on("refresh",function(){e(function(){this.refresh()})}),this.on("destroy",function(){e(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"wheel",this),r.addEvent(this.wrapper,"mousewheel",this),r.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){r.removeEvent(this.wrapper,"wheel",this),r.removeEvent(this.wrapper,"mousewheel",this),r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t,n,a,s,o=this;if(void 0===this.wheelTimeout&&o._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._execEvent("scrollEnd"),o.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,n=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,n=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,n=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=n=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=n=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,n*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=n,n=0),this.options.snap)return a=this.currentPage.pageX,s=this.currentPage.pageY,t>0?a--:t<0&&a++,n>0?s--:n<0&&s++,void this.goToPage(a,s);a=this.x+i.round(this.hasHorizontalScroll?t:0),s=this.y+i.round(this.hasVerticalScroll?n:0),a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),s>0?s=0:s<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(a,s,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e,t,n,a,s,o,r=0,l=0,c=0,d=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(n=i.round(d/2),a=i.round(p/2);c>-this.scrollerWidth;){for(this.pages[r]=[],e=0,s=0;s>-this.scrollerHeight;)this.pages[r][e]={x:i.max(c,this.maxScrollX),y:i.max(s,this.maxScrollY),width:d,height:p,cx:c-n,cy:s-a},s-=p,e++;c-=d,r++}else for(o=this.options.snap,e=o.length,t=-1;r<e;r++)(0===r||o[r].offsetLeft<=o[r-1].offsetLeft)&&(l=0,t++),this.pages[l]||(this.pages[l]=[]),c=i.max(-o[r].offsetLeft,this.maxScrollX),s=i.max(-o[r].offsetTop,this.maxScrollY),n=c-i.round(o[r].offsetWidth/2),a=s-i.round(o[r].offsetHeight/2),this.pages[l][t]={x:c,y:s,width:o[r].offsetWidth,height:o[r].offsetHeight,cx:n,cy:a},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,a=this.pages.length,s=0;if(i.abs(e-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);n<a;n++)if(e>=this.pages[n][0].cx){e=this.pages[n][0].x;break}for(a=this.pages[n].length;s<a;s++)if(t>=this.pages[0][s].cy){t=this.pages[0][s].y;break}return n==this.currentPage.pageX&&(n+=this.directionX,n<0?n=0:n>=this.pages.length&&(n=this.pages.length-1),e=this.pages[n][0].x),s==this.currentPage.pageY&&(s+=this.directionY,s<0?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),t=this.pages[0][s].y),{x:e,y:t,pageX:n,pageY:s}},goToPage:function(e,t,n,a){a=a||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var s=this.pages[e][t].x,o=this.pages[e][t].y;n=void 0===n?this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-this.x),1e3),i.min(i.abs(o-this.y),1e3)),300):n,this.currentPage={x:s,y:o,pageX:e,pageY:t},this.scrollTo(s,o,n,a)},next:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,e,t)},prev:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,e,t)},_initKeys:function(t){var i,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in n)this.options.keyBindings[i]=this.options.keyBindings[i]||n[i];r.addEvent(e,"keydown",this),this.on("destroy",function(){r.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var t,n=this.options.snap,a=n?this.currentPage.pageX:this.x,s=n?this.currentPage.pageY:this.y,o=r.getTime(),l=this.keyTime||0,c=.25;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this.isInTransition=!1),this.keyAcceleration=o-l<200?i.min(this.keyAcceleration+c,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?a+=n?1:this.wrapperWidth:s+=n?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?a-=n?1:this.wrapperWidth:s-=n?1:this.wrapperHeight;break;case this.options.keyBindings.end:a=n?this.pages.length-1:this.maxScrollX,s=n?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:a=0,s=0;break;case this.options.keyBindings.left:a+=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=n?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:a-=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=n?1:5+this.keyAcceleration>>0;break;default:return}if(n)return void this.goToPage(a,s);a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollX&&(a=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(a,s,0),this.keyTime=o}},_animate:function(e,t,i,n){function a(){var u,h,g,m=r.getTime();return m>=p?(s.isAnimating=!1,s._translate(e,t),void(s.resetPosition(s.options.bounceTime)||s._execEvent("scrollEnd"))):(m=(m-d)/i,g=n(m),u=(e-l)*g+l,h=(t-c)*g+c,s._translate(u,h),void(s.isAnimating&&o(a)))}var s=this,l=this.x,c=this.y,d=r.getTime(),p=d+i;this.isAnimating=!0,a()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||r.preventDefaultException(e.target,this.options.preventDefaultException)||(e.preventDefault(),e.stopPropagation())}}},s.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(e,"touchmove",this),r.removeEvent(e,r.prefixPointerEvent("pointermove"),this),r.removeEvent(e,"mousemove",this),r.removeEvent(e,"touchend",this),r.removeEvent(e,r.prefixPointerEvent("pointerup"),this),r.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=r.getTime(),this.options.disableTouch||r.addEvent(e,"touchmove",this),this.options.disablePointer||r.addEvent(e,r.prefixPointerEvent("pointermove"),this),this.options.disableMouse||r.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,n,a,s=e.touches?e.touches[0]:e;r.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=s.pageX-this.lastPointX,this.lastPointX=s.pageX,i=s.pageY-this.lastPointY,this.lastPointY=s.pageY,n=this.x+t,a=this.y+i,this._pos(n,a),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),r.removeEvent(e,"touchmove",this),r.removeEvent(e,r.prefixPointerEvent("pointermove"),this),r.removeEvent(e,"mousemove",this),this.scroller.options.snap){var n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),a=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-n.x),1e3),i.min(i.abs(this.scroller.y-n.y),1e3)),300);this.scroller.x==n.x&&this.scroller.y==n.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=n,this.scroller.scrollTo(n.x,n.y,a,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0,this.indicatorStyle[r.style.transitionDuration]=e+"ms",!e&&r.isBadAndroid&&(this.indicatorStyle[r.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[r.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?i.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,n=e?0:300;e=e?"1":"0",this.wrapperStyle[r.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),n)}}},n.utils=r,"undefined"!=typeof module&&module.exports?module.exports=n:e.IScroll=n}(window,document,Math),!function(e){function t(t){if("string"==typeof t.data){var i=t.handler,n=t.data.toLowerCase().split(" "),a=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.inArray(t.target.type,a)>-1)){var s="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],o=String.fromCharCode(t.which).toLowerCase(),r="",l={};t.altKey&&"alt"!==s&&(r+="alt+"),t.ctrlKey&&"ctrl"!==s&&(r+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==s&&(r+="meta+"),t.shiftKey&&"shift"!==s&&(r+="shift+"),s?l[r+s]=!0:(l[r+o]=!0,l[r+e.hotkeys.shiftNums[o]]=!0,"shift+"===r&&(l[e.hotkeys.shiftNums[o]]=!0));for(var c=0,d=n.length;d>c;c++)if(l[n[c]])return i.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(jQuery),function(e,t){var i,n,a,s=e,o=s.document,r=s.navigator,l=s.setTimeout,c=s.clearTimeout,d=s.setInterval,p=s.clearInterval,u=s.getComputedStyle,h=s.encodeURIComponent,g=s.ActiveXObject,m=s.Error,f=s.Number.parseInt||s.parseInt,v=s.Number.parseFloat||s.parseFloat,b=s.Number.isNaN||s.isNaN,y=s.Date.now,w=s.Object.keys,x=s.Object.defineProperty,k=s.Object.prototype.hasOwnProperty,S=s.Array.prototype.slice,T=function(){
var e=function(e){return e};if("function"==typeof s.wrap&&"function"==typeof s.unwrap)try{var t=o.createElement("div"),i=s.unwrap(t);1===t.nodeType&&i&&1===i.nodeType&&(e=s.unwrap)}catch(n){}return e}(),C=function(e){return S.call(e,0)},E=function(){var e,i,n,a,s,o,r=C(arguments),l=r[0]||{};for(e=1,i=r.length;e<i;e++)if(null!=(n=r[e]))for(a in n)k.call(n,a)&&(s=l[a],o=n[a],l!==o&&o!==t&&(l[a]=o));return l},P=function(e){var t,i,n,a;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],i=0,n=e.length;i<n;i++)k.call(e,i)&&(t[i]=P(e[i]));else{t={};for(a in e)k.call(e,a)&&(t[a]=P(e[a]))}return t},I=function(e,t){for(var i={},n=0,a=t.length;n<a;n++)t[n]in e&&(i[t[n]]=e[t[n]]);return i},$=function(e,t){var i={};for(var n in e)t.indexOf(n)===-1&&(i[n]=e[n]);return i},_=function(e){if(e)for(var t in e)k.call(e,t)&&delete e[t];return e},L=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},M=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},R=function(e){var t,i;return"string"==typeof e&&e&&(i=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),i&&i[1]?t=i[1]:(i=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),i&&i[1]&&(t=i[1]))),t},q=function(){var e,t;try{throw new m}catch(i){t=i}return t&&(e=t.sourceURL||t.fileName||R(t.stack)),e},D=function(){var e,i,n;if(o.currentScript&&(e=o.currentScript.src))return e;if(i=o.getElementsByTagName("script"),1===i.length)return i[0].src||t;if("readyState"in i[0])for(n=i.length;n--;)if("interactive"===i[n].readyState&&(e=i[n].src))return e;return"loading"===o.readyState&&(e=i[i.length-1].src)?e:(e=q())?e:t},A=function(){var e,i,n,a=o.getElementsByTagName("script");for(e=a.length;e--;){if(!(n=a[e].src)){i=null;break}if(n=M(n),null==i)i=n;else if(i!==n){i=null;break}}return i||t},F=function(){var e=M(D())||A()||"";return e+"ZeroClipboard.swf"},z=function(){return null==e.opener&&(!!e.top&&e!=e.top||!!e.parent&&e!=e.parent)}(),N={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},O="11.0.0",U={},H={},j=null,B=0,X=0,V={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},W=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],G=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],Y=new RegExp("^flash-("+G.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Q=new RegExp("^flash-("+G.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),Z={swfPath:F(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},J=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(k.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))Z[t]=e[t];else if(null==N.bridge)if("containerId"===t||"swfObjectId"===t){if(!he(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");Z[t]=e[t]}else Z[t]=e[t];{if("string"!=typeof e||!e)return P(Z);if(k.call(Z,e))return Z[e]}},K=function(){return Xe(),{browser:I(r,["userAgent","platform","appName"]),flash:$(N,["bridge"]),zeroclipboard:{version:We.version,config:We.config()}}},ee=function(){return!!(N.disabled||N.outdated||N.sandboxed||N.unavailable||N.degraded||N.deactivated)},te=function(e,n){var a,s,o,r={};if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof n)for(a in e)k.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&We.on(a,e[a]);if(o&&o.length){for(a=0,s=o.length;a<s;a++)e=o[a].replace(/^on/,""),r[e]=!0,U[e]||(U[e]=[]),U[e].push(n);if(r.ready&&N.ready&&We.emit({type:"ready"}),r.error){for(a=0,s=G.length;a<s;a++)if(N[G[a].replace(/^flash-/,"")]===!0){We.emit({type:"error",name:G[a]});break}i!==t&&We.version!==i&&We.emit({type:"error",name:"version-mismatch",jsVersion:We.version,swfVersion:i})}}return We},ie=function(e,t){var i,n,a,s,o;if(0===arguments.length)s=w(U);else if("string"==typeof e&&e)s=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(i in e)k.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i]&&We.off(i,e[i]);if(s&&s.length)for(i=0,n=s.length;i<n;i++)if(e=s[i].toLowerCase().replace(/^on/,""),o=U[e],o&&o.length)if(t)for(a=o.indexOf(t);a!==-1;)o.splice(a,1),a=o.indexOf(t,a);else o.length=0;return We},ne=function(e){var t;return t="string"==typeof e&&e?P(U[e])||null:P(U)},ae=function(e){var t,i,n;if(e=ge(e),e&&!xe(e))return"ready"===e.type&&N.overdue===!0?We.emit({type:"error",name:"flash-overdue"}):(t=E({},e),ye.call(this,t),"copy"===e.type&&(n=$e(H),i=n.data,j=n.formatMap),i)},se=function(){var e=N.sandboxed;if(Xe(),"boolean"!=typeof N.ready&&(N.ready=!1),N.sandboxed!==e&&N.sandboxed===!0)N.ready=!1,We.emit({type:"error",name:"flash-sandboxed"});else if(!We.isFlashUnusable()&&null===N.bridge){var t=Z.flashLoadTimeout;"number"==typeof t&&t>=0&&(B=l(function(){"boolean"!=typeof N.deactivated&&(N.deactivated=!0),N.deactivated===!0&&We.emit({type:"error",name:"flash-deactivated"})},t)),N.overdue=!1,Pe()}},oe=function(){We.clearData(),We.blur(),We.emit("destroy"),Ie(),We.off()},re=function(e,t){var i;if("object"==typeof e&&e&&"undefined"==typeof t)i=e,We.clearData();else{if("string"!=typeof e||!e)return;i={},i[e]=t}for(var n in i)"string"==typeof n&&n&&k.call(i,n)&&"string"==typeof i[n]&&i[n]&&(H[n]=i[n])},le=function(e){"undefined"==typeof e?(_(H),j=null):"string"==typeof e&&k.call(H,e)&&delete H[e]},ce=function(e){return"undefined"==typeof e?P(H):"string"==typeof e&&k.call(H,e)?H[e]:void 0},de=function(e){if(e&&1===e.nodeType){n&&(Fe(n,Z.activeClass),n!==e&&Fe(n,Z.hoverClass)),n=e,Ae(e,Z.hoverClass);var t=e.getAttribute("title")||Z.title;if("string"==typeof t&&t){var i=Ee(N.bridge);i&&i.setAttribute("title",t)}var a=Z.forceHandCursor===!0||"pointer"===ze(e,"cursor");je(a),He()}},pe=function(){var e=Ee(N.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),n&&(Fe(n,Z.hoverClass),Fe(n,Z.activeClass),n=null)},ue=function(){return n||null},he=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},ge=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=a),E(e,{type:t,target:e.target||n||null,relatedTarget:e.relatedTarget||null,currentTarget:N&&N.bridge||null,timeStamp:e.timeStamp||y()||null});var i=V[e.type];return"error"===e.type&&e.name&&i&&(i=i[e.name]),i&&(e.message=i),"ready"===e.type&&E(e,{target:null,version:N.version}),"error"===e.type&&(Y.test(e.name)&&E(e,{target:null,minimumVersion:O}),Q.test(e.name)&&E(e,{version:N.version})),"copy"===e.type&&(e.clipboardData={setData:We.setData,clearData:We.clearData}),"aftercopy"===e.type&&(e=_e(e,j)),e.target&&!e.relatedTarget&&(e.relatedTarget=me(e.target)),fe(e)}},me=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?o.getElementById(t):null},fe=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var i=e.target,n="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,a="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,r=Ne(i),l=s.screenLeft||s.screenX||0,c=s.screenTop||s.screenY||0,d=o.body.scrollLeft+o.documentElement.scrollLeft,p=o.body.scrollTop+o.documentElement.scrollTop,u=r.left+("number"==typeof e._stageX?e._stageX:0),h=r.top+("number"==typeof e._stageY?e._stageY:0),g=u-d,m=h-p,f=l+g,v=c+m,b="number"==typeof e.movementX?e.movementX:0,y="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,E(e,{srcElement:i,fromElement:n,toElement:a,screenX:f,screenY:v,pageX:u,pageY:h,clientX:g,clientY:m,x:g,y:m,movementX:b,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ve=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},be=function(e,t,i,n){n?l(function(){e.apply(t,i)},0):e.apply(t,i)},ye=function(e){if("object"==typeof e&&e&&e.type){var t=ve(e),i=U["*"]||[],n=U[e.type]||[],a=i.concat(n);if(a&&a.length){var o,r,l,c,d,p=this;for(o=0,r=a.length;o<r;o++)l=a[o],c=p,"string"==typeof l&&"function"==typeof s[l]&&(l=s[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(d=E({},e),be(l,c,[d],t))}return this}},we=function(e){var t=null;return(z===!1||e&&"error"===e.type&&e.name&&W.indexOf(e.name)!==-1)&&(t=!1),t},xe=function(e){var t=e.target||n||null,s="swf"===e._source;switch(delete e._source,e.type){case"error":var o="flash-sandboxed"===e.name||we(e);"boolean"==typeof o&&(N.sandboxed=o),G.indexOf(e.name)!==-1?E(N,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(i=e.swfVersion,E(N,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Ue();break;case"ready":i=e.swfVersion;var r=N.deactivated===!0;E(N,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:r,ready:!r}),Ue();break;case"beforecopy":a=t;break;case"copy":var l,c,d=e.relatedTarget;!H["text/html"]&&!H["text/plain"]&&d&&(c=d.value||d.outerHTML||d.innerHTML)&&(l=d.value||d.textContent||d.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),c!==l&&e.clipboardData.setData("text/html",c)):!H["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":ke(e),We.clearData(),t&&t!==De()&&t.focus&&t.focus();break;case"_mouseover":We.focus(t),Z.bubbleEvents===!0&&s&&(t&&t!==e.relatedTarget&&!L(e.relatedTarget,t)&&Se(E({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),Se(E({},e,{type:"mouseover"})));break;case"_mouseout":We.blur(),Z.bubbleEvents===!0&&s&&(t&&t!==e.relatedTarget&&!L(e.relatedTarget,t)&&Se(E({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),Se(E({},e,{type:"mouseout"})));break;case"_mousedown":Ae(t,Z.activeClass),Z.bubbleEvents===!0&&s&&Se(E({},e,{type:e.type.slice(1)}));break;case"_mouseup":Fe(t,Z.activeClass),Z.bubbleEvents===!0&&s&&Se(E({},e,{type:e.type.slice(1)}));break;case"_click":a=null,Z.bubbleEvents===!0&&s&&Se(E({},e,{type:e.type.slice(1)}));break;case"_mousemove":Z.bubbleEvents===!0&&s&&Se(E({},e,{type:e.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type))return!0},ke=function(e){if(e.errors&&e.errors.length>0){var t=P(e);E(t,{type:"error",name:"clipboard-error"}),delete t.success,l(function(){We.emit(t)},0)}},Se=function(e){if(e&&"string"==typeof e.type&&e){var t,i=e.target||null,n=i&&i.ownerDocument||o,a={view:n.defaultView||s,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:n.createEvent?0:1},r=E(a,e);i&&n.createEvent&&i.dispatchEvent&&(r=[r.type,r.canBubble,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget],t=n.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,r),t._source="js",i.dispatchEvent(t)))}},Te=function(){var e=Z.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),i=Z.swfObjectId+"_fallbackContent";X=d(function(){var e=o.getElementById(i);Oe(e)&&(Ue(),N.deactivated=null,We.emit({type:"error",name:"swf-not-found"}))},t)}},Ce=function(){var e=o.createElement("div");return e.id=Z.containerId,e.className=Z.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+Be(Z.zIndex),e},Ee=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Pe=function(){var e,t=N.bridge,i=Ee(t);if(!t){var n=qe(s.location.host,Z),a="never"===n?"none":"all",r=Me(E({jsVersion:We.version},Z)),l=Z.swfPath+Le(Z.swfPath,Z);i=Ce();var c=o.createElement("div");i.appendChild(c),o.body.appendChild(i);var d=o.createElement("div"),p="activex"===N.pluginType;d.innerHTML='<object id="'+Z.swfObjectId+'" name="'+Z.swfObjectId+'" width="100%" height="100%" '+(p?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(p?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+n+'"/><param name="allowNetworking" value="'+a+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+r+'"/><div id="'+Z.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=d.firstChild,d=null,T(t).ZeroClipboard=We,i.replaceChild(t,c),Te()}return t||(t=o[Z.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&i&&(t=i.firstChild)),N.bridge=t||null,t},Ie=function(){var e=N.bridge;if(e){var n=Ee(e);n&&("activex"===N.pluginType&&"readyState"in e?(e.style.display="none",function a(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),n.parentNode&&n.parentNode.removeChild(n)}else l(a,10)}()):(e.parentNode&&e.parentNode.removeChild(e),n.parentNode&&n.parentNode.removeChild(n))),Ue(),N.ready=null,N.bridge=null,N.deactivated=null,i=t}},$e=function(e){var t={},i={};if("object"==typeof e&&e){for(var n in e)if(n&&k.call(e,n)&&"string"==typeof e[n]&&e[n])switch(n.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[n],i.text=n;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[n],i.html=n;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[n],i.rtf=n}return{data:t,formatMap:i}}},_e=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var i={};for(var n in e)if(k.call(e,n))if("errors"===n){i[n]=e[n]?e[n].slice():[];for(var a=0,s=i[n].length;a<s;a++)i[n][a].format=t[i[n][a].format]}else if("success"!==n&&"data"!==n)i[n]=e[n];else{i[n]={};var o=e[n];for(var r in o)r&&k.call(o,r)&&k.call(t,r)&&(i[n][t[r]]=o[r])}return i},Le=function(e,t){var i=null==t||t&&t.cacheBust===!0;return i?(e.indexOf("?")===-1?"?":"&")+"noCache="+y():""},Me=function(e){var t,i,n,a,o="",r=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?a=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(a=e.trustedDomains)),a&&a.length)for(t=0,i=a.length;t<i;t++)if(k.call(a,t)&&a[t]&&"string"==typeof a[t]){if(n=Re(a[t]),!n)continue;if("*"===n){r.length=0,r.push(n);break}r.push.apply(r,[n,"//"+n,s.location.protocol+"//"+n])}return r.length&&(o+="trustedOrigins="+h(r.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+h(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(o+=(o?"&":"")+"jsVersion="+h(e.jsVersion)),o},Re=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=t===-1?e:e.slice(t+2);var i=e.indexOf("/");return e=i===-1?e:t===-1||0===i?null:e.slice(0,i),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},qe=function(){var e=function(e){var t,i,n,a=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return a;for(t=0,i=e.length;t<i;t++)if(k.call(e,t)&&(n=Re(e[t]))){if("*"===n){a.length=0,a.push("*");break}a.indexOf(n)===-1&&a.push(n)}return a};return function(t,i){var n=Re(i.swfPath);null===n&&(n=t);var a=e(i.trustedDomains),s=a.length;if(s>0){if(1===s&&"*"===a[0])return"always";if(a.indexOf(t)!==-1)return 1===s&&t===n?"sameDomain":"always"}return"never"}}(),De=function(){try{return o.activeElement}catch(e){return null}},Ae=function(e,t){var i,n,a,s=[];if("string"==typeof t&&t&&(s=t.split(/\s+/)),e&&1===e.nodeType&&s.length>0)if(e.classList)for(i=0,n=s.length;i<n;i++)e.classList.add(s[i]);else if(e.hasOwnProperty("className")){for(a=" "+e.className+" ",i=0,n=s.length;i<n;i++)a.indexOf(" "+s[i]+" ")===-1&&(a+=s[i]+" ");e.className=a.replace(/^\s+|\s+$/g,"")}return e},Fe=function(e,t){var i,n,a,s=[];if("string"==typeof t&&t&&(s=t.split(/\s+/)),e&&1===e.nodeType&&s.length>0)if(e.classList&&e.classList.length>0)for(i=0,n=s.length;i<n;i++)e.classList.remove(s[i]);else if(e.className){for(a=(" "+e.className+" ").replace(/[\r\n\t]/g," "),i=0,n=s.length;i<n;i++)a=a.replace(" "+s[i]+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}return e},ze=function(e,t){var i=u(e,null).getPropertyValue(t);return"cursor"!==t||i&&"auto"!==i||"A"!==e.nodeName?i:"pointer"},Ne=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),n=s.pageXOffset,a=s.pageYOffset,r=o.documentElement.clientLeft||0,l=o.documentElement.clientTop||0,c=0,d=0;if("relative"===ze(o.body,"position")){var p=o.body.getBoundingClientRect(),u=o.documentElement.getBoundingClientRect();c=p.left-u.left||0,d=p.top-u.top||0}t.left=i.left+n-r-c,t.top=i.top+a-l-d,t.width="width"in i?i.width:i.right-i.left,t.height="height"in i?i.height:i.bottom-i.top}return t},Oe=function(e){if(!e)return!1;var t=u(e,null),i=v(t.height)>0,n=v(t.width)>0,a=v(t.top)>=0,s=v(t.left)>=0,o=i&&n&&a&&s,r=o?null:Ne(e),l="none"!==t.display&&"collapse"!==t.visibility&&(o||!!r&&(i||r.height>0)&&(n||r.width>0)&&(a||r.top>=0)&&(s||r.left>=0));return l},Ue=function(){c(B),B=0,p(X),X=0},He=function(){var e;if(n&&(e=Ee(N.bridge))){var t=Ne(n);E(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+Be(Z.zIndex)})}},je=function(e){N.ready===!0&&(N.bridge&&"function"==typeof N.bridge.setHandCursor?N.bridge.setHandCursor(e):N.ready=!1)},Be=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||b(e)?"string"==typeof e&&(t=Be(f(e,10))):t=e,"number"==typeof t?t:"auto"},Xe=function(t){var i,n,a,s=N.sandboxed,o=null;if(t=t===!0,z===!1)o=!1;else{try{n=e.frameElement||null}catch(r){a={name:r.name,message:r.message}}if(n&&1===n.nodeType&&"IFRAME"===n.nodeName)try{o=n.hasAttribute("sandbox")}catch(r){o=null}else{try{i=document.domain||null}catch(r){i=null}(null===i||a&&"SecurityError"===a.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(a.message.toLowerCase()))&&(o=!0)}}return N.sandboxed=o,s===o||t||Ve(g),o},Ve=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function i(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function n(e){e&&(l=!0,e.version&&(p=t(e.version)),!p&&e.description&&(p=t(e.description)),e.filename&&(d=i(e.filename)))}var a,s,o,l=!1,c=!1,d=!1,p="";if(r.plugins&&r.plugins.length)a=r.plugins["Shockwave Flash"],n(a),r.plugins["Shockwave Flash 2.0"]&&(l=!0,p="2.0.0.11");else if(r.mimeTypes&&r.mimeTypes.length)o=r.mimeTypes["application/x-shockwave-flash"],a=o&&o.enabledPlugin,n(a);else if("undefined"!=typeof e){c=!0;try{s=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,p=t(s.GetVariable("$version"))}catch(u){try{s=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,p="6.0.21"}catch(h){try{s=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,p=t(s.GetVariable("$version"))}catch(g){c=!1}}}}N.disabled=l!==!0,N.outdated=p&&v(p)<v(O),N.version=p||"0.0.0",N.pluginType=d?"pepper":c?"activex":l?"netscape":"unknown"};Ve(g),Xe(!0);var We=function(){return this instanceof We?void("function"==typeof We._createClient&&We._createClient.apply(this,C(arguments))):new We};x(We,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),We.config=function(){return J.apply(this,C(arguments))},We.state=function(){return K.apply(this,C(arguments))},We.isFlashUnusable=function(){return ee.apply(this,C(arguments))},We.on=function(){return te.apply(this,C(arguments))},We.off=function(){return ie.apply(this,C(arguments))},We.handlers=function(){return ne.apply(this,C(arguments))},We.emit=function(){return ae.apply(this,C(arguments))},We.create=function(){return se.apply(this,C(arguments))},We.destroy=function(){return oe.apply(this,C(arguments))},We.setData=function(){return re.apply(this,C(arguments))},We.clearData=function(){return le.apply(this,C(arguments))},We.getData=function(){return ce.apply(this,C(arguments))},We.focus=We.activate=function(){return de.apply(this,C(arguments))},We.blur=We.deactivate=function(){return pe.apply(this,C(arguments))},We.activeElement=function(){return ue.apply(this,C(arguments))};var Ge=0,Ye={},Qe=0,Ze={},Je={};E(Z,{autoActivate:!0});var Ke=function(e){var t=this;t.id=""+Ge++,Ye[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),We.on("*",function(e){return t.emit(e)}),We.on("destroy",function(){t.destroy()}),We.create()},et=function(e,n){var a,s,o,r={},l=Ye[this.id],c=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof n)for(a in e)k.call(e,a)&&"string"==typeof a&&a&&"function"==typeof e[a]&&this.on(a,e[a]);if(o&&o.length){for(a=0,s=o.length;a<s;a++)e=o[a].replace(/^on/,""),r[e]=!0,c[e]||(c[e]=[]),c[e].push(n);if(r.ready&&N.ready&&this.emit({type:"ready",client:this}),r.error){for(a=0,s=G.length;a<s;a++)if(N[G[a].replace(/^flash-/,"")]){this.emit({type:"error",name:G[a],client:this});break}i!==t&&We.version!==i&&this.emit({type:"error",name:"version-mismatch",jsVersion:We.version,swfVersion:i})}}return this},tt=function(e,t){var i,n,a,s,o,r=Ye[this.id],l=r&&r.handlers;if(!l)return this;if(0===arguments.length)s=w(l);else if("string"==typeof e&&e)s=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(i in e)k.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i]&&this.off(i,e[i]);if(s&&s.length)for(i=0,n=s.length;i<n;i++)if(e=s[i].toLowerCase().replace(/^on/,""),o=l[e],o&&o.length)if(t)for(a=o.indexOf(t);a!==-1;)o.splice(a,1),a=o.indexOf(t,a);else o.length=0;return this},it=function(e){var t=null,i=Ye[this.id]&&Ye[this.id].handlers;return i&&(t="string"==typeof e&&e?i[e]?i[e].slice(0):[]:P(i)),t},nt=function(e){if(lt.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=E({},e));var t=E({},ge(e),{client:this});ct.call(this,t)}return this},at=function(e){if(!Ye[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=dt(e);for(var t=0;t<e.length;t++)if(k.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?Ze[e[t].zcClippingId].indexOf(this.id)===-1&&Ze[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Qe++,Ze[e[t].zcClippingId]=[this.id],Z.autoActivate===!0&&pt(e[t]));var i=Ye[this.id]&&Ye[this.id].elements;i.indexOf(e[t])===-1&&i.push(e[t])}return this},st=function(e){var t=Ye[this.id];if(!t)return this;var i,n=t.elements;e="undefined"==typeof e?n.slice(0):dt(e);for(var a=e.length;a--;)if(k.call(e,a)&&e[a]&&1===e[a].nodeType){for(i=0;(i=n.indexOf(e[a],i))!==-1;)n.splice(i,1);var s=Ze[e[a].zcClippingId];if(s){for(i=0;(i=s.indexOf(this.id,i))!==-1;)s.splice(i,1);0===s.length&&(Z.autoActivate===!0&&ut(e[a]),delete e[a].zcClippingId)}}return this},ot=function(){var e=Ye[this.id];return e&&e.elements?e.elements.slice(0):[]},rt=function(){Ye[this.id]&&(this.unclip(),this.off(),delete Ye[this.id])},lt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Ye[this.id],i=t&&t.elements,n=!!i&&i.length>0,a=!e.target||n&&i.indexOf(e.target)!==-1,s=e.relatedTarget&&n&&i.indexOf(e.relatedTarget)!==-1,o=e.client&&e.client===this;return!(!t||!(a||s||o))},ct=function(e){var t=Ye[this.id];if("object"==typeof e&&e&&e.type&&t){var i=ve(e),n=t&&t.handlers["*"]||[],a=t&&t.handlers[e.type]||[],o=n.concat(a);if(o&&o.length){var r,l,c,d,p,u=this;for(r=0,l=o.length;r<l;r++)c=o[r],d=u,"string"==typeof c&&"function"==typeof s[c]&&(c=s[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(d=c,c=c.handleEvent),"function"==typeof c&&(p=E({},e),be(c,d,[p],i))}}},dt=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},pt=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=s.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},i=function(i){(i||(i=s.event))&&(t(i),We.focus(e))};e.addEventListener("mouseover",i,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Je[e.zcClippingId]={mouseover:i,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},ut=function(e){if(e&&1===e.nodeType){var t=Je[e.zcClippingId];if("object"==typeof t&&t){for(var i,n,a=["move","leave","enter","out","over"],s=0,o=a.length;s<o;s++)i="mouse"+a[s],n=t[i],"function"==typeof n&&e.removeEventListener(i,n,!1);delete Je[e.zcClippingId]}}};We._createClient=function(){Ke.apply(this,C(arguments))},We.prototype.on=function(){return et.apply(this,C(arguments))},We.prototype.off=function(){return tt.apply(this,C(arguments))},We.prototype.handlers=function(){return it.apply(this,C(arguments))},We.prototype.emit=function(){return nt.apply(this,C(arguments))},We.prototype.clip=function(){return at.apply(this,C(arguments))},We.prototype.unclip=function(){return st.apply(this,C(arguments))},We.prototype.elements=function(){return ot.apply(this,C(arguments))},We.prototype.destroy=function(){return rt.apply(this,C(arguments))},We.prototype.setText=function(e){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData("text/plain",e),this},We.prototype.setHtml=function(e){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData("text/html",e),this},We.prototype.setRichText=function(e){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData("application/rtf",e),this},We.prototype.setData=function(){if(!Ye[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData.apply(this,C(arguments)),this},We.prototype.clearData=function(){if(!Ye[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return We.clearData.apply(this,C(arguments)),this},We.prototype.getData=function(){if(!Ye[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return We.getData.apply(this,C(arguments))},"function"==typeof define&&define.amd?define(function(){return We}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=We:e.ZeroClipboard=We}(function(){return this||window}()),function(global){function createCookie(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var a="; expires="+n.toGMTString();document.cookie=e+"="+t+a+"; path=/"}function readCookie(e){for(var t=e+"=",i=document.cookie.split(";"),n=0,a=i.length;n<a;n++){for(var s=i[n];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null}function QiniuJsSDK(){function log(e,t){var i="[qiniu-js-sdk]["+e+"]";if(that.detectIEVersion()){for(var n=i,a=0;a<t.length;a++)n+=that.stringifyJSON(t[a]);console.log(n)}else t.unshift(i),console.log.apply(console,t)}function makeLogFunc(e){var t=e.toLowerCase();logger[t]=function(){if(window.console&&window.console.log&&logger.level>=logger[e]){var i=Array.prototype.slice.call(arguments);log(t,i)}}}var that=this;this.detectIEVersion=function(){for(var e=4,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+e+"]><i></i><![endif]-->",i[0];)e++;return e>4&&e};var logger={MUTE:0,FATA:1,ERROR:2,WARN:3,INFO:4,DEBUG:5,TRACE:6,level:0};for(var property in logger)logger.hasOwnProperty(property)&&"number"==typeof logger[property]&&!logger.hasOwnProperty(property.toLowerCase())&&makeLogFunc(property);var qiniuUploadUrl;qiniuUploadUrl="https:"===window.location.protocol?"https://up.qbox.me":"http://upload.qiniu.com";var qiniuUploadUrls=["http://upload.qiniu.com","http://up.qiniu.com"],changeUrlTimes=0;this.resetUploadUrl=function(){if("https:"===window.location.protocol)qiniuUploadUrl="https://up.qbox.me";else{var e=changeUrlTimes%qiniuUploadUrls.length;qiniuUploadUrl=qiniuUploadUrls[e],changeUrlTimes++}logger.debug("resetUploadUrl: "+qiniuUploadUrl)},this.resetUploadUrl(),this.isImage=function(e){return e=e.split(/[?#]/)[0],/\.(png|jpg|jpeg|gif|bmp)$/i.test(e)},this.getFileExtension=function(e){var t,i=e.split(".");return t=1===i.length||""===i[0]&&2===i.length?"":i.pop().toLowerCase()},this.utf8_encode=function(e){if(null===e||"undefined"==typeof e)return"";var t,i,n=e+"",a="",s=0;t=i=0,s=n.length;for(var o=0;o<s;o++){var r=n.charCodeAt(o),l=null;if(r<128)i++;else if(r>127&&r<2048)l=String.fromCharCode(r>>6|192,63&r|128);else if(63488&r^!0)l=String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128);else{if(64512&r^!0)throw new RangeError("Unmatched trail surrogate at "+o);var c=n.charCodeAt(++o);if(64512&c^!0)throw new RangeError("Unmatched lead surrogate at "+(o-1));r=((1023&r)<<10)+(1023&c)+65536,l=String.fromCharCode(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}null!==l&&(i>t&&(a+=n.slice(t,i)),a+=l,t=i=o+1)}return i>t&&(a+=n.slice(t,s)),a},this.base64_encode=function(e){var t,i,n,a,s,o,r,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,p=0,u="",h=[];if(!e)return e;e=this.utf8_encode(e+"");do t=e.charCodeAt(d++),i=e.charCodeAt(d++),n=e.charCodeAt(d++),l=t<<16|i<<8|n,
a=l>>18&63,s=l>>12&63,o=l>>6&63,r=63&l,h[p++]=c.charAt(a)+c.charAt(s)+c.charAt(o)+c.charAt(r);while(d<e.length);switch(u=h.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},this.URLSafeBase64Encode=function(e){return e=this.base64_encode(e),e.replace(/\//g,"_").replace(/\+/g,"-")},this.createAjax=function(e){var t={};return t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},this.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data);var rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,text=String(data);return rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),eval("("+text+")")},this.stringifyJSON=function(e){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(e);switch(typeof e){case"string":return'"'+e.replace(/(["\\])/g,"\\$1")+'"';case"array":return"["+e.map(that.stringifyJSON).join(",")+"]";case"object":if(e instanceof Array){for(var t=[],i=e.length,n=0;n<i;n++)t.push(that.stringifyJSON(e[n]));return"["+t.join(",")+"]"}if(null===e)return"null";var a=[];for(var s in e)e.hasOwnProperty(s)&&a.push(that.stringifyJSON(s)+":"+that.stringifyJSON(e[s]));return"{"+a.join(",")+"}";case"number":return e;case!1:return e;case"boolean":return e}},this.trim=function(e){return null===e?"":e.replace(/^\s+|\s+$/g,"")},this.uploader=function(e){var t=function(){var t,i,n,a=that.detectIEVersion(),s="Safari"===mOxie.Env.browser&&mOxie.Env.version<=5&&"Windows"===mOxie.Env.os&&"7"===mOxie.Env.osVersion||"Safari"===mOxie.Env.browser&&"iOS"===mOxie.Env.os&&"7"===mOxie.Env.osVersion;a&&a<=9&&e.chunk_size&&e.runtimes.indexOf("flash")<0?e.chunk_size=0:s?e.chunk_size=0:(t=20,i=4<<t,n=plupload.parseSize(e.chunk_size),n>i&&(e.chunk_size=i))},i=function(){if(e.uptoken)that.token=e.uptoken;else{var t=that.createAjax();t.open("GET",that.uptoken_url,!0),t.setRequestHeader("If-Modified-Since","0"),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=that.parseJSON(t.responseText);that.token=e.uptoken}},t.send()}},n=function(t,i,n){var a="",s=!1;if(!e.save_key)if(s=t.getOption&&t.getOption("unique_names"),s=s||t.settings&&t.settings.unique_names){var o=that.getFileExtension(i.name);a=o?i.id+"."+o:i.id}else a="function"==typeof n?n(t,i):i.name;return a};if(e.log_level&&(logger.level=e.log_level),!e.domain)throw"domain setting in options is required!";if(!e.browse_button)throw"browse_button setting in options is required!";logger.debug("init uploader start"),logger.debug("environment: ",mOxie.Env),logger.debug("userAgent: ",navigator.userAgent);var a={},s=e.init&&e.init.Error,o=e.init&&e.init.FileUploaded;e.init.Error=function(){},e.init.FileUploaded=function(){},that.uptoken_url=e.uptoken_url,that.token="",that.key_handler="function"==typeof e.init.Key?e.init.Key:"",this.domain=e.domain;var r="",l={isResumeUpload:!1,resumeFilesize:0,startTime:"",currentTime:""};t(),logger.debug("invoke reset_chunk_size()"),logger.debug("op.chunk_size: ",e.chunk_size),plupload.extend(a,e,{url:qiniuUploadUrl,multipart_params:{token:""}}),logger.debug("option: ",a);var c=new plupload.Uploader(a);logger.debug("new plupload.Uploader(option)"),c.bind("Init",function(t,n){logger.debug("Init event activated"),e.get_new_uptoken||i(),i()}),logger.debug("bind Init event"),c.bind("FilesAdded",function(e,t){logger.debug("FilesAdded event activated");var i=e.getOption&&e.getOption("auto_start");i=i||e.settings&&e.settings.auto_start,logger.debug("auto_start: ",i),logger.debug("files: ",t),i&&setTimeout(function(){e.start(),logger.debug("invoke up.start()")},0),e.refresh()}),logger.debug("bind FilesAdded event"),c.bind("BeforeUpload",function(t,a){logger.debug("BeforeUpload event activated"),a.speed=a.speed||0,r="",e.get_new_uptoken&&i();var s=function(t,i,a){l.startTime=(new Date).getTime();var s;s=e.save_key?{token:that.token}:{key:n(t,i,a),token:that.token},logger.debug("directUpload multipart_params_obj: ",s);var r=e.x_vars;if(void 0!==r&&"object"==typeof r)for(var c in r)r.hasOwnProperty(c)&&("function"==typeof r[c]?s["x:"+c]=r[c](t,i):"object"!=typeof r[c]&&(s["x:"+c]=r[c]));t.setOption({url:qiniuUploadUrl,multipart:!0,chunk_size:o()?e.max_file_size:void 0,multipart_params:s})},o=function(){var e=navigator.userAgent.toLowerCase();return!(!e.match(/MicroMessenger/i)&&"QQBrowser"!==mOxie.Env.browser&&!e.match(/V1_AND_SQ/i)||"android"!==mOxie.Env.OS.toLowerCase())},d=t.getOption&&t.getOption("chunk_size");if(d=d||t.settings&&t.settings.chunk_size,logger.debug("uploader.runtime: ",c.runtime),logger.debug("chunk_size: ",d),"html5"!==c.runtime&&"flash"!==c.runtime||!d)logger.debug("directUpload because uploader.runtime !== 'html5' || uploader.runtime !== 'flash' || !chunk_size"),s(t,a,that.key_handler);else if(a.size<d||o())logger.debug("directUpload because file.size < chunk_size || is_android_weixin_or_qq()"),s(t,a,that.key_handler);else{var p=localStorage.getItem(a.name),u=d;if(p){p=that.parseJSON(p);var h=(new Date).getTime(),g=p.time||0,m=864e5;h-g<m&&100!==p.percent&&a.size===p.total?(a.percent=p.percent,a.loaded=p.offset,r=p.ctx,l.isResumeUpload=!0,l.resumeFilesize=p.offset,p.offset+u>a.size&&(u=a.size-p.offset)):localStorage.removeItem(a.name)}l.startTime=(new Date).getTime(),t.setOption({url:qiniuUploadUrl+"/mkblk/"+u,multipart:!1,chunk_size:d,required_features:"chunks",headers:{Authorization:"UpToken "+that.token},multipart_params:{}})}}),logger.debug("bind BeforeUpload event"),c.bind("UploadProgress",function(e,t){logger.trace("UploadProgress event activated"),l.currentTime=(new Date).getTime();var i=l.currentTime-l.startTime,n=t.loaded||0;l.isResumeUpload&&(n=t.loaded-l.resumeFilesize),t.speed=(n/i*1e3).toFixed(0)||0}),logger.debug("bind UploadProgress event"),c.bind("ChunkUploaded",function(e,t,i){logger.debug("ChunkUploaded event activated"),logger.debug("file: ",t),logger.debug("info: ",i);var n=that.parseJSON(i.response);logger.debug("res: ",n),r=r?r+","+n.ctx:n.ctx;var a=i.total-i.offset,s=e.getOption&&e.getOption("chunk_size");s=s||e.settings&&e.settings.chunk_size,a<s&&(e.setOption({url:qiniuUploadUrl+"/mkblk/"+a}),logger.debug("up.setOption url: ",qiniuUploadUrl+"/mkblk/"+a)),localStorage.setItem(t.name,that.stringifyJSON({ctx:r,percent:t.percent,total:i.total,offset:i.offset,time:(new Date).getTime()}))}),logger.debug("bind ChunkUploaded event");var d=qiniuUploadUrls.length,p=function(e){return d-- >0?(setTimeout(function(){that.resetUploadUrl(),e.status=plupload.QUEUED,c.stop(),c.start()},0),!0):(d=qiniuUploadUrls.length,!1)};return c.bind("Error",function(e){return function(t,i){logger.error("Error event activated"),logger.error("err: ",i);var n="",a=i.file;if(a){switch(i.code){case plupload.FAILED:n="ä¸Šä¼ å¤±è´¥ã€‚è¯·ç¨åŽå†è¯•ã€‚";break;case plupload.FILE_SIZE_ERROR:var s=t.getOption&&t.getOption("max_file_size");s=s||t.settings&&t.settings.max_file_size,n="æµè§ˆå™¨æœ€å¤§å¯ä¸Šä¼ "+s+"ã€‚æ›´å¤§æ–‡ä»¶è¯·ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ã€‚";break;case plupload.FILE_EXTENSION_ERROR:n="æ–‡ä»¶éªŒè¯å¤±è´¥ã€‚è¯·ç¨åŽé‡è¯•ã€‚";break;case plupload.HTTP_ERROR:if(""===i.response){if(n=i.message||"æœªçŸ¥ç½‘ç»œé”™è¯¯ã€‚",!p(a))return;break}var o=that.parseJSON(i.response),r=o.error;switch(i.status){case 400:n="è¯·æ±‚æŠ¥æ–‡æ ¼å¼é”™è¯¯ã€‚";break;case 401:n="å®¢æˆ·ç«¯è®¤è¯æŽˆæƒå¤±è´¥ã€‚è¯·é‡è¯•æˆ–æäº¤åé¦ˆã€‚";break;case 405:n="å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯ã€‚è¯·é‡è¯•æˆ–æäº¤åé¦ˆã€‚";break;case 579:n="èµ„æºä¸Šä¼ æˆåŠŸï¼Œä½†å›žè°ƒå¤±è´¥ã€‚";break;case 599:if(n="ç½‘ç»œè¿žæŽ¥å¼‚å¸¸ã€‚è¯·é‡è¯•æˆ–æäº¤åé¦ˆã€‚",!p(a))return;break;case 614:n="æ–‡ä»¶å·²å­˜åœ¨ã€‚";try{o=that.parseJSON(o.error),r=o.error||"file exists"}catch(l){r=o.error||"file exists"}break;case 631:n="æŒ‡å®šç©ºé—´ä¸å­˜åœ¨ã€‚";break;case 701:n="ä¸Šä¼ æ•°æ®å—æ ¡éªŒå‡ºé”™ã€‚è¯·é‡è¯•æˆ–æäº¤åé¦ˆã€‚";break;default:if(n="æœªçŸ¥é”™è¯¯ã€‚",!p(a))return}n=n+"("+i.status+"ï¼š"+r+")";break;case plupload.SECURITY_ERROR:n="å®‰å…¨é…ç½®é”™è¯¯ã€‚è¯·è”ç³»ç½‘ç«™ç®¡ç†å‘˜ã€‚";break;case plupload.GENERIC_ERROR:n="ä¸Šä¼ å¤±è´¥ã€‚è¯·ç¨åŽå†è¯•ã€‚";break;case plupload.IO_ERROR:n="ä¸Šä¼ å¤±è´¥ã€‚è¯·ç¨åŽå†è¯•ã€‚";break;case plupload.INIT_ERROR:n="ç½‘ç«™é…ç½®é”™è¯¯ã€‚è¯·è”ç³»ç½‘ç«™ç®¡ç†å‘˜ã€‚",c.destroy();break;default:if(n=i.message+i.details,!p(a))return}e&&e(t,i,n)}t.refresh()}}(s)),logger.debug("bind Error event"),c.bind("FileUploaded",function(t){return function(i,a,s){logger.debug("FileUploaded event activated"),logger.debug("file: ",a),logger.debug("info: ",s);var o=function(i,n,a){if(e.downtoken_url){var s=that.createAjax();s.open("POST",e.downtoken_url,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var e;try{e=that.parseJSON(s.responseText)}catch(o){throw"invalid json format"}var r={};plupload.extend(r,that.parseJSON(a),e),t&&t(i,n,that.stringifyJSON(r))}else c.trigger("Error",{status:s.status,response:s.responseText,file:n,code:plupload.HTTP_ERROR})},s.send("key="+that.parseJSON(a).key+"&domain="+e.domain)}else t&&t(i,n,a)},l=that.parseJSON(s.response);if(r=r?r:l.ctx,logger.debug("ctx: ",r),r){var d="";logger.debug("save_key: ",e.save_key),e.save_key||(d=n(i,a,that.key_handler),d=d?"/key/"+that.URLSafeBase64Encode(d):"");var p="/fname/"+that.URLSafeBase64Encode(a.name);logger.debug("op.x_vars: ",e.x_vars);var u=e.x_vars,h="",g="";if(void 0!==u&&"object"==typeof u)for(var m in u)u.hasOwnProperty(m)&&("function"==typeof u[m]?h=that.URLSafeBase64Encode(u[m](i,a)):"object"!=typeof u[m]&&(h=that.URLSafeBase64Encode(u[m])),g+="/x:"+m+"/"+h);var f,v=qiniuUploadUrl+"/mkfile/"+a.size+d+p+g,b=that.detectIEVersion();b&&b<=9?(f=new mOxie.XMLHttpRequest,mOxie.Env.swf_url=e.flash_swf_url):f=that.createAjax(),f.open("POST",v,!0),f.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),f.setRequestHeader("Authorization","UpToken "+that.token);var y=function(){if(logger.debug("ajax.readyState: ",f.readyState),4===f.readyState){localStorage.removeItem(a.name);var e;200===f.status?(e=f.responseText,logger.debug("mkfile is success: ",e),o(i,a,e)):(e={status:f.status,response:f.responseText,file:a,code:-200},logger.debug("mkfile is error: ",e),c.trigger("Error",e))}};b&&b<=9?f.bind("readystatechange",y):f.onreadystatechange=y,f.send(r),logger.debug("mkfile: ",v)}else o(i,a,s.response)}}(o)),logger.debug("bind FileUploaded event"),c.init(),logger.debug("invoke uploader.init()"),logger.debug("init uploader end"),c},this.getUrl=function(e){if(!e)return!1;e=encodeURI(e);var t=this.domain;return"/"!==t.slice(t.length-1)&&(t+="/"),t+e},this.imageView2=function(e,t){var i=e.mode||"",n=e.w||"",a=e.h||"",s=e.q||"",o=e.format||"";if(!i)return!1;if(!n&&!a)return!1;var r="imageView2/"+i;return r+=n?"/w/"+n:"",r+=a?"/h/"+a:"",r+=s?"/q/"+s:"",r+=o?"/format/"+o:"",t&&(r=this.getUrl(t)+"?"+r),r},this.imageMogr2=function(e,t){var i=e["auto-orient"]||"",n=e.thumbnail||"",a=e.strip||"",s=e.gravity||"",o=e.crop||"",r=e.quality||"",l=e.rotate||"",c=e.format||"",d=e.blur||"",p="imageMogr2";return p+=i?"/auto-orient":"",p+=n?"/thumbnail/"+n:"",p+=a?"/strip":"",p+=s?"/gravity/"+s:"",p+=r?"/quality/"+r:"",p+=o?"/crop/"+o:"",p+=l?"/rotate/"+l:"",p+=c?"/format/"+c:"",p+=d?"/blur/"+d:"",t&&(p=this.getUrl(t)+"?"+p),p},this.watermark=function(e,t){var i=e.mode;if(!i)return!1;var n="watermark/"+i;if(1===i){var a=e.image||"";if(!a)return!1;n+=a?"/image/"+this.URLSafeBase64Encode(a):""}else{if(2!==i)return!1;var s=e.text?e.text:"",o=e.font?e.font:"",r=e.fontsize?e.fontsize:"",l=e.fill?e.fill:"";if(!s)return!1;n+=s?"/text/"+this.URLSafeBase64Encode(s):"",n+=o?"/font/"+this.URLSafeBase64Encode(o):"",n+=r?"/fontsize/"+r:"",n+=l?"/fill/"+this.URLSafeBase64Encode(l):""}var c=e.dissolve||"",d=e.gravity||"",p=e.dx||"",u=e.dy||"";return n+=c?"/dissolve/"+c:"",n+=d?"/gravity/"+d:"",n+=p?"/dx/"+p:"",n+=u?"/dy/"+u:"",t&&(n=this.getUrl(t)+"?"+n),n},this.imageInfo=function(e){if(!e)return!1;var t,i=this.getUrl(e)+"?imageInfo",n=this.createAjax(),a=this;return n.open("GET",i,!1),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(t=a.parseJSON(n.responseText))},n.send(),t},this.exif=function(e){if(!e)return!1;var t,i=this.getUrl(e)+"?exif",n=this.createAjax(),a=this;return n.open("GET",i,!1),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(t=a.parseJSON(n.responseText))},n.send(),t},this.get=function(e,t){return!(!t||!e)&&("exif"===e?this.exif(t):"imageInfo"===e&&this.imageInfo(t))},this.pipeline=function(e,t){var i,n,a="[object Array]"===Object.prototype.toString.call(e),s="";if(a){for(var o=0,r=e.length;o<r;o++){if(i=e[o],!i.fop)return!1;switch(i.fop){case"watermark":s+=this.watermark(i)+"|";break;case"imageView2":s+=this.imageView2(i)+"|";break;case"imageMogr2":s+=this.imageMogr2(i)+"|";break;default:n=!0}if(n)return!1}if(t){s=this.getUrl(t)+"?"+s;var l=s.length;"|"===s.slice(l-1)&&(s=s.slice(0,l-1))}return s}return!1}}window.localStorage||(window.localStorage={setItem:function(e,t){createCookie(e,t,30)},getItem:function(e){return readCookie(e)},removeItem:function(e){createCookie(e,"",-1)}});var Qiniu=new QiniuJsSDK;global.Qiniu=Qiniu,global.QiniuJsSDK=QiniuJsSDK}(window),!function(e){"use strict";var t=function(t,i){this.el=e(t),this.options=e.extend({},e.fn.typed.defaults,i),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};t.prototype={constructor:t,init:function(){var e=this;e.timeout=setTimeout(function(){for(var t=0;t<e.strings.length;++t)e.sequence[t]=t;e.shuffle&&(e.sequence=e.shuffleArray(e.sequence)),e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos)},e.startDelay)},build:function(){var t=this;if(this.showCursor===!0&&(this.cursor=e('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){t.strings=[],this.stringsElement.hide();var i=this.stringsElement.find("p");e.each(i,function(i,n){t.strings.push(e(n).html())})}this.init()},typewrite:function(e,t){if(this.stop!==!0){var i=Math.round(70*Math.random())+this.typeSpeed,n=this;n.timeout=setTimeout(function(){var i=0,a=e.substr(t);if("^"===a.charAt(0)){var s=1;/^\^\d+/.test(a)&&(a=/\d+/.exec(a)[0],s+=a.length,i=parseInt(a)),e=e.substring(0,t)+e.substring(t+s)}if("html"===n.contentType){var o=e.substr(t).charAt(0);if("<"===o||"&"===o){var r="",l="";for(l="<"===o?">":";";e.substr(t).charAt(0)!==l;)r+=e.substr(t).charAt(0),t++;r+=l}}n.timeout=setTimeout(function(){if(t===e.length){if(n.options.onStringTyped(n.arrayPos),n.arrayPos===n.strings.length-1&&(n.options.callback(),n.curLoop++,n.loop===!1||n.curLoop===n.loopCount))return;n.timeout=setTimeout(function(){n.backspace(e,t)},n.backDelay)}else{0===t&&n.options.preStringTyped(n.arrayPos);var i=e.substr(0,t+1);n.attr?n.el.attr(n.attr,i):n.isInput?n.el.val(i):"html"===n.contentType?n.el.html(i):n.el.text(i),t++,n.typewrite(e,t)}},i)},i)}},backspace:function(e,t){if(this.stop!==!0){var i=Math.round(70*Math.random())+this.backSpeed,n=this;n.timeout=setTimeout(function(){if("html"===n.contentType&&">"===e.substr(t).charAt(0)){for(var i="";"<"!==e.substr(t).charAt(0);)i-=e.substr(t).charAt(0),t--;t--,i+="<"}var a=e.substr(0,t);n.attr?n.el.attr(n.attr,a):n.isInput?n.el.val(a):"html"===n.contentType?n.el.html(a):n.el.text(a),t>n.stopNum?(t--,n.backspace(e,t)):t<=n.stopNum&&(n.arrayPos++,n.arrayPos===n.strings.length?(n.arrayPos=0,n.shuffle&&(n.sequence=n.shuffleArray(n.sequence)),n.init()):n.typewrite(n.strings[n.sequence[n.arrayPos]],t))},i)}},shuffleArray:function(e){var t,i,n=e.length;if(n)for(;--n;)i=Math.floor(Math.random()*(n+1)),t=e[i],e[i]=e[n],e[n]=t;return e},reset:function(){var e=this;clearInterval(e.timeout);var t=this.el.attr("id");this.el.after('<span id="'+t+'"/>'),this.el.remove(),"undefined"!=typeof this.cursor&&this.cursor.remove(),e.options.resetCallback()}},e.fn.typed=function(i){return this.each(function(){var n=e(this),a=n.data("typed"),s="object"==typeof i&&i;a||n.data("typed",a=new t(this,s)),"string"==typeof i&&a[i]()})},e.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery),function(e){function t(){var e={};this.addInterval=function(t,i){e[t]=i},this.deleteInterval=function(t){e[t]&&(clearInterval(e[t]),delete e[t])},this.clearInterval=function(){for(var t in e)this.deleteInterval(t)};var t=[{value:1,desc:"轮播",name:"slide"},{value:2,desc:"下落",name:"bars"},{value:3,desc:"百页窗",name:"blinds"},{value:4,desc:"消隐",name:"blocks"},{value:5,desc:"渐变",name:"blocks2"},{value:9,desc:"梳理",name:"zip"},{value:11,desc:"翻转",name:"bars3d"},{value:13,desc:"立方体",name:"cube"},{value:14,desc:"棋盘",name:"tiles3d"},{value:16,desc:"飞出",name:"explode"}];this.getPicStyle=function(e){if(void 0===e)return t;for(var i=0;i<t.length;i++)if(e===t[i].value)return t[i]}}e.utilPictures=new t}(window),function(e){function t(){var e={CLICK:{name:"click",value:1,title:"点击"},SHAKE:{name:"shake",value:2,title:"摇一摇"}},t={SHOW:{name:"show",value:1},HIDE:{name:"hide",value:2},RANDOMEVENT:{name:"randomEvent",value:3}};this.getSendType=function(t){if(void 0===t)return e;for(var i in e)if(t===e[i].value)return e[i];return null},this.getHandleType=function(e){if(void 0===e)return t;for(var i in t)if(e===t[i].value)return t[i];return null}}e.utilTrigger=new t}(window),function(e,t){function i(){var e,i,n,a=[];t("#media");this.addAudio=function(e,s){var o=new Audio;o.src=s,a.push({elem:e,audio:o}),t(o).bind("ended",function(){i=!1,n()})},this.play=function(t,s,o){var r;n=s;for(var l=0;l<a.length;l++)a[l].elem==t&&(r=a[l].audio);e==r&&i?(r.pause(),i=!1,s()):e!=r||i?(e&&e.pause(),r.currentTime=0,r.play(),o(),i=!0,e=r):(r.play(),i=!0,o())},this.pause=function(){e&&(e.pause(),i=!1)}}e.utilSound=new i}(window,$),function(e){function t(){var e={"Allura-Regular":{value:1,familyName:"Allura-Regular",fontFamilyName:"Allura-Regular",src:"assets/images/fonts/Allura-Regular.png",blueSrc:"assets/images/fonts/Allura-Regular_blue.png"},"Amaranth-Regular":{value:2,familyName:"Amaranth-Regular",fontFamilyName:"Amaranth-Regular",src:"assets/images/fonts/Amaranth-Regular.png",blueSrc:"assets/images/fonts/Amaranth-Regular_blue.png"},"Anton-Regular":{value:3,familyName:"Anton-Regular",fontFamilyName:"Anton-Regular",src:"assets/images/fonts/Anton-Regular.png",blueSrc:"assets/images/fonts/Anton-Regular_blue.png"},"Arial-Regular":{value:4,familyName:"Arial-Regular",fontFamilyName:"Arial-Regular",src:"assets/images/fonts/Arial-Regular.png",blueSrc:"assets/images/fonts/Arial-Regular_blue.png"},"Arialnarrow-Regular":{value:5,familyName:"Arialnarrow-Regular",fontFamilyName:"Arialnarrow-Regular",src:"assets/images/fonts/Arialnarrow-Regular.png",blueSrc:"assets/images/fonts/Arialnarrow-Regular_blue.png"},"Arialroundedmtbold-Regular":{value:6,familyName:"Arialroundedmtbold-Regular",fontFamilyName:"Arialroundedmtbold-Regular",src:"assets/images/fonts/Arialroundedmtbold-Regular.png",blueSrc:"assets/images/fonts/Arialroundedmtbold-Regular_blue.png"},"Banglasangammn-Regular":{value:7,familyName:"Banglasangammn-Regular",fontFamilyName:"Banglasangammn-Regular",src:"assets/images/fonts/Banglasangammn-Regular.png",blueSrc:"assets/images/fonts/Banglasangammn-Regular_blue.png"},"Blackopsone-Regular":{value:8,familyName:"Blackopsone-Regular",fontFamilyName:"Blackopsone-Regular",src:"assets/images/fonts/Blackopsone-Regular.png",blueSrc:"assets/images/fonts/Blackopsone-Regular_blue.png"},"Bradleyhand-Bold":{value:9,familyName:"Bradleyhand-Bold",fontFamilyName:"Bradleyhand-Bold",src:"assets/images/fonts/Bradleyhand-Bold.png",blueSrc:"assets/images/fonts/Bradleyhand-Bold_blue.png"},"Cabinsketch-Bold":{value:10,familyName:"Cabinsketch-Bold",fontFamilyName:"Cabinsketch-Bold",src:"assets/images/fonts/Cabinsketch-Bold.png",blueSrc:"assets/images/fonts/Cabinsketch-Bold_blue.png"},simsun:{value:11,familyName:"宋体",fontFamilyName:"simsun",src:"assets/images/fonts/songti.png",blueSrc:"assets/images/fonts/songti_blue.png"},simsun:{value:12,familyName:"宋体",fontFamilyName:"simsun",src:"assets/images/fonts/songti.png",blueSrc:"assets/images/fonts/songti_blue.png"},weiruanyahei:{value:12,familyName:"微软雅黑",fontFamilyName:"weiruanyahei",src:"assets/images/fonts/weiruanyahei.png",blueSrc:"assets/images/fonts/weiruanyahei_blue.png"},mnjbwks:{value:13,familyName:"迷你简笔魏楷书",fontFamilyName:"mnjbwks",src:"assets/images/fonts/mnjbwks.png",blueSrc:"assets/images/fonts/mnjbwks_blue.png"},hzgb:{value:17,familyName:"汉真广标",fontFamilyName:"hzgb",src:"assets/images/fonts/hzgb.png",blueSrc:"assets/images/fonts/hzgb_blue.png"},changyi:{value:18,familyName:"迷你简长艺",fontFamilyName:"changyi",src:"assets/images/fonts/changyi.png",blueSrc:"assets/images/fonts/changyi_blue.png"}};this.getFontName=function(t){if(void 0===t)return e;for(var i in e)if(t===i)return e[i];return null};var t;this.setUserType=function(e){t=e},this.getUserType=function(){return t}}e.utilFont=new t}(window),window.flux={version:"1.4.4"},function(e){flux.slider=function(t,i){flux.browser.init(),flux.browser.supportsTransitions||window.console&&window.console.error&&console.error("Flux Slider requires a browser that supports CSS3 transitions");var n=this;this.element=e(t),this.transitions=[];for(var a in flux.transitions)this.transitions.push(a);this.options=e.extend({autoplay:!0,transitions:this.transitions,delay:4e3,pagination:!0,controls:!1,captions:!1,width:null,height:null,onTransitionEnd:null,onStartEnd:null,bgColor:""},i),this.height=this.options.height?this.options.height:null,this.width=this.options.width?this.options.width:null;var s=[];e(this.options.transitions).each(function(e,t){var i=new flux.transitions[t](this),n=!0;i.options.requires3d&&!flux.browser.supports3d&&(n=!1),i.options.compatibilityCheck&&(n=i.options.compatibilityCheck()),n&&s.push(t)}),this.options.transitions=s,this.images=new Array,this.imageLoadedCount=0,this.currentImageIndex=0,this.nextImageIndex=1,this.playing=!1,this.container=e('<div class="fluxslider"></div>').appendTo(this.element),this.surface=e('<div class="surface" style="position: relative"></div>').appendTo(this.container),this.container.bind("click",function(t){e(t.target).hasClass("hasLink")&&(window.location=e(t.target).data("href"))}),this.imageContainer=e('<div class="images loading1"></div>').css({position:"relative",overflow:"hidden"}).appendTo(this.surface),this.width&&this.height&&this.imageContainer.css({width:this.width+"px",height:this.height+"px"}),this.image1=e('<div class="image1" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),this.image2=e('<div class="image2" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),e(this.image1).add(this.image2).css({position:"absolute",top:"0px",left:"0px"}),this.element.find("img, a img").each(function(t,i){var a=i.cloneNode(!1),s=e(i).parent();s.is("a")&&e(a).data("href",s.attr("href")),n.images.push(a),e(i).remove()});for(var o=0;o<this.images.length;o++){var r=new Image;r.onload=function(){n.imageLoadedCount++,n.width=n.width?n.width:this.width,n.height=n.height?n.height:this.height,n.imageLoadedCount>=n.images.length&&(n.finishedLoading(),n.setupImages())},r.src=this.images[o].src}this.element.bind("fluxTransitionEnd",function(e,t){n.options.onTransitionEnd&&(e.preventDefault(),n.options.onTransitionEnd(t))}),this.options.autoplay&&this.start();var l={},c={},d=20;this.element.bind("mousedown touchstart",function(e){"touchstart"==e.type?l.left=e.originalEvent.touches[0].pageX:"mousedown"==e.type&&(l.left=e.pageX)}).bind("mouseup touchend",function(e){"touchend"==e.type?c.left=e.originalEvent.changedTouches[0].pageX:"mouseup"==e.type&&(c.left=e.pageX),c.left-l.left>d?n.prev(null,{direction:"right"}):l.left-c.left>d&&n.next(null,{direction:"left"}),n.options.autoplay&&(n.stop(),n.start())}),setTimeout(function(){e(window).focus(function(){n.isPlaying()&&n.next()})},100)},flux.slider.prototype={constructor:flux.slider,playing:!1,start:function(){var e=this;this.playing=!0,this.interval=setInterval(function(){e.transition()},this.options.delay),"function"==typeof this.options.onStartEnd&&this.options.onStartEnd(this.interval)},stop:function(){this.playing=!1,clearInterval(this.interval),this.interval=null},isPlaying:function(){return this.playing},next:function(e,t){t=t||{},t.direction="left",this.showImage(this.currentImageIndex+1,e,t)},prev:function(e,t){t=t||{},t.direction="right",this.showImage(this.currentImageIndex-1,e,t)},showImage:function(e,t,i){this.setNextIndex(e),this.setupImages(),this.transition(t,i)},finishedLoading:function(){var t=this;if(this.container.css({width:this.width+"px",height:this.height+"px"}),this.imageContainer.removeClass("loading1"),this.options.pagination&&(this.pagination=e('<ul class="pagination"></ul>').css({margin:"0px",padding:"0px","text-align":"center"}),this.pagination.bind("click",function(i){i.preventDefault(),t.showImage(e(i.target).data("index"))}),e(this.images).each(function(i,n){var a=e('<li data-index="'+i+'">'+(i+1)+"</li>").css({display:"inline-block","margin-left":"0.5em",cursor:"pointer"}).appendTo(t.pagination);0==i&&a.css("margin-left",0).addClass("current")}),this.container.append(this.pagination)),e(this.imageContainer).css({width:this.width+"px",height:this.height+"px"}),e(this.image1).css({width:this.width+"px",height:this.height+"px"}),e(this.image2).css({width:this.width+"px",height:this.height+"px"}),this.container.css({width:this.width+"px",height:this.height+(this.options.pagination?this.pagination.height():0)+"px"}),this.options.controls){var i={padding:"4px 10px 10px","font-size":"60px","font-family":"arial, sans-serif","line-height":"1em","font-weight":"bold",color:"#FFF","text-decoration":"none",background:"rgba(0,0,0,0.5)",position:"absolute","z-index":2e3};this.nextButton=e('<a href="#">»</a>').css(i).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.next()}),this.prevButton=e('<a href="#">«</a>').css(i).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.prev()});var n=(this.height-this.nextButton.height())/2;this.nextButton.css({top:n+"px",right:"10px"}),this.prevButton.css({top:n+"px",left:"10px"})}this.options.captions&&(this.captionBar=e('<div class="caption"></div>').css({background:"rgba(0,0,0,0.6)",color:"#FFF","font-size":"16px","font-family":"helvetica, arial, sans-serif","text-decoration":"none","font-weight":"bold",padding:"1.5em 1em",opacity:0,position:"absolute","z-index":110,width:"100%",bottom:0}).css3({"transition-property":"opacity","transition-duration":"800ms","box-sizing":"border-box"}).prependTo(this.surface)),this.updateCaption()},setupImages:function(){var t=this.getImage(this.currentImageIndex),i={background:'url("'+t.src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:101,cursor:"auto"};e(t).data("href")?(i.cursor="pointer",this.image1.addClass("hasLink"),this.image1.data("href",e(t).data("href"))):(this.image1.removeClass("hasLink"),this.image1.data("href",null)),this.image1.css(i).children().remove(),this.image2.css({background:'url("'+this.getImage(this.nextImageIndex).src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:100,display:"none"}),this.options.pagination&&this.pagination&&(this.pagination.find("li.current").removeClass("current"),e(this.pagination.find("li")[this.currentImageIndex]).addClass("current"))},transition:function(t,i){if(void 0==t||!flux.transitions[t]){var n=Math.floor(Math.random()*this.options.transitions.length);t=this.options.transitions[n]}var a=null;try{a=new flux.transitions[t](this,e.extend(this.options[t]?this.options[t]:{},i))}catch(s){a=new flux.transition(this,{fallback:!0})}a.run(),this.currentImageIndex=this.nextImageIndex,this.setNextIndex(this.currentImageIndex+1),this.updateCaption()},updateCaption:function(){var t=e(this.getImage(this.currentImageIndex)).attr("title");this.options.captions&&this.captionBar&&(""!==t&&this.captionBar.html(t),this.captionBar.css("opacity",""===t?0:1))},getImage:function(e){return e%=this.images.length,this.images[e]},setNextIndex:function(e){void 0==e&&(e=this.currentImageIndex+1),this.nextImageIndex=e,this.nextImageIndex>this.images.length-1&&(this.nextImageIndex=0),this.nextImageIndex<0&&(this.nextImageIndex=this.images.length-1)},increment:function(){this.currentImageIndex++,this.currentImageIndex>this.images.length-1&&(this.currentImageIndex=0)}}}(window.jQuery||window.Zepto),function(e){flux.browser={init:function(){if(void 0===flux.browser.supportsTransitions){var t=(document.createElement("div"),["-webkit","-moz","-o","-ms"]);if(window.Modernizr&&void 0!==Modernizr.csstransitions?flux.browser.supportsTransitions=Modernizr.csstransitions:flux.browser.supportsTransitions=this.supportsCSSProperty("Transition"),window.Modernizr&&void 0!==Modernizr.csstransforms3d)flux.browser.supports3d=Modernizr.csstransforms3d;else if(flux.browser.supports3d=this.supportsCSSProperty("Perspective"),flux.browser.supports3d&&"webkitPerspective"in e("body").get(0).style){var i=e('<div id="csstransform3d"></div>'),n=e('<style media="(transform-3d), ('+t.join("-transform-3d),(")+'-transform-3d)">div#csstransform3d { position: absolute; left: 9px }</style>');e("body").append(i),e("head").append(n),flux.browser.supports3d=9==i.get(0).offsetLeft,i.remove(),n.remove()}}},supportsCSSProperty:function(e){for(var t=document.createElement("div"),i=["Webkit","Moz","O","Ms"],n=!1,a=0;a<i.length;a++)i[a]+e in t.style&&(n=n||!0);return n},translate:function(e,t,i){return e=void 0!=e?e:0,t=void 0!=t?t:0,i=void 0!=i?i:0,"translate"+(flux.browser.supports3d?"3d(":"(")+e+"px,"+t+(flux.browser.supports3d?"px,"+i+"px)":"px)")},rotateX:function(e){return flux.browser.rotate("x",e)},rotateY:function(e){return flux.browser.rotate("y",e)},rotateZ:function(e){return flux.browser.rotate("z",e)},rotate:function(e,t){return!e in{x:"",y:"",z:""}&&(e="z"),t=void 0!=t?t:0,flux.browser.supports3d?"rotate3d("+("x"==e?"1":"0")+", "+("y"==e?"1":"0")+", "+("z"==e?"1":"0")+", "+t+"deg)":"z"==e?"rotate("+t+"deg)":""}},e(function(){flux.browser.init()})}(window.jQuery||window.Zepto),function(e){e.fn.css3=function(e){var t={},i=["webkit","moz","ms","o"];for(var n in e){for(var a=0;a<i.length;a++)t["-"+i[a]+"-"+n]=e[n];t[n]=e[n]}return this.css(t),this},e.fn.transitionEnd=function(t){for(var i=["webkitTransitionEnd","transitionend","oTransitionEnd"],n=0;n<i.length;n++)this.bind(i[n],function(n){for(var a=0;a<i.length;a++)e(this).unbind(i[a]);t&&t.call(this,n)});return this},flux.transition=function(t,i){if(this.options=e.extend({requires3d:!1,after:function(){}},i),this.slider=t,this.options.requires3d&&!flux.browser.supports3d||!flux.browser.supportsTransitions||this.options.fallback===!0){var n=this;this.options.after=void 0,this.options.setup=function(){n.fallbackSetup()},this.options.execute=function(){n.fallbackExecute()}}},flux.transition.prototype={constructor:flux.transition,hasFinished:!1,run:function(){
var e=this;void 0!==this.options.setup&&this.options.setup.call(this),this.slider.image1.css({"background-image":"none"}),this.slider.imageContainer.css("overflow",this.options.requires3d?"visible":"hidden"),setTimeout(function(){void 0!==e.options.execute&&e.slider.image1.css("background-color",""),e.options.execute.call(e)},5)},finished:function(){this.hasFinished||(this.hasFinished=!0,this.options.after&&this.options.after.call(this),this.slider.imageContainer.css("overflow","hidden"),this.slider.setupImages(),this.slider.element.trigger("fluxTransitionEnd",{currentImage:this.slider.getImage(this.slider.currentImageIndex)}))},fallbackSetup:function(){},fallbackExecute:function(){this.finished()}},flux.transitions={},flux.transition_grid=function(t,i){return new flux.transition(t,e.extend({columns:6,rows:6,forceSquare:!1,setup:function(){var t=this.slider.image1.width(),i=this.slider.image1.height(),n=Math.floor(t/this.options.columns),a=Math.floor(i/this.options.rows);this.options.forceSquare&&(a=n,this.options.rows=Math.floor(i/a));for(var s=t-this.options.columns*n,o=Math.ceil(s/this.options.columns),r=i-this.options.rows*a,l=Math.ceil(r/this.options.rows),c=(this.slider.image1.height(),0),d=0,p=document.createDocumentFragment(),u=0;u<this.options.columns;u++){var h=n,d=0;if(s>0){var g=s>=o?o:s;h+=g,s-=g}for(var m=0;m<this.options.rows;m++){var f=a,v=r;if(v>0){var g=v>=l?l:v;f+=g,v-=g}var b=e('<div class="tile tile-'+u+"-"+m+'"></div>').css({width:h+"px",height:f+"px",position:"absolute",top:d+"px",left:c+"px"});this.options.renderTile.call(this,b,u,m,h,f,c,d),p.appendChild(b.get(0)),d+=f}c+=h}this.slider.image1.get(0).appendChild(p)},execute:function(){var e=this,t=this.slider.image1.height(),i=this.slider.image1.find("div.barcontainer");this.slider.image2.hide(),i.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),i.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},renderTile:function(e,t,i,n,a,s,o){}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars=function(t,i){return new flux.transition_grid(t,e.extend({columns:10,rows:1,delayBetweenBars:40,renderTile:function(t,i,n,a,s,o,r){e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px 0px"}).css3({"transition-duration":"400ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":i*this.options.delayBetweenBars+"ms"})},execute:function(){var t=this,i=this.slider.image1.height(),n=this.slider.image1.find("div.tile");e(n[n.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){n.css({opacity:"0.5"}).css3({transform:flux.browser.translate(0,i)})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars3d=function(t,i){return new flux.transition_grid(t,e.extend({requires3d:!0,columns:7,rows:1,delayBetweenBars:150,perspective:1e3,renderTile:function(t,i,n,a,s,o,r){var l=e('<div class="bar-'+i+'"></div>').css({width:a+"px",height:"100%",position:"absolute",top:"0px",left:"0px","z-index":200,background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px 0px","background-repeat":"no-repeat"}).css3({"backface-visibility":"hidden"}),c=e(l.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-s/2,s/2)}),d=e('<div class="side bar-'+i+'"></div>').css({width:s+"px",height:s+"px",position:"absolute",top:"0px",left:"0px",background:"#222","z-index":190}).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(s/2,0,-s/2)+" "+flux.browser.rotateY(180),"backface-visibility":"hidden"}),p=e(d.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(s/2,0,a-s/2)});e(t).css({width:a+"px",height:"100%",position:"absolute",top:"0px",left:o+"px","z-index":i>this.options.columns/2?1e3-i:1e3}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transition-delay":i*this.options.delayBetweenBars+"ms","transform-style":"preserve-3d"}).append(l).append(c).append(d).append(p)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var e=this,t=this.slider.image1.height(),i=this.slider.image1.find("div.tile");this.slider.image2.hide(),i.last().transitionEnd(function(t){e.slider.image1.css3({"transform-style":"flat"}),e.slider.image2.show(),e.finished()}),setTimeout(function(){i.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blinds=function(t,i){return new flux.transitions.bars(t,e.extend({execute:function(){var t=this,i=(this.slider.image1.height(),this.slider.image1.find("div.tile"));e(i[i.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){i.css({opacity:"0.5"}).css3({transform:"scalex(0.0001)"})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.zip=function(t,i){return new flux.transitions.bars(t,e.extend({execute:function(){var t=this,i=this.slider.image1.height(),n=this.slider.image1.find("div.tile");e(n[n.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0.3"}).css3({transform:flux.browser.translate(0,t%2?"-"+2*i:i)})})},20)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks=function(t,i){return new flux.transition_grid(t,e.extend({forceSquare:!0,delayBetweenBars:100,renderTile:function(t,i,n,a,s,o,r){var l=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px"}).css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":l+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),l>this.maxDelay&&(this.maxDelay=l,this.maxDelayTile=t)},execute:function(){var t=this,i=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.finished()}),setTimeout(function(){i.each(function(t,i){e(i).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks2=function(t,i){return new flux.transition_grid(t,e.extend({cols:12,forceSquare:!0,delayBetweenDiagnols:150,renderTile:function(t,i,n,a,s,o,r){Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px"}).css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":(i+n)*this.options.delayBetweenDiagnols+"ms","backface-visibility":"hidden"})},execute:function(){var t=this,i=this.slider.image1.find("div.tile");i.last().transitionEnd(function(){t.finished()}),setTimeout(function(){i.each(function(t,i){e(i).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.cube=function(t,i){return new flux.transition(t,e.extend({requires3d:!0,barWidth:100,direction:"left",perspective:1e3,setup:function(){var t=this.slider.image1.width(),i=this.slider.image1.height();this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}),this.cubeContainer=e('<div class="cube"></div>').css({width:t+"px",height:i+"px",position:"relative"}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transform-style":"preserve-3d"});var n={height:"100%",width:"100%",position:"absolute",top:"0px",left:"0px"},a=e('<div class="face current"></div>').css(e.extend(n,{background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px"})).css3({"backface-visibility":"hidden"});this.cubeContainer.append(a);var s=e('<div class="face next"></div>').css(e.extend(n,{background:this.slider.image2.css("background-image")})).css3({transform:this.options.transitionStrings.call(this,this.options.direction,"nextFace"),"backface-visibility":"hidden"});this.cubeContainer.append(s),this.slider.image1.append(this.cubeContainer)},execute:function(){var e=this;this.slider.image1.width(),this.slider.image1.height();this.slider.image2.hide(),this.cubeContainer.transitionEnd(function(){e.slider.image2.show(),e.finished()}),setTimeout(function(){e.cubeContainer.css3({transform:e.options.transitionStrings.call(e,e.options.direction,"container")})},50)},transitionStrings:function(e,t){var i=this.slider.image1.width(),n=this.slider.image1.height(),a={up:{nextFace:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,n/2,n/2),container:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-n/2,n/2)},down:{nextFace:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-n/2,n/2),container:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,n/2,n/2)},left:{nextFace:flux.browser.rotateY(90)+" "+flux.browser.translate(i/2,0,i/2),container:flux.browser.rotateY(-90)+" "+flux.browser.translate(-i/2,0,i/2)},right:{nextFace:flux.browser.rotateY(-90)+" "+flux.browser.translate(-i/2,0,i/2),container:flux.browser.rotateY(90)+" "+flux.browser.translate(i/2,0,i/2)}};return!(!a[e]||!a[e][t])&&a[e][t]}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.tiles3d=function(t,i){return new flux.transition_grid(t,e.extend({requires3d:!0,forceSquare:!0,columns:5,perspective:600,delayBetweenBarsX:200,delayBetweenBarsY:150,renderTile:function(t,i,n,a,s,o,r){var l=e("<div></div>").css({width:a+"px",height:s+"px",position:"absolute",top:"0px",left:"0px",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px","background-repeat":"no-repeat","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),c=e(l.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});e(t).css({"z-index":(i>this.options.columns/2?500-i:500)+(n>this.options.rows/2?500-n:500)}).css3({"transition-duration":"800ms","transition-timing-function":"ease-out","transition-property":"all","transition-delay":i*this.options.delayBetweenBarsX+n*this.options.delayBetweenBarsY+"ms","transform-style":"preserve-3d"}).append(l).append(c)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"});var e=this,t=this.slider.image1.find("div.tile");this.slider.image2.hide(),t.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),setTimeout(function(){t.css3({transform:flux.browser.rotateY(180)})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.turn=function(t,i){return new flux.transition(t,e.extend({requires3d:!0,perspective:1300,direction:"left",setup:function(){var t=e('<div class="tab"></div>').css({width:"50%",height:"100%",position:"absolute",top:"0px",left:"left"==this.options.direction?"50%":"0%","z-index":101}).css3({"transform-style":"preserve-3d","transition-duration":"1000ms","transition-timing-function":"ease-out","transition-property":"all","transform-origin":"left"==this.options.direction?"left center":"right center"}),i=(e("<div></div>").appendTo(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?"-"+this.slider.image1.width()/2:0)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),e("<div></div>").appendTo(t).css({background:this.slider.image2.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"}),e("<div></div>").css({position:"absolute",top:"0",left:"left"==this.options.direction?"0":"50%",width:"50%",height:"100%",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0","z-index":100})),n=e('<div class="overlay"></div>').css({position:"absolute",top:"0",left:"left"==this.options.direction?"50%":"0",width:"50%",height:"100%",background:"#000",opacity:1}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"opacity"}),a=e("<div></div>").css3({width:"100%",height:"100%"}).css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).append(t).append(i).append(n);this.slider.image1.append(a)},execute:function(){var e=this;this.slider.image1.find("div.tab").first().transitionEnd(function(){e.finished()}),setTimeout(function(){e.slider.image1.find("div.tab").css3({transform:flux.browser.rotateY("left"==e.options.direction?-179:179)}),e.slider.image1.find("div.overlay").css({opacity:0})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.slide=function(t,i){return new flux.transition(t,e.extend({direction:"left",setup:function(){var t=this.slider.image1.width(),i=this.slider.image1.height(),n=e('<div class="current"></div>').css({height:i+"px",width:t+"px",position:"absolute",top:"0px",left:"0px",background:this.slider["left"==this.options.direction?"image1":"image2"].css("background")}).css3({"backface-visibility":"hidden"}),a=e('<div class="next"></div>').css({height:i+"px",width:t+"px",position:"absolute",top:"0px",left:t+"px",background:this.slider["left"==this.options.direction?"image2":"image1"].css("background")}).css3({"backface-visibility":"hidden"});this.slideContainer=e('<div class="slide"></div>').css({width:2*t+"px",height:i+"px",position:"relative",left:"left"==this.options.direction?"0px":-t+"px","z-index":101}).css3({"transition-duration":"600ms","transition-timing-function":"ease-in","transition-property":"all"}),this.slideContainer.append(n).append(a),this.slider.image1.append(this.slideContainer)},execute:function(){var e=this,t=this.slider.image1.width();"left"==this.options.direction&&(t=-t),this.slideContainer.transitionEnd(function(){e.finished()}),setTimeout(function(){e.slideContainer.css3({transform:flux.browser.translate(t)})},50)}},i))}}(window.jQuery||window.Zepto),function(e){flux.transitions.explode=function(t,i){return new flux.transition_grid(t,e.extend({columns:6,forceSquare:!0,delayBetweenBars:30,perspective:800,requires3d:!0,renderTile:function(t,i,n,a,s,o,r){var l=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px"}).css3({"transition-duration":"500ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":l+"ms"}),void 0===this.maxDelay&&(this.maxDelay=0),l>this.maxDelay&&(this.maxDelay=l,this.maxDelayTile=t)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var t=this,i=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.slider.image1.css3({"transform-style":"flat"}),t.finished()}),setTimeout(function(){i.each(function(t,i){e(i).css({opacity:"0"}).css3({transform:flux.browser.translate(0,0,700)+" rotate3d("+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", 90deg) "})})},50)}},i))}}(window.jQuery||window.Zepto),function(e,t){function i(e){function t(e,t,i){return e[t]||(e[t]=i())}var i=t(e,"eqShow",Object);return t(i,"templateParser",function(){var e={};return function(i,n){if("hasOwnProperty"===i)throw new Error("hasOwnProperty is not a valid name");return n&&e.hasOwnProperty(i)&&(e[i]=null),t(e,i,n)}})}function n(t){templateParser=i(e)}var a=e.eqShow||(e.eqShow={});n(a)}(window,document);var eqxPSDDecompose=function(){function e(i){if(i.childless())"layer"===i.type&&0!==i.width&&0!==i.height&&t.push(i);else for(var n=i.children().length-1;n>-1;n--)i.children()[n].visible()===!0&&e(i.children()[n])}var t=[],i=function(i){var n=$.Deferred(),a=require("psd");return t=[],a.fromDroppedFile(i).then(function(i){e(i.tree()),$.each(t,function(e,t){t.layer.adjustWidth=t.layer.width,t.layer.adjustHeight=t.layer.height}),n.resolve(t)}),n.promise()},n=function(i,n,a){var s=$.Deferred(),o=require("psd");return t=[],o.fromDroppedFile(i).then(function(i){var o=n/i.image.width(),r=a/i.image.height(),l=null;l=o<r?o:r,e(i.tree()),$.each(t,function(e,t){t.layer.top=t.layer.top*l,t.layer.left=t.layer.left*l,t.layer.adjustWidth=t.layer.width*l,t.layer.adjustHeight=t.layer.height*l}),s.resolve(t)}),s.promise()};return{decompose:i,decomposeBySize:n}}();!function(){var e=!0,t=!0;eqShow.playVideo=function(i){if(i&&i.bgAudio){if(!i.bgAudio.url&&!i.bgAudio.src)return;var n=$("#media"),a=$("#audio_btn"),s="";i.bgAudio.url?s=0===i.bgAudio.url.indexOf("http://")?i.bgAudio.url:PREFIX_FILE_HOST+i.bgAudio.url:!i.bgAudio.url&&i.bgAudio.src&&(s=0===i.bgAudio.src.indexOf("http://")?i.bgAudio.src:PREFIX_FILE_HOST+i.bgAudio.src),n.attr("src",s),a.addClass("video_exist"),n.bind("canplay",function(){n.get(0).play()}).bind("play",function(){a.addClass("rotate")}).bind("pause",function(e){a.removeClass("rotate")});var o=mobilecheck()?"touchend":"click";$("#audio_btn").show().on(o,function(t){t.cancelBubble=!0,t.stopPropagation(),$(this).hasClass("rotate")?(e=!1,n.get(0).pause()):(n.get(0).play(),e=!0,utilSound.pause())})}$("#nr #page1").on("mousedown touchstart",function(){if(mobilecheck()&&!isWeixin()&&t){var e=$("#nr .z-current .m-img"),i=parseInt(e.attr("id").substring(4),10);t&&1===i&&window.completeEffect(e)&&(t=!1,window.scene.bgAudio&&$("#media").get(0).play())}})},eqShow.executePlay=function(){e&&$("#media").get(0).play()},eqShow.executePause=function(){e&&$("#media").get(0).pause()}}(),function(){window.eqxiuSvg={NAMESPACE:"http://www.w3.org/2000/svg",SYMBOLS:{},boundingBox:function(e){var t,i=e.parentNode,n=document.createElementNS(eqxiuSvg.NAMESPACE,"svg");return n.setAttribute("width","0"),n.setAttribute("height","0"),n.setAttribute("style","visibility: hidden; position: absolute; left: 0; top: 0;"),n.appendChild(e),document.body.appendChild(n),t=e.getBBox(),i?i.appendChild(e):n.removeChild(e),document.body.removeChild(n),t},pointsToPolygon:function(e){for(var t=[];e.length>=2;)t.push(e.shift()+","+e.shift());return t.join(" ")},symbol:function(e,t,i){var n=i?i:"#555",a=eqxiuSvg.SYMBOLS[e],s='<g fill="'+n+'" id="path_'+t+'">'+a+"</g>";return s},ShapeFromType:function(e,t,i,n,a){return t||(t=64),i||(i=64),/symbols\-/.test(e)?eqxiuSvg.symbol(e.replace(/^symbols\-/,""),n,a):"rect"==e?eqxiuSvg.rect(t,i):"circle"==e?eqxiuSvg.ellipse(t,i):"diamond"==e?eqxiuSvg.polygon(t,i,4):"octagon"==e?eqxiuSvg.polygon(t,i,8):"triangle-up"==e?eqxiuSvg.triangleUp(t,i):"triangle-down"==e?eqxiuSvg.triangleDown(t,i):"triangle-left"==e?eqxiuSvg.triangleLeft(t,i):"triangle-right"==e?eqxiuSvg.triangleRight(t,i):"arrow-up"==e?eqxiuSvg.arrowUp(t,i):"arrow-down"==e?eqxiuSvg.arrowDown(t,i):"arrow-left"==e?eqxiuSvg.arrowLeft(t,i):"arrow-right"==e?eqxiuSvg.arrowRight(t,i):void 0},rect:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"rect");return i.setAttribute("width",e),i.setAttribute("height",t),i},ellipse:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"ellipse");return i.setAttribute("rx",e/2),i.setAttribute("ry",t/2),i.setAttribute("cx",e/2),i.setAttribute("cy",t/2),i},triangleUp:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([e/2,0,e,t,0,t])),i},triangleDown:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([0,0,e,0,e/2,t])),i},triangleLeft:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([0,t/2,e,0,e,t])),i},triangleRight:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([e,t/2,0,t,0,0])),i},arrowUp:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([.5*e,0,e,.5*t,.7*e,.5*t,.7*e,t,.3*e,t,.3*e,.5*t,0,.5*t,.5*e,0])),i},arrowDown:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([.5*e,t,e,.5*t,.7*e,.5*t,.7*e,0,.3*e,0,.3*e,.5*t,0,.5*t,.5*e,t])),i},arrowLeft:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([e,.3*t,.5*e,.3*t,.5*e,0,0,.5*t,.5*e,t,.5*e,.7*t,e,.7*t,e,.3*t])),i},arrowRight:function(e,t){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return i.setAttribute("points",eqxiuSvg.pointsToPolygon([0,.3*t,.5*e,.3*t,.5*e,0,e,.5*t,.5*e,t,.5*e,.7*t,0,.7*t])),i},polygon:function(e,t,i){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon"),a=[];if(3===i)a=[e/2,0,e,t,0,t];else if(i>3)for(var s=e/2,o=t/2,r=0;i>r;r++){var l=s+s*Math.cos(2*Math.PI*r/i),c=o+o*Math.sin(2*Math.PI*r/i);l=Math.round(10*l)/10,c=Math.round(10*c)/10,a.push(l),a.push(c)}return n.setAttribute("points",eqxiuSvg.pointsToPolygon(a)),n}}}(),function(){window.eqxiuSvg.SYMBOLS={bolt:'<path d="M32 0l-24 16 6 4-14 12 24-12-6-4z"></path>',camera:'<path d="M16 20c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4-2.209 0-4-1.791-4-4zM28 8l-3.289-6.643c-0.27-0.789-1.016-1.357-1.899-1.357h-5.492c-0.893 0-1.646 0.582-1.904 1.385l-3.412 6.615h-8.004c-2.209 0-4 1.791-4 4v20h32v-20c0-2.209-1.789-4-4-4zM6 16c-1.105 0-2-0.895-2-2s0.895-2 2-2 2 0.895 2 2-0.895 2-2 2zM20 28c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z"></path>',"checkmark-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM13.52 23.383l-7.362-7.363 2.828-2.828 4.533 4.535 9.617-9.617 2.828 2.828-12.444 12.445z"></path>',clock:'<path d="M16 4c6.617 0 12 5.383 12 12s-5.383 12-12 12-12-5.383-12-12 5.383-12 12-12zM16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16v0zM21.422 18.578l-3.422-3.426v-7.152h-4.023v7.992c0 0.602 0.277 1.121 0.695 1.492l3.922 3.922 2.828-2.828z"></path>',cloud:'<path d="M24 10c-0.379 0-0.738 0.061-1.102 0.111-1.394-2.465-3.972-4.111-6.898-4.111-2.988 0-5.566 1.666-6.941 4.1-0.352-0.047-0.704-0.1-1.059-0.1-4.41 0-8 3.588-8 8 0 4.414 3.59 8 8 8h16c4.41 0 8-3.586 8-8 0-4.412-3.59-8-8-8zM24 22h-16c-2.207 0-4-1.797-4-4 0-2.193 1.941-3.885 4.004-3.945 0.008 0.943 0.172 1.869 0.5 2.744l3.746-1.402c-0.168-0.444-0.25-0.915-0.25-1.397 0-2.205 1.793-4 4-4 1.293 0 2.465 0.641 3.199 1.639-1.929 1.461-3.199 3.756-3.199 6.361h4c0-2.205 1.793-4 4-4s4 1.795 4 4c0 2.203-1.793 4-4 4z"></path>',cog:'<path d="M32 17.969v-4l-4.781-1.992c-0.133-0.375-0.273-0.738-0.445-1.094l1.93-4.805-2.829-2.828-4.762 1.961c-0.363-0.176-0.734-0.324-1.117-0.461l-2.027-4.75h-4l-1.977 4.734c-0.398 0.141-0.781 0.289-1.16 0.469l-4.754-1.91-2.828 2.828 1.938 4.711c-0.188 0.387-0.34 0.781-0.485 1.188l-4.703 2.011v4l4.707 1.961c0.145 0.406 0.301 0.801 0.488 1.188l-1.902 4.742 2.828 2.828 4.723-1.945c0.379 0.18 0.766 0.324 1.164 0.461l2.023 4.734h4l1.98-4.758c0.379-0.141 0.754-0.289 1.113-0.461l4.797 1.922 2.828-2.828-1.969-4.773c0.168-0.359 0.305-0.723 0.438-1.094l4.782-2.039zM15.969 22c-3.312 0-6-2.688-6-6s2.688-6 6-6 6 2.688 6 6-2.688 6-6 6z"></path>',denied:'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM16 4c2.59 0 4.973 0.844 6.934 2.242l-16.696 16.688c-1.398-1.961-2.238-4.344-2.238-6.93 0-6.617 5.383-12 12-12zM16 28c-2.59 0-4.973-0.844-6.934-2.242l16.696-16.688c1.398 1.961 2.238 4.344 2.238 6.93 0 6.617-5.383 12-12 12z"></path>',earth:'<path d="M27.314 4.686c3.022 3.022 4.686 7.040 4.686 11.314s-1.664 8.292-4.686 11.314c-3.022 3.022-7.040 4.686-11.314 4.686s-8.292-1.664-11.314-4.686c-3.022-3.022-4.686-7.040-4.686-11.314s1.664-8.292 4.686-11.314c3.022-3.022 7.040-4.686 11.314-4.686s8.292 1.664 11.314 4.686zM25.899 25.9c1.971-1.971 3.281-4.425 3.821-7.096-0.421 0.62-0.824 0.85-1.073-0.538-0.257-2.262-2.335-0.817-3.641-1.621-1.375 0.927-4.466-1.802-3.941 1.276 0.81 1.388 4.375-1.858 2.598 1.079-1.134 2.050-4.145 6.592-3.753 8.946 0.049 3.43-3.504 0.715-4.729-0.422-0.824-2.279-0.281-6.262-2.434-7.378-2.338-0.102-4.344-0.314-5.25-2.927-0.545-1.87 0.58-4.653 2.584-5.083 2.933-1.843 3.98 2.158 6.731 2.232 0.854-0.894 3.182-1.178 3.375-2.18-1.805-0.318 2.29-1.517-0.173-2.199-1.358 0.16-2.234 1.409-1.512 2.467-2.632 0.614-2.717-3.809-5.247-2.414-0.064 2.206-4.132 0.715-1.407 0.268 0.936-0.409-1.527-1.594-0.196-1.379 0.654-0.036 2.854-0.807 2.259-1.325 1.225-0.761 2.255 1.822 3.454-0.059 0.866-1.446-0.363-1.713-1.448-0.98-0.612-0.685 1.080-2.165 2.573-2.804 0.497-0.213 0.973-0.329 1.336-0.296 0.752 0.868 2.142 1.019 2.215-0.104-1.862-0.892-3.915-1.363-6.040-1.363-3.051 0-5.952 0.969-8.353 2.762 0.645 0.296 1.012 0.664 0.39 1.134-0.483 1.439-2.443 3.371-4.163 3.098-0.893 1.54-1.482 3.238-1.733 5.017 1.441 0.477 1.773 1.42 1.464 1.736-0.734 0.64-1.185 1.548-1.418 2.541 0.469 2.87 1.818 5.515 3.915 7.612 2.644 2.644 6.16 4.1 9.899 4.1s7.255-1.456 9.899-4.1z"></path>',eye:'<path d="M16 4c-8.836 0-16 11.844-16 11.844s7.164 12.156 16 12.156 16-12.156 16-12.156-7.164-11.844-16-11.844zM16 24c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8zM12 16c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4-2.209 0-4-1.791-4-4z"></path>',facebook:'<path d="M17.996 32h-5.996v-16h-4v-5.514l4-0.002-0.007-3.248c0-4.498 1.22-7.236 6.519-7.236h4.412v5.515h-2.757c-2.064 0-2.163 0.771-2.163 2.209l-0.008 2.76h4.959l-0.584 5.514-4.37 0.002-0.004 16z"></path>',fork:'<path d="M20 0v3.875c0 1.602-0.625 3.109-1.754 4.238l-11.316 11.254c-1.789 1.785-2.774 4.129-2.883 6.633h-4.047l6 6 6-6h-3.957c0.105-1.438 0.684-2.773 1.711-3.805l11.316-11.25c1.891-1.89 2.93-4.398 2.93-7.070v-3.875h-4zM23.953 26c-0.109-2.504-1.098-4.848-2.887-6.641l-2.23-2.215-2.836 2.821 2.242 2.23c1.031 1.027 1.609 2.367 1.715 3.805h-3.957l6 6 6-6h-4.047z"></path>',globe:'<path d="M15 2c-8.284 0-15 6.716-15 15s6.716 15 15 15c8.284 0 15-6.716 15-15s-6.716-15-15-15zM23.487 22c0.268-1.264 0.437-2.606 0.492-4h3.983c-0.104 1.381-0.426 2.722-0.959 4h-3.516zM6.513 12c-0.268 1.264-0.437 2.606-0.492 4h-3.983c0.104-1.381 0.426-2.722 0.959-4h3.516zM21.439 12c0.3 1.28 0.481 2.62 0.54 4h-5.979v-4h5.439zM16 10v-5.854c0.456 0.133 0.908 0.355 1.351 0.668 0.831 0.586 1.625 1.488 2.298 2.609 0.465 0.775 0.867 1.638 1.203 2.578h-4.852zM10.351 7.422c0.673-1.121 1.467-2.023 2.298-2.609 0.443-0.313 0.895-0.535 1.351-0.668v5.854h-4.852c0.336-0.94 0.738-1.803 1.203-2.578zM14 12v4h-5.979c0.059-1.38 0.24-2.72 0.54-4h5.439zM2.997 22c-0.533-1.278-0.854-2.619-0.959-4h3.983c0.055 1.394 0.224 2.736 0.492 4h-3.516zM8.021 18h5.979v4h-5.439c-0.3-1.28-0.481-2.62-0.54-4zM14 24v5.854c-0.456-0.133-0.908-0.355-1.351-0.668-0.831-0.586-1.625-1.488-2.298-2.609-0.465-0.775-0.867-1.638-1.203-2.578h4.852zM19.649 26.578c-0.673 1.121-1.467 2.023-2.298 2.609-0.443 0.312-0.895 0.535-1.351 0.668v-5.854h4.852c-0.336 0.94-0.738 1.802-1.203 2.578zM16 22v-4h5.979c-0.059 1.38-0.24 2.72-0.54 4h-5.439zM23.98 16c-0.055-1.394-0.224-2.736-0.492-4h3.516c0.533 1.278 0.855 2.619 0.959 4h-3.983zM25.958 10h-2.997c-0.582-1.836-1.387-3.447-2.354-4.732 1.329 0.636 2.533 1.488 3.585 2.54 0.671 0.671 1.261 1.404 1.766 2.192zM5.808 7.808c1.052-1.052 2.256-1.904 3.585-2.54-0.967 1.285-1.771 2.896-2.354 4.732h-2.997c0.504-0.788 1.094-1.521 1.766-2.192zM4.042 24h2.997c0.583 1.836 1.387 3.447 2.354 4.732-1.329-0.636-2.533-1.488-3.585-2.54-0.671-0.671-1.261-1.404-1.766-2.192zM24.192 26.192c-1.052 1.052-2.256 1.904-3.585 2.54 0.967-1.285 1.771-2.896 2.354-4.732h2.997c-0.504 0.788-1.094 1.521-1.766 2.192z"></path>',happy:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM16 18.711c3.623 0 7.070-0.963 10-2.654-0.455 5.576-4.785 9.942-10 9.942-5.215 0-9.544-4.371-10-9.947 2.93 1.691 6.377 2.658 10 2.658zM8 11c0-1.657 0.895-3 2-3s2 1.343 2 3c0 1.657-0.895 3-2 3-1.105 0-2-1.343-2-3zM20 11c0-1.657 0.895-3 2-3s2 1.343 2 3c0 1.657-0.895 3-2 3-1.105 0-2-1.343-2-3z"></path>',"heart-fill":'<path d="M16 5.844c-1.613-2.266-4.129-3.844-7.113-3.844-4.903 0-8.887 3.992-8.887 8.891v0.734l16.008 18.375 15.992-18.375v-0.734c0-4.899-3.984-8.891-8.887-8.891-2.984 0-5.5 1.578-7.113 3.844z"></path>',"heart-stroke":'<path d="M23.113 6c2.457 0 4.492 1.82 4.836 4.188l-11.945 13.718-11.953-13.718c0.344-2.368 2.379-4.188 4.836-4.188 2.016 0 3.855 2.164 3.855 2.164l3.258 3.461 3.258-3.461c0 0 1.84-2.164 3.855-2.164zM23.113 2c-2.984 0-5.5 1.578-7.113 3.844-1.613-2.266-4.129-3.844-7.113-3.844-4.903 0-8.887 3.992-8.887 8.891v0.734l16.008 18.375 15.992-18.375v-0.734c0-4.899-3.984-8.891-8.887-8.891v0z"></path>',home:'<path d="M16 0l-16 16h4v16h24v-16h4l-16-16zM24 28h-6v-6h-4v6h-6v-14.344l8-5.656 8 5.656v14.344z"></path>',iphone:'<path d="M16 0h-8c-4.418 0-8 3.582-8 8v16c0 4.418 3.582 8 8 8h8c4.418 0 8-3.582 8-8v-16c0-4.418-3.582-8-8-8zM12 30.062c-1.139 0-2.062-0.922-2.062-2.062s0.924-2.062 2.062-2.062 2.062 0.922 2.062 2.062-0.923 2.062-2.062 2.062zM20 24h-16v-16c0-2.203 1.795-4 4-4h8c2.203 0 4 1.797 4 4v16z"></path>',lock:'<path d="M14 0c-5.508 0-9.996 4.484-9.996 10v2h-4.004v14c0 3.309 2.691 6 6 6h12c3.309 0 6-2.691 6-6v-16c0-5.516-4.488-10-10-10zM11.996 24c-1.101 0-1.996-0.895-1.996-2s0.895-2 1.996-2c1.105 0 2 0.895 2 2s-0.894 2-2 2zM20 12h-11.996v-2c0-3.309 2.691-6 5.996-6 3.309 0 6 2.691 6 6v2z"></path>',mail:'<path d="M15.996 15.457l16.004-7.539v-3.918h-32v3.906zM16.004 19.879l-16.004-7.559v15.68h32v-15.656z"></path>',"minus-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM24 18h-16v-4h16v4z"></path>',moon:'<path d="M24.633 22.184c-8.188 0-14.82-6.637-14.82-14.82 0-2.695 0.773-5.188 2.031-7.363-6.824 1.968-11.844 8.187-11.844 15.644 0 9.031 7.32 16.355 16.352 16.355 7.457 0 13.68-5.023 15.648-11.844-2.18 1.254-4.672 2.028-7.367 2.028z"></path>',paperclip:'<path d="M17.293 15.292l-2.829-2.829-4 4c-1.953 1.953-1.953 5.119 0 7.071 1.953 1.953 5.118 1.953 7.071 0l10.122-9.879c3.123-3.124 3.123-8.188 0-11.313-3.125-3.124-8.19-3.124-11.313 0l-11.121 10.88c-4.296 4.295-4.296 11.26 0 15.557 4.296 4.296 11.261 4.296 15.556 0l6-6-2.829-2.829-5.999 6c-2.733 2.732-7.166 2.732-9.9 0-2.733-2.732-2.733-7.166 0-9.899l11.121-10.881c1.562-1.562 4.095-1.562 5.656 0 1.563 1.563 1.563 4.097 0 5.657l-10.121 9.879c-0.391 0.391-1.023 0.391-1.414 0s-0.391-1.023 0-1.414l4-4z"></path>',pin:'<path d="M17.070 2.93c-3.906-3.906-10.234-3.906-14.141 0-3.906 3.904-3.906 10.238 0 14.14 0.001 0 7.071 6.93 7.071 14.93 0-8 7.070-14.93 7.070-14.93 3.907-3.902 3.907-10.236 0-14.14zM10 14c-2.211 0-4-1.789-4-4s1.789-4 4-4 4 1.789 4 4-1.789 4-4 4z"></path>',"plus-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM24 18h-6v6h-4v-6h-6v-4h6v-6h4v6h6v4z"></path>',rain:'<path d="M23.998 6c-0.375 0-0.733 0.061-1.103 0.111-1.389-2.465-3.969-4.111-6.895-4.111-2.987 0-5.565 1.666-6.94 4.1-0.353-0.047-0.705-0.1-1.060-0.1-4.41 0-8 3.588-8 8s3.59 8 8 8h15.998c4.414 0 8-3.588 8-8s-3.586-8-8-8zM23.998 18h-15.998c-2.207 0-4-1.795-4-4 0-2.193 1.941-3.885 4.004-3.945 0.009 0.943 0.172 1.869 0.5 2.744l3.746-1.402c-0.168-0.444-0.25-0.915-0.25-1.397 0-2.205 1.793-4 4-4 1.293 0 2.465 0.641 3.199 1.639-1.928 1.461-3.199 3.756-3.199 6.361h4c0-2.205 1.795-4 3.998-4 2.211 0 4 1.795 4 4s-1.789 4-4 4zM3.281 29.438c-0.75 0.75-1.969 0.75-2.719 0s-0.75-1.969 0-2.719 5.438-2.719 5.438-2.719-1.969 4.688-2.719 5.438zM11.285 29.438c-0.75 0.75-1.965 0.75-2.719 0-0.75-0.75-0.75-1.969 0-2.719 0.754-0.75 5.438-2.719 5.438-2.719s-1.965 4.688-2.719 5.438zM19.28 29.438c-0.75 0.75-1.969 0.75-2.719 0s-0.75-1.969 0-2.719 5.437-2.719 5.437-2.719-1.968 4.688-2.718 5.438z"></path>',
ribbon:'<path d="M8 20c-1.41 0-2.742-0.289-4-0.736v12.736l4-4 4 4v-12.736c-1.258 0.447-2.59 0.736-4 0.736zM0 8c0-4.418 3.582-8 8-8s8 3.582 8 8c0 4.418-3.582 8-8 8-4.418 0-8-3.582-8-8z"></path>',sad:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM9.997 24.398l-2.573-1.544c1.749-2.908 4.935-4.855 8.576-4.855 3.641 0 6.827 1.946 8.576 4.855l-2.573 1.544c-1.224-2.036-3.454-3.398-6.003-3.398-2.549 0-4.779 1.362-6.003 3.398z"></path>',smiley:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM22.003 19.602l2.573 1.544c-1.749 2.908-4.935 4.855-8.576 4.855s-6.827-1.946-8.576-4.855l2.573-1.544c1.224 2.036 3.454 3.398 6.003 3.398s4.779-1.362 6.003-3.398z"></path>',star:'<path d="M22.137 19.625l9.863-7.625h-12l-4-12-4 12h-12l9.875 7.594-3.875 12.406 10.016-7.68 9.992 7.68z"></path>',sun:'<path d="M16.001 8c-4.418 0-8 3.582-8 8s3.582 8 8 8c4.418 0 7.999-3.582 7.999-8s-3.581-8-7.999-8v0zM14 2c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM4 6c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM2 14c1.105 0 2 0.895 2 2 0 1.107-0.895 2-2 2s-2-0.893-2-2c0-1.105 0.895-2 2-2zM4 26c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM14 30c0-1.109 0.895-2 2-2 1.108 0 2 0.891 2 2 0 1.102-0.892 2-2 2-1.105 0-2-0.898-2-2zM24 26c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM30 18c-1.104 0-2-0.896-2-2 0-1.107 0.896-2 2-2s2 0.893 2 2c0 1.104-0.896 2-2 2zM24 6c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2z"></path>',"thin-arrow-down":'<path d="M4.586 19.414l10 10c0.781 0.781 2.047 0.781 2.828 0l10-10c0.781-0.781 0.781-2.047 0-2.828s-2.047-0.781-2.828 0l-6.586 6.586v-19.172c0-1.105-0.895-2-2-2s-2 0.895-2 2v19.172l-6.586-6.586c-0.391-0.39-0.902-0.586-1.414-0.586s-1.024 0.195-1.414 0.586c-0.781 0.781-0.781 2.047 0 2.828z"></path>',"thin-arrow-down-left":'<path d="M18 28c1.105 0 2-0.895 2-2s-0.895-2-2-2h-7.172l16.586-16.586c0.781-0.781 0.781-2.047 0-2.828-0.391-0.391-0.902-0.586-1.414-0.586s-1.024 0.195-1.414 0.586l-16.586 16.586v-7.172c0-1.105-0.895-2-2-2s-2 0.895-2 2v14h14z"></path>',"thin-arrow-down-right":'<path d="M28 14c0-1.105-0.895-2-2-2s-2 0.895-2 2v7.172l-16.586-16.586c-0.781-0.781-2.047-0.781-2.828 0-0.391 0.391-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414l16.586 16.586h-7.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h14v-14z"></path>',"thin-arrow-left":'<path d="M12.586 4.586l-10 10c-0.781 0.781-0.781 2.047 0 2.828l10 10c0.781 0.781 2.047 0.781 2.828 0s0.781-2.047 0-2.828l-6.586-6.586h19.172c1.105 0 2-0.895 2-2s-0.895-2-2-2h-19.172l6.586-6.586c0.39-0.391 0.586-0.902 0.586-1.414s-0.195-1.024-0.586-1.414c-0.781-0.781-2.047-0.781-2.828 0z"></path>',"thin-arrow-right":'<path d="M19.414 27.414l10-10c0.781-0.781 0.781-2.047 0-2.828l-10-10c-0.781-0.781-2.047-0.781-2.828 0s-0.781 2.047 0 2.828l6.586 6.586h-19.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h19.172l-6.586 6.586c-0.39 0.39-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414c0.781 0.781 2.047 0.781 2.828 0z"></path>',"thin-arrow-up":'<path d="M27.414 12.586l-10-10c-0.781-0.781-2.047-0.781-2.828 0l-10 10c-0.781 0.781-0.781 2.047 0 2.828s2.047 0.781 2.828 0l6.586-6.586v19.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-19.172l6.586 6.586c0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586c0.781-0.781 0.781-2.047 0-2.828z"></path>',"thin-arrow-up-left":'<path d="M4 18c0 1.105 0.895 2 2 2s2-0.895 2-2v-7.172l16.586 16.586c0.781 0.781 2.047 0.781 2.828 0 0.391-0.391 0.586-0.902 0.586-1.414s-0.195-1.024-0.586-1.414l-16.586-16.586h7.172c1.105 0 2-0.895 2-2s-0.895-2-2-2h-14v14z"></path>',"thin-arrow-up-right":'<path d="M26.001 4c-0 0-0.001 0-0.001 0h-11.999c-1.105 0-2 0.895-2 2s0.895 2 2 2h7.172l-16.586 16.586c-0.781 0.781-0.781 2.047 0 2.828 0.391 0.391 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l16.586-16.586v7.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-14h-1.999z"></path>',twitter:'<path d="M32 6.076c-1.177 0.522-2.443 0.875-3.771 1.034 1.355-0.813 2.396-2.099 2.887-3.632-1.269 0.752-2.674 1.299-4.169 1.593-1.198-1.276-2.904-2.073-4.792-2.073-3.626 0-6.565 2.939-6.565 6.565 0 0.515 0.058 1.016 0.17 1.496-5.456-0.274-10.294-2.888-13.532-6.86-0.565 0.97-0.889 2.097-0.889 3.301 0 2.278 1.159 4.287 2.921 5.465-1.076-0.034-2.088-0.329-2.974-0.821-0.001 0.027-0.001 0.055-0.001 0.083 0 3.181 2.263 5.834 5.266 6.437-0.551 0.15-1.131 0.23-1.73 0.23-0.423 0-0.834-0.041-1.235-0.118 0.835 2.608 3.26 4.506 6.133 4.559-2.247 1.761-5.078 2.81-8.154 2.81-0.53 0-1.052-0.031-1.566-0.092 2.905 1.863 6.356 2.95 10.064 2.95 12.076 0 18.679-10.004 18.679-18.68 0-0.285-0.006-0.568-0.019-0.849 1.283-0.926 2.396-2.082 3.276-3.398z"></path>',umbrella:'<path d="M16 0c-8.82 0-16 7.178-16 16h4c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5h4c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5v10c0 1.102-0.895 2-2 2-1.102 0-2-0.898-2-2h-4c0 3.309 2.695 6 6 6 3.312 0 6-2.691 6-6v-10c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.498 0.674 1.498 1.5h4c0-0.826 0.68-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5h4c0-8.822-7.172-16-15.998-16z"></path>',unlock:'<path d="M14.004 0c-5.516 0-9.996 4.484-9.996 10h3.996c0-3.309 2.688-6 6-6 3.305 0 5.996 2.691 5.996 6v2h-20v14c0 3.309 2.695 6 6 6h12c3.305 0 6-2.691 6-6v-16c0-5.516-4.488-10-9.996-10zM12 24c-1.102 0-2-0.895-2-2s0.898-2 2-2c1.109 0 2 0.895 2 2s-0.891 2-2 2z"></path>',user:'<path d="M12 16c-6.625 0-12 5.375-12 12 0 2.211 1.789 4 4 4h16c2.211 0 4-1.789 4-4 0-6.625-5.375-12-12-12zM6 6c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6-3.314 0-6-2.686-6-6z"></path>',wondering:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM23.304 18.801l0.703 2.399-13.656 4-0.703-2.399zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2z"></path>',"x-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM23.914 21.086l-2.828 2.828-5.086-5.086-5.086 5.086-2.828-2.828 5.086-5.086-5.086-5.086 2.828-2.828 5.086 5.086 5.086-5.086 2.828 2.828-5.086 5.086 5.086 5.086z"></path>',android:'<path d="M50.143,45.057h-0.241c-2.13,0-3.857-1.735-3.857-3.875V24.713 c0-2.14,1.727-3.875,3.857-3.875h0.241c2.13,0,3.857,1.735,3.857,3.875v16.469C54,43.323,52.273,45.057,50.143,45.057z M39.777,51.112h-2.169v8.961c0,2.14-1.727,3.875-3.857,3.875h-0.241c-2.13,0-3.857-1.735-3.857-3.875v-8.961h-5.304v8.961 c0,2.14-1.727,3.875-3.857,3.875H20.25c-2.13,0-3.857-1.735-3.857-3.875v-8.961h-2.17c-2.663,0-4.821-2.169-4.821-4.844V21.565 h35.196v24.704C44.598,48.944,42.44,51.112,39.777,51.112z M18.451,5.498l-2.777-4.832c-0.1-0.174-0.041-0.396,0.132-0.496 l0.209-0.121c0.173-0.1,0.394-0.041,0.494,0.133l2.802,4.877c2.297-1.091,4.863-1.705,7.573-1.705c2.856,0,5.552,0.681,7.941,1.885 l2.906-5.056c0.1-0.174,0.321-0.233,0.494-0.133l0.209,0.121c0.173,0.1,0.232,0.322,0.132,0.496l-2.889,5.028 c4.989,2.866,8.459,8.094,8.901,14.169H9.191C9.643,13.645,13.271,8.316,18.451,5.498z M35.076,13.572 c0.865,0,1.567-0.705,1.567-1.574c0-0.87-0.702-1.574-1.567-1.574c-0.865,0-1.567,0.705-1.567,1.574 C33.509,12.867,34.21,13.572,35.076,13.572z M18.924,13.572c0.865,0,1.567-0.705,1.567-1.574c0-0.87-0.702-1.574-1.567-1.574 c-0.865,0-1.567,0.705-1.567,1.574C17.357,12.867,18.059,13.572,18.924,13.572z M4.098,45.057H3.857C1.727,45.057,0,43.323,0,41.182 V24.713c0-2.14,1.727-3.875,3.857-3.875h0.241c2.13,0,3.857,1.735,3.857,3.875v16.469C7.955,43.323,6.228,45.057,4.098,45.057z"/>',apple:'<path d="M43.061,34.522c0,8.67,8.393,12.374,8.393,12.374 c-2.057,8.63-9.252,15.172-9.252,15.172c-1.613,1.607-4.567,1.852-4.567,1.852c-2.377,0-5.309-1.34-5.309-1.34 c-2.259-1.299-5.426-1.301-5.426-1.301c-2.792,0-5.309,1.261-5.309,1.261C19.334,63.835,16.399,64,16.399,64 c-2.568,0-3.982-1.498-3.982-1.498C-0.546,50.658,0.003,35.271,0.003,35.271c0-19.645,15.576-19.586,15.576-19.586 c3.626,0,4.919,0.827,4.919,0.827c3.866,1.882,5.777,1.892,5.777,1.892c1.5,0,5.816-1.931,5.816-1.931 c2.223-1.052,5.778-1.064,5.778-1.064c8.325,0,11.984,6.424,11.984,6.424C42.702,26.182,43.061,34.522,43.061,34.522z M25.729,14.818C25.729,1.075,38.377,0,38.377,0C38.377,14.797,25.729,14.818,25.729,14.818z"/>',baidu:'<path d="M57.549,28.923c-0.219,7.717-6.714,8.677-6.714,8.677 c-8.176-0.648-7.673-8.677-7.673-8.677c-0.795-8.379,5.755-9.641,5.755-9.641C58,19.412,57.549,28.923,57.549,28.923z M37.407,20.246c-5.931,0-5.755-8.677-5.755-8.677c1.708-7.93,7.673-9.641,7.673-9.641c5.472,0.78,6.714,8.677,6.714,8.677 C44.174,21.255,37.407,20.246,37.407,20.246z M37.407,32.779c2.75,3.707,7.673,8.677,7.673,8.677 c7.267,4.21,7.673,10.605,7.673,10.605c0,13.939-14.387,10.605-14.387,10.605c-1.873-0.813-7.673-1.928-7.673-1.928h-4.796 c-2.325,0.456-10.551,1.928-10.551,1.928c-10.734,0-11.51-10.605-11.51-10.605c0-6.349,4.796-9.641,4.796-9.641 c6.151-4.696,9.592-9.641,9.592-9.641c5.137-7.284,9.591-6.749,9.591-6.749C33.569,25.744,37.407,32.779,37.407,32.779z M25.897,35.672H23.02v5.785h-6.714c-5.859,0.902-5.755,8.677-5.755,8.677c-0.551,5.375,5.755,7.713,5.755,7.713h9.591V35.672z M32.611,53.025V41.456h-4.796v12.533c-0.017,2.653,3.837,3.856,3.837,3.856h10.551v-16.39h-4.796v12.533h-2.877 C33.473,53.886,32.611,53.025,32.611,53.025z M17.265,46.277h5.755v7.713h-4.796c0,0-2.647-0.459-2.877-3.856 C15.346,50.133,15.452,46.899,17.265,46.277z M21.101,20.246c-6.799,0-6.714-10.605-6.714-10.605c0-9.31,6.714-9.641,6.714-9.641 c5.997,0,6.714,9.641,6.714,9.641C27.815,19.489,21.101,20.246,21.101,20.246z M6.714,33.743C0.544,33.743,0,24.102,0,24.102 c0-8.281,6.714-9.641,6.714-9.641c6.751,0,7.673,9.641,7.673,9.641C14.387,32.77,6.714,33.743,6.714,33.743z"/>',douban:'<path d="M0,64v-5.818h20.945c0,0-4.899-9.901-8.145-11.636l8.145-3.491 c0,0,5.56,12.555,5.818,15.127h13.964c0,0,5.825-11.048,5.818-15.127l6.982,3.491c0,0-3.36,10.254-5.295,11.512 c-0.447,0.029-0.656,0.069-0.523,0.124c0.157,0.065,0.336-0.002,0.523-0.124C51.09,57.875,64,58.182,64,58.182V64H0z M5.818,40.727 v-25.6h52.364v25.6H5.818z M48.873,20.945H15.127v13.964h33.745V20.945z M3.491,0H64v5.818H3.491V0z"/>',googleplay:'<path d="M55.532,34.556c-0.828,0.473-5.547,3.122-11.786,6.618 l-8.591-8.715l9.908-9.829c5.385,3.012,9.44,5.281,10.469,5.858C58,29.871,57.958,33.17,55.532,34.556z M3.177,0.02 c0.741-0.078,1.548,0.064,2.355,0.511c1.54,0.853,23.514,13.139,37.89,21.18l-9.536,9.46L3.177,0.02z M1.36,0.75l31.244,31.694 L2.074,62.731C0.89,62.224,0,61.115,0,59.574C0,56.662,0,5.559,0,3.55C0,2.412,0.532,1.401,1.36,0.75z M42.112,42.089 C27.972,50.01,7.556,61.427,5.419,62.575c-0.32,0.172-0.655,0.291-0.993,0.367l29.446-29.212L42.112,42.089z"/>',kaixinwang:'<path d="M60.549,30.164c0,0-3.494,8.614-16.984,12.25c0,0-0.502,11.237,0,15.076c0,0,1.59,4.938-4.718,3.769c0,0-6.539-0.588-13.21-9.423c0,0-2.071-1.431-2.831,0c0,0-5.588,5.249-9.436,7.538c0,0-7.049,0.734-7.549-3.769c0,0-2.985-13.205,0.944-21.672c0,0-0.269-2.116-0.944-2.827c0,0-8.864-10.313-4.718-22.615c0,0,1.108-1.884,5.661-0.942c0,0,7.295,4.273,8.492,4.711c0,0,3.262,0.609,3.774-0.942c0,0,7.578-9.802,14.153-11.307c0,0,7.228-0.583,7.549,6.596c0,0,2.168,10.163,1.887,13.192c0,0,1.659,4.159,4.718,3.769c0,0,9.924-0.088,12.266,1.885C59.605,25.453,61.958,26.999,60.549,30.164z M13.371,27.337c0.013-2.519-1.887-2.827-1.887-2.827c-3.341,0-2.831,1.884-2.831,1.884c-0.146,2.405,2.831,2.827,2.831,2.827C13.764,28.831,13.371,27.337,13.371,27.337zM14.314,32.991c-1.477,8.602,6.605,11.307,6.605,11.307c6.04,0.515,11.323-4.711,11.323-4.711c-7.647,2.452-11.323,0.942-11.323,0.942C14.869,38.902,14.314,32.991,14.314,32.991z M36.016,18.857c0,0-3.136-1.152-5.661,0.942c0,0-0.944,0.585-0.944-0.942c0,0-3.121-5.667-7.549-1.885c0,0-6.72,5.505-2.831,13.192c0,0,1.414,3.005,6.605,0.942c0,0,0.403,2.079,1.887,3.769c0,0,4.505,3.149,7.549-3.769C35.073,31.107,38.588,24.505,36.016,18.857z M41.678,33.933c0,0-3.622-0.382-3.774,2.827c0,0-0.038,2.695,2.831,2.827c0,0,2.968-0.587,2.831-2.827C43.565,36.76,43.968,33.933,41.678,33.933zM33.186,28.28c-2.024-0.756-1.887-3.769-1.887-3.769c0.251-1.965,2.831-2.827,2.831-2.827c2.763,0.114,0.944,3.769,0.944,3.769C34.54,29.362,33.186,28.28,33.186,28.28z M23.75,25.453c-2.17-0.976,0-4.711,0-4.711c1.118-2.725,2.831-1.885,2.831-1.885c2.222,0.41,0.944,3.769,0.944,3.769C27.212,24.78,23.75,25.453,23.75,25.453z"/>',laiwang:'<path d="M58.659,31.066V36.4h-5.618v-3.138h2.809v-4.707c3.787-6.594,2.185-13.179,2.185-13.179c-4.56-14.795-19.35-10.669-19.35-10.669c-0.413-0.661-4.057-2.51-4.057-2.51C38.404,0.023,43.679,0,43.679,0C59.986,1.348,61.78,14.748,61.78,14.748C64,25.266,58.659,31.066,58.659,31.066z M52.56,29.556c0,6.135-2.082,11.777-5.565,16.263v6.759h-7.79C35.388,54.753,30.98,56,26.28,56C11.766,56,0,44.16,0,29.556C0,14.951,11.766,3.111,26.28,3.111C40.794,3.111,52.56,14.951,52.56,29.556z M26.28,8.4c-11.611,0-21.024,9.472-21.024,21.156c0,11.684,9.413,21.156,21.024,21.156c3.336,0,6.489-0.786,9.291-2.178h7.405v-6.135c2.711-3.562,4.328-8.01,4.328-12.843C47.304,17.872,37.891,8.4,26.28,8.4z M37.411,32.667c-1.708,0-3.092-1.393-3.092-3.111c0-1.718,1.384-3.111,3.092-3.111c1.708,0,3.092,1.393,3.092,3.111C40.502,31.274,39.118,32.667,37.411,32.667z M26.28,32.667c-1.708,0-3.092-1.393-3.092-3.111c0-1.718,1.384-3.111,3.092-3.111c1.708,0,3.092,1.393,3.092,3.111C29.372,31.274,27.988,32.667,26.28,32.667z M15.15,32.667c-1.708,0-3.092-1.393-3.092-3.111c0-1.718,1.384-3.111,3.092-3.111c1.707,0,3.092,1.393,3.092,3.111C18.242,31.274,16.857,32.667,15.15,32.667z"/>',logo:'<path d="M148.981,8.452H153v2.684h-5.639c0,0-1.096-0.041-1.558-1.203l-1.246-2.468h-0.592V12h8.754l-1.277,3.455h1.464v5.059c0,0-0.127,1.542-2.305,1.542h-10.686v-2.468h9.191c0,0,0.222-0.072,0.218-0.216v-1.326h-2.617l0.779-3.085h-9.346l-1.215,5.152c0,0-0.526,2.224-2.742,1.944h-2.929v-2.684h1.589c0,0,0.487-0.065,0.592-0.494l0.935-3.918h-3.116V12h8.848V7.465h-0.498l-1.246,2.468c0,0-0.75,1.304-2.835,1.265h-4.175V8.452h3.801c0,0,0.486-0.029,0.685-0.432l0.187-0.555h-4.767v-2.56h8.848V3.918h-8.941V1.141h17.945c0,0,0.244-0.049,0.311-0.37V0.278h3.489v1.635c0,0-0.22,2.005-2.96,2.005h-5.982v0.956H153v2.591h-4.86l0.28,0.679C148.42,8.144,148.619,8.452,148.981,8.452zM132.313,29.738h-2.492c-0.235-1.372-1.34-1.234-1.34-1.234c-1.608,0-1.589,2.19-1.589,2.19c0,2.719,1.62,2.468,1.62,2.468c1.174,0,1.309-1.388,1.309-1.388h2.555c-0.293,3.657-3.832,3.517-3.832,3.517c-4.466,0-4.206-4.566-4.206-4.566c0-4.45,4.112-4.35,4.112-4.35C132.348,26.375,132.313,29.738,132.313,29.738z M124.525,4.997l-1.776-2.221h-10.811l-1.807,2.53c0,0-0.314,0.339-0.748,0.339h-3.147V2.869h1.34c0,0,0.099-0.001,0.187-0.154L109.633,0h15.266l1.9,2.622c0,0,0.13,0.167,0.374,0.154h1.09v2.776h-2.96C125.304,5.553,124.86,5.553,124.525,4.997z M103.807,30.54l3.084,4.535h-3.178l-1.495-2.529l-1.495,2.529H97.67l3.115-4.473l-2.804-4.01h3.084l1.277,2.344l1.277-2.344h2.96L103.807,30.54z M101.47,22.057h-4.735v-2.56h2.679c0.391,0,0.405-0.37,0.405-0.37v-4.35H86.111l-0.81,1.018c-0.476,0.574-1.277,0.494-1.277,0.494h-2.555v-2.931h0.716c0.4,0,0.53-0.247,0.53-0.247l1.277-2.098h-1.651V0.185h20.873v8.823c-0.05,2.132-2.118,2.098-2.118,2.098H88.074l-0.592,0.987h15.92v8.113C103.264,22.144,101.47,22.057,101.47,22.057z M99.258,2.961H85.924v1.45h13.334V2.961z M99.134,8.545c0,0,0.214-0.097,0.218-0.278V7.003H85.924v1.542H99.134z M84.18,18.91l2.337-3.177h4.268l-4.33,5.614c0,0-0.724,0.62-1.62,0.524h-3.458v-2.56h2.305C83.681,19.311,83.961,19.247,84.18,18.91z M87.388,28.751h-4.33v1.049h3.925v2.036h-3.925v1.08h4.455v2.159h-7.01v-8.483h6.885V28.751z M70.627,35.815l-1.776-3.085l1.807-3.054h3.552l1.807,3.085l-1.776,3.054H70.627z M17.197,17.954l1.807-3.054h3.552l1.807,3.085l-1.807,3.054h-3.583L17.197,17.954z M44.8,35.815l-5.016-8.637l3.614-6.108l5.016,8.576h13.677l6.761-11.661L62.06,6.324H48.414l-17.229,29.46l-20.78,0.062L0,17.923L10.375,0.154l20.811-0.031l5.016,8.637L32.619,14.9l-5.047-8.607H13.957L7.103,17.985l6.854,11.661h13.646l17.26-29.491h20.78l10.374,17.83l-10.406,17.83H44.8z M92.28,21.964h-3.521v-2.56h1.433c0.436,0.002,0.654-0.339,0.654-0.339l2.555-3.116h4.362l-4.299,5.553C93.035,21.922,92.28,21.964,92.28,21.964zM92.872,26.375c4.353,0,4.268,4.411,4.268,4.411c0,1.971-0.966,3.023-0.966,3.023l0.997,1.018L95.987,36l-1.122-1.172c-0.421,0.386-1.776,0.463-1.776,0.463c-4.572,0.019-4.393-4.473-4.393-4.473C88.83,26.208,92.872,26.375,92.872,26.375zM92.934,33.162c0,0,0.237-0.016,0.312-0.062l-0.717-0.71l1.184-1.141l0.685,0.709c0,0,0.187-0.29,0.187-1.08c0,0,0.181-2.375-1.682-2.375c0,0-1.651-0.176-1.651,2.406C91.252,30.91,91.207,33.162,92.934,33.162z M110.007,35.074h-2.555v-8.483h2.555V35.074z M111.222,26.591h2.555v5.306c0,1.379,1.34,1.265,1.34,1.265c1.259,0,1.309-1.296,1.309-1.296v-5.275h2.555v5.491c0,3.456-3.77,3.208-3.77,3.208c-4.308,0-3.988-3.27-3.988-3.27V26.591z M128.17,19.28v2.776h-21.746v-2.746h2.15V7.095h3.209V19.28h3.676V4.689h3.583V8.73h8.941v2.961h-8.941v7.589H128.17z M123.06,35.074h-2.43V32.73h2.43V35.074z M137.672,26.375c4.254,0,4.237,4.38,4.237,4.38c0,4.688-4.175,4.535-4.175,4.535c-4.524,0-4.268-4.658-4.268-4.658C133.699,26.191,137.672,26.375,137.672,26.375z M136.021,30.848c0,2.339,1.651,2.314,1.651,2.314c1.762,0,1.682-2.345,1.682-2.345c0.002-2.392-1.651-2.344-1.651-2.344C135.947,28.473,136.021,30.848,136.021,30.848z M148.109,31.589l1.215-4.997h3.645v8.483h-2.43v-5.553l-1.464,5.553h-1.932l-1.464-5.46v5.46h-2.43v-8.483h3.645L148.109,31.589z"/>',logo2:'<path d="M23.103,24l2.397-4.216h4.795l2.397,4.108l-2.397,4.216H25.5L23.103,24z M60.154,48l-6.756-11.568l4.795-8.216l6.756,11.46h18.308L92.41,24L83.256,8.324H64.949L41.846,48H13.949L0,24L13.949,0h27.897l6.756,11.568l-4.795,8.216l-6.756-11.46H18.744L9.59,24l9.154,15.676h18.308L60.154,0h27.897L102,24L88.051,48H60.154zM99.494,39.676L102,43.784L99.603,48h-4.904l-2.397-4.216l2.397-4.108H99.494z"/>',code:'<path d="M64,64h-7V50h7V64z M50,50v-7h7v7H50z M43,50h-7V36h14v7h-7V50zM64,36v7h-7v-7H64z M36,0h28v28H36V0z M40,24h20V4H40V24z M43,7h14v14H43V7z M0,36h28v28H0V36z M4,40v20h20V40H4z M7,43h14v14H7V43z M0,0h28v28H0V0z M4,24h20V4H4V24z M7,7h14v14H7V7z M50,57v7H36v-7H50z"/>',computer:'<path d="M61,44H38.676l6.199,8.769c0,0,1.125,1.64,0,3.231h-9.289h-6.697h-9.733c-1.156-1.591,0-3.231,0-3.231L25.527,44H3c-1.657,0-3-1.343-3-3V3c0-1.657,1.343-3,3-3h58c1.657,0,3,1.343,3,3v38C64,42.657,62.657,44,61,44z M32,42c1.105,0,2-0.895,2-2s-0.895-2-2-2c-1.105,0-2,0.895-2,2S30.895,42,32,42z M60,5H4v31h56V5z"/>',dengpao:'<path d="M40,44.969V52c0,3.314-2.686,6-6,6h-1v3.5c0,1.381-1.119,2.5-2.5,2.5h-11c-1.381,0-2.5-1.119-2.5-2.5V58h-1c-3.314,0-6-2.686-6-6v-7.041C3.936,40.403,0,33.171,0,25C0,11.193,11.193,0,25,0s25,11.193,25,25C50,33.173,46.068,40.413,40,44.969z M25,7C15.059,7,7,15.059,7,25c0,0.585,0.033,1.162,0.088,1.733c0.02,0.206,0.056,0.407,0.082,0.611c0.047,0.357,0.095,0.714,0.162,1.064c0.048,0.251,0.11,0.496,0.168,0.743c0.069,0.29,0.139,0.58,0.222,0.864c0.079,0.273,0.168,0.542,0.26,0.809c0.083,0.242,0.17,0.482,0.263,0.719c0.113,0.29,0.232,0.575,0.359,0.858c0.089,0.195,0.183,0.386,0.278,0.577c0.152,0.307,0.307,0.611,0.475,0.907c0.078,0.137,0.163,0.268,0.244,0.402c0.202,0.334,0.406,0.667,0.629,0.987c0.006,0.009,0.014,0.018,0.02,0.027c1.674,2.393,3.914,4.354,6.527,5.699C16.3,41.532,16,42.228,16,43v6c0,1.657,1.343,3,3,3h12c1.657,0,3-1.343,3-3v-6c0-0.772-0.3-1.468-0.778-2c2.998-1.544,5.497-3.904,7.222-6.788c0.062-0.103,0.127-0.203,0.186-0.306c0.177-0.31,0.34-0.629,0.499-0.951c0.09-0.181,0.179-0.361,0.262-0.545c0.13-0.286,0.251-0.577,0.366-0.871c0.093-0.236,0.179-0.474,0.261-0.715c0.091-0.267,0.18-0.535,0.259-0.808c0.084-0.287,0.154-0.578,0.224-0.871c0.058-0.245,0.119-0.487,0.167-0.736c0.068-0.353,0.117-0.712,0.164-1.072c0.026-0.202,0.062-0.401,0.081-0.605C42.967,26.163,43,25.586,43,25C43,15.059,34.941,7,25,7z M28.5,48h-7c-1.381,0-2.5-1.119-2.5-2.5v-1c0-1.381,1.119-2.5,2.5-2.5h7c1.381,0,2.5,1.119,2.5,2.5v1C31,46.881,29.881,48,28.5,48z"/>',normaluser:'<path d="M31.5,64C59.433,56.326,63,32.541,63,24.694C63,16.846,60.61,8.58,54.309,0C49.566,1.885,39.207,2.721,31.5,0C23.794,2.721,13.434,1.885,8.692,0C2.39,8.58,0,16.846,0,24.694C0,32.541,3.568,56.326,31.5,64z"/>',pad:'<path d="M49,64H3c-1.657,0-3-1.343-3-3V3c0-1.657,1.343-3,3-3h46c1.657,0,3,1.343,3,3v58C52,62.657,50.657,64,49,64z M26,62c1.657,0,3-1.343,3-3s-1.343-3-3-3s-3,1.343-3,3S24.343,62,26,62z M45,6H7v48h38V6z"/>',pengyou:'<path d="M52.671,41.29c0,0,3.271,9.101-5.532,11.011c0,0-7.661,1.98-11.065-11.011c0,0-3.688-10.606-3.688-12.846c0,0,11.041-2.228,18.442-1.835c0,0,11.116,0.842,11.065,9.175C61.892,35.785,62.397,43.503,52.671,41.29z M52.671,22.939c-5.253,0.729-21.208,3.67-21.208,3.67V7.34C31.264,1.286,39.762,0,39.762,0c7.386,0.19,6.455,7.34,6.455,7.34c10.325-4.012,11.065,7.34,11.065,7.34C57.501,18.724,52.671,22.939,52.671,22.939z M7.488,28.444c0,0-8.17-0.479-7.377-8.258c0,0-1.714-6.644,8.299-6.423c0,0-3.114-11.531,11.065-11.011c0,0,6.523-0.627,8.299,7.34c0,0,3.449,12.205,2.766,16.516C30.541,26.609,18.663,27.596,7.488,28.444z M31.463,28.444c-0.872,4.484,1.844,12.846,1.844,12.846c3.235,6.336,0.922,11.011,0.922,11.011c-2.931,8.699-11.987,7.34-11.987,7.34c-6.323-1.717-6.455-8.258-6.455-8.258c-5.134-0.13-7.377-1.835-7.377-1.835c-5.279-1.891-2.766-11.011-2.766-11.011C14.528,26.962,31.463,28.444,31.463,28.444z"/>',qq:'<path d="M173.94,152.517c0,0-7.239,0.531-15.89-15.949c0,0-7.897,20.246-13.904,24.921c0,0,15.89,5.883,15.89,17.943c0,0-2.979,19.937-36.746,19.937c0,0-22.406,0.632-30.787-13.956h-2.979v-0.309l-2.979,0.309C78.162,200,55.756,199.368,55.756,199.368c-33.767,0-36.746-19.937-36.746-19.937c0-12.06,15.89-17.943,15.89-17.943c-6.007-4.675-13.904-24.921-13.904-24.921c-8.651,16.48-15.89,15.949-15.89,15.949c-17.583-29.635,15.89-60.807,15.89-60.807c-5.712-18.322,5.959-26.915,5.959-26.915C29.54,0.66,89.523,0,89.523,0s59.983,0.66,62.568,64.795c0,0,11.671,8.593,5.959,26.915C158.05,91.709,191.523,122.882,173.94,152.517z"/>',qqliulanqi:'<path d="M64,55.332c0,4.57-3.122,8.311-7.081,8.642V64H31.793c-0.02,0-0.039-0.007-0.059-0.007C14.184,63.849,0,49.584,0,32C0,14.327,14.327,0,32,0s32,14.327,32,32c0,5.69-1.492,11.029-4.096,15.66C62.338,49.11,64,51.999,64,55.332z M32,14.222c-9.818,0-17.778,7.959-17.778,17.778c0,7.131,4.208,13.262,10.268,16.092c1.219-2.013,3.562-3.394,6.287-3.394c0.893,0,1.743,0.156,2.533,0.424c1.731-5.002,6.017-8.551,11.047-8.551c1.599,0,3.12,0.368,4.512,1.017c0.583-1.759,0.91-3.634,0.91-5.588C49.778,22.182,41.818,14.222,32,14.222z"/>',qqweibo:'<path d="M60.847,26.088c-8.08-2.418-13.422-13.494-13.422-13.494c-2.424,0-2.684-2.699-2.684-2.699c0-3.708,2.684-3.598,2.684-3.598c3.337,0,3.579,3.598,3.579,3.598c0.013,1.683-1.79,2.699-1.79,2.699c2.627,8.909,12.527,11.695,12.527,11.695C64,25.295,60.847,26.088,60.847,26.088z M54.583,16.192c0,0-1.339,0.621-0.895-0.9c0,0,1.906-1.828,1.79-5.398c0,0-0.266-8.096-8.053-8.096c0,0-7.158,0.059-7.158,8.096c0,0,0.001,8.096,7.158,8.096c0,0,1.785,1.974,0,1.799c0,0-8.948-0.952-8.948-9.895c0,0,0.135-9.895,9.843-9.895c0,0,8.948,1.557,8.948,9.895C57.267,9.895,56.836,14.713,54.583,16.192z M17.001,38.682h-3.579c0,0-2.586-0.992-0.895-2.699c0,0,17.896,2.971,17.896-14.393c0,0-0.252-13.494-13.422-13.494c0,0-14.317,1.116-14.317,14.393c0,0,0.037,4.655,1.79,6.297c0,0,0.568,3.071-1.79,0.9c0,0-2.521-3.105-2.684-7.197c0,0,1.061-17.092,17.001-17.092c0,0,16.107,0.699,16.107,16.193C33.108,21.59,32.527,38.682,17.001,38.682z M12.527,24.289c0,0-1.74-4.156,1.79-7.197c0,0,5.442-2.025,8.053,2.699c0,0,1.083,4.133-1.79,6.297c0,0-3.242,1.586-6.264,0c0,0-9.393,9.066-8.948,17.992c0.029,0.574,0,10.795,0,10.795S4.337,58,1.79,55.774V44.08C1.79,44.08,4.022,30.876,12.527,24.289z"/>',qqzone:'<path d="M49.096,31.429L51.726,55L32.438,43.651L13.151,55l1.753-22.698L0,19.206h21.918L32.438,0l11.397,19.206H64L49.096,31.429z M47.342,21.825H21.041l15.781,2.619L17.534,41.032h29.808L29.808,37.54L47.342,21.825z"/>',renren:'<path d="M26.667,0h12c0,0-5.9,40.406,25.333,51.726L58,63c0,0-20.229-14.581-24-29.179c0,0-12.018,22.795-27.333,28.516L0,54.379C0,54.379,31.489,46.61,26.667,0z"/>',sendcompany:'<path d="M56,37L32,13L8,37H0v-6L31,0h2l31,31v6H56z M53,38v26H39V43H25v21H11V38l21-21L53,38z"/>',scenegift:'<path d="M34.133,63.954V25.581H64v38.372H34.133z M0,12.791h14.821C8.033,11.603,8,4.996,8,4.996C8.056,0.071,13,0,13,0c9.28-0.03,15.986,11.202,16.888,12.791h4.237C35.125,11.201,42.504-0.046,51,0c0,0,5.046,0.083,5,4.996c0,0,0.061,6.606-6.823,7.794H64v8.527H0V12.791z M53,5.996c0.062-1.888-2-1.999-2-1.999c-8.038-0.049-13,8.993-13,8.993C50.389,13.03,53,5.996,53,5.996z M13,3.997c0,0-1.983,0.024-2,1.999s2.81,6.995,15,6.995C26,12.991,20.979,3.981,13,3.997z M29.867,63.954H0V25.581h29.867V63.954z"/>',scenesend:'<path d="M0,24.889L64,0L46.222,64L24.889,46.222l24.889-32l-32,24.889L0,24.889z M10.667,39.111l14.222,10.667L14.222,60.444L10.667,39.111z"/>',taobao:'<path d="M48.988,48.946c-4.903,0-7.901-1.579-7.901-1.579l0.79-3.947l7.111,0.789c6.122,0,6.321-5.526,6.321-5.526V14.21c0-7.378-7.901-7.895-7.901-7.895c-6.463,0-15.012,3.158-15.012,3.158l3.16,1.579c0.142,1.015-3.16,4.737-3.16,4.737h20.543v3.947H41.086v3.947h11.852v3.947H41.086v9.473l4.741-2.368l-0.79-3.947l4.741-1.579l3.951,10.263l-5.531,2.368l-1.58-3.947c-5.47,3.996-14.222,4.737-14.222,4.737h-7.111c-4.661,0-5.531-5.526-5.531-5.526v-7.105h7.111v3.158c-0.14,5.157,7.111,4.737,7.111,4.737V27.631H21.333v-3.947h12.642v-3.947h-5.531c-0.316,2.196-3.951,3.158-3.951,3.158s-2.819-0.519-3.16-1.579c2.749-1.888,6.321-9.473,6.321-9.473c-4.473,0.22-8.691,6.316-8.691,6.316l-4.741-3.947C19.296,12.449,22.914,0,22.914,0l7.111,1.579c0.106,1.229-1.58,4.737-1.58,4.737c11.708-3.875,23.704-3.158,23.704-3.158C63.475,4.407,64,15,64,15v21.315C64,49,48.988,48.946,48.988,48.946z M11.062,10.263c-5.479,0-5.531-4.737-5.531-4.737c0-5.404,5.531-4.737,5.531-4.737c5.138,0,5.531,4.737,5.531,4.737C16.593,10.074,11.062,10.263,11.062,10.263z M2.37,18.157l3.951-5.526c11.83,10.053,11.062,12.631,11.062,12.631c-0.264,5.059-9.482,22.105-9.482,22.105L0,41.841L11.852,29.21c1.392-1.303,0-3.947,0-3.947C11.562,22.982,2.37,18.157,2.37,18.157z"/>',tieba:'<path d="M64,28.804v33.072H36.267c0,0-0.933,0.052-1.067-2.134V32.005c0,0-1.165-3.201,5.333-3.201V1.067h6.4v4.267H64v6.401H46.933v17.069H64z M42.667,36.272v19.203h13.867V36.272H42.667z M14.933,55.475c0,0-4.911,5.24-12.8,6.401l-1.067-4.267c0,0,8.079-3.243,9.6-7.468V13.869c0,0,0.682-2.067,4.267-2.134c0,0,3.289,0.126,3.2,2.134V46.94c0,0,0.469,6.066,11.733,10.668L28.8,62.943C28.8,62.943,22.857,64,14.933,55.475z M23.467,9.601c0,0,0.113-3.437-8.533-3.201c0,0-8.533,0.099-8.533,3.201V46.94H0V0h29.867v46.94h-6.4V9.601z"/>',time:'<path d="M57.094,17.342L39.191,4.248c3.421-4.74,10.201-5.651,15.145-2.035C59.28,5.829,60.514,12.602,57.094,17.342z M56.896,34.986c0.016,15.224-12.23,27.578-27.352,27.594C14.421,62.597,2.149,50.268,2.133,35.044C2.117,19.821,14.363,7.466,29.485,7.45C44.608,7.434,56.88,19.762,56.896,34.986z M29.492,14.27c-10.206,0.011-18.663,7.491-20.294,17.297H8.966v6.895h0.231c1.633,9.824,10.118,17.308,20.339,17.297C39.742,55.75,48.2,48.269,49.83,38.463h0.232v-6.895h-0.23C48.199,21.743,39.713,14.26,29.492,14.27z M14.103,38.463v-6.895H26.09V16.915h6.849v14.653v6.895H26.09H14.103z M4.692,2.213c4.944-3.616,11.724-2.705,15.145,2.035L1.935,17.342C-1.486,12.602-0.251,5.829,4.692,2.213z"/>',uc:'<path d="M53.093,32.265c-7.527-5.77-19.034-7.054-19.034-7.054c5.833-1.908,12.021-7.054,12.021-7.054c-0.333-6.053,2.003-8.061,2.003-8.061c1.492,1.376,3.005,6.046,3.005,6.046C64,21.39,61.107,32.265,61.107,32.265H53.093z M26.046,26.219c0,0-16.028,6.346-16.028,20.153c0,0,0.893,11.278,8.172,13.661C12.446,58.893,0,55.07,0,43.35c0-15.233,13.134-18.434,14.025-27.207c0,0-1.021-8.061-7.012-8.061c0,0-4.643,0.683-6.01,2.015c0,0,5.962-10.617,18.032-10.077c0,0,12.937,0.063,14.025,11.084C33.058,11.104,34.791,19.555,26.046,26.219z M18.189,60.034c1.721,0.342,2.848,0.446,2.848,0.446C19.991,60.48,19.048,60.315,18.189,60.034z M16.028,48.388c0,0,0.948-8.061,8.014-8.061c0,0,9.016,0.132,9.016,8.061c0,0-0.119,9.069-8.014,9.069C25.044,57.457,16.028,58.129,16.028,48.388z M20.035,48.388c0,4.649,4.007,5.038,4.007,5.038c4.47,0,5.009-4.031,5.009-4.031c0-4.625-5.009-5.038-5.009-5.038C19.821,44.233,20.035,48.388,20.035,48.388z M37.065,48.388c0,0-0.189-12.092-11.019-12.092c0,0-4.6-1.381-11.019,3.023c0,0,3.518-7.19,12.021-7.054c0,0,15.761,0.647,16.028,17.13c0,0-0.817,6.053-3.005,7.054c0,0,7.737-1.618,10.018,4.031H28.049C28.049,60.48,36.582,59.201,37.065,48.388z M46.081,41.334c0,0-4.805-11.215-21.037-12.092c0,0,8.813-2.856,17.03,1.008l8.014,5.038c0,0,1.677,0.997,5.009,1.008c0,0,6.234,0.472,7.012,4.031c0,0-5.923-1.36-8.014,0C54.095,40.327,50.536,44.644,46.081,41.334z"/>',voice:'<path d="M38.246,32.653c0,9.68-7.396,17.645-16.902,18.686v8.482h8.451V64H8.667v-4.18h8.451v-8.482C7.612,50.298,0.216,42.333,0.216,32.653c0-1.815-0.485-2.548,0-4.209h4.111c-0.629,1.624,0.114,2.365,0.114,4.209c0,8.079,6.621,14.629,14.79,14.629S34.02,40.732,34.02,32.653c0-1.843,0.743-2.584,0.114-4.209h4.111C38.731,30.105,38.246,30.838,38.246,32.653z M19.231,42.667h-1.028c-5.393,0-9.764-4.321-9.764-9.651V9.651C8.438,4.321,12.81,0,18.203,0h1.028c5.393,0,9.764,4.321,9.764,9.651v23.365C28.995,38.346,24.623,42.667,19.231,42.667z"/>',wechat:'<path d="M171.484,138.214l6.938,21.872l-26.761-14.913c-72.415-0.249-66.407-49.709-66.407-49.709c0-28.146,34.69-40.761,34.69-40.761c75.009-16.33,78.301,42.749,78.301,42.749C198.245,125.746,171.484,138.214,171.484,138.214z M122.245,78.086c-4.418,0-8,3.582-8,8c0,4.418,3.582,8,8,8c4.418,0,8-3.582,8-8C130.245,81.667,126.663,78.086,122.245,78.086z M165.245,78.086c-4.418,0-8,3.582-8,8c0,4.418,3.582,8,8,8c4.418,0,8-3.582,8-8C173.245,81.667,169.663,78.086,165.245,78.086z M90.209,69.616c-17.464,24.322-4.956,47.72-4.956,47.72c-2.767,2.24-7.929,1.988-7.929,1.988H61.466l-36.673,16.901l8.92-25.849C-1.755,92.678,0.015,60.668,0.015,60.668v-2.982C6.983-1.914,70.386,0.024,70.386,0.024c30.227-0.665,46.584,12.924,46.584,12.924c19.951,11.217,24.779,32.808,24.779,32.808C107.066,46.955,90.209,69.616,90.209,69.616z M41.245,30.086c-6.075,0-11,4.925-11,11s4.925,11,11,11s11-4.925,11-11S47.32,30.086,41.245,30.086z M108.245,41.086c0-6.075-4.925-11-11-11c-6.075,0-11,4.925-11,11s4.925,11,11,11C103.32,52.086,108.245,47.161,108.245,41.086z"/>',weibo:'<path d="M199.389,65.394c0,0-0.493,9.988-10.011,9.988c0,0-10.252-1.807-7.007-11.985c0,0,11.965-41.924-36.038-47.942c0,0-17.018,5.194-17.018-6.991c0,0,1.506-7.99,8.008-7.99C137.322,0.473,204.096-9.8,199.389,65.394z M143.329,40.425c0,0-8.008,1.063-8.008-6.992c0,0,2.411-5.993,7.007-5.993c0,0,34.003-5.033,30.032,32.96c0,0-1.923,5.993-6.006,5.993c0,0-8.008,0.682-8.008-7.99C158.345,58.403,162.869,40.425,143.329,40.425z M133.318,45.419c0,0,17.018,0.911,17.018,16.979c0,0,0.245,9.102-4.004,12.984c0,0,29.031,6.811,29.031,28.965c0,0-0.251,56.931-91.097,56.931c0,0-84.09,0.922-84.09-52.936c0,0-4.081-25.111,27.029-54.933c31.109-29.822,48.801-30.962,57.061-30.962c0,0,16.017-0.976,16.017,15.98c0,0-0.412,11.219-3.003,14.982C97.28,53.409,116.344,45.419,133.318,45.419z M78.259,71.387c0,0-49.884,3.469-58.062,42.948c0,0-0.603,30.22,52.055,34.958c0,0,54.006,2.183,66.07-36.955C138.324,112.337,151.405,74.021,78.259,71.387z M73.12,142.2c-26.866-0.565-28.931-22.871-28.931-22.871c-1.094-30.22,32.921-32.815,32.921-32.815c31.985-0.314,30.926,25.854,30.926,25.854C106.16,142.199,73.12,142.2,73.12,142.2z M67.135,110.379c0,0-11.971,1.423-11.971,9.944c0,0-1.051,8.95,9.976,8.95c0,0,10.974-1.898,10.974-9.944C76.113,119.328,77.207,110.379,67.135,110.379z M83.097,106.401c0,0-3.99-0.664-3.99,2.983c0,0-0.929,2.983,2.993,2.983c0,0,3.99-0.785,3.99-3.978C86.089,108.39,85.751,106.401,83.097,106.401z"/>',windows:'<path d="M28.984,59.594V33.416H63V64L28.984,59.594z M28.984,4.406L63,0v30.584H28.984V4.406z M0,33.416h26.149v25.487L0,55.231V33.416z M0,8.769l26.149-3.672v25.487H0V8.769z"/>',yixin:'<path d="M45.364,58.38c4.124,2.52,10.259,2.797,10.259,2.797C44.551,65,36.341,63.943,30.867,61.901C13.807,61.829,0,48.002,0,30.952C0,13.858,13.879,0,31,0s31,13.858,31,30.952C62,42.869,55.251,53.207,45.364,58.38z M31,14.977c-8.837,0-16,7.153-16,15.975c0,5.364,2.656,10.098,6.718,12.996c-3.185,4.404-11.86,5.579-11.86,5.579c19.676,4.767,29.433-4.088,31.788-6.672C44.924,39.93,47,35.688,47,30.952C47,22.129,39.837,14.977,31,14.977z"/>',
zhifubao:'<path d="M63.021,50L36.949,36.957c-10.737,11.987-22.813,10.87-22.813,10.87c-15.115,0-14.122-11.957-14.122-11.957C-0.088,22.841,15.222,25,15.222,25c8.559,0.109,18.468,3.261,18.468,3.261c3.55-4.164,4.345-9.783,4.345-9.783H10.877v-2.174h13.036V10.87H7.618V8.696h16.295V0h8.691v8.696h16.295v2.174H32.604v5.435h14.122c0.153,3.882-5.432,15.217-5.432,15.217l21.727,6.522V50z M14.136,28.261c0,0-11.95-2.295-11.95,7.609c0,0-1.54,7.609,10.863,7.609c0,0,11.464,0.271,17.381-9.783C30.431,33.696,23.002,28.261,14.136,28.261z"/>'}}(),function(e){function t(e){var t=document.getElementsByTagName("style")[0];t||(t=document.createElement("style"),head=document.head||document.getElementsByTagName("head")[0],t.type="text/css",head.appendChild(t));var i=document.createTextNode(e);t.appendChild(i)}function i(){var e=[{value:1,path:"1.7 0.1 0.1 0 -0.287 0 1.7 0.1 0 -0.287 0 0.1 1.6 0 -0.287 0 0 0 1.0 0"},{value:2,path:"2.1 -1.4 0.6 0.0 -0.12 -0.3 2.0 -0.3 0.0 -0.12 -1.1 -0.2 2.6 0.0 -0.12 0.0 0.0 0.0 1.0 0.0"},{value:3,path:"1.9 -0.3 -0.2 0 -0.341 -0.2  1.7 -0.1  0 -0.341 -0.1 -0.6 2.0 0 -0.341 0 0 0 1.0 0"},{value:4,path:"1.0 0.0 0.0 0.0 -0.26 0.0 1.1 0.0 0.0 -0.26 0.0 0.0 1.0 0.0 -0.26 0.0 0.0 0.0 1.0 0.0"},{value:5,path:"1.2 0.0 0.0 0.0 0.0 0.0 0.9 0.0 0.0 0.0 0.0 0.0 0.8 0.0 0.0 0 0 0 1.0 0"},{value:6,path:"0.8 0.3 0.1 0.0 0.182 0.1 0.9 0.0 0.0 0.182 0.1 0.3 0.7 0.0 0.182 0.0 0.0 0.0 1.0 0.0"},{value:7,path:"0.9 0 0 0 0.255 0 0.9 0 0 0.255 0 0 0.9 0 0.255 0 0 0 1.0 0"},{value:8,path:"0.6 0.3 0.1 0 0.28745 0.2 0.7 0.1 0 0.28745 0.2 0.3 0.4 0 0.28745 0 0 0 1.0 0"},{value:9,path:"0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0 0 0 1.0 0"},{value:10,path:"0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0 0 0 1 0"},{value:11,path:"4.8 -1.0 -0.1 0 -1.523 -0.5 4.4 -0.1 0 -1.523 -0.5 -1.0 5.2 0 -1.523 0 0 0 1.0 0"}];return e}function n(e,t){for(var i=0;i<e.length;i++){var n=[];$.each(t,function(t,a){var s,o=$(a).attr("style");if(o){for(var r=o.split(";"),l=0,c=r.length;l<c;l++)if(r[l].indexOf("fill:")>=0){s=r[l].split(":")[1];break}}else s=$(a).attr("fill");s===e[i].svgFill&&n.push(t)}),e[i].elements=n}return e}function a(e,t,i,n){var a={},s=e/t,o=i/n;return s>o?(a.width=i,a.height=i/s):(a.height=n,a.width=n*s),a}function o(e,t,i){var n,a=e.properties.lineChart,s=[],o="",r="",l="",c=[],d=[],p=[],u=[],h=[];i.datasets.forEach(function(e){u.push(e.strokeColor),h.push(e.fillColor)});for(var g=0;g<u.length;g++)"line"===a.chartType?u[g]=a.fillColors[g]:h[g]=a.fillColors[g];for(var m=a.segments,f=0;f<m.length;f++)n=m[f],o=isNaN(n.value1)||n.value1<0?0:n.value1,r=isNaN(n.value2)||n.value2<0?0:n.value2,l=isNaN(n.value3)||n.value3<0?0:n.value3,(n.label||o||r||l)&&(s.push(n.label),c.push(o),d.push(r),p.push(l));var v={labels:s,datasets:[{label:a.lengends[0],fillColor:h[0],strokeColor:u[0],pointColor:u[0],pointStrokeColor:"#fff",data:c},{label:a.lengends[1],fillColor:h[1],strokeColor:u[1],pointColor:u[1],pointStrokeColor:"#fff",data:d},{label:a.lengends[2],fillColor:h[2],strokeColor:u[2],pointColor:u[2],pointStrokeColor:"#fff",data:p}]},b=i.options;return a.options&&a.options.scaleFontColor&&(b.scaleFontColor=a.options.scaleFontColor),i.destroy(),i=new Chart(t).Line(v,b),i.datasets.forEach(function(e){var t=!0;e.points.forEach(function(e){e.value&&(t=!1)}),t?e.points.length=0:e.points.forEach(function(e){e.value||(e.value=0)})}),i.update(),i}function r(e,t,i){for(var n,a=i.options,s=e.properties.barChart,o=[],r="",l="",c="",d=[],p=[],u=[],h=s.segments,g=0;g<h.length;g++){var n=h[g];r=isNaN(n.value1)||n.value1<0?"":n.value1,l=isNaN(n.value2)||n.value2<0?"":n.value2,c=isNaN(n.value3)||n.value3<0?"":n.value3,(n.label||r||l||c)&&(o.push(n.label),d.push(r),p.push(l),u.push(c))}var m={labels:o,datasets:[{fillColor:s.fillColors[0],strokeColor:"rgba(0,0,0,0)",data:d,label:s.lengends[0]},{fillColor:s.fillColors[1],strokeColor:"rgba(0,0,0,0)",data:p,label:s.lengends[1]},{fillColor:s.fillColors[2],strokeColor:"rgba(0,0,0,0)",data:u,label:s.lengends[2]}]};return s.options&&s.options.scaleFontColor&&(a.scaleFontColor=s.options.scaleFontColor),i.destroy(),new Chart(t).Bar(m,a)}function l(e,t,i){var n=i.options,a="#000",s=e.properties.pieChart;s.options&&s.options.scaleFontColor&&(a=s.options.scaleFontColor),n.scaleFontColor=a,n.onAnimationComplete=function(){var e=this.chart.ctx,t=this.segments;e.textAlign="start",e.textBaseline="middle";for(var i=0,n=0;n<t.length;n++)i+=parseFloat(t[n].value);e.fillText(i,e.width/2-20,e.height/2,100);for(var n=0;n<t.length;n++){var s=t[n].startAngle+(t[n].endAngle-t[n].startAngle)/2,o=(t[n].outerRadius-t[n].innerRadius)/1.5+t[n].innerRadius,r=t[n].x+Math.cos(s)*o,l=t[n].y+Math.sin(s)*o;e.textAlign="center",e.textBaseline="middle",e.fillStyle=a,e.font="normal 12px Helvetica",e.fillText(t[n].value,r,l)}};var o=s;s.segments&&(o=s.segments);for(var r=0;r<o.length;r++)(isNaN(o[r].value)||o[r].value<0)&&(o[r].value="");return i.destroy(),new Chart(t).Pie(o,n)}function c(e){var t=[{value:300,color:"#57c7d4",label:"1月"},{value:150,color:"#3aa99e",label:"2月"},{value:100,color:"#f2a654",label:"3月"},{value:140,color:"#f96868",label:"4月"},{value:120,color:"#926dde",label:"5月"}],i={segmentShowStroke:!1,showTooltips:!1,scaleFontColor:"#000",legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><%if(segments[i].label){%><span style="background-color:<%=segments[i].fillColor%>"></span><%=segments[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx,t=this.segments;e.textAlign="start",e.textBaseline="middle";for(var i=0,n=0;n<t.length;n++)i+=parseFloat(t[n].value);e.fillText(i,e.width/2-20,e.height/2,100);for(var n=0;n<t.length;n++){var a=t[n].startAngle+(t[n].endAngle-t[n].startAngle)/2,s=(t[n].outerRadius-t[n].innerRadius)/1.5+t[n].innerRadius,o=t[n].x+Math.cos(a)*s,r=t[n].y+Math.sin(a)*s;e.textAlign="center",e.textBaseline="middle",e.fillStyle="#000",e.font="normal 12px Helvetica",e.fillText(t[n].value,o,r)}}},n=new Chart(e).Pie(t,i);return n}function d(e){var t={labels:["1月","2月","3月","4月","5月"],datasets:[{fillColor:"#62a8ea",strokeColor:"rgba(0,0,0,0)",data:[60,70,80,56,40],label:"图例1"},{fillColor:"#926dde",strokeColor:"rgba(0,0,0,0)",data:[80,56,40,93,112],label:"图例2"},{fillColor:"#f2a654",strokeColor:"rgba(0,0,0,0)",data:[160,86,140,123,23],label:"图例3"}]},i={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].fillColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx;e.fillStyle=this.scale.textColor,e.font="normal 12px Helvetica",e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(t){t.bars.forEach(function(t){e.fillText(t.value,t.x,t.y)})})}},n=new Chart(e).Bar(t,i);return n}function p(e,t){var i=["rgba(255,255,255,0)","rgba(255,255,255,0)","rgba(255,255,255,0)"],n=["rgba(146,109,222,1)","rgba(87,199,212,1)","rgba(242,166,84,1)"],a=!1,s='<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].pointColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>';"curve"===t&&(i=["rgba(146, 109, 222,0.2)","rgba(87,199,212,0.2)","rgba(242,166,84,0.2)"],a=!0,s='<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].fillColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>');var o={labels:["1月","2月","3月","4月","5月"],datasets:[{label:"图例1",fillColor:i[0],strokeColor:n[0],pointColor:n[0],pointStrokeColor:"#fff",data:[28,24,40,19,27]},{label:"图例2",fillColor:i[1],strokeColor:n[1],pointColor:n[1],pointStrokeColor:"#fff",data:[123,132,146,118,189]},{label:"图例3",fillColor:i[2],strokeColor:n[2],pointColor:n[2],pointStrokeColor:"#fff",data:[201,232,256,215,278]}]},r={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,bezierCurve:a,legendTemplate:s,animation:!1,onAnimationComplete:function(){var e=this.chart.ctx,t=this.scale.max;e.font=this.scale.font,e.fillStyle=this.scale.textColor,e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(i){i.points.forEach(function(n,a){var s=5;t-n.value<10&&(s=0),0===a?e.fillText(n.value,n.x+10,n.y-s):a===i.points.length-1?e.fillText(n.value,n.x-10,n.y-s):e.fillText(n.value,n.x,n.y-s)})})}},l=new Chart(e).Line(o,r);return l}function u(e,t){"view"===y.mode&&t.properties.url&&$(e).click(function(){var e=t.properties.url;isNaN(e)?window.open(e):eqxiu.pageScroll(e)})}function h(e){$(e).bind("touchstart mousedown",function(e){e.stopPropagation()})}function g(e){e.focus(function(){eqxiu.pauseAutoFlip()}).blur(function(){$(document).trigger("startAutoFlip")})}function m(e){for(var t=$(e).find("a[data]"),i=0;i<t.length;i++)if(t[i]&&"view"===y.mode){$(t[i]).css("cursor","pointer");var n=$(t[i]).attr("data");!function(e){t[i].removeAttribute("href"),$(t[i]).click(function(){eqxiu.pageScroll(e)})}(n)}}function f(t,i,n){var a=PREFIX_S1_URL+"scene/msg/list?sceneId="+t;n&&(a+="&lastTime="+n),a+="&date="+(new Date).getTime(),$.ajax({type:"GET",url:a,success:function(t){if(t.success){for(var n,a,s,o=document.createDocumentFragment(),r=t.list,l=0;l<r.length;l++)a=r[l].url?'<div class="headimg" style="background-image:url('+r[l].url+')"></div>':'<div class="headimg headimg-bg"><div class="logo-scale"><em class="eqf-eqxiu"></em></div></div>',n=$('<div class="record">'+a+'<div class="name">'+r[l].name+'</div><div class="mes">'+r[l].content+'</div><div class="time">'+e.DateFormat(r[l].createTime,"MM月DD日")+"</div></div>").get(0),o.appendChild(n);10===r.length?s=r[r.length-1].createTime:0===r.length&&(s=0),n&&o.appendChild(n),i(o,s)}}})}function v(e,t){if(t.trigger){var i=$(e);i.attr("data-event","1120603"),k&&clearTimeout(k),t.trigger.sends&&t.trigger.sends.length&&$.each(t.trigger.sends,function(e,t){i.bind(utilTrigger.getSendType(t.type).name,function(){k=setTimeout(function(){$.each(t.handles,function(e,t){var i=utilTrigger.getHandleType(t.type).name;$.each(t.ids,function(e,t){var n;n=$("#inside_"+t,".phone-view").length?$("#inside_"+t,".phone-view"):$("#inside_"+t),n.trigger(i)})})},1e3*t.delay)})})}}function b(t,i){if(i.sound){var n=$(t),a=$("#media").get(0);0===i.sound.src.indexOf("http://")?i.sound.src=i.sound.src:i.sound.src=PREFIX_FILE_HOST+i.sound.src,utilSound.addAudio(t,i.sound.src),n.click(function(){utilSound.play(t,function(){a&&e.executePlay()},function(){a&&e.executePause()})})}}var y=e.templateParser("jsonParser",function(){function e(e){return function(t,i){e[t]=i}}function i(e,i){try{var n=c[(""+e.type).charAt(0)](e,i)}catch(a){return}if(n){var s=$('<li comp-drag comp-rotate class="comp-resize comp-rotate inside" id="inside_'+e.id+'" num="'+e.num+'" ctype="'+e.type+'"></li>'),o=(""+e.type).charAt(0);if("3"!==o&&"1"!==o&&s.attr("comp-resize",""),"p"===o?s.removeAttr("comp-rotate"):"1"===o?s.removeAttr("comp-drag"):"2"===o?s.addClass("wsite-text"):"x"===o?s.addClass("show-text"):"4"===o?(e.properties.imgStyle&&$(n).css(e.properties.imgStyle),s.addClass("wsite-image")):"n"===o?s.addClass("wsite-image"):"h"===o?s.addClass("wsite-shape"):"5"===o?s.addClass("wsite-input"):"6"===o?s.addClass("wsite-button"):"8"===o?s.addClass("wsite-button"):"v"===o?s.addClass("wsite-video"):"b"===o&&(s.addClass("wsite-boards"),s.attr("min-h",60),s.attr("min-w",230)),"v"===(""+e.type).charAt(0)&&s.addClass("wsite-video"),e.properties&&e.properties.lock&&s.addClass("alock"),s.mouseenter(function(){$(this).addClass("inside-hover")}),s.mouseleave(function(){$(this).removeClass("inside-hover")}),"edit"===y.mode||"x"!==(""+e.type).charAt(0)){var r=$('<div class="element-box-contents">'),l=$('<div class="element-box">').append(r.append(n));s.append(l),"5"!==(""+e.type).charAt(0)&&"6"!==(""+e.type).charAt(0)&&"r"!==e.type&&"c"!==e.type&&"a"!==e.type&&"8"!==e.type&&"l"!==e.type&&"s"!==e.type&&"i"!==e.type&&"h"!==e.type&&"z"!==e.type||"edit"!==i||$(n).before($('<div class="element" style="position: absolute; height: 100%; width: 100%;z-index: 1;">'))}var d,p=e.fonts||e.css.fontFamily||e.fontFamily;if("2"===o||"x"===o){for(var u=e.content,h=/font-family:(.*?);/g,g=[],m=[];null!==(g=h.exec(u));)m.push(g[1].trim());if(1!==m.length||"defaultFont"!==m[0]&&"moren"!==m[0]||(p=null),p){if("view"===y.mode&&e.css.fontFamily&&window.scene&&(window.scene.publishTime||!mobilecheck()&&!tabletCheck()||(d="@font-face{font-family:"+e.css.fontFamily+';src: url("'+e.properties.localFontPath+'") format("truetype");}',t(d))),"object"==typeof p&&p.constructor===Object){if(!jQuery.isEmptyObject(p))for(var f in p)w[f]||("edit"===y.mode?d="@font-face{font-family:"+f+";src: url("+PREFIX_FILE_HOST+p[f]+") format(woff);}":window.scene&&window.scene.publishTime&&(d="@font-face{font-family:"+f+';src: url("'+PREFIX_S2_URL+"fc/"+f+"_"+e.sceneId+"_"+scene.publishTime+'.woff") format("woff");}'),t(d),w[f]=!0)}else w[p]||("edit"===y.mode?d="@font-face{font-family:"+p+";src: url("+PREFIX_FILE_HOST+e.preWoffPath+") format(woff);}":window.scene&&window.scene.publishTime&&(d="@font-face{font-family:"+p+';src: url("'+PREFIX_S2_URL+"fc/"+p+"_"+e.sceneId+"_"+scene.publishTime+'.woff") format("woff");}'),t(d),w[p]=!0);"edit"===y.mode&&localStorage.setItem("shoppingFontFamily",JSON.stringify(w))}}if(e.css){var v=320-parseInt(e.css.left,10);if(s.css({width:v}),s.css({width:e.css.width,height:e.css.height,left:e.css.left,top:e.css.top,zIndex:e.css.zIndex,bottom:e.css.bottom,transform:e.css.transform,opacity:e.css.opacity}),0!==e.css.boxShadowSize&&""+e.css.boxShadowSize!="0"||(e.css.boxShadow="0px 0px 0px rgba(0,0,0,0.5)"),"edit"!==y.mode&&"x"===(""+e.type).charAt(0))return s.append(n),s.find(".element-box").css({borderStyle:e.css.borderStyle,borderWidth:e.css.borderWidth,borderColor:e.css.borderColor,borderTopLeftRadius:e.css.borderTopLeftRadius,borderTopRightRadius:e.css.borderTopRightRadius,borderBottomRightRadius:e.css.borderBottomRightRadius,borderBottomLeftRadius:e.css.borderBottomLeftRadius,boxShadow:e.css.boxShadow,backgroundColor:e.css.backgroundColor,width:"100%",height:"100%",overflow:"hidden"}),s.find("img").css({width:"100%"}),s;isAndroid()&&isWeixin()&&""+e.type=="4"&&"0px"!==e.css.borderRadius&&0===e.css.borderWidth&&e.properties.anim&&(e.css.borderWidth=1,e.css.borderColor="rgba(0,0,0,0)");var b=$.extend(!0,{},e.css),x=$.extend(!0,b,{opacity:""});delete x.fontFamily,l.css(x).css({width:"100%",height:"100%",transform:"none"}),l.children(".element-box-contents").css({width:"100%",height:"100%"}),"4"!==(""+e.type).charAt(0)&&"n"!==(""+e.type).charAt(0)&&"p"!==(""+e.type).charAt(0)&&"h"!==(""+e.type).charAt(0)&&"t"!==(""+e.type).charAt(0)&&"z"!==(""+e.type).charAt(0)&&$(n).css({width:e.css.width,height:e.css.height}),"w01"!==e.type&&"w02"!==e.type||$(n).css({lineHeight:e.css.height+"px"}),"h"===(""+e.type).charAt(0)&&($(n).find("g").length?$(n).find("g").attr("fill",e.css.color):$(n).children().attr("fill",e.css.color),l.children(".element-box-contents").css("position","relative"))}return s}}function n(e){for(var t=0;t<e.length-1;t++)for(var i=t+1;i<e.length;i++)if(parseInt(e[t].css.zIndex,10)>parseInt(e[i].css.zIndex,10)){var n=e[t];e[t]=e[i],e[i]=n}for(var a=0;a<e.length;a++)e[a].css.zIndex=a+1+"";return e}function a(e,t,a,s){t=t.find(".edit_area");var o,r=e.elements;if(r)for(r=n(r),o=0;o<r.length;o++)if(r[o].sceneId=e.sceneId,""+r[o].type=="3"){var l=c[(""+r[o].type).charAt(0)](r[o],t);"edit"===a&&d[(""+r[o].type).charAt(0)]&&d[(""+r[o].type).charAt(0)](l,r[o])}else{var h=i(r[o],a);if(!h)continue;t.append(h);for(var g=0;g<u.length;g++)u[g](h,r[o],a);p[(""+r[o].type).charAt(0)]&&(p[(""+r[o].type).charAt(0)](h,r[o]),"edit"!==a&&(v(h,r[o]),b(h,r[o]))),"edit"===a&&d[(""+r[o].type).charAt(0)]&&(s||d[(""+r[o].type).charAt(0)](h,r[o]))}}function s(){return d}function o(){return c}function r(e){u.push(e)}function l(){return u}var c={},d={},p={},u=[],h=containerWidth=320,g=containerHeight=486,m={getComponents:o,getEventHandlers:s,addComponent:e(c),bindEditEvent:e(d),bindAfterRenderEvent:e(p),addInterceptor:r,getInterceptors:l,wrapComp:i,disEvent:!1,mode:"view",parse:function(e){var t=$('<div class="edit_wrapper" data-scene-id="'+e.def.sceneId+'"><ul eqx-edit-destroy id="edit_area'+e.def.id+'" paste-element class="edit_area weebly-content-area weebly-area-active"></div>'),i=this.mode=e.mode;this.def=e.def,e.disEvent&&(this.disEvent=!0),"view"===i&&tplCount++;var n=$(e.appendTo);return containerWidth=n.width(),containerHeight=n.height(),ratioX=h/containerWidth,ratioY=g/containerHeight,a(e.def,t.appendTo($(e.appendTo)),i,e.xb)}};return m});y.addInterceptor(function(e,t,i){eqxCommon.animation(e,t,i,y.def.properties)}),y.addComponent("1",function(e){var t=document.createElement("div");if(t.id=e.id,t.setAttribute("class","element comp_title"),e.content&&(t.textContent=e.content),e.css){var i,n=e.css;for(i in n)t.style[i]=n[i]}if(e.properties.labels)for(var a=e.properties.labels,s=0;s<a.length;s++)$('<a class = "label_content" style = "display: inline-block;">').appendTo($(t)).html(a[s].title).css(a[s].color).css("width",100/a.length+"%");return t});var w={};y.addComponent("2",function(e){var t=document.createElement("div");return t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_paragraph editable-text"),e.content&&(e.properties.anim&&e.properties.anim.length&&"typer"===e.properties.anim[0].type&&"view"===y.mode?t.innerHTML="":t.innerHTML=e.content),t.style.cursor="default",e.css.fontSize&&(t.style.fontSize=e.css.fontSize+"px"),t}),y.addComponent("x",function(e){function t(){i=document.createElement("div"),i.id=e.id,i.setAttribute("ctype",e.type),i.setAttribute("class","element comp_paragraph editable-text"),e.content&&(i.innerHTML=e.content),i.style.cursor="default"}var i;return!mobilecheck()&&window.top===window.self&&$(".create_left").get(0)&&(y.mode="edit"),t(),i}),y.addComponent("3",function(t,i){var n,a=document.createElement("div");if("edit"===y.mode?(n=i?i.parent(".edit_wrapper"):$("#nr .edit_wrapper"),a.setAttribute("class","wrapper-background"),a.setAttribute("id",t.id)):"view"===y.mode&&(n=i?i.parent(".edit_wrapper"):$("#edit_area"+y.def.id).parent(".edit_wrapper"),a.setAttribute("id","wrapper-background"+y.def.id)),2!==t.properties.croptype||"edit"===y.mode||y.def.istpl){var s="100%";$(a).prependTo(n),2!==t.properties.croptype||y.def.istpl||(s=486*t.properties.pageLength+"px",$(a).parent().css("overflow","visible")),$(a).css({width:"100%",height:s})}var o,r=new Image;if(t.properties.imgSrc){o=t.properties.imgSrc;var l=/.svg/;if(e.isMobileApp()||l.test(o)||(o="view"===y.mode?2===t.properties.croptype&&t.properties.pageLength?e.qiniuZoom({css:{width:320,height:486*t.properties.pageLength}},o):e.qiniuZoom({css:{width:320,height:486}},o):e.qiniuZoom(null,o)),e.isMobileApp()){var c=/\?imageMogr2/;c.test(o)&&(o=/^http.*/.test(o)?o:moblieViewImgBg+o)}if(2===t.properties.croptype&&"view"===y.mode&&!y.def.istpl){var d="";return d=/^http.*!/.test(o)?"url("+o+")":"url("+PREFIX_FILE_HOST+o+")",i.parent().css({backgroundImage:d,height:486*(t.properties.pageLength-1)+(mobilecheck()?$(document).height():486)+"px"}),a}/^http.*!/.test(o)?(r.src=o,a.style.backgroundImage="url("+o+")"):(r.src=PREFIX_FILE_HOST+o,a.style.backgroundImage="url("+PREFIX_FILE_HOST+o+")"),a.style.backgroundOrigin="element content-box",a.style.backgroundSize="cover",a.style.backgroundPosition="50% 50%",t.effect&&("scaleUp"===t.effect.type?$(a).css({animation:"scaleUp 7s ease 1s","animation-fill-mode":"both"}):"scaleDown"===t.effect.type&&$(a).css({animation:"scaleDown 7s ease 1s","animation-fill-mode":"both"}))}else t.properties.bgColor&&(a.style.backgroundColor=t.properties.bgColor,t.properties.pageLength&&"edit"===y.mode&&$(a).css({height:486*t.properties.pageLength+"px"}).parent().css("overflow","visible"));return a}),y.addComponent("4",function(t){var n,a=new RegExp(e.getDomain(PREFIX_FILE_HOST)),s=/^http.*/.test(t.properties.src)?t.properties.src:PREFIX_FILE_HOST+t.properties.src,o=/\?imageMogr2/;e.isMobileApp()?o.test(s)&&(s=/^http.*/.test(s)?s:moblieViewImgBg+s):s=s.replace(OLD_FILE_HOST,PREFIX_FILE_HOST);var r=/.svg/;if(a.test(s)&&!r.test(s)&&(s="view"===y.mode?e.qiniuZoom(t,s):e.qiniuZoom(null,s)),t.properties.filter){if(t.properties.filter.type){var l=i(),c=l[t.properties.filter.type-1];n=document.createElement("div");var d;d=mobilecheck()?'<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><image width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+s+'" filter="url(#'+t.id+')"></image><defs><filter id="'+t.id+'"><feColorMatrix class="saturation" color-interpolation-filters="sRGB" type="matrix" values="'+c.path+'"></feColorMatrix></filter></defs></g></svg>':'<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><image width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+s+'" filter="url('+window.location.href+"#"+t.id+')"></image><defs><filter id="'+t.id+'"><feColorMatrix class="saturation" color-interpolation-filters="sRGB" type="matrix" values="'+c.path+'"></feColorMatrix></filter></defs></g></svg>',n.innerHTML=d}}else n=document.createElement("img"),n.id=t.id,n.setAttribute("ctype",t.type),n.setAttribute("class","element comp_image editable-image"),n.src=s;return""+t.type=="403"&&n.setAttribute("data-event","1120611"),""+t.type=="403"&&t.properties.wxSrc&&isWeixin()&&(n.style.display="none"),n}),y.addComponent("h",function(e){var t,i;if(e.properties.src)return t=document.createElementNS(eqxiuSvg.NAMESPACE,"svg"),t.setAttribute("class","element svg-element"),$.ajax({type:"GET",url:PREFIX_FILE_HOST+e.properties.src,dataType:"xml",success:function(i){var a=i.getElementsByTagName("svg"),s=parseFloat($(a).attr("width")),o=parseFloat($(a).attr("height")),r=$(a).find('[fill], [style*="fill"]'),l=e.properties.items?e.properties.items:[];if(e.properties.items)if(l[0].elements||(e.properties.items=n(l,r)),r.length===l.length)for(var c=0;c<l.length;c++)r.eq(c).css({fill:l[c].fill});else $.each(r,function(e){for(var t=0;t<l.length;t++)for(var i=l[t].elements,n=0;n<i.length;n++)e===i[n]&&(""!==l[t].fill?r.eq(e).css({fill:l[t].fill}):r.eq(e).css({fill:"none"}))});else{var d=[],p={};$.each(r,function(e,t){var i=$(t).attr("style");if(i){for(var n=i.split(";"),a=0,s=n.length;a<s;a++)if(n[a].indexOf("fill:")>=0){d.push(n[a].split(":")[1]);break}}else d.push($(t).attr("fill"))});for(var u=0;u<d.length;u++)p[d[u]]||(p[d[u]]=1,"none"!==d[u]?l.push({fill:d[u],svgFill:d[u]}):l.push({fill:"",svgFill:"none"}));e.properties.items=n(l,r)}viewBoxVal="0 0 "+s+" "+o;var h=t.parentNode;h.removeChild(t),t=a[0],h.appendChild(t),t.setAttribute("viewBox",viewBoxVal),t.setAttribute("preserveAspectRatio","none"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.id=e.id,t.setAttribute("class","element svg-element")}}),t;if(e.properties.type.indexOf("symbol")<0){var t=document.createElementNS(eqxiuSvg.NAMESPACE,"svg");return t.id=e.id,t.setAttribute("class","element svg-element"),t.setAttribute("xmlns",eqxiuSvg.NAMESPACE),t.setAttribute("version","1.1"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("preserveAspectRatio","none"),i=eqxiuSvg.ShapeFromType(e.properties.type),i.setAttribute("fill","#555"),t.appendChild(i),s=eqxiuSvg.boundingBox(i),viewBox=[Math.round(s.x)||0,Math.round(s.y)||0,Math.round(s.width)||32,Math.round(s.height)||32].join(" "),t.setAttribute("viewBox",viewBox),t}return t=document.createElement("div"),i=eqxiuSvg.ShapeFromType(e.properties.type,100,100,e.id,e.css.color),t='<svg id="'+e.id+'" class="element svg-element" ctype="'+e.type+'" xmlns="'+eqxiuSvg.NAMESPACE+'" version="1.1" width="100%" height="100%" preserveAspectRatio="xMidYMid" viewBox="'+e.properties.viewBox+'">'+i+"</svg>"}),y.addComponent("v",function(e){var t=document.createElement("a");return t.setAttribute("class","element video_area"),t.id=e.id,t.setAttribute("ctype",e.type),e.properties.src&&t.setAttribute("videourl",e.properties.src),t}),y.addComponent("5",function(e){var t=document.createElement("textarea");return t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_input editable-text"),t.setAttribute("maxlength","300"),e.properties.required&&t.setAttribute("required",e.properties.required),e.properties.placeholder&&t.setAttribute("placeholder",e.properties.placeholder),t.setAttribute("name","eq[f_"+e.id+"]"),t.style.width="100%",t}),y.addComponent("r",function(e){var t=$('<div class="element comp_radio editable-text" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.properties.required),t.attr("title",e.title),t.attr("name","eq[f_"+e.id+"]");var i=$('<div class="radio-title">'+e.title+"</div>");e.properties.titleStyle&&i.css(e.properties.titleStyle),t.append(i);var n=$('<div class="options"></div>'),a=JSON.parse(e.choices);return $.each(a.options,function(t,i){var s=$('<div class="option-group"><label class="option-label" for="'+(e.id+""+(t+1))+'" data-event="11208"><input class="option" id="'+(e.id+""+(t+1))+'" type="radio" name="eq[f_'+e.id+']" value="'+i.id+'" data-event="11208">'+i.label+"</label></div>");e.properties.optionStyle&&t<a.options.length-1&&s.css(e.properties.optionStyle),n.append(s)}),t.append(n),t.width("100%"),t.get(0)}),y.addComponent("c",function(e){var t=$('<div class="element comp_radio editable-text" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.properties.required),t.attr("title",e.title),t.attr("name","eq[f_"+e.id+"]");var i=$('<div class="radio-title">'+e.title+"(可多选)</div>");e.properties.titleStyle&&i.css(e.properties.titleStyle),t.append(i);var n=$('<div class="options"></div>'),a=JSON.parse(e.choices);return $.each(a.options,function(t,i){var s=$('<div class="option-group"><label class="option-label" for="'+(e.id+""+(t+1))+'" data-event="11209"><input class="option" id="'+(e.id+""+(t+1))+'" type="checkbox" name="eq[f_'+e.id+']" value="'+i.id+'" data-event="11209">'+i.label+"</label></div>");e.properties.optionStyle&&t<a.options.length-1&&s.css(e.properties.optionStyle),n.append(s)}),t.append(n),t.width("100%"),t.get(0)}),y.addComponent("a",function(e){var t=$('<div class="element comp_rating editable-text" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.properties.required),t.attr("title",e.title),t.attr("name","eq[f_"+e.id+"]"),t.append($('<div class="rating-title">'+e.title+"</div>"));for(var i=$('<div class="rating-icons"></div>'),n=0;n<5;n++)i.append($('<i class="'+e.properties.icon+"-line "+e.properties.size+'">').css("color",e.properties.color));return t.append(i),t.append($('<input type="hidden" name="eq[f_'+e.id+']" value="">')),t.width("100%"),t.get(0)}),y.addComponent("p",function(t){if(t.properties&&t.properties.children){var i=t.css.width,n=t.css.height,s=$('<div id="'+t.id+'" class="slider element" ctype="'+t.type+'"></div>');t.properties.bgColor&&s.css("backgroundColor",t.properties.bgColor);var o=/.svg/,r=/\?imageMogr2/;return $.each(t.properties.children,function(l,c){var d=a(c.width,c.height,i,n),p=c.src;e.isMobileApp()||o.test(p)||(p="view"===y.mode?e.qiniuZoom(t,p):e.qiniuZoom(null,p)),e.isMobileApp()&&r.test(p)&&(p=/^http.*/.test(p)?p:moblieViewImgBg+p);var u=$('<img src="'+PREFIX_FILE_HOST+p+'">');u.css({margin:(n-d.height)/2+"px "+(i-d.width)/2+"px",width:d.width,height:d.height}),s.append(u)}),utilPictures.deleteInterval(t.id),s.get(0)}}),y.addComponent("n",function(e){if(e.properties&&e.properties.pics.length){var t=$('<div id="'+e.id+'" class="random-event element comp_image editable-image" ctype="'+e.type+'"></div>');e.css.width||(e.css.width="180px");var i=180*parseInt(e.properties.pics[0].height,10)/parseInt(e.properties.pics[0].width,10);return e.css.height||(e.css.height=i+"px"),$.each(e.properties.pics,function(e,i){var n=$('<img src="'+PREFIX_FILE_HOST+i.src+'">');n.css({width:"100%",height:"100%",display:"none"}),0===e&&(n.css({display:"block"}),t.css({width:"100%",height:"100%"})),t.append(n)}),t.get(0)}}),y.addComponent("6",function(e){var t=document.createElement("button");if(t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_button editable-text"),t.setAttribute("data-event","11201"),e.properties.title){var i=e.properties.title.replace(/ /g,"&nbsp;");t.innerHTML=i}return t.style.width="100%",t}),y.addComponent("8",function(e){var t=document.createElement("a");t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_anchor editable-text"),t.setAttribute("data-event","1120602");var i=null;return e.properties.imgSrc?(i=$('<img style="width: 100%; height: 100%;" src="'+(PREFIX_FILE_HOST+e.properties.imgSrc)+'"/>'),$(t).html(i),"view"===y.mode&&$(t).attr("href","tel:"+e.properties.number)):e.properties.title&&(i=e.properties.title.replace(/ /g,"&nbsp;"),$(t).html(i),"view"===y.mode&&$(t).attr("href","tel:"+e.properties.number)),t.style.cursor="default",t.style.width="100%",t}),y.addComponent("l",function(e){var t=document.createElement("a");t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_anchor editable-text"),t.setAttribute("data-event","1120601");var i=null;return e.properties.imgSrc?(i=$('<img style="width: 100%; height: 100%;" src="'+(PREFIX_FILE_HOST+e.properties.imgSrc)+'"/>'),$(t).html(i)):e.properties.title&&(i=e.properties.title.replace(/ /g,"&nbsp;"),$(t).html(i)),t.style.cursor="default",t.style.width="100%",t}),y.addComponent("s",function(e){var t=document.createElement("a");t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_anchor editable-text"),t.setAttribute("data-event","1120604");var i=null;return e.properties.imgSrc?(i=$('<img style="width: 100%; height: 100%;" src="'+(PREFIX_FILE_HOST+e.properties.imgSrc)+'"/>'),$(t).html(i)):e.properties.title&&(i=e.properties.title.replace(/ /g,"&nbsp;"),$(t).html(i)),t.style.cursor="default",t.style.width="100%",t}),y.addComponent("i",function(t){var i=$('<div class="element comp_counter not-voted editable-text" id="'+t.id+'"></div>');i.attr("ctype",t.type),i.attr("name","eq[f_"+t.id+"]"),i.addClass(t.properties.layout).addClass(t.properties.size);var n=$('<div class="counter-container"></div>');t.properties.imgSrc?(n.append($('<img class="counter-elem counter-icon" style="width: 115px; height: 115px; margin: 0 auto;" src="'+(PREFIX_FILE_HOST+t.properties.imgSrc)+'"/>')),n.attr("data-event","1120609")):(n.append($('<i class="counter-elem counter-icon '+t.properties.icon+'">').css("color",t.properties.color)),"eqf-love"===t.properties.icon?n.attr("data-event","1120605"):"eqf-good"===t.properties.icon?n.attr("data-event","1120606"):"eqf-flower2"===t.properties.icon?n.attr("data-event","1120607"):"eqf-vote"===t.properties.icon&&n.attr("data-event","1120608"));var a=$('<span class="counter-elem counter-number">0</span>').css("color",t.properties.color);if(n.append(a),"view"===y.mode?e.counterValues&&e.counterValues.then(function(i){var n=i.map[t.id]||0;a.attr("data-counter-number",n);var s=e.fixedNum(n);a.text(s)}):i.removeClass("not-voted"),i.width("100%"),"counter-tb"===t.properties.layout){var s=0;s=t.properties.imgSrc?"counter-l"===t.properties.size?77:"counter-m"===t.properties.size?71:66:"counter-l"===t.properties.size?40:"counter-m"===t.properties.size?30:20,n.css("margin-top",-s)}return"edit"!==y.mode&&setTimeout(function(){var e={width:"auto","min-width":t.css.width};i.css(e),i.parents("li.comp-resize").css(e)},100),i.append(n),t.css.lineHeight&&i.css("line-height",t.css.lineHeight),i.get(0)}),y.addComponent("d",function(t){var i=$('<div class="element comp_counter editable-text" id="'+t.id+'"></div>');i.attr("ctype",t.type),i.addClass(t.properties.layout).addClass(t.properties.size);
var n=$('<div class="counter-container"></div>');n.append($('<i class="counter-elem counter-icon '+t.properties.icon+'">').css("color",t.properties.color));var a=$('<span class="counter-elem counter-number">0</span>').css("color",t.properties.color);if(n.append(a),"view"===y.mode&&e.showCount&&e.showCount.then(function(t){var i=e.fixedNum(t),n=i||0;a.text(n)}),i.width("100%"),"counter-tb"===t.properties.layout){var s=0;s="counter-l"===t.properties.size?40:"counter-m"===t.properties.size?30:20,n.css("margin-top",-s)}return i.append(n),t.css.lineHeight&&i.css("line-height",t.css.lineHeight),i.get(0)}),y.addComponent("7",function(e){var t=document.createElement("div");if(t.id="map_"+e.id,t.setAttribute("class","element comp_map_wrapper"),e.content&&(t.textContent=e.content),e.css){var i,n=e.css;for(i in n)t.style[i]=n[i]}return t.style.height="250px",t}),y.addComponent("m",function(e){var t,i,n=new qq.maps.LatLng(e.properties.lat?e.properties.lat:39.916527,e.properties.lng?e.properties.lng:116.397128);t=document.createElement("div"),t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element"),"edit"===y.mode?i={draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,center:n,zoom:e.properties.zoom?e.properties.zoom:11}:(i={disableDefaultUI:!0,center:n,zoom:e.properties.zoom?e.properties.zoom:11},$(t).on("mousedown mousemove mouseup mouseleave touchstart touchmove touchend",function(e){e.stopPropagation()}));var a=new qq.maps.Map(t,i);if("edit"===y.mode&&$(t).data("map",a),e.content&&""!==e.content){var s=new qq.maps.Label({position:n,map:a,content:e.content});"edit"===y.mode&&$(t).data("label",s)}var o=new qq.maps.Point(25,5),r=new qq.maps.Size(34,34),l=new qq.maps.Point(0,0),c=new qq.maps.MarkerImage(PREFIX_HOST+"/assets/images/marker.png",r,l,o),d=new qq.maps.Marker({map:a,position:a.getCenter()});return d.setIcon(c),$(t).data("marker",d),t}),y.addComponent("w",function(e){var t,i=document.createElement("a");return""+e.type=="w01"?(t="element comp_wechat_play",i.innerHTML='<span style="font-size:16px;" class="eqf-nosy"></span>'):""+e.type=="w02"&&(t="element comp_wechat_hear",i.innerHTML=e.properties.title,i.setAttribute("data-event","1120612")),i.id=e.id,i.setAttribute("class",t),i.setAttribute("ctype",e.type),i}),y.addComponent("t",function(e){var t=$('<div class="create-chart" id="chart-'+e.id+'"></div>'),i=document.createElement("h5");i.setAttribute("class","chart-title"),t.append(i);var n=document.createElement("canvas");n.id=e.id,n.setAttribute("ctype",e.type),t.append(n);var a=document.createElement("div");a.id="legend-"+e.id,t.append(a);var s,u=e.properties.chartType,h=n.getContext("2d"),g=x(h);if(mobilecheck()&&g>1){var m=parseFloat(e.css.width),f=parseFloat(e.css.height)/2;n.width=m,n.height=f,n.style.width=m/g+"px",n.style.height=f/g+"px",h.scale(g,g)}"pie"===u?(s=c(h),"edit"===y.mode&&$(n).data("pieChart",s)):"bar"===u?(s=d(h),"edit"===y.mode&&$(n).data("barChart",s)):"line"!==u&&"curve"!==u||(s=p(h,u),"edit"===y.mode&&$(n).data("lineChart",s)),e.properties.chartTitle&&(i.innerHTML=e.properties.chartTitle),"pie"===u&&e.properties.pieChart&&(s=l(e,h,s),$(n).data("pieChart",s)),"bar"===u&&e.properties.barChart&&(s=r(e,h,s),$(n).data("barChart",s)),"line"!==u&&"curve"!==u||!e.properties.lineChart||(s=o(e,h,s),$(n).data("lineChart",s)),a.innerHTML=s.generateLegend();var v=e.properties.legPosition;return"position-align"===v?$(a).addClass("position-align"):"position-right"===v?$(a).addClass("position-right"):"position-none"===v&&$(a).addClass("position-none"),mobilecheck()||($(n).attr("width")&&($(n).removeAttr("width"),$(n).css("width","100%")),$(n).attr("height")&&($(n).removeAttr("height"),$(n).css("height","50%")),s.update()),t.get(0)});var x=function(e){var t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,i=(window.devicePixelRatio||1)/t;return i};y.addComponent("z",function(e){var t=$('<div style="width:100%;height:100%" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.required);var i=$('<button type="button" class="btn dropdown-toggle btn-default" style="width:100%;height:100%;background-color:#ffffff;color:#666;padding-top: 0px;border: 1px solid rgb(8,161,239);font-family: Open Sans, sans-serif;font-weight: 400;font-size: 16px;border-top-left-radius: 0px;border-bottom-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;position:absolute;top:0px;left:0px;pointer-events:none;padding-bottom: 0px;padding-right:0px;padding-left:0px;overflow: hidden" data-toggle="dropdown" title="Nothing selected" aria-expanded="false"><span class="filter-option pull-left" style="margin-left: 8px;float:left;width:calc(100% - 42px);width:-moz-calc(100% - 42px);width:-webkit-calc(100% - 42px);overflow:hidden;text-align: left;" id="selectButton'+e.id+'">'+e.showText+'</span>&nbsp;<span class="bs-caret" style="float:right;margin-right:10px;"><span class="caret" style="display: inline-block;width: 0px;height: 0px;vertical-align: middle;border-top:4px dashed;border-right: 4px solid transparent;border-left: 4px solid transparent;margin-left: 0px;"></span></span></button>');t.append(i);var n=JSON.parse(e.choices).options,a=$('<select style="width:100%;height:100%; " name="eq[f_'+e.id+']"></select>');a.attr("ctype",e.type),a.attr("data-event","11210");var s=null,o=0;return s=e.placeholderText===e.showText?$('<option value="'+e.placeholderText+'" selected>'+e.placeholderText+"</option>"):$('<option value="'+e.placeholderText+'">'+e.placeholderText+"</option>"),a.append(s),$.each(n,function(t,i){i.label===e.showText?(o++,s=$('<option value="'+i.label+'" selected>'+i.label+"</option>")):s=$('<option value="'+i.label+'">'+i.label+"</option>"),a.append(s)}),$(a).change(function(){$("#selectButton"+e.id).text($(a).val())}),t.append(a),t}),y.addComponent("b",function(e){var t,i,n=document.createElement("div"),a=document.createDocumentFragment(),s=$('<div class="tool"><a class="replay">'+e.properties.meslabel+'</a><a class="more">'+e.properties.morelabel+"</a></div>").get(0);if(a.appendChild(s),"view"!==y.mode||y.disEvent){t=[{mes:"赞一个！好多新功能哦~",name:"匿名用户",time:"2月1日 13:00"},{mes:"赞一个！好多新功能哦~",name:"匿名用户",time:"2月1日 12:58"},{mes:"赞一个！好多新功能哦~",name:"匿名用户",time:"2月1日 12:55"}];for(var o=0;o<t.length;o++)i=$('<div class="record"><div class="headimg headimg-bg"><div class="logo"><em class="eqf-logo"></em></div></div><div class="name">'+t[o].name+'</div><div class="mes">'+t[o].mes+'</div><div class="time">'+t[o].time+"</div></div>").get(0),a.appendChild(i)}else f(e.sceneId,function(t,i){if(0===i){var a=$('<div class="empty-boards"><image style="margin-top:-20px;" src="'+CLIENT_CDN+"view/images/"+e.properties.style+'_boards.png" /></div>').get(0);n.appendChild(a)}else n.appendChild(t)});return n.appendChild(a),n.id=e.id,n.setAttribute("class","element boards-"+e.properties.style),n.setAttribute("ctype",e.type),n}),y.addComponent("g",function(t,i){var n=document.createElement("div");if("edit"===i&&$('<div class="over-ele"></div><div class="ad-contain"></div>').appendTo(n),t.content){var a=e.isMobileApp()?e.getDomain(PREFIX_HOST):location.host,s=$('<iframe id="iframe-'+t.id+'" scrolling="no" frameborder="0" width="100%" height="100%" src="http://'+a+'/advertisement.html"></iframe>'),o=s.get(0);o.onload=function(){var e=o.contentDocument,i=o.contentWindow.jQuery;i(e.body).append(i(t.content))},"edit"===i?$(n).find(".ad-contain").append(s):s.appendTo(n),setTimeout(function(){if(window.frames["iframe-"+t.id].contentWindow.TencentGDT)var e=setInterval(function(){$("#"+t.id).find("iframe").contents().find("#gdt_mask")[0]&&($("#"+t.id).find("iframe").contents().find("#gdt_mask").css({display:"none"}),clearInterval(e))},50)},1e3)}return t.css.zIndex=999,n.id=t.id,n.setAttribute("class","element"),n.setAttribute("ctype",t.type),n}),y.bindAfterRenderEvent("8",function(e,t){e=$("a",e)[0];var i={id:t.sceneId,num:t.properties.number};if("view"===y.mode){var n=function(){$.ajax({cache:!0,type:"POST",url:PREFIX_S1_URL+"eqs/dial",data:$.param(i),async:!1,error:function(){alert("Connection error")}})};e.addEventListener("click",n)}}),y.bindAfterRenderEvent("l",function(e,t){if(e=$("a",e)[0],"view"===y.mode){var i=t.properties.url;$(e).click(function(){isNaN(i)?window.open(i):eqxiu.pageScroll(i)})}}),y.bindAfterRenderEvent("s",function(){}),y.bindAfterRenderEvent("i",function(t,i){if("view"===y.mode&&!y.disEvent){var n=$(t).find(".comp_counter");n.click(function(){var a={sceneId:i.sceneId,fieldId:i.id},s=$(t);$.ajax({cache:!0,type:"POST",url:PREFIX_S1_URL+"eqs/scene/counter",data:$.param(a),async:!1,error:function(){alert("Connection error")},success:function(){n.unbind("click"),s.find(".comp_counter").removeClass("not-voted");var t=$(".counter-number",s),i=(parseInt(t.attr("data-counter-number"),10)||0)+1;t.attr("data-counter-number",i);var a=e.fixedNum(i);$(".counter-number",s).text(a)}})})}}),y.bindAfterRenderEvent("4",function(e,t){"view"===y.mode&&(""+t.type=="4"?($(e).attr("data-event","1120601"),u(e,t)):""+t.type=="403"&&e.on("click",function(){return isWeixin()?void $(document).trigger("wx.img.upload",t.id):void alert("请在微信中点击我！")}))}),y.bindAfterRenderEvent("x",function(e,t){u(e,t)}),y.bindAfterRenderEvent("h",function(e,t){$(e).attr("data-event","1120601"),u(e,t)}),y.bindAfterRenderEvent("5",function(e,t){var i=mobilecheck();h($(e).find("textarea")),g($(e).find("textarea")),"view"===y.mode&&i&&parseFloat(t.css.top)>=200&&($(e).find("textarea").focus(function(){$(e).closest(".edit_area").css({top:"-150px"})}),$(e).find("textarea").blur(function(){$(e).closest(".edit_area").css({top:0})}))}),y.bindAfterRenderEvent("r",function(e){"view"===y.mode&&h($(e).find("label"))}),y.bindAfterRenderEvent("c",function(e){"view"===y.mode&&h($(e).find("label"))}),y.bindAfterRenderEvent("v",function(e,t){"view"===y.mode&&$(e).click(function(){$(e).hide(),$("#audio_btn").hasClass("video_exist")&&($("#audio_btn").hide(),$("#media")[0].pause()),utilSound.pause(),$('<div class="video_mask page_effect lock" id="mask_'+t.id+'"></div>').appendTo($(e).closest(".m-img")),$('<a class = "close_mask eqf-wrong" id="close_'+t.id+'"></a>').appendTo($(e).closest(".m-img")),$(t.properties.src).appendTo($("#mask_"+t.id)).attr("style","position: absolute;top:0; min-height: 45%; max-height: 100%; top: 20%;").attr("width","100%").removeAttr("height"),$("#close_"+t.id).bind("click",function(){$(e).show(),$("#mask_"+t.id).remove(),$("#close_"+t.id).remove(),$("#audio_btn").hasClass("video_exist")&&$("#audio_btn").show(function(){$("#media")[0].play()})})})}),y.bindAfterRenderEvent("2",function(e,t){m(e),u(e,t)}),y.bindAfterRenderEvent("6",function(t,i){if(t=$("button",t)[0],"view"===y.mode){var n={REQUIRED:"为必填项！",WRONG_PHONE_NUMBER_FORMAT:"电话号码格式错误！",WRONG_EMAIL_FORMAT:"邮箱格式错误！",FILL_OUT_THE_FORM:"请填写表单！",DUPLICATED_SUBMISSION:"请不要重复提交！",THANKS_FOR_PARTICIPATION:"谢谢您的参与！"},a=function(e,t,a){var s=!0,o={};if($("textarea",a).each(function(){if(s){if("required"===$(this).attr("required")&&""===$(this).val().trim())return alert($(this).attr("placeholder")+n.REQUIRED),void(s=!1);if("502"===$(this).attr("ctype")&&""!==$(this).val().trim()){var e=new RegExp(/^\d{3,15}$/);if(!e.test($(this).val()))return alert("电话输入有误，请输入3-15位数字"),void(s=!1)}if("503"===$(this).attr("ctype")&&""!==$(this).val().trim()){var t=new RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/g);if(!t.test($(this).val()))return alert("邮箱格式错误！"),void(s=!1)}o[$(this).attr("name")]=$(this).val()}}),$("input:checked",a).each(function(){var e=$(this);o[e.attr("name")]?o[e.attr("name")]+=","+e.val():o[e.attr("name")]=e.val()}),$('.comp_radio[required="required"]',a).each(function(){var e=$(this);o[e.attr("name")]||(alert(e.attr("title")+n.REQUIRED),s=!1)}),$('input[type="hidden"]',a).each(function(){o[$(this).attr("name")]=$(this).val()}),$('.comp_rating[required="required"]',a).each(function(){var e=$(this);o[e.attr("name")]&&""+o[e.attr("name")]!="0"||(alert(e.attr("title")+"为必填项！"),s=!1)}),s){var r=!1;if($.isEmptyObject(o))return void(r=!0);for(var l in o)if(""!==o[l]){r=!0;break}if(!r)return void alert("请填写表单！");$("select",a).each(function(){var e=$(this).attr("name").substring(5,$(this).attr("name").length-1),t=$(this).find("option:first").val(),i=$(this).val();if("required"===$("#"+e).attr("required")){if(t===i)return alert("你还没有选择下拉列表！"),void(s=!1)}else t===i&&$(this).val(null);o[$(this).attr("name")]=$(this).val()}),s&&$.ajax({cache:!0,type:"POST",url:PREFIX_S1_URL+"eqs/r/"+t,data:$.param(o),async:!1,error:function(){alert("Connection error")},success:function(){$(e).unbind("click").click(function(){alert("请不要重复提交！")});var t;i.properties.layout||(i.properties.layout="rating-l",i.properties.text=""),i.properties.text.trim()||"rating-l"!==i.properties.layout?("rating-m"===i.properties.layout&&(t=i.properties.checkedLink?'<div class="feedback-box"><div class="feedback-form"><img src = "'+(PREFIX_FILE_HOST+i.properties.imgSrc)+'"/><a href="'+i.properties.link+'" style="margin-top:20px;"><span>'+i.properties.text+'</span></a><button class="feedback-button">我知道了</button></div></div>':'<div class="feedback-box"><div class="feedback-form"><img src = "'+(PREFIX_FILE_HOST+i.properties.imgSrc)+'"/><span style="margin-top:20px;">'+i.properties.text+'</span><button class="feedback-button">我知道了</button></div></div>'),"rating-s"===i.properties.layout&&(t=i.properties.checkedLink?'<div class="feedback-box"><div class="feedback-form"><a href="'+i.properties.link+'"><span>'+i.properties.text+'</span></a><img src = "'+(PREFIX_FILE_HOST+i.properties.imgSrc)+'" style="margin-top:20px;"/><button class="feedback-button">我知道了</button></div></div>':'<div class="feedback-box"><div class="feedback-form"><span>'+i.properties.text+'</span><img src = "'+(PREFIX_FILE_HOST+i.properties.imgSrc)+'" style="margin-top:20px;"/><button class="feedback-button">我知道了</button></div></div>'),"rating-l"===i.properties.layout&&(t=i.properties.checkedLink?'<div class="feedback-box"><div class="feedback-form"><a href="'+i.properties.link+'"><span>'+i.properties.text+'</span></a><button class="feedback-button">我知道了</button></div></div>':'<div class="feedback-box"><div class="feedback-form"><span>'+i.properties.text+'</span><button class="feedback-button">我知道了</button></div></div>')):t='<div class="feedback-box"><div class="feedback-form"><span>谢谢您的参与!</span><button class="feedback-button">我知道了</button></div></div>',$(t).prependTo(".z-current");var n=(0-parseInt($(".feedback-form").css("height"),10))/2;$(".feedback-form").css({marginTop:n+"px"}),$(".z-current").on("click",".feedback-button",function(){$(".feedback-box").animate({opacity:0},{duration:1e3,complete:function(){$(".feedback-box").remove()}})})}})}};$(t).bind("click",function(){if(e.isMobileApp())return void alert("场景还没有发布呢，请发布后提交内容！");var i,n=$(t).parents(".edit_wrapper").attr("data-scene-id");i=n?$(t).parents(".nr").find('.edit_wrapper[data-scene-id="'+n+'"]'):$(t).parents(".nr"),a(this,n,i)})}}),y.bindAfterRenderEvent("7",function(e,t){var i=new BMap.Map("map_"+t.id,{enableMapClick:!1}),n=new BMap.Point(t.properties.x,t.properties.y),a=new BMap.Marker(n);i.addOverlay(a);var s=new BMap.Label(t.properties.markTitle,{offset:new BMap.Size(20,(-10))});a.setLabel(s),i.disableDoubleClickZoom(),i.centerAndZoom(n,15)}),y.bindAfterRenderEvent("p",function(e,t){if(!$(e).closest(".page_tpl_container ").length){$(e).children(".element-box").css("overflow","visible"),utilPictures.deleteInterval(t.id);var i=$(e).find("#"+t.id);new flux.slider(i,{autoplay:t.properties.autoPlay,delay:t.properties.interval,pagination:!1,transitions:[utilPictures.getPicStyle(t.properties.picStyle).name],width:t.css.width,height:t.css.height,bgColor:t.properties.bgColor,onStartEnd:function(e){utilPictures.addInterval(t.id,e)}})}}),y.bindAfterRenderEvent("a",function(e,t){function i(e){a.each(function(t,i){$(i).removeClass(o).addClass(o+"-line"),t<=e&&$(i).removeClass(o+"-line").addClass(o)})}var n=$(e);if("view"===y.mode){var a=n.find("i"),s=n.find("input"),o=t.properties.icon;a.each(function(e,t){$(t).attr("data-event","11211"),$(t).bind("click",function(){i(e),s.val(e+1)}),$(t).bind("mouseenter",function(){i(e)})}),n.find(".rating-icons").bind("mouseleave",function(){i(parseInt(s.val(),10)-1)}),h(n.find(".rating-icons"))}}),y.bindAfterRenderEvent("w",function(e,t){"view"===y.mode&&(h($(e)),$(e).on("mousedown touchstart",function(e){if(e.preventDefault(),isWeixin())"w01"===t.type?$(document).trigger("wx.audio.play",t.id):"w02"===t.type&&$(document).trigger("wx.audio.record",t.id);else if("w01"===t.type){var i=document.createElement("audio");i.src=t.properties.src,i.play();var n=$("#media").get(0);n.pause()}else"w02"===t.type&&alert("请在微信中点我！")}).on("mouseup touchend",function(){isWeixin()&&"w02"===t.type&&$(document).trigger("wx.audio.recordend",t.id)}))}),y.bindAfterRenderEvent("g",function(e){e.attr("data-event","11212")}),y.bindAfterRenderEvent("b",function(t,i){function n(){if(r.find(".boards-panel").length)r.find(".boards-panel").show();else{r.append($('<div class="boards-panel boards-'+i.properties.style+'"><div class="boards-top"><div class="head">留言板<em class="eqf-wrong"></em></div><div class="boards-form"><textarea maxlength="140" class="content-text"></textarea><span class="content-tip">0/140</span><a class="record-btn" data-event="11207">提交留言</a></div><div class="spline-con"><span>更多留言</span><span class="spline"></span></div></div><div class="boards-con"><div class="list"></div></div>'+l+"</div>")),s=r.find(".record-btn"),iphoneCheck()&&r.find(".boards-con").addClass("ios-boards-con");var t=0;s.on("click",function(){if(e.isMobileApp())return void alert("场景还没有发布呢，请发布后提交内容！");if(!t){var i=r.find(".boards-panel .content-text").val();if(!$.trim(i))return void alert("留言不能为空!");t=10,s.text("提交留言("+t+"秒)"),s.css("backgroundColor","#b4b4b4");var n=setInterval(function(){t--,s.text("提交留言("+t+"秒)"),t||(s.css("backgroundColor","").text("提交留言"),clearInterval(n))},1e3),a={sceneId:c,content:i,url:"",name:"匿名用户"};weChatUser&&weChatUser.headimgurl&&(a.name=weChatUser.nickname,a.url=weChatUser.headimgurl),$.ajax({type:"POST",url:PREFIX_URL+"scene/form/send/msg",data:$.param(a),error:function(){alert("Connection error")},success:function(e){if(e.success){alert("留言成功，谢谢参与！");var t='<div class="headimg headimg-bg"><div class="logo-scale"><em class="eqf-eqxiu"></em></div></div>';weChatUser.headimgurl&&(t='<div class="headimg" style="background-image:url('+weChatUser.headimgurl+')"></div>'),$(".z-current #"+d).find(".empty-boards").length&&$(".z-current #"+d).find(".empty-boards").remove(),$(".z-current #"+d).find(".tool").after($('<div class="record">'+t+'<div class="name">'+e.obj.name+'</div><div class="mes">'+e.obj.content+'</div><div class="time">刚刚</div></div>')),r.find(".list").prepend($('<div class="record clearfix">'+t+'<div class="name">'+e.obj.name+'</div><div class="mes">'+e.obj.content+'</div><div class="time">刚刚</div></div>'))}}})}}),r.find(".boards-panel .content-text").on("input",function(e){var t=e.target.value.length+e.target.value.split("\n").length-1;r.find(".boards-panel .content-tip").html(t+"/140")})}r.find(".boards-panel").on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()}),r.find(".z-current").hide();var n=$('<div class="more-mes">查看更多</div>'),o=r.find(".list");o.empty();var p=o.get(0);o.append(n),f(c,function(e,t){a=t,p.insertBefore(e,n.get(0)),t||(n.html("没有更多"),n.unbind("click"))}),n.on("click",function(){f(c,function(e,t){a=t,o.get(0).insertBefore(e,n.get(0)),t||(n.html("没有更多"),n.unbind("click"))},a)})}if("view"===y.mode&&!y.disEvent){var a,s,o=$(t),r=mobilecheck()?$(document.body):$(".nr"),l=mobilecheck()?'<div class="boards-bottom"></div>':"",c=i.sceneId,d=i.id;o.find(".tool a").on("click",function(e,t){e.isTrigger&&!t||e.isTrigger&&"longPage"===t&&!mobilecheck()||($.isEmptyObject(weChatUser)&&isWeixin()?wechatUtils.weChatAuth(function(){n()},i.pageId):n())}),r.on("click",".boards-panel .eqf-wrong",function(){r.find(".boards-panel .list").empty(),r.find(".boards-panel").hide(),r.find(".z-current").show()})}});var k}(window.eqShow);var tplCount=0,eqxCommon=function(){var e=function(e){var t,i,n=e.type;return"typer"===n&&(t="typer"),0===n&&(t="fadeIn"),1===n&&(i=e.direction,0===i&&(t="fadeInLeft"),1===i&&(t="fadeInDown"),2===i&&(t="fadeInRight"),3===i&&(t="fadeInUp")),6===n&&(t="wobble"),5===n&&(t="rubberBand"),7===n&&(t="rotateIn"),8===n&&(t="flip"),9===n&&(t="swing"),2===n&&(i=e.direction,0===i&&(t="bounceInLeft"),1===i&&(t="bounceInDown"),2===i&&(t="bounceInRight"),3===i&&(t="bounceInUp")),3===n&&(t="bounceIn"),4===n&&(t="zoomIn"),10===n&&(t="fadeOut"),11===n&&(t="flipOutY"),12===n&&(t="rollIn"),13===n&&(t="lightSpeedIn"),14===n&&(t="bounceOut"),15===n&&(t="rollOut"),16===n&&(t="lightSpeedOut"),17===n&&(i=e.direction,0===i&&(t="fadeOutRight"),1===i&&(t="fadeOutDown"),2===i&&(t="fadeOutLeft"),3===i&&(t="fadeOutUp")),18===n&&(t="zoomOut"),19===n&&(i=e.direction,0===i&&(t="bounceOutRight"),1===i&&(t="bounceOutDown"),2===i&&(t="bounceOutLeft"),3===i&&(t="bounceOutUp")),20===n&&(t="flipInY"),21===n&&(t="tada"),22===n&&(t="jello"),23===n&&(t="flash"),26===n&&(t="twisterInDown"),27===n&&(t="puffIn"),28===n&&(t="puffOut"),29===n&&(t="slideDown"),30===n&&(t="slideUp"),24===n&&(t="flipInX"),25===n&&(t="flipOutX"),31===n&&(t="twisterInUp"),32==n&&(t="vanishOut"),33==n&&(t="vanishIn"),t},t=function(e,t,i,n,a){function s(e,n,a,o,r){if(a.length&&l<a.length){if("typer"==n[l]){var c=e.find(".element"),d=a[l].interval,p=a[l].delay,u=function(){for(var e=c.find("a[data]"),t=0;t<e.length;t++)if(e[t]&&"view"===i){$(e[t]).css("cursor","pointer");var n=$(e[t]).attr("data");!function(i){e[t].removeAttribute("href"),$(e[t]).click(function(){eqxiu.pageScroll(i)})}(n)}},h=function(){u(),clearInterval(c.data("typed").timeout),c.removeData("typed"),l++,s(e,n,a)},g=function(){c.data("typed")&&(clearInterval(c.data("typed").timeout),c.removeData("typed")),c.empty(),c.typed({strings:[t.content],contentType:"html",showCursor:!1,typeSpeed:1e3*d||0,startDelay:1e3*p||0,callback:h})};if(o&&r.top>486&&"view"==i){var m=function(e,t){Math.abs(t)>r.top&&(g(),$(document).unbind("pageScrollPos",m))};return void $(document).bind("pageScrollPos",m)}g()}e.css("animation","");e.get(0);if(e.css("animation",n[l]+" "+a[l].duration+"s ease "+a[l].delay+"s "+(a[l].countNum?a[l].countNum:"")),"view"==i?(a[l].count&&l==a.length-1&&e.css("animation-iteration-count","infinite"),e.css("animation-fill-mode","both")):(e.css("animation-iteration-count","1"),e.css("animation-fill-mode","backwards")),a[l].linear&&e.css("animation-timing-function","linear"),o&&r.top>486&&"view"==i){e.css("display","none");var f=function(t,i){Math.abs(i)>r.top&&(e.css("display","block"),$(document).unbind("pageScrollPos",f))};$(document).bind("pageScrollPos",f)}e.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){l++,s(e,n,a)})}}if(t.trigger&&t.trigger.receives&&t.trigger.receives.length&&!a&&"view"==i)for(var o=t.trigger.receives,r=0;r<o.length;r++)if(1==o[r].type&&o[r].ids.length)return;var l=0;if(t.properties&&t.properties.anim){var c=[];t.properties.anim.length?c=t.properties.anim:c.push(t.properties.anim);var d=$(".element-box",e);d.attr("element-anim","");for(var p,u=[],h=[],r=0,g=c.length;r<g;r++)null!=c[r].type&&c[r].type!=-1&&(p=eqxCommon.convertType(c[r]),u.push(p),h.push(c[r]));if(n&&n.scale)return;t.properties.anim.trigger?e.click(function(){s(d,p,t.properties.anim)}):n&&n.longPage?s(d,u,h,!0,t.css):s(d,u,h)}},i=function(e,t){var i,n=$(e);if(t.trigger&&t.trigger.receives&&t.trigger.receives.length){$.each(t.trigger.receives,function(e,a){if(a.ids.length){var s=utilTrigger.getHandleType(a.type).name;"show"!=s&&"randomEvent"!=s||n.hide(),"hide"==s&&n.show(),n.bind(s,function(e,a){if("show"==s)$(this).show(),i||(i=!0,eqxCommon.animation(n,t,"view",null,!0));else if("hide"==s)$(this).hide(),i=!1;else if("randomEvent"==s){eqShow.playTriggerSound(),$(this).show();var o=Math.floor(Math.random()*t.properties.pics.length);$(this).find("img").css({display:"none"}),$(this).find("img").eq(o).css({display:"block"})}})}})}},n=function(){var e,t,i=window.navigator,n=["language","browserLanguage","systemLanguage","userLanguage"];if($.isArray(i.languages))for(e=0;e<i.languages.length;e++)if(t=i.languages[e],t&&t.length)return t;for(e=0;e<n.length;e++)if(t=i[n[e]],t&&t.length)return t;return null};return{convertType:e,animation:t,bindTrigger:i,getFirstBrowserLanguage:n}}();eqShow.clearTyperText=function(e){if(e&&e.elements){var t=e.elements;$.each(t,function(e,t){if(t.properties&&t.properties.anim){var i=t.properties.anim;$.each(i,function(e,i){0==e&&"typer"==i.type&&$("#inside_"+t.id).find(".element").empty()})}})}},eqShow.isMobileApp=function(){return!!window.viewData},eqShow.setPageHis=function(e){if(mobilecheck()&&e){var t=eqShow.getQueryString("toPage"),i=location.href;t?t!==""+e&&(i=i.replace(t,e)):i+=(/\?/.test(i)?"&":"?")+"toPage="+e,window.history.replaceState({title:$("title").html(),url:i},$("title").html(),i)}},eqShow.getShowCount=function(e){return this.showCount=$.ajax({type:"GET",url:PREFIX_S1_URL+"eqs/scene/pv?sceneId="+e,xhrFields:{withCredentials:!0},error:function(){alert("Connection error")},crossDomain:!0}),this.showCount},eqShow.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t);return i?unescape(i[2]):null},eqShow.delQueStr=function(e,t){var n="";if(e.indexOf("?")===-1)return e;n=e.substr(e.indexOf("?")+1);var a=[],s="";if(n.indexOf("&")!==-1){a=n.split("&");for(i in a)a[i].split("=")[0]!=t&&(s=s+a[i].split("=")[0]+"="+a[i].split("=")[1]+"&");return e.substr(0,e.indexOf("?"))+"?"+s.substr(0,s.length-1)}return a=n.split("="),a[0]==t?e.substr(0,e.indexOf("?")):e},eqShow.getDomain=function(e){var t="null";"undefined"!=typeof e&&null!=e||(e=window.location.href);var i=/.*\:\/\/([^\/]*).*/,n=e.match(i);return"undefined"!=typeof n&&null!=n&&(t=n[1]),t},eqShow.DateFormat=function(time,format){var z={M:time.getMonth()+1,d:time.getDate(),h:time.getHours(),m:time.getMinutes(),s:time.getSeconds()};return format=format.replace(/(M+|d+|h+|m+|s+)/g,function(v){return((v.length>1?"0":"")+eval("z."+v.slice(-1))).slice(-2)}),format.replace(/(y+)/g,function(e){return time.getFullYear().toString().slice(-e.length)})},eqShow.fixedNum=function(e){var t;return e<1e4?t=e:e>=1e4&&e<1e8?t=(e/1e4).toFixed(2)+"万":e>=1e8&&(t=(e/1e8).toFixed(2)+"亿"),t},eqShow.showProgressBar=function(e,t,i){if(e.obj.property.slideNumber){var n=$('<div class="progress"></div>'),a=$("<span></span>"),s=$('<em class="page-tip"></em>');n.append(a).append(s),i&&e.obj.property.slideDisplay?i.append(n.css("display",e.obj.property.slideDisplay)):$("#nr").append(n.css("display","block"))}var o=function(){e.obj.property.slideNumber&&a&&setTimeout(function(){var e=$(".z-active").get(0)?$(".z-active").get(0):$(".z-current").get(0);if(e){var i=$(e).find(".m-img").attr("id").substring(4),o=t.length,r=i/o,l=100;s.text(i+"/"+o),a.css("width",parseFloat(n.width())*r),$(e).find(".lock").length&&(l=0),n.css("z-index",l)}},100)};o(),t.eq(0).find(".u-arrow-bottom").css("bottom","30px"),eqShow.progressInterval=setInterval(function(){o()},300)},eqShow.selectElement=function(e){var t;return t=$("#inside_"+e,".phone-view").length?$("#inside_"+e,".phone-view"):$("#inside_"+e)},eqShow.substtrCharacters=function(e,t){if(e&&(e=e.replace(/\n|\r/g," ")),e&&e.length>t/2){var i=e.replace(/[^\x00-\xff]/g,"xx");if(i.length>t){var n=i.substring(0,t).replace(/xx/g,"中").length;e=e.substring(0,n)}}return e},eqShow.getCharactersLen=function(e){var t=e.replace(/[^\x00-\xff]/g,"xx");return t.length},eqShow.getRGB=function(e){if(e=e.toLowerCase(),e.indexOf("rgba")>=0){var t=e.split(",");t[0]=t[0].replace("rgba","rgb"),t.pop(),t[t.length-1]+=")",e=t.join(",")}return e},eqShow.convertToHexColor=function(e){if(e=e.toLowerCase(),e.indexOf("rgb")>=0){var t=e.split(","),i=t[0].substring(t[0].indexOf("(")+1);i=parseInt(i,10).toString(16),i=i.length<2?"0"+i:i;var n=parseInt(t[1],10).toString(16);n=n.length<2?"0"+n:n;var a=t[2].substring(0,t[2].indexOf(")"));a=parseInt(a,10).toString(16),a=a.length<2?"0"+a:a,e="#"+i+n+a}return e},eqShow.responsiveImage=function(e,t,i,n,a){var s=new Image;s.src=e,s.onload=function(s){var o,r,l=this;$.each(t,function(e,t){t.elements&&t.elements.length&&$.each(t.elements,function(e,t){if(t.id==i){var n=parseInt(t.css.width),a=parseInt(t.css.height);l.width/l.height>=n/a?(o=n,r=l.height*(n/l.width)):(r=a,o=l.width*(a/l.height))}})}),a.css({display:"block",width:o+"px",height:r+"px","margin-top":(parseInt(n.height())-r)/2+"px","margin-left":(parseInt(n.width())-o)/2+"px"}).attr("src",e)}},eqShow.getCookieId=function(){var e="",t="C_ID=",i=document.cookie,n=i.indexOf(t);if(n!=-1){n+=t.length;var a=i.indexOf(";",n);a==-1&&(a=i.length),e=i.substring(n,a)}return e},eqShow.delayLoadJSAndCSS=function(e,t,i){var n,a;if(t||(t=e.substr(e.lastIndexOf(".")+1)),"js"==t){var s=document.getElementsByTagName("script");for(a=0;a<s.length;a++)if(s[a].src&&s[a].src.indexOf(e)!=-1||s[a].title==i)return s[a];n=document.createElement("script"),n.type="text/javascript",n.src=e,i&&(n.title=i)}else{if("css"!=t)return;var o=document.getElementsByTagName("link");for(a=0;a<o.length;a++)if(o[a].href&&o[a].href.indexOf(e)!=-1||o[a].title==i)return o[a];n=document.createElement("link"),n.rel="stylesheet",n.type="text/css",n.href=e,i&&(n.title=i),n.disabled=!1}var r=document.getElementsByTagName("head")[0];return r.appendChild(n),n},eqShow.copyToClipboard=function(e){var t,i,n="_hiddenCopyText_",a="INPUT"===e.tagName||"TEXTAREA"===e.tagName;if(a)s=e,t=e.selectionStart,i=e.selectionEnd;else{if(s=document.getElementById(n),!s){var s=document.createElement("textarea");s.style.position="absolute",s.style.left="-9999px",s.style.top="0",s.id=n,document.body.appendChild(s)}s.textContent=e.textContent}var o=document.activeElement;s.focus(),s.setSelectionRange(0,s.value.length);var r;try{r=document.execCommand("copy")}catch(l){r=!1}return o&&"function"==typeof o.focus&&o.focus(),a?e.setSelectionRange(t,i):s.textContent="",r},eqShow.getUrlParameter=function(e){var t,i,n=decodeURIComponent(window.location.search.substring(1)),a=n.split("&");for(i=0;i<a.length;i++)if(t=a[i].split("="),t[0]===e)return void 0===t[1]||t[1]};var listPages=[];eqShow.qiniuZoom=function(e,t){var i=/\?imageMogr2/;if(i.test(t))return t+"/strip";if(e&&e.css&&e.css.width&&e.css.height){var n,a,s=parseInt(e.css.width,10),o=parseInt(e.css.height,10);mobilecheck()?(n=2.2*s,a=2.2*o):tabletCheck()?(n=s,a=o):(n=1.1*s,a=1.1*o);var r=parseInt(n,10)>parseInt(a,10)?parseInt(n,10):parseInt(a,10);return t+"?imageMogr2/thumbnail/"+r+"x"+r+">/strip"}return t+"?imageMogr2/strip"},function(e){e.fn.qrcode=function(t){"string"==typeof t&&(t={text:t}),t=e.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},t);var i=function(){var e=new QRCode(t.typeNumber,t.correctLevel);e.addData(t.text),e.make();var i=document.createElement("canvas");i.width=t.width,i.height=t.height;for(var n=i.getContext("2d"),a=t.width/e.getModuleCount(),s=t.height/e.getModuleCount(),o=0;o<e.getModuleCount();o++)for(var r=0;r<e.getModuleCount();r++){n.fillStyle=e.isDark(o,r)?t.foreground:t.background;var l=Math.ceil((r+1)*a)-Math.floor(r*a),c=Math.ceil((o+1)*a)-Math.floor(o*a);n.fillRect(Math.round(r*a),Math.round(o*s),l,c)}return i},n=function(){var i=new QRCode(t.typeNumber,t.correctLevel);i.addData(t.text),i.make();for(var n=e("<table></table>").css("width",t.width+"px").css("height",t.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",t.background),a=t.width/i.getModuleCount(),s=t.height/i.getModuleCount(),o=0;o<i.getModuleCount();o++)for(var r=e("<tr></tr>").css("height",s+"px").appendTo(n),l=0;l<i.getModuleCount();l++)e("<td></td>").css("width",a+"px").css("background-color",i.isDark(o,l)?t.foreground:t.background).appendTo(r);
return n};return this.each(function(){var a="canvas"==t.render?i():n();e(a).appendTo(this)})}}(jQuery),QR8bitByte.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},QRCode.prototype={addData:function(e){var t=new QR8bitByte(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=QRRSBlock.getRSBlocks(e,this.errorCorrectLevel),i=new QRBitBuffer,n=0,a=0;a<t.length;a++)n+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var s=this.dataList[a];i.put(s.mode,4),i.put(s.getLength(),QRUtil.getLengthInBits(s.mode,e)),s.write(i)}if(i.getLengthInBits()<=8*n)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[i][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var i=-1;i<=7;i++)if(!(e+i<=-1||this.moduleCount<=e+i))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4?this.modules[e+i][t+n]=!0:this.modules[e+i][t+n]=!1)},getBestMaskPattern:function(){for(var e=0,t=0,i=0;i<8;i++){this.makeImpl(!0,i);var n=QRUtil.getLostPoint(this);(0==i||e>n)&&(e=n,t=i)}return t},createMovieClip:function(e,t,i){var n=e.createEmptyMovieClip(t,i),a=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*a,r=0;r<this.modules[s].length;r++){var l=r*a,c=this.modules[s][r];c&&(n.beginFill(0,100),n.moveTo(l,o),n.lineTo(l+a,o),n.lineTo(l+a,o+a),n.lineTo(l,o+a),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=QRUtil.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var n=e[t],a=e[i];if(null==this.modules[n][a])for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||2==s||o==-2||2==o||0==s&&0==o?this.modules[n+s][a+o]=!0:this.modules[n+s][a+o]=!1}},setupTypeNumber:function(e){for(var t=QRUtil.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var n=!e&&1==(t>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=n}for(var i=0;i<18;i++){var n=!e&&1==(t>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=n}},setupTypeInfo:function(e,t){for(var i=this.errorCorrectLevel<<3|t,n=QRUtil.getBCHTypeInfo(i),a=0;a<15;a++){var s=!e&&1==(n>>a&1);a<6?this.modules[a][8]=s:a<8?this.modules[a+1][8]=s:this.modules[this.moduleCount-15+a][8]=s}for(var a=0;a<15;a++){var s=!e&&1==(n>>a&1);a<8?this.modules[8][this.moduleCount-a-1]=s:a<9?this.modules[8][15-a-1+1]=s:this.modules[8][15-a-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var i=-1,n=this.moduleCount-1,a=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var r=0;r<2;r++)if(null==this.modules[n][o-r]){var l=!1;s<e.length&&(l=1==(e[s]>>>a&1));var c=QRUtil.getMask(t,n,o-r);c&&(l=!l),this.modules[n][o-r]=l,a--,a==-1&&(s++,a=7)}if(n+=i,n<0||this.moduleCount<=n){n-=i,i=-i;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(e,t,i){for(var n=QRRSBlock.getRSBlocks(e,t),a=new QRBitBuffer,s=0;s<i.length;s++){var o=i[s];a.put(o.mode,4),a.put(o.getLength(),QRUtil.getLengthInBits(o.mode,e)),o.write(a)}for(var r=0,s=0;s<n.length;s++)r+=n[s].dataCount;if(a.getLengthInBits()>8*r)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*r+")");for(a.getLengthInBits()+4<=8*r&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;;){if(a.getLengthInBits()>=8*r)break;if(a.put(QRCode.PAD0,8),a.getLengthInBits()>=8*r)break;a.put(QRCode.PAD1,8)}return QRCode.createBytes(a,n)},QRCode.createBytes=function(e,t){for(var i=0,n=0,a=0,s=new Array(t.length),o=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l;n=Math.max(n,l),a=Math.max(a,c),s[r]=new Array(l);for(var d=0;d<s[r].length;d++)s[r][d]=255&e.buffer[d+i];i+=l;var p=QRUtil.getErrorCorrectPolynomial(c),u=new QRPolynomial(s[r],p.getLength()-1),h=u.mod(p);o[r]=new Array(p.getLength()-1);for(var d=0;d<o[r].length;d++){var g=d+h.getLength()-o[r].length;o[r][d]=g>=0?h.get(g):0}}for(var m=0,d=0;d<t.length;d++)m+=t[d].totalCount;for(var f=new Array(m),v=0,d=0;d<n;d++)for(var r=0;r<t.length;r++)d<s[r].length&&(f[v++]=s[r][d]);for(var d=0;d<a;d++)for(var r=0;r<t.length;r++)d<o[r].length&&(f[v++]=o[r][d]);return f};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)t^=QRUtil.G15<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15);return(e<<10|t)^QRUtil.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)t^=QRUtil.G18<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return QRUtil.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,i){switch(e){case QRMaskPattern.PATTERN000:return(t+i)%2==0;case QRMaskPattern.PATTERN001:return t%2==0;case QRMaskPattern.PATTERN010:return i%3==0;case QRMaskPattern.PATTERN011:return(t+i)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(t/2)+Math.floor(i/3))%2==0;case QRMaskPattern.PATTERN101:return t*i%2+t*i%3==0;case QRMaskPattern.PATTERN110:return(t*i%2+t*i%3)%2==0;case QRMaskPattern.PATTERN111:return(t*i%3+(t+i)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new QRPolynomial([1],0),i=0;i<e;i++)t=t.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),i=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var s=0,o=e.isDark(n,a),r=-1;r<=1;r++)if(!(n+r<0||t<=n+r))for(var l=-1;l<=1;l++)a+l<0||t<=a+l||0==r&&0==l||o==e.isDark(n+r,a+l)&&s++;s>5&&(i+=3+s-5)}for(var n=0;n<t-1;n++)for(var a=0;a<t-1;a++){var c=0;e.isDark(n,a)&&c++,e.isDark(n+1,a)&&c++,e.isDark(n,a+1)&&c++,e.isDark(n+1,a+1)&&c++,0!=c&&4!=c||(i+=3)}for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(i+=40);for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(i+=40);for(var d=0,a=0;a<t;a++)for(var n=0;n<t;n++)e.isDark(n,a)&&d++;var p=Math.abs(100*d/t/t-50)/5;return i+=10*p}},QRMath={glog:function(e){if(e<1)throw new Error("glog("+e+")");return QRMath.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return QRMath.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)QRMath.EXP_TABLE[i]=1<<i;for(var i=8;i<256;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(var i=0;i<255;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<e.getLength();n++)t[i+n]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(n)));return new QRPolynomial(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(var n=0;n<e.getLength();n++)i[n]^=QRMath.gexp(QRMath.glog(e.get(n))+t);return new QRPolynomial(i,0).mod(e)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(e,t){var i=QRRSBlock.getRsBlockTable(e,t);if(void 0==i)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=i.length/3,a=new Array,s=0;s<n;s++)for(var o=i[3*s+0],r=i[3*s+1],l=i[3*s+2],c=0;c<o;c++)a.push(new QRRSBlock(r,l));return a},QRRSBlock.getRsBlockTable=function(e,t){switch(t){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},QRBitBuffer.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},function(e){function t(t){return t.classList?t.classList:e(t).attr("class").match(/\S+/gi)}e.fn.ShareLink=function(i){function n(e){var t=o[e];return t=t.replace("{url}",encodeURIComponent(i.url)),t=t.replace("{title}",encodeURIComponent(i.title)),t=t.replace("{text}",encodeURIComponent(i.text)),t=t.replace("{image}",encodeURIComponent(i.image))}var a={title:"",text:"",image:"",url:window.location.href,class_prefix:"s_"},i=e.extend({},a,i),s=i.class_prefix.length,o={twitter:"https://twitter.com/intent/tweet?url={url}&text={text}",pinterest:"https://www.pinterest.com/pin/create/button/?media={image}&url={url}&description={text}",facebook:"https://www.facebook.com/sharer.php?u={url}",vk:"https://vkontakte.ru/share.php?url={url}&title={title}&description={text}&image={image}&noparse=true",linkedin:"https://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={text}&source={url}",myworld:"https://connect.mail.ru/share?url={url}&title={title}&description={text}&imageurl={image}",odnoklassniki:"http://odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl={url}&st.comments={text}",tumblr:"https://tumblr.com/share?s=&v=3&t={title}&u={url}",blogger:"https://blogger.com/blog-this.g?t={text}&n={title}&u={url}",delicious:"https://delicious.com/save?url={url}&title={title}",plus:"https://plus.google.com/share?url={url}",digg:"https://digg.com/submit?url={url}&title={title}",reddit:"http://reddit.com/submit?url={url}&title={title}",stumbleupon:"https://www.stumbleupon.com/submit?url={url}&title={title}",pocket:"https://getpocket.com/edit?url={url}&title={title}",chiq:"http://www.chiq.com/create/bookmarklet?u={url}&i={image}&d={title}&c={url}",qrifier:"http://qrifier.com/q?inc=qr&type=url&size=350&string={url}",qrsrc:"http://www.qrsrc.com/default.aspx?shareurl={url}",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}",tulinq:"http://www.tulinq.com/enviar?url={url}&title={title}",misterwong:"http://www.mister-wong.com/index.php?action=addurl&bm_url={url}&bm_description={title}&bm_notice=",sto_zakladok:"http://www.100zakladok.ru/save/?bmurl={url}&bmtitle={title}",two_linkme:"http://www.2linkme.com/?collegamento={url}&id=2lbar",adifni:"http://www.adifni.com/account/bookmark/?bookmark_url={url}",amazonwishlist:"http://www.amazon.com/gp/wishlist/static-add?u={url}&t={title}",amenme:"http://www.amenme.com/AmenMe/Amens/AmenToThis.aspx?url={url}&title={title}",aim:"http://lifestream.aol.com/share/?url={url}&title={title}&description={text} ",aolmail:"http://webmail.aol.com/25045/aol/en-us/Mail/compose-message.aspx?to=&subject={title}&body={{content}}",arto:"http://www.arto.com/section/linkshare/?lu={url}&ln={title}",baidu:"http://cang.baidu.com/do/add?it={title}&iu={url}&fr=ien&dc={text}",bitly:"https://bitly.com/a/bitmarklet?u={url}",bizsugar:"http://www.bizsugar.com/bizsugarthis.php?url={url}",blinklist:"http://www.blinklist.com/blink?u={url}&t={title}&d={text}",blip:"http://blip.pl/dashboard?body={title}%3A%20{url}",blogmarks:"http://blogmarks.net/my/new.php?mini=1&simple=1&url={url}&title={title}&content={text}",blurpalicious:"http://www.blurpalicious.com/submit/?url={url}&title={title}&desc={text}",bobrdobr:"http://bobrdobr.ru/addext.html?url={url}&title={title}&desc={text}",bonzobox:"http://bonzobox.com/toolbar/add?u={url}&t={title}&desc={text}",bookmerkende:"http://www.bookmerken.de/?url={url}&title={title}",box:"https://www.box.net/api/1.0/import?import_as=link&url={url}&name={title}&description={text}",bryderi:"http://bryderi.se/add.html?u={url}",buddymarks:"http://buddymarks.com/add_bookmark.php?bookmark_title={title}&bookmark_url={url}&bookmark_desc={text}",camyoo:"http://www.camyoo.com/note.html?url={url}",care2:"http://www.care2.com/news/compose?sharehint=news&share[share_type]news&bookmarklet=Y&share[title]={title}&share[link_url]={url}&share[content]={text}",citeulike:"http://www.citeulike.org/posturl?url={url}&title={title}",classicalplace:"http://www.classicalplace.com/?u={url}&t={title}&c={text}",cosmiq:"http://www.cosmiq.de/lili/my/add?url={url}",diggita:"http://www.diggita.it/submit.php?url={url}&title={title}",diigo:"http://www.diigo.com/post?url={url}&title={title}&desc={text}",domelhor:"http://domelhor.net/submit.php?url={url}&title={title}",dotnetshoutout:"http://dotnetshoutout.com/Submit?url={url}&title={title}",douban:"http://www.douban.com/recommend/?url={url}&title={title}",dropjack:"http://www.dropjack.com/submit.php?url={url}",edelight:"http://www.edelight.de/geschenk/neu?purl={url}",ekudos:"http://www.ekudos.nl/artikel/nieuw?url={url}&title={title}&desc={text}",elefantapl:"http://elefanta.pl/member/bookmarkNewPage.action?url={url}&title={title}&bookmarkVO.notes=",embarkons:"http://www.embarkons.com/sharer.php?u={url}&t={title}",evernote:"http://www.evernote.com/clip.action?url={url}&title={title}",extraplay:"http://www.extraplay.com/members/share.php?url={url}&title={title}&desc={text}",ezyspot:"http://www.ezyspot.com/submit?url={url}&title={title}",fabulously40:"http://fabulously40.com/writeblog?subject={title}&body={url}",informazione:"http://fai.informazione.it/submit.aspx?url={url}&title={title}&desc={text}",fark:"http://www.fark.com/cgi/farkit.pl?u={url}&h={title}",farkinda:"http://www.farkinda.com/submit?url={url}",favable:"http://www.favable.com/oexchange?url={url}&title={title}&desc={text}",favlogde:"http://www.favlog.de/submit.php?url={url}",flaker:"http://flaker.pl/add2flaker.php?title={title}&url={url}",folkd:"http://www.folkd.com/submit/{url}",fresqui:"http://fresqui.com/enviar?url={url}",friendfeed:"http://friendfeed.com/share?url={url}&title={title}",funp:"http://funp.com/push/submit/?url={url}",fwisp:"http://fwisp.com/submit.php?url={url}",givealink:"http://givealink.org/bookmark/add?url={url}&title={title}",gmail:"http://mail.google.com/mail/?view=cm&fs=1&to=&su={title}&body={text}&ui=1",goodnoows:"http://goodnoows.com/add/?url={url}",google:"http://www.google.com/bookmarks/mark?op=add&bkmk={url}&title={title}&annotation={text}",googletranslate:"http://translate.google.com/translate?hl=en&u={url}&tl=en&sl=auto",greaterdebater:"http://greaterdebater.com/submit/?url={url}&title={title}",hackernews:"http://news.ycombinator.com/submitlink?u={url}&t={title}",hatena:"http://b.hatena.ne.jp/bookmarklet?url={url}&btitle={title}",hedgehogs:"http://www.hedgehogs.net/mod/bookmarks/add.php?address={url}&title={title}",hotmail:"http://www.hotmail.msn.com/secure/start?action=compose&to=&subject={title}&body={{content}}",w3validator:"http://validator.w3.org/check?uri={url}&charset=%28detect+automatically%29&doctype=Inline&group=0",ihavegot:"http://www.ihavegot.com/share/?url={url}&title={title}&desc={text}",instapaper:"http://www.instapaper.com/edit?url={url}&title={title}&summary={text}",isociety:"http://isociety.be/share/?url={url}&title={title}&desc={text}",iwiw:"http://iwiw.hu/pages/share/share.jsp?v=1&u={url}&t={title}",jamespot:"http://www.jamespot.com/?action=spotit&u={url}&t={title}",jumptags:"http://www.jumptags.com/add/?url={url}&title={title}",kaboodle:"http://www.kaboodle.com/grab/addItemWithUrl?url={url}&pidOrRid=pid=&redirectToKPage=true",kaevur:"http://kaevur.com/submit.php?url={url}",kledy:"http://www.kledy.de/submit.php?url={url}&title={title}",librerio:"http://www.librerio.com/inbox?u={url}&t={title}",linkuj:"http://linkuj.cz?id=linkuj&url={url}&title={title}&description={text}&imgsrc=",livejournal:"http://www.livejournal.com/update.bml?subject={title}&event={url}",logger24:"http://logger24.com/?url={url}",mashbord:"http://mashbord.com/plugin-add-bookmark?url={url}",meinvz:"http://www.meinvz.net/Suggest/Selection/?u={url}&desc={title}&prov=addthis.com",mekusharim:"http://mekusharim.walla.co.il/share/share.aspx?url={url}&title={title}",memori:"http://memori.ru/link/?sm=1&u_data[url]={url}",meneame:"http://www.meneame.net/submit.php?url={url}",mixi:"http://mixi.jp/share.pl?u={url}",moemesto:"http://moemesto.ru/post.php?url={url}&title={title}",myspace:"http://www.myspace.com/Modules/PostTo/Pages/?u={url}&t={title}&c=",n4g:"http://www.n4g.com/tips.aspx?url={url}&title={title}",netlog:"http://www.netlog.com/go/manage/links/?view=save&origin=external&url={url}&title={title}&description={text}",netvouz:"http://netvouz.com/action/submitBookmark?url={url}&title={title}&popup=no&description={text}",newstrust:"http://newstrust.net/submit?url={url}&title={title}&ref=addthis",newsvine:"http://www.newsvine.com/_tools/seed&save?u={url}&h={title}&s={text}",nujij:"http://nujij.nl/jij.lynkx?u={url}&t={title}&b={text}",oknotizie:"http://oknotizie.virgilio.it/post?title={title}&url={url}",oyyla:"http://www.oyyla.com/gonder?phase=2&url={url}",pdfonline:"http://savepageaspdf.pdfonline.com/pdfonline/pdfonline.asp?cURL={url}",pdfmyurl:"http://pdfmyurl.com?url={url}",phonefavs:"http://phonefavs.com/bookmarks?action=add&address={url}&title={title}",plaxo:"http://www.plaxo.com/events?share_link={url}&desc={text}",plurk:"http://www.plurk.com/m?content={url}+({title})&qualifier=shares ",posteezy:"http://posteezy.com/node/add/story?title={title}&body={url}",pusha:"http://www.pusha.se/posta?url={url}&title={title}&description={text}",rediff:"http://share.rediff.com/bookmark/addbookmark?title={title}&bookmarkurl={url}",redkum:"http://www.redkum.com/add?url={url}&step=1&title={title}",scoopat:"http://scoop.at/submit?url={url}&title={title}&body={text}",sekoman:"http://sekoman.lv/home?status={title}&url={url}",shaveh:"http://shaveh.co.il/submit.php?url={url}&title={title}",shetoldme:"http://shetoldme.com/publish?url={url}&title={title}&body={text}",sinaweibo:"http://v.t.sina.com.cn/share/share.php?url={url}&title={title}",sodahead:"http://www.sodahead.com/news/submit/?url={url}&title={title}",sonico:"http://www.sonico.com/share.php?url={url}&title={title}",springpad:"http://springpadit.com/s?type=lifemanagr.Bookmark&url={url}&name={title}",startaid:"http://www.startaid.com/index.php?st=AddBrowserLink&type=Detail&v=3&urlname={url}&urltitle={title}&urldesc={text}",startlap:"http://www.startlap.hu/sajat_linkek/addlink.php?url={url}&title={title}",studivz:"http://www.studivz.net/Suggest/Selection/?u={url}&desc={title}&prov=addthis.com",stuffpit:"http://www.stuffpit.com/add.php?produrl={url}",stumpedia:"http://www.stumpedia.com/submit?url={url}",svejo:"http://svejo.net/story/submit_by_url?url={url}&title={title}&summary={text}",symbaloo:"http://www.symbaloo.com/en/add/?url={url}&title={title}",thewebblend:"http://thewebblend.com/submit?url={url}&title={title}",thinkfinity:"http://www.thinkfinity.org/favorite-bookmarklet.jspa?url={url}&subject={title}",thisnext:"http://www.thisnext.com/pick/new/submit/url/?description={text}&name={title}&url={url}",tuenti:"http://www.tuenti.com/share?url={url}",typepad:"http://www.typepad.com/services/quickpost/post?v=2&qp_show=ac&qp_title={title}&qp_href={url}&qp_text={text}",viadeo:"http://www.viadeo.com/shareit/share/?url={url}&title={title}&urlaffiliate=32005&encoding=UTF-8",virb:"http://virb.com/share?external&v=2&url={url}&title={title}",visitezmonsite:"http://www.visitezmonsite.com/publier?url={url}&title={title}&body={text}",vybralisme:"http://vybrali.sme.sk/sub.php?url={url}",webnews:"http://www.webnews.de/einstellen?url={url}&title={title}",wirefan:"http://www.wirefan.com/grpost.php?d=&u={url}&h={title}&d={text}",wordpress:"http://wordpress.com/wp-admin/press-this.php?u={url}&t={title}&s={text}&v=2",wowbored:"http://www.wowbored.com/submit.php?url={url}",wykop:"http://www.wykop.pl/dodaj?url={url}&title={title}&desc={text}",yahoobkm:"http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u={url}&t={title}&d={text}",yahoomail:"http://compose.mail.yahoo.com/?To=&Subject={title}&body={{content}}",yammer:"https://www.yammer.com/home/bookmarklet?bookmarklet_pop=1&u={url}&t={title}",yardbarker:"http://www.yardbarker.com/author/new/?pUrl={url}&pHead={title}",yigg:"http://www.yigg.de/neu?exturl={url}&exttitle={title}&extdesc={text}",yoolink:"http://go.yoolink.to/addorshare?url_value={url}&title={title}",yorumcuyum:"http://www.yorumcuyum.com/?baslik={title}&link={url}",youmob:"http://youmob.com/mobit.aspx?title={title}&mob={url}",zakladoknet:"http://zakladok.net/link/?u={url}&t={title}",ziczac:"http://ziczac.it/a/segnala/?gurl={url}&gtit={title}"};this.each(function(a,r){for(var l=t(r),a=0;a<l.length;a++){var c=l[a];if(c.substr(0,s)==i.class_prefix&&o[c.substr(s)]){var d=n(c.substr(s));e(r).attr("href",d).click(function(){var t=screen.width,n=screen.height,a=i.width?i.width:t-.2*t,s=i.height?i.height:n-.2*n,o=t/2-a/2,r=n/2-s/2,l="toolbar=0,status=0,width="+a+",height="+s+",top="+r+",left="+o;return window.open(e(this).attr("href"),"",l)&&!1})}}})}}(jQuery),function(){var e,t=0;eqShow.shakeTrigger=function(i,n){function a(e){var i=e.accelerationIncludingGravity,n=(new Date).getTime();if(n-u>100){var o=parseInt(n-u);u=n,c=i.x,d=i.y,p=i.z;var l=Math.abs(c+d+p-h-g-m)/o*1e4;window.removeEventListener("devicemotion",a,!0),l>r&&(f||(eqShow.playTriggerSound(),f=!0),window.removeEventListener("devicemotion",a,!0),s.sends&&s.sends.length&&$.each(s.sends,function(e,i){time=setTimeout(function(){$.each(i.handles,function(e,i){var n=utilTrigger.getHandleType(i.type).name;$.each(i.ids,function(e,i){var a=$("#inside_"+i);a.trigger(n,t)})})},1e3*i.delay)})),h=c,g=d,m=p}}var s,o=$(n).find(".m-img").attr("id").substring(4);if(i[o-1].properties&&(s=i[o-1].properties.trigger),s&&s.sends){var r=4e3,l=PREFIX_HOST+"/assets/audio/wxShake.mp3";e=document.createElement("audio"),e.src=l;var c,d,p,u=0,h=0,g=0,m=0,f=!1;window.DeviceMotionEvent&&n&&window.addEventListener("devicemotion",a,!1)}},eqShow.playTriggerSound=function(){e&&e.play()}}(),function(e,t){e.completeEffect=function(e){return!e.find(".lock").get(0)}}(window,jQuery),function(e,t){function i(e,i){completeEffect(t(".z-current"))&&(_="started",$.length||($=h.find(".main-page")),i||(P?(e=event,f={x:e.touches[0].pageX-h.offset().left,y:e.touches[0].pageY-h.offset().top}):f={x:e.pageX-h.offset().left,y:e.pageY-h.offset().top}))}function n(e,i){if(_="turning",G&&G.obj.property.autoFlip&&G.obj.property.autoFlipTime&&u(),i||(P?(e=event,v={x:e.touches[0].pageX-h.offset().left,y:e.touches[0].pageY-h.offset().top}):v={x:e.pageX-h.offset().left,y:e.pageY-h.offset().top}),b=v.x-f.x,b<0){if(S){S=!1,P&&m?x=!0:f.y>=h.height()/2?y=!0:f.y<h.height()/2&&(w=!0),T=t(".z-current").get(0);var n=t(T).find(".m-img").attr("id").substring(4);if(g=t("#flip"+n),Z||(C=t(T).parent(".flip-mask").get(0).nextElementSibling&&t(t(T).parent(".flip-mask").get(0).nextElementSibling).find(".main-page").get(0)?t(t(T).parent(".flip-mask").get(0).nextElementSibling).find(".main-page").get(0):!!E&&$.first().get(0)),C){t(C).find(".m-img").attr("id").substring(4);t(T).parent(".flip-mask").css({zIndex:100,display:"block"}),t(C).addClass("z-active").parent(".flip-mask").css({zIndex:99,display:"block"}),l(C),completeEffect(t(C))||t("#audio_btn").css("opacity",0),y?(t(".z-current").css({top:g.height()-h.height()+"px",left:"0"}),g.css({top:"-"+(g.height()-h.height())+"px"}),t(".turning").css({transformOrigin:"0% 100% 0px",left:h.width()+"px",top:h.height()+"px"})):w?t(".turning").css({top:"0",left:h.width()+"px",transformOrigin:"0% 0% 0px"}):x&&(t(".z-current").css({top:0,left:t(this).width()-h.width()+"px"}),g.css({top:0,left:-(g.width()-h.width())+"px"}),t(".turning").css({transformOrigin:"0% 100% 0px",left:h.width()+"px",top:0}))}}}else if(b>0&&S){S=!1,k=!0,T=t(".z-current").get(0);var n=t(T).find(".m-img").attr("id").substr(4);g=t("#flip"+n),Z||(C=t(T).parent(".flip-mask").get(0).previousElementSibling&&t(t(T).parent(".flip-mask").get(0).previousElementSibling).find(".main-page").get(0)?t(t(T).parent(".flip-mask").get(0).previousElementSibling).find(".main-page").get(0):!!E&&$.last().get(0)),C&&(l(C),completeEffect(t(C))||t("#audio_btn").css("opacity",0),t(T).parent(".flip-mask").css({display:"block"}),t(C).addClass("z-active").parent(".flip-mask").css({zIndex:99,display:"block"}),t(".turning").css({top:"0",left:"0",transformOrigin:"0% 0% 0px"}))}C&&s(v)}function a(e,t){if(!C)return _="feeling",y=!1,w=!1,x=!1,k=!1,void(S=!0);_="leaving";var i,n,a,o;t?(i=e.x,n=e.y):P?(i=v.x-h.offset().left,n=v.y-h.offset().top):(i=e.pageX-h.offset().left,n=e.pageY-h.offset().top),y?(L=16,a=-h.width(),o=h.height(),I=setInterval(function(){i=i-a<=L?i:i-L,n=o-n<=L?n:n+L,s({x:i,y:n}),i-a<=L&&o-n<=L&&(clearInterval(I),r())},10)):w?(L=16,a=-h.width(),o=0,I=setInterval(function(){i=i-a<=L?i:i-L,n=n-o<=L?n:n-L,s({x:i,y:n}),i-a<=L&&n-o<=L&&(clearInterval(I),r())},1)):x?(L=5,a=-h.width(),I=setInterval(function(){i=i-a<=L?i:i-L,s({x:i,y:n}),i-a<=L&&(clearInterval(I),r())},1)):k&&(L=3,a=h.width(),o=0,I=setInterval(function(){i=a-i<=L?i:i+L,s({x:i,y:n}),a-i<=L&&(clearInterval(I),r())},1))}function s(e){y||w?(R=h.width()-e.x,y?q=Math.abs(h.height()-e.y):w&&(q=e.y),D=q/R,A=q/Math.sqrt(R*R+q*q),F=Math.sqrt(1-A*A),z=Math.sqrt(R*R+q*q)/2,N=z*D,O=Math.sqrt(N*N+z*z),U=O/D,M=180*Math.atan(D)/Math.PI>0?180*Math.atan(D)/Math.PI:0,H=(h.width()-O)*F,j=(h.width()-O)*A*F,B=(h.width()-O)*(1-A*A),H>=1&&(y?(M>1?t(".turning").css({width:O+"px",height:U+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient("+(180-M)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translateX(-"+(O-3)+"px) translateY(-"+(U-3)+"px) rotate("+2*M+"deg) scaleX(-1)"}):o(e),X="0% 100% 0px",V="rotate(-"+(90-M)+"deg) translateY("+H+"px)",W="rotate("+(90-M)+"deg) translateY(-"+j+"px) translateX(-"+B+"px)"):w&&(M>1?t(".turning").css({width:O+"px",height:U+"px",backgroundColor:"#000",background:"-webkit-linear-gradient(-"+(180-M)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translateX(-"+(O-2)+"px) rotate(-"+2*M+"deg) scaleX(-1)"}):o(e),X="0% 0% 0px",V="rotate("+(90-M)+"deg) translateY(-"+H+"px)",W="rotate(-"+(90-M)+"deg) translateY("+j+"px) translateX(-"+B+"px)"),g.css({zIndex:100,transformOrigin:X,transform:V}),t(C).parent(".flip-mask").css({zIndex:99,display:"block"}),t(C).css({zIndex:1e3}),t(T).css({transformOrigin:X,transform:W}))):x?(t(".turning").css({width:(h.width()-e.x)/2+"px",height:h.height()+"px",left:e.x+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"
}),g.css({transformOrigin:"0% 50% 0px",left:0,transform:"translateX(-"+(g.width()-e.x)+"px)"}),t(T).css({transformOrigin:"0% 50% 0px",transform:"translateX("+(g.width()-e.x)+"px)"})):k&&(g.css({zIndex:100,transformOrigin:"0% 50% 0px",transform:"translateX("+e.x+"px)"}),t(T).css({transformOrigin:"0% 50% 0px",transform:"translateX(-"+e.x+"px)"}),t(".turning").css({width:h.width()-e.x+"px",height:h.height()+"px",left:-(h.width()-2*e.x)+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}))}function o(e){t(".turning").css({width:(h.width()-e.x+6)/2+"px",height:h.height()+"px",top:0,left:e.x+2+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0})}function r(){var e=G.list;G.obj.property.autoFlip&&G.obj.property.autoFlipTime&&p(),utilSound.pause();var i=t("#report0");i.length&&i.remove(),_="feeling",y=!1,w=!1,x=!1,k=!1,S=!0,b=0,t(".flip-mask").css({transform:"",top:0,left:0,zIndex:0}),t(T).removeClass("z-current").css({transform:"",top:0,left:0}),t(C).removeClass("z-active").addClass("z-current").css({transform:""}),t(".turning").css({width:0,height:0,top:0,left:0,transform:"",background:"none"}),T=C;var n=t(C).find(".m-img").attr("id").substring(4);t("#flip"+n).css({zIndex:100}),t("#audio_btn").css("opacity",1),C=null;var a=t(T).find(".m-img").attr("id").substring(4);e[a-1].elements&&e[a-1].elements.length&&t.each(e[a-1].elements,function(e,i){"d"==i.type&&eqShow.getShowCount(G.obj.id).then(function(e){var n=eqShow.fixedNum(e);t("#"+i.id).find(".counter-number").text(n)})}),J||eqShow.showProgressBar(G,t("#nr").find(".main-page")),J=!0}function l(e){if(e){var i=t(e).find(".m-img").attr("id").substring(4);t(e).find("li").each(function(e){for(var n=0;n<G.list[i-1].elements.length;n++)G.list[i-1].elements[n].id==parseInt(t(this).attr("id").substring(7),10)&&eqxCommon.animation(t(this),G.list[i-1].elements[n],"view")})}}function c(){"turning"!=_&&"leaving"!=_&&(f={x:0,y:h.height()},i(f,"mock"),_="turning",t(".main-page").css({width:h.width()+"px",height:h.height()+"px"}),v={x:0,y:h.height()},k=!0,I=setInterval(function(){v.x++,n(v,"mock"),v.x<=250&&(clearInterval(I),a(v,"mock"))},1))}function d(){"turning"!=_&&"leaving"!=_&&(f={x:h.width(),y:h.height()},i(f,"mock"),_="turning",t(".main-page").css({width:h.width()+"px",height:h.height()+"px"}),v={x:h.width(),y:h.height()},P&&m?x=!0:y=!0,Q=setInterval(function(){v.x-=5,v.y-=5,n(v,"mock"),v.x<=200&&(clearInterval(Q),a(v,"mock"),E||C||u())},1))}function p(){K=setInterval(function(){return completeEffect(t(".z-current"))?void d():void u()},1e3*Y)}function u(){clearInterval(K)}var h=t(".nr"),g=null,m=isAndroid(),f={},v={},b=0,y=!1,w=!1,x=!1,k=!1,S=!0,T=null,C=null,E=!1,P=mobilecheck(),I=null,$=[],_="feeling",L=0,M=0,R=0,q=0,D=0,A=0,F=0,z=0,N=0,O=0,U=0,H=0,j=0,B=0,X=0,V=0,W=0,G=null,Y=0,Q="",Z=!1;e.turnBook=function(e){G=e,G.obj.property.autoFlip&&G.obj.property.autoFlipTime&&(Y=G.obj.property.autoFlipTime,p()),E=G.obj.property.triggerLoop,t('<div class="turning"></div>').appendTo(".nr"),t(".main-page").css({width:t(".nr").width()+"px",height:t(".nr").height()+"px"}),h.on(P?"touchstart":"mousedown",function(e){G.obj.property.forbidHandFlip||"feeling"==_&&(i(e),t(".main-page").css({width:h.width()+"px",height:h.height()+"px"}))}).on(P?"touchmove":"mousemove",function(e){G.obj.property.forbidHandFlip||"started"!=_&&"turning"!=_||n(e)}).on(P?"touchend":"mouseup mouseleave",function(e){if(!G.obj.property.forbidHandFlip&&(Z=!1,t(".z-current").get(0))){if(0==b)return S=!0,void(_="feeling");"turning"==_&&a(e);var i=t(".z-current").find(".m-img").attr("id").replace("page","")-1;eqShow.setPageHis(G.list[i].id)}})};var J=!1;e.flipBookScroll=function(e){Z=!0;for(var i,n=0,a=G.list.length;n<a;n++)e==G.list[n].id&&(i=G.list[n].num);i||(i=e),T=t(".z-current").get(0);var s=t(T).find(".m-img").attr("id").substring(4),o=t(T).parent(".flip-mask").siblings(".flip-mask").find(".main-page").find("#page"+i);o&&(C=t(o).parent(".main-page").get(0),s>i?c():s<i&&d())},t(document).on("bookFlipPre",function(e){c()}),t(document).on("bookFlipNext",function(e){d()});var K}(window,jQuery);var eqxiu=function(){function e(e,n){for(var a,s=0,o=h._pageData.length;s<o;s++)e==h._pageData[s].id&&(a=h._pageData[s].num);if(a||(a=e),n){if(1==a)return;$(h.$currentPage).removeClass("z-current"),h.$currentPage=$(h.$currentPage).siblings(".main-page").find("#page"+a).parent().addClass("z-current")}else if("10"!=h._scrollMode){I=!0;var r=$(h.$currentPage).find(".m-img").attr("id").substring(4),l=$(h.$currentPage).siblings(".main-page").find("#page"+a);if(!l)return;h.$activePage=$(l).parent(".main-page").get(0),r>a?t():r<a&&i()}else flipBookScroll(e)}function t(e){if(!(k&&2==e||S&&1==e))if("10"!=h._scrollMode){var t=0;g();var i=setInterval(function(){t+=2,"0"==h._scrollMode||"1"==h._scrollMode||"2"==h._scrollMode||"6"==h._scrollMode||"7"==h._scrollMode||"8"==h._scrollMode||"11"==h._scrollMode||"12"==h._scrollMode||"13"==h._scrollMode||"14"==h._scrollMode||"15"==h._scrollMode?D=t:"3"!=h._scrollMode&&"4"!=h._scrollMode&&"5"!=h._scrollMode&&"9"!=h._scrollMode||(q=t),m(),t>=21&&(clearInterval(i),f())},1)}else $(document).trigger("bookFlipPre")}function i(e){if(!(k&&2==e||S&&1==e))if("10"!=h._scrollMode){w=!1;var t=0;"block"==$("body .boards-panel").css("display")&&($("body .boards-panel").hide(),$("body .z-current").show()),g();var i=setInterval(function(){t-=2,"0"==h._scrollMode||"1"==h._scrollMode||"2"==h._scrollMode||"6"==h._scrollMode||"7"==h._scrollMode||"8"==h._scrollMode||"11"==h._scrollMode||"12"==h._scrollMode||"13"==h._scrollMode||"14"==h._scrollMode||"15"==h._scrollMode?D=t:"3"!=h._scrollMode&&"4"!=h._scrollMode&&"5"!=h._scrollMode&&"9"!=h._scrollMode||(q=t),m(),t<=-21&&(clearInterval(i),f(),P||h.$activePage||clearInterval(C))},1)}else $(document).trigger("bookFlipNext")}function n(){C=setInterval(function(){10===h._scrollMode||A||i()},x)}function a(){clearInterval(C)}function s(){h.$activePage=h._$pages.last().get(0),h._$pages.parent().find(".z-current").removeClass("z-current"),h._$pages.last().addClass("z-current")}function o(e){e?h._$pages.last().prev().remove():h._$pages.last().remove()}function r(e){h._scrollMode=e,v=e,_scrollMode=e}function l(e){h._isforbidHandFlip=e}function c(e){x=1e3*e,a(),n()}function d(){h._$pages=h._$app.find(".main-page")}function s(e){h._$pages.parent().find(".z-current").removeClass("z-current"),e?(h.$activePage=h._$pages.last().prev().get(0),h._$pages.last().prev().addClass("z-current")):(h.$activePage=h._$pages.last().get(0),h._$pages.last().addClass("z-current"))}function p(e){h._pageData=e}function u(e){P=e}var h,g,m,f,v,b,y,w,x,k,S,T,C,E=$(window),P=!1,I=!1,_=mobilecheck(),L=tabletCheck(),M=0,R=0,q=0,D=0,A=!1,F=!1,z=!0,N=500,O=.4,U=function(e,t,i,a){function s(e,t,i){for(var n=["","webkit","moz"],a=0,s=n.length;a<s;a++){0!=a||mobilecheck()||(t=t.substring(0,1).toLowerCase()+t.substring(1,t.length));var o=i instanceof Array?i[a]:i,r=n[a]+t;e[r]=o}}function o(e,t,i){for(var n=["","-webkit-","-moz-"],a=0;a<n.length;a++)e.css(n[a]+t,i)}function r(e){var t;return t=$("#inside_"+e,".phone-view").length?$("#inside_"+e,".phone-view"):$("#inside_"+e)}function l(){h._isDisableFlipPage=!0;var e;"0"==t||"1"==t||"2"==t||"6"==t||"9"==t||"11"==t||"12"==t?(e=D>0?-y:y,o($(h.$activePage),"transform","translateY("+e+"px)"),o($(h.$currentPage),"transform","translateY(0) scale(1)")):"3"!=t&&"5"!=t||(e=q>0?-b:b,o($(h.$activePage),"transform","translateX("+e+"px)"),o($(h.$currentPage),"transform","translateX(0) scale(1)")),setTimeout(function(){$(h.$currentPage).attr("style",""),$(h.$activePage).attr("style",""),$(h.$activePage).removeClass("z-active z-move"),h._isDisableFlipPage=!1},500)}function c(){if(Math.abs(D)>Math.abs(q)&&completeEffect($(h.$currentPage)))if(D>0){if(h._isDisableFlipPrevPage)return;F||z?(F=!1,z=!1,ee(!0),te(!0,"bottom center","translateY",y)):ie(!0,"translateY",y,D,h._scrollMode)}else if(D<0){if(h._isDisableFlipNextPage)return;!F||z?(F=!0,z=!1,ee(!1),te(!1,"top center","translateY",y)):ie(!1,"translateY",y,D,h._scrollMode)}}function d(){Math.abs(D)>Math.abs(q)&&Math.abs(D)>20?(ne("translateY",D,y,h._scrollMode),$(document).trigger("flipend")):(h._isDisableFlipPage=!1,l())}function p(){if(Math.abs(q)>Math.abs(D)&&completeEffect($(h.$currentPage)))if(q>0){if(h._isDisableFlipPrevPage)return;F||z?(F=!1,z=!1,ee(!0),te(!0,"center right","translateX",b)):ie(!0,"translateX",b,q,h._scrollMode)}else if(q<0){if(h._isDisableFlipNextPage)return;!F||z?(F=!0,z=!1,ee(!1),te(!1,"center left","translateX",b)):ie(!1,"translateX",b,q,h._scrollMode)}}function u(){Math.abs(q)>Math.abs(D)&&Math.abs(q)>20?(ne("translateX",q,b,h._scrollMode),$(document).trigger("flipend")):(h._isDisableFlipPage=!1,l())}function v(){if(Math.abs(q)>Math.abs(D)&&completeEffect($(h.$currentPage)))if(q>0){if(h._isDisableFlipPrevPage)return;F||z?(F=!1,z=!1,ee(!0),b=_?window.innerWidth:$(".nr").width(),te(!0,"","translateX",b)):ie(!0,"translateX",b,q,h._scrollMode)}else if(q<0){if(h._isDisableFlipNextPage)return;!F||z?(F=!0,z=!1,ee(!1),b=_?window.innerWidth:$(".nr").width(),te(!1,"","translateX",b)):ie(!1,"translateX",b,q,h._scrollMode)}}function w(){Math.abs(q)>Math.abs(D)&&Math.abs(q)>20?(ne("translateX",q,b,h._scrollMode),$(document).trigger("flipend")):(h._isDisableFlipPage=!1,l())}function C(){if(Math.abs(D)>Math.abs(q)&&completeEffect($(h.$currentPage)))if(D>0){if(h._isDisableFlipPrevPage)return;F||z?(F=!1,z=!1,ee(!0),y=_?window.innerHeight:$(".nr").height(),te(!0,"","translateY",y)):ie(!0,"translateY",y,D,h._scrollMode)}else if(D<0){if(h._isDisableFlipNextPage)return;!F||z?(F=!0,z=!1,ee(!1),y=_?window.innerHeight:$(".nr").height(),te(!1,"","translateY",y)):ie(!1,"translateY",y,D,h._scrollMode)}}function U(){Math.abs(D)>Math.abs(q)&&Math.abs(D)>20?(ne("translateY",D,y,h._scrollMode),$(document).trigger("flipend")):(h._isDisableFlipPage=!1,l())}function H(){if(Math.abs(D)>Math.abs(q)&&completeEffect($(h.$currentPage)))if(D>0){if(h._isDisableFlipNextPage)return;F&&!z||(F=!0,z=!1,h.$activePage&&$(h.$activePage).removeClass("z-move z-active"),ee(!0),s(h.$activePage.style,"Transform","rotateX(90deg) translateY(-"+y/2+"px) translateZ("+y/2+"px)"),s(ae.get(0).style,"Perspective","700px"),s(ae.get(0).style,"TransformStyle","preserve-3d")),h.$activePage&&h.$activePage.classList.contains("main-page")&&($(h.$activePage).addClass("z-active z-move").trigger("active").css("zIndex",1),s(h.$currentPage.style,"Transform","rotateX(-"+D/y*90+"deg) translateY("+D/2+"px) translateZ("+D/2+"px)"),s(h.$activePage.style,"Transform","rotateX("+(90-D/y*90)+"deg) translateY("+(-(y/2)+D/2)+"px) translateZ("+(y/2-D/2)+"px)"))}else if(D<0){if(h._isDisableFlipNextPage)return;F&&!z||(F=!0,z=!1,h.$activePage&&$(h.$activePage).removeClass("z-move z-active"),ee(!1),s(h.$activePage.style,"Transform","rotateX(-90deg) translateY(-"+y/2+"px) translateZ(-"+y/2+"px)"),s(ae.get(0).style,"Perspective","700px"),s(ae.get(0).style,"TransformStyle","preserve-3d")),h.$activePage&&h.$activePage.classList.contains("main-page")?($(h.$activePage).addClass("z-active z-move").trigger("active").css("zIndex",0),s(h.$currentPage.style,"Transform","rotateX("+-D/y*90+"deg) translateY("+D/2+"px) translateZ("+-D/2+"px)"),s(h.$activePage.style,"Transform","rotateX("+(-90-D/y*90)+"deg) translateY("+(y/2+D/2)+"px) translateZ("+(y/2+D/2)+"px)")):(s(h.$currentPage.style,"Transform","translateX(0px) scale(1)"),h.$activePage=null)}}function j(){Math.abs(D)>Math.abs(q)&&Math.abs(D)>20?(D>0?s(h.$currentPage.style,"Transform","rotateX(-90deg) translateY("+y/2+"px) translateZ("+y/2+"px)"):s(h.$currentPage.style,"Transform","rotateX(90deg) translateY(-"+y/2+"px) translateZ("+y/2+"px)"),s(h.$currentPage.style,"zIndex","0"),s(h.$activePage.style,"Transform","rotateX(0deg) translateY(0px) translateZ(0px)"),s(h.$activePage.style,"zIndex","2"),$(document).trigger("flipend")):(s(h.$currentPage.style,"Transition","none"),s(h.$activePage.style,"Transition","none"),h._isDisableFlipPage=!1,l())}function B(){if(Math.abs(D)>Math.abs(q)&&completeEffect($(h.$currentPage)))if(D>0){if(h._isDisableFlipNextPage)return;F&&!z||(F=!0,z=!1,h.$activePage&&$(h.$activePage).removeClass("z-move z-active"),ee(!0),o(ae,"perspective","700px"),o(ae,"transform-style","preserve-3d"),s(h.$activePage.style,"TransformOrigin","top"),s(h.$activePage.style,"Transform","rotateX(90deg)")),h.$activePage&&h.$activePage.classList.contains("main-page")&&($(h.$activePage).addClass("z-active z-move").trigger("active"),s(h.$activePage.style,"Transform","rotateX("+(90-D/y*90)+"deg) "))}else if(D<0){if(h._isDisableFlipNextPage)return;F&&!z||(F=!0,z=!1,h.$activePage&&$(h.$activePage).removeClass("z-move z-active"),ee(!1),s(h.$activePage.style,"TransformOrigin","bottom"),s(h.$activePage.style,"Transform","rotateX(-90deg)"),o(ae,"perspective","700px"),o(ae,"transform-style","preserve-3d")),h.$activePage&&h.$activePage.classList.contains("main-page")?($(h.$activePage).addClass("z-active z-move").trigger("active"),s(h.$activePage.style,"Transform","rotateX("+(-90-D/y*90)+"deg) ")):(s(h.$currentPage.style,"Transform","translateX(0px) scale(1)"),h.$activePage=null)}}function X(){Math.abs(D)>Math.abs(q)&&Math.abs(D)>20?(D>0?s(h.$activePage.style,"Transform","rotateX(0deg)"):s(h.$activePage.style,"Transform","rotateX(0deg)"),$(document).trigger("flipend")):(s(h.$currentPage.style,"Transition","none"),s(h.$activePage.style,"Transition","none"),h._isDisableFlipPage=!1,l())}function V(){if(Math.abs(D)>Math.abs(q)&&completeEffect($(h.$currentPage))){if(D>0){if(h._isDisableFlipPrevPage)return;(F||z)&&(F=!1,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-move")),ee(!0),h.$activePage.style.zIndex=2,h.$activePage&&h.$activePage.classList.contains("main-page")&&(h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-move")),h.$activePage.style.opacity=0)}else if(D<0){if(h._isDisableFlipNextPage)return;F&&!z||(F=!0,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-move")),ee(!1),h.$activePage.style.zIndex=2,h.$activePage&&h.$activePage.classList.contains("main-page")&&(h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-move")),h.$activePage.style.opacity=0)}var e=Math.abs(D)/y*1.3;h.$activePage.style.opacity=e.toFixed(1),e.toFixed(3)<=1&&o($(h.$activePage),"transform","scale("+e.toFixed(3)+")")}}function W(){Math.abs(D)>Math.abs(q)&&Math.abs(D)>20?(o($(h.$activePage),"transform","scale(1)"),h.$activePage.style.opacity=1,$(document).trigger("flipend")):(s(h.$currentPage.style,"Transition","none"),s(h.$activePage.style,"Transition","none"),h._isDisableFlipPage=!1,l())}function G(){if(Math.abs(D)>Math.abs(q)&&completeEffect($(h.$currentPage)))if(D>0){if(h._isDisableFlipPrevPage)return;(F||z)&&(F=!1,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-fade-in"),h.$activePage.classList.remove("z-move")),ee(!0),h.$currentPage.style.zIndex=1,h.$activePage.style.zIndex=2,h.$activePage&&h.$activePage.classList.contains("main-page")&&(h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-fade-in"),h.$activePage.classList.add("z-move")))}else if(D<0){if(h._isDisableFlipNextPage)return;F&&!z||(F=!0,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-fade-in"),h.$activePage.classList.remove("z-move")),ee(!1),h.$currentPage.style.zIndex=1,h.$activePage&&h.$activePage.classList.contains("main-page")&&(h.$activePage.style.zIndex=2,h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-fade-in"),h.$activePage.classList.add("z-move")))}}function Y(){Math.abs(D)>Math.abs(q)&&Math.abs(D)>20?setTimeout(function(){$(document).trigger("flipend")},1600):(h._isDisableFlipPage=!1,l())}function Q(){if(Math.abs(q)>Math.abs(D)&&completeEffect($(h.$currentPage)))if(q>0){if(h._isDisableFlipPrevPage)return;F||z?(F=!1,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-move")),ee(!0),h.$activePage&&h.$activePage.classList.contains("main-page")&&(h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-move"),o($(h.$activePage),"Transform","scale(0.3) translateX(0) translateZ(-"+y+"px) rotateY(45deg)"),h.$activePage.style.zIndex="0"),o(ae,"perspective","1000px"),h.$currentPage.style.zIndex="100"):h.$activePage&&(q<=b/4?o($(h.$currentPage),"Transform","translateX("+q+"px)"):o($(h.$currentPage),"Transform","translateX("+1.5*q+"px) scale("+((5*b/4-q)/b).toFixed(3)+") rotateY("+q/b*45+"deg) translateZ(-"+(q-b/4)+"px)"))}else if(q<0){if(h._isDisableFlipNextPage)return;!F||z?(F=!0,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-move")),ee(!1),h.$activePage&&h.$activePage.classList.contains("main-page")&&(h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-move"),o($(h.$activePage),"Transform","scale(0.3) translateX("+(b+300)+"px) translateZ(-"+y+"px) rotateY(-45deg)"),h.$activePage.style.zIndex="0"),o(ae,"perspective","1000px"),h.$currentPage.style.zIndex="100"):h.$activePage&&(q>=-b/4?o($(h.$currentPage),"Transform","translateX("+q+"px)"):o($(h.$currentPage),"Transform","translateX("+1.5*q+"px) scale("+((5*b/4+q)/b).toFixed(3)+") rotateY("+q/b*45+"deg) translateZ("+(q+b/4)+"px)"),o($(h.$activePage),"Transform","scale("+(.3-(q+b/4)/b).toFixed(3)+") translateX("+(-q-b/4+200)+"px) translateZ("+(-q-3*b/4)+"px) rotateY(-"+(45+(q+b/4)/b*45)+"deg)"))}}function Z(){Math.abs(q)>Math.abs(D)&&Math.abs(q)>20?(q>0?(h.$currentPage.style.webkitTransformOrigin="left",h.$currentPage.style.webkitTransform="translateX(0) translateZ(-"+y+"px) rotateY(0) scale(0.2)",h.$activePage.style.webkitTransform="translateX(0) translateZ(0) rotateY(0) scale(1)",h.$currentPage.style.zIndex="0",h.$activePage.style.zIndex="1"):(h.$currentPage.style.webkitTransformOrigin="right",h.$currentPage.style.webkitTransform="translateX("+b+"px) translateZ(-"+y+"px) rotateY(0) scale(0.2)",h.$activePage.style.webkitTransform="translateX(0) translateZ(0) rotateY(0) scale(1)",h.$activePage.style.zIndex="1",h.$currentPage.style.zIndex="0"),$(document).trigger("flipend")):(s(h.$currentPage.style,"Transition","none"),s(h.$activePage.style,"Transition","none"),h._isDisableFlipPage=!1,l())}function J(){if(Math.abs(D)>Math.abs(q)&&completeEffect($(h.$currentPage))){if(D>0){if(h._isDisableFlipPrevPage)return;(F||z)&&(F=!1,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-move")),ee(!0),h.$activePage&&h.$activePage.classList.contains("main-page")&&($(h.$activePage).addClass("z-active z-move"),$(h.$activePage).css({zIndex:0,opacity:1})),$(h.$currentPage).css({opacity:1}),$(h.$activePage).css({zIndex:0,opacity:1}),o($(h.$activePage),"transform","translateY(0)"),o($(h.$currentPage),"transform-origin","0% 0% 0px"))}else if(D<0){if(h._isDisableFlipNextPage)return;F&&!z||(F=!0,z=!1,h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-move")),ee(!1),h.$activePage&&h.$activePage.classList.contains("main-page")&&(h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-move"),$(h.$activePage).css({zIndex:0,opacity:1})),$(h.$currentPage).css({opacity:1}),$(h.$activePage).css({zIndex:0,opacity:1}),o($(h.$activePage),"transform","translateY(0)"),o($(h.$currentPage),"transform-origin","0% 0% 0px"))}h.$activePage&&(o($(h.$currentPage),"transform-origin","0% 0% 0px"),o($(h.$currentPage),"transform","rotate("+Math.abs(D)/y*90+"deg)"),h.$currentPage.style.opacity=((y-Math.abs(D))/y).toFixed(1))}}function K(){Math.abs(D)>Math.abs(q)&&Math.abs(D)>20?(o($(h.$currentPage),"transform","translateY("+y+"px) rotate("+Math.abs(D)/y*90+"deg)"),$(h.$currentPage).css({opacity:.5}),$(document).trigger("flipend")):(s(h.$currentPage.style,"Transition","none"),s(h.$activePage.style,"Transition","none"),h._isDisableFlipPage=!1,l())}function ee(e){I||(e?h.$currentPage.previousElementSibling&&h.$currentPage.previousElementSibling.classList.contains("main-page")?h.$activePage=h.$currentPage.previousElementSibling:P?h.$activePage=h._$pages.last().get(0):h.$activePage=!1:h.$currentPage.nextElementSibling&&h.$currentPage.nextElementSibling.classList.contains("main-page")?h.$activePage=h.$currentPage.nextElementSibling:P?h.$activePage=h._$pages.first().get(0):h.$activePage=!1)}function te(e,t,i,n){if(h.$activePage&&(h.$activePage.classList.remove("z-active"),h.$activePage.classList.remove("z-move")),h.$activePage&&h.$activePage.classList.contains("main-page")){h.$activePage.classList.add("z-active"),h.$activePage.classList.add("z-move");var a=e?"-":"";h.$activePage.style.webkitTransition="none",h.$activePage.style.webkitTransform=i+"("+a+n+"px)",h.$activePage.style.mozTransition="none",h.$activePage.style.mozTransform=i+"("+a+n+"px)",h.$activePage.style.transition="none",h.$activePage.style.transform=i+"("+a+n+"px)",$(h.$activePage).trigger("active"),t&&o($(h.$currentPage),"transform-origin",t)}else s(h.$currentPage.style,"Transform",i+"(0px) scale(1)")}function ie(e,t,i,n,a){if(h.$activePage){var s=e?"-":"";o($(h.$activePage),"transform",t+"("+s+(i-Math.abs(n))+"px)"),"1"==a||"3"==a?o($(h.$currentPage),"transform","scale("+((i-Math.abs(n))/y).toFixed(3)+")"):"5"!=a&&"11"!=a||o($(h.$currentPage),"transform",t+"("+n+"px)")}}function ne(e,t,i,n){if("1"==n||"3"==n)o($(h.$currentPage),"transform","scale(0.2)");else if("5"==n||"11"==n){var a=t>0?"":"-";o($(h.$currentPage),"transform",e+"("+a+i+"px)")}else o($(h.$currentPage),"transform","scale(1)");o($(h.$activePage),"transform",e+"(0px)")}this._$app=e,this._$pages=this._$app.find(".main-page"),this.$currentPage=this._$pages.eq(0),this.$activePage=null,this._isInitComplete=!1,this._isDisableFlipPage=!1,this._isDisableFlipPrevPage=!1,this._isDisableFlipNextPage=!1,this._scrollMode=t,this._pageData=i,this.pageData=a,t=t,this._isforbidHandFlip=a.obj.property.forbidHandFlip,h=this,b=_||L?window.innerWidth:e.width(),y=_||L?window.innerHeight:e.height();var ae=$("#con"),se=!1;"8"!=t&&"9"!=t||(O=.7,N=800),0==t||1==t||2==t||6==t||7==t||8==t||11==t||12==t?S=!0:3!=t&&4!=t&&5!=t&&10!=t||(k=!0),S?(T=$(".ctrl_panel_dir .ctrl-down"),$nextCtrl=$(".ctrl_panel_dir .ctrl-up")):k&&(T=$(".ctrl_panel_dir .ctrl-right"),$nextCtrl=$(".ctrl_panel_dir .ctrl-left")),a.obj.property.hasOwnProperty("triggerLoop")||(a.obj.property.triggerLoop=!0),P=a.obj.property.triggerLoop,a.obj.property.autoFlip&&(x=1e3*a.obj.property.autoFlipTime,n());var oe;if(i[0].elements&&i[0].elements.length)for(var re=0;re<i[0].elements.length;re++){oe||(eqShow.shakeTrigger(i,h.$currentPage),oe=!0);var le=r(i[0].elements[re].id);eqxCommon.bindTrigger(le,i[0].elements[re])}if(function(){E.on("scroll.elasticity",function(e){e.preventDefault()}).on("touchmove.elasticity",function(e){e.preventDefault()}),E.delegate("img","mousemove",function(e){e.preventDefault()})}(),"10"!=t){var ce=!1;h._$app.on("mousedown touchstart",function(e){h._isforbidHandFlip||(g(e),ce=!0)}).on("mousemove touchmove",function(e){h._isforbidHandFlip||ce&&m(e)}).on("mouseup touchend mouseleave",function(e){h._isforbidHandFlip||(f(e),ce=!1)})}else turnBook(a);g=function(e){se=!1,_&&e&&(e=event),h._isDisableFlipPage||(h.$currentPage=h._$pages.filter(".z-current").get(0),I||(h.$activePage=null),h.$currentPage&&completeEffect($(h.$currentPage))&&(A=!0,F=!1,z=!0,q=0,D=0,e&&"mousedown"==e.type?(M=e.pageX,R=e.pageY):e&&"touchstart"==e.type&&(M=e.touches?e.touches[0].pageX:e.originalEvent.touches[0].pageX,R=e.touches?e.touches[0].pageY:e.originalEvent.touches[0].pageY),h.$currentPage.classList.add("z-move"),s(h.$currentPage.style,"Transition","none"),"12"==h._scrollMode&&(h.$currentPage.style.zIndex=3)))},m=function(e){_&&e&&(e=event),A&&h._$pages.length>1&&(e&&"mousemove"==e.type?(q=e.pageX-M,D=e.pageY-R):e&&"touchmove"==e.type&&(q=(e.touches?e.touches[0].pageX:e.originalEvent.touches[0].pageX)-M,D=(e.touches?e.touches[0].pageY:e.originalEvent.touches[0].pageY)-R),!se&&(Math.abs(q)>20||Math.abs(D)>20)&&(se=!0),"0"==h._scrollMode||"2"==h._scrollMode||"1"==h._scrollMode||"15"==h._scrollMode?c():"4"==h._scrollMode||"3"==h._scrollMode?p():"5"==h._scrollMode?v():"6"==h._scrollMode?H():"7"==h._scrollMode?B():"8"==h._scrollMode?V():"9"==h._scrollMode?Q():"11"==h._scrollMode?C():"12"==h._scrollMode?J():"13"==h._scrollMode?G():"14"==h._scrollMode&&G())},f=function(e){if(A&&completeEffect($(h.$currentPage)))if(A=!1,h.$activePage){h._isDisableFlipPage=!0;var t;t="6"==h._scrollMode||"7"==h._scrollMode?"cubic-bezier(0,0,0.99,1)":"12"==h._scrollMode?"cubic-bezier(.17,.67,.87,.13)":"linear",h.$currentPage.style.webkitTransition="-webkit-transform "+O+"s "+t,h.$activePage.style.webkitTransition="-webkit-transform "+O+"s "+t,h.$currentPage.style.mozTransition="-moz-transform "+O+"s "+t,h.$activePage.style.mozTransition="-moz-transform "+O+"s "+t,h.$currentPage.style.transition="transform "+O+"s "+t,h.$activePage.style.transition="transform "+O+"s "+t,"0"==h._scrollMode||"2"==h._scrollMode||"1"==h._scrollMode||"15"==h._scrollMode?d():"4"==h._scrollMode||"3"==h._scrollMode?u():"5"==h._scrollMode?w():"6"==h._scrollMode?j():"7"==h._scrollMode?X():"8"==h._scrollMode?W():"9"==h._scrollMode?Z():"11"==h._scrollMode?U():"12"==h._scrollMode?K():"13"==h._scrollMode?Y():"14"==h._scrollMode&&Y();var i=$(h.$activePage).find(".m-img").attr("id").replace("page","")-1;h._pageData[i].properties&&h._pageData[i].properties.longPage&&$(document).trigger("clearTouchPos"),$(h.$activePage).find("li.comp-resize").each(function(e){for(var t=0;t<h._pageData[i].elements.length;t++)if(h._pageData[i].elements[t].id==parseInt($(this).attr("id").substring(7),10)){eqxCommon.animation($(this),h._pageData[i].elements[t],"view",h._pageData[i].properties);var n=r(h._pageData[i].elements[t].id);eqxCommon.bindTrigger(n,h._pageData[i].elements[t])}});for(var n=0;n<h._pageData.length;n++)h._pageData[n].effObj&&(h._pageData[n].effObj.pause=!0);h._pageData[i].effObj&&h._pageData[i].effObj.startPlay(),eqShow.setPageHis(h._pageData[i].id)}else h.$currentPage.classList.remove("z-move");I=!1},$(document).on("flipend",function(e){completeEffect($(h.$activePage))||$("#audio_btn").css("opacity",0);var n=$("#report0"),o=$(h.$activePage).find(".m-img").attr("id").substring(4),r=[];i=h._pageData,i[o-1].elements&&i[o-1].elements.length&&(r=i[o-1].elements,$.each(r,function(e,t){"d"==t.type&&eqShow.getShowCount(a.obj.id).then(function(e){var i=eqShow.fixedNum(e);$("#"+t.id).find(".counter-number").text(i)})})),eqShow.clearTyperText(i[o-1]),setTimeout(function(){s(h.$currentPage.style,"Transition","none"),$(h.$activePage).removeClass("z-active z-move").addClass("z-current"),$(h.$currentPage).removeClass("z-current z-move"),h._isDisableFlipPage=!1,h.$currentPage=$(h.$activePage).trigger("current"),$(h.$currentPage).trigger("hide"),utilSound.pause(),n.length&&n.remove(),"8"!=t&&"9"!=t&&"12"!=t||($(h.$currentPage).css("z-index","1"),$(".main-page").attr("style","")),eqShow.shakeTrigger(i,h.$currentPage),P||(1==o?T.removeClass("enabled"):o==h._pageData.length?$nextCtrl.removeClass("enabled"):(T.addClass("enabled"),$nextCtrl.addClass("enabled"))),window.wechatUtils&&wechatUtils.stopWechatSound()},N)}),$(document).on("startAutoFlip",function(e){a.obj.property.autoFlip&&n()}),eqShow.showProgressBar(a,h._$pages,e)};return{pageScroll:e,nextPage:i,prePage:t,lastPage:s,app:U,pauseAutoFlip:a,removeLastPage:o,changeScrollMode:r,startAutoFlip:c,changeAppPage:d,setTriggerLoop:u,forbidHandFlip:l,setPageData:p}}();!function(e,t){function i(e,i){if(!t("#report0").length){var a=[];a[0]='<div id="report0"></div>',a[1]='<div id="report1"></div>',a[2]='<div id="report2"><p><img src="'+CLIENT_CDN+'/view/images/jubao_03.png" width="50px;"></p><h1>请选择举报原因</h1></div>',a[3]='<div id="report3"><ul id="reportList"></ul></div>',a[4]='<div id="report4"><a id="reportSubmit" data-event="11203">提交举报</a></div>',t(a[0]).appendTo("#page"+e),t(a[1]).appendTo("#report0");for(var s=2;s<=4;s++)t(a[s]).appendTo("#report1");n(i)}}function n(e){if(o.length)return void a(o,e);var i=PREFIX_S1_URL+"eqs/class/expose_types";t.ajax({type:"GET",url:i,xhrFields:{withCredentials:!0},crossDomain:!0}).then(function(t){t.success&&(o=t.list,a(o,e))})}function a(e,i){for(var n,a=0,o=e.length;a<o;a++){var r='<li value="'+e[a].value+'"><span>'+e[a].name+"</span></li>";t(r).appendTo("#reportList")}var l=t("#reportList").find("li").eq(0);l.addClass("active"),n=l.val(),t("#reportList").find("li").click(function(e){t(this).siblings().removeClass("active"),t(this).addClass("active"),n=t(this).val()}),t("#reportSubmit").click(function(e){s(i,n)}),t("#report0").parent(".m-img").click(function(e){t("#report0").remove()}),t("#report0").click(function(e){e.stopPropagation()})}function s(e,i){var n=PREFIX_URL+"eqs/expose",a={sceneId:e,type:i};t.ajax({type:"POST",url:n,data:t.param(a),xhrFields:{withCredentials:!0},crossDomain:!0}).then(function(e){e.success&&(t("#report0").remove(),alert("举报成功！"))},function(e){t("#report0").remove()})}e.addReport=function(e,n){var a='<li comp-drag="" comp-rotate="" class="comp-resize comp-rotate inside wsite-text" id="inside_439881" num="1" ctype="2" comp-resize="" style="width: 320px; height: 36px; left: -250px; top: 420px; z-index: 999;"><div class="element-box" style="height: 100%; z-index: 3; width: 100%; left: 0px; top: 420px; transform: none;-webkit-animation: fadeIn 3s ease 1s both;-webkit-animation-play-state: initial;\\"><div class="element-box-contents" style="width: 100%; height: 100%;"><div id="439881" ctype="2" class="element comp_paragraph editable-text" style="cursor: default; width: 320px; height: 36px;"><div style="text-align: right;"><span style="line-height: 1; background-color: initial;"><font size="2" color="#888888"><b>举报</b></font></span></div></div></div></div></li>',s=t("#page"+e).find(".edit_wrapper").find("ul");t(a).appendTo(s).click(function(t){t.stopPropagation(),i(e,n)})};var o=[]}(window,jQuery),!function(){function e(e){$("#finger_div"+e).on(a,function(){$("#page"+e).find(".u-arrow-bottom").attr("style","display: none;"),$("#page"+e).find(".edit_wrapper").attr("style","display: none;"),$("#finger_line"+e).show(),$("#finger_info"+e).html("扫描中..."),$("#finger_line"+e).stop(!0,!1).animate({top:"50%",marginTop:"-87px"},1e3,function(){$("#finger_div"+e).unbind(),$("#finger_info"+e).hide().html("扫描成功").fadeIn(300,function(){$("#finger_line"+e).fadeOut(),$("#finger_zw"+e).fadeOut(),$("#finger_div"+e).fadeOut(),$("#finger_info"+e).fadeOut(200,function(){setTimeout(function(){$("#finger_background"+e).removeClass("lock").addClass("unlock")},500),$("#finger_background"+e).addClass("noFinger").fadeOut(500,function(){$("#page"+e).empty(),renderPage(eqShow,e,t);for(var i=0;i<t[e-1].elements.length;i++){var n=eqShow.selectElement(t[e-1].elements[i].id);eqxCommon.bindTrigger(n,t[e-1].elements[i])}}),$("#audio_btn").css("opacity",1),1===e&&eqShow.playVideo(i)})})})})}var t,i;window.lockEffect=function(n,a,s,o,r){i=n,t=a;for(var l=0;l<s.length;l++){var c=s[l].num;$(".finger_background","#page"+c).length&&$(".finger_background","#page"+c).remove(),$('<div class = "finger_background page_effect lock"></div>').prependTo($("#page"+c)).attr("id","finger_background"+c).attr("style","background-image: url("+s[l].finger.bgImage.path+");width:100%; height: 100%;"),$('<div class = "finger_div"></div>').prependTo($("#finger_background"+c)).attr("id","finger_div"+c),$('<img class = "finger_zw"/>').appendTo($("#finger_background"+c)).attr("id","finger_zw"+c).attr("src",s[l].finger.zwImage.path),$('<img class = "finger_line" src = "'+CLIENT_CDN+'view/images/finger_line.png">').appendTo($("#finger_background"+s[l].num)).attr("id","finger_line"+s[l].num),$('<p class = "finger_info"></p>').appendTo($("#finger_background"+c)).attr("id","finger_info"+c),renderPage(eqShow,c,a),e(c)}};var n="ontouchstart"in window,a=n?"touchstart":"mousedown";
}(),!function(){function e(e,t,s,o,r){function l(){timeout=setTimeout(function(){nums>=300*s&&($(t).fadeOut(500,function(){setTimeout(function(){$(t).removeClass("lock").addClass("unlock")},500),$("#audio_btn").css("opacity",1),1===o&&eqShow.playVideo(i)}),nums=0)},n)}var c="ontouchstart"in window,d=c?"touchstart":"mousedown",p=c?"touchmove":"mousemove",u=c?"touchend":"mouseup";e.lineCap="round",e.lineJoin="round",e.lineWidth=2*a,e.globalCompositeOperation="destination-out",new RegExp("assets"),t.addEventListener(d,function(i){function n(t){t.stopPropagation(),l(),nums++,t.preventDefault(),x2=c?t.targetTouches[0].pageX:t.pageX-$("#can"+o).offset().left,y2=c?t.targetTouches[0].pageY:t.pageY-$("#can"+o).offset().top,e.moveTo(x1,y1),e.lineTo(x2,y2),e.stroke(),x1=x2,y1=y2}i.stopPropagation(),$("#tip"+o).remove(),i.preventDefault(),x1=c?i.targetTouches[0].pageX:i.pageX-$("#can"+o).offset().left,y1=c?i.targetTouches[0].pageY:i.pageY-$("#can"+o).offset().top,startX=x1,startY=y1,t.addEventListener(p,n),t.addEventListener(u,function(e){e.stopPropagation(),t.removeEventListener(p,n)})})}var t,i,n=200;window.addScratchEffect=function(n,s,o){t=s,i=n,a=20,nums=0;var r,l=$(".m-img").width(),c=$(".m-img").height(),d=document.createElement("canvas");$(d).prependTo("#page"+o).attr("class","cas scratch-cas page_effect lock").attr("id","can"+o).attr("style","z-index: 1000");var p=d.getContext("2d");d.width=l,d.height=c;var u=new Image;if(s[o-1].properties.image){if(num=o,s[o-1].properties.tip){var h=document.createElement("div");$(h).attr("id","tip"+o).attr("class","tip").prependTo("#page"+o),$(h).html(s[o-1].properties.tip)}u.src=s[o-1].properties.image.path,r=s[o-1].properties.percentage.value}else if(s[o-1].properties.scratch){if(num=o,s[o-1].properties.scratch.tip){var h=document.createElement("div");$(h).attr("id","tip"+o).attr("class","tip").prependTo("#page"+o),$(h).html(s[o-1].properties.scratch.tip)}u.src=s[o-1].properties.scratch.image.path,r=s[o-1].properties.scratch.percentage.value||s[o-1].properties.scratch.percentage}!function(i,n,a,o,r){i.onload=function(){s[o-1].properties.image||!s[o-1].properties.scratch.hasOwnProperty("opacity")?n.globalAlpha=.8:n.globalAlpha=1-parseFloat(s[o-1].properties.scratch.opacity).toFixed(2),n.drawImage(this,0,0,a.width,a.height),renderPage(eqShow,o,t);for(var l=0;l<t[o-1].elements.length;l++){var c=eqShow.selectElement(t[o-1].elements[l].id);eqxCommon.bindTrigger(c,t[o-1].elements[l])}e(n,a,r,o,i)}}(u,p,d,o,r)},window.changeAudioObj=function(e){e&&(i=e)}}(),!function(){var e="ontouchstart"in window,t=e?"touchstart":"mousedown",i=e?"touchmove":"mousemove",n=e?"touchend":"mouseup";window.money={doEffect:function(a,s,o,r){function l(){C=9,E=0,P=0,L.onload=function(){F=L.width,D.drawImage(L,q.width/2-F/2,250)},L.width||(F=200,h1=408),M.onload=function(){if(D.drawImage(M,0,0,q.width,q.height),!I){r(eqShow,s,o);for(var e=0;e<o[s-1].elements.length;e++){var t=eqShow.selectElement(o[s-1].elements[e].id);eqxCommon.bindTrigger(t,o[s-1].elements[e])}}m("开始"),f(0),p(),d(),c(o[s-1].properties.effect.tip)}}function c(e){D.font="20px Arial",D.textAlign="center",D.fillStyle="#FDE528",D.fillText(e,q.width/2,50)}function d(){D.fillStyle="rgba(0, 0, 0, 0.8)",D.fillRect(q.width/2-F/2+5,q.height-85,F-10,80),D.stroke(),D.font="16px Arial",D.textAlign="center",D.fillStyle="#FDE528",D.fillText("点击屏幕，开始数钱",q.width/2,q.height-35)}function p(){q.addEventListener(t,function(t){P++,1!==P&&"1"!==P||u(),w&&(clearInterval(w),_.y-z<-320&&(z=0)),A=!0;var i=e?t.targetTouches[0].pageX:t.pageX,n=e?t.targetTouches[0].pageY:t.pageY;_=h(q,i,n),x=_.x,k=_.y}),q.addEventListener(i,function(t){var i=e?t.targetTouches[0].pageX:t.pageX,n=e?t.targetTouches[0].pageY:t.pageY;_=h(q,i,n),S=_.x-x,T=_.y-k,A&&(D.drawImage(R,q.width/2-F/2,_.y),T<-20?(w=setInterval(g,40),E+=100,A=!1):(D.clearRect(0,0,q.width,q.height),D.drawImage(M,0,0,q.width,q.height),D.drawImage(L,q.width/2-F/2,250),R.onload=function(){D.drawImage(R,q.width/2-F/2,_.y),m(C),f(E)}))}),q.addEventListener(n,function(e){x=0,k=0,A&&(A=!1,w&&(clearInterval(w),z=0),T>=-20&&(D.clearRect(0,0,q.width,q.height),D.drawImage(M,0,0,q.width,q.height),D.drawImage(L,q.width/2-F/2,250),m(C),f(E)))})}function u(){var e=setInterval(function(){C--,m(C),C<=0&&(clearInterval(e),$(q).unbind(t),y())},1e3)}function h(e,t,i){var n=e.getBoundingClientRect();return{x:t-n.left,y:i-n.top}}function g(){D.clearRect(0,0,q.width,q.height),D.drawImage(M,0,0,q.width,q.height),D.drawImage(L,q.width/2-F/2,250),D.drawImage(R,q.width/2-F/2,_.y-z),m(C),f(E),z+=150}function m(e){var t=D.createLinearGradient(q.width/2-90,50,q.width/2-90,120);t.addColorStop(0,"#F3AE28"),t.addColorStop(.5,"#FDE528"),t.addColorStop(1,"#F3AE28"),D.fillStyle=t,D.fillRect(q.width/2-80,90,160,40),D.stroke(),D.font="30px Arial",D.textAlign="center",D.fillStyle="#ff0000",isNaN(e)?D.fillText(e,q.width/2,120):D.fillText(e+"秒",q.width/2,120)}function f(e){D.fillStyle="#FFF",D.roundRect(q.width/2-120,160,240,60,10).stroke(),D.font="30px Arial",D.textAlign="center",D.fillStyle="#FDE528",D.fillText("¥ "+e,q.width/2,205)}function v(){$("#mask_"+s).remove(),$("#alert_"+s).remove(),I=!0,l()}function b(){$("#mask_"+s).remove(),$("#alert_"+s).remove(),$("#money_"+s).removeClass("lock").addClass("unlock").css("display","none"),$("#page"+s).empty(),r(eqShow,s,o),$("#audio_btn").css("opacity",1),1!==s&&"1"!==s||eqShow.playVideo(a);for(var e=0;e<o[s-1].elements.length;e++){var t=eqShow.selectElement(o[s-1].elements[e].id);eqxCommon.bindTrigger(t,o[s-1].elements[e])}}function y(){$('<div class="money_mask"></div>').appendTo($("#page"+s)).attr("id","mask_"+s),$('<div class="money_modal"></div>').appendTo($("#page"+s)).attr("id","alert_"+s),$('<div class="money_img"></div>').appendTo($("#alert_"+s)).attr("id","img_"+s),$('<div class="money_text">恭喜你！<br>2016年每天赚'+E+"元！</div>").appendTo($("#alert_"+s)).attr("id","text_"+s),$('<a class="button tryOnce">再来一次</a>').appendTo($("#alert_"+s)).attr("id","try_"+s),$('<a class="button enterScene">进入场景</a>').appendTo($("#alert_"+s)).attr("id","enter_"+s);var e="标准屌丝";E>=5500&&E<=12e3?e="初级土豪":E>12e3&&(e="高级土豪"),$('<div class="level_text">'+e+"</div>").appendTo("#alert_"+s),$('<div class="tip-text">仅供娱乐</div>').appendTo("#alert_"+s),$("#try_"+s).on("click",function(){v()}),$("#enter_"+s).on("click",function(){b()})}$('<canvas class="money page_effect lock"></canvas>').prependTo($("#page"+s)).attr("id","money_"+s);var w,x,k,S,T,C,E,P,I,_,L,M,R,q=document.getElementById("money_"+s),D=q.getContext("2d"),A=!1,F=0,z=0;return q.width=$(".z-current").width(),q.height=$(".z-current").height(),L=new Image,L.src=CLIENT_CDN+"assets/images/money/moremoney.png",M=new Image,M.src=CLIENT_CDN+"assets/images/money/moneybg.png",R=new Image,R.src=CLIENT_CDN+"assets/images/money/flymoney.png",l(),window.money}},CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,n,a){return i<2*a&&(a=i/2),n<2*a&&(a=n/2),this.beginPath(),this.moveTo(e+a,t),this.strokeStyle="#FDE528",this.arcTo(e+i,t,e+i,t+n,a),this.arcTo(e+i,t+n,e,t+n,a),this.arcTo(e,t+n,e,t,a),this.arcTo(e,t,e+i,t,a),this.closePath(),this.fillStyle="#FDE528",this}}(),!function(){window.fallingObject=function(e,t){function i(){r.pause?clearInterval(r.interVal):(n(m),a())}function n(e){e.clearRect(0,0,u,h);for(var t=0;t<f.length;t++)e.save(),e.translate(f[t].x,f[t].y),e.scale(f[t].scale,f[t].scale),e.rotate(f[t].rotate),e.fillRect(0,0,v,v),e.restore()}function a(){Math.random()<.02*c.density&&o(),s()}function s(){for(t=0;t<f.length;t++)f[t].x+=f[t].vx,f[t].y+=f[t].vy,f[t].vy+=f[t].g;for(var e=0,t=0;t<f.length;t++)f[t].y<h-v&&f[t].x>-v&&f[t].x<u&&(f[e++]=f[t]);for(;f.length>e;)f.pop();f.length>b&&(f.length=b)}function o(){var e=.5*Math.random()+.3,t={x:Math.ceil(Math.random()*u),y:-v,g:.02*e*c.src.vy,vx:.05*Math.pow(-1,Math.ceil(1e3*Math.random())),vy:.01*e*c.src.vy,color:"yellow",scale:e,rotate:Math.pow(-1,Math.ceil(1e3*Math.random()))*Math.random()*(c.src.rotate||0)*Math.PI/180};f.push(t)}var r={pause:!1,startPlay:function(){this.pause=!1,r.interVal=setInterval(i,20)}},l=e[t-1];if(l.properties){var c=l.properties.fallingObject||{};renderPage(eqShow,t,e);for(var d=0;d<e[t-1].elements.length;d++){var p=eqShow.selectElement(e[t-1].elements[d].id);eqxCommon.bindTrigger(p,e[t-1].elements[d])}var u=$(".m-img").width(),h=$(".m-img").height(),g=document.createElement("canvas");g.width=u,g.height=h,$(g).prependTo("#page"+t+" .edit_wrapper").attr("class","cas page_effect").attr("id","can"+t).attr("style","z-index: 0!important");var m=g.getContext("2d"),f=[],v=60,b=20,y=new Image;return y.src=c.src.path,y.onload=function(){m.beginPath();var e=m.createPattern(y,"repeat");m.fillStyle=e,m.closePath(),1===t&&(r.interVal=setInterval(i,20))},r}}}();var THREE=THREE||{};self.Int32Array||(self.Int32Array=Array,self.Float32Array=Array),THREE.Color=function(e){return void 0!==e&&this.setHex(e),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSV:function(e,t,i){var n,a,s;if(0===i)this.r=this.g=this.b=0;else switch(n=Math.floor(6*e),a=6*e-n,e=i*(1-t),s=i*(1-t*a),t=i*(1-t*(1-a)),n){case 1:this.r=s,this.g=i,this.b=e;break;case 2:this.r=e,this.g=i,this.b=t;break;case 3:this.r=e,this.g=s,this.b=i;break;case 4:this.r=t,this.g=e,this.b=i;break;case 5:this.r=i,this.g=e,this.b=s;break;case 6:case 0:this.r=i,this.g=t,this.b=e}return this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},getHex:function(){return~~(255*this.r)<<16^~~(255*this.g)<<8^~~(255*this.b)},getContextStyle:function(){return"rgb("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+")"},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new THREE.Vector2(this.x,this.y)},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,e=this.y-e.y;return t*t+e*e},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return e.x===this.x&&e.y===this.y}},THREE.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},multiply:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},multiplySelf:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideSelf:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e,this.z/=e):this.z=this.y=this.x=0,this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return this.x+this.y+this.z},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},cross:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},crossSelf:function(e){var t=this.x,i=this.y,n=this.z;return this.x=i*e.z-n*e.y,this.y=n*e.x-t*e.z,this.z=t*e.y-i*e.x,this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){return(new THREE.Vector3).sub(this,e).lengthSq()},setPositionFromMatrix:function(e){this.x=e.n14,this.y=e.n24,this.z=e.n34},setRotationFromMatrix:function(e){var t=Math.cos(this.y);this.y=Math.asin(e.n13),Math.abs(t)>1e-5?(this.x=Math.atan2(-e.n23/t,e.n33/t),this.z=Math.atan2(-e.n12/t,e.n11/t)):(this.x=0,this.z=Math.atan2(e.n21,e.n22))},isZero:function(){return this.lengthSq()<1e-4}},THREE.Vector4=function(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},copy:function(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e,this.z/=e,this.w/=e):(this.z=this.y=this.x=0,this.w=1),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},THREE.Ray=function(e,t){function i(e,t,i){return k.sub(i,e),p=k.dot(t),p<=0?null:(u=S.add(e,T.copy(t).multiplyScalar(p)),h=i.distanceTo(u))}function n(e,t,i,n){return k.sub(n,t),S.sub(i,t),T.sub(e,t),g=k.dot(k),m=k.dot(S),f=k.dot(T),v=S.dot(S),b=S.dot(T),y=1/(g*v-m*m),w=(v*f-m*b)*y,x=(g*b-m*f)*y,w>=0&&x>=0&&w+x<1}this.origin=e||new THREE.Vector3,this.direction=t||new THREE.Vector3,this.intersectScene=function(e){return this.intersectObjects(e.children)},this.intersectObjects=function(e){var t,i,n=[];for(t=0,i=e.length;t<i;t++)Array.prototype.push.apply(n,this.intersectObject(e[t]));return n.sort(function(e,t){return e.distance-t.distance}),n};var a=new THREE.Vector3,s=new THREE.Vector3,o=new THREE.Vector3,r=new THREE.Vector3,e=new THREE.Vector3,t=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;this.intersectObject=function(p){for(var u,h=[],g=0,m=p.children.length;g<m;g++)Array.prototype.push.apply(h,this.intersectObject(p.children[g]));if(p instanceof THREE.Particle){if(g=i(this.origin,this.direction,p.matrixWorld.getPosition()),null===g||g>p.scale.x)return[];u={distance:g,point:p.position,face:null,object:p},h.push(u)}else if(p instanceof THREE.Mesh){if(g=i(this.origin,this.direction,p.matrixWorld.getPosition()),null===g||g>p.geometry.boundingSphere.radius*Math.max(p.scale.x,Math.max(p.scale.y,p.scale.z)))return h;var f,v,b=p.geometry,y=b.vertices;for(p.matrixRotationWorld.extractRotation(p.matrixWorld),g=0,m=b.faces.length;g<m;g++)u=b.faces[g],e.copy(this.origin),t.copy(this.direction),v=p.matrixWorld,l=v.multiplyVector3(l.copy(u.centroid)).subSelf(e),f=l.dot(t),f<=0||(a=v.multiplyVector3(a.copy(y[u.a].position)),s=v.multiplyVector3(s.copy(y[u.b].position)),o=v.multiplyVector3(o.copy(y[u.c].position)),u instanceof THREE.Face4&&(r=v.multiplyVector3(r.copy(y[u.d].position))),c=p.matrixRotationWorld.multiplyVector3(c.copy(u.normal)),f=t.dot(c),!p.doubleSided&&!(p.flipSided?f>0:f<0))||(f=c.dot(l.sub(a,e))/f,d.add(e,t.multiplyScalar(f)),u instanceof THREE.Face3?n(d,a,s,o)&&(u={distance:e.distanceTo(d),point:d.clone(),face:u,object:p},h.push(u)):u instanceof THREE.Face4&&(n(d,a,s,r)||n(d,s,o,r))&&(u={distance:e.distanceTo(d),point:d.clone(),face:u,object:p},h.push(u)))}return h};var p,u,h,g,m,f,v,b,y,w,x,k=new THREE.Vector3,S=new THREE.Vector3,T=new THREE.Vector3},THREE.Rectangle=function(){function e(){s=n-t,o=a-i}var t,i,n,a,s,o,r=!0;this.getX=function(){return t},this.getY=function(){return i},this.getWidth=function(){return s},this.getHeight=function(){return o},this.getLeft=function(){return t},this.getTop=function(){return i},this.getRight=function(){return n},this.getBottom=function(){return a},this.set=function(s,o,l,c){r=!1,t=s,i=o,n=l,a=c,e()},this.addPoint=function(s,o){r?(r=!1,t=s,i=o,n=s,a=o):(t=t<s?t:s,i=i<o?i:o,n=n>s?n:s,a=a>o?a:o),e()},this.add3Points=function(s,o,l,c,d,p){r?(r=!1,t=s<l?s<d?s:d:l<d?l:d,i=o<c?o<p?o:p:c<p?c:p,n=s>l?s>d?s:d:l>d?l:d,a=o>c?o>p?o:p:c>p?c:p):(t=s<l?s<d?s<t?s:t:d<t?d:t:l<d?l<t?l:t:d<t?d:t,i=o<c?o<p?o<i?o:i:p<i?p:i:c<p?c<i?c:i:p<i?p:i,n=s>l?s>d?s>n?s:n:d>n?d:n:l>d?l>n?l:n:d>n?d:n,a=o>c?o>p?o>a?o:a:p>a?p:a:c>p?c>a?c:a:p>a?p:a),e()},this.addRectangle=function(s){r?(r=!1,t=s.getLeft(),i=s.getTop(),n=s.getRight(),a=s.getBottom()):(t=t<s.getLeft()?t:s.getLeft(),i=i<s.getTop()?i:s.getTop(),n=n>s.getRight()?n:s.getRight(),a=a>s.getBottom()?a:s.getBottom()),e()},this.inflate=function(s){t-=s,i-=s,n+=s,a+=s,e()},this.minSelf=function(s){t=t>s.getLeft()?t:s.getLeft(),i=i>s.getTop()?i:s.getTop(),n=n<s.getRight()?n:s.getRight(),a=a<s.getBottom()?a:s.getBottom(),e()},this.intersects=function(e){return Math.min(n,e.getRight())-Math.max(t,e.getLeft())>=0&&Math.min(a,e.getBottom())-Math.max(i,e.getTop())>=0},this.empty=function(){r=!0,a=n=i=t=0,e()},this.isEmpty=function(){return r}},THREE.Math={clamp:function(e,t,i){return e<t?t:e>i?i:e},clampBottom:function(e,t){return e<t?t:e},mapLinear:function(e,t,i,n,a){return n+(e-t)*(a-n)/(i-t)},random16:function(){return(65280*Math.random()+255*Math.random())/65535}},THREE.Matrix3=function(){this.m=[]},THREE.Matrix3.prototype={constructor:THREE.Matrix3,transpose:function(){var e,t=this.m;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},transposeIntoArray:function(e){var t=this.m;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},THREE.Matrix4=function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,g,m){this.set(void 0!==e?e:1,t||0,i||0,n||0,a||0,void 0!==s?s:1,o||0,r||0,l||0,c||0,void 0!==d?d:1,p||0,u||0,h||0,g||0,void 0!==m?m:1),this.flat=Array(16),this.m33=new THREE.Matrix3},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,g,m){return this.n11=e,this.n12=t,this.n13=i,this.n14=n,this.n21=a,this.n22=s,this.n23=o,this.n24=r,this.n31=l,this.n32=c,this.n33=d,this.n34=p,this.n41=u,this.n42=h,this.n43=g,this.n44=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.set(e.n11,e.n12,e.n13,e.n14,e.n21,e.n22,e.n23,e.n24,e.n31,e.n32,e.n33,e.n34,e.n41,e.n42,e.n43,e.n44),this},lookAt:function(e,t,i){var n=THREE.Matrix4.__v1,a=THREE.Matrix4.__v2,s=THREE.Matrix4.__v3;return s.sub(e,t).normalize(),0===s.length()&&(s.z=1),n.cross(i,s).normalize(),0===n.length()&&(s.x+=1e-4,n.cross(i,s).normalize()),a.cross(s,n).normalize(),this.n11=n.x,this.n12=a.x,this.n13=s.x,this.n21=n.y,this.n22=a.y,this.n23=s.y,this.n31=n.z,this.n32=a.z,this.n33=s.z,this},multiply:function(e,t){var i=e.n11,n=e.n12,a=e.n13,s=e.n14,o=e.n21,r=e.n22,l=e.n23,c=e.n24,d=e.n31,p=e.n32,u=e.n33,h=e.n34,g=e.n41,m=e.n42,f=e.n43,v=e.n44,b=t.n11,y=t.n12,w=t.n13,x=t.n14,k=t.n21,S=t.n22,T=t.n23,C=t.n24,E=t.n31,P=t.n32,I=t.n33,$=t.n34,_=t.n41,L=t.n42,M=t.n43,R=t.n44;return this.n11=i*b+n*k+a*E+s*_,this.n12=i*y+n*S+a*P+s*L,this.n13=i*w+n*T+a*I+s*M,this.n14=i*x+n*C+a*$+s*R,this.n21=o*b+r*k+l*E+c*_,this.n22=o*y+r*S+l*P+c*L,this.n23=o*w+r*T+l*I+c*M,this.n24=o*x+r*C+l*$+c*R,this.n31=d*b+p*k+u*E+h*_,this.n32=d*y+p*S+u*P+h*L,this.n33=d*w+p*T+u*I+h*M,this.n34=d*x+p*C+u*$+h*R,this.n41=g*b+m*k+f*E+v*_,this.n42=g*y+m*S+f*P+v*L,this.n43=g*w+m*T+f*I+v*M,this.n44=g*x+m*C+f*$+v*R,this},multiplySelf:function(e){return this.multiply(this,e)},multiplyToArray:function(e,t,i){return this.multiply(e,t),i[0]=this.n11,i[1]=this.n21,i[2]=this.n31,i[3]=this.n41,i[4]=this.n12,i[5]=this.n22,i[6]=this.n32,i[7]=this.n42,i[8]=this.n13,i[9]=this.n23,i[10]=this.n33,i[11]=this.n43,i[12]=this.n14,i[13]=this.n24,i[14]=this.n34,i[15]=this.n44,this},multiplyScalar:function(e){return this.n11*=e,this.n12*=e,this.n13*=e,this.n14*=e,this.n21*=e,this.n22*=e,this.n23*=e,this.n24*=e,this.n31*=e,this.n32*=e,this.n33*=e,this.n34*=e,this.n41*=e,this.n42*=e,this.n43*=e,this.n44*=e,this},multiplyVector3:function(e){var t=e.x,i=e.y,n=e.z,a=1/(this.n41*t+this.n42*i+this.n43*n+this.n44);return e.x=(this.n11*t+this.n12*i+this.n13*n+this.n14)*a,e.y=(this.n21*t+this.n22*i+this.n23*n+this.n24)*a,e.z=(this.n31*t+this.n32*i+this.n33*n+this.n34)*a,e},multiplyVector4:function(e){var t=e.x,i=e.y,n=e.z,a=e.w;return e.x=this.n11*t+this.n12*i+this.n13*n+this.n14*a,e.y=this.n21*t+this.n22*i+this.n23*n+this.n24*a,e.z=this.n31*t+this.n32*i+this.n33*n+this.n34*a,e.w=this.n41*t+this.n42*i+this.n43*n+this.n44*a,e},rotateAxis:function(e){var t=e.x,i=e.y,n=e.z;return e.x=t*this.n11+i*this.n12+n*this.n13,e.y=t*this.n21+i*this.n22+n*this.n23,e.z=t*this.n31+i*this.n32+n*this.n33,e.normalize(),e},crossVector:function(e){var t=new THREE.Vector4;return t.x=this.n11*e.x+this.n12*e.y+this.n13*e.z+this.n14*e.w,t.y=this.n21*e.x+this.n22*e.y+this.n23*e.z+this.n24*e.w,t.z=this.n31*e.x+this.n32*e.y+this.n33*e.z+this.n34*e.w,t.w=e.w?this.n41*e.x+this.n42*e.y+this.n43*e.z+this.n44*e.w:1,t},determinant:function(){var e=this.n11,t=this.n12,i=this.n13,n=this.n14,a=this.n21,s=this.n22,o=this.n23,r=this.n24,l=this.n31,c=this.n32,d=this.n33,p=this.n34,u=this.n41,h=this.n42,g=this.n43,m=this.n44;return n*o*c*u-i*r*c*u-n*s*d*u+t*r*d*u+i*s*p*u-t*o*p*u-n*o*l*h+i*r*l*h+n*a*d*h-e*r*d*h-i*a*p*h+e*o*p*h+n*s*l*g-t*r*l*g-n*a*c*g+e*r*c*g+t*a*p*g-e*s*p*g-i*s*l*m+t*o*l*m+i*a*c*m-e*o*c*m-t*a*d*m+e*s*d*m},transpose:function(){var e;return e=this.n21,this.n21=this.n12,this.n12=e,e=this.n31,this.n31=this.n13,this.n13=e,e=this.n32,this.n32=this.n23,this.n23=e,e=this.n41,this.n41=this.n14,this.n14=e,e=this.n42,this.n42=this.n24,this.n24=e,e=this.n43,this.n43=this.n34,this.n43=e,this},clone:function(){var e=new THREE.Matrix4;return e.n11=this.n11,e.n12=this.n12,e.n13=this.n13,e.n14=this.n14,e.n21=this.n21,e.n22=this.n22,e.n23=this.n23,e.n24=this.n24,e.n31=this.n31,e.n32=this.n32,e.n33=this.n33,e.n34=this.n34,e.n41=this.n41,e.n42=this.n42,e.n43=this.n43,e.n44=this.n44,e},flatten:function(){return this.flat[0]=this.n11,this.flat[1]=this.n21,this.flat[2]=this.n31,this.flat[3]=this.n41,this.flat[4]=this.n12,this.flat[5]=this.n22,this.flat[6]=this.n32,this.flat[7]=this.n42,this.flat[8]=this.n13,this.flat[9]=this.n23,this.flat[10]=this.n33,this.flat[11]=this.n43,this.flat[12]=this.n14,this.flat[13]=this.n24,this.flat[14]=this.n34,this.flat[15]=this.n44,this.flat},flattenToArray:function(e){return e[0]=this.n11,e[1]=this.n21,e[2]=this.n31,e[3]=this.n41,e[4]=this.n12,e[5]=this.n22,e[6]=this.n32,e[7]=this.n42,e[8]=this.n13,e[9]=this.n23,e[10]=this.n33,e[11]=this.n43,e[12]=this.n14,e[13]=this.n24,e[14]=this.n34,e[15]=this.n44,e},flattenToArrayOffset:function(e,t){return e[t]=this.n11,e[t+1]=this.n21,e[t+2]=this.n31,e[t+3]=this.n41,e[t+4]=this.n12,e[t+5]=this.n22,e[t+6]=this.n32,e[t+7]=this.n42,e[t+8]=this.n13,e[t+9]=this.n23,e[t+10]=this.n33,e[t+11]=this.n43,e[t+12]=this.n14,e[t+13]=this.n24,e[t+14]=this.n34,e[t+15]=this.n44,e},setTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},setScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},setRotationX:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},setRotationY:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},setRotationZ:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},setRotationAxis:function(e,t){var i=Math.cos(t),n=Math.sin(t),a=1-i,s=e.x,o=e.y,r=e.z,l=a*s,c=a*o;return this.set(l*s+i,l*o-n*r,l*r+n*o,0,l*o+n*r,c*o+i,c*r-n*s,0,l*r-n*o,c*r+n*s,a*r*r+i,0,0,0,0,1),this},setPosition:function(e){return this.n14=e.x,this.n24=e.y,this.n34=e.z,this},getPosition:function(){return THREE.Matrix4.__v1.set(this.n14,this.n24,this.n34)},getColumnX:function(){return THREE.Matrix4.__v1.set(this.n11,this.n21,this.n31)},getColumnY:function(){return THREE.Matrix4.__v1.set(this.n12,this.n22,this.n32)},getColumnZ:function(){return THREE.Matrix4.__v1.set(this.n13,this.n23,this.n33)},getInverse:function(e){var t=e.n11,i=e.n12,n=e.n13,a=e.n14,s=e.n21,o=e.n22,r=e.n23,l=e.n24,c=e.n31,d=e.n32,p=e.n33,u=e.n34,h=e.n41,g=e.n42,m=e.n43,f=e.n44;return this.n11=r*u*g-l*p*g+l*d*m-o*u*m-r*d*f+o*p*f,this.n12=a*p*g-n*u*g-a*d*m+i*u*m+n*d*f-i*p*f,this.n13=n*l*g-a*r*g+a*o*m-i*l*m-n*o*f+i*r*f,this.n14=a*r*d-n*l*d-a*o*p+i*l*p+n*o*u-i*r*u,this.n21=l*p*h-r*u*h-l*c*m+s*u*m+r*c*f-s*p*f,this.n22=n*u*h-a*p*h+a*c*m-t*u*m-n*c*f+t*p*f,this.n23=a*r*h-n*l*h-a*s*m+t*l*m+n*s*f-t*r*f,this.n24=n*l*c-a*r*c+a*s*p-t*l*p-n*s*u+t*r*u,this.n31=o*u*h-l*d*h+l*c*g-s*u*g-o*c*f+s*d*f,this.n32=a*d*h-i*u*h-a*c*g+t*u*g+i*c*f-t*d*f,this.n33=n*l*h-a*o*h+a*s*g-t*l*g-i*s*f+t*o*f,this.n34=a*o*c-i*l*c-a*s*d+t*l*d+i*s*u-t*o*u,this.n41=r*d*h-o*p*h-r*c*g+s*p*g+o*c*m-s*d*m,this.n42=i*p*h-n*d*h+n*c*g-t*p*g-i*c*m+t*d*m,this.n43=n*o*h-i*r*h-n*s*g+t*r*g+i*s*m-t*o*m,this.n44=i*r*c-n*o*c+n*s*d-t*r*d-i*s*p+t*o*p,this.multiplyScalar(1/e.determinant()),this},setRotationFromEuler:function(e,t){var i=e.x,n=e.y,a=e.z,s=Math.cos(i),i=Math.sin(i),o=Math.cos(n),n=Math.sin(n),r=Math.cos(a),a=Math.sin(a);switch(t){case"YXZ":var l=o*r,c=o*a,d=n*r,p=n*a;this.n11=l+p*i,this.n12=d*i-c,this.n13=s*n,this.n21=s*a,this.n22=s*r,this.n23=-i,this.n31=c*i-d,this.n32=p+l*i,this.n33=s*o;break;case"ZXY":l=o*r,c=o*a,d=n*r,p=n*a,this.n11=l-p*i,this.n12=-s*a,this.n13=d+c*i,this.n21=c+d*i,this.n22=s*r,this.n23=p-l*i,this.n31=-s*n,this.n32=i,this.n33=s*o;break;case"ZYX":l=s*r,c=s*a,d=i*r,p=i*a,this.n11=o*r,this.n12=d*n-c,this.n13=l*n+p,this.n21=o*a,this.n22=p*n+l,this.n23=c*n-d,this.n31=-n,this.n32=i*o,this.n33=s*o;break;case"YZX":l=s*o,c=s*n,d=i*o,p=i*n,this.n11=o*r,this.n12=p-l*a,this.n13=d*a+c,this.n21=a,this.n22=s*r,this.n23=-i*r,this.n31=-n*r,this.n32=c*a+d,this.n33=l-p*a;break;case"XZY":l=s*o,c=s*n,d=i*o,p=i*n,this.n11=o*r,this.n12=-a,this.n13=n*r,this.n21=l*a+p,this.n22=s*r,this.n23=c*a-d,this.n31=d*a-c,this.n32=i*r,this.n33=p*a+l;break;default:l=s*r,c=s*a,d=i*r,p=i*a,this.n11=o*r,this.n12=-o*a,this.n13=n,this.n21=c+d*n,this.n22=l-p*n,this.n23=-i*o,this.n31=p-l*n,this.n32=d+c*n,this.n33=s*o}return this},setRotationFromQuaternion:function(e){var t=e.x,i=e.y,n=e.z,a=e.w,s=t+t,o=i+i,r=n+n,e=t*s,l=t*o;t*=r;var c=i*o;return i*=r,n*=r,s*=a,o*=a,a*=r,this.n11=1-(c+n),this.n12=l-a,this.n13=t+o,this.n21=l+a,this.n22=1-(e+n),this.n23=i-s,this.n31=t-o,this.n32=i+s,this.n33=1-(e+c),this},scale:function(e){var t=e.x,i=e.y,e=e.z;return this.n11*=t,this.n12*=i,this.n13*=e,this.n21*=t,this.n22*=i,this.n23*=e,this.n31*=t,this.n32*=i,this.n33*=e,this.n41*=t,this.n42*=i,this.n43*=e,this},compose:function(e,t,i){var n=THREE.Matrix4.__m1,a=THREE.Matrix4.__m2;return n.identity(),n.setRotationFromQuaternion(t),a.setScale(i.x,i.y,i.z),this.multiply(n,a),this.n14=e.x,this.n24=e.y,this.n34=e.z,this},decompose:function(e,t,i){var n=THREE.Matrix4.__v1,a=THREE.Matrix4.__v2,s=THREE.Matrix4.__v3;return n.set(this.n11,this.n21,this.n31),a.set(this.n12,this.n22,this.n32),s.set(this.n13,this.n23,this.n33),e=e instanceof THREE.Vector3?e:new THREE.Vector3,t=t instanceof THREE.Quaternion?t:new THREE.Quaternion,i=i instanceof THREE.Vector3?i:new THREE.Vector3,i.x=n.length(),i.y=a.length(),i.z=s.length(),e.x=this.n14,e.y=this.n24,e.z=this.n34,n=THREE.Matrix4.__m1,n.copy(this),n.n11/=i.x,n.n21/=i.x,n.n31/=i.x,n.n12/=i.y,n.n22/=i.y,n.n32/=i.y,n.n13/=i.z,n.n23/=i.z,n.n33/=i.z,t.setFromRotationMatrix(n),[e,t,i]},extractPosition:function(e){return this.n14=e.n14,this.n24=e.n24,this.n34=e.n34,this},extractRotation:function(e){var t=THREE.Matrix4.__v1,i=1/t.set(e.n11,e.n21,e.n31).length(),n=1/t.set(e.n12,e.n22,e.n32).length(),t=1/t.set(e.n13,e.n23,e.n33).length();return this.n11=e.n11*i,this.n21=e.n21*i,this.n31=e.n31*i,this.n12=e.n12*n,this.n22=e.n22*n,this.n32=e.n32*n,this.n13=e.n13*t,this.n23=e.n23*t,this.n33=e.n33*t,this}},THREE.Matrix4.makeInvert3x3=function(e){var t=e.m33,i=t.m,n=e.n33*e.n22-e.n32*e.n23,a=-e.n33*e.n21+e.n31*e.n23,s=e.n32*e.n21-e.n31*e.n22,o=-e.n33*e.n12+e.n32*e.n13,r=e.n33*e.n11-e.n31*e.n13,l=-e.n32*e.n11+e.n31*e.n12,c=e.n23*e.n12-e.n22*e.n13,d=-e.n23*e.n11+e.n21*e.n13,p=e.n22*e.n11-e.n21*e.n12,e=e.n11*n+e.n21*o+e.n31*c;return 0===e&&console.error("THREE.Matrix4.makeInvert3x3: Matrix not invertible."),e=1/e,i[0]=e*n,i[1]=e*a,i[2]=e*s,i[3]=e*o,i[4]=e*r,i[5]=e*l,i[6]=e*c,i[7]=e*d,i[8]=e*p,t},THREE.Matrix4.makeFrustum=function(e,t,i,n,a,s){var o;return o=new THREE.Matrix4,o.n11=2*a/(t-e),o.n12=0,o.n13=(t+e)/(t-e),o.n14=0,o.n21=0,o.n22=2*a/(n-i),o.n23=(n+i)/(n-i),o.n24=0,o.n31=0,o.n32=0,o.n33=-(s+a)/(s-a),o.n34=-2*s*a/(s-a),o.n41=0,o.n42=0,o.n43=-1,o.n44=0,o},THREE.Matrix4.makePerspective=function(e,t,i,n){var a,e=i*Math.tan(e*Math.PI/360);return a=-e,THREE.Matrix4.makeFrustum(a*t,e*t,a,e,i,n)},THREE.Matrix4.makeOrtho=function(e,t,i,n,a,s){var o,r,l,c;return o=new THREE.Matrix4,r=t-e,l=i-n,c=s-a,o.n11=2/r,o.n12=0,o.n13=0,o.n14=-((t+e)/r),o.n21=0,o.n22=2/l,o.n23=0,o.n24=-((i+n)/l),o.n31=0,o.n32=0,o.n33=-2/c,o.n34=-((s+a)/c),o.n41=0,o.n42=0,o.n43=0,o.n44=1,o},THREE.Matrix4.__v1=new THREE.Vector3,THREE.Matrix4.__v2=new THREE.Vector3,THREE.Matrix4.__v3=new THREE.Vector3,THREE.Matrix4.__m1=new THREE.Matrix4,THREE.Matrix4.__m2=new THREE.Matrix4,THREE.Object3D=function(){this.name="",this.id=THREE.Object3DCount++,this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this.rotation=new THREE.Vector3,this.eulerOrder="XYZ",this.scale=new THREE.Vector3(1,1,1),this.flipSided=this.doubleSided=this.dynamic=!1,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixRotationWorld=new THREE.Matrix4,this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0,this.quaternion=new THREE.Quaternion,this.useQuaternion=!1,this.boundRadius=0,this.boundRadiusScale=1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this._vector=new THREE.Vector3},THREE.Object3D.prototype={constructor:THREE.Object3D,translate:function(e,t){this.matrix.rotateAxis(t),this.position.addSelf(t.multiplyScalar(e))},translateX:function(e){this.translate(e,this._vector.set(1,0,0))},translateY:function(e){this.translate(e,this._vector.set(0,1,0))},translateZ:function(e){this.translate(e,this._vector.set(0,0,1))},lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix);
},add:function(e){if(this.children.indexOf(e)===-1){void 0!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(t!==-1){for(e.parent=void 0,this.children.splice(t,1),t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.removeObject(e)}},getChildByName:function(e,t){var i,n,a;for(i=0,n=this.children.length;i<n;i++){if(a=this.children[i],a.name===e)return a;if(t&&(a=a.getChildByName(e,t),void 0!==a))return a}},updateMatrix:function(){this.matrix.setPosition(this.position),this.useQuaternion?this.matrix.setRotationFromQuaternion(this.quaternion):this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.z))),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?this.matrixWorld.multiply(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)}},THREE.Object3DCount=0,THREE.Projector=function(){function e(){var e=m[s]=m[s]||new THREE.RenderableObject;return s++,e}function t(){var e=f[r]=f[r]||new THREE.RenderableVertex;return r++,e}function i(e,t){return t.z-e.z}function n(e,t){var i=0,n=1,a=e.z+e.w,s=t.z+t.w,o=-e.z+e.w,r=-t.z+t.w;return a>=0&&s>=0&&o>=0&&r>=0||!(a<0&&s<0||o<0&&r<0)&&(a<0?i=Math.max(i,a/(a-s)):s<0&&(n=Math.min(n,a/(a-s))),o<0?i=Math.max(i,o/(o-r)):r<0&&(n=Math.min(n,o/(o-r))),!(n<i||(e.lerpSelf(t,i),t.lerpSelf(e,1-n),0)))}var a,s,o,r,l,c,d,p,u,h,g,m=[],f=[],v=[],b=[],y=[],w=[],x={objects:[],sprites:[],lights:[],elements:[]},k=new THREE.Vector3,S=new THREE.Vector4,T=new THREE.Matrix4,C=new THREE.Matrix4,E=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],P=new THREE.Vector4,I=new THREE.Vector4;this.computeFrustum=function(e){for(E[0].set(e.n41-e.n11,e.n42-e.n12,e.n43-e.n13,e.n44-e.n14),E[1].set(e.n41+e.n11,e.n42+e.n12,e.n43+e.n13,e.n44+e.n14),E[2].set(e.n41+e.n21,e.n42+e.n22,e.n43+e.n23,e.n44+e.n24),E[3].set(e.n41-e.n21,e.n42-e.n22,e.n43-e.n23,e.n44-e.n24),E[4].set(e.n41-e.n31,e.n42-e.n32,e.n43-e.n33,e.n44-e.n34),E[5].set(e.n41+e.n31,e.n42+e.n32,e.n43+e.n33,e.n44+e.n34),e=0;e<6;e++){var t=E[e];t.divideScalar(Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z))}},this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),T.multiply(t.projectionMatrix,t.matrixWorldInverse),T.multiplyVector3(e),e},this.unprojectVector=function(e,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),T.multiply(t.matrixWorld,t.projectionMatrixInverse),T.multiplyVector3(e),e},this.pickingRay=function(e,t){var i;return e.z=-1,i=new THREE.Vector3(e.x,e.y,1),this.unprojectVector(e,t),this.unprojectVector(i,t),i.subSelf(e).normalize(),new THREE.Ray(e,i)},this.projectGraph=function(t,n){s=0,x.objects.length=0,x.sprites.length=0,x.lights.length=0;var o=function(t){if(t.visible!==!1){var i;if((i=t instanceof THREE.Mesh||t instanceof THREE.Line)&&!(i=t.frustumCulled===!1))e:{for(var n=t.matrixWorld,s=-t.geometry.boundingSphere.radius*Math.max(t.scale.x,Math.max(t.scale.y,t.scale.z)),r=0;r<6;r++)if(i=E[r].x*n.n14+E[r].y*n.n24+E[r].z*n.n34+E[r].w,i<=s){i=!1;break e}i=!0}for(i?(T.multiplyVector3(k.copy(t.position)),a=e(),a.object=t,a.z=k.z,x.objects.push(a)):t instanceof THREE.Sprite||t instanceof THREE.Particle?(T.multiplyVector3(k.copy(t.position)),a=e(),a.object=t,a.z=k.z,x.sprites.push(a)):t instanceof THREE.Light&&x.lights.push(t),i=0,n=t.children.length;i<n;i++)o(t.children[i])}};return o(t),n&&x.objects.sort(i),x},this.projectScene=function(e,a,s){var m,k,E,$,_,L,M,R,q,D,A,F,z,N,O,U,H=a.near,j=a.far;for(g=u=d=c=0,x.elements.length=0,void 0===a.parent&&(console.warn("DEPRECATED: Camera hasn't been added to a Scene. Adding it..."),e.add(a)),e.updateMatrixWorld(),a.matrixWorldInverse.getInverse(a.matrixWorld),T.multiply(a.projectionMatrix,a.matrixWorldInverse),this.computeFrustum(T),x=this.projectGraph(e,!1),e=0,m=x.objects.length;e<m;e++)if(q=x.objects[e].object,D=q.matrixWorld,F=q.material,r=0,q instanceof THREE.Mesh){for(A=q.geometry,z=q.geometry.materials,$=A.vertices,N=A.faces,O=A.faceVertexUvs,A=q.matrixRotationWorld.extractRotation(D),k=0,E=$.length;k<E;k++)o=t(),o.positionWorld.copy($[k].position),D.multiplyVector3(o.positionWorld),o.positionScreen.copy(o.positionWorld),T.multiplyVector4(o.positionScreen),o.positionScreen.x/=o.positionScreen.w,o.positionScreen.y/=o.positionScreen.w,o.visible=o.positionScreen.z>H&&o.positionScreen.z<j;for($=0,k=N.length;$<k;$++){if(E=N[$],E instanceof THREE.Face3){if(_=f[E.a],L=f[E.b],M=f[E.c],!(_.visible&&L.visible&&M.visible)||!q.doubleSided&&q.flipSided==(M.positionScreen.x-_.positionScreen.x)*(L.positionScreen.y-_.positionScreen.y)-(M.positionScreen.y-_.positionScreen.y)*(L.positionScreen.x-_.positionScreen.x)<0)continue;R=v[c]=v[c]||new THREE.RenderableFace3,c++,l=R,l.v1.copy(_),l.v2.copy(L),l.v3.copy(M)}else if(E instanceof THREE.Face4){if(_=f[E.a],L=f[E.b],M=f[E.c],R=f[E.d],!(_.visible&&L.visible&&M.visible&&R.visible)||!q.doubleSided&&q.flipSided==((R.positionScreen.x-_.positionScreen.x)*(L.positionScreen.y-_.positionScreen.y)-(R.positionScreen.y-_.positionScreen.y)*(L.positionScreen.x-_.positionScreen.x)<0||(L.positionScreen.x-M.positionScreen.x)*(R.positionScreen.y-M.positionScreen.y)-(L.positionScreen.y-M.positionScreen.y)*(R.positionScreen.x-M.positionScreen.x)<0))continue;U=b[d]=b[d]||new THREE.RenderableFace4,d++,l=U,l.v1.copy(_),l.v2.copy(L),l.v3.copy(M),l.v4.copy(R)}for(l.normalWorld.copy(E.normal),A.multiplyVector3(l.normalWorld),l.centroidWorld.copy(E.centroid),D.multiplyVector3(l.centroidWorld),l.centroidScreen.copy(l.centroidWorld),T.multiplyVector3(l.centroidScreen),M=E.vertexNormals,_=0,L=M.length;_<L;_++)R=l.vertexNormalsWorld[_],R.copy(M[_]),A.multiplyVector3(R);for(_=0,L=O.length;_<L;_++)if(U=O[_][$])for(M=0,R=U.length;M<R;M++)l.uvs[_][M]=U[M];l.material=F,l.faceMaterial=null!==E.materialIndex?z[E.materialIndex]:null,l.z=l.centroidScreen.z,x.elements.push(l)}}else if(q instanceof THREE.Line)for(C.multiply(T,D),$=q.geometry.vertices,_=t(),_.positionScreen.copy($[0].position),C.multiplyVector4(_.positionScreen),k=1,E=$.length;k<E;k++)_=t(),_.positionScreen.copy($[k].position),C.multiplyVector4(_.positionScreen),L=f[r-2],P.copy(_.positionScreen),I.copy(L.positionScreen),n(P,I)&&(P.multiplyScalar(1/P.w),I.multiplyScalar(1/I.w),q=y[u]=y[u]||new THREE.RenderableLine,u++,p=q,p.v1.positionScreen.copy(P),p.v2.positionScreen.copy(I),p.z=Math.max(P.z,I.z),p.material=F,x.elements.push(p));for(e=0,m=x.sprites.length;e<m;e++)q=x.sprites[e].object,D=q.matrixWorld,q instanceof THREE.Particle&&(S.set(D.n14,D.n24,D.n34,1),T.multiplyVector4(S),S.z/=S.w,S.z>0&&S.z<1)&&(H=w[g]=w[g]||new THREE.RenderableParticle,g++,h=H,h.x=S.x/S.w,h.y=S.y/S.w,h.z=S.z,h.rotation=q.rotation.z,h.scale.x=q.scale.x*Math.abs(h.x-(S.x+a.projectionMatrix.n11)/(S.w+a.projectionMatrix.n14)),h.scale.y=q.scale.y*Math.abs(h.y-(S.y+a.projectionMatrix.n22)/(S.w+a.projectionMatrix.n24)),h.material=q.material,x.elements.push(h));return s&&x.elements.sort(i),x}},THREE.Quaternion=function(e,t,i,n){this.set(e||0,t||0,i||0,void 0!==n?n:1)},THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEuler:function(e){var t=Math.PI/360,i=e.x*t,n=e.y*t,a=e.z*t,e=Math.cos(n),n=Math.sin(n),t=Math.cos(-a),a=Math.sin(-a),s=Math.cos(i),i=Math.sin(i),o=e*t,r=n*a;return this.w=o*s-r*i,this.x=o*i+r*s,this.y=n*t*s+e*a*i,this.z=e*a*s-n*t*i,this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(i),this},setFromRotationMatrix:function(e){var t=Math.pow(e.determinant(),1/3);return this.w=Math.sqrt(Math.max(0,t+e.n11+e.n22+e.n33))/2,this.x=Math.sqrt(Math.max(0,t+e.n11-e.n22-e.n33))/2,this.y=Math.sqrt(Math.max(0,t-e.n11+e.n22-e.n33))/2,this.z=Math.sqrt(Math.max(0,t-e.n11-e.n22+e.n33))/2,this.x=e.n32-e.n23<0?-Math.abs(this.x):Math.abs(this.x),this.y=e.n13-e.n31<0?-Math.abs(this.y):Math.abs(this.y),this.z=e.n21-e.n12<0?-Math.abs(this.z):Math.abs(this.z),this.normalize(),this},calculateW:function(){return this.w=-Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z)),this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?this.w=this.z=this.y=this.x=0:(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this},multiplySelf:function(e){var t=this.x,i=this.y,n=this.z,a=this.w,s=e.x,o=e.y,r=e.z,e=e.w;return this.x=t*e+a*s+i*r-n*o,this.y=i*e+a*o+n*s-t*r,this.z=n*e+a*r+t*o-i*s,this.w=a*e-t*s-i*o-n*r,this},multiply:function(e,t){return this.x=e.x*t.w+e.y*t.z-e.z*t.y+e.w*t.x,this.y=-e.x*t.z+e.y*t.w+e.z*t.x+e.w*t.y,this.z=e.x*t.y-e.y*t.x+e.z*t.w+e.w*t.z,this.w=-e.x*t.x-e.y*t.y-e.z*t.z+e.w*t.w,this},multiplyVector3:function(e,t){t||(t=e);var i=e.x,n=e.y,a=e.z,s=this.x,o=this.y,r=this.z,l=this.w,c=l*i+o*a-r*n,d=l*n+r*i-s*a,p=l*a+s*n-o*i,i=-s*i-o*n-r*a;return t.x=c*l+i*-s+d*-r-p*-o,t.y=d*l+i*-o+p*-s-c*-r,t.z=p*l+i*-r+c*-o-d*-s,t}},THREE.Quaternion.slerp=function(e,t,i,n){var a=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(a<0?(i.w=-t.w,i.x=-t.x,i.y=-t.y,i.z=-t.z,a=-a):i.copy(t),Math.abs(a)>=1)return i.w=e.w,i.x=e.x,i.y=e.y,i.z=e.z,i;var s=Math.acos(a),a=Math.sqrt(1-a*a);return Math.abs(a)<.001?(i.w=.5*(e.w+t.w),i.x=.5*(e.x+t.x),i.y=.5*(e.y+t.y),i.z=.5*(e.z+t.z),i):(t=Math.sin((1-n)*s)/a,n=Math.sin(n*s)/a,i.w=e.w*t+i.w*n,i.x=e.x*t+i.x*n,i.y=e.y*t+i.y*n,i.z=e.z*t+i.z*n,i)},THREE.Vertex=function(e){this.position=e||new THREE.Vector3},THREE.Face3=function(e,t,i,n,a,s){this.a=e,this.b=t,this.c=i,this.normal=n instanceof THREE.Vector3?n:new THREE.Vector3,this.vertexNormals=n instanceof Array?n:[],this.color=a instanceof THREE.Color?a:new THREE.Color,this.vertexColors=a instanceof Array?a:[],this.vertexTangents=[],this.materialIndex=s,this.centroid=new THREE.Vector3},THREE.Face4=function(e,t,i,n,a,s,o){this.a=e,this.b=t,this.c=i,this.d=n,this.normal=a instanceof THREE.Vector3?a:new THREE.Vector3,this.vertexNormals=a instanceof Array?a:[],this.color=s instanceof THREE.Color?s:new THREE.Color,this.vertexColors=s instanceof Array?s:[],this.vertexTangents=[],this.materialIndex=o,this.centroid=new THREE.Vector3},THREE.UV=function(e,t){this.u=e||0,this.v=t||0},THREE.UV.prototype={constructor:THREE.UV,set:function(e,t){return this.u=e,this.v=t,this},copy:function(e){return this.u=e.u,this.v=e.v,this},clone:function(){return new THREE.UV(this.u,this.v)}},THREE.Geometry=function(){this.id=THREE.GeometryCount++,this.vertices=[],this.colors=[],this.materials=[],this.faces=[],this.faceUvs=[[]],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.dynamic=this.hasTangents=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){var t=new THREE.Matrix4;t.extractRotation(e,new THREE.Vector3(1,1,1));for(var i=0,n=this.vertices.length;i<n;i++)e.multiplyVector3(this.vertices[i].position);for(i=0,n=this.faces.length;i<n;i++){var a=this.faces[i];t.multiplyVector3(a.normal);for(var s=0,o=a.vertexNormals.length;s<o;s++)t.multiplyVector3(a.vertexNormals[s]);e.multiplyVector3(a.centroid)}},computeCentroids:function(){var e,t,i;for(e=0,t=this.faces.length;e<t;e++)i=this.faces[e],i.centroid.set(0,0,0),i instanceof THREE.Face3?(i.centroid.addSelf(this.vertices[i.a].position),i.centroid.addSelf(this.vertices[i.b].position),i.centroid.addSelf(this.vertices[i.c].position),i.centroid.divideScalar(3)):i instanceof THREE.Face4&&(i.centroid.addSelf(this.vertices[i.a].position),i.centroid.addSelf(this.vertices[i.b].position),i.centroid.addSelf(this.vertices[i.c].position),i.centroid.addSelf(this.vertices[i.d].position),i.centroid.divideScalar(4))},computeFaceNormals:function(){var e,t,i,n,a,s,o=new THREE.Vector3,r=new THREE.Vector3;for(e=0,t=this.faces.length;e<t;e++)i=this.faces[e],n=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c],o.sub(s.position,a.position),r.sub(n.position,a.position),o.crossSelf(r),o.isZero()||o.normalize(),i.normal.copy(o)},computeVertexNormals:function(){var e,t,i,n;if(void 0===this.__tmpVertices){for(n=this.__tmpVertices=Array(this.vertices.length),e=0,t=this.vertices.length;e<t;e++)n[e]=new THREE.Vector3;for(e=0,t=this.faces.length;e<t;e++)i=this.faces[e],i instanceof THREE.Face3?i.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:i instanceof THREE.Face4&&(i.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(n=this.__tmpVertices,e=0,t=this.vertices.length;e<t;e++)n[e].set(0,0,0);for(e=0,t=this.faces.length;e<t;e++)i=this.faces[e],i instanceof THREE.Face3?(n[i.a].addSelf(i.normal),n[i.b].addSelf(i.normal),n[i.c].addSelf(i.normal)):i instanceof THREE.Face4&&(n[i.a].addSelf(i.normal),n[i.b].addSelf(i.normal),n[i.c].addSelf(i.normal),n[i.d].addSelf(i.normal));for(e=0,t=this.vertices.length;e<t;e++)n[e].normalize();for(e=0,t=this.faces.length;e<t;e++)i=this.faces[e],i instanceof THREE.Face3?(i.vertexNormals[0].copy(n[i.a]),i.vertexNormals[1].copy(n[i.b]),i.vertexNormals[2].copy(n[i.c])):i instanceof THREE.Face4&&(i.vertexNormals[0].copy(n[i.a]),i.vertexNormals[1].copy(n[i.b]),i.vertexNormals[2].copy(n[i.c]),i.vertexNormals[3].copy(n[i.d]))},computeTangents:function(){function e(e,t,i,n,a,s,T){r=e.vertices[t].position,l=e.vertices[i].position,c=e.vertices[n].position,d=o[a],p=o[s],u=o[T],h=l.x-r.x,g=c.x-r.x,m=l.y-r.y,f=c.y-r.y,v=l.z-r.z,b=c.z-r.z,y=p.u-d.u,w=u.u-d.u,x=p.v-d.v,k=u.v-d.v,S=1/(y*k-w*x),P.set((k*h-x*g)*S,(k*m-x*f)*S,(k*v-x*b)*S),I.set((y*g-w*h)*S,(y*f-w*m)*S,(y*b-w*v)*S),C[t].addSelf(P),C[i].addSelf(P),C[n].addSelf(P),E[t].addSelf(I),E[i].addSelf(I),E[n].addSelf(I)}var t,i,n,a,s,o,r,l,c,d,p,u,h,g,m,f,v,b,y,w,x,k,S,T,C=[],E=[],P=new THREE.Vector3,I=new THREE.Vector3,$=new THREE.Vector3,_=new THREE.Vector3,L=new THREE.Vector3;for(t=0,i=this.vertices.length;t<i;t++)C[t]=new THREE.Vector3,E[t]=new THREE.Vector3;for(t=0,i=this.faces.length;t<i;t++)s=this.faces[t],o=this.faceVertexUvs[0][t],s instanceof THREE.Face3?e(this,s.a,s.b,s.c,0,1,2):s instanceof THREE.Face4&&(e(this,s.a,s.b,s.c,0,1,2),e(this,s.a,s.b,s.d,0,1,3));var M=["a","b","c","d"];for(t=0,i=this.faces.length;t<i;t++)for(s=this.faces[t],n=0;n<s.vertexNormals.length;n++)L.copy(s.vertexNormals[n]),a=s[M[n]],T=C[a],$.copy(T),$.subSelf(L.multiplyScalar(L.dot(T))).normalize(),_.cross(s.vertexNormals[n],T),a=_.dot(E[a]),a=a<0?-1:1,s.vertexTangents[n]=new THREE.Vector4($.x,$.y,$.z,a);this.hasTangents=!0},computeBoundingBox:function(){var e;if(this.vertices.length>0){this.boundingBox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var t=1,i=this.vertices.length;t<i;t++)e=this.vertices[t],e.position.x<this.boundingBox.x[0]?this.boundingBox.x[0]=e.position.x:e.position.x>this.boundingBox.x[1]&&(this.boundingBox.x[1]=e.position.x),e.position.y<this.boundingBox.y[0]?this.boundingBox.y[0]=e.position.y:e.position.y>this.boundingBox.y[1]&&(this.boundingBox.y[1]=e.position.y),e.position.z<this.boundingBox.z[0]?this.boundingBox.z[0]=e.position.z:e.position.z>this.boundingBox.z[1]&&(this.boundingBox.z[1]=e.position.z)}},computeBoundingSphere:function(){for(var e=0,t=0,i=this.vertices.length;t<i;t++)e=Math.max(e,this.vertices[t].position.length());this.boundingSphere={radius:e}},mergeVertices:function(){var e,t,i,n={},a=[],s=[],o=Math.pow(10,4);for(t=0,i=this.vertices.length;t<i;t++)e=this.vertices[t].position,e=[Math.round(e.x*o),Math.round(e.y*o),Math.round(e.z*o)].join("_"),void 0===n[e]?(n[e]=t,a.push(this.vertices[t]),s[t]=a.length-1):s[t]=s[n[e]];for(t=0,i=this.faces.length;t<i;t++)n=this.faces[t],n instanceof THREE.Face3?(n.a=s[n.a],n.b=s[n.b],n.c=s[n.c]):n instanceof THREE.Face4&&(n.a=s[n.a],n.b=s[n.b],n.c=s[n.c],n.d=s[n.d]);this.vertices=a}},THREE.GeometryCount=0,THREE.Camera=function(){return arguments.length?(console.warn("DEPRECATED: Camera() is now PerspectiveCamera() or OrthographicCamera()."),new THREE.PerspectiveCamera(arguments[0],arguments[1],arguments[2],arguments[3])):(THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4,void(this.projectionMatrixInverse=new THREE.Matrix4))},THREE.Camera.prototype=new THREE.Object3D,THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix)},THREE.OrthographicCamera=function(e,t,i,n,a,s){THREE.Camera.call(this),this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=void 0!==a?a:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=new THREE.Camera,THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix=THREE.Matrix4.makeOrtho(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.PerspectiveCamera=function(e,t,i,n){THREE.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=new THREE.Camera,THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(e,t){this.fov=2*Math.atan((void 0!==t?t:43.25)/(2*e)),this.fov*=180/Math.PI,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,i,n,a,s){this.fullWidth=e,this.fullHeight=t,this.x=i,this.y=n,this.width=a,this.height=s,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(this.fov*Math.PI/360)*this.near,i=-t,n=e*i,e=Math.abs(e*t-n),i=Math.abs(t-i);this.projectionMatrix=THREE.Matrix4.makeFrustum(n+this.x*e/this.fullWidth,n+(this.x+this.width)*e/this.fullWidth,t-(this.y+this.height)*i/this.fullHeight,t-this.y*i/this.fullHeight,this.near,this.far)}else this.projectionMatrix=THREE.Matrix4.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=new THREE.Object3D,THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.supr=THREE.Object3D.prototype,THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=new THREE.Light,THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.DirectionalLight=function(e,t,i){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,1,0),this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0},THREE.DirectionalLight.prototype=new THREE.Light,THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.PointLight=function(e,t,i){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,0,0),this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0},THREE.PointLight.prototype=new THREE.Light,THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.Material=function(e){this.name="",this.id=THREE.MaterialCount++,e=e||{},this.opacity=void 0!==e.opacity?e.opacity:1,this.transparent=void 0!==e.transparent&&e.transparent,this.blending=void 0!==e.blending?e.blending:THREE.NormalBlending,this.depthTest=void 0===e.depthTest||e.depthTest,this.depthWrite=void 0===e.depthWrite||e.depthWrite,this.polygonOffset=void 0!==e.polygonOffset&&e.polygonOffset,this.polygonOffsetFactor=void 0!==e.polygonOffsetFactor?e.polygonOffsetFactor:0,this.polygonOffsetUnits=void 0!==e.polygonOffsetUnits?e.polygonOffsetUnits:0,this.alphaTest=void 0!==e.alphaTest?e.alphaTest:0,this.overdraw=void 0!==e.overdraw&&e.overdraw},THREE.MaterialCount=0,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NormalBlending=0,THREE.AdditiveBlending=1,THREE.SubtractiveBlending=2,THREE.MultiplyBlending=3,THREE.AdditiveAlphaBlending=4,THREE.LineBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.linewidth=void 0!==e.linewidth?e.linewidth:1,this.linecap=void 0!==e.linecap?e.linecap:"round",this.linejoin=void 0!==e.linejoin?e.linejoin:"round",this.vertexColors=!!e.vertexColors&&e.vertexColors,this.fog=void 0===e.fog||e.fog},THREE.LineBasicMaterial.prototype=new THREE.Material,THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.MeshBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets},THREE.MeshBasicMaterial.prototype=new THREE.Material,THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshLambertMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.ambient=void 0!==e.ambient?new THREE.Color(e.ambient):new THREE.Color(328965),this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets},THREE.MeshLambertMaterial.prototype=new THREE.Material,THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshPhongMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.ambient=void 0!==e.ambient?new THREE.Color(e.ambient):new THREE.Color(328965),this.specular=void 0!==e.specular?new THREE.Color(e.specular):new THREE.Color(1118481),this.shininess=void 0!==e.shininess?e.shininess:30,this.metal=void 0!==e.metal&&e.metal,this.perPixel=void 0!==e.perPixel&&e.perPixel,this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets},THREE.MeshPhongMaterial.prototype=new THREE.Material,THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshDepthMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1},THREE.MeshDepthMaterial.prototype=new THREE.Material,THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.shading=e.shading?e.shading:THREE.FlatShading,this.wireframe=!!e.wireframe&&e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth?e.wireframeLinewidth:1},THREE.MeshNormalMaterial.prototype=new THREE.Material,THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshFaceMaterial=function(){},THREE.ParticleBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=void 0!==e.map?e.map:null,this.size=void 0!==e.size?e.size:1,this.sizeAttenuation=void 0===e.sizeAttenuation||e.sizeAttenuation,this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.fog=void 0===e.fog||e.fog},THREE.ParticleBasicMaterial.prototype=new THREE.Material,THREE.ParticleBasicMaterial.prototype.constructor=THREE.ParticleBasicMaterial,THREE.ParticleCanvasMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.program=void 0!==e.program?e.program:function(){}},THREE.ParticleCanvasMaterial.prototype=new THREE.Material,THREE.ParticleCanvasMaterial.prototype.constructor=THREE.ParticleCanvasMaterial,THREE.Texture=function(e,t,i,n,a,s){this.id=THREE.TextureCount++,this.image=e,this.mapping=void 0!==t?t:new THREE.UVMapping,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==n?n:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==a?a:THREE.LinearFilter,this.minFilter=void 0!==s?s:THREE.LinearMipMapLinearFilter,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(){var e=new THREE.Texture(this.image,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter);return e.offset.copy(this.offset),e.repeat.copy(this.repeat),e}},THREE.TextureCount=0,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.LatitudeReflectionMapping=function(){},THREE.LatitudeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.UVMapping=function(){},THREE.RepeatWrapping=0,THREE.ClampToEdgeWrapping=1,THREE.MirroredRepeatWrapping=2,THREE.NearestFilter=3,THREE.NearestMipMapNearestFilter=4,THREE.NearestMipMapLinearFilter=5,THREE.LinearFilter=6,THREE.LinearMipMapNearestFilter=7,THREE.LinearMipMapLinearFilter=8,THREE.ByteType=9,THREE.UnsignedByteType=10,THREE.ShortType=11,THREE.UnsignedShortType=12,THREE.IntType=13,THREE.UnsignedIntType=14,THREE.FloatType=15,THREE.AlphaFormat=16,THREE.RGBFormat=17,THREE.RGBAFormat=18,THREE.LuminanceFormat=19,THREE.LuminanceAlphaFormat=20,THREE.Particle=function(e){THREE.Object3D.call(this),this.material=e},THREE.Particle.prototype=new THREE.Object3D,THREE.Particle.prototype.constructor=THREE.Particle,THREE.Line=function(e,t,i){THREE.Object3D.call(this),this.geometry=e,this.material=t,this.type=void 0!==i?i:THREE.LineStrip,this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere())},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=new THREE.Object3D,THREE.Line.prototype.constructor=THREE.Line,THREE.Mesh=function(e,t){if(THREE.Object3D.call(this),this.geometry=e,this.material=t,t instanceof Array&&(console.warn("DEPRECATED: Mesh material can no longer be an Array. Using material at index 0..."),this.material=t[0]),this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=e.boundingSphere.radius,this.geometry.morphTargets.length)){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0;i<this.geometry.morphTargets.length;i++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[i].name]=i}},THREE.Mesh.prototype=new THREE.Object3D,THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.supr=THREE.Object3D.prototype,THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.skinMatrix=new THREE.Matrix4},THREE.Bone.prototype=new THREE.Object3D,THREE.Bone.prototype.constructor=THREE.Bone,THREE.Bone.prototype.supr=THREE.Object3D.prototype,THREE.Bone.prototype.update=function(e,t){this.matrixAutoUpdate&&(t|=this.updateMatrix()),(t||this.matrixWorldNeedsUpdate)&&(e?this.skinMatrix.multiply(e,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);var i,n=this.children.length;for(i=0;i<n;i++)this.children[i].update(this.skinMatrix,t)},THREE.Sprite=function(e){THREE.Object3D.call(this),this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=e.map instanceof THREE.Texture?e.map:THREE.ImageUtils.loadTexture(e.map),this.blending=void 0!==e.blending?e.blending:THREE.NormalBlending,this.useScreenCoordinates=void 0===e.useScreenCoordinates||e.useScreenCoordinates,this.mergeWith3D=void 0!==e.mergeWith3D?e.mergeWith3D:!this.useScreenCoordinates,this.affectedByDistance=void 0!==e.affectedByDistance?e.affectedByDistance:!this.useScreenCoordinates,this.scaleByViewport=void 0!==e.scaleByViewport?e.scaleByViewport:!this.affectedByDistance,this.alignment=e.alignment instanceof THREE.Vector2?e.alignment:THREE.SpriteAlignment.center,this.rotation3d=this.rotation,this.rotation=0,this.opacity=1,this.uvOffset=new THREE.Vector2(0,0),this.uvScale=new THREE.Vector2(1,1)},THREE.Sprite.prototype=new THREE.Object3D,THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,this.scale.y)),this.matrixWorldNeedsUpdate=!0},THREE.SpriteAlignment={},THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,(-1)),THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,(-1)),THREE.SpriteAlignment.topRight=new THREE.Vector2((-1),(-1)),THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0),THREE.SpriteAlignment.center=new THREE.Vector2(0,0),THREE.SpriteAlignment.centerRight=new THREE.Vector2((-1),0),
THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1),THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1),THREE.SpriteAlignment.bottomRight=new THREE.Vector2((-1),1),THREE.Scene=function(){THREE.Object3D.call(this),this.overrideMaterial=this.fog=null,this.matrixAutoUpdate=!1,this.objects=[],this.lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=new THREE.Object3D,THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.addObject=function(e){if(e instanceof THREE.Light)this.lights.indexOf(e)===-1&&this.lights.push(e);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)&&this.objects.indexOf(e)===-1){this.objects.push(e),this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);t!==-1&&this.__objectsRemoved.splice(t,1)}for(t=0;t<e.children.length;t++)this.addObject(e.children[t])},THREE.Scene.prototype.removeObject=function(e){if(e instanceof THREE.Light){var t=this.lights.indexOf(e);t!==-1&&this.lights.splice(t,1)}else e instanceof THREE.Camera||(t=this.objects.indexOf(e),t!==-1&&(this.objects.splice(t,1),this.__objectsRemoved.push(e),t=this.__objectsAdded.indexOf(e),t!==-1&&this.__objectsAdded.splice(t,1)));for(t=0;t<e.children.length;t++)this.removeObject(e.children[t])},THREE.CanvasRenderer=function(e){function t(e){Q!=e&&(W.globalAlpha=Q=e)}function i(e){if(Z!=e){switch(e){case THREE.NormalBlending:W.globalCompositeOperation="source-over";break;case THREE.AdditiveBlending:W.globalCompositeOperation="lighter";break;case THREE.SubtractiveBlending:W.globalCompositeOperation="darker"}Z=e}}function n(e){J!=e&&(W.strokeStyle=J=e)}function a(e){K!=e&&(W.fillStyle=K=e)}var s,o,r,l,c,d,p,u,h,g,m,f,v,b,y,w,x,k,S,T,C,E,P,I,$,_,L,M,R,q,D,A,F,z,N,O,U,H,j,B=this,X=new THREE.Projector,e=e||{},V=void 0!==e.canvas?e.canvas:document.createElement("canvas"),W=V.getContext("2d"),G=new THREE.Color(0),Y=0,Q=1,Z=0,J=null,K=null,ee=null,te=null,ie=null,ne=new THREE.RenderableVertex,ae=new THREE.RenderableVertex,se=new THREE.Color,oe=new THREE.Color,re=new THREE.Color,le=new THREE.Color,ce=new THREE.Color,de=[],pe=[],ue=new THREE.Rectangle,he=new THREE.Rectangle,ge=new THREE.Rectangle,me=!1,fe=new THREE.Color,ve=new THREE.Color,be=new THREE.Color,ye=new THREE.Vector3,e=16;z=document.createElement("canvas"),z.width=z.height=2,N=z.getContext("2d"),N.fillStyle="rgba(0,0,0,1)",N.fillRect(0,0,2,2),O=N.getImageData(0,0,2,2),U=O.data,H=document.createElement("canvas"),H.width=H.height=e,j=H.getContext("2d"),j.translate(-e/2,-e/2),j.scale(e,e),e--,this.domElement=V,this.sortElements=this.sortObjects=this.autoClear=!0,this.info={render:{vertices:0,faces:0}},this.setSize=function(e,t){l=e,c=t,d=Math.floor(l/2),p=Math.floor(c/2),V.width=l,V.height=c,ue.set(-d,-p,d,p),he.set(-d,-p,d,p),Q=1,Z=0,ie=te=ee=K=J=null},this.setClearColor=function(e,t){G.copy(e),Y=t,he.set(-d,-p,d,p)},this.setClearColorHex=function(e,t){G.setHex(e),Y=t,he.set(-d,-p,d,p)},this.clear=function(){W.setTransform(1,0,0,-1,d,p),he.isEmpty()||(he.minSelf(ue),he.inflate(2),Y<1&&W.clearRect(Math.floor(he.getX()),Math.floor(he.getY()),Math.floor(he.getWidth()),Math.floor(he.getHeight())),Y>0&&(i(THREE.NormalBlending),t(1),a("rgba("+Math.floor(255*G.r)+","+Math.floor(255*G.g)+","+Math.floor(255*G.b)+","+Y+")"),W.fillRect(Math.floor(he.getX()),Math.floor(he.getY()),Math.floor(he.getWidth()),Math.floor(he.getHeight()))),he.empty())},this.render=function(e,l){function c(e){var t,i,n,a;for(fe.setRGB(0,0,0),ve.setRGB(0,0,0),be.setRGB(0,0,0),t=0,i=e.length;t<i;t++)n=e[t],a=n.color,n instanceof THREE.AmbientLight?(fe.r+=a.r,fe.g+=a.g,fe.b+=a.b):n instanceof THREE.DirectionalLight?(ve.r+=a.r,ve.g+=a.g,ve.b+=a.b):n instanceof THREE.PointLight&&(be.r+=a.r,be.g+=a.g,be.b+=a.b)}function V(e,t,i,n){var a,s,o,r,l,c;for(a=0,s=e.length;a<s;a++)o=e[a],r=o.color,o instanceof THREE.DirectionalLight?(l=o.matrixWorld.getPosition(),c=i.dot(l),c<=0||(c*=o.intensity,n.r+=r.r*c,n.g+=r.g*c,n.b+=r.b*c)):o instanceof THREE.PointLight&&(l=o.matrixWorld.getPosition(),c=i.dot(ye.sub(l,t).normalize()),c<=0||(c*=0==o.distance?1:1-Math.min(t.distanceTo(l)/o.distance,1),0!=c&&(c*=o.intensity,n.r+=r.r*c,n.g+=r.g*c,n.b+=r.b*c)))}function G(e,s,o){t(o.opacity),i(o.blending);var r,l,c,u,h,g;o instanceof THREE.ParticleBasicMaterial?o.map&&(u=o.map.image,h=u.width>>1,g=u.height>>1,o=s.scale.x*d,c=s.scale.y*p,r=o*h,l=c*g,ge.set(e.x-r,e.y-l,e.x+r,e.y+l),ue.intersects(ge)&&(W.save(),W.translate(e.x,e.y),W.rotate(-s.rotation),W.scale(o,-c),W.translate(-h,-g),W.drawImage(u,0,0),W.restore())):o instanceof THREE.ParticleCanvasMaterial&&(r=s.scale.x*d,l=s.scale.y*p,ge.set(e.x-r,e.y-l,e.x+r,e.y+l),ue.intersects(ge)&&(n(o.color.getContextStyle()),a(o.color.getContextStyle()),W.save(),W.translate(e.x,e.y),W.rotate(-s.rotation),W.scale(r,l),o.program(W),W.restore()))}function Y(e,a,s,o){t(o.opacity),i(o.blending),W.beginPath(),W.moveTo(e.positionScreen.x,e.positionScreen.y),W.lineTo(a.positionScreen.x,a.positionScreen.y),W.closePath(),o instanceof THREE.LineBasicMaterial&&(e=o.linewidth,ee!=e&&(W.lineWidth=ee=e),e=o.linecap,te!=e&&(W.lineCap=te=e),e=o.linejoin,ie!=e&&(W.lineJoin=ie=e),n(o.color.getContextStyle()),W.stroke(),ge.inflate(2*o.linewidth))}function Q(e,n,a,s,o,c,d,p){B.info.render.vertices+=3,B.info.render.faces++,t(p.opacity),i(p.blending),f=e.positionScreen.x,v=e.positionScreen.y,b=n.positionScreen.x,y=n.positionScreen.y,w=a.positionScreen.x,x=a.positionScreen.y,J(f,v,b,y,w,x),p instanceof THREE.MeshBasicMaterial?p.map?p.map.mapping instanceof THREE.UVMapping&&(L=d.uvs[0],ke(f,v,b,y,w,x,L[s].u,L[s].v,L[o].u,L[o].v,L[c].u,L[c].v,p.map)):p.envMap?p.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(e=l.matrixWorldInverse,ye.copy(d.vertexNormalsWorld[s]),M=.5*(ye.x*e.n11+ye.y*e.n12+ye.z*e.n13)+.5,R=.5*-(ye.x*e.n21+ye.y*e.n22+ye.z*e.n23)+.5,ye.copy(d.vertexNormalsWorld[o]),q=.5*(ye.x*e.n11+ye.y*e.n12+ye.z*e.n13)+.5,D=.5*-(ye.x*e.n21+ye.y*e.n22+ye.z*e.n23)+.5,ye.copy(d.vertexNormalsWorld[c]),A=.5*(ye.x*e.n11+ye.y*e.n12+ye.z*e.n13)+.5,F=.5*-(ye.x*e.n21+ye.y*e.n22+ye.z*e.n23)+.5,ke(f,v,b,y,w,x,M,R,q,D,A,F,p.envMap)):p.wireframe?we(p.color,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(p.color):p instanceof THREE.MeshLambertMaterial?(p.map&&!p.wireframe&&(p.map.mapping instanceof THREE.UVMapping&&(L=d.uvs[0],ke(f,v,b,y,w,x,L[s].u,L[s].v,L[o].u,L[o].v,L[c].u,L[c].v,p.map)),i(THREE.SubtractiveBlending)),me?p.wireframe||p.shading!=THREE.SmoothShading||3!=d.vertexNormalsWorld.length?(se.r=fe.r,se.g=fe.g,se.b=fe.b,V(r,d.centroidWorld,d.normalWorld,se),se.r=Math.max(0,Math.min(p.color.r*se.r,1)),se.g=Math.max(0,Math.min(p.color.g*se.g,1)),se.b=Math.max(0,Math.min(p.color.b*se.b,1)),p.wireframe?we(se,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(se)):(oe.r=re.r=le.r=fe.r,oe.g=re.g=le.g=fe.g,oe.b=re.b=le.b=fe.b,V(r,d.v1.positionWorld,d.vertexNormalsWorld[0],oe),V(r,d.v2.positionWorld,d.vertexNormalsWorld[1],re),V(r,d.v3.positionWorld,d.vertexNormalsWorld[2],le),oe.r=Math.max(0,Math.min(p.color.r*oe.r,1)),oe.g=Math.max(0,Math.min(p.color.g*oe.g,1)),oe.b=Math.max(0,Math.min(p.color.b*oe.b,1)),re.r=Math.max(0,Math.min(p.color.r*re.r,1)),re.g=Math.max(0,Math.min(p.color.g*re.g,1)),re.b=Math.max(0,Math.min(p.color.b*re.b,1)),le.r=Math.max(0,Math.min(p.color.r*le.r,1)),le.g=Math.max(0,Math.min(p.color.g*le.g,1)),le.b=Math.max(0,Math.min(p.color.b*le.b,1)),ce.r=.5*(re.r+le.r),ce.g=.5*(re.g+le.g),ce.b=.5*(re.b+le.b),_=Te(oe,re,le,ce),Se(f,v,b,y,w,x,0,0,1,0,0,1,_)):p.wireframe?we(p.color,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(p.color)):p instanceof THREE.MeshDepthMaterial?(I=l.near,$=l.far,oe.r=oe.g=oe.b=1-Ce(e.positionScreen.z,I,$),re.r=re.g=re.b=1-Ce(n.positionScreen.z,I,$),le.r=le.g=le.b=1-Ce(a.positionScreen.z,I,$),ce.r=.5*(re.r+le.r),ce.g=.5*(re.g+le.g),ce.b=.5*(re.b+le.b),_=Te(oe,re,le,ce),Se(f,v,b,y,w,x,0,0,1,0,0,1,_)):p instanceof THREE.MeshNormalMaterial&&(se.r=Ee(d.normalWorld.x),se.g=Ee(d.normalWorld.y),se.b=Ee(d.normalWorld.z),p.wireframe?we(se,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(se))}function Z(e,n,a,s,o,c,d,p,u){B.info.render.vertices+=4,B.info.render.faces++,t(p.opacity),i(p.blending),p.map||p.envMap?(Q(e,n,s,0,1,3,d,p,u),Q(o,a,c,1,2,3,d,p,u)):(f=e.positionScreen.x,v=e.positionScreen.y,b=n.positionScreen.x,y=n.positionScreen.y,w=a.positionScreen.x,x=a.positionScreen.y,k=s.positionScreen.x,S=s.positionScreen.y,T=o.positionScreen.x,C=o.positionScreen.y,E=c.positionScreen.x,P=c.positionScreen.y,p instanceof THREE.MeshBasicMaterial?(K(f,v,b,y,w,x,k,S),p.wireframe?we(p.color,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(p.color)):p instanceof THREE.MeshLambertMaterial?me?p.wireframe||p.shading!=THREE.SmoothShading||4!=d.vertexNormalsWorld.length?(se.r=fe.r,se.g=fe.g,se.b=fe.b,V(r,d.centroidWorld,d.normalWorld,se),se.r=Math.max(0,Math.min(p.color.r*se.r,1)),se.g=Math.max(0,Math.min(p.color.g*se.g,1)),se.b=Math.max(0,Math.min(p.color.b*se.b,1)),K(f,v,b,y,w,x,k,S),p.wireframe?we(se,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(se)):(oe.r=re.r=le.r=ce.r=fe.r,oe.g=re.g=le.g=ce.g=fe.g,oe.b=re.b=le.b=ce.b=fe.b,V(r,d.v1.positionWorld,d.vertexNormalsWorld[0],oe),V(r,d.v2.positionWorld,d.vertexNormalsWorld[1],re),V(r,d.v4.positionWorld,d.vertexNormalsWorld[3],le),V(r,d.v3.positionWorld,d.vertexNormalsWorld[2],ce),oe.r=Math.max(0,Math.min(p.color.r*oe.r,1)),oe.g=Math.max(0,Math.min(p.color.g*oe.g,1)),oe.b=Math.max(0,Math.min(p.color.b*oe.b,1)),re.r=Math.max(0,Math.min(p.color.r*re.r,1)),re.g=Math.max(0,Math.min(p.color.g*re.g,1)),re.b=Math.max(0,Math.min(p.color.b*re.b,1)),le.r=Math.max(0,Math.min(p.color.r*le.r,1)),le.g=Math.max(0,Math.min(p.color.g*le.g,1)),le.b=Math.max(0,Math.min(p.color.b*le.b,1)),ce.r=Math.max(0,Math.min(p.color.r*ce.r,1)),ce.g=Math.max(0,Math.min(p.color.g*ce.g,1)),ce.b=Math.max(0,Math.min(p.color.b*ce.b,1)),_=Te(oe,re,le,ce),J(f,v,b,y,k,S),Se(f,v,b,y,k,S,0,0,1,0,0,1,_),J(T,C,w,x,E,P),Se(T,C,w,x,E,P,1,0,1,1,0,1,_)):(K(f,v,b,y,w,x,k,S),p.wireframe?we(p.color,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(p.color)):p instanceof THREE.MeshNormalMaterial?(se.r=Ee(d.normalWorld.x),se.g=Ee(d.normalWorld.y),se.b=Ee(d.normalWorld.z),K(f,v,b,y,w,x,k,S),p.wireframe?we(se,p.wireframeLinewidth,p.wireframeLinecap,p.wireframeLinejoin):xe(se)):p instanceof THREE.MeshDepthMaterial&&(I=l.near,$=l.far,oe.r=oe.g=oe.b=1-Ce(e.positionScreen.z,I,$),re.r=re.g=re.b=1-Ce(n.positionScreen.z,I,$),le.r=le.g=le.b=1-Ce(s.positionScreen.z,I,$),ce.r=ce.g=ce.b=1-Ce(a.positionScreen.z,I,$),_=Te(oe,re,le,ce),J(f,v,b,y,k,S),Se(f,v,b,y,k,S,0,0,1,0,0,1,_),J(T,C,w,x,E,P),Se(T,C,w,x,E,P,1,0,1,1,0,1,_)))}function J(e,t,i,n,a,s){W.beginPath(),W.moveTo(e,t),W.lineTo(i,n),W.lineTo(a,s),W.lineTo(e,t),W.closePath()}function K(e,t,i,n,a,s,o,r){W.beginPath(),W.moveTo(e,t),W.lineTo(i,n),W.lineTo(a,s),W.lineTo(o,r),W.lineTo(e,t),W.closePath()}function we(e,t,i,a){ee!=t&&(W.lineWidth=ee=t),te!=i&&(W.lineCap=te=i),ie!=a&&(W.lineJoin=ie=a),n(e.getContextStyle()),W.stroke(),ge.inflate(2*t)}function xe(e){a(e.getContextStyle()),W.fill()}function ke(e,t,i,n,s,o,r,l,c,d,p,u,h){if(0!=h.image.width){if(1==h.needsUpdate||void 0==de[h.id]){var g=h.wrapS==THREE.RepeatWrapping,m=h.wrapT==THREE.RepeatWrapping;de[h.id]=W.createPattern(h.image,g&&m?"repeat":g&&!m?"repeat-x":!g&&m?"repeat-y":"no-repeat"),h.needsUpdate=!1}a(de[h.id]);var g=h.offset.x/h.repeat.x,m=h.offset.y/h.repeat.y,f=h.image.width*h.repeat.x,v=h.image.height*h.repeat.y,r=(r+g)*f,l=(l+m)*v,c=(c+g)*f,d=(d+m)*v,p=(p+g)*f,u=(u+m)*v;i-=e,n-=t,s-=e,o-=t,c-=r,d-=l,p-=r,u-=l,g=c*u-p*d,0==g?(void 0==pe[h.id]&&(t=document.createElement("canvas"),t.width=h.image.width,t.height=h.image.height,e=t.getContext("2d"),e.drawImage(h.image,0,0),pe[h.id]=e.getImageData(0,0,h.image.width,h.image.height).data,delete t),t=pe[h.id],r=4*(Math.floor(r)+Math.floor(l)*h.image.width),se.setRGB(t[r]/255,t[r+1]/255,t[r+2]/255),xe(se)):(g=1/g,h=(u*i-d*s)*g,d=(u*n-d*o)*g,i=(c*s-p*i)*g,n=(c*o-p*n)*g,e=e-h*r-i*l,r=t-d*r-n*l,W.save(),W.transform(h,d,i,n,e,r),W.fill(),W.restore())}}function Se(e,t,i,n,a,s,o,r,l,c,d,p,u){var h,g;h=u.width-1,g=u.height-1,o*=h,r*=g,l*=h,c*=g,d*=h,p*=g,i-=e,n-=t,a-=e,s-=t,l-=o,c-=r,d-=o,p-=r,g=1/(l*p-d*c),h=(p*i-c*a)*g,c=(p*n-c*s)*g,i=(l*a-d*i)*g,n=(l*s-d*n)*g,e=e-h*o-i*r,t=t-c*o-n*r,W.save(),W.transform(h,c,i,n,e,t),W.clip(),W.drawImage(u,0,0),W.restore()}function Te(e,t,i,n){var a=~~(255*e.r),s=~~(255*e.g),e=~~(255*e.b),o=~~(255*t.r),r=~~(255*t.g),t=~~(255*t.b),l=~~(255*i.r),c=~~(255*i.g),i=~~(255*i.b),d=~~(255*n.r),p=~~(255*n.g),n=~~(255*n.b);return U[0]=a<0?0:a>255?255:a,U[1]=s<0?0:s>255?255:s,U[2]=e<0?0:e>255?255:e,U[4]=o<0?0:o>255?255:o,U[5]=r<0?0:r>255?255:r,U[6]=t<0?0:t>255?255:t,U[8]=l<0?0:l>255?255:l,U[9]=c<0?0:c>255?255:c,U[10]=i<0?0:i>255?255:i,U[12]=d<0?0:d>255?255:d,U[13]=p<0?0:p>255?255:p,U[14]=n<0?0:n>255?255:n,N.putImageData(O,0,0),j.drawImage(z,0,0),H}function Ce(e,t,i){return e=(e-t)/(i-t),e*e*(3-2*e)}function Ee(e){return e=.5*(e+1),e<0?0:e>1?1:e}function Pe(e,t){var i=t.x-e.x,n=t.y-e.y,a=i*i+n*n;0!=a&&(a=1/Math.sqrt(a),i*=a,n*=a,t.x+=i,t.y+=n,e.x-=i,e.y-=n)}var Ie,$e,_e,Le;for(this.autoClear?this.clear():W.setTransform(1,0,0,-1,d,p),B.info.render.vertices=0,B.info.render.faces=0,s=X.projectScene(e,l,this.sortElements),o=s.elements,r=s.lights,(me=r.length>0)&&c(r),Ie=0,$e=o.length;Ie<$e;Ie++)_e=o[Ie],Le=_e.material,Le=Le instanceof THREE.MeshFaceMaterial?_e.faceMaterial:Le,null==Le||0==Le.opacity||(ge.empty(),_e instanceof THREE.RenderableParticle?(u=_e,u.x*=d,u.y*=p,G(u,_e,Le,e)):_e instanceof THREE.RenderableLine?(u=_e.v1,h=_e.v2,u.positionScreen.x*=d,u.positionScreen.y*=p,h.positionScreen.x*=d,h.positionScreen.y*=p,ge.addPoint(u.positionScreen.x,u.positionScreen.y),ge.addPoint(h.positionScreen.x,h.positionScreen.y),ue.intersects(ge)&&Y(u,h,_e,Le,e)):_e instanceof THREE.RenderableFace3?(u=_e.v1,h=_e.v2,g=_e.v3,u.positionScreen.x*=d,u.positionScreen.y*=p,h.positionScreen.x*=d,h.positionScreen.y*=p,g.positionScreen.x*=d,g.positionScreen.y*=p,Le.overdraw&&(Pe(u.positionScreen,h.positionScreen),Pe(h.positionScreen,g.positionScreen),Pe(g.positionScreen,u.positionScreen)),ge.add3Points(u.positionScreen.x,u.positionScreen.y,h.positionScreen.x,h.positionScreen.y,g.positionScreen.x,g.positionScreen.y),ue.intersects(ge)&&Q(u,h,g,0,1,2,_e,Le,e)):_e instanceof THREE.RenderableFace4&&(u=_e.v1,h=_e.v2,g=_e.v3,m=_e.v4,u.positionScreen.x*=d,u.positionScreen.y*=p,h.positionScreen.x*=d,h.positionScreen.y*=p,g.positionScreen.x*=d,g.positionScreen.y*=p,m.positionScreen.x*=d,m.positionScreen.y*=p,ne.positionScreen.copy(h.positionScreen),ae.positionScreen.copy(m.positionScreen),Le.overdraw&&(Pe(u.positionScreen,h.positionScreen),Pe(h.positionScreen,m.positionScreen),Pe(m.positionScreen,u.positionScreen),Pe(g.positionScreen,ne.positionScreen),Pe(g.positionScreen,ae.positionScreen)),ge.addPoint(u.positionScreen.x,u.positionScreen.y),ge.addPoint(h.positionScreen.x,h.positionScreen.y),ge.addPoint(g.positionScreen.x,g.positionScreen.y),ge.addPoint(m.positionScreen.x,m.positionScreen.y),ue.intersects(ge)&&Z(u,h,g,m,ne,ae,_e,Le,e)),he.addRectangle(ge));W.setTransform(1,0,0,1,0,0)}},THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.v4=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableObject=function(){this.z=this.object=null},THREE.RenderableParticle=function(){this.rotation=this.z=this.y=this.x=null,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.z=null,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.material=null},Particle3D=function(e){THREE.Particle.call(this,e),this.velocity=new THREE.Vector3(0,(-8),0),this.velocity.rotateX(randomRange(-45,45)),this.velocity.rotateY(randomRange(0,360)),this.gravity=new THREE.Vector3(0,0,0),this.drag=1},Particle3D.prototype=new THREE.Particle,Particle3D.prototype.constructor=Particle3D,Particle3D.prototype.updatePhysics=function(){this.velocity.multiplyScalar(this.drag),this.velocity.addSelf(this.gravity),this.position.addSelf(this.velocity)};var TO_RADIANS=Math.PI/180;THREE.Vector3.prototype.rotateY=function(e){cosRY=Math.cos(e*TO_RADIANS),sinRY=Math.sin(e*TO_RADIANS);var t=this.z,i=this.x;this.x=i*cosRY+t*sinRY,this.z=i*-sinRY+t*cosRY},THREE.Vector3.prototype.rotateX=function(e){cosRY=Math.cos(e*TO_RADIANS),sinRY=Math.sin(e*TO_RADIANS);var t=this.z,i=this.y;this.y=i*cosRY+t*sinRY,this.z=i*-sinRY+t*cosRY},THREE.Vector3.prototype.rotateZ=function(e){cosRY=Math.cos(e*TO_RADIANS),sinRY=Math.sin(e*TO_RADIANS);var t=this.x,i=this.y;this.y=i*cosRY+t*sinRY,this.x=i*-sinRY+t*cosRY},!function($){function loop(){for(var i=0;i<particles.length;i++){var particle=particles[i];with(particle.updatePhysics(),particle.position)y<-1e3&&(y+=2e3),x>1e3?x-=2e3:x<-1e3&&(x+=2e3),z>1e3?z-=2e3:z<-1e3&&(z+=2e3)}camera.position.x+=.05*(mouseX-camera.position.x),camera.position.y+=.05*(-mouseY-camera.position.y),camera.lookAt(scene.position),renderer.render(scene,camera)}window.snowFly={doEffect:function(audioObj,pageNum,pages,callback){function startInterVal(){if(effObj.pause)return void clearInterval(effObj.interVal);for(var i=0;i<particles.length;i++){var particle=particles[i];with(particle.updatePhysics(),particle.position)y<-1e3&&(y+=2e3),x>1e3?x-=2e3:x<-1e3&&(x+=2e3),z>1e3?z-=2e3:z<-1e3&&(z+=2e3)}camera.position.x+=.05*(mouseX-camera.position.x),camera.position.y+=.05*(-mouseY-camera.position.y),camera.lookAt(scene.position),renderer.render(scene,camera)}callback(eqShow,pageNum,pages);for(var i=0;i<pages[pageNum-1].elements.length;i++){var $elem=eqShow.selectElement(pages[pageNum-1].elements[i].id);eqxCommon.bindTrigger($elem,pages[pageNum-1].elements[i])}1==pageNum&&eqShow.playVideo(audioObj);var SCREEN_WIDTH=window.innerWidth,SCREEN_HEIGHT=window.innerHeight,container,particle,camera,scene,scenes=[],renderer,mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,effObj={pause:!1,startPlay:function(){this.pause=!1,effObj.interVal=setInterval(startInterVal,20)}},particles=[],particleImage=new Image;particleImage.src=CLIENT_CDN+"view/images/ParticleSmoke.png";var $parent=$("#page"+pageNum).parent(".main-page");container=$parent.get(0),camera=new THREE.PerspectiveCamera(75,SCREEN_WIDTH/SCREEN_HEIGHT,1,1e4),camera.position.z=1e3,scene=new THREE.Scene,scene.add(camera),renderer=new THREE.CanvasRenderer,renderer.setSize(SCREEN_WIDTH,SCREEN_HEIGHT),renderer.num=pageNum;for(var material=new THREE.ParticleBasicMaterial({map:new THREE.Texture(particleImage)}),i=0;i<500;i++)particle=new Particle3D(material),particle.position.x=2e3*Math.random()-1e3,particle.position.y=2e3*Math.random()-1e3,particle.position.z=2e3*Math.random()-1e3,particle.scale.x=particle.scale.y=1,scene.add(particle),particles.push(particle);var canvas=renderer.domElement;return $(canvas).attr("id","snowcas"+pageNum).appendTo($parent),$("#snowcas"+pageNum).css({position:"absolute",pointerEvents:"none",top:0,width:"100%",height:"100%"}),1==pageNum&&(effObj.interVal=setInterval(startInterVal,1e3/60)),effObj}}}(jQuery),!function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,5e3)}}(),window.fireWorks={doEffect:function(e,t,i,n){function a(){if(!T.pause){requestAnimFrame(a),b=s(0,1e3),p.globalCompositeOperation="destination-out",p.fillStyle="rgba(0, 0, 0, 0.5)",p.fillRect(0,0,g,m),p.globalCompositeOperation="lighter";for(var e=f.length;e--;)f[e].draw(),f[e].update(e);for(e=v.length;e--;)v[e].draw(),v[e].update(e);k>=x?S||(f.push(new r(g/2,m,s(0,g),s(0,m/2))),k=0):k++,w>=y?S&&(f.push(new r(g/2,m,u,h)),w=0):w++}}function s(e,t){return Math.random()*(t-e)+e}function o(e,t,i,n){var a=e-i,s=t-n;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}function r(e,t,i,n){for(this.x=e,this.y=t,this.sx=e,this.sy=t,this.tx=i,this.ty=n,this.distanceToTarget=o(e,t,i,n),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=3;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=Math.atan2(n-t,i-e),this.speed=10,this.acceleration=1.05,this.brightness=s(50,120)}function l(e,t){for(this.x=e,this.y=t,this.coordinates=[],this.coordinateCount=5;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=s(0,2*Math.PI),this.speed=s(1,10),this.friction=.95,this.gravity=1,this.hue=s(b-100,b+100),this.brightness=s(20,80),this.alpha=1,this.decay=s(.01,.015)}function c(e,t){for(var i=100;i--;)v.push(new l(e,t))}var d,p,u,h,g=window.innerWidth,m=window.innerHeight,f=[],v=[],b=200,y=7,w=0,x=20,k=0,S=!1,T={pause:!1,startPlay:function(){this.pause=!1,a()}};n(eqShow,t,i);for(var C=0;C<i[t-1].elements.length;C++){var E=eqShow.selectElement(i[t-1].elements[C].id);eqxCommon.bindTrigger(E,i[t-1].elements[C])}return 1===t&&eqShow.playVideo(e),$('<canvas id="fireworks'+t+'"></canvas>').prependTo("#page"+t).css({position:"absolute",zIndex:0}),d=document.getElementById("fireworks"+t),p=d.getContext("2d"),d.width=g,d.height=m,1===t&&a(),r.prototype.update=function(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;var t=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed;this.distanceTraveled=o(this.sx,this.sy,this.x+t,this.y+i),this.distanceTraveled>=this.distanceToTarget?(c(this.tx,this.ty),f.splice(e,1)):(this.x+=t,this.y+=i)},r.prototype.draw=function(){p.beginPath(),p.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),p.lineTo(this.x,this.y),p.strokeStyle="hsl("+b+", 100%, "+this.brightness+"%)",p.stroke(),p.beginPath(),p.arc(this.tx,this.ty,0,0,2*Math.PI),p.stroke()},l.prototype.update=function(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&v.splice(e,1)},l.prototype.draw=function(){p.beginPath(),p.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),p.lineTo(this.x,this.y),p.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",p.stroke()},T}}}(),function(e){e.completeEffect=function(e){return!e.find(".lock").get(0)}}(window),function(){window.eqx={},window.eqx.money={config:{mode:3,effectCallback:"editMoney",imageCallback:"countMoney",resources:[{url:CLIENT_CDN+"common/js/countMoney.js",type:"js"},{url:CLIENT_CDN+"assets/images/money/moneybg.png",type:"image"},{url:CLIENT_CDN+"assets/images/money/moremoney.png",type:"image"},{url:CLIENT_CDN+"assets/images/money/flymoney.png",type:"image"},{url:CLIENT_CDN+"assets/images/money/float.png",type:"image"},{url:CLIENT_CDN+"assets/images/money/float2.png",type:"image"},{url:CLIENT_CDN+"assets/images/money/float3.png",type:"image"}]}},window.eqx.snowFly={config:{mode:4,effectCallback:"flyAction",resources:[{url:CLIENT_CDN+"common/js/snoweffect.js",type:"js"},{url:CLIENT_CDN+"common/js/threecanvas.js",type:"js"}]}},window.eqx.rainyDay={config:{mode:4,effectCallback:"rainyEffect",resources:[{url:CLIENT_CDN+"common/js/rainyday.js",type:"js"},{url:CLIENT_CDN+"common/js/rainyeffect.js",type:"js"}]}},window.eqx.fireWorks={config:{mode:4,effectCallback:"fireWorks",resources:[{url:CLIENT_CDN+"common/js/fireworks.js",type:"js"}]}}}(),function(){function e(e){resources.loaded=!0,e instanceof Array?e.forEach(function(e){t(e)}):t(e)}function t(e){if("loading"!==s[e.url]){if(s[e.url])return s[e.url];if(s[e.url]=!1,"image"===e.type){var t=new Image;s[e.url]="loading",t.onload=function(){s[e.url]=t,n()&&o.forEach(function(e){e()})},t.src=e.url}else"js"===e.type&&(s[e.url]="loading",$.getScript(e.url,function(){s[e.url]=!0,n()&&o.forEach(function(e){e()})}))}}function i(e){return s[e]}function n(){var e=!0;for(var t in s)if(s.hasOwnProperty(t)&&(!s[t]||"loading"===s[t]))return!1;return e}function a(e){o.push(e)}var s={},o=[];window.resources={load:e,get:i,onReady:a,isReady:n}}(),function(e){"use strict";e.fn.swipeSlide=function(t,i){function n(e,t){e.css({"-webkit-transition":"all "+t+"s "+I.transitionType,transition:"all "+t+"s "+I.transitionType})}function a(e,t){I.axisX?e.css({"-webkit-transform":"translate3d("+t+"px,0,0)",transform:"translate3d("+t+"px,0,0)"}):e.css({"-webkit-transform":"translate3d(0,"+t+"px,0)",transform:"translate3d(0,"+t+"px,0)"})}function s(e){if(I.lazyLoad){var t=I.ul.find("[data-src]");if(t.length>0){var i=t.eq(e);i.data("src")&&(i.is("img")?i.attr("src",i.data("src")).data("src",""):i.css({"background-image":"url("+i.data("src")+")"}).data("src",""))}}}function o(e){e.touches||(e.touches=e.originalEvent.touches)}function r(e){v=e.touches[0].pageX,b=e.touches[0].pageY}function l(e){if(e.preventDefault(),I.autoSwipe&&m&&clearInterval(m),k=e.touches[0].pageX,S=e.touches[0].pageY,y=k-v,w=S-b,n(I.ul,0),I.axisX){if(!I.continuousScroll){if(0==f&&y>0)return y=0,g();if(f+1>=L&&y<0)return y=0,g()}a(I.ul,-($*parseInt(f)-y))}else{if(!I.continuousScroll){if(0==f&&w>0)return w=0,g();if(f+1>=L&&w<0)return w=0,g()}a(I.ul,-(_*parseInt(f)-w))}}function c(){x=I.axisX?y:w,Math.abs(x)<=T?d(.3):x>T?h():x<-T&&u(),g(),y=0,w=0}function d(e){n(I.ul,e),I.axisX?a(I.ul,-f*$):a(I.ul,-f*_)}function p(){I.continuousScroll?f>=L?(d(.3),f=0,setTimeout(function(){d(0)},300)):f<0?(d(.3),f=L-1,setTimeout(function(){d(0)},300)):d(.3):(f>=L?f=0:f<0&&(f=L-1),d(.3)),i(f)}function u(){f++,p(),I.lazyLoad&&s(I.continuousScroll?f+2:f+1)}function h(){if(f--,p(),E&&I.lazyLoad){var e=L-1;for(e;e<=L+1;e++)s(e);return void(E=!1)}!E&&I.lazyLoad&&s(f)}function g(){I.autoSwipe&&(m=setInterval(function(){u()},I.speed))}var m,f=0,v=0,b=0,y=0,w=0,x=0,k=0,S=0,T=50,C=0,E=!0,P=e(this),I=e.extend({},{ul:P.children("ul"),li:P.children().children("li"),continuousScroll:!1,autoSwipe:!0,speed:4e3,axisX:!0,transitionType:"ease",lazyLoad:!1,clone:!0,width:0,length:0},t||{}),$=I.width||I.li.width(),_=I.li.height(),L=I.length||I.li.length;i=i||function(){},function(){if(I.continuousScroll&&(I.clone&&I.ul.prepend(I.li.last().clone()).append(I.li.first().clone()),I.axisX?(a(I.ul.children().first(),$*-1),a(I.ul.children().last(),$*L)):(a(I.ul.children().first(),_*-1),a(I.ul.children().last(),_*L))),I.lazyLoad){var t=0;for(C=I.continuousScroll?3:2,t;t<C;t++)s(t)}I.axisX?I.li.each(function(t){a(e(this),$*t)}):I.li.each(function(t){a(e(this),_*t)}),g(),i(f,m),P.on("touchstart",function(e){e.stopPropagation(),o(e),r(e)}),P.on("touchmove",function(e){e.stopPropagation(),o(e),l(e)}),P.on("touchend",function(e){e.stopPropagation(),c()})}()}}(window.Zepto||window.jQuery),function(){eqShow.getImagesResourceHost=function(e,t){return location.host.indexOf(window.DOMAIN)!==-1&&(["2","21"].indexOf(e)!==-1&&["1","2","3","4","6","7","8","9"].indexOf(t)!==-1?PREFIX_FILE_HOST=VIP_FILE_HOST:PREFIX_FILE_HOST=COMMON_FILE_HOST),PREFIX_FILE_HOST}}(),angular.module("app",["appRoute","home","show","main","scene","data.edit","error","usercenter","message","invitation","ui.bootstrap","ngSanitize","ui.select","services.i18nNotifications","services.httpRequestTracker","services.active","services.config","services.configSer","services.dataCache","services.validate","service.codeMessage","security.register.company","security","app.upload","templates-html","ui.sortable","I18N.MESSAGES","app.directives.keymap","app.directives.notification","active1","activeXq","search","category","nav","recommend","visitor","visitorXq","common.directives.dropDown","ngSVGAttributes","fillscene","regGuide","eqxAuth","app.upgrade","services.account.type","homePage","order.task"]),angular.module("app").config(["uiSelectConfig","$provide","$httpProvider","$tooltipProvider","authServiceProvider",function(e,t,i,n,a){a.setConfig({host:LOGIN_AUTH_HOST}),n.options({placement:"bottom",appendToBody:"true"}),e.theme="bootstrap"}]),angular.module("app").run(["security","$rootScope","configService","$anchorScroll","$location","usercenterService",function(e,t,i){t.CLIENT_CDN=CLIENT_CDN,t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.PREFIX_S3_URL=PREFIX_S3_URL,t.PRINT_HOST_SERVER=PRINT_HOST_SERVER,t.PRINT_HOST_RESOURCE=PRINT_HOST_RESOURCE,e.requestCurrentUser(),t.$on("currentUserDns",function(e,i){2!==i.type&&21!==i.type||(PREFIX_URL=PREFIX_URL1,PREFIX_S1_URL=PREFIX_S1_URL1),t.PREFIX_SERVER_HOST=PREFIX_URL}),i.getLogo().then(function(e){try{t.logoSrc=e.data}catch(i){t.logoSrc=CLIENT_CDN+"assets/images/eqxiulogo1.svg"}},function(){t.logoSrc=CLIENT_CDN+"assets/images/eqxiulogo1.svg"});var n=$(document);t.load2=function(){n.scroll(function(){s=n.scrollTop(),s>100?$(".scroll").css("display","block"):$(".scroll").css("display","none")})},t.appIconDown=!0,t.downApp=function(){t.appIconDown=!1},t.closeDown=function(){t.appIconDown=!0},t.goTop=function(){n.scrollTop(0)},t.$on("$routeChangeSuccess",function(e,i){i.$$route&&(t.feedBackUrl=i.$$route.feedBackUrl)}),window.KF5SupportBoxAPI.ready(function(){window.KF5SupportBoxAPI.removeButton()}),t.customerService=function(){if(e.isAllowToAccess(e.accessDef.ACCESS_CUSTOMER_SERVICE))window.KF5SupportBoxAPI.open(function(){window.KF5SupportBoxAPI.identify({name:e.currentUser.loginName,email:e.currentUser.email,phone:e.currentUser.tel})});else{var t=window.open("http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13225","_blank");t.focus()}}}]),angular.module("app").run(["$route","$rootScope","$location",function(e,t,i){t.$on("$locationChangeStart",function(){t.branchid&&i.search("branchid",t.branchid),$(".modal").remove(),$(".modal-backdrop").remove()});var n=i.path;i.path=function(a,s){if(s===!1)var o=e.current,r=t.$on("$locationChangeSuccess",function(){e.current=o,r()});return n.apply(i,[a])}}]),angular.module("app").controller("AppCtrl",["$window","$scope","$rootScope","$location","$route","$modal","security","sceneService","$routeParams","$timeout","i18nNotifications","usercenterService","thirdpartyService","$modalStack","$sce","authService","accountTypeService",function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,g,m,f){function v(){return sessionStorage.getItem("sysMsgHasRead")}function b(e,t,n,a){p.getNewMessage(e,t,n,a).then(function(e){a?(i.sysMsgs=e.data.list,i.sysNewCount=e.data.map.count):(i.newMsgs=e.data.list,i.newMsgCount=e.data.map.count>9?"9+":e.data.map.count)})}var y="http://api.geetest.com/get.php?callback=initCaptcha&time="+(new Date).getTime(),w="/upgrade/"===n.path().substring(0,9)||"/xdBuy"===n.path();t.validateCodeUrl=g.trustAsResourceUrl(y),checkBrower()&&(t.isSafari=!0),t.copyUrl=function(){alert("该浏览器不支持复制，请手动选中、复制、粘贴")},t.userXd=0,t.getUserXd=p.userXd(),t.$on("userXd",function(){t.getUserXd()}),t.$on("userXdNum",function(e,i){t.userXd=i}),t.buyXd=function(){s.open({windowClass:"console",templateUrl:"usercenter/buyXd.tpl.html",controller:"BuyXdController",resolve:{getUserXd:function(){return function(){t.getUserXd(),i.$broadcast("buyXd")}}}})},i.buyXdQ=t.buyXd,t.openSysMsg=!1,t.openSysMsgDialog=!v(),t.closeSysMsgDialog=function(){t.openSysMsgDialog=!t.openSysMsgDialog,
sessionStorage.setItem("sysMsgHasRead","true")},t.notifications=d,t.removeNotification=function(e){d.remove(e)},e.setValue=function(e){t.thirdpartyLoginParam=e,t.$apply()},t.$watch("thirdpartyLoginParam",function(e){e&&(e.state&&/WECHAT_STATE/.test(e.state)?u.weiChatLogin(e.code).then(function(e){200===e.data.code&&(n.path("homepage"),o.setLoginSuccess(!0))}):u.qqLogin(e.access_token,e.expires_in))}),t.$on("$locationChangeStart",function(){if(o.isAuthenticated()&&"/home"===n.path()&&n.path("homepage"),n.search().resetToken){var e=n.search().resetToken;m.showAuth({type:"reset",resetToken:e}).then(function(e){"reset"===e.type&&n.path("/homepage").search({})})}var t=h.getTop();t&&h.dismiss(t.key)}),t.openAuth=function(e){m.showAuth({type:e}).then(function(e){"registerEnterprise"===e.type?n.path("/reg/guide/company"):"register"===e.type?n.path("/reg/guide/person"):"login"===e.type?w?a.reload():n.path("homepage"):"reset"===e.type&&n.path("/homepage")})},t.isAuthenticated=o.isAuthenticated,n.search().branchid&&(i.branchid=n.search().branchid),i.sysMsgs=[],t.$on("minusCount",function(){b(1,4,!0)}),t.$watch(function(){return o.currentUser},function(e){e&&(t.user=e,i.user=e,t.userProperty=e,t.isEditor=o.isEditor(),i.isEditor=o.isEditor(),t.isTplEditor=o.isTplEditor(),i.isTplEditor=o.isTplEditor(),t.isPcEditor=o.isPcEditor(),i.isPcEditor=o.isPcEditor(),t.isAdvancedUser=o.isAdvancedUser(),i.isAdvancedUser=o.isAdvancedUser(),t.isVendorUser=o.isVendorUser(),i.isVendorUser=o.isVendorUser(),t.$broadcast("currentUser",e),o.isAuthenticated()&&("/home"!==n.path()&&"/home/login"!==n.path()||n.path("/homepage"),t.getUserXd(),w||(b(1,4,!0,!0),b(1,4,!0))),i.currentName=f.accountName,t.isPay=o.isAllowToAccess(o.accessDef.SERVICE_TIME))},!0),t.showBoardsDropdown=function(){t.isProjectsDropdownVisible=!0},t.hideBoardsDropdown=function(){t.isProjectsDropdownVisible=!1};var x=$(document);x.scroll(function(){var e=x.scrollTop();e>180?$(".header-contain",x).addClass("head-shadow"):$(".header-contain",x).removeClass("head-shadow")}),t.$watch("branchid",function(){t.hideOpea=!!i.branchid}),t.openReg=function(){s.open({windowClass:"request_contain",templateUrl:"usercenter/request_reg.tpl.html",controller:"UsercenterrequestCtrl",resolve:{}})},t.showToolBar=function(){return n.$$path.indexOf("/scene/create")<0},t.showPanel=function(){$("#helpPanel").stop().animate({right:"0"},500)},t.hidePanel=function(){$("#helpPanel").stop().animate({right:"-120"},500)},t.suggestionUrl="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=45",t.feedbackUrl="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=46",t.qqChatUrl="http://shang.qq.com/wpa/qunwpa?idkey=4a2d63670009360b878aa9a1e1437ef4caec132f74a0e2c4df4a686168cc73dc",t.helpUrl="http://bbs.eqxiu.com/forum.php",t.createSkillUrl="http://bbs.eqxiu.com/forum.php?gid=37",t.safeApply=function(e){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)}}]).filter("fixnum",[function(){return function(e){var t=e;return e>=1e4&&e<1e8?t=(e/1e4).toFixed(1)+"万":e>=1e8&&(t=(e/1e8).toFixed(1)+"亿"),t}}]),angular.module("app").run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="prev eqf-chevron-small-left" ng-click="prev()" ng-show="slides.length > 1"></a>\n    <a class="next eqf-chevron-small-right" ng-click="next()" ng-show="slides.length > 1"></a>\n</div>\n')}]),angular.module("appRoute",["ngRoute","security"]),angular.module("appRoute").config(["$routeProvider","$locationProvider","securityAuthorizationProvider",function(e,t,i){e.when("/home",{feedBackUrl:"http://eqxiu.com/s/vk2Ucz15",templateUrl:"home/home.tpl.html",controller:"HomeCtrl"}).when("/home/:id",{feedBackUrl:"http://eqxiu.com/s/vk2Ucz15",templateUrl:"home/home.tpl.html",controller:"HomeCtrl",reloadOnSearch:!1}).when("/reg",{templateUrl:"reg/reg.tpl.html",controller:"RegCtrl"}).when("/companyreg",{templateUrl:"security/register/companyReg.tpl.html",controller:"companyRegsterCtrl"}).when("/agreement",{templateUrl:"reg/agreement.tpl.html"}).when("/about",{templateUrl:"about.tpl.html"}).when("/error/:codeid",{templateUrl:"error/error.html",controller:"ErrorCtrl"}).when("/active",{templateUrl:"active/active.tpl.html",controller:"ActiveCtrl"}).when("/main",{feedBackUrl:"http://eqxiu.com/s/2qFiYzrc",templateUrl:"main/main.tpl.html",controller:"MainCtrl",reloadOnSearch:!1,resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/main/print/printShop",{templateUrl:"main/print/transition/printShop.tpl.html",controller:"PrintShopCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/main/print/:tab",{templateUrl:"main/print/print.tpl.html",controller:"PrintCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/main/customer",{feedBackUrl:"http://eqxiu.com/s/zJuTC6jT",templateUrl:"main/customer.tpl.html",controller:"CustomerCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/main/customer/:sceneId",{templateUrl:"data/editData.tpl.html",controller:"EditDataCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/scene",{templateUrl:"scene/scene.tpl.html",controller:"SceneCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/scene/list/:tab",{templateUrl:"scene/scene.tpl.html",controller:"SceneCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/scene/create/:sceneId",{templateUrl:"scene/create.tpl.html",controller:"CreateSceneCtrl",reloadOnSearch:!1,resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/scene/support/",{templateUrl:"scene/support/support.tpl.html",controller:"SupportCtrl",reloadOnSearch:!1}).when("/usercenter/:id",{feedBackUrl:"http://eqxiu.com/s/eWdpV5XU",templateUrl:"usercenter/usercenter.tpl.html",controller:"UserCenterCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/message",{templateUrl:"usercenter/message.tpl.html",controller:"MessageCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/invitation",{templateUrl:"usercenter/console/invitation.tpl.html",controller:"InvitationCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/show",{templateUrl:"show/index.tpl.html",controller:"ShowCtrl"}).when("/show/active",{templateUrl:"show/active/active.tpl.html",controller:"Active1Ctrl"}).when("/show/active/:id",{templateUrl:"show/active/active-xq.tpl.html",controller:"ActiveXqCtrl"}).when("/show/search/:name",{templateUrl:"show/search/search.tpl.html",controller:"SearchCtrl"}).when("/show/category/:id",{templateUrl:"show/category/category.tpl.html",controller:"CategoryCtrl"}).when("/show/recommend/:category",{templateUrl:"show/recommend/recommend.tpl.html",controller:"RecommendCtrl"}).when("/show/visitor",{templateUrl:"show/visitor/visitor.tpl.html",controller:"VisitorCtrl"}).when("/show/visitor/:id",{templateUrl:"show/visitor/visitor-xq.tpl.html",controller:"VisitorXqCtrl"}).when("/show/task",{templateUrl:"show/task/list/taskList.html",controller:"TaskListController"}).when("/show/task/:taskId",{templateUrl:"show/task/detail/taskDetail.html",controller:"ReciveTaskDetailController"}).when("/show/receiveTaskSuc/:taskId",{templateUrl:"show/task/receive/receiveTaskSuc.html",controller:"ReceiveTaskSucController"}).when("/privilege",{templateUrl:"usercenter/tab/privilege.tpl.html",controller:"PrivilegeCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/region",{templateUrl:"region/region.tpl.html"}).when("/fillscene/:sceneId",{templateUrl:"fillscene/fillscene.tpl.html",controller:"fillSceneCtrl",reloadOnSearch:!0,resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/reg/guide/:type",{templateUrl:"regSuccess/guide.tpl.html",controller:"RegGuideCtrl",reloadOnSearch:!0,resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/upgrade/:versionType",{templateUrl:"upgrade/upgrade.tpl.html",controller:"upgradeController",reloadOnSearch:!1,resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/xdBuy",{templateUrl:"upgrade/upgrade.tpl.html",controller:"upgradeController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/homepage",{templateUrl:"home/homePage.html",controller:"HomePageController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/order/new",{templateUrl:"orderTask/order/create/newOrder.html",controller:"NewOrderController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/order/new/:orderId",{templateUrl:"orderTask/order/create/newOrder.html",controller:"NewOrderController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/order/confirm/:orderId",{templateUrl:"orderTask/order/create/confirmOrder.html",controller:"ConfirmOrderController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/order/createSuc/:orderId",{templateUrl:"orderTask/order/create/createSuc.html",controller:"CreateSucController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/order/detail/:detailType/:orderId",{templateUrl:"orderTask/order/detail/orderDetail.html",controller:"orderDetailController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/task/detail/:detailType/:taskId",{templateUrl:"orderTask/task/detail/taskDetail.html",controller:"taskDetailController",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).when("/list/:tag",{templateUrl:"orderTask/orderTask.html",controller:"OrderTaskCtrl",resolve:{authenticatedUser:i.requireAuthenticatedUser}}).otherwise({redirectTo:"/home"}),t.html5Mode(!0)}]),angular.module("data.edit",["services.usercenter","services.i18nNotifications"]),angular.module("data.edit").controller("EditDataCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","dataService","i18nNotifications",function(e,t,i,n,a,s,o,r,l,c,d){t.sceneId=n.sceneId,t.sexOptions=[{id:1,name:"男"},{id:2,name:"女"}],t.sex=t.sexOptions[0],t.isAllowedToAccessGrouping=s.isAllowToAccess(s.accessDef.GROUP_CUSTOMER);var p=e.branchid,u={};t.getDataDetail=function(){c.getDataDetail(t.sceneId,p).then(function(e){t.dataDetail=e.data.obj,u=e.data.obj,t.groupNames=t.dataDetail.group;var i=t.dataDetail.email,n=t.dataDetail.sex,a=t.dataDetail.mobile,s=t.dataDetail.tel;i?t.formEmails=i.split(","):t.formEmails=[""],a?t.formMobiles=a.split(","):t.formMobiles=[""],s?t.formTels=s.split(","):t.formTels=[""],n&&("男"===n?t.sex=t.sexOptions[0]:t.sex=t.sexOptions[1])})},"create"!==t.sceneId&&t.getDataDetail(t.sceneId),t.dataDetail||(t.dataDetail={},t.sex=null,t.formEmails=[""],t.formMobiles=[""],t.formTels=[""]),t.updateData=function(e,i){var n=e.name,a={};if("email"===n||"mobile"===n||"tel"===n){a[n]="";var s,o=[];for(s=0;s<i.length;s++)i[s]&&o.push(i[s]);for(s=0;s<o.length-1;s++)a[n]+=o[s]+",";a[n]+=o[s]}else a[n]=t.dataDetail[n];u[n]=a[n]},t.updateSex=function(e){var i={};i.id=t.sceneId,0!==e.id?i.sex=e.name:i.sex="",u.sex=i.sex},t.formEmails=[""],t.formMobiles=[""],t.formTels=[""],t.removeInputs=function(e,i,n){if(n.length>1){if(!n[e])return void n.splice(e,1);n.splice(e,1),t.updateData({name:i},n)}else 1===n.length&&""!==n[0]&&(n[e]="",t.updateData({name:i},n))},t.addInputs=function(e){e.push("")},t.saveData=function(){if(countCharacters(u.name)>50)return void d.pushForCurrentRoute("customer.name.overflow","notify.success");delete u.group,u&&$.each(u,function(e,t){"undefined"===t&&(u[e]=null)});var e="create"===t.sceneId;"create"===t.sceneId&&delete u.id,c.saveData($.param(u),e).then(function(e){e.data.success&&(d.pushForCurrentRoute("save.success","notify.success"),l.path("/main/customer"))})},t.cancel=function(){l.path("/main/customer")},t.groups=[],t.getGroups=function(){t.groups.length>0||c.getGroups().then(function(e){t.groups=e.data.list},function(){})},t.getGroups(),t.deleteAssociation=function(e,i){var n={cId:e,gId:i};r.openConfirmDialog({msg:"确定解除组关联?"},function(){c.deleteAssociation(n).then(function(e){if(e.data.success)for(var n=0;n<t.groupNames.length;n++)t.groupNames[n].id===i&&t.groupNames.splice(n,1)},function(){r.openMsgDialog({msg:"服务器异常! "})})})},t.addGroup=function(){o.open({windowClass:"group-console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{}}}}).result.then(function(e){t.groups.splice(1,0,e)},function(){})};var h=[];t.assignGroup=function(){for(var e=[],i=0,n=t.groups.length;i<n;i++)if(t.groups[i].selected){h.push(t.groups[i].id);var a={id:t.groups[i].id,name:t.groups[i].name};e.push(a)}if(!h.length)return void r.openMsgDialog({msg:"您还没有选择分组!"});var s={cIds:t.dataDetail.id,gIds:h};c.assignGroup(s).then(function(i){if(i.data.success){g();for(var n=0;n<e.length;n++)if(t.groupNames.length>0)for(var a=0;a<t.groupNames.length&&t.groupNames[a].id!==e[n].id;a++)a===t.groupNames.length-1&&t.groupNames.push(e[n]);else t.groupNames.push(e[n]);d.pushForCurrentRoute("data.assign.success","notify.success")}})},t.deleteGroup=function(e,i){r.openConfirmDialog({msg:"确定删除此分组?"},function(){c.deleteGroup(e.id).then(function(n){if(n.data.success){g(),t.groups.splice(i,1);for(var a=0;a<t.groupNames.length;a++)t.groupNames[a].id===e.id&&t.groupNames.splice(a,1)}},function(){r.openMsgDialog({msg:"服务器异常"})})})};var g=function(){for(var e=0,i=t.groups.length;e<i;e++)t.groups[e].selected=!1}}]),angular.module("bindemail-dialog",[]).controller("BindEmailDialogCtrl",["$scope",function(){}]),angular.module("confirm-dialog",[]).controller("ConfirmDialogCtrl",["$scope","confirmObj",function(e,t){e.confirmObj=t,e.ok=function(){e.$close()},e.cancel=function(){e.$dismiss()}}]),angular.module("message-dialog",[]).controller("MessageDialogCtrl",["$scope","msgObj",function(e,t){e.msgObj=t,e.close=function(){e.$close()},e.cancel=function(){e.$dismiss()}}]),angular.module("error",[]),angular.module("error").controller("ErrorCtrl",["$rootScope","$http","$scope","$timeout","security","$window",function(e,t,i){i.PREFIX_CLIENT_HOST=PREFIX_HOST}]),angular.module("error").directive("customBodyHeight",function(){function e(){$("body").css({height:"100%"})}return{restrict:"EA",link:e}}),angular.module("fillscene",[]),angular.module("fillscene").controller("fillSceneCtrl",["$scope","sceneService","pageTplService","dataCacheService","i18nNotifications","$routeParams","$location","$rootScope","ModalService",function(e,t,i,n,a,s,o,r,l){function c(){e.editCompList=[],e.showCompList=[],e.textCompList=[],e.picCompList=[],g={};for(var t=e.pageData.elements,i=0;i<t.length;i++){var n=t[i];if(n.properties&&n.properties.setstatus&&4!==n.properties.setstatus&&"4"!==n.properties.setstatus){var a={setlabel:n.properties.setlabel||n.name,content:n.properties.src,descrip:n.properties.setremark,id:n.id,type:n.type,left:parseInt(n.css.left,10),top:parseInt(n.css.top,10),num:n.css.zIndex};4!==n.type&&"4"!==n.type||2===n.properties.setstatus||"2"===n.properties.setstatus?""+n.type=="2"&&2!==n.properties.setstatus?(a.content=n.content,e.textCompList.push(a)):(a.checked=!0,e.showCompList.push(a)):e.picCompList.push(a),g[a.id]=n}}if(e.pageData.properties){var s=d(e.pageData.properties);if(s){var o={checked:!0,id:s,type:"eff",setlabel:"特效"};e.showCompList.push(o)}}p(),e.editCompList=e.textCompList.concat(e.picCompList)}function d(e){return e.scratch?"scratch":e.finger?"finger":e.fallingObject?"fallingObject":e.effect?"effect":void 0}function p(){for(var t=0;t<e.textCompList.length;t++){for(var i=0;i<e.textCompList.length-1-t;i++)if(e.textCompList[i].num>e.textCompList[i+1].num){var n=e.textCompList[i];e.textCompList[i]=e.textCompList[i+1],e.textCompList[i+1]=n}e.textCompList[e.textCompList.length-t-1].num=e.textCompList.length-t}for(t=0;t<e.picCompList.length;t++){for(i=0;i<e.picCompList.length-1-t;i++)if(e.picCompList[i].num>e.picCompList[i+1].num){var a=e.picCompList[i];e.picCompList[i]=e.picCompList[i+1],e.picCompList[i+1]=a}e.picCompList[e.picCompList.length-1-t].num=e.picCompList.length-t}}function u(t){var i=e.pageList[t];$(".phone-view").empty(),e.curPage=i,e.pageNum=t,e.showSetting=!0,e.getPageData(i.id)}function h(t,a,s,o){i.getPageTplTypestemp(t,null,a,s).then(function(t){if(t.data.list&&t.data.list.length>0){e.pageTpls=t.data.list;var i=t.config.url.split("&time")[0];n.contains(i)||(n.push("pageTpl",n.getAsyncUrl(),t),n.setAsyncUrl())}else e.pageTpls=[];o&&o()})}e.sceneId=s.sceneId,e.showSetting=!0,e.pageNum=0,i.getPageTagLabel(11004).then(function(t){if(e.tplList=[],t.data.success)for(var i=0;i<t.data.list.length;i++)e.tplList.push(t.data.list[i].id)}),t.getPageNames(e.sceneId).then(function(t){t.data.success&&(t.data.list&&t.data.list.length?(e.pageList=t.data.list,e.curPage=e.pageList[0],e.getPageData(e.curPage.id)):e.pageList=[])}),e.getPageData=function(i,n,a){t.getSceneByPage(i,n).then(function(i){i.data.success&&(n?a(i.data.obj):(e.pageData=i.data.obj,e.pageData.properties&&e.pageData.properties.longPage?e.pageLen=e.pageData.properties.longPage:e.pageLen=1,t.templateEditor.parse({def:e.pageData,appendTo:".phone-view",mode:"edit"}),c(),e.originData=JSON.stringify(e.pageData),a&&a()))})};var g={};e.sortableOptions={placeholder:"ui-state-highlight ui-sort-position",containment:".fill-left",update:function(i,n){var a=n.item.sortable.dropindex+1,s=e.pageList[n.item.sortable.index].id;t.changePageSort(a,s)}},e.selectPage=function(t){var i=e.pageList[t];i.id!==e.curPage.id&&e.saveScene(function(){u(t)})},e.replaceTpl=function(t){e.showSetting&&e.tplList&&e.tplList.length&&(e.showSetting=!1,h(e.tplList[0],100,1,t))};var m=!1;e.addPage=function(){m||(m=!0,e.saveScene(function(){e.getPageData(e.curPage.id,!0,function(t){e.pageData=t;var i=e.pageNum+1;e.pageNum++;var n={elements:[],name:"",id:t.id,num:i+1,sceneId:e.sceneId,properties:{}};e.pageData.properties&&e.pageData.properties.longPage?e.pageLen=e.pageData.properties.longPage:e.pageLen=1,e.pageList.splice(i,0,n),e.curPage=n,h(e.tplList[0],100,1,function(){e.pageTpls.length&&e.selectPageTpl(e.pageTpls[0].id,function(){m=!1})})})}))},e.replaceImg=function(e){t.openConsoleModal({type:4},!1,function(t){e.content=t.data},function(){},"fill-console")},e.selectPageTpl=function(i,n){$(".phone-view").empty(),t.getSceneTpl(i).then(function(i){i.data.success&&(e.pageData.elements=t.getElements(),e.curPage.properties||(e.curPage.properties={}),e.pageData.properties||(e.pageData.properties={}),i.data.obj.properties&&i.data.obj.properties.thumbSrc&&(e.curPage.properties.thumbSrc=e.pageData.properties.thumbSrc=i.data.obj.properties.thumbSrc),t.templateEditor.parse({def:e.pageData,appendTo:".phone-view",mode:"edit"}),c(),n&&n())})};var f=!1;e.deletePage=function(i){i.stopPropagation(),f||1!==e.pageList.length&&e.curPage.id&&(f=!0,$(".phone-view").empty(),t.deletePage(e.curPage.id).then(function(t){var i=e.pageNum+1;t.data.success?(e.pageList.length===i?(e.pageList.pop(),e.pageNum--,e.curPage=e.pageList[i-2]):(e.pageList.splice(i-1,1),e.curPage=e.pageList[i-1]),e.getPageData(e.curPage.id,null,function(){f=!1})):l.openMsgDialog({msg:t.data.msg})},function(){f=!1}))},e.backset=function(){e.showSetting=!0};var v=!1;e.saveScene=function(i){if(!v){v=!0;for(var n=0;n<e.textCompList.length;n++)g[e.textCompList[n].id].content=e.textCompList[n].content;for(n=0;n<e.picCompList.length;n++)g[e.picCompList[n].id].properties.src=e.picCompList[n].content;for(n=0;n<e.showCompList.length;n++)for(var s=0;s<e.pageData.elements.length;s++)if(!e.showCompList[n].checked){if("eff"===e.showCompList[n].type){delete e.pageData.properties[e.showCompList[n].id];break}if(e.showCompList[n].id===e.pageData.elements[s].id){e.pageData.elements.splice(s,1);break}}return JSON.stringify(e.pageData)===e.originData?(v=!1,void(i?i():o.path("scene/create/"+e.sceneId).search({pageId:1,openSetting:"show"}))):void t.saveScene(e.pageData).then(function(t){return v=!1,t.data.success?(a.pushForCurrentRoute("scene.save.success.published","notify.success"),void(i?i():o.path("scene/create/"+e.sceneId).search({pageId:1,openSetting:"show"}))):void l.openMsgDialog({msg:"保存失败，服务器忙碌请稍后再试。"})},function(){v=!1,l.openMsgDialog({msg:"保存失败，服务器忙碌请稍后再试。"})})}},e.$on("get.file.list",function(t,i){e.curComp.content=i.path}),e.uploadImg=function(t){e.curComp=t},e.nextPage=function(){e.pageNum!==e.pageList.length-1&&e.saveScene(function(){u(e.pageNum+1)})},e.prePage=function(){0!==e.pageNum&&e.saveScene(function(){u(e.pageNum-1)})}}]).directive("editComponent",[function(){function e(i){for(var n=0;n<t.length;n++)if(Math.abs(t[n].left-i.left)<10&&Math.abs(t[n].top-i.top)<10)return e({left:i.left+10,top:i.top});return i.left<=4?e({left:i.left+5,top:i.top}):(t.push(i),i)}var t=[];return{restrict:"A",scope:{ele:"@",content:"@"},template:'<div class="comp-num"></div>',link:function(i,n,a){var s=JSON.parse(a.ele),o=s.type;4===o||"4"===o?$("#inside_"+s.id).css("border","1px solid #44cb83"):($("#inside_"+s.id).css("border","1px solid #08a1ef"),n.find(".comp-num").css({backgroundColor:"#08a1ef"}));var r=e(s);n.css({left:r.left,top:r.top,position:"absolute"}),n.find(".comp-num").text(s.num),i.$watch("content",function(e,t){e!==t&&(2===o||"2"===o?$("#"+s.id).html(e):$("#"+s.id).attr("src",PREFIX_FILE_HOST+e))}),n.on("$destroy",function(){t=[]})}}}]).directive("fillSceneLen",[function(){return{scope:{len:"@"},link:function(e,t,i,n){1!==e.len&&"1"!==e.len&&($(".phone-view").css("height",486*e.len),$(".comp-view").css("height",486*e.len)),e.$watch("len",function(t,i){t!==i&&($(".phone-view").css("height",486*e.len),$(".comp-view").css("height",486*e.len))})}}}]).directive("compShowHide",[function(){return{scope:{eleId:"@",value:"@"},restrict:"A",link:function(e){e.$watch("value",function(t,i){t!==i&&("true"===t?$(".phone-view").find("#inside_"+e.eleId).show():$(".phone-view").find("#inside_"+e.eleId).hide())})}}}]),angular.module("homePage.ads",[]).controller("HomeAdsCtrl",["$scope","homeAdsService",function(e,t){t.getAdsImage().then(function(t){var i=t.data,n=i.list[0];e.adsImageInfo={path:n.path,url:n.url}})}]).directive("eqdHomeAds",[function(){function e(e,t,i){}return{restrict:"EA",scope:!0,templateUrl:"home/ads/homeAds.html",controller:"HomeAdsCtrl",replace:!0,link:e}}]).factory("homeAdsService",["$http",function(e){function t(){var t="eqs/banners?pageCode=ui_bottom";return e({method:"POST",url:PREFIX_S2_URL+t})}var i={getAdsImage:t};return i}]),angular.module("home",["app.directives.addelement","services.staticRes","services.scene","app.directives.qrcode","app.directives.loading"]),angular.module("home").controller("HomeCtrl",["$rootScope","$http","$scope","$timeout","security","$window","sceneService","$routeParams","$route","$location","configService","thirdpartyService","staticResService","configSerService",function(e,t,i,n,a,s,o,r,l,c,d,p,u,h){i.showCode=!1,i.isAuthenticated=a.isAuthenticated,i.registerMsg={},i.PREFIX_FILE_HOST=PREFIX_FILE_HOST,i.PREFIX_CLIENT_HOST=PREFIX_HOST,i.PREFIX_SERVER_HOST=PREFIX_URL,i.scene||(i.scene={}),h.getActivityBanner("home").then(function(e){i.banners=e.data.list}),i.typeindex="all",i.pageSize=12,i.pageNo=1;var g=function(e){h.getActivityBanner(e).then(function(e){i.homeAd=e.data.list})};g("indexAd"),i.sceneTypes=u.getSceneType(),d.getFriendLinks().then(function(e){i.friendLinks=e.data.list,i.friendLinks.length>15&&(i.friendLinks.length=15)})}]).directive("iframeImgSwitch",function(){return{compile:function(e){(document.documentMode||navigator.userAgent.indexOf("Edge")>0)&&(e.find(".svg-animation").css("display","none"),e.find(".noSvg").css("display","block"))}}}),angular.module("homePage",["homePage.section","homepage.sectionPanel","homePage.remind","homePage.ads","homePage.privilege"]),angular.module("homePage").controller("HomePageController",["$scope","security","sceneService",function(e,t,i){e.isActive="homepage",e.currentTpl={exemplarPreview:!1},e.openPreview=function(t){e.currentTpl.exemplarPreview=!0,e.currentTpl.tpl=t},e.isCompany=!1,!t.currentUser||2!==t.currentUser.type&&5!==t.currentUser.type||(e.isCompany=!0),e.createScene=function(t,n){i.createScene(t,n,e.userXd)},e.$watch(function(){return t.currentUser},function(i){i&&(!t.currentUser||2!==t.currentUser.type&&5!==t.currentUser.type||(e.isCompany=!0))},!0)}]),angular.module("homePage.privilege",["services.account.type"]).controller("MyPrivilegeController",["$scope","$rootScope","$filter","accountTypeService","usercenterService","security","dataService",function(e,t,i,n,a,s,o){e.accountType=n.accountType,e.versionName=n.accountName,e.versionDesc=function(){var t;if(1===e.accountType||2===e.accountType)t="升级账号";else if([4,5,3,98,99,51].indexOf(e.accountType)!==-1)t=i("date")(s.currentUser.joinTime||s.currentUser.regTime,"MM/dd yyyy")+"开通";else if(e.accountType>=211&&e.accountType<=219||21===e.accountType)t="用户中心";else{var n=i("date")(s.currentUser.joinTime||s.currentUser.regTime,"MM/dd yyyy"),a=i("date")(s.currentUser.expiryTime,"MM/dd yyyy");t="<i>"+n+"</i> - <i>"+a+"</i>"}return t}(),e.upgradeAccount=function(){a.upgradeAccountDlg(e.accountType-200,e)},e.versionTip=[1,2,201,206,207,208].indexOf(e.accountType)!==-1?"升级企业账号，获得更多超值赠送礼包、企业高级特权与服务。":"您当前的账号无法继续升级。",e.xdBuy=t.buyXdQ,a.myPrivilege().then(function(i){if(i.data.success){var n=i.data.map;e.sampleLabel=function(){var e,t=parseInt(n.freeTpl||0,10);return e=t?t:"可付费使用"}(),e.LOGOLabel=function(){var t;if(1===e.accountType)t="无权限";else if(5===e.accountType||51===e.accountType)t="专属免费";else{var i=parseInt(n.loadingLogo,10);t=i?i<0?10*i+"折":i:"可付费使用"}return t}(),e.endPageLabel=function(){var e,t=parseInt(n.tailPage||0,10);return e=t?t<0?10*t+"折":t:"可付费使用"}(),e.openSceneFlag=!1,e.sceneOperate=!1,e.supportLabel=function(){var i,a=parseInt(n["static.scene.days.ext"]||0,10)+parseInt(n.staticDays||0,10),s=parseInt(n.staticSceneNum||0,10);return 1===e.accountType?i="无权限":(21===e.user.type||51===e.user.type)&&t.userPermit.indexOf(",1410,")<0?(i="无权限",e.sceneOperate=!0):(i=a?a:"可付费使用",e.openSceneFlag=!!s),i}();var a=function(t){var i;return i=[1,2].indexOf(e.accountType)!==-1?"无权限":t||0};e.preAuditLabel=function(){var e=3-parseInt(n.preCheck||0,10);return a(e)}(),e.urgentReviewLabel=function(){var e=3-parseInt(n.rejectCheck||0,10);return a(e)}()}}),e.subAccountLabel=function(){return 1===e.accountType?"无权限":void a.companyProfile().then(function(t){t.data.success&&(e.subAccountLabel=t.data.map.remainNum)})}(),e.buyBranch=function(t){a.buyBranchDlg(e,t)},e.shortMessageLabel=function(){return 1===e.accountType?"无权限":void o.messageNumber().then(function(t){t.data.success&&(e.shortMessageLabel=t.data.obj||0)})}(),e.domainSatus=0,e.domainNameLabel=function(){return 1===e.accountType?"无权限":void a.getDomain().then(function(t){if(t.data.success){var i=t.data.obj.status;e.domainSatus=i||0;var n=function(i){var n;n=[2,21,201,202,203,204,3,98,99].indexOf(e.accountType)!==-1?"可付费使用":"可免费使用";var a;return t.data.obj.endDate?a=t.data.obj.endDate:t.data.obj.applyDate&&t.data.obj.buyTime&&(a=t.data.obj.applyDate+86400*t.data.obj.buyTime*1e3),1===i&&a?n=a:2===i?n="审核中":3===i?n="审核未通过":(4===i||a&&(new Date).getTime()>a)&&(n="已到期"),n};e.domainNameLabel=n(i)}})}(),e.SMSAlertLabel=function(){a.getPhoneMessageTime().then(function(t){if(t.data.success){var i=t.data.obj,n=Date.parse(new Date),a=!!(i&&i>n),s=i;a||(s=1===e.accountType?"可付费使用":[2,21,202,212,3,98,99].indexOf(e.accountType)!==-1?"5折":"可免费使用"),e.SMSAlertLabel=s}})}()}]).filter("gt0",function(){return function(e){return!isNaN(e)&&parseInt(e,10)>0}}).filter("gte0",function(){return function(e){return!isNaN(e)&&parseInt(e,10)>=0}}).filter("isNaNum",function(){return function(e){return isNaN(e)}}).filter("isDate",function(){return function(e){if(!isNaN(e)){var t=new Date(parseInt(e,10));return t instanceof Date&&isFinite(t)}return!1}}).filter("dateNotExpire",function(){return function(e){return!isNaN(e)&&(new Date).getTime()<e}}),angular.module("homePage.section",[]),angular.module("homePage.section").controller("MySectionController",["$scope","mySectionService","ModalService","$location","$modal","usercenterService","configSerService","security",function(e,t,i,n,a,s,o,r){function l(){t.sceneGeneral().then(function(t){t.data.success?e.sceneGeneral=t.data.map:i.openMsgDialog({msg:t.data.msg})})}function c(n){t.dataStatistics(n).then(function(t){t.data.success?e.dataStatistics=t.data.obj:i.openMsgDialog({msg:t.data.msg})})}function d(){t.accountGeneral().then(function(t){t.data.success?e.accountGeneral=t.data.map:i.openMsgDialog({msg:t.data.msg})})}function p(n,a,s){t.getSysRecommend(n,a,s).then(function(t){t.data.success?e.getSysRecommend=t.data.list:i.openMsgDialog({msg:t.data.msg})})}function u(){t.newVersionList().then(function(t){t.data.success?e.newVersionList=t.data.list.slice(0,3):i.openMsgDialog({msg:t.data.msg})})}function h(t,n){s.getNewMessage(t,n).then(function(t){t.data.success?e.NewMessageList=t.data.list:i.openMsgDialog({msg:t.data.msg})})}function g(n,a){t.newPublishScene(n,a).then(function(t){t.data.success?(e.newScene=t.data.obj,e.newScene&&c(e.newScene.id)):i.openMsgDialog({msg:t.data.msg})})}function m(t,n){o.getActivityBanner(t,n).then(function(t){t.data.success?e.messBanner=t.data.list[0]:i.openMsgDialog({msg:t.data.msg})})}e.dataStatistics={pvTotal:0,uvTotal:0,dataTotal:0,yesterdayPv:0,pv:0,uv:0},e.editScene=function(e,t,s){return e&&e.stopPropagation(),1===s.isExpedited||"1"===s.isExpedited?void i.openMsgDialog({msg:"该场景已在加急审核中，暂时无法编辑场景，请耐心等待",btn:"确认"}):void(30===s.bizType||"30"===s.bizType?a.open({windowClass:"seven-contain",templateUrl:"main/mobileTansform.tpl.html"}).result.then(function(){n.path("scene/create/"+t).search("pageId",1)}):n.path("scene/create/"+t).search("pageId",1))},e.showDetail=function(e){var t;t=r.isAllowToAccess(r.accessDef.HOME_SPREAD_STATISTICS)?"promotion/statistics/"+e+"/summeryViewInfo":"promotion/statistics/"+e+"/accessInfo",window.open(t,"_self")},e.showShareDetail=function(e){var t="promotion/share/"+e+"/socialShare";window.open(t,"_self")},e.addSceneTpl=function(){n.path("scene/list/sample")},l(),d(),u(),h(1,3),g(1,1),e.$watch("user",function(){e.user&&e.user.type&&(m("ui_top",e.user.type),p(e.user.type,1,5))},!0)}]).directive("countUpAnim",["CountUp",function(e){var t=function(e){var t=e;return e>=1e4&&e<1e8?t=(e/1e4).toFixed(1)+"万":e>=1e8&&(out=(e/1e8).toFixed(1)+"亿"),t};return{scope:{start:"@",end:"@"},restrict:"A",templateUrl:"",link:function(i,n){i.$watch("end",function(a,s){a!==s&&new e(n.get(0),i.start,i.end,.7,{formatFn:t})},!0),new e(n.get(0),i.start,i.end,.7,{formatFn:t})}}}]).factory("CountUp",[function(){function e(e,t,i,n,a){var s=this;s.options={useEasing:!1};for(var o in a)a.hasOwnProperty(o)&&(s.options[o]=a[o]);s.dom=e,s.dec=1,s.startVal=Number(t),s.endVal=Number(i),s.frameVal=s.startVal,s.duration=1e3*Number(n)||2e3,s.printValue(s.startVal),s.start()}for(var t=["webkit","moz","ms","o"],i=window.requestAnimationFrame,n=0;n<t.length&&!i;++n){i=window[t[n]+"RequestAnimationFrame"];break}return e.prototype.easingFn=function(e,t,i,n){return i*(-Math.pow(2,-10*e/n)+1)*1024/1023+t},e.prototype.printValue=function(e){var t=e;this.options.formatFn&&(t=this.options.formatFn(e)),this.dom.innerHTML=t},e.prototype.start=function(){function e(n){t.startTime||(t.startTime=n),t.timestamp=n;var a=n-t.startTime;t.options.useEasing?t.frameVal=t.easingFn(a,t.startVal,t.endVal-t.startVal,t.duration):t.frameVal=t.startVal+(t.endVal-t.startVal)*(a/t.duration),t.frameVal=t.startVal+(t.endVal-t.startVal)*(a/t.duration),t.frameVal=t.frameVal>t.endVal?t.endVal:t.frameVal,t.frameVal=Math.round(t.frameVal*t.dec)/t.dec,t.printValue(t.frameVal),a<t.duration&&i(e)}var t=this;i(e)},e}]).factory("mySectionService",["$http",function(e){function t(){var t="m/u/scene/profile",i=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",
url:PREFIX_URL+t})}function i(t){var i="api/eqs/scene/total/"+t+"/stat.json";return e({withCredentials:!0,method:"GET",url:BIG_DATA_HOST+i})}function n(){var t="m/u/company/profile",i=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})}function a(t,i,n){var a="m/scene/guided?pageNo="+i+"&pageSize="+n;return t&&(a+=(/\?/.test(a)?"&":"?")+"type="+t),a+=(/\?/.test(a)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})}function s(){var t="m/u/promotion/profile";return e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})}function o(){var t="m/u/notice";return t+=(/\?/.test(t)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})}var r={sceneGeneral:t,dataStatistics:i,accountGeneral:n,getSysRecommend:a,newPublishScene:s,newVersionList:o};return r}]),angular.module("homePage.remind",[]).directive("remindCreate",["sceneService","dataService","usercenterService",function(e,t,i){return{restrict:"A",templateUrl:"home/section/remind.html",scope:{},link:function(n){function a(){var t={pageNo:1,pageSize:8};e.getPageTpls(t).then(function(){n.examples=e.scenes.list})}function s(e){n.currentTpl.exemplarPreview=!0,n.currentTpl.tpl=e}function o(t){var n=!1;!t||"1"!==t.isCompanyTemp&&1!==t.isCompanyTemp||(n=!0),e.createScene(t,n,i.xdCount)}function r(){$(".remind").toggleClass("reminderBackend")}function l(){angular.extend(n,n,{examples:null,PREFIX_FILE_HOST:PREFIX_FILE_HOST,coverShow:!0,userXd:null,currentTpl:{exemplarPreview:!1,tpl:null},openPreview:s,createScene:o,cancel:r}),t.getOpenedScenes().then(function(e){e.data.obj<1&&(a(),$(".remind").toggleClass("reminderForward"))})}l()}}}]),angular.module("homepage.sectionPanel",[]),angular.module("homepage.sectionPanel").directive("sectionPanel",[function(){for(var e=["webkit","moz","ms","o"],t=window.requestAnimationFrame,i=window.cancelAnimationFrame,n=0;n<e.length&&!t;++n)t=window[e[n]+"RequestAnimationFrame"],i=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];return{restrict:"AE",link:function(e,n){function a(e){this.contains(e.originalEvent.fromElement)||(o(e.clientX),f&&(d=t(l)),n.on("mousemove",s))}function s(e){i(d),o(e.clientX),f&&(d=t(l))}function o(e){f=e<260?100/e:e>h-260?100/(e-h):0}function r(e){this.contains(e.originalEvent.toElement)||(n.off("mousemove",s),d&&i(d))}function l(){f<0?m<g&&(m+=8,n.scrollLeft(m),d=t(l)):m>0&&(m-=8,n.scrollLeft(m),d=t(l))}function c(){return n.off("mouseover",a),n.off("mouseout",r),u=p.get(0).scrollWidth,h=document.body.clientWidth,h<u?(g=u-h,m=g/2,n.scrollLeft(m),p.css("marginLeft",0),n.on("mouseover",a),void n.on("mouseout",r)):(m=(h-(370*p.children().length+50))/2,void p.css("marginLeft",m))}var d,p=n.find(".card-list"),u=0,h=0,g=0,m=0,f=0;e.$watch(function(){return p.get(0).scrollWidth},function(){c()}),$(window).bind("resize",function(){c()}),c()}}}]),angular.module("customer.group",["services.data","services.i18nNotifications"]),angular.module("customer.group").controller("AddGroupCtrl",["$rootScope","$scope","dataService","i18nNotifications","sceneCreat",function(e,t,i,n,a){t.group={},t.authError="",a&&(t.group.name=a.name,t.group.id=a.id,t.title=a.title),t.confirm=function(){if(!t.group.name)return void(t.authError="请输入分组名称");var e=countCharacters(t.group.name);if(e>12)return void(t.authError="分组名称不能大于12个字符或6个汉字！");var s={name:t.group.name};a&&a.type?t.group.id?i.updateSceneGroup(t.group.id,t.group.name).then(function(){n.pushForCurrentRoute("group.create.success","notify.success"),t.$close({id:t.group.id,name:t.group.name})}):i.createSceneGroup(s).then(function(e){e.data.success&&(n.pushForCurrentRoute("group.create.success","notify.success"),t.$close({id:e.data.obj,name:t.group.name}))}):i.createGroup(s).then(function(e){e.data.success&&(n.pushForCurrentRoute("group.create.success","notify.success"),t.$close({id:e.data.obj,name:t.group.name}))})},t.cancel=function(){t.$dismiss()}}]),angular.module("main.transferScene",["services.usercenter"]),angular.module("main.transferScene").controller("TransferSceneCtrl",["$scope","$rootScope","sceneService","sceneId","dataCacheService","ModalService",function(e,t,i,n,a,s){e.model={toUser:"",toPlatform:0,actionerrorFlag:!1},e.selectPlatform=function(t){e.model.toPlatform=t},e.transferScene=!0,e.confirm=function(){return e.model.toUser?0===e.model.toPlatform&&e.model.toUser===t.user.loginName?(e.actionerror="不能转送自己",void(e.model.actionerrorFlag=!0)):(0===e.model.toPlatform?e.notification="转赠后将不再拥有原场景,建议备份后再转赠":e.notification="转赠后同时保留此场景",void s.openConfirmDialog({msg:e.notification,confirmName:"确定",cancelName:"取消"},function(){i.transferScene(n.sceneId,e.model.toUser,e.model.toPlatform).then(function(t){200===t.data.code||"200"===t.data.code?(a.clear("sceneList"),e.transferScene=!1):s.openMsgDialog({msg:t.data.msg})})})):(e.actionerror="账号不能为空",void(e.model.actionerrorFlag=!0))},e.cancel=function(){e.$dismiss()},e.submit=function(){e.$close()}}]),angular.module("main.data",["app.directives.dataDraggable","customer.group","services.i18nNotifications","app.directives.customer"]),angular.module("main.data").controller("CustomerCtrl",["$rootScope","$scope","$route","$location","$timeout","dataService","$modal","ModalService","i18nNotifications","security","$modal",function(e,t,i,n,a,s,o,r,l,c,o){t.PREFIX_URL=PREFIX_URL,t.isActive="customer",t.select=0,t.showBranchSelect=!0;var d=e.branchid;t.toPage=1,t.model={},t.dataShow="message",s.getCustomDatas(d),t.$on("customDatas",function(e,i){t.customCount=i}),t.customer={group:null,origin:null},t.branchEdit=!0,t.branchDelete=!0,t.branchExport=!0,a(function(){21!==t.user.type&&"21"!==t.user.type&&51!==t.user.type&&"51"!==t.user.type||(t.user.extPermi?(/^([\d,]+,)?1(,[\d,]*)?$/.test(t.user.extPermi)?t.branchEdit=!0:t.branchEdit=!1,/^([\d,]+,)?2(,[\d,]*)?$/.test(t.user.extPermi)?t.branchDelete=!0:t.branchDelete=!1,/^([\d,]+,)?3(,[\d,]*)?$/.test(t.user.extPermi)?t.branchExport=!0:t.branchExport=!1):(t.branchEdit=!1,t.branchDelete=!1,t.branchExport=!1))},100),t.downLoad=function(e,t){var i;i=PREFIX_S3_URL+"m/c/exp"+(d?"?user="+d:""),t&&(i+=(/\?/.test(i)?"&":"?")+"origin="+t),e&&(i+=(/\?/.test(i)?"&":"?")+"groupId="+e),location.href=i},t.staticFileds=[],t.staticFileds=[{id:"name",name:"姓名"},{id:"mobile",name:"手机"},{id:"email",name:"邮箱"},{id:"sex",name:"性别"},{id:"company",name:"公司"},{id:"job",name:"职位"},{id:"address",name:"地址"},{id:"tel",name:"电话"},{id:"website",name:"个人网站"},{id:"qq",name:"QQ"},{id:"weixin",name:"微信"},{id:"remark",name:"其他"}],t.selectScene=function(e,i){t.selectedSceneId=e,s.getSceneField(e).then(function(e){t.fields=e.data.list,t.select=i,$(".list_attribute").html("拖拽到此处")})},t.clickScene=function(){n.path("main")},t.clickSpread=function(){n.path("main/spread")},t.clickCustomer=function(){n.path("main/customer")},t.editCustomer=function(e){t.getDataDetail(e.id),t.editData=!0},t.removeCustomer=function(e){r.openConfirmDialog({msg:"确定删除此条数据?"},function(){s.deleteDataById(e.id).then(function(e){200!==e.data.code&&"200"!==e.data.code||l.pushForCurrentRoute("custom.data.delete","notify.success"),1===t.customerDatas.length&&t.model.currentPage>1?t.getDataBySceneId(t.model.currentPage-1,d,t.groupId,t.origin):t.getDataBySceneId(t.model.currentPage,d,t.groupId,t.origin),s.getCustomDatas(d)})})},t.addColor=function(e){t.trIndex=e},t.removeColor=function(){t.trIndex=-1},t.totalItems=0,t.model.currentPage=0,t.toPage="",t.pageChanged=function(e,i,n,a){return e<1||e>t.totalItems/10+1?void r.openMsgDialog({msg:"此页超出范围"}):(t.model.currentPage=e,void t.getDataBySceneId(e,i,n,a))},t.getDataBySceneId=function(e,i,n,a){e||(e=1),n&&(t.groupId=n),a&&(t.origin=a),s.getAllData(e,i,n,a).then(function(e){t.customerDatas=e.data.list,t.totalItems=e.data.map.count,t.model.currentPage=e.data.map.pageNo,t.toPage="",t.totalNum=Math.ceil(t.totalItems/e.data.map.pageSize)})},t.getDataBySceneId(1,d,null,null),t.editCustom=function(e){n.path("/main/customer/"+e.id)};var p=function(){s.getDataMessage(d).then(function(e){t.dataMessage=e.data.list})};p(),t.sceneLoad=function(e){var t=PREFIX_S3_URL+"m/scene/excel/noheader?id="+e+(d?"&user="+d:"");location.href=t},t.importDatas=function(){s.getPremergeScenes(d).then(function(e){t.importDatas=e.data.list,e.data.list.length>0&&t.selectScene(e.data.list[0].ID,0)})},t.associateData={};var u=!0;if(t.confirm=function(){u?jQuery.isEmptyObject(t.associateData,{})?(r.openMsgDialog({msg:"请导入数据！"}),u=!0):(s.mergeSceneData(t.selectedSceneId,t.associateData).then(function(){l.pushForCurrentRoute("lead.customer","notify.success"),i.reload()}),u=!1):r.openMsgDialog({msg:"请不要重复提交！"})},t.importDatas(),t.isAllowedToAccessGrouping=c.isAllowToAccess(c.accessDef.GROUP_CUSTOMER),t.isAllowedToAccessGrouping){t.allImages={selected:!1},t.selectAll=function(){for(var e=0,i=t.customerDatas.length;e<i;e++)t.customerDatas[e].selected=t.allImages.selected},t.selectCustomer=function(e){e.selected||(t.allImages.selected=!1)},t.groups=[],t.getGroups=function(){t.groups.length>0||s.getGroups(d).then(function(e){t.groups=e.data.list})},t.getGroups(),t.getOrigins=function(){s.getOrigin(d).then(function(e){t.origins=e.data.list},function(){})},t.getOrigins(),t.addGroup=function(){o.open({windowClass:"group-console console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{}}}}).result.then(function(e){t.groups.push(e),f(),l.pushForCurrentRoute("group.create.success","notify.success")})};var h=[],g=[];t.assignGroup=function(){h=[],g=[];for(var e=0,i=t.customerDatas.length;e<i;e++)t.customerDatas[e].selected&&h.push(t.customerDatas[e].id);for(e=0,i=t.groups.length;e<i;e++)t.groups[e].selected&&g.push(t.groups[e].id);if(!h.length)return void r.openMsgDialog({msg:"您还没有选择客户!"});if(!g.length)return void r.openMsgDialog({msg:"您还没有选择分组!"});var n={cIds:h,gIds:g};s.assignGroup(n).then(function(e){e.data.success&&(f(),t.allImages.selected=!1,m(),l.pushForCurrentRoute("data.assign.success","notify.success"))})},t.deleteCustomer=function(e){h=[];var i,n;if(e)i={ids:e.id},n="确定删除此条数据?";else{for(var a=0,o=t.customerDatas.length;a<o;a++)t.customerDatas[a].selected&&h.push(t.customerDatas[a].id);if(!h.length)return void r.openMsgDialog({msg:"您还没有选择客户!"});i={ids:h},n="确定删除此条数据?"}r.openConfirmDialog({msg:n},function(){s.deleteCustomer(i).then(function(e){e.data.success&&(t.allImages.selected=!1,m(),f(),l.pushForCurrentRoute("data.delete.success","notify.success"))},function(){r.openMsgDialog({msg:"服务器异常"})})})},t.deleteGroup=function(e,i){r.openConfirmDialog({msg:"确定删除此分组?"},function(){s.deleteGroup(e.id).then(function(e){e.data.success&&(t.groups.splice(i,1),f(),l.pushForCurrentRoute("group.delete.success","notify.success"))},function(){r.openMsgDialog({msg:"服务器异常"})})})};var m=function(){1===t.customerDatas.length&&t.model.currentPage>1?t.getDataBySceneId(t.model.currentPage-1):t.getDataBySceneId(t.model.currentPage)},f=function(){for(var e=0,i=t.groups.length;e<i;e++)t.groups[e].selected=!1}}t.createData=function(){n.path("main/customer/create")},t.sceneData=function(){t.dataShow="dataIn"},t.uploadData=function(){o.open({windowClass:"login-container six-contain",templateUrl:"main/uploadData.tpl.html",controller:"uploadDataCtrl",resolve:{}}).result.then(function(e){e&&t.getDataBySceneId(1,d,null,null)})},t.$watch("model.currentPage",function(e,i){e&&e!==i&&(t.model.toPage=e)},!0)}]).filter("propsFilter",function(){return function(e,t){var i=[];if(angular.isArray(e)){var n=Object.keys(t);e.forEach(function(e){for(var a=!1,s=0;s<n.length;s++){var o=n[s],r=t[o].toLowerCase();if(e[o].toString().toLowerCase().indexOf(r)!==-1){a=!0;break}}a&&i.push(e)})}else i=[];return i}}),angular.module("main",["main.print.shop","services.mine","services.data","app.directives.pageTplTypes","services.staticRes","app.directives.addelement","main.data","main.print","main.print.ads","main.transferScene","services.usercenter","main.userGuide","services.i18nNotifications","common.directives.scroll","main.newVersionFrame","main.data.uploadData","scene.create.console.font"]),angular.module("main").controller("MainCtrl",["$rootScope","$scope","$location","security","MineService","dataService","sceneService","ModalService","$modal","usercenterService","i18nNotifications","configSerService","$filter","staticResService","$timeout","dataCacheService","$route","storageService","fontService","guideService",function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,g,m,f,v,b,y){function w(e){b.checkBoughtFonts(e).then(function(t){if(200===t.data.code||"200"===t.data.code){if(t.data.list&&t.data.list.length){var i=t.data.list,n='场景中使用的<span class="color-blue">'+i.join()+"</span>字体仅限当前账号使用，一经转赠，受赠人需要重新购买字体后方可使用，是否继续转赠？";return void r.openConfirmDialog({msg:n,confirmName:"确认",cancelName:"取消"},function(){x(e)})}x(e)}else x(e)},function(t){x(e)})}function x(e){l.open({windowClass:"six-contain",templateUrl:"main/console/transferscene.tpl.html",controller:"TransferSceneCtrl",resolve:{sceneId:function(){return{sceneId:e}}}}).result.then(function(){t.getMyScenes()},function(){t.getMyScenes()})}function k(e){var i,n="确定删除此场景?";if(""+t.currentUser.type=="2"||""+t.currentUser.type=="21")if(t.currentUser.memberType){switch(t.currentUser.memberType){case 1:case 2:case 3:case 4:i=3;break;case 6:case 7:i=7;break;case 8:i=15;break;case 9:i=30}n+="删除后，该场景将在回收站保留"+i+"天"}else""+t.currentUser.type!="5"&&""+t.currentUser.type!="51"||(i=15,n+="删除后，该场景将在回收站保留"+i+"天");r.openConfirmDialog({msg:n},function(){a.deleteSceneById(e).then(function(e){e.data.success?(1===t.myScenes.length&&t.currentPage>1&&t.currentPage--,s.getDatas(C),t.getMyScenes(t.currentPage,I.name)):r.openMsgDialog({msg:e.data.msg})})})}t.PREFIX_URL=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.client_cdn=CLIENT_CDN,t.scene={type:null},t.pageSize=12;var S=1;t.isActive="main",t.loginSuccess=n.isLoginSuccess,t.myScene=!0,t.allPageCount=0;var T={};t.userType=n.currentUser.type,t.currentUser=n.currentUser,t.accessOrderTask=n.isAllowToAccess(n.accessDef.ACCESS_ORDER_TASK),[1,2,5,21,51].indexOf(t.currentUser.type)!==-1&&(t.companyType=!0),t.currentTpl={exemplarPreview:!1},t.createScene=function(e,i){o.createScene(e,i,t.userXd)};var C=e.branchid;t.initShowGuide=!0,y.newVersionFrameFn(),t.XdpageSize=100,t.getBranches=function(i){c.getBranches(t.XdpageSize,i).then(function(i){i.data.success&&(t.branches=i.data.list,e.branchid&&E())})},(2===n.currentUser.type||"2"===n.currentUser.type||5===n.currentUser.type||"5"===n.currentUser.type||(21===n.currentUser.type||"21"===n.currentUser.type)&&e.userPermit.indexOf(",1405,")>=0)&&t.getBranches(1),p.getActivityBanner("ad_001",n.currentUser.type).then(function(e){t.banners=e.data.list}),e.branchid?(t.switchChild=!1,"my"!==t.sceneList&&(t.sceneList="my",window.localStorage&&(T[n.currentUser.id]=t.sceneList,localStorage.setItem("sceneTab",JSON.stringify(T))))):t.switchChild=!0,t.selectBranch=function(n){n?(t.branchCurrent=n,e.branchid=n.id,i.search({branchid:n.id}),t.switchChild=!1):(e.branchid="",i.search("branchid",null),t.switchChild=!0),E()};var E=function(){if(e.branchid)for(var i=0;i<t.branches.length;i++)t.branches[i].id===e.branchid&&(t.branchCurrent=t.branches[i]);C=e.branchid,t.getMyScenes()};t.showSceneList=function(){t.initShowGuide=!1,e.$broadcast("eqmain.overflow.visible")},t.editScene=function(e,t,n){return e&&e.stopPropagation(),1===n.isExpedited||"1"===n.isExpedited?void r.openMsgDialog({msg:"该场景已在加急审核中，暂时无法编辑场景，请耐心等待",btn:"确认"}):void(30===n.bizType||"30"===n.bizType?l.open({windowClass:"seven-contain",templateUrl:"main/mobileTansform.tpl.html"}).result.then(function(){i.path("scene/create/"+t).search("pageId",1)}):i.path("scene/create/"+t).search("pageId",1))},t.showPreview=function(e,i){var n=t.url+("/s/"+i.code);return C?void window.open(n):void(i.publishTime?i.publishTime&&i.updateTime>i.publishTime?r.openConfirmDialog({msg:"场景有更新需要再次发布才能预览最新内容，坚持预览会看到修改之前的场景",confirmName:"发布",cancelName:"坚持预览"},function(){t.publishScene(e,i)},function(){e&&e.stopPropagation(),window.open(n)}):(e&&e.stopPropagation(),window.open(n)):r.openConfirmDialog({msg:"尚未发布场景无法预览，请先发布",confirmName:"发布",cancelName:"取消"},function(){t.publishScene(e,i)}))},window.localStorage&&"false"===localStorage.getItem("myScenesListType")?t.listType=!1:t.listType=!0,t.listToggle=function(){t.listType=!t.listType,"system"!==t.sceneList&&"sample"!==t.sceneList||(t.listType=!0),window.localStorage&&localStorage.setItem("myScenesListType",t.listType)},t.addColor=function(e){t.trIndex=e},t.removeColor=function(){t.trIndex=-1},t.sceneSettings=function(e,t,n){return 1===n.isExpedited||"1"===n.isExpedited?void r.openMsgDialog({msg:"该场景已在加急审核中，暂时无法设置场景，请耐心等待",btn:"确认"}):(e&&e.stopPropagation(),void(30===n.bizType||"30"===n.bizType?l.open({windowClass:"seven-contain",templateUrl:"main/mobileTansform.tpl.html"}).result.then(function(){i.path("scene/create/"+t).search({pageId:1,openSetting:"show"})}):i.path("scene/create/"+t).search({pageId:1,openSetting:"show"})))},t.clickScene=function(){i.path("main")},t.clickSpread=function(){i.path("main/spread")},t.creatCompanyTpl=function(e,i,n){e&&e.stopPropagation(),o.createCompanyTpls(i).then(function(e){e.data.success&&(t.myScenes[n].isTpl=3,d.pushForCurrentRoute("scene.save.success.companyTpl","notify.success"))})},t.clearCompanyTpl=function(e,i,n){e&&e.stopPropagation(),o.clearCompanyTpls(i).then(function(e){e.data.success&&(t.myScenes[n].isTpl=0,d.pushForCurrentRoute("scene.clear.success.companyTpl","notify.success"))})},t.clickCustomer=function(){i.path("main/customer")},t.register=n.getRegisterInfo(),t.logout=function(){n.logout()},t.copyScene=function(e,t){e&&e.stopPropagation(),r.openConfirmDialog({msg:"确定复制此场景?"},function(){o.copySceneById(t).then(function(e){200!==e.data.code&&"200"!==e.data.code||i.path("scene/create/"+e.data.obj).search("pageId",1)})})},t.isAllowedToAccessTransfer=n.isAllowToAccess(n.accessDef.TRANSFER_SCENE),t.isAllowedToAccessTransfer&&(t.transferScene=function(e,t,i){return e&&e.stopPropagation(),1===i||0===i?void d.pushForCurrentRoute("transfer.scene.guarantee","notify.success"):void w(t)}),t.getStyle=function(e){return{"background-image":"url("+PREFIX_FILE_HOST+e+")","background-size":"cover"}},t.totalItems=0,t.page={currentPage:1},t.toPage="",t.name=null,t.EnterPress=function(e,i){var n=e||window.event;13!==n.keyCode&&"13"!==n.keyCode||t.submit(i)},t.searchButton=!0;var P={},I={};t.submit=function(e){I.name=e,t.name=e,a.getMyScenes(t.scene.type?t.scene.type.value:null,S,t.pageSize,C,e,null,I.groupId),e&&(t.searchButton=!1),P.refresh=!0},t.changeName=function(e){t.searchButton=!0,""===e&&P.refresh&&(I.name=e,a.getMyScenes(t.scene.type?t.scene.type.value:null,S,t.pageSize,C,e,null,I.groupId))},t.clearSearch=function(){I.name="",t.searchButton=!0,t.name="",a.getMyScenes(t.scene.type?t.scene.type.value:null,S,t.pageSize,C,null,null,I.groupId)},t.getMyScenes=function(e,i){"myScene"===i&&(I.groupId=null),a.getMyScenes(t.scene.type?t.scene.type.value:null,e,t.pageSize,C,I.name,null,I.groupId)},t.$on("get.my.scene.list",function(){var i=a.scenes;"group"!==M&&"my"!==t.sceneList&&(t.sceneList="my"),i.list&&i.list.length>0?(t.myScenes=i.list,t.totalItems=i.map.count,t.page.currentPage=i.map.pageNo,t.toPage=i.map.pageNo,e.user&&e.user.domain?(t.url="http://"+e.user.domain,t.canvasUrl=t.url):(t.url=PREFIX_SHOW_HOST,1!==t.user.type&&(2!==t.user.type&&21!==t.user.type||t.user.memberType)?3===t.user.type||4===t.user.type?t.canvasUrl=PREFIX_SERVICE_HOST:99===t.user.type?t.canvasUrl=PREFIX_SHOW_HOST:t.user.expiryTime&&t.user.expiryTime<Date.now?t.canvasUrl=PREFIX_HOST_ARRAY[Math.floor(11*Math.random())%11]:t.canvasUrl=PREFIX_COMPANY_HOST_ARRAY[Math.floor(2*Math.random())%2]:t.canvasUrl=PREFIX_HOST_ARRAY[Math.floor(11*Math.random())%11])):(t.totalItems=0,t.currentPage>1?t.getMyScenes(--t.currentPage):t.myScenes=[])}),t.switchList=function(e){t.sceneList=e,"system"!==e&&"sample"!==e||t.listType||t.listToggle(),window.localStorage&&(T[n.currentUser.id]=t.sceneList,localStorage.setItem("sceneTab",JSON.stringify(T)))};var _={},L={};t.getNewSample=function(i){a.getNewSample().then(function(n){if(200===n.data.code||"200"===n.data.code)if(window.localStorage){if(localStorage.getItem("guid")&&JSON.parse(localStorage.getItem("guid"))[e.user.id]){var a=JSON.parse(localStorage.getItem("guid"));a[e.user.id]!==n.data.obj.guid&&(t.guid=!0,_[e.user.id]=n.data.obj.guid,"recommend"===i&&(t.guid=!1,localStorage.setItem("guid",JSON.stringify(_))))}else _[e.user.id]=n.data.obj.guid,localStorage.setItem("guid",JSON.stringify(_));if(localStorage.getItem("comp")&&JSON.parse(localStorage.getItem("comp"))[e.user.id]){var s=JSON.parse(localStorage.getItem("comp"));s[e.user.id]!==n.data.obj.comp&&(t.comp=!0,L[e.user.id]=n.data.obj.comp,"company"===i&&(t.comp=!1,localStorage.setItem("comp",JSON.stringify(L))))}else L[e.user.id]=n.data.obj.comp,localStorage.setItem("comp",JSON.stringify(L))}else _[e.user.id]=n.data.obj.guid,L[e.user.id]=n.data.obj.comp,window.localStorage&&(localStorage.setItem("guid",JSON.stringify(_)),localStorage.setItem("comp",JSON.stringify(L)))})},t.getNewSample(),t.canvasSampleUrl=PREFIX_SHOW_HOST,t.currentGroup={},t.currentGroup.currentName="我的场景",t.currentGroup.activeName="my",t.currentNameGroup=function(e,i){t.currentGroup.clickName=e,t.currentGroup.currentName=e,t.currentGroup.currentId=i,t.currentGroup.activeName=i,t.currentGroup.clickId=i,0===i||"0"===i?(t.getGroupScene(0),t.switchList(0),t.currentGroup.activeName=0,t.currentGroup.currentName="未分组",t.currentGroup.currentId="0",t.currentGroup.clickName="",t.currentGroup.clickId="0"):i?(t.getGroupScene(i,"group"),t.switchList(i)):(t.getMyScenes(1,"myScene"),t.switchList("my"),t.currentGroup.activeName="my",t.currentGroup.currentName="我的场景",t.currentGroup.currentId=null,t.currentGroup.clickName=null,t.currentGroup.clickId=null)},t.$watch("sceneList",function(e,i){e!==i&&t.sceneList!==t.currentGroup.activeName&&(t.currentGroup.clickId="20160114yqxlyx")},!0);var M;if(t.getGroupScene=function(e){M="group",I.groupId=e,t.page.currentPage=1,a.getMyScenes(t.scene.type?t.scene.type.value:null,S,12,C,I.name,null,e)},g(function(){a.getMyGroup(n.currentUser.id),t.$on("get.my.group",function(e,i){t.groups=i,t.groups.length>0&&(t.showWeiGroup=!0)})},300),window.localStorage)if(localStorage.getItem("sceneTab")){try{T=JSON.parse(localStorage.getItem("sceneTab"))}catch(R){T=localStorage.getItem("sceneTab")}"string"==typeof T?(T={},t.sceneList="my",t.getMyScenes()):(t.sceneList=JSON.parse(localStorage.getItem("sceneTab"))[n.currentUser.id],t.sceneList?"my"===t.sceneList?t.currentNameGroup():g(function(){t.$on("get.my.group",function(e,i){t.groups=i;for(var n=0;n<t.groups.length;n++)t.groups[n].id===t.sceneList&&t.currentNameGroup(t.groups[n].groupName,t.sceneList)})}):t.currentNameGroup())}else t.currentNameGroup();t.addGroup=function(e){return t.groups&&t.groups.length>=5?void r.openMsgDialog({msg:"创建分组不能超过5个"}):void l.open({windowClass:"group-console console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{type:!0}}}}).result.then(function(i){t.groups.push({groupName:i.name,id:i.id}),i&&(t.showWeiGroup=!0,e&&t.moreGroup(i.id,e,null,"sceneList")),d.pushForCurrentRoute("group.create.success","notify.success")})},t.manageGroupName=!1,t.manageGroup=function(){t.manageGroupName=!t.manageGroupName},t.showGroud=!1,t.$watch("showGroud",function(){t.manageGroupName===!0&&(t.showGroud=!1)}),t.editGroup=function(e,i){l.open({windowClass:"group-console console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{type:!0,name:i,id:e,title:"修改分组名称"}}}}).result.then(function(e){for(var i=0;i<t.groups.length;i++)e.id===t.groups[i].id&&(t.groups[i].groupName=e.name,t.currentGroup.currentId===e.id&&(t.currentGroup.currentName=e.name,t.currentGroup.currentId=e.id,t.currentGroup.clickName=e.name));d.pushForCurrentRoute("group.edit.success","notify.success")})},t.deleteGroup=function(e,i){r.openConfirmDialog({msg:"删除后，分组下的场景将移动至未分组下",confirmName:"确定",cancelName:"取消"},function(){a.deleteGroup(e,i),t.currentNameGroup()})},t.$on("delete.my.group",function(e,i){t.groups.splice(i,1),t.groups.length>0?t.showWeiGroup=!0:t.showWeiGroup=!1,d.pushForCurrentRoute("group.delete.success","notify.success")}),t.moreGroup=function(e,i,n,s){return I.groupId===e?void r.openMsgDialog({msg:"此场景已在该分组内"}):void a.moveGroupScene(e,i).then(function(i){if(200===i.data.code||"200"===i.data.code){if(s)return t.switchList(e),void t.getGroupScene(e,"group");var n=parseInt(I.groupId,10);n>=0&&n!==e&&a.getMyScenes(t.scene.type?t.scene.type.value:null,t.currentPage,12,C,I.name,null,I.groupId),d.pushForCurrentRoute("group.scene.success","notify.success")}})},t.deleteScene=function(e,t,i){return e&&e.stopPropagation(),1===i||0===i?void d.pushForCurrentRoute("delete.scene.guarantee","notify.success"):void k(t)},t.pageChanged=function(e){return e<1||e>t.totalItems/10+1?void r.openMsgDialog({msg:"此页超出范围"}):(t.currentPage=e,void("sample"===t.sceneList?a.getCompanySample(n.currentUser.id,e,t.pageSize):t.getMyScenes(e,I.name)))},t.getTdStyle=function(e){var t=$(".header_table td:eq("+e+")").outerWidth();return{width:t+"px",maxWidth:t+"px"}},t.scene.types=h.getSceneType(),t.dataDetail={},s.getDatas(C),s.getCustomDatas(C),t.$on("sceneDatas",function(e,i){t.datasCount=i}),t.$on("customDatas",function(e,i){t.customCount=i}),t.showDetail=function(t){var i="promotion/share/"+t+"/socialShare";e.branchid&&(i+="?branchid="+e.branchid),window.open(i,"_self")},t.showStatistics=function(t){var i="promotion/statistics/"+t;e.branchid&&(i+="?branchid="+e.branchid),window.open(i,"_self")},t.showData=function(t){var i="promotion/dataCollect/"+t;e.branchid&&(i+="?branchid="+e.branchid),window.open(i,"_self")},t.publishScene=function(e,i){if(e&&e.stopPropagation(),!i.name)return void r.openMsgDialog({msg:"尚未设置标题，请设置后再执行此操作",btn:"去设置"},function(){t.sceneSettings(e,i.id,i)});var n=window.open();1===i.staticStatus?r.openConfirmDialog({msg:"场景已经静态化,发布后不能及时更新,确定更改吗",confirmName:"确定",cancelName:"取消"},function(){o.publishScene(i.id).then(function(e){if(e.data.success){i.publishTime=(new Date).getTime(),d.pushForCurrentRoute("scene.publish.success","notify.success");var a=t.url+("/s/"+i.code);n.location=a}})},function(){}):o.publishScene(i.id).then(function(e){if(e.data.success){i.publishTime=(new Date).getTime(),d.pushForCurrentRoute("scene.publish.success","notify.success");var a=t.url+("/s/"+i.code);n.location=a}})},t.canvasUrlStatic=VIP_HOST,t.openPreview=function(e){t.currentTpl.exemplarPreview=!0,t.currentTpl.tpl=e}}]).directive("selectPicker",function(){return{restrict:"EA",link:function(e,t){t.selectpicker()}}}),angular.module("main.newVersionFrame",[]),angular.module("main.newVersionFrame").controller("newVersionFrame",["$scope","versionInfo",function(e,t){e.cancel=function(){e.$dismiss()},e.versionInfo={content:t.content,url:t.url}}]),angular.module("main.print.ads",["common.resources.print"]).controller("AdsCtrl",["$scope","printResource",function(e,t){t.getAds(),e.$on("ads.get",function(t,i){var n=localStorage.getItem("main_print_ads"),a=i.list.map(function(e){return e.id}).sort(function(e,t){return e-t}).join("");return e.adsList=i.list,e.showArrow=!0,e.adsList.length?(e.adsList.length<2&&(e.showArrow=!1),e.showAds=!n||n!=a,void(e.showAds&&window.localStorage.setItem("main_print_ads",a))):void(e.showAds=!1)})}]).directive("eqdRepeatLast",function(){return function(e,t,i){e.$last&&e[i.eqdRepeatLast]()}}).directive("eqdAds",function(){function e(e,t){var i=t.find(".items"),n=i.width(),a=0,s=null;i.css({height:n/2,marginTop:-n/4,marginLeft:-n/2}),e.repeatOver=function(){a=e.adsList.length,s=t.find(".items ul"),s.css({width:n*a}),s.find("li").css({width:n}),s.find("img").css({maxHeight:n/2})};var o=0;e.toggle=function(e){"left"==e?o<=0?o=a-1:--o:o>=a-1?o=0:++o,s.css({transform:"translate(-"+n*o+"px)"})},e.close=function(){t.css({display:"none"})}}return{restrict:"E",templateUrl:"main/print/ads.tpl.html",controller:"AdsCtrl",replace:!0,link:e}}),angular.module("print.common.directives.preview",["common.resources.print"]).directive("eqdPreview",["printResource","ModalService",preview]),angular.module("main.print.affirmPrint",["common.resources.print"]).controller("AffirmPrintCtrl",["$rootScope","$scope","printResource","printId","i18nNotifications",function(e,t,i,n,a){var s=t.picker={coverArr:[]},o=1682;i.getPrintDetail(n),t.$on("printDetail.get",function(e,t){$.each(t.pages,function(e,t){s.coverArr.push({cover:t.cover,checked:!1,pageId:t.id,version:t.version})}),t.shopId&&(o=t.shopId)}),t.confirm=function(){var e=[],i=[],n=!1;$.each(s.coverArr,function(t,a){if(a.checked){if(!a.cover)return n=!0,!1;e.push(a.pageId),i.push(a.version)}}),n?a.pushForCurrentRoute("print.shop.images.fail","notify.success"):e.length>2?a.pushForCurrentRoute("print.images.number","notify.success"):e.length?t.$close({pagesId:e.join(","),sVersion:"1"+i.join(""),shopId:o}):a.pushForCurrentRoute("print.images.null","notify.success")},t.cancel=function(){t.$dismiss()}}]),angular.module("main.print.applyTpl",["common.resources.print"]).controller("ApplyTplCtrl",["$rootScope","$scope","printResource","printId",function(e,t,i,n){t.showTips=!1,t.$on("print.apply",function(e,i){"success"===i&&(t.showTips=!0)}),t.confirm=function(){i.applyTpl(n),e.$broadcast("affirm.apply",n)},t.cancel=function(){t.$close()}}]),angular.module("main.print.define",["common.resources.print","print.directives.validate"]).controller("DefineCtrl",["$scope","ModalService",function(e,t){e.size={type:"",width:"",height:"",unit:"mm"},e.$watch("size.unit",function(t){var i=$(".eqc-define input"),n=parseInt(e.size.width,10),a=parseInt(e.size.height,10);"mm"===t?(i.attr("maxlength","3"),e.size.width=n?(n/300*25.4).toFixed():"",e.size.height=a?(a/300*25.4).toFixed():""):"px"===t&&(i.attr("maxlength","4"),e.size.width=n?(n/25.4*300).toFixed():"",e.size.height=a?(a/25.4*300).toFixed():"")}),e.confirm=function(){var i=/^[1-9]\d*$/;return i.test(e.size.width)&&i.test(e.size.height)?void e.$close(e.size):void t.openMsgDialog({msg:"请输入有效的尺寸信息"})},e.cancel=function(){e.$dismiss()}}]),angular.module("main.print.saveToH5",["common.resources.print"]).controller("SaveToH5Ctrl",["$rootScope","$scope","printResource","printId","i18nNotifications",function(e,t,i,n,a){var s=t.picker={isAllCheck:!0,coverArr:[]};t.scenePicGroup=-1,t.isSave=!1,t.showTips=!1,i.getPrintDetail(n),t.$on("printDetail.get",function(e,t){$.each(t.pages,function(e,t){var i=/\.(png|jpg|jpeg|gif)$/.test(t.cover);i?s.coverArr.push({cover:t.cover,tmbCover:t.properties.coverTmp,checked:!0}):s.coverArr.push({cover:t.cover,tmbCover:t.cover,checked:!0})})}),i.getScenePicGroup(),t.$on("scenePic.group.get",function(e,i){t.picGroupList=i}),t.selectAll=function(){s.isAllCheck?$.each(s.coverArr,function(e,t){t.checked=!0}):$.each(s.coverArr,function(e,t){t.checked=!1})},t.changeItem=function(){t.isSave=!1},t.saveLocation=function(e){t.scenePicGroup=e},t.$on("saveToH5.success",function(){t.showTips=!0,window.sessionStorage.removeItem("fileService")}),t.confirm=function(){var e=[],n=!1;$.each(s.coverArr,function(t,i){if(i.checked){if(!i.cover)return n=!0,!1;var a=i.cover.split("/"),s=a[a.length-1],o=s.split("."),r=/\.(png|jpg|jpeg|gif)$/.test(i.cover);if(r){var l=o[o.length-1];e.push({name:Date.now()+"."+l,extName:l,path:i.tmbCover,tmbPath:i.cover})}else e.push({name:i.cover,extName:"png",path:i.tmbCover,tmbPath:i.cover})}}),n?a.pushForCurrentRoute("print.scene.images.fail","notify.success"):e.length?(window.localStorage.setItem("print_scene_images_update","true"),i.saveToH5(t.scenePicGroup,e)):t.isSave=!0},t.$watch("picker.coverArr",function(){var e=s.coverArr.filter(function(e){return e.checked===!1});s.isAllCheck=!e.length},!0),t.cancel=function(){t.$dismiss()}}]),angular.module("main.print.transfer",["common.resources.print"]).controller("TransferPrintCtrl",["$scope","$rootScope","$routeParams","$location","printResource","printId",function(e,t,i,n,a,s){
e.model={toUser:""},e.showTips=!1,e.confirm=function(){return e.model.toUser?e.model.toUser===t.user.loginName?void(e.activeError="不能转送给当前用户"):(a.transferPrint(s,e.model.toUser),void e.$on("print.transfer",function(i,n,s){"success"===n?(e.showTips=!0,a.getPrintList(t.currentPage,t.worksPageSize,t.printType)):e.activeError=s.msg})):void(e.activeError="账号不能为空")},e.cancel=function(){e.$close()}}]),angular.module("main.print",["main.print.template","main.print.mine","main.print.create","print.common.directives.preview"]).controller("PrintCtrl",["$scope","$rootScope","$location","printResource","$routeParams","$modal",function(e,t,i,n,a,s){e.tabView=a.tab,e.isActive="print",e.getStyle=function(e,t){return{backgroundImage:"url("+(e?PREFIX_FILE_HOST+e+"?imageMogr2/auto-orient/thumbnail/"+t+"x"+t+"/strip":CLIENT_CDN+PRINT_HOST_RESOURCE+"images/design_c.png")+")"}},e.showTab=function(a,s){a.stopPropagation(),"mine"===s&&n.getPrintList(1,t.worksPageSize),i.path("/main/print/"+s,!1),e.tabView=s},e.add=function(e,t,i,a){var s={type:e,width:t,height:i,unit:a||"px"};"mm"===a&&$.extend(s,{width:(parseFloat(t)/25.4*300).toFixed(),height:(parseFloat(i)/25.4*300).toFixed()});var o=window.open("","_blank");n.addPrint(s).then(function(e){var t=e.obj;o.location.href="print/create/"+t.id})},e.define=function(){s.open({windowClass:"six-contain",templateUrl:"main/print/dialog/define.tpl.html",controller:"DefineCtrl"}).result.then(function(t){e.add("0",t.width,t.height,t.unit)})}}]).directive("eqdPrintList",["$scope",function(){}]),angular.module("main.print.create",["common.resources.print"]).controller("PrintCreateCtrl",[function(){$(document).scrollTop(0)}]).directive("eqdCreate",[function(){function e(){}return{restrict:"E",templateUrl:"main/print/tab/create.tpl.html",controller:"PrintCreateCtrl",replace:!0,link:e}}]),angular.module("main.print.hotZone",["common.resources.print"]).controller("HotZoneCtrl",["$scope","printResource",function(e,t){t.getHotList(),e.$on("hotList.get",function(t,i){var n=i.obj;e.hotList0=n[0],e.hotList1=n[1],e.hotList2=n[2]}),e.copyHotItem=function(e){window.open("print/copyTpl/"+e,"_blank")}}]).directive("eqdHotZone",[function(){return{restrict:"E",templateUrl:"main/print/tab/hotZone.tpl.html",controller:"HotZoneCtrl",scope:!0,replace:!0}}]),angular.module("main.print.mine",["main.print.works","main.print.order"]).controller("MineCtrl",["$scope",function(e){e.showContent=!0,e.getContent=function(t){"works"===t?e.showContent=!0:e.showContent=!1}}]).directive("eqdMine",[function(){return{restrict:"E",scope:!0,templateUrl:"main/print/tab/mine.tpl.html",controller:"MineCtrl",replace:!0}}]),angular.module("main.print.order",["common.resources.print"]).controller("OrderCtrl",["$scope","$rootScope","printResource","ModalService",function(e,t,i,n){function a(t,n,a){i.getOrderInfo(t,n,a).then(function(t){e.orderList=t.list,e.totalItems=t.map.count,e.currentPage=t.map.pageNo,e.allPageCount=t.map.count,e.toPage=t.map.pageNo})}var s=e.count={all:"0",nonPayment:"0",completed:"0",cancel:"0"},o=1,r=8;i.getOrderCount().then(function(e){var t=e.list;if(t.length){var i=0;t.forEach(function(e){switch(e.status){case 0:s.nonPayment=e.count;break;case 3:s.completed=e.count;break;case-1:s.cancel=e.count}i+=e.count}),s.all=i.toString()}}),i.getOrderInfo(o,r,"all").then(function(t){e.orderList=t.list,e.currentStatus="all",e.totalItems=t.map.count,e.currentPage=t.map.pageNo,e.allPageCount=t.map.count,e.toPage=t.map.pageNo}),e.pageChanged=function(t){return t<1||t>e.totalItems/r+1?void n.openMsgDialog({msg:"此页超出范围"}):(a(t,r,e.currentStatus),void(e.currentOrderPage=t))},e.getOrderList=function(t){e.currentStatus=t,a(1,r,t)},e.getDetails=function(e,t){var n=window.open("","_blank");i.getDetailsURL(e,t).then(function(e){if(e&&e.map){var t=e.map;window.localStorage.setItem("print_shop_url",t.url),window.localStorage.setItem("print_shop_data",t.data),n.location.href="main/print/printShop"}})}}]).directive("eqdOrder",[function(){return{restrict:"E",templateUrl:"main/print/tab/order.tpl.html",controller:"OrderCtrl",scope:!0,replace:!0}}]),angular.module("main.print.template",["main.print.tplSort","main.print.hotZone","common.resources.print"]).controller("TemplateCtrl",["$rootScope","$scope","printResource",function(e,t){t.selected="hot",t.showList=!1,t.getList=function(e){switch(e){case"hot":t.showList=!1,t.selected="hot";break;case"tpl":t.showList=!0,t.selected="tpl"}}}]).directive("eqdTemplate",[function(){function e(){}return{restrict:"E",templateUrl:"main/print/tab/template.tpl.html",controller:"TemplateCtrl",scope:!0,replace:!0,link:e}}]),angular.module("main.print.tplSort",["common.resources.print","common.resources.print.template"]).controller("TplSortCtrl",["$rootScope","$scope","printResource","templateResource","ModalService",function(e,t,i,n,a){var s=i.getAllTypes(),o=s.length-1,r="",l=i.getTplTypes().onlineMarketing,c=i.getTplTypes().adPrint;t.typeObj=null,t.activeTpl=1,t.getTplList=function(a){switch(a){case 1:i.getTemplateList(1,12),e.tplType=null,t.typeObj=null,t.tagCategory=null,t.activeTpl=1;break;case 2:t.typeObj=l,t.tagCategory=null,t.activeTpl=2,t.activeType="8",r="8",n.getTagCategory(8),t.activeTag="0",i.getTemplateList(1,12,8,0);break;case 3:t.typeObj=c,t.tagCategory=null,t.activeTpl=3,t.activeType="5",r="5",n.getTagCategory(5),t.activeTag="0",i.getTemplateList(1,12,5,0)}},t.getTypeList=function(a){t.activeType=a,i.getTemplateList(1,12,parseInt(a,10)),r=e.tplType=parseInt(a,10),n.getTagCategory(a),t.activeTag="0"},t.$on("TagCategory.get",function(e,i){var n=t.tagCategory=i.list;n.unshift({name:"全部",value:"0"})}),t.getTagList=function(e){t.activeTag=e,i.getTemplateList(1,12,parseInt(r,10),parseInt(e,10))},i.getTemplateList(e.currentTplPage,12,e.tplType),t.$on("templateList.get",function(e,i){var n=t.templateList=i.list,a=n.length;t.tplTotalItems=i.map.count,t.currentTplPage=i.map.pageNo,t.allPageCount=i.map.count,t.toPage=i.map.pageNo;for(var s=0;s<a;s++)n[s].avatar&&0!==n[s].avatar.indexOf("http://")&&(n[s].avatar=PREFIX_FILE_HOST+n[s].avatar)}),t.pageTplChanged=function(n){return n<1||n>t.tplTotalItems/12+1?void a.openMsgDialog({msg:"此页超出范围"}):(i.getTemplateList(n,12,e.tplType),void(e.currentTplPage=n))},t.addTemplate=function(e,t,n,a,s,o){var r={type:e,width:t,height:n,unit:a||"px"};"mm"===a&&$.extend(r,{width:(parseFloat(t)/25.4*300).toFixed(),height:(parseFloat(n)/25.4*300).toFixed()});var l=window.open("","_blank");i.addPrint(r).then(function(e){var t=e.obj;l.location.href="print/template/"+t.id+"/"+o+"/"+s})},t.intoTemplate=function(e,i,n){if(9===e)window.open("print/copyTpl/"+n,"_blank");else for(var a=0;a<o;a++)s[a].value===e&&t.addTemplate(e,s[a].width,s[a].height,s[a].unit,i,n)}}]).directive("eqdTplSort",function(){return{restrict:"E",templateUrl:"main/print/tab/tplSort.tpl.html",controller:"TplSortCtrl",replace:!0}}),angular.module("main.print.works",["main.print.affirmPrint","main.print.saveToH5","main.print.applyTpl","main.print.transfer","common.resources.print","services.dataCache"]).controller("WorksCtrl",["$rootScope","$scope","printResource","ModalService",function(e,t,i,n){var a={};t.printTypes=i.getAllTypes(),e.worksPageSize=12;var s=i.getTplTypes().onlineMarketing,o=i.getTplTypes().adPrint;t.typeOfWorks=null,t.activeWorksType=1,t.getWorksList=function(n){switch(n){case 1:t.typeOfWorks=null,t.activeWorksType=1,e.printType=null,i.getPrintList(e.currentPage,e.worksPageSize,e.printType);break;case 2:t.typeOfWorks=s,t.activeWorksType=2,e.printType="8",i.getPrintList(e.currentPage,e.worksPageSize,e.printType);break;case 3:t.typeOfWorks=o,t.activeWorksType=3,e.printType="5",i.getPrintList(e.currentPage,e.worksPageSize,e.printType)}},i.getPrintList(e.currentPage,e.worksPageSize,e.printType),t.getPrintList=function(t){var n=t?t:null;i.getPrintList(1,e.worksPageSize,n),e.printType=n},t.$on("printList.get",function(e,i){a=t.printList=i.list,t.totalItems=i.map.count,t.currentPage=i.map.pageNo,t.allPageCount=i.map.count,t.toPage=i.map.pageNo}),t.pageChanged=function(a){return a<1||a>t.totalItems/e.worksPageSize+1?void n.openMsgDialog({msg:"此页超出范围"}):(i.getPrintList(a,e.worksPageSize,e.printType),void(e.currentPage=a))},t.$on("print.delete",function(){i.getPrintList(e.currentPage,e.worksPageSize,e.printType)}),t.$on("print.copy",function(){i.getPrintList(1,e.worksPageSize,e.printType)}),t.$on("affirm.apply",function(e,t){for(var i=a.length,n=0;n<i;n++)a[n].id===t&&(a[n].isTpl=2)})}]).directive("eqdWorks",["$rootScope","ModalService","printResource","$modal","i18nNotifications",function(e,t,i,n,a){function s(e){e["delete"]=function(e){t.openConfirmDialog({msg:"确定删除此作品?"},function(){i.deletePrint(e)})},e.copy=function(e){i.copyPrint(e)},e.transfer=function(e){n.open({windowClass:"six-contain",templateUrl:"main/print/dialog/transferPrint.tpl.html",controller:"TransferPrintCtrl",resolve:{printId:function(){return e}}})},e.applyTpl=function(e,t){t||n.open({windowClass:"six-contain",templateUrl:"main/print/dialog/applyTpl.tpl.html",controller:"ApplyTplCtrl",resolve:{printId:function(){return e}}})},e.setPrint=function(e){window.open("print/set/"+e,"_blank")},e.saveToH5=function(e,t){return 9===t?void window.open("print/gifSaveToH5/"+e,"_blank"):void n.open({windowClass:"eight-contain",templateUrl:"main/print/dialog/saveToH5.tpl.html",controller:"SaveToH5Ctrl",resolve:{printId:function(){return e}}})},e.affirmPrint=function(e,t){return 2===t||3===t?void a.pushForCurrentRoute("print.images","notify.success"):void n.open({windowClass:"eight-contain",templateUrl:"main/print/dialog/affirmPrint.tpl.html",controller:"AffirmPrintCtrl",resolve:{printId:function(){return e}}}).result.then(function(t){var n=window.open("","_blank");i.getPngPrint(e,t.shopId,t.pagesId,t.sVersion).then(function(e){var t=e.map;window.localStorage.setItem("print_shop_url",t.url),window.localStorage.setItem("print_shop_data",t.data),n.location.href="main/print/printShop"})})}}return{restrict:"E",templateUrl:"main/print/tab/works.tpl.html",controller:"WorksCtrl",scope:!0,replace:!0,link:s}}]).filter("printType",function(){return function(e){switch(e){case 0:return"自定义";case 1:return"名片";case 2:return"邀请函";case 3:return"贺卡";case 4:return"海报";case 5:return"宣传单";case 6:return"淘宝商品主图";case 7:return"微信公众号首图";case 8:return"长图";case 9:return"GIF动图"}}}).filter("statusFilter",function(){return function(e){switch(e){case 0:return"申请模板";case 1:return"已通过";case 2:case 3:return"申请中";case-1:return"未通过"}}}).filter("statusColorFilter",function(){return function(e){switch(e){case 0:return"#fff";case 1:return"#44cb83";case 2:case 3:return"#08a1ef";case-1:return"#ff5448"}}}).filter("statusBgFilter",function(){return function(e){return 0===e?"#08a1ef":"#eee"}}).filter("isOnline",function(){return function(e){switch(e){case 0:case 6:case 7:case 8:case 9:return!0;case 1:case 2:case 3:case 4:case 5:return!1}}}),angular.module("main.print.shop",[]).controller("PrintShopCtrl",[function(){}]).directive("eqdPrintShop",[function(){function e(e,t,i){var n=window.localStorage.getItem("print_shop_url"),a=window.localStorage.getItem("print_shop_data"),s=$("#order_form"),o=$("#hidden_data");s.attr("action",n),o.attr("value",a),s.submit(),window.localStorage.removeItem("print_shop_url"),window.localStorage.removeItem("print_shop_data")}return{restrict:"A",replace:!0,scope:!0,link:e}}]),angular.module("main.data.uploadData",["services.usercenter","services.i18nNotifications"]),angular.module("main.data.uploadData").controller("uploadDataCtrl",["$rootScope","$scope","uploaderService","ModalService",function(e,t,i,n){t.uploader=i.uploader("8"),t.$on("thumbnailList.update",function(e,i){for(var a=0;a<t.uploader.queue.length;a++)100===t.uploader.queue[a].progress&&(n.openMsgDialog({msg:i,btn:"确定"}),t.$close("true"))}),t.$on("upload.fail",function(e,i){n.openMsgDialog({msg:i,btn:"确定"}),t.$dismiss()}),t.cancel=function(){t.$dismiss()}}]),function(){angular.module("main.userGuide",["usercenter.relAccount"]).controller("userGuideCtrl",["$rootScope","$scope","dateFilter",function(e,t){var i;if(window.localStorage){var n=JSON.parse(localStorage.getItem("loginInfo"));n&&n[e.user.id]?!n.isShow||t.user.checkEmail?t.firstLogin=!1:sessionStorage.getItem("emailGuide")?t.firstLogin=!1:(n.isShow=!0,i=!0,t.firstLogin=!0):(t.firstLogin=!0,n=n||{},n[e.user.id]=1,n.isShow=!0,localStorage.setItem("loginInfo",JSON.stringify(n)))}t.currentGuide="bindEmailGuide",t.showNextGuide=function(){sessionStorage.setItem("emailGuide","true"),i?t.firstLogin=!1:(t.currentGuide="createGuide",t.firstLogin=!0)};var a=0;t.showGuide=function(){"createGuide"===t.currentGuide&&(t.firstLogin=1===++a)},t.isShow=function(){if(window.localStorage){var e=JSON.parse(localStorage.getItem("loginInfo"));e.isShow=!e.isShow,localStorage.setItem("loginInfo",JSON.stringify(e))}}}])}(),angular.module("task.none.list",[]).directive("eqdNoneList",[function(){function e(e,t,i){var n;e.$watch("taskStatus",function(i,a){n=i?"哎呀，此状态下没有对应的任务！":"task-scene"===e.manageType?"抱歉，目前还没有场景！":"抱歉，目前还没有任务！",t.find(".description").html(n)})}return{restrict:"EA",scope:{taskStatus:"=",manageType:"@"},templateUrl:"orderTask/common/emptyList.html",replace:!0,link:e}}]),angular.module("order.task.template",[]),angular.module("order.task.template").controller("orderTemplateController",["$scope","orderService",function(e,t){function i(){var e=0!==s.isOfficialTask;t.getOrderTemplate(s.id,e)}function n(){e.typeText=t.showOrderType(s.taskType)}function a(){e.payTypeText=t.showOrderPayType(s.promotionType)}var s=e.orderDetail;i(),n(),a(),e.$on("template.get.success",function(t,i){e.orderTpl=i.orderTpl,e.count=i.count,e.showTpl=!0,e.hideDelBtn=!0,e.unTransform=!0})}]),angular.module("filters.order.task",[]).filter("orderTypeFilter",function(){return function(e){switch(e){case 1:return"单页任务模板嵌入推广"}}}).filter("orderStatusFilter",function(){return function(e){switch(e){case 1:return"待付款";case 2:return"审核中";case 3:return"推广中";case 4:return"审核失败";case 5:return"已结束"}}}),angular.module("order.task.panel",[]),angular.module("order.task.panel").directive("panelDirective",function(){return{restrict:"EA",templateUrl:"orderTask/common/panel.html"}}),angular.module("order.task.panelEffect",[]),angular.module("order.task.panelEffect").directive("panelEffectDirective",function(){function e(e,t,i){e.$on("get.pvs.receivers",function(t,i){e.totalPvs=i.pv,e.receiverCount=i.receiverCount})}return{restrict:"EA",scope:{orderDetail:"="},templateUrl:"orderTask/common/panelEffect.html",link:e}}),angular.module("order.confirmOrder",[]),angular.module("order.confirmOrder").controller("ConfirmOrderController",["$scope","$routeParams","orderService","$location","ModalService",function(e,t,i,n,a){e.isActive="order",e.step=2,e.$on("template.get.success",function(t,i){e.orderCount=i.count,e.pageTpl=i.orderTpl}),i.getOrderDetail(t.orderId).then(function(a){a.data.success?(e.order=a.data.obj,e.isOfficial=1===e.order.isOfficialTask,e.disable=1!==e.order.status,i.getOrderTemplate(t.orderId,e.isOfficial)):n.path("order/new")},function(){n.path("order/new")}),e.confirm=function(){i.commitOrder(e.order.id).then(function(t){t.data.success&&200===t.data.code?n.path("order/createSuc/"+e.order.id):a.openMsgDialog({msg:t.data.msg})})}}]),angular.module("order.createSuc",[]),angular.module("order.createSuc").controller("CreateSucController",["$scope","orderService","$routeParams",function(e,t,i){e.isActive="order",e.isOfficial=!0,e.step=3,t.getOrderDetail(i.orderId).then(function(t){t.data.success?(e.order=t.data.obj,e.isOfficial=e.order.isOfficialTask):$location.path("order/new")},function(){$location.path("order/new")})}]),angular.module("order.newOrder",["services.scene","order.select.pageTpl"]),angular.module("order.newOrder").controller("NewOrderController",["$scope","$modal","$routeParams","$location","orderService","ModalService","sceneService",function(e,t,i,n,a,s,o){function r(t){e.isOfficial=t,e.order={taskName:"",target:1e3,budget:50,taskType:1,promotionType:1,pageIds:[]},e.pvTarget=1,e.startDate=e.minDate,e.endDate=new Date(e.minDate.getTime()+6048e5),t&&e.pvTypes.splice(0,0,{name:"上不封顶",value:0})}e.isActive="order",e.valida=!0,e.errText="任务名称不能大于80个字符或40个汉字","official"===i.orderId?e.minDate=new Date:e.minDate=new Date(Date.now()+1728e5),e.datePlaceholder=eqShow.DateFormat(e.minDate,"yyyy.MM.dd"),e.pageSize=4;var l=[],c=[];e.pvTypes=[{value:1,name:1},{value:5,name:5},{value:10,name:10},{value:20,name:20},{value:50,name:50},{value:100,name:100}],e.$on("template.get.success",function(t,i){if(angular.isArray(i.orderTpl)){l=i.orderTpl;for(var n=0;n<l.length;n++)c.push(l[n].id);e.pageChanged(1)}else e.myPageTpls=[i.orderTpl],c=[i.orderTpl.id]}),i.orderId?"official"===i.orderId?r(!0):a.getOrderDetail(i.orderId).then(function(t){e.order=t.data.obj,e.pvTarget=e.order.target/1e3,e.isOfficial=1===e.order.isOfficialTask,e.startDate=new Date(e.order.startDate),e.order.endDate&&(e.endDate=new Date(e.order.endDate)),e.longTime=!e.order.endDate,a.getOrderTemplate(i.orderId,e.isOfficial,1,100),e.isOfficial&&e.pvTypes.splice(0,0,{name:"上不封顶",value:0})},function(){r(!1)}):r(!1),e.order&&a.getOrderPrices().then(function(t){e.order.price=Number(t.data.map.price)}),e.selectTpl=function(){t.open({windowClass:"console page_tpl_console",templateUrl:"orderTask/order/create/selectPageTpl.html",controller:"SelectPageTplController",resolve:{tpls:function(){return $.extend(!0,[],l)},tplIds:function(){return $.extend(!0,[],c)},isOfficialTask:function(){return e.isOfficial}}}).result.then(function(t){e.isOfficial?(l=t.pageTpls,e.totalItems=l.length,e.pageChanged(1)):e.myPageTpls=t.pageTpls,c=t.ids,e.valida||"tpl"!==e.validaitem||(e.valida=!0,e.validaitem="")})},e.changeTarget=function(){""===e.pvTarget&&(e.pvTarget=1),e.pvTarget>1e5&&(e.pvTarget=1e5),e.order.price||(e.order.price=20),e.pvTarget=Number(e.pvTarget),e.pvTarget=isNaN(e.pvTarget)?1:e.pvTarget,e.pvTarget<0&&(e.pvTarget=1),0!==e.pvTarget||e.isOfficial||(e.pvTarget=1),e.order.target=1e3*e.pvTarget,e.order.budget=Math.ceil(e.order.target/e.order.price)},e.publishTask=function(){return e.valida?e.order.taskName?c.length?(e.startDate||(e.order.startDate=e.minDate),e.endDate||e.longTime||(e.endDate=e.startDate),e.order.startDate=eqShow.DateFormat(e.startDate,"yyyy-MM-dd"),e.longTime?e.order.endDate="":e.order.endDate=eqShow.DateFormat(e.endDate,"yyyy-MM-dd"),e.order.pageIds=c.join(),void t.open({windowClass:"console agreement_console",templateUrl:"orderTask/order/create/agreement.html",controller:"MessageDialogCtrl",resolve:{msgObj:function(){return{}}}}).result.then(function(){e.isOfficial?a.saveOfficialOrder(e.order).then(function(e){e.data.success?n.path("/order/confirm/"+e.data.map.orderId):s.openMsgDialog({msg:e.data.msg})}):a.saveOrder(e.order).then(function(e){e.data.success?n.path("/order/confirm/"+e.data.map.orderId):s.openMsgDialog({msg:e.data.msg})})})):(e.valida=!1,e.validaitem="tpl",e.errText="请选择内容",void e.goTop()):(e.valida=!1,e.validaitem="name",e.errText="任务名称不能为空",void e.goTop()):void e.goTop()},e.createTpl=function(){var e=window.open();o.createBlankScene(null,"101",2).then(function(t){var i=n.absUrl().replace(n.path(),"")+"/scene/create/"+t.data.obj+"?pageId=1";e.location=i})},e.pageChanged=function(t){return t<1||t>e.totalItems/e.pageSize+1?void s.openMsgDialog({msg:"此页超出范围"}):(e.toPage=t,e.totalItems=l.length,e.myPageTpls=l.slice((t-1)*e.pageSize,t*e.pageSize),void(0===e.myPageTpls.length&&1!==t&&e.pageChanged(t-1)))},e.deltpl=function(t){s.openConfirmDialog({msg:"您确定删除该任务内容吗？"},function(){if(e.isOfficial){var i=c.indexOf(t);c.splice(i,1),l.splice(i,1),e.pageChanged(e.toPage)}else e.order.pageIds=[],e.myPageTpls=[],l=[],c=[]})},e.validaForm=function(){return eqShow.getCharactersLen(e.order.taskName)>80?(e.valida=!1,e.validaitem="name",void(e.errText="任务名称不能大于80个字符或40个汉字")):e.order.description&&eqShow.getCharactersLen(e.order.description)>800?(e.valida=!1,e.validaitem="des",void(e.errText="其他需求描述不能大于800个字符或400个汉字！")):(e.valida=!0,void(e.validaitem=""))}}]),angular.module("order.select.pageTpl",["services.pagetpl"]),angular.module("order.select.pageTpl").controller("SelectPageTplController",["$scope","pageTplService","tplIds","tpls","isOfficialTask","$rootScope","sceneService","$location",function(e,t,i,n,a,s,o,r){function l(){if(!p)if(s.mySceneId)p=s.mySceneId;else{var i=JSON.parse(s.user.property);i&&i.myTplId&&(p=s.mySceneId=i.myTplId)}p&&t.getCustomPageTpls({id:p,pageNo:e.currentPage,pageSize:e.pageSize}).then(function(t){var i=t.data.list;e.totalItems=t.data.map.count,e.toPage=e.currentPage;for(var n=0;n<i.length;n++){var a=d.indexOf(i[n].id);a>-1&&(i[n].selected=!0,c[a]=i[n])}e.myPageTpls=t.data.list})}e.pageSize=10,e.currentPage=e.toPage=1;var c=n,d=i;e.tplLength=i.length,e.isOfficialTask=a;var p=null;l(),e.selectTpl=function(t){if(a)if(t.selected)c.push(t),d.push(t.id);else{var i=d.indexOf(t.id);c.splice(i,1),d.splice(i,1)}else c.length?t.id===c[0].id?(c[0].selected=!1,c.splice(0),d.splice(0)):(c[0].selected=!1,c[0]=t,d[0]=t.id):(c[0]=t,d[0]=t.id);e.tplLength=c.length},e.pageChanged=function(t){return t<1||t>e.totalItems/10+1?void ModalService.openMsgDialog({msg:"此页超出范围"}):(e.currentPage=t,void l())},e.ok=function(){e.$close({pageTpls:c,ids:d})},e.createTpl=function(){var e=window.open();o.createBlankScene(null,"101",2).then(function(t){var i=r.absUrl().replace(r.path(),"")+"/scene/create/"+t.data.obj+"?pageId=1";e.location=i})}}]),angular.module("order.detail",["order.detail.content","order.detail.effect","services.order","services.effect"]),angular.module("order.detail").controller("orderDetailController",["$scope","$location","$routeParams","orderService","effectService",function(e,t,i,n,a){function s(){e.detailPromise=n.getOrderDetail(l),e.detailPromise.then(function(t){200===t.data.code&&(r=e.orderDetail=t.data.obj,o())})}function o(){var e=eqShow.DateFormat(new Date(r.startDate),"yyyyMMdd"),t=eqShow.DateFormat(new Date(r.endDate),"yyyyMMdd");a.getOrderTotalPvsAndReceivers(r.id,e,t)}e.tabid=i.detailType;var r,l=i.orderId;e.switchTab=function(i){e.tabid=i,t.path("order/detail/"+i+"/"+l,!1)},s()}]),angular.module("order.detail.content",["services.scene","services.order","filters.transformDate"]),angular.module("order.detail.content").controller("orderDetailContentController",["$scope","sceneService","orderService",function(e,t,i){function n(){e.statusText=i.showOrderStatus(a.status)}var a;e.detailPromise.then(function(t){a=e.orderDetail=t.data.obj,n()}),e.cancelOrder=function(){i.cancelOrder(a.id)},e.$on("cancel.order",function(){e.orderDetail.status=5,e.statusText="已结束",e.orderDetail.isCancelTask=1}),e.extractBudget=function(){i.extractBudget(a.id,a.remainBudget,a.endDate)},e.$on("budget.extract.success",function(t){e.orderDetail.isExtractBudget=1})}]),angular.module("order.detail.effect",["ot.bar.chart","ot.map.chart","services.effect"]),angular.module("order.detail.effect").controller("orderDetailEffectController",["$scope","effectService",function(e,t){function i(){t.getOrderDailyPv(s.id,s.startDate,s.endDate)}function n(t,i){e.barChartOption={tooltip:{},xAxis:[{type:"category",name:"日期",nameTextStyle:{color:"#76838f"},axisLine:{lineStyle:{color:"#76838f"}},data:t}],color:["#59c7f9"],yAxis:[{type:"value",name:"PV",nameTextStyle:{color:"#76838f"},axisLine:{lineStyle:{color:"#76838f"}},min:0,max:300,interval:30,axisLabel:{textStyle:{color:"#76838f"},formatter:"{value}"}}],series:[{name:"PV",type:"bar",data:i}]}}function a(){var e=eqShow.DateFormat(new Date(s.startDate),"yyyyMMdd"),i=eqShow.DateFormat(new Date(s.endDate),"yyyyMMdd");t.getOrderRegionPv(s.id,e,i)}var s;e.detailPromise.then(function(t){s=e.orderDetail=t.data.obj,i(),a()}),e.$on("get.pvs.daily",function(e,t){n(t.dateList,t.pvList)}),e.$on("get.pv.region",function(t,i){i=[{name:"北京",value:8},{name:"广东",value:8},{name:"河南",value:10},{name:"上海",value:2}],e.mapChartOption={title:{text:"场景PV",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left",data:["PV"]},visualMap:{min:0,max:2500,left:"left",top:"bottom",text:["高","低"],calculable:!0,inRange:{color:["rgb(187, 232, 252)","rgb(2, 119, 189)"]}},itemStyle:{normal:{areaColor:"rgb(187, 232, 252)",borderColor:"#fff",borderWidth:1},emphasis:{areaColor:"rgb(89, 199, 249)"}},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[{name:"iphone3",type:"map",mapType:"china",roam:!1,label:{normal:{show:!0},emphasis:{show:!0}},data:i}]}})}]),angular.module("order.list",["services.order","filters.transformDate","order.task.preview"]).controller("OrderListCtrl",["$scope","ModalService","orderService",function(e,t,i){e.page={},e.pageSize=5,e.orderStatus=null;var n={};e.getOrderList=function(t,a,s){n={status:t,pageNo:a||1,pageSize:s||5},e.orderStatus=t,i.getOrderList(n).then(function(t){t.data.success&&(e.orderList=t.data.list,e.totalItems=t.data.map.count,e.toPage=e.page.currentPage=t.data.map.pageNo)})},e.getOrderList(null,1,e.pageSize),e.pageChanged=function(i){return i<1||i>e.totalItems/e.pageSize+1?void t.openMsgDialog({msg:"此页超出范围"}):void e.getOrderList(e.orderStatus,i)};var a;e.cancelOrder=function(e,t){a=t,i.cancelOrder(e.id)},e.$on("cancel.order",function(){e.orderList[a].status=5,e.orderList[a].statusText="已结束",e.orderList[a].isCancelTask=1});var s;e.extractBudget=function(e,t,n,a){s=a,i.extractBudget(e,t,n)},e.$on("budget.extract.success",function(){e.orderList[s].isExtractBudget=1}),e.deleteOrder=function(n){t.openConfirmDialog({msg:"确定删除此订单?<div>取消后您托管的秀点自动返还到您的账户</div>"},function(){i.deleteOrder(n.id).then(function(i){i.data.success?e.getOrderList(e.orderStatus,1,5):t.openMsgDialog({msg:i.data.msg})})})}}]),angular.module("order.list").directive("eqdOrders",[function(){return{restrict:"EA",scope:!0,templateUrl:"orderTask/order/list/orderList.tpl.html",controller:"OrderListCtrl",replace:!0}}]),angular.module("order",["order.detail","order.list","order.newOrder","order.confirmOrder","order.createSuc","services.order"]),angular.module("order.task",["order","task","order.task.preview","task.none.list","order.task.template","order.task.panel","filters.order.task","order.task.panelEffect"]).controller("OrderTaskCtrl",["$scope","$routeParams","$location","orderService",function(e,t,i,n){e.manageType=t.tag||"order",e.switchTag=function(t){e.manageType=t,i.path("/list/"+t,!1)},n.getCountNum(),e.$on("count.num",function(t,i){e.reject=i.reject,e.noPromotion=i.noPromotion,e.noPayMent=i.noPayMent})}]),angular.module("task.detail.content",["services.order"]),angular.module("task.detail.content").controller("taskDetailContentController",["$scope","orderService","taskService",function(e,t,i){function n(){t.getOrderDetail(s.taskId).then(function(t){e.orderDetail=t.data.obj})}function a(){e.statusText=i.showTaskStatus(s.status)}var s;e.taskDetailPromise.then(function(t){s=e.taskDetail=t.data.obj,n(),a()}),e.extractEarnings=function(){i.getIncome(s.id)},e.$on("getIncome.success",function(){e.taskDetail.isExtractEarnings=1}),e.promoteTask=function(){i.promoteTask(s.id)}}]),angular.module("task.detail.effect",["ot.bar.chart","ot.map.chart"]),angular.module("task.detail.effect").controller("taskDetailEffectController",["$scope",function(e){e.option={tooltip:{},xAxis:[{type:"category",data:["7月1日","7月2日","7月3日","7月4日","7月5日","7月6日","7月7日","7月8日","7月9日","7月10日","7月11日","7月12日"]}],color:["#59c7f9","#48d5b2"],yAxis:[{type:"value",name:"PV",min:0,max:300,interval:30,axisLabel:{formatter:"{value} W"}},{type:"value",name:"秀点",min:0,max:1e3,interval:100}],series:[{name:"PV",type:"bar",data:[100,80,120,106,110,20,75,150,200,80,70,300]},{name:"秀点",type:"line",yAxisIndex:1,data:[200,220,380,400,405,450,500,533,600,610,620,630]}]}}]),angular.module("task.detail",["task.detail.content","task.detail.effect","services.task"]),angular.module("task.detail").controller("taskDetailController",["$scope","$location","$routeParams","taskService",function(e,t,i,n){function a(){e.taskDetailPromise=n.getTaskDetail(s)}e.tabid=i.detailType;var s=i.taskId;e.switchTab=function(i){e.tabid=i,t.path("task/detail/"+i+"/"+s,!1)},a()}]),angular.module("task.select.scene",[]).controller("SelectSceneCtrl",["$scope","sceneService","MineService","ModalService","sceneService",function(e,t,i,n,t){var a=e.scenePicker=[];e.page={},e.pageNo=1,e.pageSize=10,e.page.currentPage=1,e.getScenes=function(i,n){t.getAvailableScene(i,n).then(function(t){a.length=0;var i=t.list,n=t.map;e.totalItems=n.count,e.page.currentPage=n.pageNo,e.toPage=n.pageNo,$.each(i,function(e,t){a.push({id:t.id,name:t.name,cover:t.cover,checked:!1})})})},e.getScenes(e.pageNo,e.pageSize),e.pageChanged=function(t){return t<1||t>e.totalItems/e.pageSize+1?void n.openMsgDialog({msg:"此页超出范围"}):(e.getScenes(t,e.pageSize),void(e.page.currentPage=t))},e.selectItem=function(e){a.map(function(t){return t.id===e?$.extend(t,{checked:!t.checked}):$.extend(t,{checked:!1})})},e.ok=function(){var t=a.filter(function(e){return e.checked?e:null});t.length?e.$close(t[0].id):n.openMsgDialog({msg:"未选择任何场景"})}}]),angular.module("task.list",["services.task"]).controller("TaskListCtrl",["$scope","ModalService","$modal","taskService","$location",function(e,t,i,n,a){function s(){return sessionStorage.getItem("task.income.rule")}function o(e,t){return 5!==e&&0===t?"1":5!==e&&t>0?"2":"3"}e.page={},e.pageNo=1,e.pageSize=5,e.totalTasks=2,e.page.currentPage=1,e.taskStatus="";var r=e.taskObj={list:[]};e.getTaskList=function(t,i,a){n.getTaskList(t,i,a).then(function(i){var n=i.map;r.list=i.list,e.totalTasks=n.count,e.page.currentPage=n.pageNo,e.toPage=n.pageNo,e.taskStatus=t})},e.getTaskList(e.taskStatus,e.pageNo,e.pageSize),e.pageChanged=function(i){return i<1||i>e.totalItems/e.pageSize+1?void t.openMsgDialog({msg:"此页超出范围"}):(e.getTaskList(e.taskStatus,i,e.pageSize),void(e.page.currentPage=i))},e.isCloseRule=s(),e.switchRule=function(){e.isCloseRule=!0,sessionStorage.setItem("task.income.rule",!0)},e.judgeStatus=function(e,t){return o(e,t)},e.getIncome=function(e,t){n.getIncome(e,t)},e.$on("getIncome.success",function(e,t){r.list.map(function(e){return e.id===t?$.extend(e,{isExtractEarnings:1}):e})}),e.promoteTask=function(e){n.promoteTask(e)},e.deleteTask=function(e){t.openConfirmDialog({msg:"确定删除此任务?"},function(){n.deleteTask(e).then(function(i){i.data.success?r.list=r.list.filter(function(t){return t.id!==e}):t.openMsgDialog({msg:i.data.msg})})})},e.isShowGetIncomeBtn=function(e){return 1!==e.isExtractEarnings&&"1"!==o(e.status,e.sceneTotal)&&(1==e.isOfficialTask||5===e.status&&1!==e.isOfficialTask)}}]),angular.module("task.list").directive("eqdTask",[function(){return{restrict:"EA",scope:!0,templateUrl:"orderTask/task/list/taskList.html",controller:"TaskListCtrl",replace:!0}}]),angular.module("task",["task.list","task.detail"]),angular.module("applyCompany",["services.usercenter","services.i18nNotifications"]),angular.module("applyCompany").controller("ApplyCompanyCtrl",["$rootScope","$scope","security","$sce","usercenterService","i18nNotifications","$routeParams","$timeout","validateService","$location",function(e,t,i,n,a,s,o,r,l,c){function d(){0===u?(t.isCodeAccessiable=!1,t.codeTip="",u=60):(t.isCodeAccessiable=!0,t.codeTip="重新发送("+u+")",r(function(){u--,d()},1e3))}config.product="popup";var p="http://api.geetest.com/get.php?callback=initCaptcha&time="+(new Date).getTime();t.validateCodeUrl=n.trustAsResourceUrl(p),t.companyInfo={id:i.currentUser.id},t.userMobile=i.currentUser.checkPhone,t.checkName=function(e){return e.name?countCharacters(e.name)>40?(t.nameError="企业名称不能超过40个字符",!1):(t.nameError="",!0):(t.nameError="请填写企业名称",!1)},t.checkEmail=function(e){var i=l.checkEmail(e.email);return t.emailError=i,!i},t.checkcontacts=function(e){return e.contacts?countCharacters(e.contacts)>30?(t.contactsError="联系人不能超过30个字符",!1):(t.contactsError="",!0):(t.contactsError="请填写联系人",!1)},t.checkAddress=function(e){return e.address?countCharacters(e.address)>50?(t.addressError="联系地址不能超过50个字符",!1):(t.addressError="",!0):(t.addressError="请填写联系地址",!1);
},t.checkCode=function(e){return e.code?(t.codeError="",!0):(t.codeError="请输入手机验证码",!1)},t.getImageCode=function(){challenge&&validate&&seccode&&t.getCode()},t.getCode=function(){var e=t.companyInfo;if(!e.mobile)return challenge=null,validate=null,seccode=null,t.telError="请填写手机号码",!1;t.telError="";var i={phone:e.mobile,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};a.companyMobile(i).then(function(e){challenge="",validate="",seccode="",e.data.success?d():t.telError=e.data.msg})};var u=60;t.checkFormFormat=function(e){return!!(t.checkName(e)&&t.checkEmail(e)&&t.checkcontacts(e)&&t.checkAddress(e))&&!(1!==t.userMobile&&!t.checkCode(e))},t.upgradeCompanyMessage=function(n){var o=!0;t.checkFormFormat(n)&&a.saveCompanyInfo(n,o).then(function(a){if(a.data.success)if(i.currentUser.type=2,e.$broadcast("companyState"),t.changeLocation)s.pushForCurrentRoute("account.success","notify.success"),e.$broadcast("upgrade",n.mobile);else if(localStorage.getItem("upgradeUrl")){var o=localStorage.getItem("upgradeUrl");localStorage.removeItem("upgradeUrl"),c.path(o)}else e.$broadcast("regSuccess");else t.codeError=a.data.msg})}}]),angular.module("regGuide",["services.usercenter","services.i18nNotifications","applyCompany","services.guide"]),angular.module("regGuide").controller("RegGuideCtrl",["$rootScope","$scope","security","$sce","usercenterService","i18nNotifications","$routeParams","$timeout","guideService","upgradeAccountService",function(e,t,i,n,a,s,o,r,l,c){t.type=o.type,"person"===t.type&&l.newVersionFrameFn(),t.verson=[{name:"企业基础版",price:"3000",time:"元/每年",decoration:"享受企业专属模板<br />享受企业专属CDN加速<br />赠送10个企业子账号<br />赠送10次去Logo底标<br />访问数据分析",type:"7"},{name:"企业标准版",price:"6800",time:"元/每年",decoration:"享受企业专属模板<br />享受企业专属CDN加速<br />赠送50个企业子账号<br />赠送50次去Logo底标<br />访问及分享数据分析<br />访客画像分析",type:"8"},{name:"企业高级版",price:"15600",time:"元/每年",decoration:"享受企业专属模板<br />享受企业专属CDN加速<br />赠送100个企业子账号<br />赠送200次去Logo底标<br />访问及分享数据分析<br />访客画像分析<br />传播层级分析",type:"9"}],t.$on("regSuccess",function(){t.regSuccess=!0,l.newVersionFrameFn()}),t.upgradeCompany=function(e){c.upgradeAccountFunc(e)}}]).directive("eqdRegCompany",[function(){return{restrict:"AE",templateUrl:"regSuccess/console/applyComMes.tpl.html",controller:"ApplyCompanyCtrl",scope:{changeLocation:"="}}}]),angular.module("scene.buy.sample",[]),angular.module("scene.buy.sample").controller("SceneBuySample",["$scope","$rootScope","sceneService","buySampleObject","ModalService",function(e,t,i,n,a){e.modal=n,e.modal.bFlagMember&&i.getUserNum(e.modal.scene).then(function(t){200===t.data.code?t.data.obj>=0&&(e.modal.sampleCount=t.data.obj):a.openMsgDialog({msg:t.data.msg})}),e.confirm=function(){if(e.modal.sampleType=parseInt(e.modal.sampleType,10),1===e.modal.sampleType){if(0===e.modal.sampleCount)return void a.openMsgDialog({msg:"当前免费使用次数不足,请选择其他方式使用"})}else if(e.modal.tplPrice>e.modal.userXd)return void a.openConfirmDialog({msg:"秀点余额不足",confirmName:"立即购买",cancelName:"取消"},function(){t.buyXdQ()});e.$close(e.modal.sampleType)},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create.console",["scene.create.console.bg","scene.create.console.map","scene.create.console.input","scene.create.console.radio.checkbox","scene.create.console.rating","scene.create.console.counter","scene.create.console.linkComponent","scene.create.console.button","scene.create.console.setting","scene.create.console.tel","scene.create.console.pictures1","scene.create.console.sound","scene.create.console.soundComponent","scene.create.console.micro","scene.create.console.link","scene.create.console.video","scene.create.console.category","scene.create.console.imageCrop","scene.create.console.cropImage","scene.create.console.cropSound","scene.pageeffect.console","scene.create.console.scene-setting-component","scene.create.console.shape","scene.create.console.randomevent","scene.create.console.statistics","scene.create.console.font","eqx.colorpicker","scene.create.console.weChatShareModal"]),angular.module("scene.create.console").controller("ConsoleCtrl",["$scope",function(){}]),angular.module("scene.create.console").directive("autofocus",function(){return function(e,t){setTimeout(function(){t.focus().select()},400)}}).directive("checkCount",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,i,n){var a=parseInt(i.checkCount,10);n.$viewChangeListeners.push(function(){if(countCharacters(n.$modelValue)>a){var e=n.$modelValue.replace(/[^\x00-\xff]/g,"xx"),t=e.substring(0,a).replace(/xx/g,"中").length;n.$setViewValue(n.$modelValue.substring(0,t)),n.$render()}})}}}),angular.module("scene.create.console.setting.anim",["app.directives.uislider","app.directives.limitInput"]),angular.module("scene.create.console.setting.anim").controller("AnimConsoleCtrl",["$scope","$rootScope","sceneService","security","ModalService",function(e,t,i,n,a){function s(i,n){var a={anim:i,animClasses:u,count:n,elemId:e.elemDef.id,elemDef:e.elemDef};t.$broadcast("previewCurrentChange",a)}function o(i,n){var a={animations:i,animClasses:n,count:p,elemId:e.elemDef.id,elemDef:e.elemDef};t.$broadcast("previewAllChanges",a)}var r,l,c=e.elemDef=i.currentElemDef;if(c.properties.anim)for(r=0;r<c.properties.anim.length;r++)33!==c.properties.anim[r].type&&"33"!==c.properties.anim[r].type||(c.properties.anim[r].type=0),32!==c.properties.anim[r].type&&"32"!==c.properties.anim[r].type||(c.properties.anim[r].type=10);e.animations=[],e.types=[],e.directions=[];var d,p,u=[];e.animTypeEnum=[{id:-1,name:"无"},{id:"typer",name:"文本：打字机",cat:"特殊"},{id:0,name:"淡入",cat:"进入"},{id:1,name:"移入",cat:"进入"},{id:2,name:"弹入",cat:"进入"},{id:20,name:"翻转进入",cat:"进入"},{id:3,name:"中心弹入",cat:"进入"},{id:4,name:"中心放大",cat:"进入"},{id:12,name:"翻滚进入",cat:"进入"},{id:24,name:"翻开进入",cat:"进入"},{id:13,name:"光速进入",cat:"进入"},{id:26,name:"魔幻进入",cat:"进入"},{id:27,name:"缩小进入",cat:"进入"},{id:31,name:"旋转进入",cat:"进入"},{id:6,name:"摇摆",cat:"强调"},{id:5,name:"抖动",cat:"强调"},{id:7,name:"旋转",cat:"强调"},{id:8,name:"翻转",cat:"强调"},{id:9,name:"悬摆",cat:"强调"},{id:23,name:"闪烁",cat:"强调"},{id:29,name:"下滑",cat:"强调"},{id:30,name:"上滑",cat:"强调"},{id:21,name:"放大抖动",cat:"强调"},{id:22,name:"倾斜摆动",cat:"强调"},{id:10,name:"淡出",cat:"退出"},{id:17,name:"移出",cat:"退出"},{id:19,name:"弹出",cat:"退出"},{id:11,name:"翻转消失",cat:"退出"},{id:14,name:"中心消失",cat:"退出"},{id:18,name:"中心缩小",cat:"退出"},{id:15,name:"翻滚退出",cat:"退出"},{id:25,name:"翻开消失",cat:"退出"},{id:16,name:"光速退出",cat:"退出"},{id:28,name:"放大退出",cat:"退出"}];var h=[23,24,25];if(!n.isAllowToAccess(n.accessDef.COMP_ANIMATION))for(r=0;r<e.animTypeEnum.length;r++)for(l=0;l<h.length;l++)e.animTypeEnum[r].id===h[l]&&(e.animTypeEnum.splice(r,1),r--);if(e.animDirectionEnum=[{id:0,name:"从左向右"},{id:1,name:"从上到下"},{id:2,name:"从右向左"},{id:3,name:"从下到上"}],c.properties.anim)if(c.properties.anim instanceof Array){if(c.properties.anim.length)for(r=0;r<c.properties.anim.length;r++)if(null!==c.properties.anim[r].type&&c.properties.anim[r].type!==-1&&"-1"!==c.properties.anim[r].type){for(e.animations.push(c.properties.anim[r]),l=0,tlen=e.animTypeEnum.length;l<tlen;l++)e.animations[r].type===e.animTypeEnum[l].id&&(e.types[r]=e.animTypeEnum[l]);for(l=0,tlen=e.animDirectionEnum.length;l<tlen;l++)e.animations[r].direction===e.animDirectionEnum[l].id&&(e.directions[r]=e.animDirectionEnum[l])}else c.properties.anim.splice(r,1),r--}else{for(r=0;r<e.animTypeEnum.length;r++)e.animTypeEnum[r].id===c.properties.anim.type&&(e.types[0]=e.animTypeEnum[r]);null!==c.properties.anim.direction?e.directions[0]=e.animDirectionEnum[c.properties.anim.direction]:e.directions[0]=e.animDirectionEnum[0],c.properties.anim.duration=parseFloat(c.properties.anim.duration),c.properties.anim.delay=parseFloat(c.properties.anim.delay),c.properties.anim.countNum=parseInt(c.properties.anim.countNum,10)||1,e.animations.push(c.properties.anim)}c.properties||(c.properties={});var g={type:null,direction:null,duration:2,delay:0,countNum:1,interval:0,count:null};e.addAnim=function(t){if(!t.originalEvent._constructed){var i=angular.copy(g);i.type=e.animTypeEnum[0].id,i.direction=e.animDirectionEnum[0].id,e.animations.push(i);var n=e.animations.length;e.types[n-1]=e.animTypeEnum[0],e.directions[n-1]=e.animDirectionEnum[0]}},e.removeAnim=function(t,i){i.stopPropagation(),e.animations.splice(t,1),e.types.splice(t,1),e.directions.splice(t,1)},e.clear=function(){e.animations=[]},e.$watch("animations",function(t,i){t!==i&&(c.properties.anim=e.animations)},!0),e.$watch("types",function(t,i){if(t&&t!==i)for(var n=0;n<t.length;n++)i[n]&&t[n].id!==i[n].id&&s(e.animations[n],n)},!0),e.$watch("directions",function(t,i){if(t&&t!==i)for(var n=0;n<t.length;n++)i[n]&&t[n].id!==i[n].id&&s(e.animations[n],n)},!0),e.previewAnim=function(t){if(!t.originalEvent||!t.originalEvent._constructed){for(var i=angular.copy(e.animations),n=[],a=[],s=0;s<i.length;s++)null!==i[s].type&&i[s].type!==-1&&"-1"!==i[s].type?(n.push(i[s]),a[s]=eqxCommon.convertType(i[s])):(i.splice(s,1),s--);p=0,o(n,a)}},e.$on("formatAnim",function(t,i){i&&(e.animations=i,e.previewAnim(t))}),e.changeAnimation=function(t,i){return"typer"===t.type&&2!==e.elemDef.type&&"2"!==e.elemDef.type?(a.openMsgDialog({msg:"当前选择仅适用于文本组件！"}),e.types[i]=e.animTypeEnum[0],void(t.type=-1)):(d=eqxCommon.convertType(t),void(u[i]=d))}}]),angular.module("scene.create.console.bg",["services.file","app.directives.responsiveImage","app.directives.rightclick","services.file.upload","services.i18nNotifications","app.directives.autoclose","services.account.type"]),angular.module("scene.create.console.bg").controller("BgConsoleCtrl",["$scope","$timeout","$rootScope","$interval","$modal","ModalService","sceneService","fileService","localizedMessages","obj","uploaderService","i18nNotifications","security","dataCacheService","storageService","accountTypeService",function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,g,m){function f(){e.$watch("imgList",function(t){for(var i=0;i<t.length;i++){if(t[i].selected)return void(e.mangeObj.manageAll=!0);e.mangeObj.manageAll=!1}},!0)}function v(){e.systemImages=!1,e.userTagId="",e.sysCatId="",r.getUserFiles1(1,k,b,null,e.userTagId)}var b=e.fileType=1;e.imgType=c.fileType,e.type=c.type,e.dataHintPrev=1===m.accountType||2===m.accountType?"大小不超过3M，":"";var y,w=u.currentUser.id;c.elemDef&&(e.bFlagType=c.elemDef.type),3!==e.bFlagType&&"3"!==e.bFlagType&&(c.longPage=1);var x=1,k=e.pageSize=18;e.currentPage=1,e.systemImages=!0,e.isAllowedHistory=u.isAllowToAccess(u.accessDef.USERCENTER_HISTORY),e.toPage=1,e.resourceType="jpg,gif,png,jpeg";var S=0,T="/auto-orient/thumbnail/115x115/strip";e.mangeObj={manageAll:!1},e.showObj={showGroup:!1},"p"!==e.type&&"n"!==e.type||(e.mangeObj.manageAll=!0);var C;[2,21].indexOf(u.currentUser.type)!==-1?[6,7,8,9].indexOf(u.currentUser.memberType)!==-1?(C=u.currentUser.memberType,""+C=="6"||""+C=="7"?S=7:""+C=="8"?S=15:""+C=="9"&&(S=30)):[1,2,3,4].indexOf(u.currentUser.memberType)!==-1&&(S=3):[5,51].indexOf(u.currentUser.type)!==-1&&(S=3),e.switchToSystemImages=function(t){e.systemImages="true"===t,"false"===t&&(e.sysTagId="")};var E=function(e){r.getSysCategory(e)},P=function(e,t,i,n,a){r.getSystemFiles1(e,t,i,n,a)};if(e.getSystemFiles=function(){e.mangeObj.manageAll=!1,window.localStorage&&(1===e.fileType||"1"===e.fileType?localStorage.setItem("photoTag",""):localStorage.setItem("backgroundTag","")),e.userTagId="",e.saveTagId=0,3===e.bFlagType||"3"===e.bFlagType?e.sysCatId="1301":e.sysCatId="0",e.sysTagList=[],e.sysTagId="",L=[],P(x,k,b,e.sysCatId),r.getSysTagByCatId(e.sysCatId)},e.getHistory=function(){e.userTagId="history",e.imgList=JSON.parse(g.get("bgPUse-"+w))||[]},e.$on("sysCategory.update",function(){e.sysCategoryList=r.sysCategoryList}),e.getSysCatAndList=function(t,i){L=[],e.sysCatId=t,0!==t&&"0"!==t?r.getSysTagByCatId(t):(e.sysTagList=[],e.sysTagId="",angular.forEach(e.imgList,function(e){e.selected=!1})),e.sysTagId=null,1!==c.longPage&&"1"!==c.longPage&&i?e.getSysImgByTag("pure"):P(x,k,b,t)},e.$on("sysTag.update",function(){e.sysTagList=r.sysTagList}),e.getSysImgByTag=function(t){"pure"!==t?(L=[],e.sysTagId=t,P(x,k,b,e.sysCatId,t)):(e.sysTagId="pure",e.sysTagId=t,P(x,k,b,t))},e.$watch("currentPage",function(t,i){t!==i&&(e.toPage=t,L=[],e.systemImages?P(t,k,b,e.sysCatId,e.sysTagId):r.getUserFiles1(t,k,b,null,e.userTagId))}),e.getImgByPage=function(){e.currentPage=e.toPage},e.getUserFiles=function(t,i){t!==e.userTagId&&(e.mangeObj.manageAll=!1,window.localStorage&&(1===e.fileType||"1"===e.fileType?localStorage.setItem("photoTag",t):localStorage.setItem("backgroundTag",t),localStorage.getItem("print_scene_images_update")&&(h.clear("fileService"),localStorage.removeItem("print_scene_images_update"))),e.thumbnailList=[],L=[],e.userTagId=t,e.saveTagId=t,e.sysCatId="",r.getUserFiles1(i,k,b,null,t))},e.$on("imgList.update",function(){e.imgList=r.imgList,$.each(e.imgList,function(e,t){t.tmbPath&&t.tmbPath.indexOf(".svg")===-1&&(t.rule=t.tmbPath.indexOf("?imageMogr2")>=0?T:"?imageMogr2"+T)}),e.totalItems=r.totalItems,e.currentPage=r.pageNo}),1===c.longPage||"1"===c.longPage)if(window.localStorage){var I=1===e.fileType||"1"===e.fileType?localStorage.getItem("photoTag"):localStorage.getItem("backgroundTag");I?(e.getUserFiles(parseInt(I,10)),e.switchToSystemImages(!1),e.sysCatId=""):(3===e.bFlagType||"3"===e.bFlagType?e.sysCatId="1301":e.sysCatId="0",P(x,k,b,e.sysCatId),r.getSysTagByCatId(e.sysCatId))}else P(x,k,b);1===c.longPage||"1"===c.longPage?E(b):(E(b),e.getSysCatAndList("1301",!0),e.getSysImgByTag("pure"),e.systemImages=!0,e.longPage=!0),e.createTag=function(){return e.tagList.length>=8?void(e.authError="最多能创建8个自定义分组！"):void a.open({windowClass:"console",templateUrl:"scene/console/category.tpl.html",controller:"CategoryConsoleCtrl"})};var _=function(){r.getTagList()};_(),e.deleteTag=function(e,t){s.openConfirmDialog({msg:"确定删除此分组?"},function(){r.deleteTag(e,t)})},e.$on("tagList.update",function(){e.tagList=r.tagList}),e.$on("tagList.delete",function(){v()});var L=[];e.switchSelect=function(t,i,n,a){if(e.mangeObj.manageAll||!a)if(n.stopPropagation(),t.selected=!t.selected,e.systemImages&&"p"!==c.type&&"n"!==c.type)if(angular.forEach(e.imgList,function(e){!e.selected||e.id===t.id&&e.color===t.color||(e.selected=!1)}),t.selected){var s;L=[],t.path?s={id:t.id,src:t.path,shape:t.shape,name:t.name}:t.color&&(s={color:t.color}),L.push(s)}else L=[];else if(t.selected)e.mangeObj.manageAll=!0,L.push({id:t.id,src:t.path||t.tmbPath,shape:t.shape,name:t.name});else{f();for(var o in L)L[o].id===t.id&&L.splice(o,1)}},e.cancelSelect=function(){for(var t in e.imgList)e.imgList[t].selected&&(e.imgList[t].selected=!1);L=[]},e.assignTag=function(t){var i=[];e.showObj.showGroup=!1;for(var n=0;n<L.length;n++)i.push(L[n].id);if(!i.length)return void(e.authError="请先点击管理选择一张图片再进行分组");angular.forEach(e.imgList,function(e){e.selected=!1});var a=i.join(",");h.clear("fileService"),r.assignTag(t,a),L=[]},e.$on("tag.assign",function(){p.pushForCurrentRoute("data.assign.success","notify.success")}),e.unbindTag=function(t){for(var i=[],n=0;n<L.length;n++)i.push(L[n].id);if(!i.length)return void(e.authError="请先选择一张图片再解除分组");var a=i.join(",");h.clear("fileService"),r.unbindTag(t,a)},e.$on("tag.unbind",function(){p.pushForCurrentRoute("group.delete.data","notify.success"),r.getUserFiles1(e.currentPage,k,b,null,e.userTagId)}),e.deleteFile=function(t){var i,n=[];if(!t&&0===L.length)return void(e.authError="请您选中图片后再进行删除操作！");for(var a=0;a<L.length;a++)n.push(L[a].id);i=S>0?t?"确定删除此图片？删除后，该图片将在回收站保留"+S+"天":"确定删除所选图片？删除后，该图片将在回收站中保留"+S+"天":"确定删除所选图片？";var o=t?t:n.join(",");s.openConfirmDialog({msg:i},function(){r.deleteFile(o),h.clear("fileService")})},e.$on("files.delete",function(){e.sysCatId="",L=[],r.getUserFiles1(e.currentPage,k,b,null,e.userTagId)}),e.replaceImage=function(){if(!L.length)return void(e.authError="请您先选择图片！");var t;if("p"!==c.type&&"n"!==c.type){if(L.length>1)return void(e.authError="只能选择一张图片进行替换！");t=L[0]}else{var i=c.count+L.length,n="p"===c.type?6:10;if(i>n)return e.authError="最多可选择"+(n-c.count)+"张图片",!1;e.picObj=[];for(var a=0;a<L.length;a++)e.picObj.push({width:L[a].shape.width,height:L[a].shape.height,src:L[a].src,name:L[a].name})}var s={};t&&t.src&&(s={type:"imgSrc",data:t.src,width:t.shape.width,height:t.shape.height,id:t.id,isSys:e.systemImages,fileType:c.fileType,name:t.name}),0===c.fileType||"0"===c.fileType?t.src?e.$close(s):e.$close({type:"backgroundColor",color:t.color}):("p"!==c.type&&"n"!==c.type||(s.selectedImages=e.picObj),e.$close(s))},e.replaceByClick=function(t,i,n){if(1301!==e.sysCatId&&("1301"!==e.sysCatId||"pure"!==e.sysTagId)){y=JSON.parse(g.get("bgPUse-"+w))||[];for(var a=0;a<y.length;a++)y[a].id===t.id&&y.splice(a,1);y.length>17&&y.pop(),y.unshift(t),g.push("bgPUse-"+w,JSON.stringify(y))}if(!e.mangeObj.manageAll){if("p"===c.type||"n"===c.type)return void e.switchSelect(t,i,n,!0);L=[],(!L.length&&!e.mangeObj.manageAll||e.systemImages)&&(t.path||t.tmbPath?L.push({id:t.id,src:t.path||t.tmbPath,shape:t.shape,name:t.name}):t.color&&L.push({color:t.color}),e.replaceImage())}},e.$on("backto.my.list",function(t){e.systemImages&&v()}),e.$on("get.file.list",function(t,i){e.saveTagId===e.userTagId&&(i.tmbPath&&i.tmbPath.indexOf(".svg")===-1&&(i.rule=i.tmbPath.indexOf("?imageMogr2")>=0?T:"?imageMogr2"+T),e.imgList.unshift(i))}),e.cancel=function(){e.$dismiss()},e.$watch("userTagId",function(e){var t=PREFIX_URL+"m/base/file/upload?bizType=0&fileType="+b;e&&(t+="&tagId="+e)})}]).directive("qiniuUploadDirective",["$http","$rootScope","uploaderService","dataCacheService","fileService","accountTypeService","ModalService",function(e,t,i,n,a,s,o){function r(e,t,n){var a=i.getUploadToken(e.tokenType);a.then(function(t){l(e,e.resourceType,t.data.map.token)})}function l(e,i,r){Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:e.uploadBtn||"pickfiles",uptoken_url:PREFIX_URL+"m/base/file/uptoken?type=image",uptoken:r,unique_names:!0,domain:"http://qiniu-plupload.qiniudn.com/",container:e.uploadCon||"container",max_file_size:"100mb",max_retries:3,dragdrop:!0,chunk_size:"5mb",drop_element:e.uploadCon||"container",filters:{mime_types:[{title:"Image files",extensions:i}]},auto_start:!0,init:{FilesAdded:function(t,i){a.backToMyList(),plupload.each(i,function(i){countCharacters(i.name)>=50&&(t.removeFile(i),o.openMsgDialog({msg:"文件名称限制在50个字符内"})),(1===s.accountType||2===s.accountType)&&i.size/1024/1024>parseInt(e.maxFileSize,10)&&(t.removeFile(i),o.openMsgDialog({msg:"文件大小限制在"+e.maxFileSize+"M内"}))}),e.limit&&i.length>e.limit&&(plupload.each(i,function(e){t.removeFile(e)}),o.openMsgDialog({msg:"文件个数在 "+e.limit+"个内"}))},BeforeUpload:function(e,t){},UploadProgress:function(e,t){},UploadComplete:function(){},FileUploaded:function(i,s,o){n.clear("fileService");var r=JSON.parse(o);r.path=r.key,r.tmbPath=r.key,e.$apply();var l={fileType:e.fileType,bizType:0,path:r.path,tmbPath:r.tmbPath,tagId:e.tagId,name:r.name,size:parseInt(r.size/1024,10)};e.nosave?t.$broadcast("upload.success",l):a.saveFileInfo(l)},Error:function(e,t,i){(t&&t.code===-600||t&&"-600"===t.code)&&o.openMsgDialog({msg:"超出文件上传大小最大限制（100mb）"})},Key:function(e,t){}}})}return{restrict:"EA",scope:{resourceType:"=",resources:"=",tagId:"=",fileType:"=",maxFileSize:"=",tokenType:"=",uploadBtn:"@",uploadCon:"@",nosave:"@",limit:"@"},link:r}}]),angular.module("scene.create.console.button",[]),angular.module("scene.create.console.button").controller("ButtonConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal","ModalService",function(e,t,i,n,a,s){e.model={title:n.properties.title,text:n.properties.text,link:n.properties.link?n.properties.link:"http://",imgSrc:n.properties.imgSrc,layout:n.properties.layout,showPic:n.properties.showPic,checkedLink:n.properties.checkedLink},e.authError="",e.buttons=[{id:1,text:"点击提交",btnStyle:{backgroundColor:"#08a1ef",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"立即提交",btnStyle:{backgroundColor:"rgb(255, 255, 255)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(0, 0, 0)"}},{id:3,text:"提交信息",btnStyle:{backgroundColor:"#f6b223",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"立即参加",btnStyle:{height:"30px",backgroundColor:"#333333","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:5,text:"提交表单",btnStyle:{height:"30px",backgroundColor:"#a0d86b","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:6,text:"马上订购",btnStyle:{height:"30px",backgroundColor:"#ff6666","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}}],angular.forEach(e.buttons,function(t,i){""!==e.model.title&&n.css.backgroundColor&&n.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=i)});var o="http://";e.confirm=function(){if(!e.model.title||0===e.model.title.length)return e.authError="按钮名称不能为空",void $('.bg_console input[type="text"]').focus();if(e.model.showPic===!0&&!e.model.imgSrc)return void s.openMsgDialog({msg:"请上传图片!"});if(e.model.checkedLink){if(!e.model.link)return void s.openMsgDialog({msg:"请填写链接地址!"});if(!e.model.text)return void s.openMsgDialog({msg:"请填写提示信息!"});/^http:|^https:|^ftp:/.test(e.model.link)||(e.model.link=o+e.model.link)}e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,i){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=i},e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){return t.width/t.height===1?void(e.model.imgSrc=t.data):void a.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:t.data},cw:250}}}}).result.then(function(t){e.model.imgSrc=t.src})},function(){})}}]),angular.module("scene.create.console.category",["services.file"]),angular.module("scene.create.console.category").controller("CategoryConsoleCtrl",["$scope","$timeout","localizedMessages","fileService",function(e,t,i,n){e.category={},e.authError="",e.confirm=function(){return e.category.name&&e.category.name.trim()?countCharacters(e.category.name)>16?void(e.authError="分类名称不能超过16个字符"):(n.createTag(e.category.name),void e.$close()):void(e.authError="请输入分类名称！")},e.cancel=function(){e.$dismiss()}}]),angular.module("chart.style",["colorpicker.module","app.directives.style","app.directives.uislider","app.directives.limitInput","services.history","scene.create.console.map"]),angular.module("chart.style").controller("chartStyleCtrl",["$scope","sceneService","$modal",function(e,t,i){function n(t){var i=d.options;i.scaleFontColor=t.options.scaleFontColor,i.onAnimationComplete=function(){var e=this.chart.ctx,i=this.segments;e.textAlign="start",e.textBaseline="middle";for(var n=0,a=0;a<i.length;a++)n+=parseFloat(i[a].value);for(e.fillText(n,e.width/2-20,e.height/2,100),a=0;a<i.length;a++){var s=i[a].startAngle+(i[a].endAngle-i[a].startAngle)/2,o=(i[a].outerRadius-i[a].innerRadius)/1.5+i[a].innerRadius,r=i[a].x+Math.cos(s)*o,l=i[a].y+Math.sin(s)*o;e.textAlign="center",e.textBaseline="middle",e.fillStyle=t.options.scaleFontColor,e.font="normal 12px Helvetica",e.fillText(i[a].value,r,l)}},d.destroy(),d=new Chart(e.ctx).Pie(t.segments,i),c.data("pieChart",d)}function a(e,t){if(e.sectorNum!==t.sectorNum){var i=0;if(e.sectorNum>t.sectorNum){i=e.sectorNum-t.sectorNum;for(var a=0;a<i;a++){var s=Math.floor(100*Math.random()+10);d.addData({label:"扇区"+(parseInt(t.sectorNum,10)+a+1),value:s,color:e.colors[parseInt(t.sectorNum,10)+a]}),e.segments.push({label:"扇区"+(parseInt(t.sectorNum,10)+a+1),value:s,color:e.colors[parseInt(t.sectorNum,10)+a]})}}else for(i=t.sectorNum-e.sectorNum,e.segments=e.segments.slice(0,e.sectorNum),a=0;a<i;a++)d.removeData(d.segments.length-1)}else if(e.options.scaleFontColor!==t.options.scaleFontColor)n(e);else{for(var o=0,c=d.segments.length;o<c;o++)d.segments[o].label=e.segments[o].label,isNaN(e.segments[o].value)||e.segments[o].value<0?d.segments[o].value="":d.segments[o].value=e.segments[o].value,d.segments[o].fillColor=jQuery.Color(e.segments[o].color).toString(),d.segments[o].highlightColor=jQuery.Color(e.segments[o].color).toString();d.update(),l.find("#legend-"+r.id).html(d.generateLegend())}r.properties.pieChart=e,r.properties.pieChart.options=d.options}function s(t){for(var i,n=[],a=[],s=[],o=[],d="",u="",h="",g=0;g<t.segments.length;g++)i=t.segments[g],d=isNaN(i.value1)||i.value1<0?"":i.value1,u=isNaN(i.value2)||i.value2<0?"":i.value2,h=isNaN(i.value3)||i.value3<0?"":i.value3,(i.label||d||u||h)&&(o.push(i.label),n.push(d),a.push(u),s.push(h));var m={labels:o,datasets:[{fillColor:t.fillColors[0],strokeColor:"rgba(0,0,0,0)",data:n,label:t.lengends[0]},{fillColor:t.fillColors[1],strokeColor:"rgba(0,0,0,0)",data:a,label:t.lengends[1]},{fillColor:t.fillColors[2],strokeColor:"rgba(0,0,0,0)",data:s,label:t.lengends[2]}]};p.destroy(),p=new Chart(e.ctx).Bar(m,t.options),l.find("#legend-"+r.id).html(p.generateLegend()),r.properties.barChart=t,r.properties.barChart.options=p.options,c.data("barChart",p)}function o(t){var i,n=[],a=[],s=[],o=[],d="",p="",h="",g=[],m=[];u.datasets.forEach(function(e){g.push(e.strokeColor),m.push(e.fillColor)});for(var f=0;f<t.lengends.length;f++)""+e.charts.chartType=="line"?g[f]=t.fillColors[f]:m[f]=t.fillColors[f];for(var v=0;v<t.segments.length;v++)i=t.segments[v],d=isNaN(i.value1)||i.value1<0?0:i.value1,p=isNaN(i.value2)||i.value2<0?0:i.value2,h=isNaN(i.value3)||i.value3<0?0:i.value3,(i.label||d||p||h)&&(o.push(i.label),n.push(d),a.push(p),s.push(h));var b={labels:o,datasets:[{label:t.lengends[0],fillColor:m[0],strokeColor:g[0],pointColor:g[0],pointStrokeColor:"#fff",data:n},{label:t.lengends[1],fillColor:m[1],strokeColor:g[1],pointColor:g[1],pointStrokeColor:"#fff",data:a},{label:t.lengends[2],fillColor:m[2],strokeColor:g[2],pointColor:g[2],pointStrokeColor:"#fff",data:s}]};u.destroy(),u=new Chart(e.ctx).Line(b,t.options),u.datasets.forEach(function(e){var t=!0;e.points.forEach(function(e){e.value&&(t=!1)}),t?e.points.length=0:e.points.forEach(function(e){e.value||(e.value=0)})}),u.update(),l.find("#legend-"+r.id).html(u.generateLegend()),r.properties.lineChart=t,r.properties.lineChart.options=u.options,c.data("lineChart",u)}if(e.confirm=function(){e.$dismiss()},!e.$parent.charts){var r=e.elemDef=t.currentElemDef||{css:{}},l=$(".workspace #chart-"+r.id),c=$(".workspace").find("#"+r.id),d=c.data("pieChart"),p=c.data("barChart"),u=c.data("lineChart");if(r.type+""=="t"){e.charts={},e.charts.options={},e.charts.chartType=r.properties.chartType,e.charts.colors=["#57c7d4","#3aa99e","#f2a654","#f96868","#926dde","#62a8ea","#F978A6","#F8E59B"],e.charts.segments=[],e.charts.sectorNum=2,e.charts.chartTitle=l.find(".chart-title").html(),e.ctx=c.get(0).getContext("2d"),r.properties.legPosition?e.charts.legPosition=r.properties.legPosition:(e.charts.legPosition="position-left",r.properties.legPosition="position-left");var h=[],g=[],m=[],f=[],v=[],b=[],y=0,w=[];if(d){if(e.charts.options=d.options,d.segments){e.charts.sectorNum=d.segments.length,y=d.segments.length;for(var x=0;x<y;x++)e.charts.segments.push({label:d.segments[x].label,value:d.segments[x].value,color:d.segments[x].fillColor})}r.properties.pieChart=e.charts}if(p){if(e.charts.options=p.options,p.datasets){for(w=p.datasets,y=w[0].bars.length,x=0;x<y;x++)h.push(w[0].bars[x].label);for(x=0;x<w.length;x++){g.push(w[x].label),m.push(w[x].fillColor);for(var k=w[x].bars.length,S=0;S<k;S++)0===x?f.push(w[x].bars[S].value):1===x?v.push(w[x].bars[S].value):b.push(w[x].bars[S].value)}}r.properties.barChart=e.charts}if(u){if(e.charts.options=u.options,u.datasets){for(w=u.datasets,x=0;x<w.length;x++)if(y=w[x].points.length,0!==y){for(S=0;S<y;S++)h.push(w[x].points[S].label);break}for(x=0;x<w.length;x++){g.push(w[x].label),""+e.charts.chartType=="line"?m.push(w[x].strokeColor):m.push(w[x].fillColor);var T=w[x].points.length;for(S=0;S<T;S++)0===x?f.push(w[x].points[S].value):1===x?v.push(w[x].points[S].value):b.push(w[x].points[S].value)}}r.properties.lineChart=e.charts}if(p||u){e.charts.lengends=g,e.charts.fillColors=m;for(var C=0;C<h.length;C++)e.charts.segments.push({label:h[C],value1:f[C],value2:v[C],value3:b[C]});for(;e.charts.segments.length<12;)e.charts.segments.push({label:"",value1:"",value2:"",value3:""})}r.properties.chartTitle=e.charts.chartTitle}e.$watch("charts",function(t,i){r.type+""=="t"&&t&&t!==i&&(l.find(".chart-title").html(t.chartTitle),r.properties.chartTitle=t.chartTitle,""+e.charts.chartType=="pie"?a(t,i):""+e.charts.chartType=="bar"&&p.datasets?s(t):""+e.charts.chartType!="line"&&""+e.charts.chartType!="curve"||!u.datasets||o(t),c.attr("width")&&(c.removeAttr("width"),c.css("width","100%")),c.attr("height")&&(c.removeAttr("height"),c.css("height","50%")),""+e.charts.chartType=="pie"?d.update():""+e.charts.chartType=="bar"?p.update():""+e.charts.chartType!="line"&&""+e.charts.chartType!="curve"||u.update())},!0),e.maxLength20=function(){for(var t=e.charts.segments,i=0;i<t.length;i++)t[i].label=e.substtrCharacters(t[i].label);e.charts.legendName&&(e.charts.legendName=e.substtrCharacters(e.charts.legendName))},e.substtrCharacters=function(e){if(e&&(e=e.replace(/\n|\r/g," ")),e&&e.length>10){var t=e.replace(/[^\x00-\xff]/g,"xx");if(t.length>20){var i=t.substring(0,20).replace(/xx/g,"中").length;e=e.substring(0,i)}}return e},e.showEditDataView=function(){i.open({windowClass:"six-contain",templateUrl:"scene/console/chartViewEdit.tpl.html",controller:"chartStyleCtrl",scope:e})}}}]).directive("legendStyle",function(){return{restrict:"AE",link:function(e,t,i){$targetEle=$(".workspace #legend-"+e.elemDef.id),e.$watch(function(){return $(t).val()},function(t,i){t!==i&&($targetEle.removeAttr("class"),""+t=="position-align"?$targetEle.addClass("position-align"):""+t=="position-right"?$targetEle.addClass("position-right"):""+t=="position-none"&&$targetEle.addClass("position-none"),e.elemDef.properties.legPosition=t)})}}}),angular.module("comp.style",[]),angular.module("comp.style").controller("CompStyleCtrl",["$scope","setCompService","sceneService",function(e,t,i){2===e.elemDef.type||"2"===e.elemDef.type||4===e.elemDef.type||"4"===e.elemDef.type?e.statusArr=[{name:"可控可替换",value:1},{name:"可控不可替换",value:2},{name:"不可控可替换",value:3},{name:"不可控不可替换",value:4}]:e.statusArr=[{name:"可控",value:2},{name:"不可控",value:4}],e.wordLineList=[{name:"0%",value:"0"},{name:"10%",value:"0.1em"},{name:"25%",value:"0.25em"},{name:"50%",value:"0.5em"},{name:"75%",value:"0.75em"},{name:"100%",value:"1em"}],e.countCharacters=countCharacters;var n=e.setModel.setlabel;e.cssModel=e.elemDef.css,e.cssModel.letterSpacing||(e.cssModel.letterSpacing="0"),e.$watch("setModel",function(t){t&&(4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus||e.setModel.isnew?4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus&&e.setModel.isnew?(e.setModel.isnew=!1,e.elemDef.name=e.setModel.setlabel,e.elemDef.properties.setremark=e.setModel.setremark,e.elemDef.properties.setstatus=e.setModel.setstatus):4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus?(e.elemDef.name=e.setModel.setlabel,e.elemDef.properties.setremark=e.setModel.setremark,e.elemDef.properties.setstatus=e.setModel.setstatus):n!==e.setModel.setlabel&&(e.elemDef.name=e.setModel.setlabel):(e.setModel.isnew=!0,e.elemDef.name=e.setModel.setlabel,e.elemDef.properties.setremark="",e.elemDef.properties.setstatus=4))},!0),e.bold=function(){e.cssModel.fontWeight?e.cssModel.fontWeight="":e.cssModel.fontWeight="bold"},e.italic=function(){e.cssModel.fontStyle?e.cssModel.fontStyle="":e.cssModel.fontStyle="italic"},e.underLine=function(){var t=$.trim(e.cssModel.textDecoration);t&&t.indexOf("underline")>-1?e.cssModel.textDecoration=t.replace("underline",""):e.cssModel.textDecoration=t+" underline"},e.delLine=function(){var t=$.trim(e.cssModel.textDecoration);t&&t.indexOf("line-through")>-1?e.cssModel.textDecoration=t.replace("line-through",""):e.cssModel.textDecoration=t+" line-through";
},e.textAlign=function(t){e.cssModel.textAlign=t},e.addLink=function(){i.openLinkModal(e.elemDef)},e.removeLink=function(){e.elemDef.properties.url=""}}]).directive("compStyleSet",[function(){return{restrict:"A",scope:{cssItem:"@"},link:function(e,t,i,n){var a=$("#inside_"+i.elemId+" .element-box");e.$watch("cssItem",function(e,t){e=JSON.parse(e),delete e.width,delete e.height,delete e.transform,e.fontFamily&&delete e.fontFamily,a.css(e)},!0)}}}]),angular.module("scene.create.console.counter",[]),angular.module("scene.create.console.counter").controller("CounterConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal",function(e,t,i,n,a){e.model={title:n.title,properties:{layout:n.properties.layout,size:n.properties.size,color:n.properties.color,icon:n.properties.icon,imgSrc:n.properties.imgSrc}},e.authError="",e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.properties.icon="",e.model.properties.imgSrc=n.properties.imgSrc=t.data},function(){})},e.confirm=function(){angular.extend(n,e.model);var t=parseInt(n.css.height,10)||0;e.model.properties.imgSrc&&t<115&&(e.model.btnStyle={width:"320px",height:"115px",lineHeight:"115px",backgroundColor:"transparent"}),"counter-tb"===e.model.properties.layout&&(!e.model.properties.imgSrc&&t<80&&(e.model.btnStyle={height:"80px",lineHeight:"80px"}),e.model.properties.imgSrc&&t<155&&(e.model.btnStyle=e.model.btnStyle||{},e.model.btnStyle.height=e.model.btnStyle.lineHeight="155px")),e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseEqfont=function(t){e.model.properties.icon=t,e.model.properties.imgSrc=null,""+t=="eqf-love"?e.model.properties.color="#ff5448":""+t=="eqf-good"?e.model.properties.color="#f2a653":""+t=="eqf-flower2"?e.model.properties.color="#ea1f64":""+t=="eqf-vote"&&(e.model.properties.color="#08a1ef")}}]),angular.module("scene.create.console.cropImage",["services.file"]).directive("cropImage",["sceneService","fileService","$compile",function(e,t){return{restrict:"EAC",scope:{},replace:!0,templateUrl:"scene/console/cropimage.tpl.html",link:function(i,n){function a(){h.css.width/h.css.height>p/u?(c=parseInt(h.css.width*p/h.css.width,10),d=parseInt(h.css.height*p/h.css.width,10)):(c=parseInt(h.css.width*u/h.css.height,10),d=parseInt(h.css.height*u/h.css.height,10));var e=(p-c)/2,t=(u-d)/2,i=(p-c)/2+c,n=(u-d)/2+d;l=[0,0,p,u],f=h.css.width/h.css.height,r=[e,t,i,n]}function s(e){$(".cropWidth").html(parseInt(e.w,10)),$(".cropHeight").html(parseInt(e.h,10))}i.PREFIX_FILE_HOST=PREFIX_FILE_HOST;var o,r,l,c,d,p,u,h=e.currentElemDef,g=e.currentElemDef.properties.src,m=$("#target"),f=h.css.width/h.css.height;i.fit=!0,i.lockRatio=!1,i.$on("changeElemDef",function(e,t){h=t,i.fit=!0,i.lockRatio=!1,h.properties.src!==g?(g=h.properties.src,o.setImage(PREFIX_FILE_HOST+g),m.unbind("load").attr("src",PREFIX_FILE_HOST+g).load(function(){p=this.width,u=this.height,i.preSelectImage(g),i.$apply()})):(i.preSelectImage(g),i.$apply())}),i.preSelectImage=function(e){o?(a(),o.setOptions({aspectRatio:f,setSelect:r})):m.attr("src",PREFIX_FILE_HOST+e).load(function(){p=this.width,u=this.height,m.Jcrop({onChange:s,keySupport:!1,setSelect:[0,0,100,100],boxHeight:320,boxWidth:680},function(){o=this}),e&&(a(),o.setOptions({aspectRatio:f,setSelect:r}))})},i.preSelectImage(g),i.$watch("lockRatio",function(e){if(o){var t=o.tellSelect();t.w=parseInt(t.w,10),t.h=parseInt(t.h,10),e?o.setOptions({aspectRatio:t.w/t.h}):o.setOptions({aspectRatio:null})}}),i.$watch("fit",function(e){if(o)if(e){var t=o.tellSelect();t.x=parseInt(t.x,10),t.y=parseInt(t.y,10),t.x2=parseInt(t.x2,10),t.y2=parseInt(t.y2,10),l=[t.x,t.y,t.x2,t.y2],o.setOptions({aspectRatio:f,setSelect:r})}else o.setOptions({aspectRatio:null,setSelect:l})}),i.crop=function(){var i=e.currentElemDef,a=o.tellSelect();return 0===a.w||0===a.h?void $(n).hide():(a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.w=parseInt(a.w,10),a.h=parseInt(a.h,10),a.x2=parseInt(a.x2,10),a.y2=parseInt(a.y2,10),a.src=$("#target").attr("src").split(PREFIX_FILE_HOST)[1],void t.cropImage(a).then(function(e){var t={type:"imgSrc",data:e.data.obj,width:a.w,height:a.h};i.properties.src=t.data;var s=t.width/t.height,o=$("#"+i.id),r=$("#inside_"+i.id).width(),l=$("#inside_"+i.id).height(),c=r/l;s>=c?(l=r/s,$("#inside_"+i.id).height(l),i.css.height=l,i.properties.height=l,o.outerHeight(l),o.outerWidth(r),o.css("marginLeft",0),o.css("marginTop",0)):(r=l*s,$("#inside_"+i.id).width(r),i.css.width=r,i.properties.width=r,o.outerWidth(r),o.outerHeight(l),o.css("marginTop",0),o.css("marginLeft",0)),o.attr("src",PREFIX_FILE_HOST+t.data),i.properties.imgStyle={},i.properties.imgStyle.width=o.outerWidth(),i.properties.imgStyle.height=o.outerHeight(),i.properties.imgStyle.marginTop=o.css("marginTop"),i.properties.imgStyle.marginLeft=o.css("marginLeft"),$(n).hide()},function(){i.properties.src||e.deleteElement(i.id)}))},i.cancel=function(){$(n).hide()}}}}]),angular.module("scene.custom.activities",["ui.bootstrap.datepicker"]),angular.module("scene.custom.activities").controller("CustomActivitiesCtrl",["$scope","$modal","customActivitiesService","ModalService","activityInfo","userXd","uploaderService","fileService","dateFilter",function(e,t,i,n,a,s,o,r,l){e.resourceType="doc,docx",e.fileType=8,e.rewards=[{label:"",xd:""},{label:"",xd:""},{label:"",xd:""}],a?(e.active=a,e.active.introductionName=a.wordName,e.active.endDate=l(a.endDate),e.active.startDate=l(a.startDate),a.promStatus!==-1&&"-1"!==a.promStatus&&(e.formDis=!0)):e.active={},e.cancel=function(){e.$dismiss()},e.deleteTheReward=function(t){e.rewards.splice(t,1)},e.addNewReward=function(){e.rewards.length>=10||e.rewards.splice(0,0,{label:"",xd:""})},e.$on("thumbnailList.update",function(t,i){for(var n=0;n<e.uploader.queue.length;n++)100!==e.uploader.queue[n].progress&&"100"!==e.uploader.queue[n].progress||(e.uploader.queue.splice(n,1),e.active.introductionName=i.name,e.active.fileId=i.id)}),e.$on("get.file.list",function(t,i){e.active.introductionName=i.name,e.active.fileId=i.id}),e.openImageModal=function(i){e.formDis||t.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(n){return n.width/n.height===1?void(e.active[i]=n.data):void t.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:n.data},cw:250}}}}).result.then(function(t){e.active[i]=t.src})},function(){})},e.ok=function(){if(e.formDis)return void e.$dismiss();if(!e.activite){if(!e.active.title)return void n.openMsgDialog({msg:"请设置活动主题"});if(!e.active.startDate)return void n.openMsgDialog({msg:"请设置活动开始时间"});if(!e.active.endDate)return void n.openMsgDialog({msg:"请设置活动结束时间"});if(!e.active.fileId)return void n.openMsgDialog({msg:"请设置活动描述"});e.active.startDate=l(e.active.startDate),e.active.endDate=l(e.active.endDate),i.saveActivite(e.active).then(function(){n.openMsgDialog({msg:"活动创建成功!"}),e.active.promStatus=0,e.$close(e.active)})}},e.removeIntro=function(){e.formDis||(e.active.fileId=null,e.active.introductionName=null)}}]).factory("customActivitiesService",["$http",function(e){var t={};return t.saveActivite=function(t){var i="m/scene/company/promotion/save";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},t.getActivite=function(){var t="m/scene/company/promotion";return e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},t}]),angular.module("scene.create.console.setting.dropdown",[]),angular.module("scene.create.console.setting.dropdown").controller("DropdownConsoleCtrl",["$scope","sceneService","$timeout","ModalService","$element","historyService","setCompService","security",function(e,t,i,n,a,s,o,r){function l(){var t=0;angular.forEach(e.model.choices.options,function(i,n){i.label===e.elemDef.showText&&(t++,e.currentParam.selectedOption=i)}),t<1&&(e.currentParam.selectedOption="空",e.model.placeholderText=e.elemDef.showText)}function c(){null===e.currentParam.selectedOption||"空"===e.currentParam.selectedOption?e.elemDef.showText=e.model.placeholderText:e.elemDef.showText=e.currentParam.selectedOption.label,e.elemDef.placeholderText=e.model.placeholderText,$("#selectButton"+e.elemDef.id).text(e.elemDef.showText)}e.elemDef=t.currentElemDef,e.elemDef.selectedOption="",e.isTplEditor=r.isTplEditor(),e.model={choices:JSON.parse(e.elemDef.choices),placeholderText:"请选择"},e.currentParam={placeholderAvaiable:!0,selectedOption:"空"},e.checkPlaceholder=function(){null!==e.currentParam.selectedOption?(e.currentParam.placeholderAvaiable=!1,e.elemDef.showText=e.currentParam.selectedOption.label,e.elemDef.placeholderText=e.model.placeholderText,$("#selectButton"+e.elemDef.id).text(e.currentParam.selectedOption.label)):e.currentParam.placeholderAvaiable=!0},e.addNewOption=function(t){e.model.choices.options.length<10?(++e.model.choices.seq,e.model.choices.options.splice(t+1,0,{id:e.model.choices.seq,label:"请输入内容"})):n.openMsgDialog({msg:"您可以添加十个选项，每个选项最多请不要超过20字符。"})},e.deleteTheOption=function(t){e.model.choices.options.length>1&&n.openConfirmDialog({msg:"您确定要删除内容为“"+e.model.choices.options[t].label+"”的选项？<br/>删除选项后，将导致该选项已收集的数据无法正确地显示。"},function(){e.model.choices.options.splice(t,1)})},e.countCharacters=countCharacters,e.clear=function(){e.model.choices={seq:3,options:[{id:1,label:"请输入内容"},{id:2,label:"请输入内容"},{id:3,label:"请输入内容"}]},e.currentParam.selectedOption="空",e.model.placeholderText="请选择"},e.$watch("model.choices.options",function(){e.elemDef.choices=JSON.stringify(e.model.choices),i(function(){$(a[0].querySelector("select")).change()})},!0),e.$watch("model.placeholderText",function(){c()},!0),e.$watch("currentParam.selectedOption",function(){c()},!0),l(),e.isTplEditor&&(e.statusArr=[{name:"可控不可替换",value:2},{name:"不可控不可替换",value:4}],e.setModel=o.initModel(e.elemDef),e.$watch("setModel",function(){4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus||e.setModel.isnew?4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus&&e.setModel.isnew&&(delete e.setModel.isnew,o.addElemDef(e.setModel)):(e.setModel.isnew=!0,o.removeElemDef(e.setModel.id)),$.extend(!0,e.elemDef.properties,e.setModel)},!0))}]),angular.module("scene.create.console.imageCrop",["services.file"]).controller("imageCropCtrl",["$rootScope","$scope","imageCropService","obj","dataCacheService",function(e,t,i,n){var a,s;t.cropSize=n.properties,s=n.properties.originSrc?n.properties.originSrc.replace(PREFIX_FILE_HOST,""):n.properties.src.replace(PREFIX_FILE_HOST,""),""+n.type=="square"?a=t.cropOption={type:n.type,title:"图片裁切",desc:"图片将按照要求的比例进行裁切",showItems:!1,imgSrc:n.properties.src,cropItems:[{ratio:1,desc:"正方形比例"}]}:3===n.type||""+n.type===3?(a=t.cropOption={type:n.type,title:"背景裁切",desc:"背景图将按照要求的比例进行裁切",showItems:!1,imgSrc:s,cropItems:[{ratio:640/1008,desc:"背景图比例"}]},n.properties.pageLength&&1!==n.properties.pageLength&&(a.showItems=!0,a.cropItems=[{value:1,ratio:640/1008,desc:"固定背景模式"},{value:2,ratio:640/(1008*n.properties.pageLength),desc:"全屏背景模式"}])):4!==n.type&&"4"!==n.type||(a=t.cropOption={type:n.type,title:"图片裁切",desc:"请根据你的需求，点击右侧常用比例进行裁切",showItems:!0,imgSrc:s,cropItems:[{value:1,ratio:0,desc:"原图比例"},{value:2,ratio:1,desc:"1:1"},{value:3,ratio:4/3,desc:"4:3"},{value:4,ratio:.75,desc:"3:4"},{value:5,ratio:320/486,desc:"标准屏比例"},{value:6,ratio:320/243,desc:"1/2屏比例"},{value:7,ratio:320/162,desc:"1/3屏比例"},{value:8,ratio:-1,desc:"自定义",lock:!1}]}),n.properties.radioValue?(!n.properties.lock||8!==n.properties.radioValue&&"8"!==n.properties.radioValue||(a.cropItems[n.properties.radioValue-1].lock=!0),a.currentItem=a.cropItems[n.properties.radioValue-1]):2===n.properties.croptype||"2"===n.properties.croptype?a.currentItem=a.cropItems[1]:a.currentItem=a.cropItems[0],t.cropItemChange=function(t){null===t.lock&&a.cropItems[7]&&(a.cropItems[7].lock=!1),a.currentItem=t,e.$broadcast("cropItem.change",t)},t.ok=function(){n.properties.pageLength&&(n.properties.type=a.currentItem.value),n.subType&&delete n.subType,e.$broadcast("cropImage.ok",n)},t.cancel=function(){t.$dismiss(n.properties.src)}}]).factory("imageCropService",["$rootScope","fileService",function(e,t){var i={};return i.cropImage=function(t,i){var n="?imageMogr2/auto-orient/crop/!"+t.w+"x"+t.h+"a"+t.x+"a"+t.y;n=t.src.indexOf("?imageMogr2")>=0?n.replace(/\?/,"|"):n;var a={width:t.w,height:t.h,src:t.src+n,id:t.id,originSrc:t.src,cropSize:{x:i.x,y:i.y,w:i.w,h:i.h}};e.$broadcast("crop.success",a)},i}]).directive("eqxCropPreview",["imageCropService","dataCacheService",function(e,t){function i(e,i){n(e,i),e.$on("$destroy",function(){h=!1}),e.$on("cropItem.change",function(e,t){s(t)}),e.$on("cropImage.ok",function(n,a){h||(p=a,t.clear("fileService"),o(e,i))}),e.$on("crop.success",function(t,i){4!==p.type&&"4"!==p.type||(u&&(i.radioValue=u.value,u.lock&&""+u.value=="8"&&(i.lock=!0)),r(i)),""+p.type=="3"&&""+p.properties.type=="2"&&(i.type=2,i.pageLength=p.properties.pageLength),e.$close(i)})}function n(e,t){t.hide().load(function(){t.show();var i=$(".image_crop"),n={width:i.width(),height:i.height()},s=n.width/n.height;c={width:this.width,height:this.height};var o,r=c.width/c.height;c.width>n.width||c.height>n.height?r>s?(t.css({width:n.width,height:n.width/r}),o={position:"absolute",top:"50%",marginTop:-n.width/r/2}):(t.css({width:n.height*r,height:n.height}),o={margin:"auto"}):o={position:"absolute",left:"50%",top:"50%",marginLeft:-c.width/2,marginTop:-c.height/2},d={width:t.width(),height:t.height()},a(e,t,o)})}function a(e,t,i){var n,a,s=t.parent().attr("ctype"),o=e.cropSize,r={};o&&(r=e.cropSize.cropSize),n=d.width,a=d.height;var c=e.$parent.cropOption.currentItem;if(r&&(r.w>n&&(r.w=n,r.h=n/c.ratio),r.h>a&&(r.h=a,r.w=a*c.ratio),r.x2=r.x+r.w,r.y2=r.y+r.h),""+s===3||""+s=="square")n>a?n=a*c.ratio:a=n/c.ratio,t.Jcrop({keySupport:!1,aspectRatio:c.ratio,allowSelect:!1,setSelect:r?[r.x,r.y,r.x2,r.y2]:[0,0,n,a],onRelease:function(){this.setOptions({setSelect:[0,0,n,a]})}},function(){l=this});else{t.Jcrop({keySupport:!1,aspectRatio:c.ratio,allowSelect:!1,setSelect:r?[r.x,r.y,r.x2,r.y2]:[0,0,n,a],onRelease:function(){this.setOptions({setSelect:[0,0,n,a]})}},function(){l=this});var p;c.ratio===-1&&(p={aspectRatio:r.w/r.h,setSelect:[r.x,r.y,r.x2,r.y2]},l.setOptions(p))}$(".jcrop-holder").css(i)}function s(e){var t,i=d.width,n=d.height;if(u=e,e.ratio===-1){var a=l.tellSelect();t=e.lock?{aspectRatio:a.w/a.h,setSelect:[0,0,a.w,a.h]}:{aspectRatio:0,setSelect:[0,0,a.w,a.h]}}else 0===e.ratio?t={aspectRatio:i/n,setSelect:[0,0,i,n]}:(i>n?i=n*e.ratio:n=i/e.ratio,t={aspectRatio:i/n,setSelect:[0,0,i,n]});l.setOptions(t)}function o(t,i){var n=l.tellSelect(),a={};$.extend(a,n);var s=t.cropSize.cropSize;if(s&&parseInt(s.x,10)===parseInt(n.x,10)&&parseInt(s.w,10)===parseInt(n.w,10)&&parseInt(s.y,10)===parseInt(n.y,10)&&parseInt(s.h,10)===parseInt(n.h,10))return void t.$dismiss(p.properties.src);if(n.w===d.width&&n.h===d.height||0===n.w&&0===n.h){if(!p)return;return void t.$dismiss(p.properties.src)}if(""+p.type=="3"&&Math.abs(n.w-d.width)<=2&&Math.abs(n.h-d.height)<=2){var o={type:p.properties.type,src:p.properties.src,pageLength:p.properties.pageLength,id:p.properties.id};return void t.$close(o)}var r=c.width/d.width;a.ratio=r,n.w=parseInt(n.w*r,10),n.h=parseInt(n.h*r,10),n.x=parseInt(n.x*r,10),n.y=parseInt(n.y*r,10),n.y<0&&(n.y=0),n.x<0&&(n.x=0),n.src=i.attr("src").split(PREFIX_FILE_HOST)[1],n.x+n.w>c.width&&(n.w=c.width-n.x),n.y+n.h>c.height&&(n.h=c.height-n.y),""+p.type=="3"?n.fileType=0:n.fileType=1,delete n.x2,delete n.y2,p.cw&&(n.cw=p.cw),n.name=p.properties.name||"default.png",e.cropImage(n,a)}function r(e){var t=p;t.properties.src=e.src,t.properties.id=e.id,e.originSrc&&(t.properties.originSrc=e.originSrc,t.properties.cropSize=e.cropSize),e.radioValue&&(t.properties.radioValue=e.radioValue),e.lock?t.properties.lock=e.lock:t.properties.lock=!1;var i=e.width/e.height,n=$("#"+t.id),a=$("#inside_"+t.id),s=a.width(),o=a.height(),r=s/o;i>=r?(o=s/i,a.height(o),t.css.height=o,t.properties.height=o,n.outerHeight(o),n.outerWidth(s),n.css("marginLeft",0),n.css("marginTop",0)):(s=o*i,a.width(s),t.css.width=s,t.properties.width=s,n.outerWidth(s),n.outerHeight(o),n.css("marginTop",0),n.css("marginLeft",0)),n.attr("src",PREFIX_FILE_HOST+e.src+"/strip"),t.properties.imgStyle={},t.properties.imgStyle.width=n.outerWidth(),t.properties.imgStyle.height=n.outerHeight(),t.properties.imgStyle.marginTop=n.css("marginTop"),t.properties.imgStyle.marginLeft=n.css("marginLeft")}var l,c,d,p,u,h=!1;return{link:i}}]),angular.module("scene.create.console.input",[]),angular.module("scene.create.console.input").controller("InputConsoleCtrl",["$scope","$timeout","localizedMessages","obj",function(e,t,i,n){e.model={title:n.title,type:n.type,required:n.properties.required},e.authError="";var a="输入框";e.buttons=[{id:1,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",color:"rgb(0, 0, 0)"}},{id:2,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#fff",color:"rgb(0, 0, 0)"}},{id:3,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#f6b223",color:"rgb(0, 0, 0)"}},{id:4,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#333",color:"rgb(0, 0, 0)"}},{id:5,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#a0d86b",color:"rgb(0, 0, 0)"}},{id:6,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#f66",color:"rgb(0, 0, 0)"}}],angular.forEach(e.buttons,function(t,i){""!==e.model.title&&n.css.borderColor&&n.css.borderColor===t.btnStyle.borderColor&&(e.btnIndex=i)}),e.confirm=function(){return e.model.title&&0!==e.model.title.length?void e.$close(e.model):(e.authError="输入框名称不能为空",void $('input[type="text"]').focus())},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,i){e.model.btnStyle=t.btnStyle,e.btnIndex=i}}]),angular.module("scene.create.console.linkComponent",[]),angular.module("scene.create.console.linkComponent").controller("LinkComponentConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal","sceneService",function(e,t,i,n,a,s){e.model={title:n.properties.title,imgSrc:n.properties.imgSrc,url:{link:"external",externalLink:"http://"}},n.properties.url&&(angular.isNumber(n.properties.url)?(e.model.url.link="internal",e.model.url.internalLink=n.properties.url):(e.model.url.link="external",e.model.url.externalLink=decodeURIComponent(n.properties.url.split("=")[2]))),e.authError="",e.buttons=[{id:1,text:"点我购买",btnStyle:{width:"100px",backgroundColor:"rgb(244, 113, 31)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"点开链接",btnStyle:{width:"100px",backgroundColor:"rgb(253, 175, 7)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:3,text:"马上购买",btnStyle:{width:"100px",backgroundColor:"rgb(121, 196, 80)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"关注我们",btnStyle:{width:"100px",height:"30px",backgroundColor:"#fff","text-align":"center",border:"1px solid #3FB816","line-height":"30px",color:"rgb(0, 0, 0)"}}],e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.title="",e.btnIndex=-1,e.model.btnStyle={width:"115px",height:"115px","line-height":"1",backgroundColor:""},e.model.imgSrc=n.properties.imgSrc=t.data},function(){})},angular.forEach(e.buttons,function(t,i){""!==e.model.title&&n.css.backgroundColor&&n.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=i)});var o="http://";e.confirm=function(){return null!==e.model.imgSrc||e.model.title&&0!==e.model.title.length?e.model.url.internalLink||e.model.url.externalLink?("internal"===e.model.url.link?n.properties.url=e.model.url.internalLink:/^http:|^https:|^ftp:/.test(e.model.url.externalLink)?n.properties.url=e.model.url.externalLink:n.properties.url=o+e.model.url.externalLink,n.properties.title=e.model.title,void e.$close(e.model)):void(e.authError="链接不能为空"):(e.authError="按钮名称不能为空",void $("#buttonName").focus())},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,i){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=i,e.model.imgSrc=n.properties.imgSrc=null},e.removeLink=function(t){"external"===t?e.model.url.externalLink=null:"internal"===t&&(e.model.url.internalLink=0),e.model.url.link=""},e.changed=function(){"external"===e.model.url.link?e.model.url.internalLink=0:e.model.url.externalLink="http://"},e.selectRadio=function(t){"external"===t?e.model.url.link="external":"internal"===t&&(e.model.url.link="internal"),e.changed()},e.getPageNames=function(){var t=n.sceneId;s.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),angular.forEach(e.pageList,function(e){e.name||(e.name="第"+e.num+"页")}),n.properties.url&&angular.isNumber(n.properties.url)&&(e.model.url.link="internal",e.model.url.internalLink=n.properties.url)})},e.getPageNames()}]),angular.module("scene.create.console.link",["services.scene"]),angular.module("scene.create.console.link").directive("limitLinkLength",["ModalService",function(e){var t=40;return{restrict:"A",require:"?ngModel",link:function(i,n){n.blur(function(){var i=n.val()||"";i.length>t&&e.openMsgDialog({msg:'<div align="left">提示：链接过长有可能会导致链接组件打不开，建议生成短链接后再使用。生成短链接地址<a href="http://dwz.cn" target="_blank"><font color="#08A1EF">http://dwz.cn</font></a></div>'})})}}}]),angular.module("scene.create.console.link").controller("LinkConsoleCtrl",["$scope","$timeout","obj","sceneService",function(e,t,i,n){e.url={},e.url.externalLink="http://";var a,s="http://";e.confirm=function(){"external"===e.url.link?a=/^http:|^https:|^ftp:/.test(e.url.externalLink)?e.url.externalLink:s+e.url.externalLink:"internal"===e.url.link&&(a=e.url.internalLink.id),e.$close(a)},e.cancel=function(){e.$dismiss()},e.removeLink=function(t){"external"===t?e.url.externalLink="http://":"internal"===t&&(e.url.internalLink=e.pageList[0]),e.url.link=""},e.changed=function(){"external"===e.url.link?e.url.internalLink=e.pageList[0]:e.url.externalLink="http://"},e.selectRadio=function(t){e.url.link||("external"===t?e.url.link="external":"internal"===t&&(e.url.link="internal"))},e.getPageNames=function(){var t=i.sceneId;n.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),e.url.internalLink=e.pageList[0],angular.forEach(e.pageList,function(t){t.name||(t.name="第"+t.num+"页"),i.properties.url&&i.properties.url===t.id&&(e.url.link="internal",e.url.internalLink=t)}),i.properties.url&&isNaN(i.properties.url)&&(e.url.link="external",e.url.externalLink=decodeURIComponent(i.properties.url.split("=")[2]))})},e.getPageNames()}]),angular.module("scene.create.console.map",["app.directives.comp.editor"]),angular.module("scene.create.console.map").directive("eqdMap",["$timeout","$interval",function(e,t){return{scope:{center:"=",zoom:"=",bounds:"=",change:"&"},controller:["$scope",function(e){var i=this;i.addMark=function(i){if(e.map)i.setMap(e.map);else var n=t(function(){e.map&&(i.setMap(e.map),t.cancel(n))},400)}}],restrict:"A",link:function(i,n){function a(){e(function(){i.change()&&i.change()({zoom:i.zoom,center:i.center,bounds:r.getBounds()})},100)}var s=new qq.maps.LatLng(i.center.lat,i.center.lng),o={zoom:i.zoom,center:s,mapTypeControlOptions:{mapTypeIds:[]}},r=i.map=new qq.maps.Map(n.get(0),o),l=t(function(){var e=r.getBounds();e&&(r.panBy(-1,-1),e.lat.maxY!==e.lat.minY&&e.lng.maxX!==e.lng.minX&&(t.cancel(l),i.bounds=e))},400);qq.maps.event.addListener(r,"zoom_changed",function(){i.zoom=r.getZoom(),i.bounds=r.getBounds(),a()}),qq.maps.event.addListener(r,"center_changed",function(){i.center=r.getCenter(),i.bounds=r.getBounds(),a()}),i.$watch("zoom",function(e,t){e!==t&&r.setZoom(e)}),i.$watch("center",function(e,t){e!==t&&(s=new qq.maps.LatLng(e.lat,e.lng),r.panTo(s))})}}}]).directive("eqdMapMark",[function(){return{scope:{position:"="},require:"^eqdMap",restrict:"E",link:function(e,t,i,n){var a;e.position&&(a?a.setPosition(e.position):a=new qq.maps.Marker({position:e.position,animation:qq.maps.MarkerAnimation.DROP,map:null}),n.addMark(a)),e.$watch("position",function(t,i){t!==i&&(a?a.setPosition(e.position):a=new qq.maps.Marker({position:e.position,animation:qq.maps.MarkerAnimation.DROP,map:null}),t?n.addMark(a):a.setMap(null))})}}}]),angular.module("scene.create.console.micro",["app.directives.addelement","services.scene"]),angular.module("scene.create.console.micro").controller("MicroConsoleCtrl",["$scope","$timeout","localizedMessages","obj","sceneService","ModalService",function(e,t,i,n,a,s){e.model||(e.model={});var o=[];e.isSelected=[],e.backgroundColors=[{backgroundColor:"#D34141"},{backgroundColor:"#000"},{backgroundColor:"#23A3D3"},{backgroundColor:"#79C450"},{backgroundColor:"#fafafa"}],e.labelNames=[{id:1,title:"栏目一",color:{backgroundColor:""}},{id:2,title:"栏目二",color:{backgroundColor:""}},{id:3,title:"栏目三",color:{backgroundColor:""}},{id:4,title:"栏目四",color:{backgroundColor:""}}],e.model.color=n.properties.labels[0].color.backgroundColor,e.selectColor=function(t){e.model.color=t.backgroundColor,angular.forEach(e.labelNames,function(e){e.color.backgroundColor&&(e.color.backgroundColor=t.backgroundColor)})},angular.forEach(n.properties.labels,function(t){angular.forEach(e.labelNames,function(e){t.id===e.id&&(e.title=t.title,e.color.backgroundColor=t.color.backgroundColor,e.link=t.link,e.selected=!0,t.mousedown=!1)})}),e.confirm=function(){o=[];var t=0,i=0;angular.forEach(e.labelNames,function(e){e.selected&&(e.link?o.push(e):i++,t++)}),t<2?s.openMsgDialog({msg:"导航标签不能少于两个！"}):i>0?s.openMsgDialog({msg:"每个导航必须有链接页面！"}):e.$close(o)},e.cancel=function(){e.$dismiss()},e.switchLabel=function(t,i){e.label=t,t.selected?e.labelIndex===i?(t.color.backgroundColor="",t.selected=!1,t.mousedown=!1):(e.labelIndex=i,t.mousedown=!0):(t.color.backgroundColor=e.model.color,e.labelIndex=i,t.selected=!0,t.mousedown=!0),t.mousedown?(e.model.title=t.title,t.link?e.model.link=e.pageList[t.link]:e.model.link=e.pageList[0]):(e.model.title="",e.model.link=e.pageList[0])},e.selectLink=function(t){e.label.mousedown&&(e.label.link=t.num,console.log(e.labelNames))},e.changeLabelName=function(){e.label.mousedown&&(e.label.title=e.model.title)},e.getPageNames=function(){var t=n.sceneId;a.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),angular.forEach(e.pageList,function(e){e.name||(e.name="第"+e.num+"页")}),e.model.link=e.pageList[0]})},e.getPageNames()}]),angular.module("scene.create.console.pictures",["services.file"]).controller("picturesCtrl",["$scope","$timeout","$rootScope","$modal","picturesService","obj","ModalService",function(e,t,i,n,a,s,o){var r=530,l=265,c=e.picStyles=utilPictures.getPicStyle();e.currentImageIndex=-1;var d=angular.copy(s),p=e.position=d.css;if(null!=p.width&&null!=p.height){var u=p.width/p.height,h=r/l;u>h?(p.width=r,p.height=r/u):(p.height=l,p.width=l*u)}var g=e.properties=d.properties;g.autoPlay=null==g.autoPlay||g.autoPlay,g.interval=null==g.interval?2e3:g.interval,g.picStyle=null==g.picStyle?c[0]:utilPictures.getPicStyle(g.picStyle),g.bgColor=null==g.bgColor?"rgba(255,255,255,1)":g.bgColor,g.children=null==g.children?[]:g.children,a.setImages(g.children),e.authError="",e.choosePic=function(){return g.children.length>=6?void(e.authError="最多可选择6张图片"):void n.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"p",count:g.children.length,elemDef:s}}}}).result.then(function(e){$.each(e.selectedImages,function(e,t){a.addImages({src:t.src,desc:"",height:t.height,width:t.width})})},function(){})},e.ok=function(){return 0===g.children.length?void(e.authError="请选择图片"):(g.picStyle=g.picStyle.value,s.properties=g,void e.$close(g))},e.cancel=function(){e.$dismiss()},e.$on("currentImage.update",function(t,i){e.currentImageIndex=i}),e.$on("images.add",function(e,t){g.children=t}),e.$on("images.update",function(e,t){g.children=t})}]).factory("picturesService",["$rootScope","fileService",function(e,t){var i,n,a={},s=[];return a.setJcrop=function(t){e.$broadcast("jcrop.update",t)},a.setImageSize=function(t){e.$broadcast("image.update",t)},a.setCurrentImage=function(t){n=t,e.$broadcast("currentImage.update",t)},a.getCurrentImage=function(){return n},a.addImages=function(t){s.push(t),e.$broadcast("images.add",s)},a.updateImages=function(t,i){s.splice(t,1,i),e.$broadcast("images.update",s)},a.deleteImages=function(t){s.splice(t,1),e.$broadcast("images.update",s)},a.setImages=function(e){return s=e},a.getImages=function(){return s},a.setProperties=function(e){i=e},a.getProperties=function(){return i},a.cropImage=function(i){t.cropImage(i).success(function(t){if(t.success){var n={width:i.w,height:i.h,desc:"",src:t.obj};e.$broadcast("crop.success",n)}else ModalService.openMsgDialog({msg:t.msg})}).error(function(){ModalService.openMsgDialog({msg:"网络连接超时，请稍后重试"})})},a}]).directive("eqxPicturesImageCrop",["$compile","picturesService",function(e,t){return{link:function(i,n){var a=$(n),s=$(".pic-preview"),o={width:s.width(),height:s.height()};i.showOperation=!0;var r,l='<div class="operation" ng-show="!showOperation"><a class="quxiao" ng-click="cropCancel()">取消</a><a class="finish" ng-click="cropOk()">完成</a></div>';i.$on("image.update",function(e,t){r={width:t.width,height:t.height}}),i.$on("jcrop.update",function(n,c){s.append(e(l)(i)),i.showOperation=!0,i.$apply();var d=s.children("img"),p={width:d.width(),height:d.height()};a.removeClass("hover").unbind("click").click(function(){var e=t.getImages();0!==e.length&&(i.showOperation=$(this).hasClass("hover"),i.showOperation?($(this).removeClass("hover"),c.release(),c.disable()):($(this).addClass("hover"),c.setSelect([0,0,p.width,p.height]),c.enable()))}),i.cropOk=function(){var e=c.tellSelect();if(!(e.w===o.width&&e.h===o.height||0===e.w&&0===e.h)){var i=r.width/p.width;e.w=parseInt(e.w*i,10),e.h=parseInt(e.h*i,10),e.x=parseInt(e.x*i,10),e.y=parseInt(e.y*i,10),e.x2=parseInt((e.w+e.x)*i,10),e.y2=parseInt((e.h+e.y)*i,10),e.src=d.attr("src").split(PREFIX_FILE_HOST)[1],t.cropImage(e)}},i.cropCancel=function(){i.showOperation=!0,a.removeClass("hover"),c.release(),c.disable()}})}}}]).directive("eqxPicturesImagePreview",["picturesService",function(e){return{link:function(t,i){var n,a,s=$(i),o=$(".pic-preview"),r={width:o.width(),height:o.height()},l=r.width/r.height;s.hide(),s.load(function(){s.show(),a={width:this.width,height:this.height},e.setImageSize(a);var t,i=a.width/a.height;i>l?($(this).css({width:r.width,height:r.width/i}),t={position:"absolute",top:"50%",marginTop:-r.width/i/2}):($(this).css({width:r.height*i,height:r.height}),t={margin:"auto"}),s.Jcrop({keySupport:!1,aspectRatio:l},function(){n=this}),$(".jcrop-holder").css(t),e.setJcrop(n),n.disable()})}}}]).directive("eqxPicturesImageClick",["$compile","picturesService",function(e,t){function i(t,i){$(".pic-preview").html(e('<img eqx-pictures-image-preview ng-src="'+i+'" />')(t))}return{link:function(e,n){var a=$(n);a.click(function(){if(!a.hasClass("hover")){var n=a.index();t.setCurrentImage(n),i(e,$(this).find(".pic-img").attr("src"))}}),a.children(".delete-img").click(function(i){i.stopPropagation(),a.hasClass("hover")&&$(".pic-preview").empty();
var n=a.index();t.deleteImages(n);var s=t.getCurrentImage();n<s?t.setCurrentImage(--s):n===s&&t.setCurrentImage(-1),e.$apply()}),e.$on("crop.success",function(n,s){if(a.hasClass("hover")){var o=PREFIX_FILE_HOST+s.src;i(e,o);var r=a.index();t.updateImages(r,s)}})}}}]),angular.module("scene.create.console.pictures1",["services.file"]).controller("pictures1Ctrl",["$rootScope","$scope","$modal","picturesCropService","obj","dataCacheService",function(e,t,i,n,a,s){function o(e){var t;u.children[e].originSrc&&(t=u.children[e].originSrc),l.currentImage={index:e,src:u.children[e].src+"?t="+Date.now(),originSrc:t}}function r(e,i,n){$("<img>").attr("src",PREFIX_FILE_HOST+i).load(function(){$.extend(g.items[e],{coordinate:{x:0,y:0,x2:this.width,y2:this.height,w:this.width,h:this.height,src:i,name:n,fileType:1,index:e},realSize:{width:this.width,height:this.height}}),t.distoryElem.properties.children&&t.distoryElem.properties.children[e]&&t.distoryElem.properties.children[e].cropSize&&(g.items[e].coordinate.x=t.distoryElem.properties.children[e].cropSize.x,g.items[e].coordinate.y=t.distoryElem.properties.children[e].cropSize.y,g.items[e].coordinate.w=t.distoryElem.properties.children[e].cropSize.w,g.items[e].coordinate.h=t.distoryElem.properties.children[e].cropSize.h)})}t.distoryElem=a;var l=t.imageOption={title:"图集组件",desc:"通过图片裁切可制作超酷图集",showCrop:!1,showLoading:!1,currentImage:{index:-1,src:""}},c=t.cropOption={showItems:!0,imgSrc:a.properties.src,cropItems:[{value:2,ratio:1,desc:"1:1"},{value:3,ratio:4/3,desc:"4:3"},{value:4,ratio:.75,desc:"3:4"},{value:5,ratio:320/486,desc:"标准屏比例"},{value:6,ratio:320/243,desc:"1/2屏比例"},{value:7,ratio:320/162,desc:"1/3屏比例"},{value:8,ratio:-1,desc:"自定义",lock:!1}]};a.properties.ratioItem?(a.properties.lock&&""+a.properties.ratioItem=="8"&&(c.cropItems[a.properties.ratioItem-2].lock=!0),c.currentItem=c.cropItems[a.properties.ratioItem-2]):c.currentItem=c.cropItems[0];var d=t.picStyles=utilPictures.getPicStyle(),p=angular.copy(a),u=t.properties=p.properties;u.autoPlay=!u.autoPlay==!0||u.autoPlay,u.interval=!u.interval==!0?2e3:u.interval,u.picStyle=!u.picStyle==!0?d[0]:utilPictures.getPicStyle(u.picStyle),u.bgColor=!u.bgColor==!0?"rgba(255,255,255,0)":u.bgColor,u.children=!u.children==!0?[]:u.children,u.children.length>0&&(l.showCrop=!0,o(0));for(var h=0;h<6;h++)u.children[h]?r(h,u.children[h].originSrc?u.children[h].originSrc:u.children[h].src,u.children[h].name):u.children.push({});var g=n.getCoordinateObj();t.cropItemChange=function(t){null===t.lock&&(c.cropItems[6].lock=!1),c.currentItem=t,e.$broadcast("cropItem.change",t)},t.addPictures=function(e,t,n){e.stopPropagation();var s=0;n?$.each(u.children,function(e,t){t.src&&s++}):s=5,i.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"p",count:s,elemDef:a}}}}).result.then(function(e){l.showCrop=!0;var i=t,a=0,s=u.children.length;if(n)for(;i<s;){if(!u.children[i++].src){var c=e.selectedImages[a++];u.children[i-1]={src:c.src,desc:"",height:c.height,width:c.width,name:c.name},r(i-1,c.src,c.name),o(t)}if(a===e.selectedImages.length)break;i===s&&(i=0)}else{var d=e.selectedImages[0];u.children[t]={src:d.src,desc:"",height:d.height,width:d.width},r(t,d.src,d.name),o(t)}})},t.setPicturesSize=function(e){var t,i,n,s=e.children[0],o=s.width/s.height;p.css.width||p.css.height?(t=p.css.width/p.css.height,o>t?(i=p.css.width,n=i/o):(n=p.css.height,i=n*o)):(t=2,o>t?(i=320,n=i/o):(n=160,i=n*o)),a.css.width=i,a.css.height=n},t.delPicture=function(t){u.children[t]={},g.items[t]={},t===l.currentImage.index&&(l.currentImage.index=-1,e.$broadcast("image.delete",t))},t.changePicture=function(e){l.currentImage.index!==e&&o(e)};var m=!0;t.ok=function(){if(m)return m=!1,0===u.children.length?void(l.desc="请选择图片，最多添加6张"):void(n.getCropping()||(l.showLoading=!0,e.$broadcast("cropImage.ok",u)))},t.cancel=function(){t.$dismiss()},t.$on("crop.complete.all",function(e,i){u.picStyle=u.picStyle.value,$.each(i,function(e,t){u.children[t.index]=t}),s.clear("fileService");for(var n=angular.copy(u),a=n.children,o=5;o>=0;o--)a[o].src||a.splice(o,1);m=!0,t.setPicturesSize(n),t.$close(n)}),t.$on("crop.fail",function(){n.setCropping(!1),l.showLoading=!1})}]).factory("picturesCropService",["$rootScope","fileService",function(e,t){var i,n={},a=[],s=!1,o=0,r=0;return n.getCoordinateObj=function(){return i},n.initCoordinateObj=function(){i={ratio:null,items:[]};for(var e=0;e<6;e++)i.items.push({})},n.setCropCount=function(e){var t=0;if(e&&e.items)for(var i=0;i<e.items.length;i++)e.items[i].coordinate&&e.items[i].coordinate.src&&t++;o=t},n.getCropCount=function(){return o},n.setCropping=function(e){s=e},n.getCropping=function(){return s},n.cropImage=function(t,i,n){var s;s=n?i:t;var l="?imageMogr2/auto-orient/crop/!"+s.w+"x"+s.h+"a"+s.x+"a"+s.y,c={width:i.w,height:i.h,src:i.src+l,originSrc:i.src,id:i.id,cropSize:{x:i.x,y:i.y,w:i.w,h:i.h},desc:"",index:t.index};a.push(c),r++,o===r&&(o=r=0,e.$broadcast("crop.complete.all",angular.copy(a)),a.length=0)},n.initCoordinateObj(),n}]).directive("eqxPicturesCropPreview",["picturesCropService",function(e){function t(t,n){var a=e.getCoordinateObj();p=t,i(n,a),t.$on("$destroy",function(){l=c=d=null,e.initCoordinateObj(),e.setCropping(!1)}),t.$on("cropItem.change",function(e,t){o(t)}),t.$on("image.delete",function(){$(".image_crop").children("div").remove()}),t.$on("cropImage.ok",function(e,i){d&&d.value&&(i.ratioItem=d.value,d.lock?i.lock=!0:i.lock=!1),r(t,i,a)})}function i(e,t){var i=$(".image_crop"),a={width:i.width(),height:i.height()},s=a.width/a.height;e.hide().load(function(){var i={width:this.width,height:this.height};e.removeAttr("style").show();var o,r=i.width/i.height;i.width>a.width||i.height>a.height?r>s?(e.css({width:a.width,height:a.width/r}),o={position:"absolute",top:"50%",marginTop:-a.width/r/2}):(e.css({width:a.height*r,height:a.height}),o={margin:"auto"}):o={position:"absolute",left:"50%",top:"50%",marginLeft:-i.width/2,marginTop:-i.height/2},c={width:e.width(),height:e.height()};var l=e.attr("index");$.extend(t.items[l],{displaySize:c}),n(e,t,o,l)})}function n(e,t,i,n){l&&(l.destroy(),l=null);var s,o=c.width,r=c.height,u=!1;p.distoryElem.properties.children&&p.distoryElem.properties.children[n]&&p.distoryElem.properties.children[n].cropSize&&(u=!0),s=t.items[n].coordinate,s&&(s.w>o&&(t.ratio=t.items[0].coordinate.w/t.items[0].coordinate.h,s.w=o,s.h=o/t.ratio),s.h>r&&(t.ratio=t.items[0].coordinate.w/t.items[0].coordinate.h,s.h=r,s.w=r*t.ratio),s.x2=s.x+s.w,s.y2=s.y+s.h);var h;h=d&&d.ratio===-1?0:d?d.ratio:u?s.w/s.h:1,e.Jcrop({keySupport:!1,aspectRatio:h,allowSelect:!1,setSelect:s?[s.x,s.y,s.x2,s.y2]:[0,0,o,r],onRelease:function(){this.setOptions({setSelect:[0,0,o,r]})},onSelect:function(){l&&a(n,t)}},function(){l=this,a(n,t)}),$(".jcrop-holder").css(i)}function a(e,t){var i=l.tellSelect();i.w||(i.w=i.x2-i.x),i.h||(i.h=i.y2-i.y),t.ratio=i.w/i.h,$.extend(t.items[e].coordinate,i),$.each(t.items,function(e,i){var n=i.coordinate;n&&s(n,t)})}function s(e,t){var i=e.w/e.h;i>t.ratio?(e.w=e.h*t.ratio,e.x2=e.x+e.w):(e.h=e.w/t.ratio,e.y2=e.y+e.h)}function o(e){d=e;var t,i=c.width,n=c.height;if(e.ratio===-1){var a=l.tellSelect();t=e.lock?{aspectRatio:a.w/a.h,setSelect:[0,0,a.w,a.h]}:{aspectRatio:0,setSelect:[0,0,a.w,a.h]}}else i>n?i=n*e.ratio:n=i/e.ratio,t={aspectRatio:i/n,setSelect:[0,0,i,n]};l.setOptions(t)}function r(t,i,n){var a=[];$.each(n.items,function(t,i){var o=i.coordinate,r=i.realSize;if(o&&r){if(u={},$.extend(!0,u,i.coordinate),s(o,n),i.displaySize){var l=r.width/i.displaySize.width;o.w=Math.ceil(o.w*l),o.h=Math.ceil(o.h*l),o.x=Math.ceil(o.x*l),o.y=Math.ceil(o.y*l)}else{var c=o.w/o.h,d=r.width/r.height;d>c?(o.w=Math.ceil(r.height*c),o.h=r.height):(o.w=r.width,o.h=Math.ceil(r.width/c))}o.x+o.w>i.realSize.width&&(o.w=r.width-o.x),o.y+o.h>i.realSize.height&&(o.h=r.height-o.y),o.w===r.width&&o.h===r.height||0===o.w||0===o.h?(a.push({src:o.src,desc:"",height:o.h,width:o.w}),e.setCropCount(n),e.cropImage(o,o,!1)):(delete o.x2,delete o.y2,e.setCropping(!0),e.setCropCount(n),e.cropImage(o,u,!1))}})}var l,c,d,p;return{link:t};var u}]),angular.module("scene.create.console.radio.checkbox",[]),angular.module("scene.create.console.radio.checkbox").directive("stopPropagation",function(){return function(e,t){t.bind("keydown",function(e){e.stopPropagation()})}}),angular.module("scene.create.console.radio.checkbox").controller("RadioCheckboxConsoleCtrl",["$scope","$timeout","localizedMessages","obj","ModalService",function(e,t,i,n,a){function s(e){var t=$("#optionGroupContainer"),i=t.find(".option-group").eq(e),n=72,a=i.position().top;a>n&&t.scrollTop(t.scrollTop()+(a-n))}var o=JSON.parse(n.choices);e.model={title:n.title,type:n.type,options:o.options,required:n.properties.required},e.buttons=[{id:1,btnStyle:{backgroundColor:"#08a1ef",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#08a1ef",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#08a1ef",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#08a1ef"}}},{id:2,btnStyle:{backgroundColor:"#fff",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#fff",color:"rgb(0, 0, 0)"},properties:{titleStyle:{backgroundColor:"#fff",color:"#000"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#fff"}}},{id:3,btnStyle:{backgroundColor:"#f6b223",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#f6b223",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#f6b223",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#f6b223"}}},{id:4,btnStyle:{backgroundColor:"#333",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#333",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#333",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#333"}}},{id:5,btnStyle:{backgroundColor:"#a0d86b",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#a0d86b",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#a0d86b",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#a0d86b"}}},{id:6,btnStyle:{backgroundColor:"#ff6666",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#ff6666",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#ff6666",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#ff6666"}}}],angular.forEach(e.buttons,function(t,i){n.properties.titleStyle&&n.properties.titleStyle.backgroundColor===t.properties.titleStyle.backgroundColor&&(e.btnIndex=i)}),e.chooseTabButton=function(t,i){e.model.btnStyle=t.btnStyle,e.btnIndex=i,$.extend(n.css,{borderStyle:t.btnStyle.borderStyle,borderColor:t.btnStyle.borderColor})},e.authError="",e.addNewOption=function(t){e.model.options.length<8?(++o.seq,e.model.options.splice(t+1,0,{id:o.seq,label:"选项"+o.seq}),setTimeout(function(){s(t)})):a.openMsgDialog({msg:"（您可以添加八个选项，每个选项最多请不要超过41字）"})},e.deleteTheOption=function(t){e.model.options.length>1&&a.openConfirmDialog({msg:"您确定要删除内容为“"+e.model.options[t].label+"”的选项？<br/>删除选项后，将导致该选项已收集的数据无法正确地显示。"},function(){e.model.options.splice(t,1)})},e.confirm=function(){return e.model.title&&0!==e.model.title.length?(angular.forEach(e.model.options,function(e){delete e.$$hashKey}),n.choices=JSON.stringify(o),n.properties.required=e.model.required,(e.btnIndex||0===e.btnIndex)&&$.extend(n.properties,e.buttons[e.btnIndex].properties),void e.$close(e.model)):(e.authError="输入框名称不能为空",void $("#radioTitle").focus())},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create.console.randomevent",["app.directives.responsiveImage"]),angular.module("scene.create.console.randomevent").controller("RandomEventCtrl",["$scope","$rootScope","randomEventService","$modal","obj",function(e,t,i,n,a){a.properties.pics.length?e.picList=a.properties.pics:e.picList=[],e.delImage=function(t){e.picList.splice(t,1)},e.replaceImage=function(t){n.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"n",count:9,elemDef:a}}}}).result.then(function(i){e.picList[t]=i.selectedImages[0]})},e.choosePic=function(){return e.picList.length>=10?void(e.authError="最多可选择10张图片"):void n.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"n",count:e.picList.length,elemDef:a}}}}).result.then(function(t){$.each(t.selectedImages,function(t,i){e.picList.unshift(i)})})},e.confirm=function(){e.$close(e.picList)},e.cancel=function(){e.$dismiss()}}]).factory("randomEventService",["$rootScope",function(){var e={};return e}]),angular.module("scene.create.console.rating",["common.directives.inputColor"]),angular.module("scene.create.console.rating").controller("RatingConsoleCtrl",["$scope","$timeout","localizedMessages","obj",function(e,t,i,n){e.model={title:n.title,properties:{icon:n.properties.icon,size:n.properties.size,color:n.properties.color,required:n.properties.required}},e.authError="",e.confirm=function(){return e.model.title&&0!==e.model.title.length?($.extend(!0,n,e.model),void e.$close(e.model)):(e.authError="标题名称不能为空",void $("#ratingTitle").focus())},e.chooseEqfont=function(t){e.model.properties.icon=t},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create.console.scene-setting-component",["scene.preview","scene.custom.activities","services.qCloud"]).controller("SceneSettingComponentController",["$q","$routeParams","$rootScope","$scope","$element","sceneService","MineService","dataService","$sce","$modal","usercenterService","security","pageTplService","i18nNotifications","ModalService","sceneSettingCache","memberHandler","eqADTypeChoice","staticResService","sceneDataParseService","dataCacheService","fileService","storageService","customActivitiesService","qCloudService","$location",function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,g,m,f,v,b,y,w,x,k,S,T,C){function E(e){D.test(e)?n.coverUrl=e:n.coverUrl=eqShow.qiniuZoom({css:{width:180,height:180}},e)}function P(e,t){var i=!0;switch(e){case v.HIDE:n.eqShowType=H.EQHIDE,n.scene.property.eqAdType=v.HIDE,n.scene.property.hideEqAd=!0;break;case v.DEFAULT_BOTTOM:n.eqShowType=H.EQLINK,n.scene.property.eqAdType=v.DEFAULT_BOTTOM,n.scene.property.hideEqAd=!1;break;case v.CUSTOM_BOTTOM:n.eqShowType=H.EQLINK,n.scene.property.eqAdType=v.CUSTOM_BOTTOM,n.scene.property.hideEqAd=!1,[2,21].indexOf(p.currentUser.type)!==-1&&[7,8,9].indexOf(p.currentUser.memberType)!==-1&&z(),n.scene.property.bottomLabel&&n.scene.property.bottomLabel.id||(n.chooseCustomBottomLabel(n.bottomPageTpls[0].id),i=!1);break;case v.DEEPSHARE_PAGE:n.eqShowType=H.EQAPP,n.scene.property&&(n.scene.property.eqAdType=v.DEEPSHARE_PAGE,n.scene.property.hideEqAd=!1);break;default:case v.FREEPAGE:n.eqShowType=H.EQFREE,n.scene.property&&(n.scene.property.eqAdType=v.FREEPAGE,n.scene.property.hideEqAd=!1)}t&&(n.$broadcast("changeView",!1),i&&y.changeBottomType(n.eqShowType,n.scene.property.lastPageId,n.scene.property.bottomLabel,n.scene.property.eqAdType))}function I(e){n.newCoverImage.tmbPath=e,n.newCoverImage.path=e,n.scene.cover=n.newCoverImage.path,y.changeSceneCover(n.scene.cover),E(n.scene.cover)}function _(){return!(!n.scene.name||!n.scene.name.trim())||(g.openMsgDialog({msg:"场景标题不能为空！"}),!1)}function L(){return!n.scene.accessCode||""+n.scene.applyPromotion=="0"&&""+n.scene.applyTemplate=="0"?3!==n.sceneStatue||n.scene.accessCode&&4===n.scene.accessCode.length?"1"!==n.scene.isShow||n.scene.tagId?n.scene.promIds&&(n.scene.property.eqAdType!==v.FREEPAGE||n.scene.property.adSpend)?(g.openMsgDialog({msg:"该场景已选择清除易企秀尾页，不可以参加活动；请复制该场景展示后，再次选择参与活动。"}),!1):!(n.appendActive&&!n.scene.promIds)||(g.openMsgDialog({msg:"请选择活动尾页！"}),!1):(g.openMsgDialog({msg:"请选择申请秀场的场景类型"},function(){$("#tag").focus()}),!1):(g.openMsgDialog({msg:"请输入有效的场景密码！"}),!1):(g.openMsgDialog({msg:"申请样例、推荐的场景不能同时设置密码，请修改。"}),!1)}function M(){return!n.scene.property||n.scene.property.eqAdType!==v.CUSTOM_BOTTOM||n.scene.property.bottomLabel&&n.scene.property.bottomLabel.id?n.scene.property&&n.scene.property.bottomLabel&&3===n.scene.property.eqAdType&&n.scene.property.bottomLabel.name&&countCharacters(n.scene.property.bottomLabel.name)>16?(g.openMsgDialog({msg:"品牌联合底标自定义名称不能超过16个字符"}),!1):n.scene.property&&3===n.scene.property.eqAdType&&n.scene.property.bottomLabel&&!n.scene.property.bottomLabel.name&&n.scene.property.bottomLabel.url&&"http://"!==n.scene.property.bottomLabel.url?(g.openMsgDialog({msg:"请输入自定义底标名称"}),!1):n.scene.promIds&&n.activityPageTpls.length&&!n.scene.property.activityPageId?(g.openMsgDialog({msg:"请选择活动尾页！"}),!1):n.oldSceneApplyState.promIds&&n.scene.property.eqAdType!==v.FREEPAGE?(g.openMsgDialog({msg:"该场景已选择参加活动，不可以清除易企秀尾页，请重新选择！"}),!1):!(n.loadingLogo&&!n.scene.loadingLogo)||(g.openMsgDialog({msg:"请设置加载logo！"}),!1):(g.openMsgDialog({msg:"请选择您要使用的自定义底标！"}),!1)}function R(){function e(){1===n.scene.staticStatus?g.openConfirmDialog({msg:"场景已经静态化,设置更改后不能及时更新,确定更改吗",confirmName:"确定",cancelName:"取消"},function(){s.saveSceneSettings(n.scene).then(function(e){200===e.data.code?(w.clear("sceneList"),h.pushForCurrentRoute("scene.setting.success","notify.success"),t&&(n.$parent.sceneSetting.showFlag=!1,eqShow.templateParser("jsonParser").mode="edit"),n.$parent.sceneSetting.oldBgAudio!==n.scene.bgAudio&&x.saveFilesHistory(JSON.parse(n.scene.bgAudio).id,2).then(function(){w.clear("fileService1")}),n.$parent.sceneSetting.oldBgAudio=n.scene.bgAudio,e.data.obj?angular.copy(e.data.obj,s.getCurrentScene()):angular.copy(n.scene,s.getCurrentScene()),A.resolve(e)):(g.openMsgDialog({msg:e.data.msg}),angular.isString(n.scene.property)&&(n.scene.property=JSON.parse(n.scene.property)),n.scene.type=""+n.scene.type,A.reject(e))},function(e){n.invalidText=e,A.reject(e)})},function(){}):s.saveSceneSettings(n.scene).then(function(e){200===e.data.code?(w.clear("sceneList"),h.pushForCurrentRoute("scene.setting.success","notify.success"),t&&(n.$parent.sceneSetting.showFlag=!1,eqShow.templateParser("jsonParser").mode="edit"),n.$parent.sceneSetting.oldBgAudio!==n.scene.bgAudio&&n.scene.bgAudio&&x.saveFilesHistory(JSON.parse(n.scene.bgAudio).id,2).then(function(){w.clear("fileService1")}),n.$parent.sceneSetting.oldBgAudio=n.scene.bgAudio,e.data.obj?angular.copy(e.data.obj,s.getCurrentScene()):angular.copy(n.scene,s.getCurrentScene()),A.resolve(e)):(g.openMsgDialog({msg:e.data.msg}),angular.isString(n.scene.property)&&(n.scene.property=JSON.parse(n.scene.property)),n.scene.type=""+n.scene.type,A.reject(e))},function(e){n.invalidText=e,A.reject(e)})}var t=!0;n.isFormerScene&&n.adSpend===f.getPriceByADType(n.scene.property.eqAdType)&&delete n.scene.property.eqAdType,""+n.scene.property.showShareCount!="1"||n.scene.property.shareDes||(n.scene.property.shareDes=n.shareCountPlaceholder),angular.isObject(n.scene.property)&&(n.scene.property=angular.toJson(n.scene.property)),angular.isString(n.scene.type)&&(n.scene.type=parseInt(n.scene.type,10)),n.$parent.scene.bgAudio&&(n.scene.bgAudio=angular.isObject(n.$parent.scene.bgAudio)?JSON.stringify(n.$parent.scene.bgAudio):n.$parent.scene.bgAudio),n.scene.loadingLogo===!1&&delete n.scene.loadingLogo,n.scene.property=JSON.parse(n.scene.property),n.scene.property.shareDes=n.weChatShare,(n.weChatShare.title.type||n.weChatShare.description.type||n.weChatShare.avatar)&&(n.scene.property.wxAuth=!0),n.scene.property=JSON.stringify(n.scene.property),e()}n.isVipUser=f.isVipUser,n.oriSceneState=!1,n.sceneState=!1;var q="mta",D=/.svg/;C.search().thridParty&&C.search().thridParty===q?n.tabid="companyset":n.tabid="customset";var A=e.defer();(21===i.user.type&&i.userPermit.indexOf(",1401,")>=0||21!==i.user.type)&&(n.sceneBuyXd=!0);var F=!0;n.changePage=!0,1!==p.currentUser.type&&(2!==p.currentUser.type&&21!==p.currentUser.type||p.currentUser.memberType)||(n.changePage=!1,F=!1);var z=function(){d.getCompanyInfo().then(function(e){e.data.success&&(n.scene.property.bottomLabel?n.scene.property.bottomLabel.name||(n.scene.property.bottomLabel.name=e.data.obj.name):n.scene.property.bottomLabel={name:e.data.obj.name})})};if(s.getPageNames(n.scene.id).then(function(e){if(e.data.success){n.XBinScene=!1;for(var t=0;t<e.data.list.length;t++)e.data.list[t].properties&&e.data.list[t].properties.xb&&(n.XBinScene=!0)}else g.openMsgDialog({msg:e.data.msg})}),n.$watch("XBinScene",function(e,t){e!==t&&(n.scene.publishTime?n.scene.publishTime&&n.XBinScene?n.applyTplTip="该场景包含秀版":n.applyTplTip="申请为样例":n.applyTplTip="发布后才能申请样例")}),n.freeUpgrade=function(){g.openConfirmDialog({msg:"付费企业功能，是否升级？",confirmName:"立即升级",cancelName:"我知道了"},function(){window.open("/privilege")})},n.setPhoneCtrl=function(){var e=n.scene.pageMode;0===e||1===e||2===e||6===e||7===e||8===e||11===e||12===e||13===e||14===e?n.phonePageMode="NS":n.phonePageMode="EW"},n.user&&n.user.expiryTime){var N=(new Date).getTime();n.user.expiryTime<=N&&(n.user.memberType=null)}S.getActivite().then(function(e){e.data.obj&&(n.activityObj=e.data.obj)});var O=["101","102","103","104","105","106"];n.scene?(n.scene.accessCode?n.sceneStatue=3:(n.sceneStatue=n.scene.status,n.sceneStatue<0&&(n.sceneStatue=1)),n.appendActive=!!n.scene.promIds,n.oldAppendActive=n.appendActive,n.loadingLogo=!!n.scene.loadingLogo,O.indexOf(n.scene.type+"")===-1&&(n.scene.type="101"),n.setPhoneCtrl(),E(n.scene.cover)):n.$watch("sceneId",function(e,t){e!==t&&(n.scene.accessCode?n.sceneStatue=3:n.sceneStatue=n.scene.status,n.loadingLogo=!!n.scene.loadingLogo,n.appendActive=!!n.scene.promIds,n.oldAppendActive=n.appendActive,O.indexOf(n.scene.type+"")===-1&&(n.scene.type="101"),n.setPhoneCtrl(),E(n.scene.cover))}),n.$watch("scene",function(e,t){e!==t&&(n.oldScene=JSON.stringify(n.scene))}),n.closeSetting=function(){JSON.stringify(n.scene)!==n.oldScene?g.openConfirmDialog({msg:"设置内容有变化，是否确认修改"},function(){n.saveSceneSettings(n.scene)},function(){n.sceneSetting.showFlag=!1}):n.sceneSetting.showFlag=!1,eqShow.stopSnowFly&&clearInterval(eqShow.stopSnowFly),eqShow.stopFallingObject&&clearInterval(eqShow.stopFallingObject),eqShow.stopFireworkEffect&&eqShow.stopFireworkEffect(),eqShow.templateParser("jsonParser").mode="edit"},n.logoPrice=100,n.memberPrice=100,n.sceneSetting.saveSceneSetting=function(){return A=e.defer(),n.saveSceneSettings(n.scene),A.promise},n.isAllowToAccessLastPageSetting=p.isAllowToAccess(p.accessDef.SCENE_HIDE_LASTPAGE_SETTING),n.isAllowedToAccessNewPageFlip=p.isAllowToAccess(p.accessDef.ACCESS_NEW_PAGEFLIP),n.isAllowedToAccessOpenQCloud=p.isAllowToAccess(p.accessDef.ACCESS_QCLOUD)&&([6,7,8,9].indexOf(n.user.memberType)!==-1||5===n.user.type),2!==p.currentUser.type&&21!==p.currentUser.type||f.initUserMemberDetail(function(e){n.memberObj=e,n.memberObj.loadingLogo&&(n.memberObj.loadingLogo=parseFloat(n.memberObj.loadingLogo,10)),n.memberObj.tailPage&&(n.memberObj.tailPage=parseFloat(n.memberObj.tailPage,10)),n.logoPrice=f.getPriceWithMemberPrivilege(100,!0),n.memberPrice=f.getPriceWithMemberPrivilege(100,!1)});var U={SHARE_SCENE:"shareScene",LOADING_LOGO:"loadingLogo",EQSHOW:"eqShow"};n.eqSceneSettingTabs=U,n.eqSceneSettingCurrent=U.SHARE_SCENE;var H={EQFREE:"eqFree",EQLINK:"eqLink",EQHIDE:"eqHide",EQAPP:"eqApp"};n.eqADTypeChoice=v,n.switchToAdState=P,n.adSpend=0,n.isFormerScene=!1,n.nextPage=function(){y.app.nextPage(),i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name},n.prePage=function(){y.app.prePage(),i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name},n.changeSceneName=function(){y.changeSceneName(n.scene.name)},n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.alwaysOpen=!0,n.changeView=function(){n.showPhoneTitle="正在设置的内容用于场景分享时显示",i.$broadcast("changeView",!0)},n.changeTagId=function(){n.$parent.scene.tagId&&(n.scene.tagId=n.$parent.scene.tagId,h.pushForCurrentRoute("already.apply.discovery","notify.success"))},n.changeAppendActive=function(e){if(n.oldSceneApplyState.promIds&&(n.scene.promIds!==n.oldSceneApplyState.promIds||!n.appendActive))return n.appendActive=!0,void g.openMsgDialog({msg:"该场景已经参与活动，不可参与其他活动；请复制该场景展示后，再次选择参与活动。"});var t;return e||!n.appendActive||(t=k.get("appendActive"),t&&t.split(",").indexOf(i.user.id)!==-1)?(e||n.appendActive||!n.scene.promIds||y.removeActivePage(),e&&(n.appendActive=!0,n.showActiveTip=!1,n.hideActiveTip&&(t=k.get("appendActive"),t?t+=","+i.user.id:t=i.user.id,k.push("appendActive",t))),void(n.appendActive||(n.scene.promIds=null,n.activityPageTpls=[]))):(n.appendActive=!1,void(n.showActiveTip=!0))},n.changeLoop=function(){i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name,y.app.setTriggerLoop(n.scene.property.triggerLoop)},n.changePageMode=function(){i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name,n.setPhoneCtrl(),y.changeScrollMode(n.scene.pageMode)},n.changeProgess=function(){i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name,i.$broadcast("processBar",n.scene.property.slideNumber)},n.changeCode=function(){i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name,i.$broadcast("passPanelSwitch",n.scene.isAccessCode)},n.changeLogo=function(){return n.isLoadingLogoAccessible?(n.loadingLogo=!n.loadingLogo,n.loadingLogo?n.showPhoneTitle="正在设置的内容用于场景加载时显示":(delete n.scene.loadingLogo,n.showPhoneTitle=n.scene.name),void i.$broadcast("showLoading",n.loadingLogo,n.scene.loadingLogo)):void n.freeUpgrade()},n.changeBottomLabel=function(){n.showPhoneTitle="正在设置底标",y.changeBottomType(n.eqShowType,n.scene.property.lastPageId,n.scene.property.bottomLabel,n.scene.property.eqAdType)},n.changeAutoFlip=function(){i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name,n.scene.property.autoFlip?y.app.startAutoFlip(n.scene.property.autoFlipTime):y.app.pauseAutoFlip()},n.changeHandFlip=function(){i.$broadcast("changeView",!1),n.showPhoneTitle=n.scene.name,y.app.forbidHandFlip(n.scene.property.forbidHandFlip)},n.changeEqshowType=function(){"eqHide"===n.eqShowType&&y.removeLastPage()},n.changeSceneState=function(){if(n.oldSceneApplyState.promIds)return 1!==n.sceneStatue&&g.openMsgDialog({msg:"该场景已经参与活动，不可以关闭或加密!"}),void(n.sceneStatue=1);if(3===n.sceneStatue){if(!F)return n.sceneStatue=1,void n.freeUpgrade();n.scene.status=1,n.scene.isAccessCode=!0,i.$broadcast("changeView",!1),i.$broadcast("passPanelSwitch",!0)}else n.scene.status=n.sceneStatue,delete n.scene.isAccessCode,delete n.scene.accessCode,i.$broadcast("changeView",!1),i.$broadcast("passPanelSwitch",!1);n.showPhoneTitle=n.scene.name,1!==n.sceneStatue&&(n.scene.isShow=0,n.scene.applyTemplate=0,n.appendActive=!1,n.scene.isTpl=0,n.scene.promIds=null)},n.$watch("scene.bgAudio",function(e,t){e=angular.isString(e)?JSON.parse(e):e,t=angular.isString(t)?JSON.parse(t):t;var a=e?e.url:null,s=t?t.url:null;a!==s&&y.playVideo(e),i.$broadcast("changeView",!1),n.scene&&(n.showPhoneTitle=n.scene.name)}),n.openScene=function(e,t){t?s.openScene(e.id).then(function(t){t.data.success&&(e.status=1)}):s.closeScene(e.id).then(function(t){t.data.success&&(e.status=2)})},n.openImageModal=function(){i.$broadcast("changeView",!0),c.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(e){return e.width/e.height===1?(n.newCoverImage=e,void I(e.data)):void c.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:e.data},cw:250}}}}).result.then(function(e){var t={width:e.width,height:e.height,data:e.src,type:"imgSrc"};n.newCoverImage=t,I(t.data)})})};var j=null;n.countCharacters=countCharacters,n.changeTab=function(e){var t;t="customset"===n.tabid?_():"shareset"===n.tabid?L():M(),t&&(n.tabid=e)};var B="http://";n.saveSceneSettings=function(e){if(_()&&L()&&M()){3===n.scene.property.eqAdType&&n.scene.property.bottomLabel&&n.scene.property.bottomLabel.url&&(/^http:|^https:|^ftp:/.test(n.scene.property.bottomLabel.url)||(n.scene.property.bottomLabel.url=B+n.scene.property.bottomLabel.url)),n.scene.property.eqAdType=parseInt(n.scene.property.eqAdType,10);var t=f.getCurrentSelectionPrice(n.scene,n.adSpend,n.isFormerScene,j);0===t?R():t&&t>n.userXd?g.openMsgDialog({msg:'<div class="cost-xd">当前选择需要消耗秀点<font color="#ff6e6e">'+t+'</font>个<br/>秀点余额不足(<font color="#ff6e6e">'+(n.userXd||0)+'</font>个)<span class="get-xd"><a style="text-decoration: underline;" href="#/usercenter/member" target = "_blank">购买秀点</a></span></div>'}):t?g.openConfirmDialog({msg:'当前选择需要消耗秀点<font color="#ff6e6e">'+t+'</font>个<br/>秀点余额为<font color="#ff6e6e">'+(n.userXd||0)+"</font>个"},function(){n.getUserXd(),R()}):R()}},n.oldSceneApplyState={applyPromotion:"",applyTemplate:"",promIds:"",isTpl:""},n.getSceneDetail=function(){s.getCurrentScenePromise().then(function(){n.scene=angular.copy(s.getCurrentScene()),n.scene.price=""+(n.scene.price||"0"),n.oldSceneApplyState.applyPromotion=n.scene.applyPromotion=""+n.scene.applyPromotion,n.oldSceneApplyState.applyTemplate=n.scene.applyTemplate=""+n.scene.applyTemplate,n.scene.isTpl=""+n.scene.isTpl,n.scene.isShow=n.scene.isShow?""+n.scene.isShow:"0",n.oldSceneApplyState.promIds=n.scene.promIds=n.scene.promIds?parseFloat(n.scene.promIds):null,n.oldSceneApplyState.isTpl=n.scene.isTpl,2===n.scene.pageMode&&(n.scene.pageMode=0),n.scene.property?angular.isString(n.scene.property)&&(n.scene.property=JSON.parse(n.scene.property)):n.scene.property={},j=n.scene.loadingLogo||n.scene.property.loadingLogo,n.scene.property.hasOwnProperty("triggerLoop")||(n.scene.property.triggerLoop=!0),n.scene.property.hasOwnProperty("slideNumber")||(n.scene.property.slideNumber=!0),n.scene.property.autoFlipTime||(n.scene.property.autoFlipTime=3),n.scene.property.showShareCount&&""+n.scene.property.showShareCount!="0"||(n.scene.property.shareDes=""),n.initQCloudStatus=!1,n.isQCloudServiceSuccess=!0,"1"===n.scene.thirdCode?(n.QCloudStatus=!0,n.initQCloudStatus=!0):(n.QCloudStatus=!1,n.initQCloudStatus=!1),n.adSpend=n.scene.property.adSpend||0,n.isFormerScene=!1,n.scene.property.hideEqAd?(n.adSpend=f.getPriceByADType(v.HIDE),n.scene.property.eqAdType=v.HIDE,n.eqShowType=H.EQHIDE):n.scene.property.eqAdType?P(n.scene.property.eqAdType):n.scene.createTime<14165028e5?(n.isFormerScene=!0,n.adSpend=f.getPriceByADType(v.HIDE),P(v.HIDE)):n.scene.property.isAdvancedUser?n.scene.property.bottomLabel&&n.scene.property.bottomLabel.id?(n.isFormerScene=!0,n.adSpend=f.getPriceByADType(v.CUSTOM_BOTTOM),P(v.CUSTOM_BOTTOM)):(n.isFormerScene=!0,n.adSpend=f.getPriceByADType(v.DEFAULT_BOTTOM),P(v.DEFAULT_BOTTOM)):[5,51].indexOf(p.currentUser.type)!==-1||[2,21].indexOf(p.currentUser.type)!==-1&&[7,8,9].indexOf(p.currentUser.memberType)!==-1?(n.adSpend=f.getPriceByADType(v.CUSTOM_BOTTOM),P(v.CUSTOM_BOTTOM)):(n.adSpend=f.getPriceByADType(v.FREEPAGE),P(v.FREEPAGE)),n.scene.startDate&&n.scene.endDate&&(n.startDate=new Date(n.scene.startDate),n.endDate=new Date(n.scene.endDate),n.alwaysOpen=!1),n.scene.type=""+n.scene.type,m.activitiesPromise.then(function(e){n.activities=e.data.list||[],n.getActivityPageTpl()}),n.scene.bgAudio&&(n.scene.bgAudio=angular.isString(n.scene.bgAudio)?JSON.parse(n.scene.bgAudio):n.scene.bgAudio);var e=n.$watch("$parent.scene.bgAudio",function(e){n.scene.bgAudio=angular.isString(e)?JSON.parse(e):e});n.$on("$destroy",function(){e()})})},n.types=b.getSceneType(),n.tplPrices=[];var X=m.sceneTplPricesPromise.then(function(e){for(var t=0;t<e.data.list.length;t++)"免费"!==e.data.list[t].name&&e.data.list[t].name.indexOf("秀点")===-1&&(e.data.list[t].name+="秀点");n.tplPrices=e.data.list||[]}),V=[];n.sceneTags=[];var W=m.sceneTagsPromise.then(function(e){n.sceneTags=V=e.data.list||[]});e.all([X,W]).then(function(){
n.getSceneDetail()});var G=n.$watch("scene.type",function(e){e&&(n.sceneTags=[],angular.forEach(V,function(t){""+e==""+t.bizType&&n.sceneTags.push(t)}))});n.$on("$destroy",function(){G()}),n.pagemodes=[{id:0,name:"上下翻页"},{id:4,name:"左右翻页"},{id:1,name:"上下惯性翻页"},{id:3,name:"左右惯性翻页"},{id:11,name:"上下连续翻页"},{id:5,name:"左右连续翻页"},{id:6,name:"立体翻页"},{id:7,name:"卡片翻页"},{id:8,name:"放大翻页"},{id:9,name:"交换翻页"},{id:10,name:"翻书翻页"},{id:12,name:"掉落翻页"},{id:13,name:"淡入翻页"}];var Y=[11,12];if(!n.isAllowedToAccessNewPageFlip)for(var Q=0;Q<n.pagemodes.length;Q++)for(var Z=0;Z<Y.length;Z++)n.pagemodes[Q].id===Y[Z]&&(n.pagemodes.splice(Q,1),Q--);if(m.pageTplsPromise.then(function(e){e.data.list&&e.data.list.length>0?n.pageTpls=e.data.list:n.pageTpls=[]}),m.bottomPageTplsPromise.then(function(e){e.data.list&&e.data.list.length>0?n.bottomPageTpls=e.data.list:n.bottomPageTpls=[]}),n.chooseLastPage=function(e){n.scene.property.lastPageId=e,P(v.FREEPAGE,!0)},n.chooseCustomBottomLabel=function(e){n.scene.property.bottomLabel||(n.scene.property.bottomLabel={}),n.scene.property.bottomLabel.id=e,y.changeBottomType(n.eqShowType,n.scene.property.lastPageId,n.scene.property.bottomLabel,n.scene.property.eqAdType)},n.maxLength30=function(){if(n.scene.description&&(n.scene.description=n.scene.description.replace(/\n|\r/g," ")),n.scene.description&&n.scene.description.length>30){var e=n.scene.description.replace(/[^\x00-\xff]/g,"xx");if(e.length>60){var t=e.substring(0,60).replace(/xx/g,"中").length;n.scene.description=n.scene.description.substring(0,t)}}},n.maxLength24=function(){if(n.scene.name&&(n.scene.name=n.scene.name.replace(/\n|\r/g," ")),n.scene.name&&n.scene.name.length>24){var e=n.scene.name.replace(/[^\x00-\xff]/g,"xx");if(e.length>48){var t=e.substring(0,48).replace(/xx/g,"中").length;n.scene.name=n.scene.name.substring(0,t)}}},n.uploadLoadingLogo=function(){c.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(e){n.scene.loadingLogo=e.data,i.$broadcast("showLoading",n.scene.loadingLogo,e.data)})},n.isLoadingLogoAccessible=p.isAllowToAccess(p.accessDef.LOADING_LOGO),n.isTemplatePaymentAccessible=p.isAllowToAccess(p.accessDef.TEMPLATE_PAYMENT),n.cancelSceneSetting=function(){n.$parent.sceneSetting.showFlag=!1},n.fourNumberPassword=function(){n.scene.accessCode&&(n.scene.accessCode=n.scene.accessCode.replace(/\D/g,""),n.scene.accessCode.length>4&&(n.scene.accessCode=n.scene.accessCode.substr(0,4)))},n.activityPageTpls=[],n.selectedActivity=null,n.getActivityPageTpl=function(e){if(n.oldSceneApplyState.promIds&&n.scene.promIds!==n.oldSceneApplyState.promIds)return g.openMsgDialog({msg:"该场景已经参与活动，不可参与其他活动；请复制该场景展示后，再次选择参与活动。"}),void(n.scene.promIds=n.oldSceneApplyState.promIds);if(n.scene.promIds){var t=null;angular.forEach(n.activities,function(e){e.id===n.scene.promIds&&(t=e.sceneId,n.selectedActivity=e)}),t?u.getPageTpls(t).then(function(t){t.data.list&&t.data.list.length>0?(n.activityPageTpls=t.data.list,n.scene.property.activityPageId&&!e||(n.activityPageTpls.length?(n.scene.property.activityPageId=n.activityPageTpls[0].id,n.chooseActivityPageTpl(n.scene.property.activityPageId)):n.scene.property.activityPageId=null)):n.activityPageTpls=[]}):n.activityPageTpls=[]}else n.activityPageTpls=[],n.scene.property.activityPageId=null},n.chooseActivityPageTpl=function(e){n.scene.property.activityPageId=e,y.replaceActivePage(e)},n.openStatisticData=function(){n.QCloudStatus?(n.QCloudStatus=!1,n.scene.thirdCode="0",n.isQCloudServiceSuccess=!0):(n.QCloudStatus=!0,n.scene.thirdCode="1",n.isQCloudServiceSuccess=!0)},n.weChatShare={title:{type:null,description:null},description:{type:null,description:null},avatar:!1},n.showWeChatShareTitle=null,n.showWeChatShareDescription=null,"string"==typeof n.scene.property&&(n.scene.property=JSON.parse(n.scene.property)),n.scene.property.shareDes&&"string"==typeof n.scene.property.shareDes)n.weChatShare.description.type="position",n.weChatShare.description.description=n.scene.property.shareDes,n.showWeChatShareDescription="我是第X位， "+n.scene.property.shareDes;else if(n.scene.property.shareDes&&"object"==typeof n.scene.property.shareDes){switch(n.weChatShare=n.scene.property.shareDes,n.weChatShare.title.type){case"myself":n.showWeChatShareTitle="我是XX， "+n.weChatShare.title.description;break;case"position":n.showWeChatShareTitle="我是第X位"+n.weChatShare.title.description;break;case"selfAndPosition":n.showWeChatShareTitle="我是XX， 我是第X位"+n.weChatShare.title.description}switch(n.weChatShare.description.type){case"myself":n.showWeChatShareDescription="我是XX， "+n.weChatShare.description.description;break;case"position":n.showWeChatShareDescription="我是第X位"+n.weChatShare.description.description;break;case"selfAndPosition":n.showWeChatShareDescription="我是XX， 我是第X位"+n.weChatShare.description.description}}n.scene.property=JSON.stringify(n.scene.property),n.addWeChatShare=function(e,t){var i={isTitle:e,isEditor:t,editorType:e?n.weChatShare.title.type:n.weChatShare.description.type,editorContent:e?n.weChatShare.title.description:n.weChatShare.description.description};c.open({windowClass:"console version_frame",templateUrl:"scene/console/wechatModal.tpl.html",controller:"weChatShareModalCtrl",resolve:{modalInfo:function(){return i}}}).result.then(function(t){if(e)switch(n.weChatShare.title.type=t.type,n.weChatShare.title.description=t.content,n.weChatShare.title.type){case"myself":n.showWeChatShareTitle="我是XX， "+n.weChatShare.title.description;break;case"position":n.showWeChatShareTitle="我是第X位"+n.weChatShare.title.description;break;case"selfAndPosition":n.showWeChatShareTitle="我是XX， 我是第X位"+n.weChatShare.title.description}else switch(n.weChatShare.description.type=t.type,n.weChatShare.description.description=t.content,n.weChatShare.description.type){case"myself":n.showWeChatShareDescription="我是XX， "+n.weChatShare.description.description;break;case"position":n.showWeChatShareDescription="我是第X位"+n.weChatShare.description.description;break;case"selfAndPosition":n.showWeChatShareDescription="我是XX， 我是第X位"+n.weChatShare.description.description}})},n.clearWeChatShare=function(e){e?(n.weChatShare.title.type=null,n.weChatShare.title.description=null,n.showWeChatShareTitle=null):(n.weChatShare.description.type=null,n.weChatShare.description.description=null,n.showWeChatShareDescription=null)}}]).value("eqADTypeChoice",{HIDE:0,FREEPAGE:1,DEFAULT_BOTTOM:2,CUSTOM_BOTTOM:3,DEEPSHARE_PAGE:4}).service("memberHandler",["usercenterService","security","eqADTypeChoice",function(e,t,i){function n(e,t){return/^\d+$/.test(t)?0:e*parseFloat(t)}var a={},s=null;return a.isVipUser=1!==t.currentUser.type,a.initUserMemberDetail=function(i){e.getUserMemberDetail(t.currentUser.id).then(function(e){s=e.data.obj,i&&i(s)})},a.getCurrentSelectionPrice=function(e,t,n,s){var o=a.getPriceByADType(e.property.eqAdType);o=a.isVipUser&&e.property.eqAdType!==i.HIDE?0:a.getPriceWithMemberPrivilege(o);var r=o-t;return n&&0!==r?r=o:r<0&&(r=0),!s&&e.loadingLogo&&(r+=a.getPriceWithMemberPrivilege(100,!0)),r},a.getPriceWithMemberPrivilege=function(e,i){return 2===t.currentUser.type&&t.currentUser.memberType&&(new Date).getTime()<t.currentUser.expiryTime||21===t.currentUser.type?i?n(e,s.loadingLogo||"1.0"):n(e,s.tailPage||"1.0"):e},a.getPriceByADType=function(e){switch(e){case i.HIDE:return 100;case i.FREEPAGE:return 0;case i.DEFAULT_BOTTOM:return 15;case i.CUSTOM_BOTTOM:return[6,7,8,9].indexOf(t.currentUser.memberType)?0:30}},a}]).service("sceneSettingCache",["sceneService","pageTplService",function(e,t){return{sceneTplPricesPromise:e.getSceneTemplatePrices(),sceneTagsPromise:t.getTagSysListWithType(),pageTplsPromise:t.getPageTpls(1301),bottomPageTplsPromise:t.getPageTpls(1311),activitiesPromise:e.getActivities()}}]).directive("sceneSettingComponent",[function(){return{scope:!0,controller:"SceneSettingComponentController",templateUrl:"scene/console/scene-setting-component.tpl.html",link:function(e,t){setTimeout(function(){t.find(".scene-setting-info.fade").addClass("in")})}}}]),angular.module("scene.create.console.setting",["scene.create.console.setting.style","scene.create.console.setting.anim","scene.create.console.setting.trigger","scene.create.console.setting.dropdown"]),angular.module("scene.create.console.setting").directive("styleModal",["sceneService","$compile","storageService",function(e,t,i){return{restrict:"AE",replace:!0,scope:{},templateUrl:"scene/console/setting.tpl.html",link:function(t,n,a){n.bind("keydown",function(e){e.stopPropagation()}),t.elemDef=e.currentElemDef,t.styleSettingPosition=JSON.parse(i.get("styleSettingPosition")),t.styleSettingPosition&&(n.context.style.top=t.styleSettingPosition.top,n.context.style.left=t.styleSettingPosition.left),e.currentTab="style",n.bind("mouseup",function(){var e=this.style.top,n=this.style.left;t.position={top:e,left:n},i.push("styleSettingPosition",JSON.stringify(t.position))});var s="style";t.$on("showStylePanel",function(i,n){s=t.activeTab,t.activeTab="",t.$apply(),t.elemDef=e.currentElemDef,n&&n.activeTab?"style"===n.activeTab?"z"===t.elemDef.type?t.activeTab="dropdown":t.activeTab="style":t.activeTab=n.activeTab:"style"===s||"dropdown"===s?"z"===t.elemDef.type?t.activeTab="dropdown":t.activeTab="style":t.activeTab=s,t.$apply()}),t.activeTab=a.activeTab,t.cancel=function(){$(n).hide(),$(".styleColorPicker").remove()},t.$on("close.style.panel",function(){n.hide(),$(".styleColorPicker").remove(),$(".edit_area").find(".boom, .boom1").remove()}),t.$on("$locationChangeStart",function(){t.cancel()}),t.showSettingTab=function(i){t.activeTab=i,e.currentTab=i},t.$watch("activeTab",function(i,n){i!==n&&(e.currentTab=t.activeTab)}),t.$watch("elemDef",function(){!t.elemDef||"w01"!==t.elemDef.type&&"w02"!==t.elemDef.type||"trigger"===e.currentTab&&(e.currentTab="style",t.activeTab="style"),t.elemDef||(e.currentTab="trigger",t.activeTab="trigger")})}}}]),angular.module("scene.create.console.shape",[]).controller("ShapeConsoleCtrl",["$rootScope","$scope","ModalService","obj","shapeService","fileService","storageService","security",function(e,t,i,n,a,s,o,r){var l=t.fileType=7;t.systemImages=!1;var c=1;t.currentPage=1,t.toPage=1;var d,p=t.pageSize=18,u=r.currentUser.id;t.sysCategoryList=[{name:"图形",value:"8201"},{name:"文字",value:"8203"},{name:"图标",value:"8202"}],t.sysTagList=[],t.imgList=[],t.totalItems=0,t.currentPage=1,t.$watch("currentPage",function(e,i){e!==i&&(t.toPage=e,s.getSystemFiles1(e,p,l,t.sysCatId,t.sysTagId))}),t.getImgByPage=function(){return t.toPage<1||t.toPage>t.totalItems/18+1?void i.openMsgDialog({msg:"此页超出范围"}):void(t.currentPage=t.toPage)},t.cancel=function(){t.$dismiss()},t.selectSvg=function(e,i){var n=i.id,s=e.target.dataset.url;d=JSON.parse(o.get("shapeUse-"+u))||[];for(var r=0;r<d.length;r++)d[r].id===i.id&&d.splice(r,1);d.length>17&&d.pop(),d.unshift(i),o.push("shapeUse-"+u,JSON.stringify(d)),a.getSvgElement(s).then(function(e){for(var i,a=$(e.data),o=a.length,r=0;r<o;r++)if("svg"===a[r].tagName){i=a[r];break}var l=parseFloat($(i).attr("width")),c=parseFloat($(i).attr("height"));l>c?(l=100*l/c+"px",c="100px"):(c=100*c/l+"px",l="100px");var d=$(i).find("[fill], [style*='fill']"),p=[],u=[],h={};$.each(d,function(e,t){var i=$(t).attr("style");if(i){for(var n=i.split(";"),a=0,s=n.length;a<s;a++)if(n[a].indexOf("fill:")>=0){u.push(n[a].split(":")[1]);break}}else u.push($(t).attr("fill"))});for(var g=0;g<u.length;g++)h[u[g]]||(h[u[g]]=1,"none"!==u[g]?p.push({fill:u[g],svgFill:u[g]}):p.push({fill:"",svgFill:"none"}));for(var m=0;m<p.length;m++){var f=[];$.each(d,function(e,t){var i,n=$(t).attr("style");if(n){for(var a=n.split(";"),s=0,o=a.length;s<o;s++)if(a[s].indexOf("fill:")>=0){i=a[s].split(":")[1];break}}else i=$(t).attr("fill");i===p[m].svgFill&&f.push(e)}),p[m].elements=f}t.$close({data:s,id:n,width:l,height:c,items:p})})},t.getSystemCategoryList=function(){t.userTagId="",t.systemImages=!0,t.sysTagList=[],t.sysCategoryList.length&&t.getSysCatAndList(t.sysCategoryList[0].value)},t.getSysCatAndList=function(e){t.sysCatId=e,s.getSysTagByCatId(e)},t.getSysImgByTag=function(e){t.sysTagId=e,s.getSystemFiles1(c,p,l,t.sysCatId,e)},t.$on("sysTag.update",function(){t.sysTagList=s.sysTagList,t.imgList=[],t.totalItems=0,t.currentPage=1,t.sysTagList.length&&t.getSysImgByTag(t.sysTagList[0].id)}),t.$on("imgList.update",function(){t.imgList=s.imgList,t.totalItems=s.totalItems,t.currentPage=s.pageNo}),t.switchToSystemImages=function(e){t.systemImages="true"===e},t.getHistory=function(){t.userTagId="history",t.imgList=JSON.parse(o.get("shapeUse-"+u))||[]},t.confirm=function(){t.authError="请您先选择图片！"},t.getSystemCategoryList()}]).factory("shapeService",["$rootScope","$http",function(e,t){var i={};return i.getSvgElement=function(e){return t({method:"GET",url:PREFIX_FILE_HOST+e})},i}]),angular.module("scene.create.console.soundComponent",["app.directives.addelement"]),angular.module("scene.create.console.soundComponent").controller("SoundComponentConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal",function(e,t,i,n,a){e.model={title:n.properties.title,imgSrc:n.properties.imgSrc,sound:n.sound},e.authError="",e.buttons=[{id:1,text:"有惊喜",btnStyle:{width:"100px",backgroundColor:"rgb(244, 113, 31)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"听一听",btnStyle:{width:"100px",backgroundColor:"rgb(253, 175, 7)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:3,text:"点我听歌",btnStyle:{width:"100px",backgroundColor:"rgb(121, 196, 80)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"点播歌曲",btnStyle:{width:"100px",height:"30px",backgroundColor:"#fff","text-align":"center",border:"1px solid #3FB816","line-height":"30px",color:"rgb(0, 0, 0)"}}],e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.title="",e.btnIndex=-1,e.model.btnStyle={width:"115px",height:"115px","line-height":"1",backgroundColor:"transparent"},e.model.imgSrc=n.properties.imgSrc=t.data},function(){})},angular.forEach(e.buttons,function(t,i){""!==e.model.title&&n.css.backgroundColor&&n.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=i)}),e.confirm=function(){return null!==e.model.imgSrc||e.model.title&&0!==e.model.title.length?!e.model.sound||$.isEmptyObject(e.model.sound)?void(e.authError="您还没有选择音效"):(n.sound=e.model.sound,n.properties.title=e.model.title,void e.$close(e.model)):(e.authError="按钮名称不能为空",void $('.form-list input[type="text"].btn-name').focus())},e.openSoundModal=function(){a.open({windowClass:"console img_console",templateUrl:"scene/console/sound.tpl.html",controller:"soundCtrl",resolve:{obj:function(){return{elemDef:n,type:4}}}}).result.then(function(t){e.model.sound=t})},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,i){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=i,e.model.imgSrc=n.properties.imgSrc=null}}]),angular.module("scene.create.console.sound",["services.file","soundLink"]).controller("soundCtrl",["$rootScope","$scope","soundService","ModalService","obj","uploaderService","$modal","fileService","dataCacheService","storageService","security",function(e,t,i,n,a,s,o,r,l,c,d){function p(){angular.forEach(t.sounds,function(e,i){e.id===S.id&&(t.sounds[i]=S)})}var u=t.sounds=[],h=t.type=a.type;t.selectSoundError="";var g=d.currentUser.id,m={},f=t.pageSize=10,v=1;t.actionContent=!1,t.pagination={},t.sound={},t.soundLink={src:""},t.resourceType="mp3";var b=!1;if(window.localStorage?(b=""+h=="2"?localStorage.getItem("musicTag"):localStorage.getItem("soundTag"),"true"===b?t.isMySound=!0:"false"!==b&&b?t.isMySound="history":t.isMySound=!1):t.isMySound=!1,t.isCheckbox=function(t){t&&(soundUserId.push(e.user.id),localStorage.setItem("setSoundAction",soundUserId.join(",")))},""+h=="4"&&a.elemDef.sound&&a.elemDef.sound.src&&(t.sound=a.elemDef.sound),""+h=="2"&&a.elemDef.bgAudio)if("string"==typeof a.elemDef.bgAudio){var y=JSON.parse(a.elemDef.bgAudio);t.sound=y,y&&y.src&&(t.sound.url=y.src)}else t.sound=a.elemDef.bgAudio,a.elemDef.bgAudio.src&&(t.sound.url=a.elemDef.bgAudio.src);var w=!1,x={windowClass:"upload-console",templateUrl:"scene/console/soundCrop.tpl.html",backdrop:"static",controller:"soundCropCtrl"};t.$on("upload.success",function(e,i){if(""+t.type=="2"?l.clear("mySounds"):l.clear("fileService1"),!w){S.id&&t.$broadcast("pause.other"),t.sounds.unshift(i);var n={isVal:!1,soundId:""},s=$.extend(!0,x,{resolve:{obj:function(){return a.elemDef},sound:function(){return i},lastCropInfo:function(){return null},againCrop:function(){return n}}});o.open(s).result.then(function(){w=!1,t.getSounds(t.pagination.currentPage)},function(){w=!1}),w=!0}}),t.soundMultiCrop=function(e,n){var s=u[n];S.id&&t.$broadcast("pause.other"),i.getCropInfo(s.id).then(function(e){var t=e.data.obj,i="";""+h=="2"?i=s.url:""+h=="4"&&(i=s.src);var n={fileType:h,bizType:0,path:i,tmbPath:i,tagId:0,name:s.name},r={isVal:!0,soundId:s.id},l=$.extend(!0,x,{resolve:{obj:function(){return a.elemDef},sound:function(){return n},lastCropInfo:function(){return t},againCrop:function(){return r}}});o.open(l).result.then(function(){w=!1},function(){w=!1}),w=!0})},t.$on("get.file.list",function(e){t.getSounds(t.pagination.currentPage)}),t.$on("backto.my.list",function(e){k()});var k=function(){t.isMySound=!0,t.selectTab(!0)};t.getSounds=function(e){t.toPage=e,""+h=="4"?t.isMySound?i.getMySounds(e):t.getSysMusicList(t.sysCatId,e):""+h=="2"&&(t.isMySound?i.getMyAudios(e):t.getSysMusicList(t.sysCatId,e))},t.sysCate=!t.isMySound,t.selectTab=function(e){window.localStorage&&(""+t.type=="2"?localStorage.setItem("musicTag",e):localStorage.setItem("soundTag",e)),e?t.sysCate=!1:t.sysCate=!0,t.isMySound=e,"history"===e?t.getHistory():t.getSounds(1)},t.getHistory=function(){m=JSON.parse(c.get("audioPUse-"+g))||[];var i={list:m};e.$broadcast("sounds.update",i,h,t.type)},t.urlLink=function(){o.open({windowClass:"console six-contain",templateUrl:"scene/console/soundLink.tpl.html",controller:"SoundLinkCtrl",resolve:{obj:function(){return a.type}}}).result.then(function(){""+t.type=="2"?l.clear("mySounds"):l.clear("fileService1"),k()},function(){})},t.isSoundSelected=function(e,t,i){return 2===e?t.id?t.id===i.id:t.url===i.url:4===e?t.id?t.id===i.id:t.src===i.src:void 0},t.selectSound=function(e,i,n){n?t.sound={}:t.sound=e,m=JSON.parse(c.get("audioPUse-"+g))||[];for(var a=0;a<m.length;a++)m[a].id===e.id&&m.splice(a,1);m.length>9&&m.pop(),m.unshift(e),c.push("audioPUse-"+g,JSON.stringify(m))};var S={};t.playSound=function(t,n){t.stopPropagation(),S={},i.getCropInfo(u[n].id).then(function(t){var i=t.data.obj,a=i?i.url:null;u[n].isPlaying||(S=u[n]),e.$broadcast("sound.play",u[n],a,h)})},t.deleteMySound=function(e,a){e.stopPropagation(),n.openConfirmDialog({msg:"确定删除此音乐吗？"},function(){""+t.type=="2"?l.clear("mySounds"):l.clear("fileService1"),i.deleteMySound(u[a].id)})},t.clear=function(){t.sound={}},t.ok=function(){var e,n=t.sound;""+h=="4"&&(n.src?i.getCropInfo(n.id).then(function(i){var a=i.data.obj,s=a?a.url:n.src;e={src:s,name:n.name,id:n.id},t.$close(e)}):(e={},t.$close(e))),""+h=="2"&&(n.url?i.getCropInfo(n.id).then(function(e){var i=e.data.obj,a=i?i.url:n.url;y={url:a,name:n.name,id:n.id},t.$close(y)}):(y={},t.$close(y)))},t.cancel=function(){t.$dismiss()},t.$on("sounds.update",function(e,i,n){if(u.length=0,i.list.length>0){t.actionContent=!1,$.each(i.list,function(e,t){t.path=t.path||t.src||t.url,0===t.path.indexOf("http://")&&(t.isValue=!0),t.size<1024&&t.size>0?t.size=t.size+" KB":t.size>=1024?t.size=(t.size/1024).toPrecision(2)+" MB":0===t.size&&(t.size=null),""+n=="4"?u.push({id:t.id,name:t.name,src:t.path,isPlaying:!1,size:t.size,isValue:t.isValue}):""+n=="2"&&u.push({id:t.id,name:t.name,url:t.path,isPlaying:!1,size:t.size,isValue:t.isValue})});var a=i.map;a&&(t.pagination={totalItems:a.count,pageSize:a.pageSize,currentPage:a.pageNo,numPages:Math.ceil(a.count/a.pageSize)})}else t.pagination.totalItems=0,t.actionContent=!0;p()}),t.$on("mySounds.delete",function(e,n){n===t.sound.id&&(t.sound={}),""+h=="2"?i.getMyAudios(t.pagination.currentPage):""+h=="4"&&i.getMySounds(t.pagination.currentPage)});var T=function(e){r.getSysMusicCategory(e)};t.$on("sysMusic.update",function(){t.sysMusicList=r.sysMusicList}),T(h),t.getSysMusicList=function(e,n){t.sysCatId=e,i.getSysMusicList(n,f,h,e)},"history"===t.isMySound?t.getHistory():t.isMySound?""+h=="4"?i.getMySounds(v):i.getMyAudios(v):t.getSysMusicList(0,v)}]).factory("soundService",["$rootScope","$modal","fileService","dataCacheService","$http",function(e,t,i,n,a){var s={};return s.getSysMusicList=function(t,a,s,o){i.getSystemFiles(t,a,s,o).then(function(t){t.data.success?(n.getAsyncUrl()&&(n.push("fileService1",n.getAsyncUrl(),t),n.setAsyncUrl()),e.$broadcast("sounds.update",t.data,s)):alert(t.data.msg)},function(){alert(networkOut)})},s.getMyAudios=function(t){i.getFileByCategory(t,10,"0","2").then(function(t){t.data.success?(n.getAsyncUrl()&&(n.push("mySounds",n.getAsyncUrl(),t),n.setAsyncUrl()),e.$broadcast("sounds.update",t.data,2)):alert(t.data.msg)},function(){alert(networkOut)})},s.getMySounds=function(t){i.getUserFiles(t,10,4,0).then(function(t){t.data.success?(n.getAsyncUrl()&&(n.push("fileService1",n.getAsyncUrl(),t),n.setAsyncUrl()),e.$broadcast("sounds.update",t.data,4)):alert(t.data.msg)},function(){alert(networkOut)})},s.deleteMySound=function(t){i.deleteFile1(t).success(function(i){i.success?e.$broadcast("mySounds.delete",t):alert(i.msg)}).error(function(){alert(networkOut)})},s.getMiuteByTime=function(e){return Math.round(e%60)>=10?Math.floor(e/60)+":"+Math.round(e%60):Math.floor(e/60)+":0"+Math.round(e%60)},s.getSecondByTime=function(e){var t=e.split(":");return 60*parseInt(t[0],10)+parseInt(t[1])},s.soundCrop=function(e,t,i){var n="m/scene/audio/transfer";return n+="?path="+e,i&&(i=Math.floor(i),n+="&start="+t+"&duration="+i),a({withCredentials:!0,method:"POST",url:PREFIX_URL+n})},s.pollingStatus=function(e){var t="m/scene/audio/status?pid="+e;return a({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},s.saveCropInfo=function(e){var t="m/scene/audio/cut/save";return a({withCredentials:!0,method:"POST",url:PREFIX_URL+t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(e)})},s.getCropInfo=function(e){var t="m/scene/audio/cut/info?id="+e;return a({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},s}]).directive("eqxAudio",function(){function e(e,n){var a={};n.bind("pause",function(){n.attr("src")&&e.$apply(function(){a.isPlaying=!1})}).bind("play",function(){n.attr("src")&&e.$apply(function(){a.isPlaying=!0})});var s=n.get(0);e.$on("sound.play",function(e,i,n,o){t(a,i,s,n,o),a=i}),e.$on("pause.other",function(){i(s)})}function t(e,t,i,n,a){var s,o={},r="";""+a=="2"?r=n?n:t.url:""+a=="4"&&(r=n?n:t.src),o.src=r,s=0===o.src.indexOf("http://")?o.src:PREFIX_FILE_HOST+o.src;var l=s.substr(s.lastIndexOf("/")+1),c=i.src.substr(s.lastIndexOf("/")+1);null===e.id?l===c&&t.isPlaying?i.pause():l!==c||t.isPlaying?(i.src=s,i.play(),e.isPlaying=!1,t.isPlaying=!0):i.play():e.id===t.id&&t.isPlaying?i.pause():e.id!==t.id||t.isPlaying?(i.src=s,i.play(),e.isPlaying=!1,t.isPlaying=!0):(i.src=s,i.play())}function i(e){e.pause()}return{link:e}}).filter("maxLength",function(){return function(e,t){if(e)return e.length<=t?e:e.substr(0,t)+"…"}}),angular.module("scene.create.console.cropSound",["services.file"]).controller("soundCropCtrl",["$rootScope","$scope","uploaderService","obj","soundService","sound","fileService","$timeout","$rootScope","ModalService","lastCropInfo","againCrop",function(e,t,i,n,a,s,o,r,e,l,c,d){function p(i){if(i.data.success)if(0!==i.data.map.code)if(3===i.data.map.code||4===i.data.map.code)t.$close(s),e.$broadcast("edit.load");else{if(Date.now()-g>6e4)return void l.openMsgDialog({msg:"裁切失败，请重新裁切！"});r(function(){a.pollingStatus(h).then(p)},1e3)}else{var n=i.data.map.path;d.isVal&&m?u(d.soundId,n):o.saveFileInfo(s).then(function(e){var t=e.data.obj;t&&u(t.id,n)})}else t.$close(s),e.$broadcast("edit.load")}function u(i,n){var o={id:i,url:n,start:t.startTime,duration:Math.abs(t.endTime-t.startTime),rate:""};a.saveCropInfo(o).then(function(){e.$broadcast("edit.load"),t.$close(s)})}t.startTime=0,t.endTime=0,t.currentTime=0,t.minuteS=0,t.secondS=0,t.soundSrc=PREFIX_FILE_HOST+s.path,t.title=s.name,t.cropLen="0:00",t.resourceType="mp3",t.type=s.fileType,t.lastCropInfo=c;var h,g,m=!0;t.ok=function(){var i=t.startTime,n=t.endTime-t.startTime;return n<=0?void l.openMsgDialog({msg:"裁切长度不能为0。"}):(e.$broadcast("edit.load","show"),n>=t.duration&&(i=null,n=null),g=Date.now(),void a.soundCrop(s.path,i,n).then(function(e){e.data.success&&(h=e.data.obj,a.pollingStatus(h).then(p))}))},t.play=function(){"start"!==t.state?t.state="start":t.state="pause"},t.$watch("startTime",function(e,i){e!==i&&(t.minuteS=Math.floor(e/60),t.secondS=Math.round(e%60),t.cropLen=a.getMiuteByTime(Math.abs(t.endTime-t.startTime)))}),t.$watch("endTime",function(e,i){e!==i&&(t.minuteE=Math.floor(e/60),t.secondE=Math.round(e%60),t.cropLen=a.getMiuteByTime(Math.abs(t.endTime-t.startTime)))}),t.changeStartTime=function(){t.secondS||(t.secondS=0),t.secondS=Math.floor(t.secondS),t.startTime=60*t.minuteS+t.secondS,t.startTime>t.endTime&&(t.minuteS=Math.floor(t.endTime/60),t.secondS=Math.round(t.endTime%60),t.startTime=t.endTime)},t.changeEndTime=function(){t.secondE||(t.secondE=0),t.secondE=Math.floor(t.secondE),t.endTime=60*t.minuteE+t.secondE,t.endTime>t.duration?(t.minuteE=Math.floor(t.duration/60),t.secondE=Math.round(t.duration%60),t.endTime=t.duration):t.endTime<t.startTime&&(t.minuteE=Math.floor(t.startTime/60),t.secondE=Math.round(t.startTime%60),t.endTime=t.startTime)},t.setStartTime=function(){t.startTime=t.currentTime},t.setEndTime=function(){t.endTime=t.currentTime},e.$on("upload.success",function(e,i){m=!1,s=i,t.$apply(function(){t.title=s.name,t.soundSrc=PREFIX_FILE_HOST+s.path})})}]).directive("soundCropPanel",["$interval","soundService",function(e,t){return{scope:{startTime:"=",endTime:"=",currentTime:"=",soundSrc:"@",state:"=",duration:"=",lastCropInfo:"=",soundType:"="},restrict:"A",templateUrl:"scene/console/soundCropPanel.tpl.html",link:function(e,i){function n(e){o=e.target.dataset.state,v=i.offset().left}function a(t){if(o){var i=t.clientX-v;"s"===o?(i>=m?i=m:i<=0&&(i=0),e.startTime=Math.round(i/850*e.duration)):"e"===o?(i<=g?i=g:i>=850&&(i=850),e.endTime=Math.round(i/850*e.duration)):(i<=g?i=g:i>=m&&(i=m),e.currentTime=Math.round(i/850*e.duration)),e.$apply()}}function s(t){var i=c.position().left;i>=800?c.css({zIndex:2}):c.css({zIndex:1}),o&&("s"===o?(g=t.clientX-v,g>=m?g=m:g<=0&&(g=0),e.startTime=Math.round(g/850*e.duration)):"e"===o?(m=t.clientX-v,m<=g?m=g:m>=850&&(m=850),e.endTime=Math.round(m/850*e.duration)):(f=t.clientX-v,f<g&&(f=g),l.currentTime=e.currentTime),o=null)}var o,r=i.find("audio"),l=r.get(0),c=i.find(".bar-s"),d=i.find(".bar-e"),p=i.find(".bar-c"),u=i.find(".left-dis"),h=i.find(".right-dis"),g=0,m=850,f=0,v=0,b=e.lastCropInfo;e.curT="0:00",e.endT="0:00",$("#loading").show(),r.attr("src",e.soundSrc),p.hide(),c.on("mousedown",n),d.on("mousedown",n),p.on("mousedown",n),i.on("mousemove",a),i.on("mouseup mouseleave",s),r.on("loadedmetadata",function(){if(!isNaN(l.duration)){var i=Math.floor(l.duration),n="";""+e.soundType=="2"?n=i<90?i:90:""+e.soundType=="4"&&(n=i<15?i:15),b?(e.startTime=b.start,e.endTime=b.start+b.duration,e.currentTime=e.lastCropInfo.start):(e.endTime=n,e.startTime=0,e.currentTime=0),e.duration=i,e.endT=t.getMiuteByTime(e.endTime);for(var a=850/e.duration,s=e.duration/6+1,o=[],r=1;r<=s;r++)o.push(t.getMiuteByTime(6*r));e.scales=o,e.liW=6*a+"px",e.endLi=850-6*a*(Math.floor(s)-1)+"px",$("#loading").hide(),e.$apply()}}),r.on("timeupdate",function(){"c"!==o&&(e.currentTime=l.currentTime,e.$apply())}),e.$watch("state",function(t,i){t!==i&&("start"===t?(e.currentTime>=e.endTime&&(l.currentTime=e.startTime),l.currentTime<e.startTime&&(l.currentTime=e.startTime),p.show(),l.play()):"pause"===t&&l.pause())}),e.$watch("endTime",function(i,n){i!==n&&(e.endT=t.getMiuteByTime(i),m=i/e.duration*850,m=m>850?850:m,d.css("left",m-5+"px"),h.css("width",850-m+"px"),m<f&&(e.currentTime=i,l.currentTime=i))}),e.$watch("startTime",function(t,i){t!==i&&(g=t/e.duration*850,g=g>850?850:g,c.css("left",g-5+"px"),u.css("width",g+"px"),f<g&&(e.currentTime=t,l.currentTime=t))}),e.$watch("currentTime",function(i,n){i!==n&&(e.curT=t.getMiuteByTime(i),f=Math.round(i/e.duration*850),f>=m&&(f=m,e.state="pause"),p.css("left",f-5+"px"))}),e.$watch("soundSrc",function(t,i){t!==i&&($("#loading").show(),p.hide(),r.attr("src",t),e.state="pause")})}}}]),angular.module("soundLink",["soundLink"]),angular.module("soundLink").controller("SoundLinkCtrl",["$rootScope","$scope","sceneService","obj",function(e,t,i,n){t.authError="",t.soundLink={src:""},t.selectLink=function(){t.sound={}},t.confirm=function(){var e=t.soundLink.src;if(e.length&&e.lastIndexOf(".mp3")!==e.length-4)return void(t.authError="请输入mp3格式的音乐链接");if(0===e.length)return t.authError="链接地址不能为空",void $(".link").focus();var a;e&&(a={name:"外链音乐",src:e}),i.soundLink(e,n).then(function(e){200===e.data.code?t.$close(a):(t.authError=e.data.msg,$(".link").focus())})},t.cancel=function(){t.$dismiss()}}]),angular.module("scene.create.console.statistics",[]),angular.module("scene.create.console.statistics").controller("StatisticsConsoleCtrl",["$scope","obj",function(e,t){e.model={title:t.title,properties:{layout:t.properties.layout,size:t.properties.size,color:t.properties.color,icon:t.properties.icon,imgSrc:t.properties.imgSrc}},e.authError="",e.confirm=function(){angular.extend(t,e.model);var i=parseInt(t.css.height,10)||0;e.model.properties.imgSrc&&i<115&&(e.model.btnStyle={width:"320px",height:"115px",lineHeight:"115px",backgroundColor:"transparent"}),"counter-tb"===e.model.properties.layout&&(!e.model.properties.imgSrc&&i<80&&(e.model.btnStyle={height:"80px",lineHeight:"80px"}),e.model.properties.imgSrc&&i<155&&(e.model.btnStyle=e.model.btnStyle||{},e.model.btnStyle.height=e.model.btnStyle.lineHeight="155px")),e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseEqfont=function(t){e.model.properties.icon=t,e.model.properties.imgSrc=null}}]),angular.module("scene.create.console.setting.style",["colorpicker.module","app.directives.style","app.directives.uislider","app.directives.limitInput","services.history","scene.create.console.map","chart.style","comp.style"]),angular.module("scene.create.console.setting.style").controller("StyleConsoleCtrl",["$scope","sceneService","historyService","$modal","$rootScope","setCompService","security",function(e,t,i,n,a,s,o){function r(t){for(var i=0;i<e.adSizes.length;i++)if(e.adSizes[i].value===t)return e.adSizes[i]}e.isEditor=o.isTplEditor();var l=e.elemDef=t.currentElemDef||{css:{}};e.longPage=t.longPage,delete l.css.borderTopLeftRadius,delete l.css.borderTopRightRadius,delete l.css.borderBottomLeftRadius,delete l.css.borderBottomRightRadius,delete l.css.border;var c,d,p,u=l.css,h=$("#nr #inside_"+e.elemDef.id+" > .element-box"),g=l.type+"",m=o.isAllowToAccess(o.accessDef.ACCESS_COMP_MANAGE);if(m&&(e.setModel=s.initModel(e.elemDef)),e.$on("adjust.line.height",function(){u.lineHeight&&"string"==typeof u.lineHeight&&u.lineHeight.indexOf("px")===-1&&(e.model.lineHeight=Math.abs(u.lineHeight))}),e.model={backgroundColor:u.backgroundColor||"",opacity:100-100*u.opacity||0,color:u.color||"#676767",borderWidth:parseInt(u.borderWidth,10)||0,borderStyle:u.borderStyle||"solid",borderColor:u.borderColor||"rgba(0,0,0,1)",paddingBottom:parseInt(u.paddingBottom,10)||0,paddingTop:parseInt(u.paddingTop,10)||0,borderRadius:parseInt(u.borderRadius,10)||0,transform:u.transform&&parseInt(u.transform.replace("rotateZ(","").replace("deg)",""),10)||0,textAlign:u.textAlign||"left",
lock:l.properties.lock},e.proModel={},e.adSizes=[{name:"大矩形",value:1,width:336,height:280},{name:"大型移动横幅",value:2,width:320,height:100},{name:"大型摩天大楼",value:3,width:300,height:600},{name:"中等矩形",value:4,width:300,height:250}],0===u.lineHeight||u.lineHeight?e.model.lineHeight=u.lineHeight:e.model.lineHeight=1,e.lineHeightEmpty=function(){0===e.model.lineHeight||e.model.lineHeight||(h[0].style.lineHeight=1,e.model.lineHeight=1)},u.lineHeight&&"string"==typeof u.lineHeight&&u.lineHeight.indexOf("px")===-1&&(e.model.lineHeight=Math.abs(u.lineHeight)),"m"===g)e.model.content=l.content,e.model.address=l.properties.address;else if("g"===g)e.proModel.content=l.content,e.proModel.size=l.properties.size;else if("h"===g)e.shapeAttrs=l.properties.items,e.scrollShow=!1,e.changePos=function(t){e.scrollTop=t.y,e.$apply()},e.shapeAttrs&&e.shapeAttrs.length>6&&(e.scrollShow=!0),e.$watch("shapeAttrs",function(e,t){if(e&&e!==t){var i=e.length,n=l.properties.src;if(n){if(!i)return;var a=h.find("[fill], [style*='fill']");$.each(a,function(t){for(var n=0;n<i;n++)for(var s=e[n].elements,o=0;o<s.length;o++)t===s[o]&&a.eq(t).css({fill:jQuery.Color(e[n].fill).toString()})})}}},!0);else if(l.type+""=="201"){for(c=t.getElements(),p=0;p<c.length;p++)c[p].id===l.properties.comid&&(d=c[p]);e.model.fontSize=l.css.fontSize,e.model.niketype=l.properties.type,e.model.content=l.content}else if(l.type+""=="2"&&l.css.fontSize)e.model.fontSize=parseInt($("#"+l.id)[0].style.fontSize,10)||l.css.fontSize;else if(l.type+""=="401"){for(c=t.getElements(),p=0;p<c.length;p++)if(c[p].id===l.properties.comid){d=c[p],e.model.fontSize=d.css.fontSize,e.model.backgroundColor=d.css.backgroundColor;var f=$("#inside_"+d.id+" > .element-box");e.model.content=d.content,e.model.color=d.css.color}e.model.niketype=l.properties.type}else l.type+""=="b"&&(e.boardsModel={style:l.properties.style,meslabel:l.properties.meslabel,morelabel:l.properties.morelabel});if(e.setPosition=function(){n.open({windowClass:"img_console",templateUrl:"scene/console/map.tpl.html",controller:"MapCtrl",resolve:{elemDef:function(){return l}}}).result.then(function(t){l.properties.zoom=t.zoom,l.properties.lat=t.center.lat,l.properties.lng=t.center.lng,t.label&&(l.content=t.label,l.properties.address=t.label);var i=$("#"+l.id).data("map");if(i.panTo(t.center),i.setZoom(t.zoom),$("#"+l.id).data("label")){var n=$("#"+l.id).data("label");n.setPosition(t.center)}var a=$("#"+l.id).data("marker");a.setPosition(t.center),t.label&&(e.model.content=t.label,e.model.address=t.label)})},e.maxRadius=Math.min(h.outerWidth(),h.outerHeight())/2+10,u.borderRadiusPerc?e.model.borderRadiusPerc=parseInt(u.borderRadiusPerc,10):u.borderRadius?"999px"===u.borderRadius?e.model.borderRadiusPerc=100:(e.model.borderRadiusPerc=parseInt(100*parseInt(u.borderRadius,10)*2/Math.min(h.outerWidth(),h.outerHeight()),10),e.model.borderRadiusPerc>100&&(e.model.borderRadiusPerc=100)):e.model.borderRadiusPerc=0,e.tmpModel={boxShadowDirection:0,boxShadowX:0,boxShadowY:0,boxShadowBlur:0,boxShadowSize:0,boxShadowColor:"rgba(0,0,0,0.5)"},u.boxShadow){var v=u.boxShadow.split(" ");e.tmpModel.boxShadowX=parseInt(v[0],10),e.tmpModel.boxShadowY=parseInt(v[1],10),e.tmpModel.boxShadowDirection=parseInt(u.boxShadowDirection,10)||0,e.tmpModel.boxShadowBlur=parseInt(v[2],10),e.tmpModel.boxShadowColor=v[3],e.tmpModel.boxShadowSize=parseInt(u.boxShadowSize,10)||0}e.clear=function(){e.model={backgroundColor:"",opacity:0,color:"#676767",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:0,transform:0,fontSize:12,textAlign:"left"},e.tmpModel={boxShadowDirection:0,boxShadowX:0,boxShadowY:0,boxShadowBlur:0,boxShadowSize:0,boxShadowColor:"rgba(0,0,0,0.5)"}},e.$watch("tmpModel",function(){var t={};$.extend(!0,t,e.model),t.borderRadius+="px",t.borderTopLeftRadius=t.borderTopRightRadius=t.borderBottomLeftRadius=t.borderBottomRightRadius=t.borderRadius,t.opacity=(100-e.model.opacity)/100,t.boxShadow=Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor,t.boxShadowDirection=e.tmpModel.boxShadowDirection,t.boxShadowSize=e.tmpModel.boxShadowSize,t.transform="rotateZ("+e.model.transform+"deg)",$.extend(!0,l.css,t)},!0),e.$watch("model",function(){var t={};if($.extend(!0,t,e.model),t.borderRadius+="px",t.borderTopLeftRadius=t.borderTopRightRadius=t.borderBottomLeftRadius=t.borderBottomRightRadius=t.borderRadius,t.opacity=(100-e.model.opacity)/100,t.boxShadow=Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor,t.boxShadowDirection=e.tmpModel.boxShadowDirection,t.boxShadowSize=e.tmpModel.boxShadowSize,t.transform="rotateZ("+e.model.transform+"deg)",$.extend(!0,l.css,t),l.properties.lock=t.lock,"m"===l.type){var i=$("#"+l.id).data("label");if(t.content){var n=$("#"+l.id).data("map");i?(i.setContent(t.content),i.getMap()||i.setMap(n),$("#"+l.id).data("label",i)):(i=new qq.maps.Label({position:n.getCenter(),map:n,content:t.content}),$("#"+l.id).data("label",i))}else i&&i.setMap(null);l.content=t.content}else l.type+""=="201"?(l.content!==t.content&&(l.content=t.content,$("#"+l.id).html(l.content)),l.properties.type=t.niketype,d&&(d.properties.type=t.niketype),l.css.fontSize=t.fontSize,$("#"+l.id).css("fontSize",t.fontSize+"px")):l.type+""=="2"&&t.fontSize?(l.css.fontSize=t.fontSize,$("#"+l.id).css("fontSize",t.fontSize+"px")):l.type+""=="401"&&(d&&(d.content!==t.content&&(d.content=t.content,$("#"+d.id).html(t.content)),d.css.fontSize=t.fontSize,$("#"+d.id).css("fontSize",t.fontSize+"px"),d.properties.type=t.niketype,d.css.backgroundColor=t.backgroundColor,d.css.color=t.color,f.css({color:t.color,backgroundColor:t.backgroundColor})),l.properties.type=t.niketype)},!0),e.$watch("proModel",function(){var t={};if($.extend(!0,t,e.proModel),"g"===g){if(t.size&&t.size!==l.properties.size){var i=r(t.size);e.model.width=i.width,e.model.height=i.height}l.content=e.proModel.content,l.properties.size=e.proModel.size}},!0),e.$watch("boardsModel",function(){var t={};$.extend(!0,t,e.boardsModel),l.properties.style!==t.style&&("pink"===t.style?e.model.backgroundColor="#F6DCF0":"black"===t.style?e.model.backgroundColor="#252525":e.model.backgroundColor="#F0F3F4",h.css("backgroundColor",e.model.backgroundColor),h.find(".boards-"+l.properties.style).removeClass("boards-"+l.properties.style).addClass("boards-"+t.style),l.properties.style=t.style),l.properties.meslabel!==t.meslabel&&(l.properties.meslabel=t.meslabel,h.find(".replay").html(t.meslabel)),l.properties.morelabel!==t.morelabel&&(l.properties.morelabel=t.morelabel,h.find(".more").html(t.morelabel))},!0),e.openExpore=function(t){var i=!e.$eval(t);e.showShadow=!1,e.showBasic=!1,e.showBorder=!1,e.showSetting=!1,e[t]=i}}]).directive("styleInput",["multiCompResize","$rootScope",function(e,t){return{restrict:"AE",link:function(e,i,n){var a=$("#nr #inside_"+e.elemDef.id),s=a.find(".element-box"),o=a.find(".element");e.$watch(function(){return $(i).val()},function(i,r){if(i!==r)if("borderWidth"===n.cssItem){s.css({borderStyle:e.model.borderStyle,borderWidth:i});var l={width:s.width(),height:s.height()};if(""+e.elemDef.type=="4"){var c=s.find("img"),d=c.width()/c.height(),p=l.width/l.height;d>=p?(c.outerHeight(l.height),c.outerWidth(l.height*d),c.css("marginLeft",-(c.outerWidth()-l.width)/2),c.css("marginTop",0)):(c.outerWidth(l.width),c.outerHeight(l.width/d),c.css("marginTop",-(c.outerHeight()-l.height)/2),c.css("marginLeft",0)),e.elemDef.properties.imgStyle.marginTop=c.css("marginTop"),e.elemDef.properties.imgStyle.marginLeft=c.css("marginLeft"),e.elemDef.properties.imgStyle.width=c.outerWidth(),e.elemDef.properties.imgStyle.height=c.outerHeight()}}else if("borderRadius"===n.cssItem)s.css({borderRadius:e.model.borderRadius});else if("opacity"===n.cssItem){var u=(100-i)/100;a.css({opacity:u}),a.attr("compOpacity",u)}else if("backgroundColor"===n.cssItem)s.css({backgroundColor:i});else if("color"===n.cssItem){if(s.css({color:i}),"h"===e.elemDef.type){var h=s.find("svg");h.find("g").length?h.find("g").attr("fill",i):h.children().attr("fill",i)}}else"borderStyle"===n.cssItem?s.css({borderStyle:e.model.borderStyle}):"textAlign"===n.cssItem?s.css({textAlign:e.model.textAlign}):"borderColor"===n.cssItem?s.css({borderColor:e.model.borderColor}):"padding"===n.cssItem?s.css({paddingTop:e.model.paddingTop,marginTop:-e.model.paddingBottom}):"lineHeight"===n.cssItem?s.css({lineHeight:e.model.lineHeight}):"transform"===n.cssItem?(s.parents("li").css({transform:"rotateZ("+e.model.transform+"deg)"}),t.$broadcast("boxOuter")):"boxShadow"===n.cssItem?(e.tmpModel.boxShadowX=-Math.sin(e.tmpModel.boxShadowDirection*Math.PI/180)*e.tmpModel.boxShadowSize,e.tmpModel.boxShadowY=Math.cos(e.tmpModel.boxShadowDirection*Math.PI/180)*e.tmpModel.boxShadowSize,s.css({boxShadow:Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor})):"width"===n.cssItem?(o.css("width",i),a.css("width",i)):"height"===n.cssItem&&(o.css("height",i),a.css("height",i))})}}}]).directive("angleKnob",function(){return{restrict:"AE",templateUrl:"scene/console/angle-knob.tpl.html",link:function(e,t){function i(e,t){var i=Math.sqrt((e-28)*(e-28)+(t-28)*(t-28))/28,n=28+(e-28)/i,a=28+(t-28)/i;s.css({top:Math.round(a),left:Math.round(n)})}function n(e,t){var i=e-28,n=28-t,a=180*Math.atan(i/n)/Math.PI;return t>28&&(a+=180),t<=28&&e<28&&(a+=360),Math.round(a)}var a=$(t).find(".sliderContainer"),s=$(t).find(".sliderKnob");e.$watch(function(){return e.tmpModel.boxShadowDirection},function(e){s.css({top:28-28*Math.cos(e*Math.PI/180),left:28+28*Math.sin(e*Math.PI/180)})}),0!==e.tmpModel.boxShadowDirection&&s.css({top:28-28*Math.cos(e.tmpModel.boxShadowDirection*Math.PI/180),left:28+28*Math.sin(e.tmpModel.boxShadowDirection*Math.PI/180)}),a.bind("mousedown",function(t){t.stopPropagation();var s=a.offset().left,o=a.offset().top;i(t.pageX-s,t.pageY-o);var r=n(t.pageX-s,t.pageY-o);e.tmpModel.boxShadowDirection=r,e.$apply(),$(this).bind("mousemove",function(t){t.stopPropagation(),i(t.pageX-s,t.pageY-o);var a=n(t.pageX-s,t.pageY-o);e.tmpModel.boxShadowDirection=a,e.$apply()}),$(this).bind("mouseup mouseleave",function(){$(this).unbind("mousemove"),$(this).unbind("mouseup mouseleave")})})}}}).controller("MapCtrl",["$scope","elemDef",function(e,t){e.elemDef=t,e.zoom=t.properties.zoom?t.properties.zoom:11,e.center=t.properties.lat?{lat:t.properties.lat,lng:t.properties.lng}:{lat:39.916527,lng:116.397128},"设置位置"!==t.properties.address&&(e.address=t.properties.address,e.markerP=new qq.maps.LatLng(e.center.lat,e.center.lng));var i=new qq.maps.SearchService({complete:function(t){var i=t.detail.pois;e.searchEnd(i)}});e.searchEnd=function(t){e.pois=t,e.choosePosition(t[0]),e.choosePoi=t[0],e.$apply()},e.choosePosition=function(t){e.center=t.latLng,e.choosePoi=t,e.markerP=e.center},e.cancel=function(){e.$dismiss()},e.ok=function(){e.$close({zoom:e.zoom,center:e.center,label:e.choosePoi?e.choosePoi.name:null})},e.searchAddress=function(e){e&&(i.setPageIndex(0),i.setPageCapacity(10),i.search(e))},e.change=function(t){e.zoom=t.zoom,e.bounds=t.bounds,e.center=t.center}}]).directive("strlen",[function(){function e(e,t,i){t||(t=""),e.html(eqShow.getCharactersLen(t)+"/"+i)}return{scope:{str:"="},restrict:"A",link:function(t,i,n){e(i,t.str,n.max),t.$watch("str",function(a,s){a!==s&&(t.str=eqShow.substtrCharacters(a,n.max),e(i,t.str,n.max))})}}}]).directive("advertisementContent",[function(){return{scope:{target:"@",content:"@"},restrict:"A",link:function(e){var t,i,n=$("#nr #iframe-"+e.target).get(0);n&&(i=n.contentWindow.jQuery,t=i(n.contentDocument.body)),e.$watch("content",function(a,s){a!==s&&(n?(t.empty(),a&&t.append(i(a))):($iframe=$('<iframe id="iframe-'+e.target+'" scrolling="no" frameborder="0" width="100%" height="100%" src="http://'+eqShow.getDomain()+'/advertisement.html"></iframe>'),n=$iframe.get(0),n.onload=function(){i=n.contentWindow.jQuery,t=i(n.contentDocument.body),t.append(i(a))},$("#nr #"+e.target+" .ad-contain").append($iframe)))})}}}]),angular.module("scene.create.console.tel",["app.directives.addelement"]),angular.module("scene.create.console.tel").controller("TelConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal",function(e,t,i,n,a){e.model={title:n.properties.title,number:n.properties.number,imgSrc:n.properties.imgSrc},e.authError="",e.buttons=[{id:1,text:"一键拨号",btnStyle:{width:"100px",backgroundColor:"rgb(244, 113, 31)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"热线电话",btnStyle:{width:"100px",backgroundColor:"rgb(253, 175, 7)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:3,text:"拨打电话",btnStyle:{width:"100px",backgroundColor:"rgb(121, 196, 80)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"一键拨号",btnStyle:{width:"100px",height:"30px",backgroundColor:"#fff","text-align":"center",border:"1px solid #3FB816","line-height":"30px",color:"rgb(0, 0, 0)"}}],e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.title="",e.btnIndex=-1,e.model.btnStyle={width:"115px",height:"115px","line-height":"1",backgroundColor:"transparent"},e.model.imgSrc=n.properties.imgSrc=t.data},function(){})},angular.forEach(e.buttons,function(t,i){""!==e.model.title&&n.css.backgroundColor&&n.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=i)}),e.butName=!1,e.butInput=!1,e.confirm=function(){if(null===e.model.imgSrc&&(!e.model.title||0===e.model.title.length))return e.authError="按钮名称不能为空",void(e.butName=!0);if(e.butName=!1,!e.model.number||0===e.model.title.number)return e.authError="电话号码不能为空",void(e.butInput=!0);if(e.butInput=!1,e.model.number){var t=/^\d{3,15}$/;if(!t.test(e.model.number))return e.authError="电话输入有误，请输入3-15位数字",void(e.butInput=!0);e.butInput=!1}e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,i){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=i,e.model.imgSrc=n.properties.imgSrc=null}}]),angular.module("scene.create.console.setting.trigger",["colorpicker.module","app.directives.style","app.directives.uislider","app.directives.limitInput","scene.edit.trigger"]),angular.module("scene.create.console.setting.trigger").controller("TriggerConsoleCtrl",["$scope","$rootScope","sceneService","triggerService","$modal","ModalService","i18nNotifications","triggerSourceService","editService",function(e,t,i,n,a,s,o,r,l){function c(){var t=n.getTrigger(h.id);if(t&&t.sends.length){p(t.sends);for(var i=0;i<t.sends.length&&e.triggerEvents[i];i++)i>0?t.sends[i].delay=t.sends[i-1].delay+e.triggerEvents[i].delay:t.sends[i].delay=e.triggerEvents[i].delay}var a;$.each(g,function(e,t){n.clearTrigger(e),a=n.getTrigger(e),a&&a.sends.length&&p(a.sends),a?t.trigger=a:delete t.trigger}),2===e.sendType.value&&(a=n.getTrigger(e.elemDef.id),a&&a.sends.length&&p(a.sends),e.elemDef.properties||(e.elemDef.properties={}),e.elemDef.properties.trigger=a)}function d(){if(!h)return void(e.triggerEvents=[]);var t=n.getTrigger(h.id);if(t&&t.sends.length){p(t.sends),e.triggerEvents=[];var i=angular.copy(t.sends);angular.forEach(i,function(t,n){if(e.triggerEvents.push({}),angular.forEach(t.handles,function(t){1!==t.type&&2!==t.type||!t.ids.length?3===t.type&&t.ids.length&&(e.triggerEvents[n]=angular.copy(e.eventTypes[1]),e.triggerEvents[n].type=2):(e.triggerEvents[n]=angular.copy(e.eventTypes[0]),e.triggerEvents[n].type=1)}),n>0)for(var a=0;a<n;a++)t.delay-=i[a].delay;e.triggerEvents[n].handles=t.handles,t.delay?e.triggerEvents[n].delay=t.delay:e.triggerEvents[n].delay=0})}e.triggerEvents.length&&$.each(e.triggerEvents,function(e,t){t.triggerElements=[],t.handles&&t.handles.length&&$.each(t.handles,function(e,i){i.ids.length&&$.each(i.ids,function(e,n){t.triggerElements.push({id:n,handleType:i})})})})}function p(e){for(var t=0;t<e.length;t++)"undefined"==typeof e[t].sendIndex&&e[t].hasOwnProperty("sendIndex")&&(e.splice(t,1),t--)}var u=utilTrigger.getSendType();e.sendTypes=u,e.sendType=e.sendTypes.CLICK;var h=e.elemDef=i.currentElemDef,g=i.getElementsMap(),m=i.getSceneObj().obj;if(m&&m.elements.length){e.triggerSources=[];var f=angular.copy(m.elements),v=0;$.each(f,function(t,i){["2","4","x","h"].indexOf(""+i.type)!==-1&&(""+i.type=="2"?i.name="文字"+ ++v:""+i.type=="4"?i.name="图片"+ ++v:""+i.type=="h"?i.name="形状"+ ++v:""+i.type=="x"&&(i.name="秀字体"+ ++v),e.triggerSources.push(i),r.push(i))})}e.$watch("elemDef",function(t){t&&(h=t,$.each(e.triggerSources,function(i,n){n.id===t.id&&(e.sourceElem=n)}))},!0),e.$watch("sendType",function(t){e.triggerEvents=[],1===t.value?h=e.elemDef=i.currentElemDef:2===t.value&&(h=e.elemDef=m),d()},!0),e.eventTypes=[{name:"existElement",value:1,title:"选择界面已有元素",children:[{type:"SHOW",title:"显示"},{type:"HIDE",title:"隐藏"}]},{name:"randomEvent",value:2,title:"随机图片"}],h&&1===e.sendType.value&&(""+h.type===4?e.triggerOriginal="图片1":""+h.type=="2"?e.triggerOriginal="文字1":""+h.type=="h"?e.triggerOriginal="形状1":""+h.type=="x"&&(e.triggerOriginal="秀字体1")),e.selectTriggerOriginal=function(){t.$broadcast("select.trigger.original")},e.triggerEvents=[],e.addTriggerEvent=function(i,n){if(1!==l.currentScale&&t.$broadcast("trigger.recoveryScale"),!e.sourceElem&&1===e.sendType.value)return void o.pushForCurrentRoute("select.trigger.source","notify.success");if(e.triggerEvents.length)for(var a=0;a<e.triggerEvents.length;a++){var s=!0;if(e.triggerEvents[a].handles)for(var r=0;r<e.triggerEvents[a].handles.length;r++)e.triggerEvents[a].handles[r].ids.length&&(s=!1);s&&(e.triggerEvents.splice(a,1),a--)}0===e.triggerEvents.length&&(n=0),e.triggerEvents.push({title:i.title,value:i.value,delay:0}),1===i.value?e.addTriggerItem(e.triggerEvents[n],n):2===i.value&&e.addRandomImg(e.triggerEvents[n],n)},e.addTriggerItem=function(i,n){e.currentTriggerEvent=i,n>=e.triggerEvents.length&&(n=e.triggerEvents.length-1),e.currentIndex=n,t.$broadcast("element.triggered.add",i,n)},e.addRandomImg=function(t,n){e.currentTriggerEvent=t,e.currentIndex=n,i.createComp("n")},e.$on("create.randomevent.trigger",function(i,n){t.$broadcast("show.random.trigger",h,n,e.currentIndex)}),e.$on("receive.element.update",function(t,i,a,s,o){e.triggeredElements=[],e.currentTriggerEvent?e.currentTriggerEvent.handles=[]:e.triggerEvents&&(e.triggerEvents[o].handles=[]);var r=n.getTrigger(h.id).sends;r.length&&p(r),angular.forEach(r,function(t){e.triggerEvents[o].handles=t.handles}),c(),d()}),e.switchShow=function(e,i){var n,a;e.triggerType?1===e.triggerType?(a=e.triggerType=2,n=!1):(a=e.triggerType=1,n=!0):1===e.handleType.type?(a=e.handleType.type=2,n=!1):(a=e.handleType.type=1,n=!0),t.$broadcast("switch.triggered.state",n,a,e.id,i)},e.removeTrigger=function(t){var i=h.id,a=n.getTrigger(i);if(a&&a.sends){if(p(a.sends),!a.sends[t])return void e.triggerEvents.splice(t,1);n.deleteTriggerBySendIndex(t,i),$.each(a.sends,function(e,t){t.sendIndex=e})}e.triggerEvents.splice(t,1)},e.getTriggerSources=function(t){e.triggerEvents=[],t&&($("#nr").find("#inside_"+t.id).trigger("mousedown"),h=e.elemDef=g[t.id],d())},d(),e.confirm=function(){c(),t.$broadcast("close.style.panel")},e.cancelTriggerElem=function(e,i){var n=h.id;t.$broadcast("cancel.element.trigger",e,n,i),d()},e.clear=function(){n.resetTrigger(h.id),e.triggerEvents=[]}}]).directive("eqxTrigger",["$compile","sceneService","triggerService",function(e,t,i){function n(e){var n=t.currentElemDef;e.$watch("sendType",function(i){1===i.value?n=e.elemDef=t.currentElemDef:2===i.value&&(n=e.elemDef=t.getSceneObj().obj)},!0);var h,g=$("#nr");e.$on("element.triggered.add",function(t,i,n){$(".switch-original").remove(),h=$("#inside_"+e.elemDef.id);var s=$('<div class="switch-original">');h.append(s).children(".bar").hide(),a(e,e.elemDef,i,n)}),e.$on("create.trigger.menu",function(t,i,n){var a=s(e,i,!!i.find(".switch-original").length);d(a,"triggerMenu",n)}),e.$on("switch.triggered.state",function(t,i,a,s,l){var c=$("#inside_"+s);i?o(c,e.sendType,p,n.id,s,l):r(c,e.sendType,p,n.id,s,l)}),e.$on("show.random.trigger",function(t,n,a,s){i.getSendIds(p.RANDOMEVENT.value,n.id);var o=utilTrigger.getHandleType().RANDOMEVENT.value;c(e.sendType,o,n.id,a.id,s)}),e.$on("cancel.element.trigger",function(i,n,a,s){if(h=$("#inside_"+n),l(h,e.sendType,p,a,n,s),"n"===u[n].type&&($("#nr").find("#inside_"+n).remove(),t.deleteElement(n)),e.triggerEvents.length)for(var o=0;o<e.triggerEvents.length;o++){var r=!0;if(e.triggerEvents[o].handles)for(var c=0;c<e.triggerEvents[o].handles.length;c++)e.triggerEvents[o].handles[c].ids.length&&(r=!1);r&&(e.triggerEvents.splice(o,1),o--)}}),e.$on("select.trigger.original",function(){var i=g.find(".edit_area").children("li");$('<div class="mask-trigger">').insertAfter(".edit_area").click(function(){$(this).remove(),i.each(function(){var e=$(this),t=e.attr("ctype"),i=parseInt(e.attr("id").replace("inside_",""),10);["2","4","h","x"].indexOf(""+t)!==-1&&e.css({"background-color":"","z-index":u[i].css.zIndex})});var a=parseInt($(".switch-original").parent().attr("id").replace("inside_",""),10);n=e.elemDef=t.currentElemDef=u[a],""+n.type=="4"?$scope.triggerOriginal="图片1":""+n.type=="2"?$scope.triggerOriginal="文字1":""+n.type=="h"?$scope.triggerOriginal="形状1":""+n.type=="x"&&($scope.triggerOriginal="秀字体1"),e.$apply()}),i.each(function(){var e=$(this),t=e.attr("ctype");["2","4","h","x"].indexOf(""+t)!==-1&&e.css({"background-color":"rgba(255,255,255,0.9)","z-index":10001})})})}function a(t,n,a,s){var o=$("#nr"),r=o.find(".edit_area").children("li");o.find(".mask-trigger").remove(),e('<div class="trigger-elem-list" trigger-elem-list panel-draggable></div>')(t).appendTo(".main .content"),$('<div class="mask-trigger">').insertAfter("#nr .edit_area");var l;if(i.getTrigger(n.id)&&(l=i.getTrigger(n.id).sends),r.each(function(){var e=$(this),t=e.attr("ctype");["2","4","h","x"].indexOf(""+t)!==-1&&(e.css({"background-color":"rgba(255,255,255,0.9)","z-index":10001}),l&&l.length&&$.each(l,function(t,i){t!==s&&$.each(i.handles,function(t,i){i.ids.length&&$.each(i.ids,function(t,i){e.attr("id")==="inside_"+i&&e.css({"background-color":"","z-index":""})})})}))}),n){var c=[];$.each(p,function(e,t){if(2!==t.value){var a=i.getSendIds(t.value,n.id);$.each(a,function(e,t){c.push(t)})}}),$.each(c,function(e,t){var i=o.find("#inside_"+t);i.css({"background-color":"","z-index":""})}),$("#comp_setting").css({zIndex:""})}}function s(e,t,i){var n=e.currentIndex,a=i?"":'<li class="trigger-show" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-dengpao1"></div>显示</a></li>',s=$('<ul id="triggerMenu" class="dropdown-menu" style="min-width: 100px; display: block;" role="menu" aria-labelledby="dropdownMenu1">'+a+'<li class="trigger-hide" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-dengpao1" style="color: #5F5F5F;"></div>隐藏</a></li><li class="trigger-none" role="presentation"><a role="menuitem" tabindex="-1"><div style="width: 21px;"></div>取消</a></li></ul>').css({position:"absolute","user-select":"none"}),c=$(".edit_area").find(".switch-original"),d=parseInt(c.parent().attr("id").replace("inside_",""),10),u=parseInt(t.attr("id").replace("inside_",""),10);return s.children(".trigger-show").click(function(){o(t,e.sendType,p,d,u,n),s.hide(),e.$apply()}),s.children(".trigger-hide").click(function(){r(t,e.sendType,p,d,u,n),s.hide(),e.$apply()}),s.children(".trigger-none").click(function(){l(t,e.sendType,p,d,u,n),s.hide(),$.each(e.triggerElements,function(e,t){u===t.id&&(t.checked=!1,t.triggerType="")}),e.$apply()}),s}function o(e,t,n,a,s,o){e.children(".boom").length||(e.children(".boom1").remove(),$('<div class="boom">').appendTo(e),i.deleteTrigger(t.value,n.HIDE.value,a,s,o),i.addTrigger(t.value,n.SHOW.value,a,s,o))}function r(e,t,n,a,s,o){e.children(".boom1").length||(e.children(".boom").remove(),$('<div class="boom1">').appendTo(e),i.deleteTrigger(t.value,n.SHOW.value,a,s,o),i.addTrigger(t.value,n.HIDE.value,a,s,o))}function l(e,t,n,a,s,o){e.children(".boom, .boom1").remove(),i.deleteTrigger(t.value,n.SHOW.value,a,s,o),i.deleteTrigger(t.value,n.HIDE.value,a,s,o),i.deleteTrigger(t.value,n.RANDOMEVENT.value,a,s,o)}function c(e,t,n,a,s){i.deleteTrigger(e.value,t,n,a,s),i.addTrigger(e.value,t,n,a,s)}function d(e,t,i){var n=$("#eq_main");$("#"+t).remove(),e.css({left:i.pageX+n.scrollLeft()+15,top:i.pageY+n.scrollTop(),zIndex:10001}).appendTo(n),n.mousemove(function(i){e=$("#"+t),(i.pageX<e.offset().left-20||i.pageX>e.offset().left+e.width()+20||i.pageY<e.offset().top-20||i.pageY>e.offset().top+e.height()+20)&&(e.hide(),$(this).unbind("mousemove"))})}var p=utilTrigger.getHandleType(),u=t.getElementsMap();return{restrict:"EA",link:n}}]).directive("leavePanel",function(){function e(e,t){t.hover(function(){},function(){e.obj={showTriggerPanel:!1},e.$apply()})}return{restrict:"EA",link:e}}).directive("triggerElemList",["sceneService","triggerService",function(e,t){function i(i){var a=angular.copy(e.getSceneObj().obj.elements),s=e.getElementsMap();i.triggerElements=[];var o;1===i.sendType.value?o=i.elemDef.trigger:2===i.sendType.value&&(i.elemDef.properties||(i.elemDef.properties={}),o=i.elemDef.properties.trigger);var r=$("#nr").find(".edit_area").children("li"),l=0;$.each(a,function(e,t){["2","4","x","h"].indexOf(""+t.type)!==-1&&(""+t.type=="4"?t.name="图片":""+t.type=="2"?t.name="文字":""+t.type=="h"?t.name="形状":""+t.type=="x"&&(t.name="秀字体"),t.name+=++l,i.triggerElements.push(t))}),o&&o.sends&&$.each(o.sends,function(e,t){e!==i.currentIndex&&$.each(t.handles,function(e,t){t.ids.length&&$.each(t.ids,function(e,t){for(var n=0;n<i.triggerElements.length;n++)i.triggerElements[n].id===t&&(i.triggerElements.splice(n,1),n--)})})}),i.changed=function(e,a){var s=$("#inside_"+e.id);return a?void(e.checked?($('<div class="boom1">').appendTo(s),t.deleteTrigger(i.sendType.value,n.HIDE.value,i.elemDef.id,e.id,i.currentIndex),t.addTrigger(i.sendType.value,n.HIDE.value,i.elemDef.id,e.id,i.currentIndex)):(s.children(".boom1").remove(),t.deleteTrigger(i.sendType.value,n.HIDE.value,i.elemDef.id,e.id,i.currentIndex))):void(e.checked?(s.children(".boom1").remove(),$('<div class="boom">').appendTo(s),t.deleteTrigger(i.sendType.value,n.HIDE.value,i.elemDef.id,e.id,i.currentIndex),t.addTrigger(i.sendType.value,n.SHOW.value,i.elemDef.id,e.id,i.currentIndex)):(s.children(".boom1").remove(),s.children(".boom").remove(),t.deleteTrigger(i.sendType.value,n.SHOW.value,i.elemDef.id,e.id,i.currentIndex),t.deleteTrigger(i.sendType.value,n.HIDE.value,i.elemDef.id,e.id,i.currentIndex)))},i.confirmList=function(){$(".mask-trigger").remove(),$(".trigger-list").remove(),i.elemDef&&($(".switch-original").remove(),$("#triggerMenu").hide(),$(".edit_area").find(".boom, .boom1").remove()),r.each(function(){var e=$(this),t=e.attr("ctype"),i=parseInt(e.attr("id").replace("inside_",""),10);["2","4","x","h"].indexOf(""+t)!==-1&&e.css({"background-color":"","z-index":s[i].css.zIndex})});var e,t=!1;1===i.sendType.value?e=i.elemDef.trigger:2===i.sendType.value&&(i.elemDef.properties||(i.elemDef.properties={}),e=i.elemDef.properties.trigger),e&&e.sends&&e.sends[i.currentIndex]?($.each(e.sends[i.currentIndex].handles,function(e,i){i.ids.length&&(t=!0)}),t||i.triggerEvents.splice(i.currentIndex,1)):i.triggerEvents.splice(i.currentIndex,1)},i.$watch("elemDef",function(e){var t;1===i.sendType.value?t=e.trigger:2===i.sendType.value&&(e.properties||(e.properties={}),t=e.properties.trigger),t&&t.sends&&$.each(t.sends,function(e,t){$.each(t.handles,function(e,t){$.each(t.ids,function(e,n){$.each(i.triggerElements,function(e,i){i.id===n&&(i.checked=!0,i.triggerType=t.type)})})})})},!0)}var n=utilTrigger.getHandleType();return{restrict:"EA",templateUrl:"scene/console/triggerelemlist.tpl.html",replace:!1,link:i}}]).directive("highlightElement",function(){function e(e,t){var i,n=$("#nr").find("li");setTimeout(function(){t.find(".trigger-elem").hover(function(){i=$(this).attr("id").substring(8),$.each(n,function(t,i){"inside_"+e.elemDef.id!==$(i).attr("id")&&$(i).css({zIndex:"","background-color":""})}),$("#inside_"+i).css({"z-index":10001,"background-color":"rgba(255,255,255,0.9)"})},function(){$.each(e.triggerElements,function(e,t){$("#inside_"+t.id).css({"z-index":10001,"background-color":"rgba(255,255,255,0.9)"})})})},0)}return{restrict:"EA",link:e}}).factory("triggerSourceService",[function(){var e={},t={};return e.push=function(e){t[e.id]=e.name},e.get=function(e){return t[e]},e.clear=function(){t={}},e}]),angular.module("scene.create.console.video",[]),angular.module("scene.create.console.video").controller("VideoCtrl",["$scope","$timeout","obj",function(e,t,i){function n(e){var t=e.substring(e.indexOf("src=")+4),i=t.substring(t.indexOf("://")+3),n=i.substring(0,i.indexOf("/"));return n.indexOf("v.qq")>=0||n.indexOf("tudou")>=0||n.indexOf("youku")>=0}e.model||(e.model={}),e.authError="",e.model.src=i.properties.src,e.confirm=function(){if(!e.model.src)return $("textarea").focus(),void(e.authError="请输入视频地址");var t=n(e.model.src);return t?void e.$close(e.model.src):($("textarea").addClass("error"),$("textarea").change(function(){$(this).removeClass("error")}),void(e.authError="暂不支持添加此视频！"))},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create.console.weChatShareModal",[]),angular.module("scene.create.console.weChatShareModal").controller("weChatShareModalCtrl",["$scope","modalInfo",function(e,t){function i(){var t={type:e.style.type,content:null};switch(e.style.type){case"myself":t.content=e.style.myselfContent;break;case"position":t.content=e.style.positionContent;break;case"selfAndPosition":t.content=e.style.selfAndPositionContent}e.$close(t)}function n(){e.$dismiss()}angular.extend(e,e,{title:t.isTitle?"标题":"描述",style:{type:t.editorType||"myself",myselfContent:"myself"===t.editorType?t.editorContent:"这是我用易企秀制作的场景，你也来试试吧。",positionContent:"position"===t.editorType?t.editorContent:"分享的人，你也一起来吧！",selfAndPositionContent:"selfAndPosition"===t.editorType?t.editorContent:"分享的人，你也一起来吧！"},content:t.editorContent||"",cancel:n,confirm:i,countCharacters:countCharacters})}]),angular.module("scene.create",["app.directives.editor","services.scene","confirm-dialog","services.modal","app.directives.component","services.pagetpl","save.template","scene.create.console","app.directives.comp.editor","app.directives.addelement","services.i18nNotifications","services.history","security.service","scene.edit.select","scene.edit.common","scene.edit.keymap","scene.edit.bg","services.staticRes","scene.create.pageTpl","scene.create.hoverElement","scene.preview","services.file","scene.edit.workspace","scene.create.console.font","services.editor","services.psdUpload","scene.create.compsManage"]),angular.module("scene.create").controller("CreateSceneCtrl",["$timeout","$compile","$rootScope","$scope","$routeParams","$route","$location","sceneService","pageTplService","$modal","ModalService","security","$window","i18nNotifications","historyService","panStateTracker","selectService","continueUrl","triggerService","staticResService","dataCacheService","storageService","gridGuide","editService","setCompService","fileService","$interval",function(e,t,n,a,s,r,l,c,d,p,u,h,g,m,f,v,b,y,w,x,k,S,T,C,E,P,I){function _(){var e=!1;return angular.forEach(a.tpl.obj.elements,function(t){"6"===(""+t.type).charAt(0)&&(e=!0)}),e}function L(e){a.scale=C.currentScale=V[e],C.scaleIndex=e+1,$("#nr").empty(),a.tpl.obj.properties?a.tpl.obj.properties.scale=!0:a.tpl.obj.properties={scale:!0},c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed"),n.$broadcast("refreshPageBg")}function M(e,t,i,s,o){a.loading=!0,a.pageId=a.pages[e-1].id;a.isXB=!1;c.getSceneByPage(a.pageId,t,i,o).then(function(s){a.loading=!1,
a.tpl=s.data,a.isLong=!1,Y=a.tpl.obj.properties,Y&&Y.xb&&(a.isXB=!0),Y&&Y.trigger&&w.setTrigger(a.tpl.obj.id,Y.trigger),Y&&Y.longPage?(a.isLong=!0,a.pageLength=Y.longPage,a.switchPhone(!0)):o?(a.pageLength=o,a.isLong=!0,a.switchPhone(!0)):(a.isLong=!1,a.pageLength=1,a.showPhone="false"!==S.get("create.phoneView"),n.$broadcast("switchBox",a.showPhone)),c.longPage=a.isLong,T.grid.refreshGrid(a.pageLength),delete a.tpl.obj.scene,a.sceneId=a.tpl.obj.sceneId,a.controlView.showBgTag=!1,angular.forEach(a.tpl.obj.elements,function(e){e.type+""=="3"&&(a.controlView.showBgTag=!0,a.currentBgDef=e)}),Y&&(Y.image||Y.scratch)&&(a.effectName="涂抹"),Y&&Y.finger&&(a.effectName="指纹"),Y&&Y.effect&&("money"===Y.effect.name?a.effectName="数钱":"snowFly"===Y.effect.name?a.effectName="飘雪":"fireWorks"===Y.effect.name?a.effectName="烟花":"none"===Y.effect.name&&(a.effectName="无")),Y&&Y.fallingObject&&(a.effectName="环境"),(t||i)&&(l.$$search={},l.search("pageId",++e),a.getPageNames()),a.pageNum=e,$("#nr").empty();var r=angular.copy(a.tpl.obj);r.elements=f.addPage(r.id,r.elements),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,w.clear(),a.isXB?c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit",xb:!0}):c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),a.originData=JSON.stringify(a.tpl),a.isXB||n.$broadcast("dom.changed"),n.$broadcast("refreshPageBg"),a.isCompMange&&(a.setComps=E.init(a.tpl.obj.elements))},function(){a.loading=!1})}function R(){m.pushForCurrentRoute("scene.save.success.nopublish","notify.success")}a.loading=!1,a.PREFIX_FILE_HOST=PREFIX_FILE_HOST,a.tpl={},a.originData="";var q,D="",A=21,F=1,z=0,N=1,O=0,U=1,H=0;n.isXB=a.isXB,a.$watch("isXB",function(){n.isXB=a.isXB});var j=!1;a.isScenesaving={status:!1,value:"场景保存中..."};var B=I(function(){a.isScenesaving.status=!0,a.isScenesaving.value="场景保存中...",a.saveScene(null)},3e5);if(a.templateType=1,a.controlView={},a.showSearch=!0,a.completeHtml2Canvas=null,a.lastPageTypes=[{name:"易企秀尾页",value:"eqFree"},{name:"易企秀底标",value:"eqLink"},{name:"去掉易企秀展示",value:"eqHide"}],a.pageTpl={},a.isAppEditor=!1,a.tabid="template",a.psdUpload={total:0,currentNum:0,showPsdWarn:!1,openPsdFileChooseBox:null},a.$watch("user",function(e){if(e)for(var t=0;t<e.roleIdList.length;t++)13===e.roleIdList[t]&&(a.isAppEditor=!0),4!==e.roleIdList[t]&&12!==e.roleIdList[t]&&13!==e.roleIdList[t]||(a.isTplEditor=!0)},!0),S.push("shoppingFontFamily1",JSON.stringify({})),S.push("shoppingFontFamily",JSON.stringify({})),sessionStorage.setItem("fontface",JSON.stringify([])),a.refreshTpl=function(){z>F&&!j&&(j=!0,a.getPageTpls(++F))},a.refreshTotalShow=function(){O>N&&!j&&(j=!0,a.getShowAllTask(3,++N,A))},a.refreshMyShow=function(){H>U&&!j&&(j=!0,a.getShowMyTask(null,++U,A))},a.showPhoneTip="false"!==S.get("create.showPhoneTip"),a.showAddPageTip="false"!==S.get("create.showAddPageTip"),a.showAddFormTip="false"!==S.get("showAddFormTip"),a.wechatWTip="false"!==S.get("wechatWTip"),a.scaleTip="false"!==S.get("scaleTip"),a.switchPhone=function(e){e?a.showPhone=!1:(a.showPhone=!a.showPhone,S.push("create.phoneView",a.showPhone)),n.$broadcast("switchBox",a.showPhone),S.get("create.showPhoneTip")||(S.push("create.showPhoneTip",!1),a.showPhoneTip=!1),a.showPhone||n.$broadcast("boxOuter",!0)},a.createComp=function(e,t,i){return a.sceneSetting.showFlag=!1,"6"===e&&_()?void u.openMsgDialog({msg:"当前页面的提交按钮已经存在，请不要重复添加。"}):void c.createComp(e,i,t,a.pageLength)},a.$on("hisChange",function(){f.addPageHistory(a.tpl.obj.id,a.tpl.obj.elements)}),d.getPageTagLabel(11001).then(function(e){a.tplFormatList=e.data.list}),d.getPageTagLabel(11003).then(function(e){a.tplInteractionList=e.data.list}),d.getPageTagLabel(11002).then(function(e){a.tplStyleList=e.data.list}),a.getPageTplTypestemp=function(e,t,i,n){d.getPageTplTypestemp(e,t,i,n).then(function(e){if(j=!1,e.data.list&&e.data.list.length>0){F>1?a.pageTpls=a.pageTpls.concat(e.data.list):a.pageTpls=e.data.list,z=Math.ceil(e.data.map.count/A);var t=e.config.url.split("&time")[0];k.contains(t)||(k.push("pageTpl",k.getAsyncUrl(),e),k.setAsyncUrl())}else a.pageTpls=[],z=0})},a.enterPress=function(e){var t=e||window.event;13===t.keyCode&&a.getPageTpls()},a.getPageTpls=function(e){var t="";e||(e=F=1);for(var i in a.pageTpl)"name"!==i&&a.pageTpl[i]&&(t+=a.pageTpl[i]+",");""!==t&&(t=t.substr(0,t.length-1)),a.pageTpl.name&&""!==a.pageTpl.name&&(a.showSearch=!1),a.getPageTplTypestemp(t,a.pageTpl.name,A,e)},a.getPageTpls(),a.resetTplFilter=function(){a.pageTpl.name=null,a.showSearch=!0,a.getPageTpls()},a.support=function(){return(!window.sessionStorage||"false"!==sessionStorage.getItem("checkSuport"))&&(!(navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv:11/)||navigator.userAgent.match(/Chrome/))&&((!navigator.userAgent.match(/iPad/)||!navigator.userAgent.match(/CriOS/))&&(y.setUrl(l.path()),l.path("scene/support"),!0)))},!a.support()){a.createCompGroup=function(e,t){return a.isXB?void u.openMsgDialog({msg:"秀版页不支持编辑"}):(a.sceneSetting.showFlag=!1,"g101"===e&&_()&&(u.openMsgDialog({msg:"当前页面的提交按钮已经存在，本操作将会删除已添加的按钮。"}),angular.forEach(a.tpl.obj.elements,function(e){"6"===(""+e.type).charAt(0)&&($("#nr").find("#inside_"+e.id).remove(),b.deleteElement(e.id),c.deleteElement(e.id),E.removeElemDef(e.id+""))})),void c.createCompGroup(e,null,t))},a.isRadioCheckboxRatingAccessable=h.isAllowToAccess(h.accessDef.RADIO_CHECKBOX_RATING),a.userScale=!0,a.isPsdUploadAccessable=!0;var X=!0;1!==h.currentUser.type&&(2!==h.currentUser.type&&21!==h.currentUser.type||h.currentUser.memberType)||(a.isPsdUploadAccessable=!1,a.userScale=!1,X=!1),a.isCompMange=!1,1!==h.currentUser.type&&(2!==h.currentUser.type&&21!==h.currentUser.type||h.currentUser.memberType)&&98!==h.currentUser.type&&(a.isCompMange=!0),a.updateCompPosition=c.updateCompPosition,a.updateCompAngle=c.updateCompAngle,a.updateCompSize=c.updateCompSize,a.openAudioModal=c.openAudioModal,a.openTriggerMode=function(){return a.sceneSetting.showFlag=!1,a.isXB?void u.openMsgDialog({msg:"秀版页不支持编辑"}):void c.openTriggerMode()},a.$on("dom.changed",function(){t($("#nr"))(a),n.$broadcast("boxOuter")}),a.scale=1;var V=[.5,.75,1,1.25,1.5,2,3,4],W=2;C.scaleIndex=3,C.currentScale=1,a.zoom=function(e){if(e){if(4===a.scale)return void n.$broadcast("outScale");W++}else{if(.5===a.scale)return void n.$broadcast("outScale");W--}L(W)},a.$on("comps.delete",function(){if(a.isCompMange)for(var e=b.getElements(),t=0;t<e.length;t++)E.removeElemDef(e[t])}),a.recovery=function(){2!==W&&(W=2,L(W),n.$broadcast("recoveryScale"))},a.$on("trigger.recoveryScale",a.recovery),a.$on("boxOuter",function(e,t){"rotateEnd"===t&&a.scale>1&&($("#nr").empty(),a.tpl.obj.properties?a.tpl.obj.properties.scale=!0:a.tpl.obj.properties={scale:!0},c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed"),n.$broadcast("refreshPageBg"))});var G=null;a.$on("showCropPanel",function(e,i){var s=$(".content").eq(0);G?(n.$broadcast("changeElemDef",i),G.show()):G=t("<div crop-image></div>")(a),s.append(G)}),a.openPageEffectModal=function(e){if(a.isXB)return void u.openMsgDialog({msg:"秀版页不支持编辑"});a.sceneSetting.showFlag=!1;var t=angular.copy(e);p.open({windowClass:"console six-contain effect-console",templateUrl:"scene/pageeffect/pageeffect.tpl.html",controller:"pageEffectCtrl",resolve:{properties:function(){return t}}}).result.then(function(e){a.tpl.obj.properties||(a.tpl.obj.properties={}),a.tpl.obj.properties.scratch=null,a.tpl.obj.properties.finger=null,a.tpl.obj.properties.fallingObject=null,a.tpl.obj.properties.effect=null,"无"!==e.name&&(a.tpl.obj.properties[e.value]=e.properties[e.value]),a.effectName=e.name},function(){n.$broadcast("clear.scratch.interval")})};var Y,Q=null;a.$on("showStylePanel",function(e,i){if(c.currentElemDef)var n=c.currentElemDef.type;if(!a.isXB){if("g"===n&&!a.isTplEditor)return void(Q&&Q.hide());var s=$(".content").eq(0);Q?Q.show():"style"===i.activeTab?Q=t('<div style-modal active-tab="style"></div>')(a):"anim"===i.activeTab?Q=t('<div style-modal active-tab="anim"></div>')(a):"trigger"===i.activeTab?Q=t('<div style-modal active-tab="trigger"></div>')(a):"dropdown"===i.activeTab&&(Q=t('<div style-modal active-tab="dropdown"></div>')(a)),s.append(Q)}}),a.$on("hideStylePanel",function(){Q&&Q.hide()}),a.refreshPage=function(e,t){return a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.refreshPage(e,t)}):(c.resetCss(),$("#nr").empty(),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed"),void n.$broadcast("refreshPageBg"))},a.navTo=function(e,t){a.controlView.pageList=!0,c.comPosition={top:0},a.isTplEditor&&(a.pageLabelAll.length=0,a.pageIdTag=e.id,a.getPageTagLabel()),e.id!==a.tpl.obj.id&&(a.setEditableStatus(),a.controlView.showBgTag=!1,a.saveScene(null,function(){M(t+1),l.$$search={},l.search("pageId",e.num)}),v.clear())},a.stopCopy=function(){copied=!1},a.getOriginPageName=function(e){D=e.name};var Z=[];a.getPageNames=function(){var e=s.sceneId;c.getPageNames(e).then(function(e){a.pages=e.data.list,angular.forEach(a.pages,function(e,t){e.name||(e.name="第"+(t+1)+"页")}),$.extend(!0,Z,e.data.list),M(l.search().pageId?l.search().pageId:a.pages[0].num)})},a.scene=null,c.getSceneDetail(s.sceneId,n.branchid).then(function(){a.scene=c.getCurrentScene(),a.sceneSetting.oldBgAudio=a.scene.bgAudio,a.getPageNames(),"show"===l.search().openSetting&&(a.sceneSetting.showFlag=!0)}),a.editableStatus=[],a.setEditableStatus=function(e,t){if(void 0!==e)a.editableStatus[e]=t;else for(var i=0;i<a.editableStatus.length;i++)a.editableStatus[i]=!1},a.savePageNames=function(e,t){e.name||(e.name="第"+(t+1)+"页"),a.tpl.obj.name=e.name,D!==e.name&&c.savePageNames(a.tpl.obj).then(function(){m.pushForCurrentRoute("page.change.success","notify.success")})},a.removeScratch=function(e){e.stopPropagation(),a.tpl.obj.properties.scratch=null,a.tpl.obj.properties.finger=null,a.tpl.obj.properties.fallingObject=null,a.tpl.obj.properties.effect=null},a.$on("text.click",function(i,n,s){$("#btn-toolbar").remove(),$(".toolbarColor").remove(),a.dbclickEvent=i;var o=$(n).offset().top,r=$(n).height(),l=angular.element('<div toolbar pages="pages" dbclick-event="dbclickEvent" height="'+r+'" top="'+o+'"></div>');t(l)(a),$("body").append(l),e(function(){$("#btn-toolbar").show(),$("#btn-toolbar").bind("click mousedown",function(e){e.stopPropagation()}),n.focus(),setTimeout(function(){if(window.getSelection){var e=window.getSelection();e.modify("move","left","documentboundary"),e.modify("extend","right","documentboundary")}s&&document.execCommand("fontName",0,"defaultFont")})})}),a.updatePosition=function(e){for(var t=a.tpl.obj.elements,i=[],n=0;n<t.length;n++)if(t[n].type+""=="3"){t[n].num=0,i.push(t[n]),t.splice(n,1);break}for(var s=0;s<e.length;s++)for(n=0;n<t.length;n++)if(t[n].num===e[s]){t[n].num=s+1,i.push(t[n]),t.splice(n,1);break}a.tpl.obj.elements=i},a.updateEditor=function(){var e=$("#nr");e.empty(),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),t(e)(a)};var J=!1;a.openSetting=function(){a.sceneSetting.showFlag=!a.sceneSetting.showFlag},a.setOriginData=function(e){a.originData=e},a.$on("changeCss",function(e,t){a.changeCssIndex=t.changZindex,c.resetCss()}),a.saveScene=function(t,i){if(!a.scene.name&&t&&!a.sceneSetting.showFlag)return void u.openMsgDialog({msg:"尚未设置标题，请设置后再执行此操作",btn:"去设置"},function(){a.sceneSetting.showFlag=!0});if(!J){if(a.sceneSetting.showFlag&&t)return void a.sceneSetting.saveSceneSetting().then(function(){a.saveScene(t,i)});if(a.completeHtml2Canvas)return void a.completeHtml2Canvas.then(function(){a.saveScene(t,i)});if(J=!0,a.changeCssIndex&&c.resetCss(),a.originData===JSON.stringify(a.tpl))return i&&i(),k.clear("sceneList"),t&&(!a.scene.publishTime||a.scene.updateTime>a.scene.publishTime?R():m.pushForCurrentRoute("scene.save.success.published","notify.success")),J=!1,void e(function(){a.isScenesaving.value="保存成功",e(function(){a.isScenesaving.status=!1},2e3)},1e3);if(delete a.tpl.obj.scene,a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,a.tpl.obj.elements.length>0){for(var n=JSON.parse(S.get("editTextId"))||[],s=0;s<a.tpl.obj.elements.length;s++)if(a.tpl.obj.elements[s].type+""=="2"&&$.inArray(a.tpl.obj.elements[s].id,n)!==-1){for(var o,r=a.tpl.obj.elements[s].content,l=/font-family:(.*?);/g,d=[];null!==(o=l.exec(r));)d.push(o[1].trim());var p=a.tpl.obj.elements[s].fonts,h=a.tpl.obj.elements[s].css.fontFamily||a.tpl.obj.elements[s].fontFamily;a.tpl.obj.elements[s].preWoffPath&&(p[h]=a.tpl.obj.elements[s].preWoffPath);for(var g in p)d.indexOf(g)===-1&&delete p[g];a.tpl.obj.elements[s].fonts=p;var f=$.inArray(a.tpl.obj.elements[s].id,n);n.splice(f,1)}S.push("editTextId",JSON.stringify(n))}var v=$.extend({},a.tpl.obj,!0);if(a.isXB){var b=$.extend({},a.tpl.obj.properties.xb,!0);delete v.elements,v.properties={xb:b}}c.saveScene(v).then(function(n){return k.clear("sceneList"),J=!1,n.data.success?(a.scene.updateTime=(new Date).getTime(),a.originData=JSON.stringify(a.tpl),i&&i(),t&&R(),e(function(){a.isScenesaving.value="保存成功",e(function(){a.isScenesaving.status=!1},2e3)},1e3),I.cancel(B),void(B=I(function(){a.isScenesaving.status=!0,a.isScenesaving.value="场景保存中...",a.saveScene(null)},3e5))):void u.openMsgDialog({msg:n.data.msg})},function(){J=!1,a.isScenesaving.status=!1,u.openMsgDialog({msg:res.data.msg})})}},a.publishScene=function(e){return a.scene.name||a.sceneSetting.showFlag?"2"===e&&a.scene.publishTime&&a.scene.updateTime<=a.scene.publishTime&&!a.allowPublish?void u.openConfirmDialog({msg:"您未对已驳回场景做任何修改，请查看驳回消息，如不修改继续审核，还是不会被通过",confirmName:"坚持审核",cancelName:"退出"},function(){a.allowPublish=!0,a.publishScene(e)}):2!==a.scene.status||a.allowPublish?a.sceneSetting.showFlag?void a.sceneSetting.saveSceneSetting().then(function(){a.publishScene()}):a.sceneSetting.oldBgAudio!==a.scene.bgAudio?void c.saveSceneSettings(a.scene).then(function(){a.scene.bgAudio?P.saveFilesHistory(a.scene.bgAudio.id,2).then(function(){k.clear("fileService1"),a.sceneSetting.oldBgAudio=a.scene.bgAudio,a.publishScene()}):(a.sceneSetting.oldBgAudio=a.scene.bgAudio,a.publishScene())}):a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.publishScene()}):!e&&!a.allowPublish&&a.scene.publishTime&&a.scene.updateTime<=a.scene.publishTime&&a.originData===JSON.stringify(a.tpl)?($(window).unbind("beforeunload"),void window.open("promotion/share/"+a.sceneId+"/socialShare","_self")):(a.publishSceneInter=function(){c.publishScene(a.scene.id,e).then(function(t){t.data.success?(k.clear("sceneList"),e?u.openMsgDialog({msg:'该场景已经提交审核，系统会尽快给出审核结果并已经系统消息形式给出，请耐心等待<a style="color:#08a1ef;" href="" target="_blank">了解审核规则</a>',confirmName:"确定"},function(){$(window).unbind("beforeunload"),window.open("promotion/share/"+a.sceneId+"/socialShare","_self")}):(m.pushForNextRoute("scene.publish.success","notify.success"),$(window).unbind("beforeunload"),window.open("promotion/share/"+a.sceneId+"/socialShare","_self"))):e&&u.openMsgDialog({msg:t.data.msg})})},void a.saveScene(null,function(){1===a.scene.staticStatus?u.openConfirmDialog({msg:"场景已经静态化,设置更改后不能及时更新,确定更改吗",confirmName:"确定",cancelName:"取消"},function(){a.publishSceneInter()}):a.publishSceneInter()})):void u.openConfirmDialog({msg:"当前场景为不允许访问状态，发布场景将重新对外开放访问 ",confirmName:"坚持发布",cancelName:"保存退出"},function(){a.allowPublish=!0,e?a.publishScene(e):a.publishScene()},function(){a.saveScene(null,function(){$(window).unbind("beforeunload"),window.open("promotion/share/"+a.sceneId+"/socialShare","_self")})}):void u.openMsgDialog({msg:"尚未设置标题，请设置后再执行此操作",btn:"去设置"},function(){a.sceneSetting.showFlag=!0})},a.exitScene=function(){l.$$search={},a.originData===JSON.stringify(a.tpl)?l.path("main"):u.openConfirmDialog({msg:"是否保存更改内容？",confirmName:"保存",cancelName:"不保存"},function(){a.saveScene(),l.path("main")},function(){l.path("main")})},a.duplicatePage=function(){return a.isXB?void u.openMsgDialog({msg:"秀版不允许复制"}):void a.saveScene(null,function(){M(a.pageNum,!1,!0)})},a.longAction=function(){if(a.addLong=!0,window.localStorage){var e=localStorage.getItem("setLongAction");e&&e.indexOf(n.user.id)>-1&&(a.addLong=!1,a.insertPage())}},a.insertPage=function(t){return t&&!X?void u.openConfirmDialog({msg:"付费企业功能，是否升级？",confirmName:"立即升级",cancelName:"我知道了"},function(){window.open("/privilege")}):(a.saveScene(null,function(){M(a.pageNum,!0,!1,null,t)}),void($("#pageList").height()>=360&&e(function(){var e=document.getElementById("pageList");e.scrollTop=e.scrollHeight},200)))},a.showAllDetail=function(e){window.open("/show/task/"+e)},a.selectPageLength=function(){a.showPageSet=!1,a.insertPage(a.newPageLength)},a.deletePage=function(e){if(e.stopPropagation(),1!==a.pages.length&&!a.loading){a.loading=!0,a.action=!1,n.insistDelete=!0,n.cancelDelete=!0;for(var t=0;t<a.tpl.obj.elements.length;t++){var i=a.tpl.obj.elements;"5"===i[t].type.toString()[0]&&(a.action=!0)}u.openConfirmDialog({msg:"页面删除后无法还原",confirmName:"坚持删除",cancelName:"稍后决定"},function(){n.insistDelete=!1,n.cancelDelete=!1,a.action===!0?u.openConfirmDialog({msg:"确定删除此页，将同时删除该场景已收集的数据?"},function(){K()},function(){a.loading=!1}):K()},function(){n.insistDelete=!1,n.cancelDelete=!1,a.loading=!1})}};var K=function(){c.deletePage(a.tpl.obj.id).then(function(e){a.loading=!1,e.data.success?(l.$$search={},a.pages.length===a.pageNum?(a.pages.pop(),l.search("pageId",--a.pageNum),M(a.pageNum,!1,!1)):(a.pages.splice(a.pageNum-1,1),l.search("pageId",a.pageNum),M(a.pageNum,!1,!1))):u.openMsgDialog({msg:e.data.msg})},function(){a.loading=!1})};a.removeBG=function(){for(var e=a.tpl.obj.elements,t=0;t<e.length;t++)if(e[t].type+""=="3"){e.splice(t,1);var i;for(i=t;i<e.length;i++)e[i].num--;break}n.$broadcast("remove.scene.bg")},a.removeBGAudio=function(e){e.stopPropagation(),a.scene.bgAudio=null},$(".scene_title").on("paste",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain")||prompt("Paste something..");document.execCommand("insertText",!1,t)}),a.myName=[{name:"我的"}],a.myCompany=[{name:"企业"}],a.creatCompanyTemplate=function(){if(a.isXB)return void u.openMsgDialog({msg:"秀版页不能生成企业模板"});var e=$.extend(!0,{},a.tpl.obj);if(delete e.scene,n.user){var t=parseInt(n.user.companyTplId,10);t?e.sceneId=t:n.companySceneId?e.sceneId=n.companySceneId:e.sceneId=null,c.saveCompanyTpl(e).then(function(e){e.data.success&&(m.pushForCurrentRoute("companytpl.setting.success","notify.success"),n.companySceneId=e.data.obj,a.getPageTplsByCompanyType())})}else a.myCompanyTpls=[]},n.$on("saveCompanyTemplate",function(){a.creatCompanyTemplate()});var ee=null;a.getPageTplsByCompanyType=function(){if(a.myCompanyTpls=[],a.myCompany[0].active=!0,!ee)if(n.companySceneId)ee=n.companySceneId;else{var e=parseInt(n.user.companyTplId,10);e&&(ee=n.companySceneId=e)}ee&&c.previewScene(ee).then(function(e){a.myCompanyTpls=e.data.list})},a.getRecentlyUsedTpls=function(){a.myRecentlyTpls=JSON.parse(S.get("tplUse-"+a.user.id))||[]},a.setTplTab=function(e){"TotalmyCollection"===e?(a.setTagTplTab("myCollection"),a.getPageTplsByMyType()):"showTpl"===e&&(a.setTagTplTab("myTask"),a.getShowMyTask()),"showTpl"===e&&(a.hideDelBtn=!0),a.tabid=e},a.setTagTplTab=function(e){a.tagTplTab=e},a.creatMyTemplate=function(){if(a.isXB)return void u.openMsgDialog({msg:"秀版页不能生成我的模板"});var e=$.extend(!0,{},a.tpl.obj);if(delete e.scene,n.user){var t=JSON.parse(n.user.property);t&&t.myTplId?e.sceneId=t.myTplId:n.mySceneId?e.sceneId=n.mySceneId:e.sceneId=null,c.saveMyTpl(e).then(function(e){m.pushForCurrentRoute("mytpl.setting.success","notify.success"),n.mySceneId=e.data.obj,a.getPageTplsByMyType()})}else a.myPageTpls=[]},a.$on("saveMyTemplate",function(){a.creatMyTemplate()});var te=null;a.getPageTplsByMyType=function(){if(a.myPageTpls=[],a.myName[0].active=!0,!te)if(n.mySceneId)te=n.mySceneId;else{var e=JSON.parse(n.user.property);e&&e.myTplId&&(te=n.mySceneId=e.myTplId)}te&&c.previewScene(te).then(function(e){a.myPageTpls=e.data.list})},a.getShowMyTask=function(e,t,i){c.getShowMyTask(e,t,i).then(function(e){e.data.success?(j=!1,a.showMyLists&&a.showMyLists.length>0&&U>1?a.showMyLists=a.showMyLists.concat(e.data.list):a.showMyLists=e.data.list,H=Math.ceil(e.data.map.count/A)):(a.showMyLists=[],H=o,u.openMsgDialog({msg:e.data.msg}))})},a.getShowAllTask=function(e,t,i){c.getShowAllTask(e,t,i).then(function(e){e.data.success?(j=!1,a.showAllLists&&a.showAllLists.length>0&&N>1?a.showAllLists=a.showAllLists.concat(e.data.list):a.showAllLists=e.data.list,O=Math.ceil(e.data.map.count/A)):u.openMsgDialog({msg:e.data.msg})})},a.$on("myPageList.update",function(e,t,n,s){if("my-tpl"===t)for(i=0;i<a.myPageTpls.length;i++)a.myPageTpls[i].id===s&&a.myPageTpls.splice(i,1);if("company-tpl"===t)for(i=0;i<a.myCompanyTpls.length;i++)a.myCompanyTpls[i].id===s&&a.myCompanyTpls.splice(i,1)}),a.$on("myPageList.delete",function(e,t,i){"company-tpl"===t&&21===n.user.type&&(i.context.firstElementChild.outerHTML="")});var ie={};a.getPageTplsByType=function(e){ie[e]?(a.childCatrgoryList=ie[e],a.getPageTplTypestemp(a.childCatrgoryList[0].id),childTagCut()):(a.childCatrgoryList=ie[e]=x.getPageTpls(e),a.getPageTplTypestemp(a.childCatrgoryList[0].id),childTagCut())};var ne={};a.getPageTagLabel=function(e){ne[e]?(a.pageLabel=ne[e],se()):a.scene&&a.isAppEditor?d.getPageTagLabel(1601).then(function(e){a.pageLabel=ne[1601]=e.data.list,se()}):(a.pageLabel=ne[e]=x.getPageTpls(e),se())},a.pageLabelAll=[];var ae,se=function(){d.getPageTagLabelCheck(a.pageIdTag).then(function(e){ae=e.data.list;for(var t=0;t<a.pageLabel.length;t++){for(var i={id:a.pageLabel[t].id,name:a.pageLabel[t].name},n=0;n<ae.length;n++){if(ae[n].id===a.pageLabel[t].id){i.ischecked=!0;break}i.ischecked=!1}a.pageLabelAll.push(i)}})};a.exitPageTplPreview=function(){$("#nr").empty(),c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed")},a.insertPageTpl=function(e,t,i,s,o){a.loading=!0;var r=function(e,t,i,s,o){if(t){if(a.tpl.obj.properties&&a.tpl.obj.properties.longPage)return void u.openMsgDialog({msg:"长页面不允许添加秀版"});c.getXBPage(e).then(function(){if(a.controlView.showBgTag=!1,a.loading=!1,a.tpl.obj.elements=c.getElements(),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,1===a.pageLength&&a.tpl.obj.elements)for(var t=0;t<a.tpl.obj.elements.length;t++)if(a.tpl.obj.elements[t].type+""=="3"){delete a.tpl.obj.elements[t].properties.croptype,delete a.tpl.obj.elements[t].properties.pageLength;break}$("#nr").empty(),f.addPageHistory(a.tpl.obj.id,a.tpl.obj.elements),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit",xb:!0}),angular.forEach(a.tpl.obj.elements,function(e){e.type+""=="3"&&(a.controlView.showBgTag=!0,a.currentBgDef=e)}),a.tpl.obj.properties=a.tpl.obj.properties||{},a.tpl.obj.properties.xb={taskId:s,orderId:i,sceneId:o,pageId:e,taskSceneId:a.scene.id},a.saveScene(null),a.loading=!1,a.isXB=!0},function(){a.loading=!1})}else c.getSceneTpl(e).then(function(e){if(a.isXB=!1,a.controlView.showBgTag=!1,a.loading=!1,"template"===a.tabid||"recentlyUsed"===a.tagTplTab){q=JSON.parse(S.get("tplUse-"+a.user.id))||[];for(var t=0;t<q.length;t++)q[t].id===e.data.obj.id&&q.splice(t,1);var i={id:e.data.obj.id,properties:{thumbSrc:e.data.obj.properties.thumbSrc,longPage:e.data.obj.properties.longPage}};q.length>17&&q.pop(),q.unshift(i),S.push("tplUse-"+a.user.id,JSON.stringify(q))}if(a.tpl.obj.elements=c.getElements(),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,1===a.pageLength&&a.tpl.obj.elements)for(var s=0;s<a.tpl.obj.elements.length;s++)if(a.tpl.obj.elements[s].type+""=="3"){delete a.tpl.obj.elements[s].properties.croptype,delete a.tpl.obj.elements[s].properties.pageLength;break}$("#nr").empty(),f.addPageHistory(a.tpl.obj.id,a.tpl.obj.elements),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,c.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),angular.forEach(a.tpl.obj.elements,function(e){e.type+""=="3"&&(a.controlView.showBgTag=!0,a.currentBgDef=e)}),n.$broadcast("dom.changed")},function(){a.loading=!1})};a.tpl.obj.elements&&a.tpl.obj.elements.length>0?u.openConfirmDialog({msg:"页面模板会覆盖编辑区域已有组件，是否继续？",confirmName:"是",cancelName:"取消"},function(){r(e,t,i,s,o)}):r(e,t,i,s,o)},a.chooseThumb=function(){p.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:"0"}}}}).result.then(function(e){a.tpl.obj.properties||(a.tpl.obj.properties={}),a.tpl.obj.properties.thumbSrc=e.data},function(){a.tpl.obj.properties.thumbSrc=null})},$(window).bind("beforeunload",function(){return"请确认您的场景已保存"}),a.$on("$destroy",function(){$(window).unbind("beforeunload"),f.clearHistory(),c.setCopy(!1),utilPictures.clearInterval()}),a.sortableOptions={placeholder:"ui-state-highlight ui-sort-position",containment:"#containment",update:function(e,t){var i=t.item.sortable.dropindex+1,n=a.pages[t.item.sortable.index].id;a.saveScene(null,function(){c.changePageSort(i,n).then(function(e){e.data.success?(M(i,!1,!1,!0),l.$$search={},l.search("pageId",i),a.pageNum=i,$.extend(!0,Z,a.pages)):($.extend(!0,a.pages,Z),u.openMsgDialog({msg:e.data.msg}))})})}},a.$on("history.changed",function(){a.canBack=f.canBack(a.tpl.obj.id),a.canForward=f.canForward(a.tpl.obj.id)}),a.back=function(){return a.isXB?void u.openMsgDialog({msg:"秀版不支持撤销功能"}):a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.back()}):(a.controlView.showBgTag=!1,void c.historyBack())},a.$on("refreshSetComps",function(){a.setComps=E.init(a.tpl.obj.elements)}),a.forward=function(){return a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.forward()}):void c.historyForward()},a.openEffects=function(){a.tpl.obj.properties&&(a.tpl.obj.properties.scratch||a.tpl.obj.properties.finger||a.tpl.obj.properties.fallingObject||a.tpl.obj.properties.effect)||a.openPageEffectModal(a.tpl.obj.properties)},a.openBgPanel=function(){a.controlView.showBgTag||a.createComp("3",a.longPage)},a.openAudioPanel=function(){a.scene.bgAudio||a.openAudioModal()},a.closeOtherPanel=function(e){var t=!a.$eval(e);a.showBackgroundPanel=!1,a.showMusicPanel=!1,a.showEffectsPanel=!1,a.gridGuideSetting.showFlag=!1,a.showZoomPanel=!1,a.$broadcast("hideBgOption"),a.showBgOptionPanel=!1,a.$eval(e+"="+t)},a.removeAudio=function(){a.scene.bgAudio=null},a.sceneSetting={showFlag:!1,oldBgAudio:null},a.settingScene=function(){a.sceneSetting.showFlag=!0},a.$on("show.edit.bg",function(e,t){a.controlView.showBgTag=!0,a.currBgSrc=t}),a.gridGuideSetting={showFlag:!1},a.replaceBg=function(e){c.openBgModal(e,a.pageLength),$("#nr").find(".wrapper-background").css({animation:"","animation-fill-mode":""})};var oe=[],re=[],le=[],ce=[];a.showFirstTimeTip=function(e){if(a.sceneSetting.showFlag=!1,a.isXB)return void u.openMsgDialog({msg:"秀版页不支持编辑"});if("w"===e){if(a.showHeadTip=!0,window.localStorage){var t=localStorage.getItem("setHeadAction");t&&(oe=t.split(","),oe.indexOf(n.user.id)>-1&&(a.showHeadTip=!1,c.createComp("w")))}}else if("wp"===e){if(a.showImageTip=!0,window.localStorage){var i=localStorage.getItem("setImageAction");i&&(re=i.split(","),re.indexOf(n.user.id)>-1&&(a.showImageTip=!1,c.createComp("wp")))}}else if("wr"===e&&(a.showVoiceTip=!0,window.localStorage)){var s=localStorage.getItem("setVoiceAction");s&&(le=s.split(","),le.indexOf(n.user.id)>-1&&(a.showVoiceTip=!1,c.createComp("wr")))}},a.switchShowFontTip=function(e,t){"w"===t?e&&(oe.push(n.user.id),localStorage.setItem("setHeadAction",oe.join(","))):"wp"===t?e&&(re.push(n.user.id),localStorage.setItem("setImageAction",re.join(","))):"wr"===t?e&&(le.push(n.user.id),localStorage.setItem("setVoiceAction",le.join(","))):"long"===t&&e&&(ce.push(n.user.id),localStorage.setItem("setLongAction",ce.join(",")))},a.addLongPage=function(){a.showPage=!1,p.open({windowClass:"login-container six-contain",templateUrl:"scene/newLongPage.tpl.html",controller:"PageNewCtrl"}).result.then(function(e){a.insertPage(e)})},a.hidePageTip=function(){S.get("create.showAddPageTip")||(S.push("create.showAddPageTip",!1),a.showAddPageTip=!1)},a.hideEffTip=function(){S.get("create.showAddEffTip")||(S.push("create.showAddEffTip",!1),a.showAddEffTip=!1)},a.hideHeartTip=function(e){S.get(e)||(S.push(e,!1),a[e]=!1)},a.customerService=n.customerService}}]).directive("changeColor",function(){return{link:function(e,t){t.bind("click",function(){$(t).addClass("current")})}}}).directive("thumbTpl",["sceneService","ModalService",function(e,t){return{scope:{myTpl:"=",hideDelBtn:"=",unTransform:"=",showTpl:"="},replace:!1,template:'<span class="bFlag_longPage" ng-if="myTpl.properties.longPage">长<i>{{myTpl.properties.longPage}}</i></span><div ng-if="!hideDelBtn" class="delete-element hint--bottom hint--rounded" ng-click="deleteMyTpl($event)" data-hint="删除此模板"><span class="eqf-scene-delete"></span></div><span ng-if="showTpl.status===3 && showTpl.sceneTotal>0" class="bFlag_longPage showing">推广中</span><span ng-if="showTpl.status===5" class="bFlag_longPage show_end">已结束</span><span ng-if="showTpl.sceneTotal<=0 && showTpl.status===3" class="bFlag_longPage show_unstart">未推广</span><div class="showTpl_contain"><div class="task_title">{{showTpl.taskName}}</div><div class="showTpl_bottom"><div class="showTpl_left"><p class="showTpl_budget">{{showTpl.budget}}<span>秀点</span></p><p class="budget_title">推广预算</p></div><div class="showTpl_right"><p class="unit_price">1秀点/{{showTpl.price}}PV</p><p class="price_title">推广单价</p></div></div></div>',link:function(i,n,a){if(i.$emit("myPageList.delete",a.id,n),a.noDel&&n.empty(),i.deleteMyTpl=function(s){s.stopPropagation(),t.openConfirmDialog({msg:"确定删除此模板?"},function(){e.deletePage(i.myTpl.id).then(function(){i.$emit("myPageList.update",a.id,n,i.myTpl.id)},function(){t.openMsgDialog({msg:"服务器异常!"})})})},$('<div class = "tmp-bg"></div>').appendTo(n),i.myTpl.istpl=!0,e.templateEditor.parse({def:i.myTpl,appendTo:n,mode:"view",disEvent:!0}),!i.unTransform){var s=$(".edit_area",n).height();486!==s?$(".edit_area",n).css("transform","scale(0.25) translateX(-480px) translateY(-"+(729+729*(s/486-1))+"px)"):$(".edit_area",n).css("transform","scale(0.25) translateX(-480px) translateY(-729px)")}}}}]).directive("gridGuideSetting",["gridGuide",function(e){return{scope:!0,templateUrl:"scene/console/gridGuideSetting.tpl.html",link:function(e,t){function i(){e.$apply(function(){e.gridGuideSetting.showFlag=!1})}var n=$(document);t.on("$destroy",function(){n.unbind("click",i)}),n.click(i)},controller:["$scope",function(t){t.grid=e.grid,t.guide=e.guide,t.config={gridState:t.grid.getVisable()||"enable",guideState:"false"===t.grid.getGuideState()?"disable":"enable",snapState:"false"===t.grid.getSnapState()?"disable":"enable"},t.$watch("config.gridState",function(e){"enable"===e?(t.$parent.gridGuideSetting.isGridEnabled=!0,t.grid.show()):"disable"===e&&(t.$parent.gridGuideSetting.isGridEnabled=!1,t.grid.hide()),t.grid.setVisable(e)}),t.$watch("grid.color",function(e){e&&(t.grid.paint(),t.grid.setColor(e))}),t.$watch("config.guideState",function(e){"enable"===e?(t.guide.options.enabled=!0,t.grid.setGuideState(!0)):"disable"===e&&(t.guide.options.enabled=!1,t.grid.setGuideState(!1))}),t.$watch("config.snapState",function(e){"enable"===e?(t.guide.options.snap=!0,t.grid.setSnapState(!0)):"disable"===e&&(t.guide.options.snap=!1,t.grid.setSnapState(!1))})}]}}]).directive("converToImage",["selectService",function(){function e(e,t){t.mousedown(function(){$(".content").trigger("mousedown")})}return{restrict:"EA",link:e}}]).directive("switchBtn",[function(){return{require:"ngModel",restrict:"AE",template:'<div class="switch" ng-click="switch()"><div class="circle-con"><i class="circle"></i></div></div>',link:function(e,t,i,n){var a=t.find(".switch");n.$render=function(){a.toggleClass("switch-open",angular.equals(n.$modelValue,"enable")),a.toggleClass("switch-close",angular.equals(n.$modelValue,"disable"))},a.bind("click",function(){var t=a.hasClass("switch-open");
e.$apply(function(){n.$setViewValue(t?"disable":"enable"),n.$render()})})}}}]).directive("pageTplColor",[function(){return{require:"ngModel",restrict:"AE",template:'<em value="1" style="background-color:#ff5448"></em><em value="2" style="background-color:#f2a653"></em><em value="3" style="background-color:#f9ce49"></em><em value=4"" style="background-color:#44cb83"></em><em value="5" style="background-color:#56c6ff"></em><em value="6" style="background-color:#08a1ef"></em><em value="7" style="background-color:#7171ef"></em><em value="8" style="background-color:#cc62c7"></em><em value="9" style="background-color:#7c4611"></em><em value="10" style="background-color:#000000"></em><em value="124" style="border:1px solid #ccd5db;color:#000000;"></em><em style="position:relative;"><em style="background-color:#ff5448;top:0;left:0;"></em><em style="background-color:#f2a653;top:0;left:9px;"></em><em style="background-color:#08a1ef;top:9px;left:0;"></em><em style="background-color:#44cb83;top:9px;left:9px;"></em></em>',link:function(e,t,i,n){function a(){s.unbind("click",a),e.$apply(function(){e.pageTpl.showColorPanel=!1})}for(var s=$(document),o=t.find("> em"),r=0;r<o.length;r++)e.pageTpl.color===$(o[r]).attr("value")&&$(o[r]).addClass("eqf-yes2");t.on("$destroy",function(){s.unbind("click",a),o.unbind("click")}),s.click(a),o.bind("click",function(){a(),n.$setViewValue($(this).attr("value"));var e=$(".select-color .tpl-color");$(this).attr("value")+""=="124"?e.css("border","1px solid #ccd5db"):e.css("border","none"),e.css("background-color",$(this).css("background-color"))})}}}]).directive("loadErr",[function(){return{restrict:"A",link:function(e,t,i){t.bind("error",function(){i.$set("src","assets/images/create/pic.svg"),t.addClass("load-err")})}}}]).directive("closePanel",[function(){return{scope:{pause:"@",model:"@"},restrict:"A",templateUrl:"",link:function(e,t){function i(t){"false"===e.pause&&t.stopPropagation()}function n(){e.$apply(function(){e.$eval("$parent."+e.model+"=false")})}var a=$(document);t.click(i),a.click(n),t.on("$destroy",function(){a.unbind("click",n),t.unbind("click")})}}}]).directive("pageScroll",["sceneService","editService",function(e,t){return{scope:{pageH:"@"},restrict:"A",link:function(i,n){n.on("mousewheel",function(a){var s=n.height(),o=(s/2-260)*t.currentScale,r=this.scrollTop+a.originalEvent.deltaY,l=486*i.pageH*t.currentScale-s+o;.5===t.currentScale&&(i.pageH>=4||i.pageH>1)&&(l+=100),r<=0&&(r=0),r>l&&(r>=l+o/2+100&&(n.scrollTop(l+o/2+100),a.preventDefault()),r=this.scrollTop);var c=r/t.currentScale-(t.currentScale>=3?100:0);c+400-o>486*i.pageH?c=486*i.pageH-200:c<0&&(c=0),n.find(".history").css("top",c),r/t.currentScale+100>486*i.pageH?r=486*i.pageH-130:t.currentScale>=1?r=(r-100)/t.currentScale:r/=t.currentScale,e.comPosition={top:r}}),i.$watch("pageH",function(e,t){e!==t&&(n.find(".history").css("top",0),n.scrollTop(0))}),i.$on("recoveryScale",function(){var a=n.height(),s=(a/2-260)*t.currentScale,o=486*i.pageH*t.currentScale-a+s;n.scrollTop()>o&&(s=o/t.currentScale-(t.currentScale>=3?50:0),s>0?(n.scrollTop(o+50),n.find(".history").css("top",s),e.comPosition={top:o}):(n.scrollTop(0),n.find(".history").css("top",0),e.comPosition={top:0}))})}}}]).controller("PageNewCtrl",["$scope",function(e){e.newPageLength=2,e.pageLengths=[{name:"2页",value:2},{name:"3页",value:3},{name:"4页",value:4},{name:"5页",value:5}],e.cancel=function(){e.$dismiss()},e.create=function(){e.$close(e.newPageLength)},e.changePageLength=function(t){e.newPageLength=t}}]).directive("psdUpload",["psdUploadService","ModalService",function(e,t){return{restrict:"A",template:'<div ng-click="openFileChooseBox()" id="psdUploadDivId"><em class="imp heart" ng-if="showPhoneTip"></em><i class="eqf-ps" style="font-size:15px;"></i></div>',scope:{psdUpload:"="},link:function(i){function n(i,n){function a(){i[0].size>31457280?t.openMsgDialog({msg:"psd文件大小超过30M了，上传文件不可以超过30M。"}):($("#psdLoading").show(),$.when(e.psdDecompose(i,n)).done(function(e){if($("#psdLoading").hide(),e.length>0){var i=e.join(",");t.openMsgDialog({msg:'图层 "'+i+'" 超过5M，我们已经屏蔽掉了！'})}}))}for(var s=!1,o="http://cdn.bootcss.com/psd.js/3.1.0/psd.min.js",r=document.getElementsByTagName("script"),l=0;l<r.length;l++)r[l].src===o&&(s=!0);if(s)a();else{var c=eqShow.delayLoadJSAndCSS(o,"js");c.onload=function(){a()}}}i.openFileChooseBox=function(){i.psdUpload.showPsdWarn=!0,i.psdUpload.currentNum=0,i.psdUpload.total=0},i.psdUpload.openPsdFileChooseBox=function(){$("#psdUploadDivId").append($('<input type="file" id="psdUploadId" style="display:none;" accept=".psd"/>'));var t=$("#psdUploadId");t.trigger("click"),t.change(function(){t.remove(),e.validationPSDFile(this.files)&&n(this.files,i.psdUpload)}),i.psdUpload.showPsdWarn=!1}}}}]),angular.module("scene.create.new",["services.scene","services.staticRes"]),angular.module("scene.create.new").controller("SceneNewCtrl",["$scope","$rootScope","$location","sceneService","items","ModalService","staticResService","dataCacheService","groupCom",function(e,t,i,n,a,s,o,r,l){e.scene={name:""};var c=!0;if(e.scene.types=o.getSceneType(),a){var d=!0;angular.forEach(e.scene.types,function(t){if(d){var i=""+a.type;t.value===i?(e.scene.type=t,d=!1):e.scene.type=e.scene.types[0]}})}else e.scene.type=e.scene.types[0];var p=!1,u=0;e.create=function(){if(c)if(c=!1,a){a.price=a.price?a.price:0;var o={id:a.id,type:e.scene.type.value,pageMode:e.scene.pageMode.id,expdType:l,price:a.price};1!==l&&(o.price=a.disCountPrice?a.disCountPrice:a.price,o.expdType=l?l:0),p&&(o.price=u),n.createByTpl(o).then(function(n){c=!0,200===n.data.code?(r.clear("sceneList"),a.fillScene?i.path("fillscene/"+n.data.obj):(i.path("scene/create/"+n.data.obj),i.search("pageId",1)),t.$broadcast("userXd"),e.$close()):130006===n.data.code?(u=n.data.obj,s.openConfirmDialog({msg:'当前样例价格有变动，新价格为<font color="#ff6e6e">'+n.data.obj+"</font>秀点，是否继续购买？",confirmName:"购买",cancelName:"取消"},function(){p=!0,e.create()})):(s.openMsgDialog({msg:n.data.msg}),e.$close())})}else n.createBlankScene(null,e.scene.type.value,e.scene.pageMode.id).then(function(e){c=!0,r.clear("sceneList"),i.path("scene/create/"+e.data.obj),i.search("pageId",1)}),e.$close()},e.cancel=function(){e.$dismiss()},e.pagemodes=[{id:2,name:"上下翻页"},{id:1,name:"左右翻页"}],e.scene.pageMode=e.pagemodes[0]}]),angular.module("scene.edit.bg",["services.scene","services.history"]),angular.module("scene.edit.bg").controller("editBgCtrl",["$scope","$rootScope","sceneService","historyService",function(e,t,i,n){e.cropBg=function(a){e.$broadcast("hide.editbg.panel");var s,o;a.properties.originSrc&&(s=a.properties.originSrc,o=a.properties.cropSize);var r={type:3,properties:{src:a.properties.imgSrc,pageLength:e.pageLength,originSrc:s,cropSize:o}};i.openCropModal(r,function(i){i.id&&(a.properties.id=i.id),1!==e.pageLength&&(a.properties.pageLength=e.pageLength,a.properties.croptype=i.type),i.cropSize&&(a.properties.cropSize=i.cropSize),i.originSrc&&(a.properties.originSrc=i.originSrc),t.$broadcast("scene.bg.replace",{type:"imgSrc",src:i.src,id:a.properties.id},a),a.properties.imgSrc=i.src,n.addPageHistory(a.pageId,e.tpl.obj.elements)})},e.scaleUpBg=function(e){e||(e={}),e.effect={type:"scaleUp",duration:1,blurSize:5}},e.scaleDownBg=function(e){e||(e={}),e.effect={type:"scaleDown",duration:1,blurSize:5}},e.blurBg=function(e){e||(e={}),e.effect={type:"blur",duration:1,blurSize:5}},e.sharpBg=function(e){e||(e={}),e.effect={type:"sharp",duration:1,sharpSize:5}},e.removeBgEffect=function(){e.currentBgDef.effect=null},e.$on("hideBgOption",function(){e.showBgOptionPanel=!1}),e.switchBgOption=function(t){e.showBgOptionPanel=t}}]),function(){function e(e,t,i,n,a,s,o,r,l,c){function d(e){function i(){u(g)}e.$on("element.delete",function(){g=a.getElements();for(var e=0,t=g.length;e<t;e++){var n=$("#nr").find("#inside_"+g[e]).attr("ctype");if(["a","r","c","z"].indexOf(""+n)!==-1||"5"===n.charAt(0))return void o.openConfirmDialog({msg:"将删除已收集的数据",confirmName:"确定",cancelName:"取消"},i)}u(g)}),e.$on("element.selectall",function(){h()}),e.$on("element.selectComp",function(e,t){$("#nr").find("ul").find(".bar").hide();var i=$("#nr").find("#inside_"+t);if($("#comp_setting").length){var n=$("#comp_setting").css("display");"none"===n&&$("#comp_setting").show(),i.trigger("mousedown")}else i.children(".bar").show(),i.trigger("click")}),e.$on("scene.bg.replace",function(i,n,a){var s=$("#nr .edit_area").parent();e.currentBgDef=a;var o=$(".wrapper-background").get(0),r="100%";if((2===a.properties.croptype||"backgroundColor"===n.type&&1===a.properties.croptype)&&(r=486*e.pageLength+"px"),o||(o=document.createElement("div"),$(o).prependTo(s).addClass("wrapper-background").css({position:"absolute",width:"100%",height:r,backgroundSize:"cover",backgroundPosition:"50% 50%"}).attr("id",a.id)),"imgSrc"===n.type){var l=n.src,c=l,d=/.svg/;d.test(c)||(c=eqShow.qiniuZoom(null,c)),o.style.backgroundImage="url("+PREFIX_FILE_HOST+c+")",a.properties.bgColor=null,a.properties.imgSrc=l,a.properties.id=n.id,n.originSrc&&(a.properties.originSrc=n.originSrc,a.properties.cropSize=n.cropSize),t.$broadcast("show.edit.bg",l),""+a.properties.croptype=="2"?($(o).css({backgroundSize:"cover",backgroundPosition:"50% 50%",height:r}),$(o).parent().css("overflow","visible")):($(o).css({backgroundSize:"cover",backgroundPosition:"50% 50%",height:"100%"}),$(o).parent().css("overflow","hidden"))}else"backgroundColor"===n.type&&(o.style.backgroundImage="none",o.style.backgroundColor=n.color,a.properties.imgSrc=null,a.properties.bgColor=n.color,$(o).css("height",r),t.$broadcast("show.edit.bg"),$(o).parent().css("overflow","visible"))}),e.$on("remove.scene.bg",function(){$(".wrapper-background").css({backgroundColor:"transparent",backgroundImage:"none"}).removeAttr("id"),e.controlView.showBgTag=!1}),e.$on("delete.random.elem",function(e,t){""+m[t].type=="n"&&($("#nr").find("#inside_"+t).remove(),n.deleteElement(t))}),e.$on("convert.html.canvas",function(){}),e.$on("select.less.id",function(t,i){m[i]&&p(e,m[i],$("#nr #"+i).get(0))}),e.$on("select.less",function(t,i){i&&i.length&&$.each(i,function(t,i){m[i]&&p(e,m[i],$("#nr #"+i).get(0))})})}function p(t,i,n){if(""+i.type=="x"&&""+t.user.type!="99"){var a=e.defer();t.completeHtml2Canvas=a.promise;var s=$(n).closest("li").clone();s.appendTo("#nr .edit_area").css({position:"absolute",zIndex:2,opacity:0,transform:""});var o=518===$(".box").height()?$(document).height():$(".workspace").height()/2-260+50+$(".box").height()+50;setTimeout(function(){var e=s.find(".element-box").get(0),n=s.width(),r=s.height();$(e).attr("style","").css({color:i.css.color,width:n+"px",height:r+"px"}),s.css({transform:""}),html2canvas(e,{width:n,height:r,innerHeight:o,onrendered:function(e){s.remove();var n=e.toDataURL();i.properties.dataUrl=n,a.resolve(),t.completeHtml2Canvas=null}})},0)}}function u(e){var i=n.getSceneObj(),o=n.getElementsMap();s.addPageHistory(i.obj.id,i.obj.elements),$.each(e,function(e,t){r.resetTrigger(parseInt(t,10)),$("#nr").find("#inside_"+t).remove(),n.deleteElement(t)}),$.each(o,function(e,t){r.clearTrigger(e);var i=r.getTrigger(e);i?t.trigger=i:delete t.trigger}),s.addPageHistory(i.obj.id,i.obj.elements),t.$broadcast("comps.delete"),a.clearElements(),t.$broadcast("hideStylePanel"),t.$broadcast("boxOuter"),$("#popMenu").hide()}function h(){a.clearElements();var e=$("#nr").find("ul").find("li.inside");e.children(".bar").show(),e.each(function(e,t){a.addElement($(t).attr("id").split("_")[1])})}var g,m=n.getElementsMap();return{restrict:"EA",link:d}}angular.module("scene.edit.common",["services.scene","services.select","services.history"]).directive("editCommon",["$q","$rootScope","$location","sceneService","selectService","historyService","ModalService","triggerService","dataCacheService","fileService",e])}(),function(){function e(e,t,i,n,a){function s(i,s,o,r){var l=$(document);i.$on("$destroy",function(){l.unbind("keydown")});var c,d={deltaX:0,deltaY:0};l.unbind("keydown").keydown(function(s){if(""+s.keyCode=="8"||""+s.keyCode=="46"){if($(".modal-dialog").length||$("#pageList").find("input").is(":focus"))return;n.getElements().length&&(s.preventDefault(),e.$broadcast("element.delete"))}if(["37","38","39","40"].indexOf(""+s.keyCode)!==-1){n.getElements().length&&s.preventDefault(),c||(c=!0,r.compDragStart(d));var o=a.currentScale>1?a.currentScale:1;""+s.keyCode=="37"?(d.deltaX-=o,r.compDragMove(d)):""+s.keyCode=="38"?(d.deltaY-=o,r.compDragMove(d)):""+s.keyCode=="39"?(d.deltaX+=o,r.compDragMove(d)):""+s.keyCode=="40"&&(d.deltaY+=o,r.compDragMove(d))}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="65"){if($(".modal-dialog").length)return;if(s.preventDefault(),c)return;c=!0,e.$broadcast("element.selectall")}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="90"){if(e.isXB)return;t.historyBack()}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="89"){if(e.isXB)return;t.historyForward()}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="67"){if($(".modal-dialog").length)return;t.copyElement()}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="86"){if($(".modal-dialog").length)return;t.getCopy()&&t.pasteElement()}i.$apply()}).unbind("keyup").keyup(function(){c=!1,(d.deltaX||d.deltaY)&&r.compDragEnd(d),d.deltaX=0,d.deltaY=0,i.$apply()})}return{restrict:"A",link:s,require:"^multiCompDrag"}}angular.module("scene.edit.keymap",["services.scene","services.history","services.select"]).directive("editKeymap",["$rootScope","sceneService","historyService","selectService","editService",e])}(),angular.module("scene.edit.select",["services.history","services.scene"]).controller("selectCtrl",["$scope",function(e){e.pasteOpacity=.3,e.$on("select.more",function(){e.safeApply(function(){e.showSelectPanel=!0})}),e.$on("select.less",function(){e.safeApply(function(){e.showSelectPanel=!1})}),e.$on("copyState.update",function(t,i){e.safeApply(function(){e.pasteOpacity=i?1:.3})})}]).directive("eqxAlignLeft",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=n.bigDetectionBoxPointA.x;angular.forEach(n.editArea.detectionBoxs,function(i){var n=e-i.startPointA.x;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:i.startPosition.top,left:i.startPosition.left+n};i.element.css("left",a.left),t.updateCompPosition(i.element.attr("id"),a,!0)});var s=t.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignHorizontalCenter",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=n.bigDetectionBoxPointO.x;angular.forEach(n.editArea.detectionBoxs,function(i){var n=e-i.startPointO.x;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:i.startPosition.top,left:i.startPosition.left+n};i.element.css("left",a.left),t.updateCompPosition(i.element.attr("id"),a,!0)});var s=t.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignRight",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=n.bigDetectionBoxPointB.x;angular.forEach(n.editArea.detectionBoxs,function(i){var n=e-i.startPointB.x;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:i.startPosition.top,left:i.startPosition.left+n};i.element.css("left",a.left),t.updateCompPosition(i.element.attr("id"),a,!0)});var s=t.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignTop",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=n.bigDetectionBoxPointA.y;angular.forEach(n.editArea.detectionBoxs,function(i){var n=e-i.startPointA.y;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:i.startPosition.top+n,left:i.startPosition.left};i.element.css("top",a.top),t.updateCompPosition(i.element.attr("id"),a,!0)});var s=t.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignVerticalCenter",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=n.bigDetectionBoxPointO.y;angular.forEach(n.editArea.detectionBoxs,function(i){var n=e-i.startPointO.y;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:i.startPosition.top+n,left:i.startPosition.left};i.element.css("top",a.top),t.updateCompPosition(i.element.attr("id"),a,!0)});var s=t.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignBottom",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=n.bigDetectionBoxPointB.y;angular.forEach(n.editArea.detectionBoxs,function(i){var n=e-i.startPointB.y;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:i.startPosition.top+n,left:i.startPosition.left};i.element.css("top",a.top),t.updateCompPosition(i.element.attr("id"),a,!0)});var s=t.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxVerticalAverage",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return function(s,o){o.click(function(){var o=e.getElements(),r=o.length;r<2||s.$apply(function(){a.initCollisionDetectorWithElements();var e=n.editArea.detectionBoxs;e.sort(function(e,t){return e.startPointO.y>t.startPointO.y});var s=e[0].startPointO.y,o=e[r-1].startPointO.y,l=(o-s)/(r-1);angular.forEach(e,function(e,i){if(0!==i&&i!==r){var n=s+i*l-e.startPointO.y;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:e.startPosition.top+n,left:e.startPosition.left};e.element.css("top",a.top),t.updateCompPosition(e.element.attr("id"),a,!0)}});var c=t.getSceneObj();i.addPageHistory(c.obj.id,c.obj.elements)})})}}]).directive("eqxHorizontalAverage",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,i,n,a){return function(s,o){o.click(function(){var o=e.getElements(),r=o.length;r<2||s.$apply(function(){a.initCollisionDetectorWithElements();var e=n.editArea.detectionBoxs;e.sort(function(e,t){return e.startPointO.x>t.startPointO.x});var s=e[0].startPointO.x,o=e[r-1].startPointO.x,l=(o-s)/(r-1);angular.forEach(e,function(e,i){if(0!==i&&i!==r){var n=s+i*l-e.startPointO.x;n=n===Math.abs(n)?Math.floor(n):Math.ceil(n);var a={top:e.startPosition.top,left:e.startPosition.left+n};e.element.css("left",a.left),t.updateCompPosition(e.element.attr("id"),a,!0)}});var c=t.getSceneObj();i.addPageHistory(c.obj.id,c.obj.elements)})})}}]).directive("eqxCopy",["selectService","sceneService",function(e,t){return{link:function(e,i){var n=$(i);n.click(function(){t.copyElement()})}}}]).directive("eqxPaste",["sceneService","historyService",function(e,t){return{link:function(i,n){var a=$(n);a.click(function(){if(e.getCopy()){e.pasteElement();var n=e.getSceneObj();t.addPageHistory(n.obj.id,n.obj.elements),i.$apply()}})}}}]).directive("eqxDeleteMore",["$rootScope",function(e){return{link:function(t,i){var n=$(i);n.click(function(){e.$broadcast("element.delete")})}}}]),angular.module("services.editor",[]),angular.module("services.editor").factory("setCompService",["$http","$rootScope",function(e,t){function i(){for(var e=a.length,t=0;t<e;t++){for(var i=0;i<e-1-t;i++)if(a[i].setsort<a[i+1].setsort){var n=a[i];a[i]=a[i+1],a[i+1]=n}a[a.length-t-1].num=a.length-t}}var n={},a=[],s={2:{des:"文本",num:0},x:{des:"秀字体",num:0},4:{des:"图片",num:0},h:{des:"图形",num:0},5:{des:"输入框",num:0},r:{des:"单选框",num:0},c:{des:"复选框",num:0},p:{des:"图集",num:0},6:{des:"按钮",num:0},i:{des:"计数器",num:0},m:{des:"地图",num:0},w:{des:"微信音频",num:0},t:{des:"图表",num:0},z:{des:"下拉列表",num:0},b:{des:"留言板",num:0},v:{des:"视频",num:0},a:{des:"评分",num:0},n:{des:"随机图片",num:0},8:{des:"电话",num:0},l:{des:"链接",num:0},s:{des:"音效",num:0},d:{des:"阅读量",num:0}};return n.init=function(e){this.clear(),setElems=e;for(var t=0,n=e.length;t<n;t++){var o=e[t],r=(""+o.type).charAt(0);if("3"!==r&&"g"!==r){var l={id:e[t].id,setstatus:o.properties.setstatus||4,setremark:o.properties.setremark||"",setsort:o.css.zIndex||t,isnew:!o.properties.setstatus};o.name?l.setlabel=o.name:l.setlabel=s[r].des+(s[r].num+1),s[r].num++,a.push(l)}}return i(),a},n.initModel=function(e){var t=this.getElemDefById(e.id);return t},n.addModel=function(e){var t=(""+e.type).charAt(0);if("3"!==t&&"g"!==t){var i={id:e.id,setlabel:s[t].des+(s[t].num+1),settype:"",setstatus:4,setremark:"",setsort:e.css.zIndex,isnew:!0};s[t].num++,a.unshift(i)}},n.getElemDefs=function(){return a},n.getElemDefById=function(e){for(var t,i=0;i<a.length;i++)if(a[i].id===e){t=a[i];break}return t},n.removeElemDef=function(e){for(var t=0,i=a.length;t<i;t++)if(a[t].id+""===e){for(var n=a[t].setsort,s=n;s<i;s++)a[s].setsort=a[t].setsort++;a.splice(t,1);break}},n.clear=function(){a=[],$.each(s,function(e,t){t.num=0})},n.getSortNum=function(){return a.length},n}]),angular.module("scene.edit.trigger",[]).factory("triggerService",["$rootScope",function(e){function t(e,t,i,n,a){var o=s(e,t,i,a).ids,r=o.indexOf(n);r>=0||o.push(n)}function i(e,t,i,n,a){var o=u[i];if(o&&o.sends.length){var r=s(e,t,i,a).ids,l=r.indexOf(n);l<0||r.splice(l,1)}}function n(t,i,n,a){var s=l(t,n).ids,o=s.indexOf(i);o>=0||(s.push(i),e.$broadcast("receive.element.update",t,i,n,a))}function a(t,i,n,a){var s=l(t,n).ids,o=s.indexOf(i);o<0||(s.splice(o,1),e.$broadcast("receive.element.update",t,i,n,a))}function s(e,t,i,n){var a=o(e,i,n).handles,s=c(a,t);if(s)return s;var r={type:t,ids:[]};return a.push(r),r}function o(e,t,i){var n=r(t),a=n.sends,s=d(a,i);if(s)return s;var o={sendIndex:i,delay:0,type:e,handles:[]};return a.push(o),o}function r(e){return u[e]||(u[e]={sends:[],receives:[]}),u[e]}function l(e,t){var i=r(t),n=i.receives,a=c(n,e);if(a)return a;var s={type:e,ids:[]};return n.push(s),s}function c(e,t){for(var i=0;i<e.length;i++)if(t===e[i].type)return e[i];return null}function d(e,t){for(var i=0;i<e.length;i++)if(t===e[i].sendIndex)return e[i];return null}var p={},u={};return p.clear=function(){u={}},p.getTrigger=function(e){return u[e]},p.getReceiveIds=function(e,t,i){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof i)return[];var n=s(e,t,i).ids;return angular.copy(n)},p.getSendIds=function(e,t){if("number"!=typeof e||"number"!=typeof t)return[];var i=l(e,t).ids;return angular.copy(i)},p.setTrigger=function(e,t){"number"==typeof e&&"object"==typeof t&&(u[e]=t)},p.addTrigger=function(e,i,a,s,r){"number"==typeof e&&"number"==typeof i&&"number"==typeof a&&"number"==typeof s&&(u[a]&&u[a].sends[r]||o(e,a,r),t(e,i,a,s,u[a].sends[r].sendIndex),n(i,a,s,r))},p.deleteTrigger=function(e,t,n,s,o){"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof s&&u[n]&&u[n].sends[o]&&(i(e,t,n,s,u[n].sends[o].sendIndex),a(t,n,s,o))},p.clearTrigger=function(e){var t=u[e];if(t){for(var i=!1,n=!1,a=0;a<t.sends.length;a++){if("number"==typeof t.sends[a].sendIndex)for(var s=0;s<t.sends[a].handles.length;s++)if(t.sends[a].handles[s].ids.length){i=!0;break}if(i)break}for(var o=0;o<t.receives.length;o++)if(t.receives[o].ids.length){n=!0;break}i||n||delete u[e]}},p.resetTrigger=function(e){if("number"==typeof e){var t=utilTrigger.getSendType(),i=utilTrigger.getHandleType();for(var n in t)for(var a in i){var s=t[n].value,o=i[a].value,r=l(o,e).ids;r.length&&$.each(r,function(t,i){if(p.getTrigger(i)){for(var n=p.getTrigger(i).sends,a=0;a<n.length;a++)"undefined"==typeof n[a].sendIndex&&n[a].hasOwnProperty("sendIndex")&&(n.splice(a,1),a--);var r=i;$.each(n,function(t,i){var n=t;$.each(i.handles,function(t,i){if(i.ids.length){var l=i.ids;for(a=0;a<l.length;a++)l[a]===e&&p.deleteTrigger(s,o,r,e,n)}})})}});var c=p.getTrigger(e);if(c&&c.sends&&c.sends.length)for(var d=0;d<c.sends.length;d++)"undefined"==typeof c.sends[d].sendIndex&&triggerSends[d].hasOwnProperty("sendIndex")?(c.sends.splice(d,1),d--):p.deleteTriggerBySendIndex(d,e)}}},p.deleteTriggerBySendIndex=function(t,i){var n=u[i];if(n&&n.sends.length){for(var a=0;a<n.sends.length;a++)"undefined"==typeof n.sends[a].sendIndex&&triggerSends[a].hasOwnProperty("sendIndex")&&(n.sends.splice(a,1),a--);var s=n.sends[t].type;$.each(n.sends[t].handles,function(n,a){var o=a.type;if(a.ids.length)for(var r=0;r<a.ids.length;r++)e.$broadcast("delete.random.elem",a.ids[r]),p.deleteTrigger(s,o,i,a.ids[r],t),r--}),n.sends.splice(t,1)}},p.getSend=o,p}]),angular.module("scene.create.compsManage",[]),angular.module("scene.create.compsManage").controller("CompsManageCtrl",["$scope","setCompService","selectService","$rootScope","sceneService",function(e,t,i,n,a){function s(e){var i=a.getComponent(e);elemDef=t.getElemDefById(e),i.name=elemDef.setlabel}function o(e,t,i){var a=e[t].setsort;if(t>i)for(var s=t;s>i;s--)e[s].setsort=e[s-1].setsort,r(e[s]);else for(var o=t;o<i;o++)e[o].setsort=e[o+1].setsort,r(e[o]);e[i].setsort=a,r(e[i]),n.$broadcast("zindex.change")}function r(e){var t=a.getComponent(e.id);t.css.zIndex=e.setsort}e.compEditStatus=[],e.setCompEditStatus=function(t,i,a){if(i&&e.curCompId!==a+""&&n.$broadcast("element.selectComp",a),!e.isTplEditor)return void(e.compEditStatus[t]=i);if(void 0!==t)e.compEditStatus[t]=i,i||s(a);else for(var o=0;o<e.compEditStatus.length;o++)e.compEditStatus[o]=!1},e.$on("refreshSetComps",function(){e.curCompId=""}),e.$on("comps.select",function(t,i){i?e.curCompId=i:e.curCompId=""}),e.compSortOption={placeholder:"ui-state-highlight ui-sort-position",containment:"#containment",update:function(e,t){o(t.item.sortable.sourceModel,t.item.sortable.dropindex,t.item.sortable.index)}}}]),angular.module("scene.edit.workspace",[]),angular.module("scene.edit.workspace").directive("editWorkspace",["$rootScope","selectService","$compile","sceneService","gridGuide","security",function(e,t,i,n,a,s){function o(e){4===e?d.html("最大值："+parseInt(100*e,10)+"%"):"0.5"===e?d.html("最小值："+parseInt(100*e,10)+"%"):d.html(parseInt(100*e,10)+"%"),d.fadeIn(800),r&&clearTimeout(r),r=setTimeout(function(){d.fadeOut(800)},2500)}var r,l=1,c=$(".workspace"),d=c.find(".scaleTips");return{scope:{scale:"@"},restrict:"A",link:function(e,t){if(1!==s.currentUser.type&&(2!==s.currentUser.type&&21!==s.currentUser.type||s.currentUser.memberType)){e.scale&&("1"===e.scale?t.css("transform",""):t.css("transform","scale("+e.scale+")"));var i=$(document).height()-50,r=$(document).width()-184-288;t.css({width:r,height:i});var c=t.parent().get(0);e.$watch("scale",function(n,s){if(n!==s){if(l=e.scale,l>1)var d=r/2+c.scrollLeft,p=i/2+c.scrollTop,u=d/s*n-r/2,h=p/s*n-i/2;t.css("transform","scale("+e.scale+")"),o(e.scale),u&&(c.scrollLeft=u,c.scrollTop=h),t.find(".history").css("transform","scale("+1/e.scale+")"),n<1?(t.css({width:r/e.scale}),t.find(".box").css("borderWidth","2px"),t.find(".internal-box").css("borderWidth","2px")):"1"===n?(t.css({width:r,overflow:"hidden",transform:""}),t.find(".box").css("borderWidth","2px"),t.find(".internal-box").css("borderWidth","2px")):(t.css({width:r,height:i}),t.find(".box").css("borderWidth","1px"),t.find(".internal-box").css("borderWidth","1px")),a.grid.paint()}}),e.$on("outScale",function(){o(e.scale)})}else t.css({height:"100%",width:"100%",overflow:"hidden"});e.$on("zindex.change",function(){var e=n.getElementsMap();$.each(e,function(e,t){$("#inside_"+e).css("zIndex",t.css.zIndex)})}),e.$on("edit.load",function(e,t){"show"===t?$("#loading").show():$("#loading").hide()}),e.$on("zindex.change",function(){var e=n.getElementsMap();$.each(e,function(e,t){$("#inside_"+e).css("zIndex",t.css.zIndex)})})}}}]).factory("editService",[function(){var e={currentScale:1,scaleIndex:3};return e}]),angular.module("scene.create.console.font",[]),angular.module("scene.create.console.font").controller("fontShoppingCtrl",["$rootScope","$scope","$timeout","fontService","ModalService","usercenterService","storageService","$modal",function(e,t,i,n,a,s,o,r){function l(){0!==t.currentTypeFontLists.length&&0!==t.fontMyLists.length&&angular.forEach(t.currentTypeFontLists,function(e){angular.forEach(t.fontMyLists,function(t){e.id===t.id&&(e.license=t.license,1===t.license&&(e.status=3))})})}t.modal={},t.openCloseFont=!0,t.fontMyLists=[],t.currentTypeFontLists=[],t.user=e.user,t.getFontType=function(e){if(t.modal.fontType!==e){t.modal.fontType=e;var i;1===e?i="YYXFont":2===e?i="FZFont":3===e&&(i="HYFont"),t.currentTypeFontLists=JSON.parse(sessionStorage.getItem(i))||[],0===t.currentTypeFontLists.length?n.getFontType(e).then(function(e){if(e.data.success){if(t.currentTypeFontLists=e.data.list,sessionStorage.setItem(i,JSON.stringify(t.currentTypeFontLists)),l(),0===t.currentTypeFontLists.length)return;t.tabViewFont(t.currentTypeFontLists[0],0)}}):(l(),t.tabViewFont(t.currentTypeFontLists[0],0))}},t.getMyFontFamily=function(){t.openCloseFont&&"my"===t.modal.fontType||(t.currentTypeFontLists=JSON.parse(sessionStorage.getItem("toolbarFonts"))||[],0===t.currentTypeFontLists.length?n.getMyFontFamily().then(function(e){if(e.data.success){if(t.currentTypeFontLists=e.data.list,t.fontMyLists=angular.copy(t.currentTypeFontLists),sessionStorage.setItem("toolbarFonts",JSON.stringify(t.fontMyLists)),t.modal.fontType="my",0===t.fontMyLists.length)return;t.tabViewFont(t.currentTypeFontLists[0],0)}else a.openMsgDialog({msg:e.data.msg})}):(t.modal.fontType="my",t.fontMyLists=angular.copy(t.currentTypeFontLists),t.tabViewFont(t.currentTypeFontLists[0],0)))},t.tabViewFont=function(e,i){t.fontIndex=i;var n;n="my"===t.modal.fontType?e.woffPath:e.preWoffPath;var a,s=JSON.parse(o.get("shoppingFontFamily1"))||{},r=JSON.parse(sessionStorage.getItem("fontface"))||[];s[e.fontFamily]||(a="@font-face{font-family:"+e.fontFamily+";src: url("+PREFIX_FILE_HOST+n+") format(woff);}",t.fontFaceStr=a,r.push(a),s[e.fontFamily]=!0,o.push("shoppingFontFamily1",JSON.stringify(s)),sessionStorage.setItem("fontface",JSON.stringify(r))),t.modal.fontFamily=e.fontFamily,t.currentViewObj=e,t.modal.license=e.license},t.openCloseFontStatus=function(e){var i;i=1===e.status?0:1,n.openCloseFontStatus(e.id,i).then(function(i){i.data.success?(a.openMsgDialog({msg:"操作成功"}),t.openCloseFont=!1,angular.forEach(t.currentTypeFontLists,function(t,i){t.id===e.id&&(t.status=1===e.status?0:1)}),sessionStorage.setItem("toolbarFonts",JSON.stringify(t.currentTypeFontLists))):a.openMsgDialog({msg:"网络繁忙,请稍后再试"})})},t.buyFont=function(e){void 0!==e.price&&null!==e.price||(e.price=0),void 0!==e.companyPrice&&null!==e.companyPrice||(e.companyPrice=0),r.open({templateUrl:"scene/font/fontPurpose.tpl.html",controller:"fontPurposeCtrl",resolve:{font:function(){return{id:e.id,license:e.license,personal:{type:"personal",price:e.price},business:{type:"personal",price:e.companyPrice}}}}}).result.then(function(i){t.openCloseFont=!1,e.license=i,e.status=1;var n=0,a=angular.copy(e);angular.forEach(t.fontMyLists,function(i,s){i.id===e.id&&(t.fontMyLists[s]=a,n++)}),0===n&&t.fontMyLists.unshift(a),sessionStorage.setItem("toolbarFonts",JSON.stringify(t.fontMyLists)),l()})},t.cancel=function(){t.$dismiss()},t.getMyFontFamily()}]).directive("fontFace",function(){return{restrict:"E",scope:{fontface:"@"},link:function(e){function t(e){if($(".font-style").length>0){var t,i=document.createTextNode(e);if($(".font-style style").length>0)t=$(".font-style style")[0];else{var n=$(".font-style")[0];t=document.createElement("style"),n.appendChild(t)}t.appendChild(i)}}var i=JSON.parse(sessionStorage.getItem("fontface"))||[];if(i.length>0)for(var n=0;n<i.length;n++)t(i[n]);e.$watch("fontface",function(e,n){e&&e!==i[0]&&t(e)})}}}),angular.module("scene.create.console.font").controller("fontPurposeCtrl",["$scope","usercenterService","ModalService","fontService","$rootScope","font","i18nNotifications",function(e,t,i,n,a,s,o){
e.font=s,e.usage={},e.userType=a.user.type,e.ok=function(){e.$close(e.usage.license)},e.cancel=function(){e.$dismiss()},e.confirmBuyFont=function(){e.usage.type||(21!==e.userType&&51!==e.userType?e.usage.type="business":e.usage.type="personal"),"personal"===e.usage.type?(e.usage.price=e.font.personal.price,e.usage.license=0):(e.usage.price=e.font.business.price,e.usage.license=1),t.getUserXd().then(function(t){var r=t.data.obj||0;e.usage.price>r?i.openConfirmDialog({msg:'当前选择需要消耗秀点<font color="#ff6e6e">'+e.usage.price+'</font>个<br/>秀点余额不足(<font color="#ff6e6e">'+(r||0)+"</font>个)",confirmName:"立即购买",cancelName:"取消"},function(){a.buyXdQ(),e.cancel()}):i.openConfirmDialog({msg:'当前选择需要消耗秀点<font color="#ff6e6e">'+e.usage.price+'</font>个<br/>秀点余额为<font color="#ff6e6e">'+(r||0)+"</font>个",confirmName:"确定",cancelName:"取消"},function(){n.buyFont(s.id,e.usage.license).then(function(t){t.data.success?(o.pushForCurrentRoute("buy.success","notify.success"),e.ok()):i.openMsgDialog({msg:"网络繁忙,请稍后再试"})})})})}}]),angular.module("scene.create.console.font").service("fontService",["$http","$modal",function(e,t){function i(t){var i=PREFIX_URL+"m/scene/toll/font",n=new Date;return e({method:"GET",url:i,withCredentials:!0,params:{id:t,time:n.getTime()}})}function n(t,i){var n=PREFIX_URL+"m/font/buy/"+t;return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({license:i})})}function a(t,i){var n=PREFIX_URL+"m/font/update/"+t+"/"+i,a=new Date;return e({withCredentials:!0,method:"GET",url:n,params:{time:a.getTime()}})}function s(t){var i=PREFIX_URL+"m/font/"+t,n=new Date;return e({withCredentials:!0,method:"GET",url:i,params:{time:n.getTime()}})}function o(){var t=PREFIX_URL+"m/font/my",i=new Date;return e({withCredentials:!0,method:"GET",url:t,params:{time:i.getTime()}})}function r(){t.open({windowClass:"console img_console",templateUrl:"scene/font/font-shopping.tpl.html",controller:"fontShoppingCtrl"})}function l(){var t=PREFIX_URL+"m/font/my",i=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:t})}function c(t){var i=PREFIX_URL+"m/font/info",n=$.param({fontFamilies:t});return e({withCredentials:!0,method:"POST",url:i,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}var d={buyFont:n,openCloseFontStatus:a,getFontType:s,getMyFontFamily:o,getMyFontList:l,getFontNames:c,checkBoughtFonts:i,openFontShopping:r};return d}]),angular.module("scene.create.pageTpl",[]),angular.module("scene.create.pageTpl").controller("PageTplController",["$scope","pageTplService","i18nNotifications",function(e,t,i){e.$watch("tpl",function(t){if(e.tplElements=[],e.textElements=[],t&&t.obj&&t.obj.elements){var i=angular.copy(t.obj.elements);$.each(i,function(t,i){""+i.type=="4"?(i.isEditable||(i.isEditable=1),e.tplElements.push(i)):""+i.type=="2"&&e.textElements.push(i)})}},!0),e.pageChildLabel=function(){var n,a=[];for(n=0;n<e.pageLabelAll.length;n++)e.pageLabelAll[n].ischecked&&a.push(e.pageLabelAll[n].id);e.tpl.obj.elements&&($.each(e.tplElements,function(t,i){$.each(e.tpl.obj.elements,function(e,t){i.id===t.id&&(i.isEditable+""=="-1"?t.isEditable=-1:delete t.isEditable)})}),$.each(e.textElements,function(t,i){$.each(e.tpl.obj.elements,function(e,t){i.id===t.id&&(i.properties.type&&"0"!==i.properties.type?t.properties.type=i.properties.type:delete t.properties.type)})})),a.length&&t.updataChildLabel(a,e.pageIdTag).then(function(){i.pushForCurrentRoute("allocation.succcess","notify.success"),e.controlView.pageList=!1})}}]),angular.module("scene.pageeffect.fall",[]),angular.module("scene.pageeffect.fall").controller("fallEffectCtrl",["$scope",function(e){var t=e.properties;e.fallings=[{name:"圣诞节",path:CLIENT_CDN+"assets/images/create/fallings/wazi.png",rotate:180,vy:4,bgpath:CLIENT_CDN+"assets/images/create/fallings/christmas.png"},{name:"礼物",path:CLIENT_CDN+"assets/images/create/fallings/gift.png",rotate:180,vy:4,bgpath:CLIENT_CDN+"assets/images/create/fallings/gift_1.png"},{name:"春节",path:CLIENT_CDN+"assets/images/create/fallings/denglongcj.png",rotate:60,vy:1,bgpath:CLIENT_CDN+"assets/images/create/fallings/lantern.png"},{name:"福字",path:CLIENT_CDN+"assets/images/create/fallings/fuzi1.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/blessing.png"},{name:"红包",path:CLIENT_CDN+"assets/images/create/fallings/hongbao2.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/red_packet.png"},{name:"绿枫叶",path:CLIENT_CDN+"assets/images/create/fallings/lvfengye.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/greenery.png"},{name:"星星",path:CLIENT_CDN+"assets/images/create/fallings/xing.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/star.png"},{name:"雪花",path:CLIENT_CDN+"assets/images/create/fallings/snow.png",rotate:0,vy:1,bgpath:CLIENT_CDN+"assets/images/create/fallings/snow_1.png"}],t&&t.fallingObject?(e.controlView.effectType="fallingObject",e.falling=t.fallingObject,angular.forEach(e.fallings,function(t){t.path===e.falling.src.path&&(e.falling.src=t)})):e.falling={src:e.fallings[0],density:2},e.$on("save.falling.effect",function(){t={},t.fallingObject=e.falling,angular.forEach(e.fallings,function(e){e.bgpath&&delete e.bgpath}),e.$close({properties:t,name:"落物",value:"fallingObject"})})}]),angular.module("scene.pageeffect.finger",[]),angular.module("scene.pageeffect.finger").controller("fingerEffectCtrl",["$scope",function(e){var t,i=e.properties;e.fingerZws=[{name:"粉色指纹",path:CLIENT_CDN+"assets/images/create/fingers/zhiwen1.png"},{name:"白色指纹",path:CLIENT_CDN+"assets/images/create/fingers/zhiwen2.png"},{name:"蓝色指纹",path:CLIENT_CDN+"assets/images/create/fingers/zhiwen3.png"}],e.fingerBackgrounds=[{name:"粉红回忆",path:CLIENT_CDN+"assets/images/create/fingers/bg1.jpg"},{name:"深蓝花纹",path:CLIENT_CDN+"assets/images/create/fingers/bg2.jpg"},{name:"淡绿清新",path:CLIENT_CDN+"assets/images/create/fingers/bg3.jpg"},{name:"深紫典雅",path:CLIENT_CDN+"assets/images/create/fingers/bg4.jpg"},{name:"淡紫水滴",path:CLIENT_CDN+"assets/images/create/fingers/bg5.jpg"},{name:"蓝白晶格",path:CLIENT_CDN+"assets/images/create/fingers/bg6.jpg"},{name:"蓝色水滴",path:CLIENT_CDN+"assets/images/create/fingers/bg7.jpg"},{name:"朦胧绿光",path:CLIENT_CDN+"assets/images/create/fingers/bg8.jpg"},{name:"灰色金属",path:CLIENT_CDN+"assets/images/create/fingers/bg9.jpg"}],i&&i.finger?(e.controlView.effectType="finger",e.finger=i.finger,angular.forEach(e.fingerZws,function(t){t.path===e.finger.zwImage.path&&(e.finger.zwImage=t)}),angular.forEach(e.fingerBackgrounds,function(t){t.path===e.finger.bgImage.path&&(e.finger.bgImage=t)})):e.finger={zwImage:e.fingerZws[0],bgImage:e.fingerBackgrounds[0]},t=angular.copy(e.finger.bgImage),e.replaceImg=function(i){return i.bgImage?void(t=angular.copy(e.finger.bgImage)):void e.$emit("select.effect.image","finger")},e.$on("replace.effect.image",function(i,n,a){"finger"===a&&(e.finger.bgImage||(e.finger.bgImage={}),e.finger.bgImage.path=PREFIX_FILE_HOST+n.data,e.fingerBackgrounds[0].name||e.fingerBackgrounds.shift(),e.fingerBackgrounds.unshift(e.finger.bgImage),t=angular.copy(e.finger.bgImage))}),e.$on("cancel.effect.replace",function(i,n){"finger"===n&&angular.forEach(e.fingerBackgrounds,function(i){t.name?t.name===i.name&&(e.finger.bgImage=i):i.name||(e.finger.bgImage=i)})}),e.$on("save.finger.effect",function(){i={},i.finger=e.finger,e.$close({properties:i,name:"指纹",value:"finger"})})}]).directive("fingerMove",function(){function e(e,t){t.css({animation:"move 2s ease 0","animation-iteration-count":"infinite"})}return{restrict:"EA",link:e}}),angular.module("scene.pageeffect.fireworks",[]),angular.module("scene.pageeffect.fireworks").controller("fireWorksCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"fireWorks"===t.effect.name&&(e.controlView.effectType="fireWorks"),e.$on("save.fireworks.effect",function(){t={},t.effect={name:"fireWorks"},e.$close({properties:t,name:"烟花",value:"effect"})})}]),angular.module("common.directives.inputNumber",[]).directive("eqdInputNumber",function(){function e(e,c,d,p){c.on("$destroy",function(){c.unbind("mousedown")});var u="string"==typeof d.min?d.min:-Number.MAX_VALUE,h="string"==typeof d.max?d.max:Number.MAX_VALUE,g="string"==typeof d.unit?d.unit:"px",m="string"==typeof d.step?d.step:"1",f=0;m.indexOf(".")>-1&&(f=m.split(".")[1].length),"px"===g?(p.$parsers.push(t),p.$formatters.push(i)):"deg"===g?(g="",p.$parsers.push(n),p.$formatters.push(a)):"%"===g?(p.$parsers.push(s),p.$formatters.push(o)):p.$parsers.push(r),c.mousedown(function(t){function i(t){t.preventDefault(),a=t.pageX-o;var i=Math.abs((s+a*m).toFixed(f));i>=u&&i<=h?i+=g:i<u?i=u+g:i>h&&(i=h+g),p.$viewValue!==i&&(p.$setViewValue(i),p.$render(),e.$apply())}function n(){l.unbind("mousemove",i),l.unbind("mouseup",n)}var a,s=parseFloat(c.val())||0,o=t.pageX;l.mousemove(i),l.mouseup(n)}).keydown(function(e){var t=""+e.keyCode;return!!(t>=48&&t<=57||t>=96&&t<=105||36===t||35===t||37===t||39===t||8===t||46===t)})}function t(e){return e=/-?\d+/.exec(e),e?parseFloat(e)+"px":"0"}function i(e){return/-?\d+/.exec(e)+"px"}function n(e){return e=/\d+/.exec(e),e?"rotateZ("+parseFloat(e)+"deg)":"rotateZ(0)"}function a(e){return/\d+/.exec(e)}function s(e){return e=/\d+/.exec(e),e?e/100+"":"0"}function o(e){return 100*e+"%"}function r(e){return""===e&&(e="0"),parseFloat(e)+""}var l=$(document);return{restrict:"E",require:"ngModel",template:'<input class="eqc-input-number"/>',replace:!0,link:e}}),angular.module("scene.pageeffect.money",[]),angular.module("scene.pageeffect.money").controller("moneyEffectCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"money"===t.effect.name?(e.controlView.effectType="money",e.money={tip:t.effect.tip}):e.money={tip:"握紧钱币，数到手抽筋吧"},e.checkCharLength=function(){return e.tipError="",!(countCharacters(e.money.tip)>28)||(e.tipError="提示文字不能超过14个中文或28个英文字母",!1)},e.$on("save.money.effect",function(){e.checkCharLength()&&(t={},t.effect={name:"money",tip:e.money.tip},e.$close({properties:t,name:"数钱",value:"effect"}))})}]),angular.module("scene.pageeffect.none",[]),angular.module("scene.pageeffect.none").controller("noneEffectCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"none"===t.effect.name&&(e.controlView.effectType="none"),e.$on("save.none.effect",function(){t={},t.effect={name:"none"},e.$close({name:"无"})})}]),angular.module("scene.pageeffect.console",["scene.pageeffect.scratch","scene.pageeffect.finger","scene.pageeffect.money","scene.pageeffect.fall","scene.pageeffect.snow","scene.pageeffect.fireworks","scene.pageeffect.none"]),angular.module("scene.pageeffect.console").controller("pageEffectCtrl",["$scope","$rootScope","$modal","properties","sceneService","storageService",function(e,t,i,n,a,s){e.properties=n,e.controlView={},e.effectList=[{type:"scratch",name:"涂抹",src:CLIENT_CDN+"assets/images/create/waterdrop.jpg"},{type:"finger",name:"指纹",src:CLIENT_CDN+"assets/images/create/fingers/zhiwen1.png"},{type:"fallingObject",name:"环境",src:CLIENT_CDN+"assets/images/create/falling.png"},{type:"snowFly",name:"飘雪",src:CLIENT_CDN+"assets/images/create/snowfly.png"},{type:"fireWorks",name:"烟花",src:CLIENT_CDN+"assets/images/create/fireworks.jpg"},{type:"none",name:"无",src:""}],n&&(!n||n.scratch||n.finger||n.fallingObject||n.effect)||(n={},e.controlView.effectType="scratch",e.controlView.effectIndex=0),s.get("create.showAddEffTip")||(s.push("create.showAddEffTip",!1),e.controlView.effectType="fallingObject",e.controlView.effectIndex=3),e.selectEffect=function(t,i){e.controlView.effectType=t.type,e.controlView.effectIndex=i},e.confirm=function(){"scratch"===e.controlView.effectType?e.$broadcast("save.scratch.effect"):"finger"===e.controlView.effectType?e.$broadcast("save.finger.effect"):"money"===e.controlView.effectType?e.$broadcast("save.money.effect"):"fallingObject"===e.controlView.effectType?e.$broadcast("save.falling.effect"):"snowFly"===e.controlView.effectType?e.$broadcast("save.snow.effect"):"fireWorks"===e.controlView.effectType?e.$broadcast("save.fireworks.effect"):"none"===e.controlView.effectType&&e.$broadcast("save.none.effect")},e.$on("select.effect.image",function(e,n){i.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:0}}}}).result.then(function(e){var i={type:3,properties:{src:e.data}};e.height/e.width>=1008/642&&e.height/e.width<=1.578125?t.$broadcast("replace.effect.image",e,n):a.openCropModal(i,function(e){var i={data:e.src};t.$broadcast("replace.effect.image",i,n)},function(){t.$broadcast("cancel.effect.replace",n)})},function(){t.$broadcast("cancel.effect.replace",n)})}),e.cancel=function(){t.$broadcast("clear.scratch.interval"),e.$dismiss()}}]),angular.module("scene.pageeffect.scratch",["common.directives.inputNumber"]),angular.module("scene.pageeffect.scratch").controller("scratchEffectCtrl",["$scope","$rootScope","i18nNotifications",function(e,t,i){var n,a=e.properties;e.scratches=[{name:"水滴",path:CLIENT_CDN+"assets/images/create/waterdrop.jpg"},{name:"细沙",path:CLIENT_CDN+"assets/images/create/sand.jpg"},{name:"花瓣",path:CLIENT_CDN+"assets/images/create/flowers.jpg"},{name:"金沙",path:CLIENT_CDN+"assets/images/create/goldsand.jpg"},{name:"白雪",path:CLIENT_CDN+"assets/images/create/snowground.jpg"},{name:"模糊",path:CLIENT_CDN+"assets/images/create/mohu.jpg"},{name:"落叶",path:CLIENT_CDN+"assets/images/create/leaves.jpg"},{name:"薄雾",path:CLIENT_CDN+"assets/images/create/smoke.png"}],a&&(a.image||a.scratch)?(e.controlView.effectType="scratch",(a.image||a.scratch)&&(a.scratch?(e.scratch=a.scratch,a.scratch.percentage.value&&(e.scratch.percentage=a.scratch.percentage.value),a.scratch.opacity||(e.scratch.opacity=.2)):a.image&&(e.scratch={image:a.image,percentage:a.percentage.value},a.tip&&(e.scratch.tip=a.tip),e.scratch.opacity=.2),angular.forEach(e.scratches,function(t){e.scratch.image.name===t.name&&(e.scratch.image=t)}),e.scratch.image.name||e.scratches.unshift(e.scratch.image))):e.scratch={image:e.scratches[0],percentage:.15,opacity:.2};var s=e.$watch("scratch.opacity",function(){t.$broadcast("show.scratch.draw",e.scratch)},!0);setTimeout(function(){n=angular.copy(e.scratch.image),t.$broadcast("show.scratch.draw",e.scratch,!1)},0),e.$on("$destroy",function(){s()}),e.replaceImage=function(i){return i.image?(n=angular.copy(e.scratch.image),void t.$broadcast("show.scratch.draw",i,!1)):void e.$emit("select.effect.image","scratch")},e.$on("replace.effect.image",function(i,a,s){"scratch"===s&&(e.scratch.image||(e.scratch.image={}),e.scratch.image.path=PREFIX_FILE_HOST+a.data,e.scratches[0].name||e.scratches.shift(),e.scratches.unshift(e.scratch.image),n=angular.copy(e.scratch.image),t.$broadcast("show.scratch.draw",e.scratch,!1))}),e.$on("cancel.effect.replace",function(t,i){"scratch"===i&&angular.forEach(e.scratches,function(t){n.name?n.name===t.name&&(e.scratch.image=t):t.name||(e.scratch.image=t)})}),e.$on("save.scratch.effect",function(){return a={},a.scratch=e.scratch,a.scratch.percentage>1?void i.pushForCurrentRoute("scratch.percentage.overflow","notify.success"):(t.$broadcast("clear.scratch.interval"),void e.$close({properties:a,name:"涂抹",value:"scratch"}))})}]).directive("scratchEffect",function(){function e(e){var n=new Image;e.$on("show.scratch.draw",function(e,i){n.onload=function(){t(this,i)},n.src=i.image.path}),e.$on("change.scratch.opacity",function(e,t){$(".scratch-img").css({opacity:1-parseFloat(t).toFixed(2)})}),e.$on("clear.scratch.interval",function(){clearInterval(i)})}function t(e,s){i&&clearInterval(i);var o='<canvas class="scratchCanvas" style="position:absolute; top: 0; left: 0;" width="196" height="308"></canvas>',r=$(".scratch-img");if(r.empty(),r.append(o),n=r.find("canvas").get(0)){a=n.getContext("2d"),a.lineCap="round",a.lineJoin="round",a.lineWidth=20,a.globalAlpha=1-parseFloat(s.opacity).toFixed(2),a.drawImage(e,0,0,n.width,n.height),a.globalCompositeOperation="destination-out";var l=130,c=80;i=setInterval(function(){a.moveTo(l,c),l>=70&&c<=140?(a.lineTo(l-2,c+2),a.stroke(),l-=2,c+=2):l<=120&&c<=165?(a.lineTo(l+2,c+1),a.stroke(),l+=2,c+=1):l>=70&&c<=215?(a.lineTo(l-2,c+2),a.stroke(),l-=2,c+=2):(clearInterval(i),t(e,s))},50)}}var i,n,a;return{restrict:"EA",link:e}}),angular.module("scene.pageeffect.snow",[]),angular.module("scene.pageeffect.snow").controller("snowEffectCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"snowFly"===t.effect.name&&(e.controlView.effectType="snowFly"),e.$on("save.snow.effect",function(){t={},t.effect={name:"snowFly"},e.$close({properties:t,name:"飘雪",value:"effect"})})}]),angular.module("save.template",[]),angular.module("save.template").controller("saveTemplateCtrl",["$scope","$rootScope","security",function(e,t,i){e.btnGroup={selectItem:1,caretSwitch:!1};var n;window.localStorage&&(n=JSON.parse(localStorage.getItem("templateInfo")),n&&n[i.currentUser.id]?e.btnGroup.selectItem=n[i.currentUser.id]:(n=n||{},n[i.currentUser.id]=1,localStorage.setItem("templateInfo",JSON.stringify(n)))),e.btnGroup={selectItem:n[i.currentUser.id],caretSwitch:!1},e.selectedTemplate=function(t){"myTemplate"===t?e.btnGroup.selectItem=2:"companyTemplate"===t&&(e.btnGroup.selectItem=1),window.localStorage&&(n[i.currentUser.id]=e.btnGroup.selectItem,localStorage.setItem("templateInfo",JSON.stringify(n)))},e.openMenu=function(){e.btnGroup.caretSwitch=!e.btnGroup.caretSwitch}}]),angular.module("scene",["scene.create","scene.support","services.scene","services.staticRes","scene.create.new","app.directives.addelement","scene.custom.activities","scene.buy.sample"]),angular.module("scene").controller("SceneCtrl",["$window","$scope","$rootScope","$location","sceneService","$modal","ModalService","usercenterService","staticResService","customActivitiesService","security","$routeParams",function(e,t,i,n,a,s,o,r,l,c,d,p){t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.user=d.currentUser,1!==t.user.type?t.fillSceneAuth=!0:t.fillSceneAuth=!1,t.childAllList=[];var u=!1;t.scene={type:null},t.totalItems=0,t.currentPage=1,t.toPage=null,t.childcat=0,t.blankSample=!0;var h;h=window.location.search.split("=")[1],h&&n.search("useTplId",null),t.currentTpl={exemplarPreview:!1},t.sorts=[{type:"1",name:"最新发布"}],t.samples=[{type:"0",name:"免费样例"},{type:"1",name:"收费样例"}];var g={pageNo:0,pageSize:11,keyword:""};t.pageTplTypesList=[{type:"101",name:"行业"},{type:"102",name:"个人"},{type:"103",name:"企业"},{type:"104",name:"节假"},{type:"105",name:"风格"},{type:"106",name:"品牌"}],t.fillTypeList=[{type:"111",name:"行业"},{type:"112",name:"个人"},{type:"110",name:"企业"},{type:"113",name:"节假"},{type:"114",name:"风格"},{type:"115",name:"品牌"}];var m=function(){a.getPageTplByAll().then(function(e){t.childAllList=e.data.list})};t.allPage=function(e){g.bizType=e,g.tagId=null,g.pageSize=11,g.pageNo=1,t.childcat=0,t.getPageTpls(),t.newArrayGroupCat=[],t.blankSample=!0},t.switchSample=function(e){"fill"===e?(i.isFillScene=u=!0,t.getPageTplsByType(t.fillTypeList[0].type)):(i.isFillScene=u=!1,t.allPage(null)),t.isActive=e,n.path("/scene/list/"+e,!1)},t.getCompanyTpl=function(e,i){t.childcat=1,t.childCatrgoryList=[],t.newArrayGroupCat=[],t.blankSample=12!==i,a.getCompanyTpls(e,i,g.sort).then(function(e){e.data.list&&e.data.list.length>0?(t.tpls=e.data.list,t.totalItems=e.data.map.count+1,t.currentPage=e.data.map.pageNo,t.allPageCount=e.data.map.count,t.toPage=""):(t.tpls=[],t.blankSample=!1)})},t.canvasUrl=PREFIX_SHOW_HOST,t.pageChanged=function(e){return g.pageNo=e,t.toPage=e,u||e>1?(g.pageSize=12,t.blankSample=!1):(g.pageSize=11,t.blankSample=!0),e<1||e>t.totalItems/11+1?void o.openMsgDialog({msg:"此页超出范围"}):void(""+t.childcat=="1"?t.getCompanyTpl(e,g.pageSize,g.order):t.getPageTpls())},t.preview=function(e){var t=PREFIX_HOST+"/view.html?sceneId="+e;window.open(t,"_blank")},t.getStyle=function(e){return{"background-image":"url("+PREFIX_FILE_HOST+e+")","background-size":"cover"}},c.getActivite().then(function(e){e.data.obj&&(t.activityObj=e.data.obj)}),t.openCustomActive=function(){return""+t.user.checkPhone!="1"?void o.openMsgDialog({msg:"请先绑定手机!"}):t.user.memberType?void s.open({windowClass:"seven-contain",templateUrl:"scene/console/customActivities.tpl.html",controller:"CustomActivitiesCtrl",resolve:{activityInfo:function(){return t.activityObj},userXd:function(){return t.userXd}}}).result.then(function(e){t.activityObj=e}):void o.openConfirmDialog({msg:"请升级会员类型以使用该功能",confirmName:"立即升级",cancelName:"我知道了"},function(){window.open("/privilege")})},t.previewScene=function(e){i.tplObj=e,n.path("/s/"+e.code)},t.createScene=function(e){if(u&&(e.fillScene=!0),e&&1===t.user.type&&""+e.isCompanyTemp=="1")return void o.openConfirmDialog({msg:"免费升级企业会员可使用 会员专属场景",confirmName:"免费升级",cancelName:"再看看"},function(){window.open("/privilege")});if(e&&e.price){var i=e.disCountPrice||parseFloat(e.price)||0,n={tplPrice:i,userXd:t.userXd,scene:e};[7,8,9].indexOf(t.user.memberType)!==-1&&[2,21].indexOf(t.user.type)!==-1?n.bFlagMember=!0:n.bFlagMember=!1,s.open({windowClass:"login-container six-contain",templateUrl:"scene/buySample.tpl.html",controller:"SceneBuySample",resolve:{buySampleObject:function(){return n}}}).result.then(function(t){s.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return t}}})})}else s.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return null}}})},i.tplId&&r.getUserXd().then(function(e){t.userXd=e.data.obj||0}).then(function(){t.createScene(i.tplId)}).then(function(){i.tplId=null}),h&&r.getUserXd().then(function(e){t.userXd=e.data.obj||0}).then(function(){a.getSceneById(h).then(function(e){e.data.success?t.createScene(e.data.obj):o.openMsgDialog({msg:e.data.msg})})}).then(function(){h=null}),t.getStyle=function(e){return{"background-image":"url("+PREFIX_FILE_HOST+e+")"}},t.show=function(e){console.log(e.target),$(e.target).children(".cc").css("display","block")},t.filterTpl=function(e){g.sort=e,""+t.childcat=="1"?t.getCompanyTpl(1,11,g.order):t.getPageTpls()},t.selectPrice=function(e){g.hasPrice=e,t.getPageTpls()},t.companySample={selected:!1},t.selectCompany=function(e){g.isCompanyTemp=e?"1":null,t.getPageTpls()};var f={},v=[];t.getPageTplsByType=function(e){g.bizType=t.childcat=e,t.categoryId=0,g.pageSize=u?12:11,f[e]?(v=f[e],v.length?(b(),g.tagId=t.categoryId=v[0].id,t.getPageTpls()):(t.newArrayGroupCat=[],t.getPageTpls())):a.getPageTplTypesTwo(e,e).then(function(i){v=f[e]=i.data.list,v.length?(b(),g.tagId=t.categoryId=v[0].id,t.getPageTpls()):(t.newArrayGroupCat=[],t.getPageTpls())})};var b=function(){var e=null,i=[],n=[];for(var a in v)v[a].groupId!==e&&(n=[],e=v[a].groupId,i.push(n)),n.push(v[a]);i.splice(4,i.length),i.length?t.newArrayGroupCat=i:t.newArrayGroupCat=[]};0!==t.childcat&&"0"!==t.childcat||m(null),t.getPageTpls=function(e,i){u?(t.blankSample=!1,g.pageSize=12):t.blankSample=11===g.pageSize,e&&(g.bizType=e),i&&(g.tagId=t.categoryId=i),a.getPageTpls(g)},t.$on("getSampleList",function(){var e=a.scenes;if(e.list&&e.list.length>0){t.tpls=e.list,t.totalItems=e.map.count,t.currentPage=e.map.pageNo,t.allPageCount=e.map.count,t.toPage=e.map.pageNo;for(var i=0;i<t.tpls.length;i++)t.tpls[i].avatar&&0!==t.tpls[i].avatar.indexOf("http://")&&(t.tpls[i].avatar=PREFIX_FILE_HOST+t.tpls[i].avatar)}else t.tpls=[],t.totalItems=0,t.blankSample=!1}),t.name=null,t.EnterPress=function(e,i){var n=e||window.event;13===n.keyCode&&t.submit(i)},t.searchButton=!0;var y={},w=function(){u?g.pageSize=12:t.blankSample=!0},x=function(){g.pageNo=1,t.toPage=1,t.currentPage=1,g.pageSize=11,w()};t.submit=function(e){x(),g.keyword=t.name=e,a.getPageTpls(g),t.searchButton=!1,y.refresh=!0},t.changeName=function(e){t.searchButton=!0,""===e&&y.refresh&&(g.keyword="",x(),a.getPageTpls(g))},t.clearSearch=function(){t.searchButton=!0,t.name="",g.keyword="",x(),a.getPageTpls(g)},t.openPreview=function(e){t.currentTpl.exemplarPreview=!0,t.currentTpl.tpl=e};var k=p.tab?p.tab:"sample";t.isActive=k,"fill"===k?(u=!0,t.searchButton=!1,t.getPageTplsByType(t.fillTypeList[0].type)):t.allPage(null)}]),angular.module("scene.preview",["services.scene"]),angular.module("scene.preview").directive("sceneView",["sceneService","sceneViewService","sceneDataParseService",function(e,t,i){return{scope:{sceneId:"@",sceneName:"@",sceneCover:"@",sceneDescription:"@"},restrict:"A",templateUrl:"scene/preview.tpl.html",link:function(e,n,a){function s(n,s){t.getSceneData(a.sceneId).then(function(a){if(a.data.success){var o=a.data;$.extend(!0,o.obj,e.$parent.scene),n&&(n=parseInt(n,10)-1,o.list[n].elements=s.obj.elements,o.list[n].properties=s.obj.properties),e.$parent.scene.property.activityPageId?t.getActivityPage(e.$parent.scene.property.activityPageId).then(function(e){o.list.push(e.data.obj),i.parse(o)}):i.parse(o)}})}function o(){c(),n.find(".password-numbers>span").click(l),n.find(".password-operation>span").click(c),n.find(".verifyCode").show()}function r(){n.find(".password-numbers>span").unbind("click"),n.find(".password-operation>span").unbind("click"),n.find(".verifyCode").hide()}function l(t){c($(t.target).text()),4===d.pass.length&&(e.$parent.scene.accessCode===d.pass?r():c())}function c(e){e&&"object"!=typeof e?d.pass+=e:d.pass="",n.find(".password-indicator li").each(function(e,t){e<d.pass.length?$(t).addClass("active"):$(t).removeClass("active")})}var d={play:!1};e.sceneId&&(e.$parent.mginData===angular.toJson(e.$parent.tpl)?s():s(e.$parent.pageNum,$.extend(!0,{},e.$parent.tpl))),e.$watch("sceneId",function(e,t){e!==t&&s()}),n.on("$destroy",function(){utilSound.pause(),$(document).unbind("flipend")}),e.$on("changeView",function(e,t){t?n.find(".wechat-share").show():n.find(".wechat-share").hide(),n.find(".loading").hide(),r()}),e.$on("showLoading",function(e,t,i){t?(i?(n.find(".loadbg").css({background:"url("+PREFIX_FILE_HOST+i+")",backgroundSize:"118px 118px"}).show(),n.find(".loadlogo").hide()):(n.find(".loadbg").css("background","").hide(),n.find(".loadlogo").show()),n.find(".loading").show(),n.find(".wechat-share").hide()):n.find(".loading").hide(),r()}),e.$on("processBar",function(e,t){t?n.find(".progress").show():n.find(".progress").hide()}),e.$on("passPanelSwitch",function(e,t){t?o():r()}),n.on("$destroy",function(){clearInterval(eqShow.progressInterval),i.app.pauseAutoFlip()})}}}]).factory("sceneViewService",["$http",function(e){var t={};return t.getSceneData=function(t){var i="m/scene/preview/"+t+".data&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},t.getSelfLastPage=function(t){var i="eqs/pageTpl/"+t;return e({withCredentials:!0,method:"GET",url:PREFIX_S1_URL+i})},t.getActivityPage=function(t){var i="eqs/trailer/"+t;return e({method:"GET",url:PREFIX_S2_URL+i})},t}]).factory("sceneDataParseService",["sceneViewService","sceneService",function(e,t){function i(t,i){t.obj.property.lastPageId?e.getSelfLastPage(t.obj.property.lastPageId).then(function(e){e.data.obj?(a(t.obj,e.data),t.list.push(e.data.obj),f.lastPage=i[i.length-1],l(i,t)):(n(t.obj),f.lastPage=i[i.length-1],l(i,t))}):(n(t.obj,i),f.lastPage=i[i.length-1],l(i,t))}function n(e,t){var i="http://eqxiu.com",n='{"id":439882,"pageId":129810,"sceneId":16060,"num":1,"type":"4","isInput":0,"title":null,"content":null,"status":1,"css":{"borderRadius":"10px","borderStyle":"solid","zIndex":"9","borderColor":"rgba(0,0,0,1)","paddingTop":"0px","height":"141","backgroundColor":"","color":"","boxShadow":"0px 0px 0px #333333","borderWidth":"0px","width":"142.13709677419354","left":"92px","paddingBottom":"0px","top":"177px"},"properties":{"height":"100px","imgStyle":{"width":142,"height":142,"marginTop":"-0.5px","marginLeft":"0px"},"width":"100px","src":"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg"}}',a='{"id":"","sceneId":"","num":2,"name":null,"properties":null,"elements":[{"id":439880,"pageId":129810,"sceneId":16060,"num":0,"type":"3","isInput":0,"title":null,"content":null,"status":1,"css":{},"properties":{"bgColor":"#E6E9EE"}},{"id":439881,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;\\"><span style=\\"line-height: 1; background-color: initial;\\"><font size=\\"4\\" color=\\"#888888\\"><b>场景名称</b></font></span></div>","status":1,"css":{"height":"65","zIndex":"10","width":"320","left":"0px","top":"77px"},"properties":{}},{"id":439882,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div class=\\"bottom-logo\\" style=\\"text-align: center;cursor:pointer;height:142px;width:142px;border-radius:10px;\\"><em style=\\"color:white;line-height:142px;font-size:30px;\\" class=\\"eqf-logo\\"></em></div>","status":1,"css":{"height":"157","width":"172","left":"77px","top":"170px"},"properties":{}},{"id":439883,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"width:280px;height:1px;background-color:rgba(60,60,60,0.4);cursor:pointer;position:absolute;left:0;-webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));top:12px;\\"></div>","status":1,"css":{"height":"24","width":"280","left":"21px","top":"122px"},"properties":{}},{"id":439885,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;padding-top: 0;\\"><span style=\\"font-size: small; line-height: 1; background-color: initial;\\"><a href=\\"'+PREFIX_S1_URL+"eqs/link?id=16060&amp;url="+encodeURIComponent(i)+'\\" target=\\"_blank\\"><font color=\\"#888888\\">免费创建一个场景？→</font><font color=\\"#23a3d3\\">易企秀</font></a></span></div>","status":1,"css":{"borderRadius":"0px","borderStyle":"solid","height":"30","paddingTop":"0px","borderColor":"rgba(222,220,227,1)","zIndex":"12","boxShadow":"0px 0px 0px rgba(200,200,200,0.6)","color":"","backgroundColor":"rgba(255,255,255,0)","borderWidth":"0px","width":"320","left":"1px","paddingBottom":"20px","top":"420px"},"properties":{"anim":{"type":1,"direction":3,"duration":"1","delay":"0.6"}}}]}';a=a.replace(/id=16060/,"id="+e.id);var s=JSON.parse(a);s.num=t.length+1,e.cover&&"group1/M00/61/8A/yq0KA1T2vYSAEgo7AACovQVgHxk048.jpg"!==e.cover&&(s.elements[2]=JSON.parse(n),s.elements[2].properties.src=e.cover),s.elements[1].content=s.elements[1].content.replace(/场景名称/,e.name?e.name:""),t.push(s)}function a(e,t){var i='{"id":81395,"pageId":"","sceneId":"","num":1,"type":"4","isInput":0,"title":null,"content":null,"status":1,"css":{"borderRadius":"%","borderStyle":"solid","height":"158","zIndex":"1000","paddingTop":"0px","borderColor":"rgba(0,0,0,1)","boxShadow":"0 0px 0px #333333","color":"#000000","backgroundColor":"white","borderWidth":"0px","width":"158","left":"84px","paddingTop":"11px","paddingLeft":"10px","top":"170px"},"properties":{"height":"100px","imgStyle":{"width":139,"height":136,"marginTop":"0px","marginLeft":"0px"},"width":"100px","src":"group1/M00/01/30/yq0JCFQpOR-AOULFAAFBPO1yzBQ984.jpg"}}',n='{"id":439882,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div class=\\"bottom-logo\\" style=\\"text-align: center;cursor:pointer;height:136px;width:139px;\\"><em style=\\"color:white;line-height:136px;font-size:120px;\\" class=\\"eqf-eqxiu\\"></em></div>","status":1,"css":{"height":"158","width":"158","left":"84px","top":"170px","backgroundColor":"white"},"properties":{}}',a='{"id":81465,"pageId":"","sceneId":"","num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;\\"><font color=\\"#ffffff\\" size=\\"3\\">击此处进行编辑</font></div>","status":1,"css":{"zIndex":"102","height":"65","width":"320","left":"0px","top":"70px"},"properties":{}}',s='{"id":2557867,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div class=\\"logo-shadow1\\" style=\\"text-align: center;cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);position:absolute;left:20px;top:56px;\\"></div>","status":1,"css":{"height":"257","width":"257","left":"78px","top":"175px"},"properties":{}}',o='{"id":439883,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"width:280px;height:1px;background-color:rgba(60,60,60,0.4);cursor:pointer;position:absolute;left:0;-webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));top:12px;\\"></div>","status":1,"css":{"height":"24","width":"280","left":"21px","top":"122px"},"properties":{}}';
t.obj.sceneId=e.id;for(var r,l=0;l<t.obj.elements.length;l++)""+t.obj.elements[l].type!="2"&&(""+t.obj.elements[l].type!="4"||"group1/M00/A5/5E/yq0KA1QmePmAKr7yAAEByp5jyLc752.jpg"!==t.obj.elements[l].properties.src&&"group1/M00/C5/9D/yq0KA1SH1zuAFgkLAAAFgBR8hJs456.png"!==t.obj.elements[l].properties.src&&"group1/M00/C5/3F/yq0KA1SHp-2AQZZZAAB-7rIaK6I743.png"!==t.obj.elements[l].properties.src&&"group1/M00/C5/9D/yq0KA1SH1zuAeQuFAAAFfUkeXDc110.png"!==t.obj.elements[l].properties.src)||(t.obj.elements.splice(l,1),l--);"group1/M00/61/8A/yq0KA1T2vYSAEgo7AACovQVgHxk048.jpg"!==e.cover?(r=JSON.parse(i),r.properties.src=e.cover):r=JSON.parse(n),t.obj.elements.push(r),t.obj.elements.push(JSON.parse(s)),t.obj.elements.push(JSON.parse(o));var c=JSON.parse(a);c.content=c.content.replace(/击此处进行编辑/,e.name),t.obj.elements.push(c);for(var d=0;d<t.obj.elements.length;d++)""+t.obj.elements[d].type=="2"&&/http:\/\/service.eqxiu.com\/eqs\/link/.test(t.obj.elements[d].content)&&(t.obj.elements[d].content=t.obj.elements[d].content.replace(/;url=.*com"/,";url="+encodeURIComponent(redirectUrl)+'"'))}function s(t,i){e.getSelfLastPage(t.obj.property.bottomLabel.id).then(function(e){if(e.data.success){var n=i[i.length-1];n.elements||(n.elements=[]);var a=e.data.obj.elements;if(n.properties&&n.properties.longPage)for(var s=n.properties.longPage-1,o=0;o<a.length;o++)a[o].css.top+=486*s;n.elements=n.elements.concat(a),l(i,t)}})}function o(e,t){r(e,t),l(t,e)}function r(e,t){var i="http://eqxiu.com",n="易企秀技术支持",a='{"id":480292,"pageId":136042,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;transform: none;-webkit-animation: fadeIn 2s ease 1s both;-webkit-animation-play-state: initial;\\"><a href=\\"'+PREFIX_S1_URL+"eqs/link?id=16060&amp;url="+encodeURIComponent(i)+'\\" target=\\"_blank\\" style=\\"font-size: x-small;display:block;line-height: 10px;\\"><font color=\\"#ffffff\\">'+n+'</font></a></div>","status":1,"css":{"zIndex":"1000","height":"20","width":"129","left":"97px","top":"418px","backgroundColor":"rgba(0,0,0,0.6)","borderRadius":"20px"},"properties":{"anim":{"type":0,"direction":0,"duration":2,"delay":"0"}}}',s=t[t.length-1].elements;t[t.length-1].properties&&t[t.length-1].properties.longPage&&(a=a.replace("418px",486*t[t.length-1].properties.longPage-68+"px")),a=a.replace(/id=16060/,"id="+e.id),t[t.length-1].elements||(s=t[t.length-1].elements=[]),s.push(JSON.parse(a))}function l(e,t){var i=t.obj.pageMode;t.obj.property.slideNumber?t.obj.property.slideDisplay="block":t.obj.property.slideDisplay="none",t.obj.property.slideNumber=!0;for(var n={bgAudio:t.obj.bgAudio},a=1;a<=e.length;a++){$('<section class="main-page"><div class="m-img" id="page'+a+'"></div></section>').appendTo(".phone-view"),e.length>1&&($('<section class="u-arrow-bottom"><div class="pre-wrap"><div class="pre-box1"><div class="pre1"></div></div><div class="pre-box2"><div class="pre2"></div></div></div></section>').appendTo("#page"+a),$('<section class="u-arrow-right"><div class="pre-wrap-right"><div class="pre-box3"><div class="pre3"></div></div><div class="pre-box4"><div class="pre4"></div></div></div></section>').appendTo("#page"+a)),1===a&&$(".phone-view .main-page").eq(0).addClass("z-current");var s=a;if(e[s-1].properties&&!$.isEmptyObject(e[s-1].properties)?e[s-1].properties.image||e[s-1].properties.scratch?addScratchEffect(n,e,s):e[s-1].properties.finger?(b=[],b.push({num:s,finger:e[s-1].properties.finger}),lockEffect(n,e,b,$(".m-img").width(),$(".m-img").height())):e[s-1].properties.fallingObject?e[s-1].effObj=fallingObject(e,s):e[s-1].properties.effect?!function(t){e[t-1].effObj=window[e[t-1].properties.effect.name].doEffect(n,t,e,renderPage)}(s):renderPage(eqShow,s,e,!0):(renderPage(eqShow,s,e,!0),1===s&&eqShow.playVideo(n)),a===e.length){eqxiu.app($(".phone-view"),t.obj.pageMode,e,t)}}0===i||1===i||2===i||6===i||7===i||8===i||11===i||12===i||13===i?$(".phone-view .u-arrow-right").hide():3!==i&&4!==i&&5!==i&&9!==i&&10!==i||$(".phone-view .u-arrow-bottom").hide()}function c(t){var i=[];$.extend(!0,i,g._pages),f.activePage&&i.push(f.activePage);var s=i.length+1;if(!t){n({name:f.sceneName},i),f.lastPage=i[i.length-1];var o=i[i.length-1];return f.haseLastPage?d(f.lastPageNum,o):($(".phone-view .main-page").last().after('<section class="main-page"><div class="m-img" id="page'+s+'"></div></section>'),f.lastPageNum=s,renderPage(eqShow,f.lastPageNum,i,!0),f.haseLastPage=!0),g.app.changeAppPage(),void g.app.setPageData(i)}e.getSelfLastPage(t).then(function(e){if(e.data.success){if(f.lastPage=e.data.obj,f.haseLastPage){var t={id:"1",name:f.sceneName,cover:f.sceneCover};a(t,e.data),d(f.lastPageNum,e.data.obj)}else $(".phone-view .main-page").last().after('<section class="main-page"><div class="m-img" id="page'+s+'"></div></section>'),f.lastPageNum=s,renderPage(eqShow,f.lastPageNum,i.concat([e.data.obj]),!0),f.haseLastPage=!0;g.app.changeAppPage(),g.app.setPageData(i)}})}function d(e,i){$("#page"+e).empty(),t.templateEditor.parse({def:i,appendTo:"#page"+e,mode:"view",disEvent:!0})}function p(e,t,i,n){t.elements||(t.elements=[]);var a=[];if($.extend(!0,a,e),u(a,t,i,n),t.properties&&t.properties.longPage){longPage=t.properties.longPage-1;for(var s=0;s<a.length;s++)a[s].css.top+=486*longPage}t.elements=t.elements.concat(a),d(g._pages.length,t)}function u(e,t,i,n){for(var a=0,s=e.length;a<s;a++){var o=e[a];if(o.pageId=t.id,i.name&&i.url&&"http://"!==i.url)""+o.type=="2"&&o.content.indexOf("EQXIU.COM科技公司")>0&&(o.content=o.content.replace(/EQXIU.COM科技公司/,'<a href="'+PREFIX_S1_URL+"eqs/link?id="+n+"&amp;url="+encodeURIComponent(i.url)+'" target=_blank>'+i.name+"</a>"));else if(i.name)""+o.type=="2"&&o.content.indexOf("EQXIU.COM科技公司")>0&&(o.content=o.content.replace(/EQXIU.COM科技公司/,i.name));else if(/易企秀技术支持/.test(o.content)){o.content='<div style="text-align: center;">'+o.content+"</div>";var r={zIndex:"1000",height:"33",width:"129",left:"97px"};$.extend(o.css,r)}else""+o.type=="2"&&o.content&&(o.content="");o.css.zIndex=200}}function h(){g.app.removeLastPage(),g.app.changeAppPage(),f.haseLastPage=!1}var g={};g.app=eqxiu;var m,f={haseLastPage:!1,sceneName:"",sceneCover:"",lastPage:null,activePage:null,activePageNum:null,lastPageNum:null},v=[];g._pages=[],g.parse=function(e){f.activePage=null,e.obj.property?"string"==typeof e.obj.property&&(e.obj.property=JSON.parse(e.obj.property)):e.obj.property={},e.obj.name&&(f.sceneName=e.obj.name),e.obj.cover&&(f.sceneCover=e.obj.cover),e.obj.bgAudio&&"string"==typeof e.obj.bgAudio?e.obj.bgAudio=JSON.parse(e.obj.bgAudio):$("#audio_btn").hide();var t=e.list;if($.extend(!0,g._pages,e.list),e.obj.property.hideEqAd)l(t,e);else switch(e.obj.property.eqAdType){case 1:f.haseLastPage=!0,f.lastPageNum=t.length+1,i(e,t);break;case 2:o(e,t);break;case 3:s(e,t);break;default:f.haseLastPage=!0,i(e,t)}};var b=[];return g.changeBottomType=function(t,i,n,a){if("eqFree"===t)c(i),g.app.lastPage();else if("eqLink"===t){if(f.lastPageNum=null,f.haseLastPage&&(h(),f.lastPage=null),g.app.lastPage(!!f.activePage),2===a){var s=[];$.extend(!0,s,g._pages);var o=s[s.length-1];return o.elements||(o.elements=[]),r(o,s),void d(g._pages.length,o)}if(!n||!n.id)return;if(o={},$.extend(!0,o,g._pages[g._pages.length-1]),v&&m===n.id)return o.elements||(o.elements=[]),void p(v,o,n,g._pages[0].sceneId);m=n.id,e.getSelfLastPage(n.id).then(function(e){e.data.success&&($.extend(!0,v,e.data.obj.elements),o.elements||(o.elements=[]),p(e.data.obj.elements,o,n,g._pages[0].sceneId))})}else f.lastPageNum=null,f.haseLastPage?(h(),f.lastPage=null):d(g._pages.length,g._pages[g._pages.length-1]),g.app.lastPage()},g.removeActivePage=function(){g.app.removeLastPage(f.haseLastPage),g.app.changeAppPage(),g.app.lastPage(),f.activePageNum=null},g.playVideo=function(e){var t={bgAudio:e};e||(t.bgAudio={url:""},$("#audio_btn").hide()),$("#can1").hasClass("lock")?(changeAudioObj(t),$("#audio_btn").hide()):eqShow.playVideo(t)},g.changeScrollMode=function(e){g.app.changeScrollMode(e),0===e||1===e||2===e||6===e||7===e||8===e||11===e||12===e||13===e||14===e?($(".phone-view .u-arrow-right").hide(),$(".phone-view .u-arrow-bottom").show()):3===e||4===e||5===e||9===e||10===e?($(".phone-view .u-arrow-bottom").hide(),$(".phone-view .u-arrow-right").show()):($(".phone-view .u-arrow-bottom").hide(),$(".phone-view .u-arrow-right").hide())},g.changeSceneName=function(e){f.sceneName=e},g.changeSceneCover=function(e){f.sceneCover=e},g.replaceActivePage=function(t){e.getActivityPage(t).then(function(e){var t,i=[];f.haseLastPage?($.extend(!0,i,g._pages),f.lastPage&&i.push(f.lastPage),i.push(e.data.obj),t=i.length,f.activePage?d(f.activePageNum,e.data.obj):($(".phone-view .main-page").last().prev().after('<section class="main-page"><div class="m-img" id="page'+t+'"></div></section>'),f.activePageNum=t,renderPage(eqShow,f.activePageNum,i,!0)),g.app.setPageData(i),g.app.changeAppPage()):($.extend(!0,i,g._pages),i.push(e.data.obj),t=i.length,f.activePage?d(f.activePageNum,e.data.obj):($(".phone-view .main-page").last().after('<section class="main-page"><div class="m-img" id="page'+t+'"></div></section>'),f.activePageNum=t,renderPage(eqShow,f.activePageNum,i,!0)),g.app.changeAppPage(),g.app.setPageData(i)),f.activePage=e.data.obj})},g}]),angular.module("scene").directive("previewExemplar",["$timeout","pageTplService","$sce",function(e,t,i){return{restrict:"A",scope:{currentTpl:"=",createScene:"&"},templateUrl:"scene/scenePreviewExemplar.tpl.html",link:function(n,a,s){function o(){null!==n.currentTpl.tpl.avatar&&void 0!==n.currentTpl.tpl.avatar&&(n.avatar=/^http.*/.test(n.currentTpl.tpl.avatar)?n.currentTpl.tpl.avatar:PREFIX_FILE_HOST+n.currentTpl.tpl.avatar),n.reviewUrl=n.canvasUrl+"/s/"+n.currentTpl.tpl.code,n.reviewForIframe=i.trustAsResourceUrl(n.canvasUrl+"/s/"+n.currentTpl.tpl.code+"?exemplarReview=true"),t.getExemplarTags(n.currentTpl.tpl.id).then(function(e){n.tags=e.data.list,u()})}function r(){n.currentTpl.exemplarPreview=!1}function l(e,t){var i=e.target,n=t?i.value.length:0;i.setSelectionRange(0,n)}function c(e){n.openDescription=e}function d(t){n.copySuccess=!0,eqShow.copyToClipboard(t.previousElementSibling),e(function(){n.copySuccess=!1},1e3)}function p(){var e=angular.copy(n.currentTpl);delete e.exemplarPreview,n.currentTpl.exemplarPreview=!1,n.createScene(e)}function u(){var e=Math.floor(Math.random()*n.tags.length);(!n.tagId&&!n.bizType||""===n.tagId&&"0"===n.bizType)&&(n.tagId=n.tags[e].id),t.getSimilarTagExemplar(n.tagId?n.tagId:n.bizType).then(function(e){n.similarExemplars=e.data.list})}function h(e,t){var i=angular.element(e.parentElement);t?i.addClass("nameActive"):i.removeClass("nameActive")}function g(e){n.currentTpl.tpl=e,o()}angular.extend(n,n,{canvasUrl:PREFIX_SHOW_HOST,reviewUrl:null,reviewForIframe:null,bizType:s.biztype,tagId:s.tagid,fileDomain:PREFIX_FILE_HOST,tags:[],qrCodeShow:!1,exemplarNameShow:!1,openDescription:!1,copySuccess:!1,similarExemplars:[],cancel:r,inputSelected:l,showMoreDescription:c,copy:d,newScene:p,changeAnotherExemplars:u,showAnotherExemplar:g,showName:h}),o()}}}]),angular.module("scene.support",[]),angular.module("scene.support").controller("SupportCtrl",["$location","$scope","continueUrl",function(e,t,i){t["continue"]=function(){window.sessionStorage&&sessionStorage.setItem("checkSuport",!1),e.path(i.getUrl())},t.setLinkUrl=function(){navigator.language?navigator.language.toLowerCase():navigator.systemLanguage.toLowerCase();t.download_Chorme="https://www.baidu.com/s?wd=Chrome",t.download_IE="https://www.baidu.com/s?wd=ie11",t.download_360fast="http://chrome.360.cn/",t.download_360="http://se.360.cn/"},t.setLinkUrl()}]).factory("continueUrl",function(){function e(e){i=e}function t(){return i}var i="";return{setUrl:e,getUrl:t}}),angular.module("active1",["services.show","services.activity"]),angular.module("active1").controller("Active1Ctrl",["$rootScope","$http","$scope","showService","activityService","$location","configSerService","ModalService",function(e,t,i,n,a,s,o,r){i.pageNo=1,i.pageSize=10,i.childCat="active",i.join=function(e){s.path("/show/active/"+e)},i.attend=function(t){e.user?""+t=="1"?s.path("/main"):""+t=="3"&&s.path("/main/print/create"):i.openLogin()};var l=function(e){a.getActiveList(1,null,e,i.pageSize),i.$on("activeList",function(e,t){i.activeList=t.data.list;for(var n=Date.parse(new Date),a=0;a<i.activeList.length;a++)i.activeList[a].endDate>n?i.activeList[a].join=!0:i.activeList[a].join=!1;i.totalItems=t.data.map.count,i.currentPage=t.data.map.pageNo,i.allPageCount=t.data.map.count,i.toPage=t.data.map.pageNo})};l(i.pageNo),i.pageChanged=function(e){return e<1||e>i.totalItems/10+1?void r.openMsgDialog({msg:"此页超出范围"}):void l(e)},i.pageCode="active",o.getFriendLinks(i.pageCode).then(function(e){i.friendLinks=e.data.list,i.friendLinks.length>16&&(i.friendLinks.length=16)}),o.getActivityBanner(i.pageCode).then(function(e){i.banners=e.data.list})}]),angular.module("activeXq",["services.show","services.activity"]),angular.module("activeXq").controller("ActiveXqCtrl",["$rootScope","$http","$scope","showService","activityService","$location","$routeParams","configSerService","ModalService",function(e,t,i,n,a,s,o,r,l){i.PREFIX_FILE_HOST=PREFIX_FILE_HOST,i.PREFIX_CLIENT_HOST=PREFIX_HOST,i.PREFIX_SERVER_HOST=PREFIX_URL,i.pageNo=1,i.pageSize=16,i.activeId=o.id,i.childCat="active",i.totalItems=0,i.join=function(e){s.path("/show/active/"+e)},i.attend=function(){e.user?s.path("/main"):i.openLogin()};var c=function(){a.activitySceneList(i.activeId,1,i.pageNo,4).then(function(e){if(i.recSceneList=e.data.list,e.data.list)for(var t=0;t<i.recSceneList.length;t++)i.recSceneList[t].headImg?0===i.recSceneList[t].headImg.indexOf("http://")?i.recSceneList[t].headImg=i.recSceneList[t].headImg:i.recSceneList[t].headImg=PREFIX_FILE_HOST+i.recSceneList[t].headImg:i.recSceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};c(i.activeId,1,i.pageNo,4);var d=function(){a.activitySceneList(i.activeId,null,i.pageNo,i.pageSize).then(function(e){if(i.sceneList=e.data.list,i.totalItems=e.data.map.count,i.currentPage=e.data.map.pageNo,i.toPage=e.data.map.pageNo,e.data.list)for(var t=0;t<i.sceneList.length;t++)i.sceneList[t].headImg?0===i.sceneList[t].headImg.indexOf("http://")?i.sceneList[t].headImg=i.sceneList[t].headImg:i.sceneList[t].headImg=PREFIX_FILE_HOST+i.sceneList[t].headImg:i.sceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};d(i.activeId,null,i.pageNo,i.pageSize),a.activityMes(i.activeId),i.$on("activeMes",function(e,t){i.activeMes=t.data.obj}),i.pageChanged=function(e){return i.pageNo=e,e<1||e>i.totalItems/16+1?void l.openMsgDialog({msg:"此页超出范围"}):void d(i.activeId,null,e,i.pageSize)},i.pageCode="pro_"+i.activeId,r.getFriendLinks(i.pageCode).then(function(e){i.friendLinks=e.data.list,i.friendLinks.length>16&&(i.friendLinks.length=16)}),r.getActivityBanner("ac_"+i.activeId).then(function(e){i.banners=e.data.list})}]),angular.module("category",["services.show","services.activity"]),angular.module("category").controller("CategoryCtrl",["$rootScope","$http","$scope","showService","activityService","$location","$routeParams","security","ModalService","configSerService",function(e,t,i,n,a,s,o,r,l,c){i.recommend=1,i.pageSize=16,a.getActiveList(null,i.recommend,i.pageNo,3),i.$on("activeList",function(e,t){i.activeList=t.data.list}),i.join=function(e){s.path("/show/active/"+e)};var d=o.id;i.bizType=d;var p={};i.getCategoryTpl=function(e){i.childCat=e,p[e]?(i.childCatrgoryList=p[e],i.childCatrgoryList.length&&(u.tagId=i.categoryId=i.childCatrgoryList[0].id,i.getPageTpls(null,i.childCatrgoryList[0].id))):n.getPageTagLabel(e).then(function(t){i.childCatrgoryList=p[e]=t.data.list,i.childCatrgoryList.length&&(u.tagId=i.categoryId=i.childCatrgoryList[0].id,i.getPageTpls(null,i.childCatrgoryList[0].id))})},i.getCategoryTpl(d);var u={sceneType:"",tagId:"",orderBy:null,bizType:"",template:"",pageNo:"1",targetPage:""};i.tplNew=function(e){i.order=e,u.orderBy=e,i.getPageTpls(e,null,u.tagId,u.pageNo,i.pageSize)},i.getPageTpls=function(e,t){t&&(u.tagId=t),i.categoryId=u.tagId,n.getSceneList(u.orderBy,null,u.tagId,u.pageNo,i.pageSize),i.$on("sceneList",function(e,t){i.tpls=t.list,i.totalItems=t.map.total,i.currentPage=t.map.pageNo,i.allPageCount=t.map.count,i.toPage=t.map.pageNo;for(var n=0;n<i.tpls.length;n++)i.tpls[n].headImg?0===i.tpls[n].headImg.indexOf("http://")?i.tpls[n].headImg=i.tpls[n].headImg:i.tpls[n].headImg=PREFIX_FILE_HOST+i.tpls[n].headImg:i.tpls[n].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})},i.userTpl=function(t){s.path("/scene/list/sample"),e.tplId=t},i.pageChanged=function(e){return e<1||e>i.totalItems/16+1?void l.openMsgDialog({msg:"此页超出范围"}):(u.pageNo=e,void i.getPageTpls(u.orderBy,null,u.tagId,e,i.pageSize))};var h=o.id;i.pageCode="st_"+h,c.getActivityBanner(i.pageCode).then(function(e){i.banners=e.data.list}),"101"===h?i.bannerData="4203":"102"===h?i.bannerData="4204":"103"===h?i.bannerData="4205":"104"===h?i.bannerData="4206":"105"===h?i.bannerData="4207":"106"===h&&(i.bannerData="4208")}]),angular.module("nav",["services.show","services.staticRes"]),angular.module("nav").controller("NavCtrl",["$rootScope","$http","$scope","security","showService","$location","$routeParams","staticResService",function(e,t,i,n,a,s,o,r){i.isActive="show",i.sceneType=r.getSceneType(),i.accessOrderTask=n.isAllowToAccess(n.accessDef.ACCESS_ORDER_TASK),angular.forEach(i.sceneType,function(e){e.value===o.id&&(i.$parent.catName=e.name)}),i.getCategoryPage=function(e){s.path("show/category/"+e)};var l=null;i.search=function(e){l=e},i.submit=function(){l?s.path("show/search/"+l):s.path("show")},i.EnterPress=function(e,t){var n=e||window.event;13===n.keyCode&&i.submit(t)}}]),angular.module("show",["services.show","services.activity","show.task"]),angular.module("show").controller("ShowCtrl",["$rootScope","$http","$scope","showService","activityService","$location","configSerService",function(e,t,i,n,a,s,o){i.PREFIX_FILE_HOST=PREFIX_FILE_HOST,i.PREFIX_CLIENT_HOST=PREFIX_HOST,i.PREFIX_SERVER_HOST=PREFIX_URL,i.PREFIX_SHOW_HOST=PREFIX_SHOW_HOST,i.recommend=1,i.childCat="index",i.category="h5",a.getActiveList(null,i.recommend,i.pageNo,3),i.$on("activeList",function(e,t){i.activeList=t.data.list}),i.join=function(e){s.path("/show/active/"+e)},i.pageCode="index",o.getFriendLinks(i.pageCode).then(function(e){i.friendLinks=e.data.list,i.friendLinks.length>16&&(i.friendLinks.length=16)}),o.getActivityBanner(i.pageCode).then(function(e){i.banners=e.data.list})}]),angular.module("commonRecommend",["services.show"]),angular.module("commonRecommend").controller("CommonRecommendCtrl",["$rootScope","$http","$scope","showService","security","$location","ModalService",function(e,t,i,n,a,s,o){var r=i.recommendType,l="";i.PREFIX_FILE_HOST=PREFIX_FILE_HOST,i.PREFIX_CLIENT_HOST=PREFIX_HOST,i.PREFIX_SERVER_HOST=PREFIX_URL,i.PREFIX_SHOW_HOST=PREFIX_SHOW_HOST,i.pageNo=1,i.pageSize=16,i.childCat="recommend",i.order=null;var c=function(e){n.getSceneList(i.order,1,null,e,i.pageSize),i.$on("sceneList",function(e,t){i.recommendList=t.list,i.totalItems=t.map.total,i.currentPage=t.map.pageNo,i.allPageCount=t.map.total,i.toPage=t.map.pageNo;for(var n=0;n<i.recommendList.length;n++)i.recommendList[n].headImg?0===i.recommendList[n].headImg.indexOf("http://")?i.recommendList[n].headImg=i.recommendList[n].headImg:i.recommendList[n].headImg=PREFIX_FILE_HOST+i.recommendList[n].headImg:i.recommendList[n].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};"print"===i.recommendType?n.getPrintRecommend(i.pageNo,i.pageSize):"h5"===i.recommendType&&c(i.pageNo),i.tplNew=function(e){i.order=e,c(e,1,null,i.pageNo,i.pageSize)},i.userTpl=function(t){"h5"===r?(s.path("/scene/list/sample"),e.tplId=t):"print"===r&&(window.sessionStorage.setItem("copyPrintId",t.id),window.open("print/copyTpl","_blank"),window.sessionStorage.removeItem("copyPrintId"))},i.recommend=function(e){if(r=i.recommendType=e,i.pageNo=1,"h5"===e){if("h5"===l)return;i.changeLocation&&s.path("show/recommend/h5",!1),c(i.pageNo),l="h5"}else if("print"===e){if("print"===l)return;i.changeLocation&&s.path("show/recommend/print",!1),n.getPrintRecommend(i.pageNo,i.pageSize),l="print"}},i.$on("printRecommend.print",function(e,t){i.recommendList=t.list,i.totalItems=t.map.total,i.currentPage=t.map.pageNo,i.allPageCount=t.map.total,i.toPage=t.map.pageNo;for(var n=0;n<i.recommendList.length;n++)i.recommendList[n].headImg?0===i.recommendList[n].headImg.indexOf("http://")?i.recommendList[n].headImg=i.recommendList[n].headImg:i.recommendList[n].headImg=PREFIX_FILE_HOST+i.recommendList[n].headImg:i.recommendList[n].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"}),i.preview=function(e){if("h5"===r)window.open(PREFIX_SHOW_HOST+"/s/"+e,"_blank");else if("print"===r){var t=$("#preview_wrap"),i=$("#pc_preview");i.attr("src",PREFIX_HOST+"/print/share.html?code="+e),t.show(),t.find("span").click(function(){t.hide(),i.attr("src",""),$(this).unbind("click")})}},i.pageChanged=function(e){return e<1||e>i.totalItems/16+1?void o.openMsgDialog({msg:"此页超出范围"}):void("h5"===r?c(e):"print"===r&&n.getPrintRecommend(e,i.pageSize))}}]).directive("eqdCommonRecommend",[function(){function e(e,t,i){}return{restrict:"E",templateUrl:"show/recommend/commonRecommend.tpl.html",controller:"CommonRecommendCtrl",scope:{filter:"=",recommendType:"@category",changeLocation:"="},link:e}}]),angular.module("recommend",["commonRecommend"]).controller("RecommendCtrl",["$scope","$routeParams",function(e,t){e.childCat="recommend",e.category=t.category||"h5"}]),angular.module("search",["services.show","services.activity"]),angular.module("search").controller("SearchCtrl",["$rootScope","$http","$scope","showService","activityService","$location","$routeParams","security","ModalService",function(e,t,i,n,a,s,o,r,l){var c={name:"",pageNo:1,pageSize:16};i.name=o.name,i.pageNo=1,i.pageSize=16,i.val=i.name,c.keyword=i.name,i.EnterPress=function(e,t){var n=e||window.event;13===n.keyCode&&i.submit(t)},i.submit=function(e){i.name=e,e?s.path("show/search/"+i.name):s.path("show")};var d=function(e){n.search(e),i.$on("searchList",function(e,t){i.searchList=t.list,i.totalItems=t.map.total,i.currentPage=t.map.pageNo,i.toPage=t.map.pageNo;for(var n=0;n<i.searchList.length;n++)i.searchList[n].headImg?0===i.searchList[n].headImg.indexOf("http://")?i.searchList[n].headImg=i.searchList[n].headImg:i.searchList[n].headImg=PREFIX_FILE_HOST+i.searchList[n].headImg:i.searchList[n].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};d(c),i.pageChanged=function(e){return e<1||e>i.totalItems/16+1?void l.openMsgDialog({msg:"此页超出范围"}):(c.pageNo=e,void d(c))},i.userTpl=function(t){s.path("/scene/list/sample"),e.tplId=t}}]),angular.module("services.activity",[]).factory("activityService",["$rootScope","$http",function(e,t){var i={};return i.getActiveList=function(i,n,a,s){var o=PREFIX_S2_URL+"/eqs/activity";return i&&(o+=/\?/.test(o)?"&":"?",o+="joinNum="+i),n&&(o+=/\?/.test(o)?"&":"?",o+="recommend="+n),a&&(o+=/\?/.test(o)?"&":"?",o+="pageNo="+a),s&&(o+=/\?/.test(o)?"&":"?",o+="pageSize="+s),t({method:"GET",url:o}).then(function(t){if(t.data.success){var i=t;e.$broadcast("activeList",i)}})},i.activitySceneList=function(e,i,n,a){var s=PREFIX_S2_URL+"/eqs/activity/scene?promId="+e;return i&&(s+=/\?/.test(s)?"&":"?",s+="recommend="+i),n&&(s+=/\?/.test(s)?"&":"?",s+="pageNo="+n),a&&(s+=/\?/.test(s)?"&":"?",s+="pageSize="+a),t({method:"GET",url:s})},i.activityMes=function(i){var n=PREFIX_S2_URL+"/eqs/activity/info?id="+i;return t({method:"GET",url:n}).then(function(t){if(t.data.success){var i=t;e.$broadcast("activeMes",i)}})},i}]),angular.module("services.configSer",[]).factory("configSerService",["$http",function(e){var t=function(t){var i=PREFIX_S2_URL+"eqs/friendlinks?pageCode="+t;return e({method:"GET",url:i})},i=function(t,i){var n=PREFIX_S2_URL+"eqs/banners?pageCode="+t;i&&(n+="&userType="+i);new Date;return e({method:"GET",url:n})};return{getFriendLinks:t,getActivityBanner:i}}]),angular.module("services.show",[]).factory("showService",["$rootScope","$q","$http",function(e,t,i){var n={};return n.getPageTagLabel=function(e){var t="/eqs/tag/sys/list?type=2";null!==e&&(t+=(/\?/.test(t)?"&":"?")+"bizType="+e);new Date;return i({method:"GET",url:PREFIX_S2_URL+t})},n.getSceneList=function(t,n,a,s,o){var r=PREFIX_S2_URL+"eqs/show/list";return t&&(r+=/\?/.test(r)?"&":"?",r+="template="+t),n&&(r+=/\?/.test(r)?"&":"?",r+="recommend="+n),a&&(r+=/\?/.test(r)?"&":"?",r+="tagId="+a),s&&(r+=/\?/.test(r)?"&":"?",r+="pageNo="+s),o&&(r+=/\?/.test(r)?"&":"?",r+="pageSize="+o),i({method:"GET",url:r}).then(function(t){if(t.data.success){var i=t.data;e.$broadcast("sceneList",i)}})},n.getPrintRecommend=function(n,a){var s=PREFIX_S2_URL+"eqs/show/print/list";return n&&(s+=/\?/.test(s)?"&":"?",s+="pageNo="+n),a&&(s+=/\?/.test(s)?"&":"?",s+="pageSize="+a),i({method:"GET",url:s}).then(function(t){var i=t.data;return e.$broadcast("printRecommend.print",i),i})["catch"](function(e){t.reject(e)})},n.search=function(t){var n="search/show";return i({method:"POST",url:SEARCH_SERVER_HOST+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)}).then(function(t){if(t.data.success){var i=t.data;e.$broadcast("searchList",i)}})},n}]),angular.module("services.visitor",[]).factory("visitorService",["$rootScope","$http",function(e,t){var i={};return i.getRecommendVisitor=function(){var e="showker/recommend";return t({method:"GET",url:PREFIX_S2_URL+e})},i.getVisitorMsg=function(e){var i="showker/detail?userId="+e;return t({method:"GET",url:PREFIX_S2_URL+i})},i.getVisitorList=function(e,i,n,a,s){var o="showker/list";return e&&(o+=/\?/.test(o)?"&":"?",o+="addr="+e),i&&(o+=/\?/.test(o)?"&":"?",o+="pay="+i),n&&(o+=/\?/.test(o)?"&":"?",o+="good="+n),a&&(o+=/\?/.test(o)?"&":"?",o+="pageNo="+a),s&&(o+=/\?/.test(o)?"&":"?",o+="pageSize="+s),t({method:"GET",url:PREFIX_S2_URL+o})},i.getVisitorMesList=function(e,i,n){var a="showker/represent?userId="+e;return i&&(a+=/\?/.test(a)?"&":"?",a+="pageNo="+i),n&&(a+=/\?/.test(a)?"&":"?",a+="pageSize="+n),t({method:"GET",url:PREFIX_S2_URL+a})},i}]),angular.module("show.task.detail",[]),angular.module("show.task.detail").controller("ReciveTaskDetailController",["$scope","sceneService","orderService","$routeParams","$location","ModalService",function(e,t,i,n,a,s){e.childCat="task",i.getRecommand().then(function(t){e.selectTasks=t.data.list.splice(0,4)}),e.$on("template.get.success",function(t,i){e.orderTpl=i.orderTpl,e.orderCount=i.count}),e.getDate=function(e){var t=/-/g;return e.replace(t,".")},i.getOrderDetail(n.taskId).then(function(t){e.order=t.data.obj,i.getOrderTemplate(n.taskId,!!t.data.obj.isOfficialTask)}),i.getOrderStatis(n.taskId).then(function(t){e.orderStatis=t.data.obj}),e.receiveTask=function(){i.acceptTask(n.taskId).then(function(e){e.data.success?a.path("/show/receiveTaskSuc/"+n.taskId):s.openMsgDialog({msg:e.data.msg})})}}]),angular.module("show.task.list",[]),angular.module("show.task.list").controller("TaskListController",["$scope","orderService","$location","ModalService",function(e,t,i,n){function a(){t.getAllOrderList(e.filter).then(function(t){t.data.success?(e.taskList=t.data.list,e.totalItems=t.data.map.count):(e.taskList=[],e.totalItems=0),e.hasTaskFilter()})}e.childCat="task",e.filter={pageSize:10,pageNo:1},e.taskFilter=!1,e.sorts=[{name:"预算由高到低",value:1},{name:"预算由低到高",value:2}],t.getRecommand().then(function(t){e.selectTasks=t.data.list}),e.pageChanged=function(){a()},e.changeOffical=function(){e.filter.isOfficialTask=e.isOfficialTask?1:null,a()},e.changeState=function(){e.filter.isStart=e.ongonging?1:null,a()},e.changeDate=function(){e.startDate?e.filter.startDate=eqShow.DateFormat(e.startDate,"yyyy-MM-dd"):e.filter.startDate=null,a()},e.changeSort=function(){1===e.sortType?(e.filter.sort="desc",e.filter.sortField="budget"):2===e.sortType?(e.filter.sort="asc",e.filter.sortField="budget"):(e.filter.sort=null,e.filter.sortField=null),a()},e.receiveTask=function(e){t.acceptTask(e).then(function(t){t.data.success?i.path("/show/receiveTaskSuc/"+e):n.openMsgDialog({msg:t.data.msg})})},a(),e.getDate=function(e){var t=/-/g;return e.replace(t,".")},e.clearFilter=function(){e.filter={pageSize:10,pageNo:1},e.ongonging=!1,e.isOfficialTask=!1,e.startDate="",a()},e.hasTaskFilter=function(){var t=e.filter;t.startDate||t.isStart||t.status?e.taskFilter=!0:e.taskFilter=!1}}]),angular.module("show.task.receive.suc",[]),angular.module("show.task.receive.suc").controller("ReceiveTaskSucController",["$scope","orderService","$routeParams","$location","taskService",function(e,t,i,n,a){e.childCat="task",t.getRecommand().then(function(t){e.selectTasks=t.data.list.splice(0,4)}),t.getOrderDetail(i.taskId).then(function(t){e.order=t.data.obj}),e.receiveTask=function(){t.acceptTask(i.taskId).then(function(e){e.data.success?n.path("/show/receiveTaskSuc/"+i.taskId):ModalService.openMsgDialog({msg:e.data.msg})})},e.promoteTask=function(){a.promoteTask(e.order.id)}}]),angular.module("show.task",["show.task.list","show.task.detail","show.task.receive.suc","services.order"]),angular.module("visitorXq",["services.visitor"]),angular.module("visitorXq").controller("VisitorXqCtrl",["$rootScope","$http","$scope","showService","$location","$routeParams","visitorService","ModalService",function(e,t,i,n,a,s,o,r){i.childCat="visitor",i.pageNo=1,i.pageSize=16,i.serverTag=[],i.cateTag=[],i.payTag=[],i.userId=s.id,i.qqAction="QQ号：",i.getUserDetail=function(){o.getVisitorMsg(i.userId).then(function(e){i.visitorMsg=e.data.obj,null===i.visitorMsg.tel&&i.visitorMsg.phone?i.visitorMsg.tel=i.visitorMsg.phone:i.visitorMsg.tel&&i.visitorMsg.phone&&(i.visitorMsg.tel=i.visitorMsg.phone);var t=e.data.obj.tagList;if(t)for(var n=0;n<t.length;n++)"province"===t[n].type?i.serverTag.push({tagId:t[n].tagId,name:t[n].name}):"company_industry"===t[n].type?i.cateTag.push({tagId:t[n].tagId,name:t[n].name}):"payType"===t[n].type&&i.payTag.push({tagId:t[n].tagId,name:t[n].name});i.visitorMsg.headImg&&(0===i.visitorMsg.headImg.indexOf("http://")?i.visitorMsg.headImg=i.visitorMsg.headImg:i.visitorMsg.headImg=PREFIX_FILE_HOST+i.visitorMsg.headImg),null===i.visitorMsg.qq&&(i.qqAction="",$(".qq").addClass("hui"),i.visitorMsg.qq="该秀客没有留下QQ号"),null===i.visitorMsg.tel&&($(".phone").addClass("hui"),i.visitorMsg.tel="该秀客没有留下电话号码"),null===i.visitorMsg.wechat&&($(".weixin").addClass("hui"),i.visitorMsg.wechat="该秀客没有留下微信号")})},i.getUserDetail(),i.totalItems=0,i.currentPage=1,i.getUserWorks=function(){o.getVisitorMesList(i.userId,i.pageNo,i.pageSize).then(function(e){i.visitorWorks=e.data.list,i.totalItems=e.data.map.count,i.toPage=e.data.map.pageNo;for(var t=0;t<i.visitorWorks.length;t++)i.visitorWorks[t].headImg?0===i.visitorWorks[t].headImg.indexOf("http://")?i.visitorWorks[t].headImg=i.visitorWorks[t].headImg:i.visitorWorks[t].headImg=PREFIX_FILE_HOST+i.visitorWorks[t].headImg:i.visitorWorks[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})},i.getUserWorks(),i.pageChanged=function(e){return i.pageNo=e,e<1||e>i.totalItems/16+1?void r.openMsgDialog({msg:"此页超出范围"}):void i.getUserWorks(i.userId,e,i.pageSize)}}]),angular.module("visitor",["services.visitor"]),angular.module("visitor").controller("VisitorCtrl",["$rootScope","$http","$scope","showService","$location","usercenterService","visitorService","ModalService",function(e,t,i,n,a,s,o,r){i.childCat="visitor",i.visitorId="12",i.pageNo=1,i.pageSize=12,i.visitorXq=function(e){a.path("/show/visitor/"+e)};var l=function(e){s.getAPPlyMessage(e).then(function(t){"province"===e?i.serverLabel=t.data.list:"company_industry"===e?i.cateLabel=t.data.list:"payType"===e&&(i.payLabel=t.data.list)})};l("province"),l("company_industry"),l("payType"),i.getLimitedServeRegion=function(e){return i.serverLabel.indexOf(e)<8},i.getOtherServeRegion=function(e){return i.serverLabel.indexOf(e)>=8&&(i.moreArea=!0),i.serverLabel.indexOf(e)>=8},i.getLimitedCateRegion=function(e){return i.cateLabel.indexOf(e)<11},i.getOtherCateRegion=function(e){
return i.cateLabel.indexOf(e)>=11&&(i.moreLabel=!0),i.cateLabel.indexOf(e)>=11};o.getRecommendVisitor().then(function(e){if(i.recommendVisitor=e.data.obj,i.recommendVisitor.represent1){var t=i.recommendVisitor.represent1,n=t.substring(0,t.indexOf("_")),a=t.substring(t.indexOf("_")+1,t.length);i.work1Code=n,i.work1Name=a}if(i.recommendVisitor.represent2){var s=i.recommendVisitor.represent2,o=s.substring(0,s.indexOf("_")),r=s.substring(s.indexOf("_")+1,s.length);i.work2Code=o,i.work2Name=r}if(i.recommendVisitor.represent3){var l=i.recommendVisitor.represent3,c=l.substring(0,l.indexOf("_")),d=l.substring(l.indexOf("_")+1,l.length);i.work3Code=c,i.work3Name=d}i.recommendVisitor.headImg&&(0===i.recommendVisitor.headImg.indexOf("http://")?i.recommendVisitor.headImg=i.recommendVisitor.headImg:i.recommendVisitor.headImg=PREFIX_FILE_HOST+i.recommendVisitor.headImg)});var c={pay:null,addr:null,good:null};i.serverAll="all",i.cateAll="all",i.payAll="all",i.serverWu=function(e,t){i[t]="all","province"===e?(c.addr=null,i.currentServer=null):"company_industry"===e?(c.good=null,i.currentCate=null):"payType"===e&&(c.pay=null,i.currentPay=null),d(c.addr,c.pay,c.good,i.pageNo,i.pageSize)},i.subServer=function(e){i.currentServer=e,i.serverAll=null,c.addr=e.id,d(c.addr,c.pay,c.good,i.pageNo,i.pageSize)},i.subLabel=function(e){i.currentCate=e,i.cateAll=null,c.good=e.id,d(c.addr,c.pay,c.good,i.pageNo,i.pageSize)},i.subPay=function(e){i.currentPay=e,i.payAll=null,c.pay=e.id,d(c.addr,c.pay,c.good,i.pageNo,i.pageSize)},i.totalItems=0;var d=function(){o.getVisitorList(c.addr,c.pay,c.good,i.pageNo,i.pageSize).then(function(e){i.visitorList=e.data.list,i.totalItems=e.data.map.count,i.currentPage=e.data.map.pageNo,i.toPage=e.data.map.pageNo;for(var t=0;t<i.visitorList.length;t++){if(i.visitorList[t].represent1){var n=i.visitorList[t].represent1,a=n.substring(0,n.indexOf("_")),s=n.substring(n.indexOf("_")+1,n.length);i.visitorList[t].represent1Code=a,i.visitorList[t].represent1Name=s}if(i.visitorList[t].represent2){var o=i.visitorList[t].represent2,r=o.substring(0,o.indexOf("_")),l=o.substring(o.indexOf("_")+1,o.length);i.visitorList[t].represent2Code=r,i.visitorList[t].represent2Name=l}if(i.visitorList[t].represent3){var c=i.visitorList[t].represent3,d=c.substring(0,c.indexOf("_")),p=c.substring(c.indexOf("_")+1,c.length);i.visitorList[t].represent3Code=d,i.visitorList[t].represent3Name=p}i.visitorList[t].headImg&&(0===i.visitorList[t].headImg.indexOf("http://")?i.visitorList[t].headImg=i.visitorList[t].headImg:i.visitorList[t].headImg=PREFIX_FILE_HOST+i.visitorList[t].headImg)}})};d(),i.pageChanged=function(e){return i.pageNo=e,e<1||e>i.totalItems/12+1?void r.openMsgDialog({msg:"此页超出范围"}):void d(c,e,i.pageSize)}}]),angular.module("app.upgrade",["service.upgradeAccount","angularEffects","services.usercenter"]),angular.module("app.upgrade").controller("upgradeController",["$scope","$modal","$location","security","usercenterService","upgradeAccountService","ModalService","$rootScope","$routeParams",function(e,t,i,n,a,s,o,r,l){e.versionType=l.versionType;var c=["basis","standard","advanced"],d=c.indexOf(e.versionType)===-1?0:c.indexOf(e.versionType);e.upgradeFlag=!0,e.title="企业版本升级","/xdBuy"===i.path()&&(e.upgradeFlag=!1,e.XDCount=500,e.XDPayMoney=500,e.buyBtnValue="立即购买",e.title="购买秀点");var p=function(t){e.currentUser=n.currentUser,e.nickname=n.currentUser.nick,e.username=n.currentUser.loginName,e.loginFlag=!0,e.upgradeFlag&&s.buyBtnValueFunc(e)},u=function(t){e.version=t.version,e.payMoney=t.money,e.memberType=t.memberType},h=function(){e.nickname="您当前处于未登录状态，赶快去登录吧！",e.buyBtnValue="立即购买",e.username="",e.loginFlag=!1,e.disBuyTip="",e.disBuyFlag=!1};e.showChangVersionFlag=!1,e.versionList=[{version:"企业基础版",money:"3000",memberType:7},{version:"企业标准版",money:"6800",memberType:8},{version:"企业高级版",money:"15600",memberType:9}],e.infoList={7:{title:"企业基础版版本优势",infoDetail:[{title:"海量企业专属样例",image:"advantage",info:"分类更全面<br />定位更准确<br />设计更专业<br />效果更炫酷"},{title:"价值4100元基础特权",image:"4100",info:"赠送10个企业子账号<br />赠送10次去Logo底标（之后8折）<br />赠送100次场景保障服务<br />免费场景域名绑定"},{title:"企业专属CDN加速",image:"CDN",info:"CDN加速，让场景浏览更畅快"},{title:"精准访问数据分析",image:"visit",info:"获取访客来源数据，指导精准锁定投放渠道<br />实时监控访客数量，随时了解H5页面的曝光率和<br />点击量，锁定最佳投放时间"}]},8:{title:"企业标准版版本优势",infoDetail:[{title:"海量企业专属样例",image:"advantage",info:"分类更全面<br />定位更准确<br />设计更专业<br />效果更炫酷"},{title:"价值12700元标准特权",image:"12700",info:"赠送50个子账号<br />赠送50次去Logo底标（之后8折）<br />赠送200次场景保障服务<br />免费场景域名绑定"},{title:"企业专属CDN加速",image:"CDN",info:"CDN加速，让场景浏览更畅快"},{title:"深度访问及分享数据分析",image:"visit",info:"访问深度分析，掌控用户浏览习惯，直观H5页面引爆点<br />访客画像分析，协助优化营销设计，并制定推广策略<br />分享去向分析，有效评估用户体验，监控转发习惯<br />"}]},9:{title:"企业高级版版本优势",infoDetail:[{title:"海量企业专属样例",image:"advantage",info:"分类更全面<br />定位更准确<br />设计更专业<br />效果更炫酷"},{title:"价值39000元高级特权",image:"39000",info:"赠送100个企业子账号<br />赠送200次去Logo底标（之后8折）<br />赠送300次场景保障服务<br />免费场景域名绑定"},{title:"企业专属CDN加速",image:"CDN",info:"CDN加速，让场景浏览更畅快"},{title:"高级访问及分享数据分析",image:"visit",info:"传播层级分析，让传播路径和传播深度一目了然<br />访客行为分析，支持深度的用户洞察，有效触达目标群体"}]}},u(e.versionList[d]),n.currentUser?p(n.currentUser):h(),e.changeAccount=function(){t.open({windowClass:"console accountDlg",templateUrl:"upgrade/accountDlg.tpl.html",controller:"accountDlgCtrl"})},e.toLogin=function(){n.showLogin(i.path())},e.buy=function(){return e.loginFlag?e.upgradeFlag?1===e.currentUser.type?void t.open({windowClass:"console updateDlg",templateUrl:"upgrade/updateDlg.tpl.html",controller:"updateDlgCtrl"}):void s.upgradeAccountFunc(e.memberType):(e.userXd=0,void t.open({windowClass:"console",templateUrl:"usercenter/buyXd.tpl.html",controller:"BuyXdController",resolve:{getUserXd:function(){return function(){e.getUserXd(),r.$broadcast("buyXd")}}}})):void n.showLogin(i.path())},e.changeVersion=function(){e.showChangVersionFlag=!e.showChangVersionFlag},e.selectVersion=function(t,n){e.version=n.version,e.payMoney=n.money,e.memberType=n.memberType,s.buyBtnValueFunc(e),e.changeVersion(),i.path("/upgrade/"+c[n.memberType-7])},e.$on("toAppUpgrade",function(e,t){p(t)}),e.$on("toAppUpgradeLogout",function(){h()})}]).controller("accountDlgCtrl",["$scope","$location","security",function(e,t,i){e.cancel=function(){e.$dismiss()},e.confirm=function(){e.$close(),i.logout(null,!0)}}]).controller("updateDlgCtrl",["$scope","$location","$modal","security","upgradeAccountService",function(e,t,i,n,a){e.cancel=function(){e.$dismiss()},e.confirm=function(){e.$close(),a.upgradeAccountFunc()}}]).controller("buyRefuseDlgCtrl",["$scope","$location","$modal","security","upgradeAccountService","usercenterService","$rootScope","type",function(e,t,i,n,a,s,o,r){e.memberType=r,n.currentUser.nick&&n.currentUser.loginName?e.infoName=n.currentUser.nick+"("+n.currentUser.loginName+")":e.infoName=n.currentUser.nick||n.currentUser.loginName,e.memberType&&a.buyBtnValueFunc(e),e.cancel=function(){e.$dismiss()},e.changeAccount=function(){e.$close(),n.logout(null,!0)},e.continueBuy=function(){if(e.memberType)s.upgradeVersionService(e,e.memberType,!0);else{var t=function(){return function(){s.getUserXd().then(function(t){e.userXd=t.data.obj||0}),o.$broadcast("buyXd")}};s.xdBuyService(e,t,!0)}}}]),angular.module("userCenter.add.branch",[]),angular.module("userCenter.add.branch").controller("addBranchController",["$scope","usercenterService","ModalService","validateService",function(e,t,i,n){e.user={},e.confirm=function(){e.nameError=n.checkName(e.user),e.nameError||(e.nameError="",t.addBranch(e.user).then(function(n){n.data.success?(i.openMsgDialog({msg:"站内信已发送至会员"+e.user.loginName+"信箱中，请及时通知会员确认，该邀请24小时内有效。",btn:"我知道了"}),e.$close()):110006===n.data.code?i.openConfirmDialog({msg:n.data.msg,confirmName:"购买子账号"},function(){t.buyBranchDlg(e)}):i.openMsgDialog({msg:n.data.msg})}))},e.cancel=function(){e.$dismiss()}}]),angular.module("userCenter.add.department",[]),angular.module("userCenter.add.department").controller("AddDepartmentCtrl",["$scope","usercenterService","i18nNotifications","department","ModalService",function(e,t,i,n,a){e.dept={},e.deptList=n.list,e.originDeptList=angular.copy(n.list),n&&n.currentDpt?(e.title="修改部门",e.dept=n.currentDpt):e.title="添加部门",e.checkDeptFormat=function(t){var i=e.originDeptList.some(function(t,i,n){return t.name===e.dept.name}),n=function(t){return e.deptFormatError=t,!1};return t.name?i?n("部门名称重复，请重新输入！"):countCharacters(t.name)>30?n("部门名称不能超过30个字符"):(e.deptFormatError="",!0):n("请输入部门名称！")},e.confirm=function(){if(e.checkDeptFormat(e.dept)){var s={};n&&n.currentDpt&&(s.id=e.dept.id),s.name=e.dept.name,t.addDept(s).then(function(t){if(t.data.success){if(n&&!n.currentDpt)return e.deptList.unshift({id:t.data.obj,name:e.dept.name}),i.pushForCurrentRoute("dept.create.success","notify.success"),void e.$close(e.deptList);i.pushForCurrentRoute("dept.edit.success","notify.success"),e.$close(e.deptList)}else a.openMsgDialog({msg:t.data.msg})})}},e.cancel=function(){e.$close(e.deptList)}}]),angular.module("usercenter.branch",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.branch").controller("BranchCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","branch","diaTitle","i18nNotifications","validateService",function(e,t,i,n,a,s,o,r,l,c,d,p,u){t.originData=t.branch=angular.copy(c),t.diaTitle=angular.copy(d),t.dept={},t.depts=[],t.resetDefalt=!1;var h;c?t.resetDefalt=!0:(t.resetDefalt=!1,setTimeout(function(){$("button").css("background-color","#ccc")},0),t.branch={}),t.openResetModal=function(e){o.open({windowClass:"console six-contain",templateUrl:"usercenter/console/resetbranchpass.tpl.html",controller:"ResetBranchPassCtrl",resolve:{branch:function(){return e}}}).result.then(function(){t.resetDefalt=!1,p.pushForCurrentRoute("branch.reset.success","notify.success")})},t.$on("department",function(){t.getDepts()}),t.getDepts=function(){a.getDepts().then(function(e){t.depts=e.data.list,h()})},t.getDepts(),h=function(){if(t.branch.deptId){for(var e=0;e<t.depts.length;e++)if(t.depts[e].id===t.branch.deptId)return void(t.branch.dept=t.depts[e])}else t.branch.dept=null},t.selectDep=function(e){angular.isObject(e)?t.branch.deptId=e.id:t.branch.deptId=e,h()},t.manageDepartment=function(){o.open({windowClass:"console six-contain",templateUrl:"usercenter/console/manageDepartment.tpl.html",controller:"ManageDepartmentCtrl",resolve:{depts:function(){return{list:t.depts,current:t.branch.deptId}}}}).result.then(function(e){if(e){if(t.branch.deptId=e.currentDept,e.currentDept&&!e.changeDep)return void h();t.getDepts()}},function(e){e&&(e.dep||e.changeDept)&&(e.changeDept&&(t.branch.deptId=e.currentDept),t.getDepts())})},t.scenePermi=[{name:"新建场景",permit:1201,check:!0},{name:"复制场景",permit:1203,check:!0},{name:"删除场景",permit:1204,check:!0},{name:"赠予场景",permit:1205,check:!0}],t.spreadPermi=[{name:"分享推广",permit:1301,check:!0},{name:"效果统计",permit:1302,check:!0},{name:"数据查看",permit:1303,check:!0},{name:"数据下载",permit:1304,check:!0},{name:"数据删除",permit:1305,check:!0}],t.customerPermi=[{name:"查看客户",permit:1101,check:!0},{name:"添加客户",permit:1102,check:!0},{name:"删除客户",permit:2,check:!0},{name:"编辑客户",permit:1,check:!0},{name:"下载客户",permit:3,check:!0}],t.userPermi=[{name:"购买秀点",permit:1401,check:!0},{name:"赠送秀点",permit:1402,check:!0},{name:"开具发票",permit:1403,check:!0},{name:"绑定账号",permit:1404,check:!0},{name:"查看部门内其他账号内容",permit:1405,check:!0},{name:"编辑基本信息",permit:1406,check:!0},{name:"共享免费使用样例次数",permit:1407,check:!0},{name:"共享去底标和尾页次数",permit:1408,check:!0},{name:"共享自定义加载Logo次数",permit:1409,check:!0},{name:"启用场景保障服务",permit:1410,check:!0},{name:"启用自定义域名",permit:1411,check:!0}],t.sceneAllPro={check:!0},t.spreadAllPro={check:!0},t.customerAllPro={check:!0},t.userAllPro={check:!0},t.productSelect=function(e,i){""+e.permit=="1203"&&e.check&&(t.scenePermi[0].check=!0),e.check||("1201"===e.permit&&(t.scenePermi[1].check=!1),t[i+"AllPro"].check=!1)},t.produceAll=function(e,i){for(var n=t[i+"Permi"],a=0;a<n.length;a++)n[a].check=e.check};var g,m=[];if(m=t.scenePermi.concat(t.spreadPermi).concat(t.customerPermi).concat(t.userPermi),c)if(t.branch.extPermi){g=t.branch.extPermi.split(",");for(var f=0;f<m.length;f++)m[f].check=!1,$.each(g,function(e,t){""+t==""+m[f].permit&&(m[f].check=!0)});$.each(t.scenePermi,function(e,i){if(!i.check)return t.sceneAllPro.check=!1,!1}),$.each(t.spreadPermi,function(e,i){if(!i.check)return t.spreadAllPro.check=!1,!1}),$.each(t.customerPermi,function(e,i){if(!i.check)return t.customerAllPro.check=!1,!1}),$.each(t.userPermi,function(e,i){if(!i.check)return t.userAllPro.check=!1,!1})}else t.sceneAllPro.check=!1,t.spreadAllPro.check=!1,t.customerAllPro.check=!1,t.userAllPro.check=!1,$.each(m,function(e,t){t.check=!1});t.checkBranchName=function(){var e=u.checkAccountName(t.branch.loginName);return t.branchNameError=e,!e},t.checkPassword=function(){var e=u.checkPassword(t.branch.password);return t.passFormatError=e,!e},t.checkNameFormat=function(){var e=u.checkName(t.branch.name);return t.nameFormatErr=e,!e},t.confirm=function(){if(t.checkBranchName()&&t.checkNameFormat()){var e={};t.branch.dept?(t.branch.deptName=t.branch.dept.name,t.branch.dept.id&&(e.deptId=t.branch.deptId=t.branch.dept.id)):t.branch.deptName=null;var i=[];$.each(m,function(e,t){t.check&&i.push(t.permit)}),t.branch.extPermi=i.join(","),c?($.extend(e,{id:t.branch.id,name:t.branch.name,extPermi:t.branch.extPermi}),a.updateBranch(e).then(function(e){e.data.success&&(t.$close(t.branch),p.pushForCurrentRoute("branch.update.success","notify.success"))},function(){t.serverError="服务器异常！"})):($.extend(e,{loginName:t.branch.loginName,name:t.branch.name,extPermi:t.branch.extPermi}),a.createBranch(e).then(function(e){e.data.success?(t.branch.id=e.data.obj.id,p.pushForCurrentRoute("branch.create.success","notify.success"),t.$close(t.branch)):1006===e.data.code?r.openMsgDialog({msg:"该账号已存在，请重新录入！",btn:"返回"}):t.$dismiss(e.data)},function(){t.serverError="服务器异常"}))}},t.cancel=function(){var e=!1;t.branch.dept||(t.branch.deptName=null,e=!0),t.$dismiss(e)}}]),angular.module("usercenter.checkMobil",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.checkMobil").controller("CheckMobileCtrl",["$rootScope","$scope","$window","usercenterService","$modal","ModalService","$location","$timeout","userinfo","i18nNotifications",function(e,t,i,n,a,s,o,r,l,c){function d(){0===p?(t.isCodeAccessiable=!1,t.codeTip="获取验证码",p=60):(t.isCodeAccessiable=!0,t.codeTip="重新发送("+p+")",r(function(){p--,d()},1e3))}switch(config.product="popup",t.title=l.title,t.userinfo=l,t.userinfo.code="",t.title){case"绑定手机":t.dec="绑定手机，确保账号安全";break;case"手机验证":t.dec="正确验证手机号";break;case"修改手机号":t.dec="修改为常用手机号，保证账号安全"}t.checkMobile=function(){return/^1\d{10}$/.test(t.userinfo.phone)?(t.mobileError="",!0):($(".mobile").focus(),t.mobileError="请填写正确的手机号",!1)},t.checkCode=function(){return t.userinfo.code?(t.codeError="",!0):($(".code").focus(),t.codeError="验证码不能为空",!1)},t.showImageCode=function(){challenge&&validate&&seccode&&t.getCode()},t.getCode=function(){if(t.userinfo.phone){t.mobileError="";var e={phone:t.userinfo.phone,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};n.relMobileCode(e).then(function(e){challenge="",validate="",seccode="",e.data.success?d():t.codeError=e.data.msg})}else t.mobileError="请先输入手机号码才能验证！",$(".mobile").focus()};var p=60;t.relAccount=function(){t.checkMobile()&&t.checkCode()&&(t.mobileError="",t.codeError="",n.relMobile(t.userinfo.phone,t.userinfo.password,t.userinfo.code).then(function(e){e.data.success?s.openMsgDialog({msg:e.data.msg},function(){t.$close(t.userinfo.phone)}):t.relErr=e.data.msg}))},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.companyinfo",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.companyinfo").controller("companyInfoCtrl",["$scope","$modal","userinfo","usercenterService","i18nNotifications",function(e,t,i,n,a){e.companyUserInfo={},e.companyUserInfo.nick=i.nick,e.companyUserInfo.name=i.name,e.type=i.type,2===i.type?e.contactName="企业名称":5===i.type?e.contactName="组织名称":e.contactName="昵称";var s=function(){n.getCompanyInfo().then(function(t){e.companyUserInfo=t.data.obj,!e.companyUserInfo.name&&e.companyUserInfo.nick&&(e.companyUserInfo.name=e.companyUserInfo.nick)})};e.checkEmail=function(t){var i=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return t.email&&!i.test(t.email)?(e.authError="请正确填写邮箱",!1):(e.authError="",!0)},e.checkAdress=function(t){return countCharacters(t.address)>50?(e.authError="联系地址不能超过50个字符",!1):(e.authError="",!0)};var o=function(t){return t.name?(e.authError="",!0):(e.authError="请填写昵称",!1)};2===e.type&&(s(),e.title="企业会员基本信息"),1===e.type&&(e.title="个人用户基本信息"),3===e.type&&(e.title="高级用户基本信息"),21===e.type&&(e.title="子账号基本信息"),5===e.type&&(s(),e.title="公共账号基本信息"),e.saveUserInfo=function(t){t.id=i.id,t.nick=t.name,n.saveUserInfo(t).then(function(i){i.data.success&&(e.$close(t),a.pushForCurrentRoute("save.success","notify.success"))})},e.saveCompanyInfo=function(t){var s=!1;return!!(e.checkEmail(t)&&e.checkAdress(t)&&o(t))&&(t.id=i.id,t.nick=t.name,void(5===e.type?n.savePublicInfo(t).then(function(i){i.data.success?(a.pushForCurrentRoute("account.success","notify.success"),e.$close(t)):e.codeError=i.data.msg}):n.saveCompanyInfo(t,s).then(function(i){i.data.success?(a.pushForCurrentRoute("account.success","notify.success"),e.$close(t)):e.codeError=i.data.msg})))},e.cancel=function(){e.$close()},e.invoice=function(){t.open({windowClass:"six-contain",templateUrl:"usercenter/console/invoice.tpl.html",controller:"InvoiceCtrl",scope:e,resolve:{userinfo:function(){return{}}}})}}]),angular.module("invitation",["app.directives.copyButton"]),angular.module("invitation").controller("InvitationCtrl",["security","$scope","usercenterService","$timeout","ModalService","i18nNotifications",function(e,t,i,n,a,s){t.tabid="email",t.showUrl=PREFIX_HOST+"/#/home/register?u="+e.currentUser.id,t.url="我做的企业秀，用的是易企秀，免费好用，你试试吧：\r\n"+PREFIX_HOST+"/#/home/register?u="+e.currentUser.id,t.sendEmail=function(e){!t.emailFormatErr&&e&&i.sendEmail({email:e}).then(function(e){e.data.success?s.pushForCurrentRoute("invitation.sendemail.success","notify.success"):s.pushForCurrentRoute("invitation.sendemail.error","notify.warning")})},t.checkEmailFormat=function(e){var i=/^([a-zA-Z0-9]+[_|\_|\.|-]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[\.|-]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;i.test(e)?t.emailFormatErr="":t.emailFormatErr="邮件格式不正确"}}]),angular.module("usercenter.invoicelist",[]).controller("GetInvoiceListCtrl",["$scope","usercenterService","$modal","ModalService","$location",function(e,t,i,n,a){e.pageNo=1,e.pageSize=5,e.obj={};var s=[],o=function(e,i){t.getInvoiceList(e,i)};o(1,5),e.$on("get.invoice.list",function(t,i){e.invoiceList=i.list||[];for(var n=0;n<i.list.length;n++)e.invoiceList[n].totalFee=e.invoiceList[n].totalFee/100,i.list[n].payType?1===i.list[n].payType?e.invoiceList[n].payType="支付宝支付":2===i.list[n].payType?e.invoiceList[n].payType="银联支付":3===i.list[n].payType&&(e.invoiceList[n].payType="其他"):e.invoiceList[n].payType="微信支付";e.totalItems=i.map.count,e.currentPage=e.obj.toPage=i.map.pageNo}),e.pageChanged=function(i){return i<1||i>e.totalItems/5+1?void n.openMsgDialog({msg:"此页超出范围"}):(t.getInvoiceList(i,e.pageSize),e.selectAll.selected=!1,void e.switchSelectAll())},e.cancel=function(){e.$dismiss(),"/upgrade/"===a.path().substring(0,9)&&a.path("/usercenter/member")},e.view=!0,e.ok=function(){var t=angular.copy(s);t.length>0?i.open({windowClass:"six-contain",templateUrl:"usercenter/console/invoice.tpl.html",controller:"InvoiceCtrl",scope:e,resolve:{userinfo:function(){return{view:e.view,orderIds:t}}}}).result.then(function(t){t&&(o(1,5),e.selectAll.selected=!1,s=[])}):n.openMsgDialog({msg:"请选择需要开发票的订单列表",btn:"去选择"},function(){})},e.selectAll={selected:!1},e.switchSelectAll=function(){s=[];for(var t=0;t<e.invoiceList.length;t++)e.invoiceList[t].selected=e.selectAll.selected,e.selectAll.selected&&s.push(e.invoiceList[t].id)},e.switchSelect=function(t){t.selected?s.push(t.id):(e.selectAll.selected=!1,$.each(s,function(e,i){i===t.id&&s.splice(e,1)}))}}]),angular.module("usercenter.invoice",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.invoice").controller("InvoiceCtrl",["$scope","$rootScope","usercenterService","$modal","i18nNotifications","userinfo","ModalService",function(e,t,i,n,a,s,o){e.invoiceStatus="",e.changeType=function(t){e.invoiceStatus=t},e.editInfo={isEditable:!0},s.view&&(e.view=s.view,e.editInfo.isEditable=!1,s.orderIds=s.orderIds.join(","));var r=[];e.authError="",e.picture={},e.puPicture={},e.invoice={receiver:"",phone:"",address:""},e.reset=function(){e.editInfo.isEditable=!0},e.invoiceListPu={invoiceType:1},e.invoiceListzhuan={invoiceType:2};var l=function(){i.getUserInvoice().then(function(t){if(200===t.data.code){t.data.obj&&(e.invoice=t.data.obj),t.data.map.invoiceType?e.invoiceStatus=t.data.map.invoiceType:e.invoiceStatus=1;for(var i=t.data.list,n=0;n<i.length;n++)1===i[n].invoiceType?e.invoiceListPu=i[n]:2===i[n].invoiceType&&(e.invoiceListzhuan=i[n],r=i[n].licenseImgsJson.split(","),e.picture={},4===r.length?(e.picture.people=r[2],e.picture.mes=r[3]):(e.picture.people=r[0],e.picture.mes=r[1]))}})};l(),e.addPictures=function(t){n.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,count:1}}}}).result.then(function(i){"people"!==t&&"mes"!==t||(e.picture[t]=i.data),a.pushForCurrentRoute("upload.success","notify.success")})};var c=function(){return e.picture.people?!!e.picture.mes||(t.$broadcast("error","请上传开票信息加盖公章"),!1):(t.$broadcast("error","请上传一般纳税人资质证明"),!1)};e.$on("error",function(t,i){o.openConfirmDialog({msg:i,confirmName:"立即更新",cancelName:"取消"},function(){e.reset()})}),e.$on("error2",function(e,t){o.openMsgDialog({msg:t})}),e.submit=function(n){if(!e.invoice.receiver)return void t.$broadcast("error","请填写收件人");if(!e.invoice.phone)return void t.$broadcast("error","请填写联系电话");if(!e.invoice.address)return void t.$broadcast("error","请填写收货地址");if(n={orderIds:s.orderIds,receiver:e.invoice.receiver,address:e.invoice.address,phone:e.invoice.phone},1===e.invoiceStatus)n.invoiceType=1,n.title=e.invoiceListPu.title;else if(2===e.invoiceStatus){if(!c())return!1;n.invoiceType=2,n.title=e.invoiceListzhuan.title,n.taxId=e.invoiceListzhuan.taxId,n.licenseImgsJson=e.picture.people+","+e.picture.mes}else 3===e.invoiceStatus&&(n.invoiceType=3);i.saveOrderInvoice(n).then(function(i){i.data.success?(e.$close(n),a.pushForCurrentRoute("save.success","notify.success")):t.$broadcast("error",i.data.msg)})},e.saveUserInvoice=function(n){if(!e.invoice.receiver)return void t.$broadcast("error2","请填写收件人");if(!e.invoice.phone)return void t.$broadcast("error2","请填写联系电话");if(!e.invoice.address)return void t.$broadcast("error2","请填写收货地址");if(n={},n.invoiceDeliver={receiver:e.invoice.receiver,address:e.invoice.address,phone:e.invoice.phone},n.invoiceList=[],e.invoiceListPu.title){var o={invoiceType:e.invoiceListPu.invoiceType,title:e.invoiceListPu.title};n.invoiceList.push(o)}if(e.invoiceListzhuan.title){if(!e.picture.people)return void t.$broadcast("error2","请上传一般纳税人资质证明");if(!e.picture.mes)return void t.$broadcast("error2","请上传开票信息加盖公章");var r={invoiceType:e.invoiceListzhuan.invoiceType,title:e.invoiceListzhuan.title,licenseImgsJson:e.picture.people+","+e.picture.mes};n.invoiceList.push(r)}i.saveUserInvoice(n).then(function(t){t.data.success&&(e.authError="",s.view?e.editInfo.isEditable=!1:e.$close(n),a.pushForCurrentRoute("save.success","notify.success"))})},e.cancel=function(){e.$close()}}]),angular.module("userCenter.department",[]),angular.module("userCenter.department").controller("ManageDepartmentCtrl",["$scope","$rootScope","$modal","depts","usercenterService","ModalService","i18nNotifications",function(e,t,i,n,a,s,o){e.depts=n.list,e.currentDept=n.current,e["delete"]=function(t,i,n){t.stopPropagation(),s.openConfirmDialog({msg:"确定删除当前部门"},function(){a.deleteDepartment(i).then(function(t){t.data.success?(e.depts.splice(n,1),e.currentDept===i&&(e.currentDept=null,e.changeDept=!0),o.pushForCurrentRoute("dept.del.success","notify.success")):s.openMsgDialog({msg:t.data.msg})})})};var r=!1;e.setDepartment=function(t){i.open({windowClass:"console six-contain",templateUrl:"usercenter/console/addDepartment.tpl.html",controller:"AddDepartmentCtrl",resolve:{department:function(){return{currentDpt:t,list:e.depts}}}}).result.then(function(t){t&&(r=!0,e.depts=t)})},e.selectDept=function(t){if(t){e.currentDept=t;for(var i=e.depts.length,n=0;n<i;n++)e.depts[n].selectDep=!1,e.depts[n].id===t&&(e.depts[n].selectDep=!0)}},n.current&&e.selectDept(n.current),e.confirm=function(){var t={};t.currentDept=e.currentDept,r&&(t.changeDep=!0),e.$close(t)},e.cancel=function(){var t={dep:r,changeDept:e.changeDept};e.$dismiss(t)}}]),angular.module("usercenter.relAccount",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relAccount").controller("RelAccountCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications",function(e,t,i,n,a,s,o,r,l,c,d){t.user=c,t.bindAccount=function(){return t.user.email?t.user.password?void a.relAccount(c.id,t.user.email,t.user.password).then(function(e){if(200===e.data.code){d.pushForCurrentRoute("email.save.success","notify.success"),/qq/gi.test(t.user.loginName)&&(t.relType="qq"),/weixin/gi.test(t.user.loginName)&&(t.relType="weixin"),/weibo/gi.test(t.user.loginName)&&(t.relType="weibo");var i={type:t.relType,email:angular.copy(t.user.email)};t.$close(i)}else t.relErr=e.data.msg},function(){t.$dismiss()}):(t.relErr="密码不能为空！",void $(".third-pwd").focus()):(t.relErr="登录账号不能为空",void $(".third-name").focus())},t.checkUpperCase=function(){/[A-Z]/g.test(t.user.email)&&(t.user.email=t.user.email.toLowerCase(),t.relErr="请用小写字母邮箱注册，已将邮箱中的大写字母自动转换成小写")},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.relEmail",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relEmail").controller("RelEmailCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications",function(e,t,i,n,a,s,o,r,l,c){switch(t.title=c.title,t.userinfo=c,t.title){case"绑定邮箱":t.dec="绑定保密邮箱";break;case"验证邮箱":t.dec="验证已有账户邮箱";break;case"修改邮箱":t.dec="修改邮箱"}t.checkEmailFormat=function(){var e=/^([a-zA-Z0-9]+[_|\_|\.|-]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[\.|-]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return e.test(t.userinfo.email)?(t.emailFormatErr="",!0):(t.emailFormatErr="请输入正确的邮箱格式",!1)},t.checkPassFormat=function(e){return e.password?(t.passFormatErr="",!0):(t.passFormatErr="密码不能为空！",$(".email-pwd").focus(),!1)},t.relEmail=function(e){t.checkEmailFormat(e)&&t.checkPassFormat(e)&&(null===t.userinfo.checkEmail?t.firstRel=!1:t.firstRel=!0,a.relEmail(t.userinfo.email,t.userinfo.password,t.firstRel).then(function(e){200===e.data.code?(t.relErr="",r.openMsgDialog({msg:"申请绑定成功,已向您的邮箱发送验证邮件,请注意查收。"},function(){t.$dismiss()})):(t.firstRel=!0,t.relErr=e.data.msg)}))},t.checkUpperCase=function(){/[A-Z]/g.test(t.userinfo.email)&&(t.userinfo.email=t.userinfo.email.toLowerCase(),t.relErr="请用小写字母邮箱注册，已将邮箱中的大写字母自动转换成小写")},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.relForum",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relForum").controller("relForumCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications",function(e,t,i,n,a,s,o,r,l,c,d){t.userinfo.bbsId=c.bbsName,t.userinfo.bbsPwd="",t.userinfo.eqxiuPwd="",t.checkBbsName=function(){return t.BbsNameError="",!!t.userinfo.bbsId||(t.BbsNameError="论坛账号不能为空!",!1)},t.checkBbsPassword=function(){return t.bbsPwdError="",!!t.userinfo.bbsPwd||(t.bbsPwdError="论坛密码不能为空！",!1)},t.checkEqxiuPassword=function(){return t.eqxiuPwdError="",!!t.userinfo.eqxiuPwd||(t.eqxiuPwdError="易企秀密码不能为空！",!1)},t.relForum=function(){t.checkBbsName()&&t.checkBbsPassword()&&t.checkEqxiuPassword()&&a.relForum(t.userinfo.bbsId,t.userinfo.bbsPwd,t.userinfo.eqxiuPwd).then(function(e){t.BbsNameError="",t.bbsPwdError="",t.eqxiuPwdError="",200===e.data.code?(d.pushForCurrentRoute("bbs.save.success","notify.success"),t.$close(t.userinfo.bbsId)):1003===e.data.code?t.BbsNameError="论坛账号不存在":1004===e.data.code?t.eqxiuPwdError="易企秀密码错误":110002===e.data.code?t.bbsPwdError="论坛密码不能为空":110203===e.data.code?t.BbsNameError="无效的论坛账号":110205===e.data.code?t.bbsPwdError="论坛账号与论坛密码不匹配":110210===e.data.code?t.eqxiuPwdError="绑定第三方账号失败，请稍候再试！":110306===e.data.code?t.eqxiuPwdError="域名不合法或者IP地址没有绑定！":110229===e.data.code?t.BbsNameError="此论坛账号已被其他用户绑定":t.eqxiuPwdError=e.data.msg})},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.relRegisterAccount",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relRegisterAccount").controller("RelRegisterAccountCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications","localizedMessages",function(e,t,i,n,a,s,o,r,l,c,d,p){t.thirdUser={agreement:!0,id:c.id,loginName:c.thirdLogName};var u=!1;t.cancel=function(){t.$dismiss("cancel")},t.registerAccount=function(){if(t.userNotExist&&t.checkUsername()&&t.checkPassword()&&t.checkRepeatPassword())if(t.thirdUser.password===t.thirdUser.repeatPassword&&t.thirdUser.agreement){if(u)return;u=!0,a.thirdSettingLogName(t.thirdUser.loginName,t.thirdUser.password).then(function(e){u=!1,e.data.success?(d.pushForCurrentRoute("rel.register.account.success","notify.success"),t.$close()):t.relErr=e.data.msg},function(){u=!1,t.regErr=p.get("register.error.serverError",{exception:x}),t.$dismiss()})}else t.thirdUser.password!==t.thirdUser.repeatPassword?t.regErr=p.get("register.error.match"):t.regErr=p.get("register.error.agreement")},t.checkUsername=function(){return/^(?!(?:\d+|\.|@|_|-)$)[\da-zA-Z\.@_-]{6,40}$/.test(t.thirdUser.loginName)?(t.checkUniqueness(t.thirdUser.loginName),!0):(t.usernameError="账号为6-40个字符(英文字母或数字，只支持小写)以及-_@.的组合",!1)},t.checkUniqueness=function(e){s.checkUniquenessNew(e).success(function(e){t.userNotExist=e.success,t.userNotExist?t.usernameError=null:t.usernameError=e.msg})},t.checkPassword=function(){if(t.thirdUser.password){if(/^[a-zA-Z0-9]{6,16}$/g.test(t.thirdUser.password))return t.passError=null,!0;t.passError="密码为6~16个字符(英文字母或数字，区分大小写)"}else t.passError="密码不能为空";return!1},t.checkRepeatPassword=function(){if(t.thirdUser.repeatPassword){if(t.thirdUser.repeatPassword===t.thirdUser.password)return t.rPassError="",!0;t.rPassError="两次密码输入不一致，请重新输入"}else t.rPassError="确认密码不能为空";return!1}}]),angular.module("usercenter.branch.reset",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.branch.reset").controller("ResetBranchPassCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","branch","i18nNotifications",function(e,t,i,n,a,s,o,r,l,c){t.branch=c,t.reset=function(){a.resetBranchPass(c.id)},t.cancel=function(){t.$dismiss()},t.$on("reset.branch.success",function(){t.$close()})}]),angular.module("usercenter.apply",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.apply").controller("ApplyCtrl",["$rootScope","$scope","usercenterService","$modal","ModalService","i18nNotifications","MineService","userinfo","$timeout","security","dataCacheService","$sce","validateService",function(e,t,n,a,s,o,r,l,c,d,p,u,h){function g(){0===M?(t.isCodeAccessiable=!1,t.codeTip="获取验证码",M=60):(t.isCodeAccessiable=!0,t.codeTip="重新发送("+M+")",c(function(){M--,g()},1e3))}config.product="popup";var m="http://api.geetest.com/get.php?callback=initCaptcha&time="+(new Date).getTime();t.validateCodeUrl=u.trustAsResourceUrl(m),
t.applyInfo={},t.applyInfo.nick=l.nick,t.invoiceStat=l.invoice,t.actionerror="";t.serverLabel=[],t.cateLabel=[],t.payLabel=[];var f;t.applyXiuke=!0,t.title=l.title,0===l.status||3===l.status?(f=0,t.applyXiuke=!0):(f=1,t.applyXiuke=!1);var v=function(e){n.getAPPlyMessage(e).then(function(i){"province"===e?(t.serverLabel=i.data.list,i.data.list.length>0&&(t.moreArea=!0)):"company_industry"===e?(t.cateLabel=i.data.list,i.data.list.length>0&&(t.moreLabel=!0)):"payType"===e&&(t.payLabel=i.data.list)})};v("province"),v("company_industry"),v("payType"),t.cancel=function(){t.$dismiss()},t.cate_cancel=function(e){for(var i=0;i<t.cateLabel.length;i++)if(t.cateLabel[i].ischecked=!1,t.cateSelected.length>0)for(var n=0;n<t.cateSelected.length;n++)t.cateLabel[i].id===t.cateSelected[n].id&&(t.cateLabel[i].ischecked=!0);t.cateError="",setTimeout(function(){$(e.target).parents(".dropdown.open").trigger("click")})},t.server_cancel=function(e){for(i=0;i<t.serverLabel.length;i++)if(t.serverLabel[i].ischecked=!1,t.serverSelected.length>0)for(k=0;k<t.serverSelected.length;k++)t.serverLabel[i].id===t.serverSelected[k].id&&(t.serverLabel[i].ischecked=!0);setTimeout(function(){$(e.target).parents(".dropdown.open").trigger("click")}),t.serverError=""},t.scene_cancel=function(e){for(i=0;i<t.myShowScene.length;i++)if(t.myShowScene[i].ischecked=!1,t.sceneSelected.length>0)for(k=0;k<t.sceneSelected.length;k++)t.myShowScene[i].id===t.sceneSelected[k].id&&(t.myShowScene[i].ischecked=!0);setTimeout(function(){$(e.target).parents(".dropdown.open").trigger("click")}),t.sceneError=""},t.checkIntroFormat=function(e){return e.shortIntroduction?countCharacters(e.shortIntroduction)>30?(t.introError="简短介绍不能超过30个字符",!1):(t.introError="",!0):(t.introError="请填写简短介绍",!1)},t.checkIntroFormat1=function(e){return e.introduction?countCharacters(e.introduction)>400?(t.introError1="秀客介绍不能超过400个字符",!1):(t.introError1="",!0):(t.introError1="请填写秀客介绍",!1)},n.getUserScene().then(function(e){e.data.list.length>0?t.myShowScene=e.data.list:t.myShowScene=null});var b=[];t.sceneSelected=[],t.sceneSelect=function(e,i,n){return b=[],angular.forEach(t.myShowScene,function(e){e.ischecked&&b.push({code:e.code,name:e.name})}),3!==b.length?(t.sceneError="请选择三个代表作品",!1):(t.sceneSelected=b,t.sceneNull="",void(n&&(setTimeout(function(){$(i.target).parents(".dropdown.open").trigger("click")}),t.sceneError="")))};var y=function(){return 3!==t.sceneSelected.length?(t.sceneNull="请选择三个代表作品",!1):(t.sceneNull="",!0)},w=[],x=[];t.serverSelected=[],t.serverSubmit=function(e,i,n){return w=[],angular.forEach(t.serverLabel,function(e){e.ischecked&&w.push({name:e.name,id:e.id})}),w.length<=0?void(t.serverError="请选择服务地域"):w.length>3?void(t.serverError="服务地域不能超过3个"):(t.serverSelected=w,void(n&&(setTimeout(function(){$(i.target).parents(".dropdown.open").trigger("click")}),t.serverError="",t.serverNull="")))};var S=function(){return t.serverSelected.length<=0||t.serverSelected.length>3?(t.serverNull="请选择1-3个服务地域",!1):(t.serverNull="",!0)},T=[],C=[];t.cateSelected=[],t.queren=function(e,i,n){return T=[],angular.forEach(t.cateLabel,function(e){e.ischecked&&T.push({name:e.name,id:e.id})}),T.length<=0?void(t.cateError="请选择擅长领域"):T.length>3?void(t.cateError="擅长领域不能超过3个"):(t.cateSelected=T,t.cateNull="",void(n&&(setTimeout(function(){$(i.target).parents(".dropdown.open").trigger("click")}),t.cateError="")))};var E=function(){return t.cateSelected.length<=0||t.cateSelected.length>3?(t.cateNull="请选择1-3个擅长领域",!1):(t.cateNull="",!0)},P=[],I=function(){P=[];var e=!1;return angular.forEach(t.payLabel,function(t){t.ischecked&&(P.push(t.id),e=!0)}),P=P.join(","),e?(t.payError="",!0):(t.payError="请选择支付方式",!1)},_=/^[0-9]*$/;t.checkQQFormat=function(e){return e.qq&&!_.test(e.qq)?(t.qqError="qq填写格式错误",!1):e.qq?(t.qqError="",!0):(t.qqError="请填写QQ号码",!1)};var L=function(e){return e.wechat?(t.wechatError="",!0):(t.wechatError="请填写微信号",!1)};t.checkEmailFormat=function(e){var i=h.checkEmail(e.email);return t.emailError=i,!i},t.checkCode=function(e){return e.code?(t.codeError="",!0):(t.codeError="请输入手机验证码",!1)},t.showPhone=!0,d.currentUser&&1===d.currentUser.checkPhone&&(t.showPhone=!1),t.getImageCode=function(e,i){challenge&&validate&&seccode&&t.getCode(e,i)},t.getCode=function(e,i){if(!e.phone)return t.telError="请填写手机号码",!1;t.telError="";var a={phone:e.phone,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};n.relMobileCode(a,i).then(function(e){challenge="",validate="",seccode="",e.data.success?g():t.telError=e.data.msg})};var M=60;t.checkFormFormat=function(e){return!!(t.checkIntroFormat(e)&&t.checkIntroFormat1(e)&&y()&&S()&&E()&&I()&&t.checkQQFormat(e)&&L(e)&&t.checkEmailFormat(e))},t.submit=function(e){if(t.checkFormFormat(e)){if(!e.phone)return void(t.telError="请填写手机号码");if(t.telError="",d.currentUser&&1!==d.currentUser.checkPhone){if(!e.phone)return void(t.telError="请填写手机号码");if(!e.code)return void(t.codeError="请填写验证码")}for(x=[],C=[],k=0;k<t.cateSelected.length;k++)C.push(t.cateSelected[k].id);for(_cateSelected2=C.join(","),i=0;i<t.serverSelected.length;i++)x.push(t.serverSelected[i].id);_serverSelected2=x.join(",");var a={shortIntroduction:e.shortIntroduction,introduction:e.introduction,represent1:t.sceneSelected[0].code+"_"+t.sceneSelected[0].name,represent2:t.sceneSelected[1].code+"_"+t.sceneSelected[1].name,represent3:t.sceneSelected[2].code+"_"+t.sceneSelected[2].name,qq:e.qq,wechat:e.wechat,phone:e.phone,email:e.email,addr:_serverSelected2||"",pay:P||"",good:_cateSelected2||"",code:e.code,type:f};n.saveApplyInfo(a).then(function(e){e.data.success?(t.applyInfo=e.data.map.status,o.pushForCurrentRoute("visitor.apply","notify.success"),t.$close(t.applyInfo)):t.authError=e.data.msg})}},t.checkFormFormat2=function(e){return!!(t.checkIntroFormat(e)&&t.checkIntroFormat1(e)&&y()&&S()&&E()&&I()&&t.checkQQFormat(e)&&L(e)&&t.checkEmailFormat(e))},t.reset=function(e){if(t.sceneSelect(),t.serverSubmit(),t.queren(),t.checkFormFormat2(e)){if(!e.phone)return void(t.telError="请填写手机号码");if(t.telError="",d.currentUser&&1!==d.currentUser.checkPhone){if(!e.phone)return void(t.telError="请填写手机号码");if(!e.code)return void(t.codeError="请填写验证码")}for(C=[],k=0;k<t.cateSelected.length;k++)C.push(t.cateSelected[k].id);for(_cateSelected2=C.join(","),x=[],i=0;i<t.serverSelected.length;i++)x.push(t.serverSelected[i].id);_serverSelected2=x.join(",");var a={nick:t.applyInfo.nick,shortIntroduction:e.shortIntroduction,introduction:e.introduction,represent1:t.sceneSelected[0].code+"_"+t.sceneSelected[0].name,represent2:t.sceneSelected[1].code+"_"+t.sceneSelected[1].name,represent3:t.sceneSelected[2].code+"_"+t.sceneSelected[2].name,qq:e.qq,wechat:e.wechat,email:e.email,addr:_serverSelected2||"",pay:P||"",good:_cateSelected2||"",type:f,phone:e.phone,code:e.code};n.resetApplyInfo(a).then(function(e){e.data.success?(o.pushForCurrentRoute("visitor.apply","notify.success"),t.$close({applyInfoNew:a,status:e.data.map.status})):t.authError=e.data.msg})}};var R;0!==l.status&&c(function(){n.getVisitorMsg().then(function(e){if(e.data.obj){R=t.applyInfo=e.data.obj;for(var i=R.represent1,n=i.substr(0,i.indexOf("_")),a=R.represent2,s=a.substr(0,a.indexOf("_")),o=R.represent3,r=o.substr(0,o.indexOf("_")),l=0;l<t.myShowScene.length;l++)t.myShowScene[l].code!==n&&t.myShowScene[l].code!==s&&t.myShowScene[l].code!==r||(t.myShowScene[l].ischecked=!0,t.sceneSelected.push(t.myShowScene[l]));var c=R.tagList;for(l=0;l<c.length;l++){for(var d=0;d<t.serverLabel.length;d++)c[l].tagId===t.serverLabel[d].id&&(t.serverLabel[d].ischecked=!0,t.serverSelected.push({name:c[l].name,id:c[l].tagId}));for(var p=0;p<t.payLabel.length;p++)c[l].tagId===t.payLabel[p].id&&(t.payLabel[p].ischecked=!0);for(var u=0;u<t.cateLabel.length;u++)c[l].tagId===t.cateLabel[u].id&&(t.cateLabel[u].ischecked=!0,t.cateSelected.push({name:c[l].name,id:c[l].tagId}))}}})},1e3),t.invoice=function(){a.open({windowClass:"six-contain",templateUrl:"usercenter/console/invoice.tpl.html",controller:"InvoiceCtrl",scope:t,resolve:{userinfo:function(){return{}}}})}}]),angular.module("usercenter.upgrade",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.upgrade").controller("UsercenterupgradeCtrl",["$rootScope","$scope",function(e,t){t.quXiao=function(){t.$dismiss()},t.$on("upgrade",function(e){t.$close(e)})}]),angular.module("message",[]),angular.module("message").controller("MessageCtrl",["$scope","$rootScope","usercenterService","ModalService",function(e,t,i,n){var a=1;e.pageSize=10,e.currentPage={msgCurrentPage:1,branchCurrentPage:1},e.getUserMsg=function(t){var n=t;i.getNewMessage(n,e.pageSize).then(function(t){angular.forEach(t.data.list,function(e){1===e.bizType||4===e.bizType?e.type="系统通知":2===e.bizType?e.type="审核通知":3===e.bizType&&(e.type="活动通知")}),e.Msgs=t.data.list,e.msgCount=t.data.map.count,e.toPage=t.data.map.pageNo,e.msgNumPages=Math.ceil(e.msgCount/e.pageSize)})},e.getUserMsg(a),e.$watch("currentPage.msgCurrentPage",function(t,i){t!==i&&(e.getUserMsg(t),e.toPage=t)}),e.pageChanged=function(t,i){return t<1||t>e.msgNumPages?void n.openMsgDialog({msg:"此页超出范围"}):void(e.currentPage[i]=t)},e.setRead=function(e){4===e.bizType&&n.openConfirmDialog({msg:"确认是否成为子账号"},function(){i.changeBranch(e.id).then(function(e){e.data.success?n.openMsgDialog({msg:"重新登录账号即可成功加入！"}):n.openMsgDialog({msg:e.data.msg})})}),s(e)};var s=function(n){var a;if(n){if(1!==n.status)return;a=n.id}i.setRead(a).then(function(i){200===i.data.code&&(t.$broadcast("minusCount"),a?n.status=2:angular.forEach(e.Msgs,function(e){1===e.status&&(e.status=2)}))})}}]),angular.module("usercenter.request",["services.usercenter","app.directives.qrcode"]),angular.module("usercenter.request").controller("UsercenterrequestCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location",function(e,t,i,n,a,s){t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.currentUser=s.currentUser,t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.account",["usercenter.relEmail","usercenter.relForum"]),angular.module("usercenter.account").controller("UsercenterAccountCtrl",["$location","$rootScope","$scope","$window","usercenterService","$modal","ModalService","i18nNotifications","security","thirdpartyService","$timeout","dataCacheService",function(e,t,i,n,a,s,o,r,l,c,d,p){function u(){i.progress="0",1===i.userinfo.checkEmail&&1===i.userinfo.checkPhone&&(i.redColor=!1,d(function(){i.progress="90"},100)),1!==i.userinfo.checkEmail&&1!==i.userinfo.checkPhone&&(d(function(){i.progress="20"},100),i.redColor=!0),(1!==i.userinfo.checkEmail&&1===i.userinfo.checkPhone||1===i.userinfo.checkEmail&&1!==i.userinfo.checkPhone)&&(i.redColor=!1,d(function(){i.progress="60"},100))}function h(e){e&&(e.state&&/WECHAT_STATE/.test(e.state)?(v={code:e.code,type:"weixin"},c.bindAccountCommon(v)):c.qqBindAccount(e))}i.PREFIX_CLIENT_HOST=PREFIX_HOST,i.$watch("userinfo",function(e){e&&u()});var g=/^EQS.*qq$/,m=/^EQS.*weixin$/;i.qqShow=!0,i.weixinShow=!0,g.test(l.currentUser.loginName)&&(i.qqShow=!1),m.test(l.currentUser.loginName)&&(i.weixinShow=!1);var f=null;i.goReset=function(){return 1===i.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){i.createAccount()}):void(f=s.open({windowClass:"six-contain",templateUrl:"usercenter/tab/reset.tpl.html",controller:"UsercenterAccountCtrl",scope:i}).result.then(function(){f=null},function(){f=null}))},i.checkOldPassword=function(){return i.password.old?(i.oldPassError="",!0):(i.oldPassError="原始密码不能为空",!1)},i.checkPassword=function(){if(i.password.newPw){if(/^[a-zA-Z0-9]{6,16}$/g.test(i.password.newPw))return i.passError="",!0;i.passError="密码为6~16个字符(英文字母或数字，区分大小写)"}else i.passError="新密码不能为空";return!1},i.checkRepeatPassword=function(){if(i.password.confirm){if(i.password.confirm===i.password.newPw)return i.rPassError="",!0;i.rPassError="两次密码输入不一致，请重新输入"}else i.rPassError="确认密码不能为空";return!1},i.reset=function(){if(i.checkOldPassword()&&i.checkPassword()&&i.checkRepeatPassword()){if(angular.equals(i.master,i.password))return void(i.authError="请不要重复提交！");i.oldPassError="",i.passError="",i.rPassError="",l.resetPassword(i.password.old,i.password.newPw).then(function(e){e.data.success?(r.pushForCurrentRoute("reset.psw.success","notify.success"),i.master=angular.copy(i.password),i.$close(i.master)):i.oldPassError=e.data.msg})}},i.quXiao=function(){i.$dismiss()},i.$on("rel.success",function(e,t){r.pushForCurrentRoute("mail.rel.success","notify.success"),"weixin"===t?i.wxRel=!0:"qq"===t&&(i.qqRel=!0)}),i.checkMobile=function(e){return 1===i.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){i.createAccount()}):void s.open({windowClass:"six-contain mobile-contain",templateUrl:"usercenter/console/checkMobile.tpl.html",controller:"CheckMobileCtrl",scope:i,resolve:{userinfo:function(){return{title:e,phone:i.userinfo.phone}}}}).result.then(function(e){i.userinfo.phone=e,i.userinfo.checkPhone=1,l.currentUser.checkPhone=1})},i.createAccount=function(){i.emailAccount=!1,s.open({windowClass:"six-contain",templateUrl:"usercenter/console/register.tpl.html",controller:"RelRegisterAccountCtrl",scope:i,resolve:{userinfo:function(){return{id:i.userinfo.id,thirdLogName:i.userinfo.loginName}}}}).result.then(function(t){i.getUserInfo(),e.search("bindemail",null)},function(){e.search("bindemail",null)})},i.relAccount=function(){i.emailAccount=!1,s.open({windowClass:"six-contain",templateUrl:"usercenter/console/relAccount.tpl.html",controller:"RelAccountCtrl",scope:i,resolve:{userinfo:function(){return{id:i.userinfo.id}}}}).result.then(function(t){i.userinfo.noRel=null,i.userinfo.loginName=t.email,/qq/gi.test(t.type)&&(i.qqRel=!0),/weixin/gi.test(t.type)&&(i.wxRel=!0),/weibo/gi.test(t.type)&&(i.wbRel=!0),e.search("bindemail",null)},function(){e.search("bindemail",null)})},i.relEmail=function(e){return 1===i.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){i.createAccount()}):void s.open({windowClass:"six-contain",templateUrl:"usercenter/console/relEmail.tpl.html",controller:"RelEmailCtrl",scope:i,resolve:{userinfo:function(){return{id:i.userinfo.id,email:i.userinfo.email,checkEmail:i.userinfo.checkEmail,title:e}}}})},i.verifyEmail=function(){a.verifyEmail().then(function(e){200===e.data.code&&o.openMsgDialog({msg:"申请绑定成功,已向您的邮箱发送验证邮件,请注意查收。"})})};i.bindThirdAccount=function(e){return 1===i.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){i.createAccount()}):void c.openThirtyPartyWindow(e)},i.unbindRelation=function(e){return 1===i.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){i.createAccount()}):void c.unbindRelation(e)},i.$on("mail.unbind.success",function(e,t){r.pushForCurrentRoute("mail.unbind.success","notify.success"),"weixin"===t?i.wxRel=!1:"qq"===t&&(i.qqRel=!1)});var v;n.setValue=function(e){i.bindParam=e,h(i.bindParam),i.$apply()},i.emailAccount=!1,i.upgradeCompany=function(){s.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:i.userinfo.id}}}}).result.then(function(e){i.userinfo.phone=e,i.userinfo.checkPhone=1,l.currentUser.type=2},function(){})},i.companyMes=!0,i.$on("companyState",function(){i.companyInfo||(i.companyInfo={}),i.companyMes=!1,i.userinfo.type=2}),i.bbsShow=!0,i.relForum=function(){return 1===i.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){i.createAccount()}):void s.open({windowClass:"six-contain",templateUrl:"usercenter/console/relForum.tpl.html",controller:"relForumCtrl",scope:i,resolve:{userinfo:function(){return{id:i.userinfo.id,bbsName:i.userinfo.bbsName}}}}).result.then(function(e){i.userinfo.bbsName=e})}}]),angular.module("usercenter.children",[]),angular.module("usercenter.children").controller("ChildrenCtrl",["$scope","$rootScope","$location","$modal","ModalService","i18nNotifications","security","usercenterService","dataCacheService",function(e,t,i,n,a,s,o,r,l){e.page={},e.XdpageSize=10,e.pageChanged=function(t){return t<1||t>e.branchesCount/10+1?void a.openMsgDialog({msg:"此页超出范围"}):(e.currentPage=t,void e.getBranches(t))},e.showEdit=function(t,i){t.edit=!t.edit,$.each(e.branches,function(e,t){e!==i&&(t.edit=!1)})},e.manageBranch=function(t,i){var a=t;t&&i&&e.showEdit(t),n.open({windowClass:"console six-contain branch-contain",templateUrl:"usercenter/console/branch.tpl.html",controller:"BranchCtrl",resolve:{branch:function(){return t},diaTitle:function(){return i?"修改子账号":"添加子账号"}}}).result.then(function(i){t||(t={}),i.dept?(t.deptId=i.dept.id,t.deptName=i.dept.name):t.deptName=null,t.name=i.name,t.id=i.id,t.extPermi=i.extPermi,a||(t.loginName=i.loginName,t.status=1,t.regTime=(new Date).getTime(),e.branches.unshift(t),e.branchesCount++,e.branches.length>10&&e.branches.splice(e.branches.length-1,1))},function(i){if(i)if(110006===i.code){var n="子账号数量已超过限制，";e.buyBranch(n)}else t&&(t.deptName=null)})},e.openBranch=function(e,t,i){r.openBranch(e.id,t).then(function(i){i.data.success?t?(e.status=1,s.pushForCurrentRoute("branch.open.success","notify.success")):(e.status=2,s.pushForCurrentRoute("branch.close.success","notify.success")):a.openMsgDialog({msg:i.data.msg})},function(){a.openMsgDialog({msg:"服务器异常"})})},e.getBranches=function(t){r.getBranches(e.XdpageSize,t).then(function(t){t.data.success&&(e.branches=t.data.list,e.branchesCount=t.data.map.count,e.page.currentPage=t.data.map.pageNo,e.toPage=t.data.map.pageNo,e.branchesNumPages=Math.ceil(e.branchesCount/e.XdpageSize),c())})},(2===o.currentUser.type||5===o.currentUser.type||21===o.currentUser.type&&t.userPermit.indexOf(",1405,")>=0)&&e.getBranches(e.pageNo),e.branchName={};var c=function(){var n=i.search().branchid;if(n)for(var a=0;a<e.branches.length;a++)e.branches[a].id===n&&(e.branchName.name=e.branches[a].loginName);else t.branchid="",i.search("branchid",null)};e.$watch("branchid",function(e,t){e!==t&&c()}),e.changeCurrent=function(){l.clear("sceneList"),t.branchid="",i.search("branchid",null)},e.selectBranch=function(e){l.clear("sceneList"),t.branchid=e.id,i.path("main"),i.search({branchid:t.branchid})},e.removeBranch=function(i){i.edit=!1,a.openConfirmDialog({msg:"移除后，主账号将无法继续查看该子账号场景和数据",confirmName:"确定移除"},function(){var n,o=e.userXd||0,l=100,c="移除该子账号需要消费"+l+'个秀点,当前秀点余额<span class="color-red">'+o+"</span>个";o>=l?n="确定":(c+="<br />您当前余额不足",n="立即购买"),a.openConfirmDialog({msg:c,confirmName:n},function(){o>=l?r.removeBranch(i.id).then(function(i){i.data.success?(s.pushForCurrentRoute("usercenter.removebranch.success","notify.success"),e.getBranches(1),t.$broadcast("userXd")):a.openMsgDialog({msg:i.data.msg})}):e.buyXd()})})},e.$watch("currentPage.branchCurrentPage",function(t,i){t!==i&&(e.getBranches(t),e.branchToPage=t)}),e.buyBranch=function(t){r.buyBranchDlg(e,t)},e.addBranch=function(){a.openConfirmDialog({msg:"仅支持添加个人账号，需被邀请人查看站内信确认邀请",confirmName:"我知道了"},function(){n.open({windowClass:"console six-contain branch-contain",templateUrl:"usercenter/console/addBranch.tpl.html",controller:"addBranchController"}).result.then(function(){})})}}]),angular.module("usercenter.member",[]),angular.module("usercenter.member").controller("MemberCtrl",["$scope","$modal","usercenterService","ModalService","$rootScope",function(e,t,i,n,a){e.pageNo=1,e.pageSize=10,e.setUserInfo=function(){if(1===e.currentUser.type)e.userType="个人用户";else if(2===e.currentUser.type?e.upgradeInfo="已升级":e.upgradeInfo="免费升级",3===e.currentUser.type)e.userType="高级用户";else if(21===e.currentUser.type)e.userType="企业子用户";else if(4===e.currentUser.type)e.userType="服务商用户";else if(5===e.currentUser.type)e.userType="公共账号";else if(51===e.currentUser.type)e.userType="公共子用户";else if(e.userType="企业用户",e.currentUser.memberType){if(e.currentUser.expiryTime){var t=(new Date).getTime();e.currentUser.expiryTime<=t&&(e.currentUser.memberType=null)}1===e.currentUser.memberType||6===e.currentUser.memberType?e.userPay="(体验版)":7===e.currentUser.memberType?e.userPay="(基础版)":8===e.currentUser.memberType?e.userPay="(标准版)":2===e.currentUser.memberType||9===e.currentUser.memberType?e.userPay="(高级版)":3===e.currentUser.memberType?e.userPay="(专业版)":4===e.currentUser.memberType&&(e.userPay="(畅享版)"),2!==e.currentUser.type||1!==e.currentUser.memberType&&2!==e.currentUser.memberType&&3!==e.currentUser.memberType&&4!==e.currentUser.memberType||(e.oldVersionUser=!0)}else e.userPay="(免费版)"},e.setUserInfo(),e.memberPrivileges=["拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传"],e.getXdLog=function(t,n){e.xdType=t,e.currentPage=n,i.getXdlog(t,n,e.pageSize).then(function(t){if(t.data.success){e.xdLogs=t.data.list;for(var i=0;i<e.xdLogs.length;i++)2===e.xdLogs[i].type?e.xdLogs[i].xd="-"+e.xdLogs[i].xd:e.xdLogs[i].xd="+"+e.xdLogs[i].xd;e.totalItems=t.data.map.count,e.currentPage=t.data.map.pageNo,e.toPage=t.data.map.pageNo,e.numPages=Math.ceil(e.totalItems/e.pageSize)}})},e.getXdLog(null,1),e.$on("buyXd",function(){e.getXdLog(null,1)}),e.pageChanged=function(t,i){return i<1||i>e.numPages&&1!==i?void n.openMsgDialog({msg:"此页超出范围"}):(e.currentPage=i,e.toPage=i,void e.getXdLog(t,i))},e.renew=function(a){i.getCompanyQrCode(a,1).then(function(s){var o;if(1===a?o=[{name:"30天",value:1}]:2===a?o=[{name:"180天",value:1}]:3===a?o=[{name:"1年",value:1}]:4===a&&(o=[{name:"1年",value:1}]),s.data.success){var r=s.data.obj;t.open({windowClass:"console",templateUrl:"usercenter/payment.tpl.html",controller:"PayMentCtrl",resolve:{qrCodeUrl:function(){return r.url},type:function(){return a},money:function(){return r.price/100},oprice:function(){return r.oprice/100},method:function(){return"member"},counts:function(){return o}},size:"lg"}).result.then(function(){i.getUserInfo().then(function(e){e.data.success&&(security.currentUser=e.data.obj)}),n.openMsgDialog({msg:"因网络原因，部分用户开通会有延迟",btn:"确定"},function(){e.openInvoice()})})}else n.openMsgDialog({msg:s.data.msg})})}}]),angular.module("usercenter.privilege",["services.account.type"]),angular.module("usercenter.privilege").controller("PrivilegeCtrl",["$location","usercenterService","$scope","$modal","security","ModalService","accountTypeService",function(e,t,i,n,a,s,o){i.tabid="corporateMember",i.isActive="privilege",i.privilegePage=!0,a.currentUser&&21!==a.currentUser.type&&(i.versionType=o.accountType),i.$watch(function(){return a.currentUser},function(e){e&&(i.currentUser=e,i.changeMemberType(),2!==i.currentUser.type||1!==i.currentUser.memberType&&2!==i.currentUser.memberType&&3!==i.currentUser.memberType&&4!==i.currentUser.memberType||(i.oldVersonUser=!0))},!0),i.changeMemberType=function(){if(i.currentUser&&i.currentUser.expiryTime){var e=(new Date).getTime();i.currentUser.expiryTime<=e&&(i.currentUser.memberType=null)}},i.changeMemberType(),i.upgradeAccount=function(e){t.upgradeAccountDlg(e,i)},i.cancel=function(){i.$close()},i.upgradeCompany=function(){n.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:i.user.id}}}})}}]).controller("UpgradeCtrl",["$modal","$scope","type","usercenterService","ModalService","security","$location","security",function(e,t,i,n,a,s,o,s){t.agents=[{area:"河南",address:"河南省郑州市管城回族区东明路商城路茂祥大厦八层：河南一百度电子技术有限公司",contact:"0371-63222282、13653855809",site:"http://www.hneqxiu.com/"},{area:"山西",address:"山西省晋中开发区汇通北路汇通财富中心15层：山西鼎轩网络传媒有限公司",contact:"13363548973、13935180000",site:"http://www.sxdxwl.com"},{area:"重庆",address:"重庆市渝中区上清寺9号环球广场10层：重庆蓝海基业信息技术有限公司",contact:"023-63306833、18883214705",site:"http://www.ilanhai.cn"},{area:"安徽",address:"合肥市金寨路329号国轩凯旋大厦11F：安徽网新科技有限公司",contact:"400-678-0888 、15505512251",site:"http://www.ibw.cn"},{area:"河北",address:"石家庄市中华北大街27号鑫明商务大厦1101：河北昀希科技有限公司",contact:"4000-636-222、13363876316",site:"http://www.hbeqxiu.com"},{area:"甘肃",address:"甘肃省兰州市城关区天庆国际商务大厦17层：甘肃启航网络科技有限公司 ",contact:"400-999-0931、13893244664",site:"http://www.lzqihang.com"},{area:"天津",address:"天津市南开区金融街中心融汇广场C座19层",contact:"15802274156",site:"http://www.samyon.com"},{area:"武汉",address:"武汉市武昌珞喻路618号东方怡景大厦B座702：武汉五一点赞科技有限公司",contact:"027-82925558、15392964088",site:"http://www.51like.cc"},{area:"云南",address:"云南省昆明市盘龙区万宏路奥斯迪商务中心16楼  云南领迈文化传播有限公司",contact:"0871-65652211、18687802334",site:"http://ilingmai.cn"},{area:"广西",address:"广西南宁市高新区总部路1号总部基地一期D2栋",contact:"0771—6707023、15578951606",site:"http://www.samyon.com"}],t.confirm=function(){n.upgradeVersionService(t,i,!1)},t.openAgentModal=function(e){a.openMsgDialog({title:"服务商详情",msg:'<div class="agent-detail"><div class="pb20"><label>名称：</label>&nbsp;<div class="content">易企秀'+e.area+'地区授权服务中心</div></div><div class="pb20"><label>地址：</label>&nbsp;<div class="content">'+e.address+'</div></div><div class="pb20"><label>联系方式：</label>&nbsp;<div class="content">'+e.contact+'</div></div><div><label>网址：</label>&nbsp;<div class="content"><a href="'+e.site+'" target="_blank">'+e.site+"</a></div></div></div>",btn:"确定"})},t.cancel=function(){t.$close()}}]).controller("PayMentCtrl",["$modal","$scope","qrCodeUrl","type","money","usercenterService","method","counts","oprice","ModalService","$location",function(e,t,i,n,a,s,o,r,l,c,d){console.log(n),t.qrCodeUrl=i;var p=a;a===l?t.money=p:t.money=l+"-"+(l-p)+"="+p,t.type=n,1===n?t.payUrl=CLIENT_CDN+"download/vip1-201512.pdf":2===n?t.payUrl=CLIENT_CDN+"download/vip2-201512.pdf":3===n?t.payUrl=CLIENT_CDN+"download/vip4-201512.pdf":4===n?t.payUrl=CLIENT_CDN+"download/vip3-201512.pdf":10===n&&(t.payUrl=CLIENT_CDN+"download/xd-201512.pdf"),t.counts=r,t.payWay="alipay",r&&r.length>0&&(t.curentCount=r[0].value);var u={},h={};u["alipay1"+t.curentCount]=i,h["alipay1"+t.curentCount]=t.money,t.paymented=function(){t.$close(),"/xdBuy"===d.path()&&d.path("/usercenter/member")},t.invoiceNotice=function(){e.open({windowClass:"six-contain",templateUrl:"usercenter/invoiceNotice.tpl.html",controller:"PrivilegeCtrl"})},t.cancel=function(){t.$dismiss()},"member"===o?t.goodsType=0:t.goodsType=1,t.getWeChatUrl=function(e){var i=t.payWay;t.payWay=e;var a=1;if("wechat"===t.payWay&&(a=0),u[t.payWay+""+a+t.curentCount])return t.qrCodeUrl=u[t.payWay+""+a+t.curentCount],void(t.money=h[t.payWay+""+a+t.curentCount]);if("member"===o){var r=n,l=t.curentCount;1===n&&6===t.curentCount&&(r=2,l=1),s.getCompanyQrCode(r,a,l).then(function(e){e.data.success?(u[t.payWay+""+a+t.curentCount]=t.qrCodeUrl=e.data.obj.url,e.data.obj.price===e.data.obj.oprice?t.money=h[t.payWay+""+a+t.curentCount]=e.data.obj.price/100:t.money=h[t.payWay+""+a+t.curentCount]=e.data.obj.oprice/100+"-"+(e.data.obj.oprice/100-e.data.obj.price/100)+"="+e.data.obj.price/100):(c.openMsgDialog({msg:e.data.msg}),t.payWay=i)})}else s.getPayXdQrCode(n,a).then(function(e){e.data.success?(u[t.payWay+""+a+t.curentCount]=t.qrCodeUrl=e.data.obj.url,e.data.obj.price===e.data.obj.oprice?t.money=h[t.payWay+""+a+t.curentCount]=e.data.obj.price/100:t.money=h[t.payWay+""+a+t.curentCount]=e.data.obj.oprice/100+"-"+(e.data.obj.oprice/100-e.data.obj.price/100)+"="+e.data.obj.price/100):(c.openMsgDialog({msg:e.data.msg}),t.payWay=i)})},t.setCount=function(e){var i=t.curentCount;t.curentCount=e;var a=1;if("wechat"===t.payWay&&(a=0),u[t.payWay+""+a+t.curentCount])return t.qrCodeUrl=u[t.payWay+""+a+t.curentCount],t.money=h[t.payWay+""+a+t.curentCount],void(t.curentCount=e);var o=n,r=e;1===n&&6===e&&(o=2,r=1),s.getCompanyQrCode(o,a,r).then(function(e){e.data.success?(u[t.payWay+""+a+t.curentCount]=t.qrCodeUrl=e.data.obj.url,e.data.obj.price===e.data.obj.oprice?t.money=h[t.payWay+""+a+t.curentCount]=e.data.obj.price/100:t.money=h[t.payWay+""+a+t.curentCount]=e.data.obj.oprice/100+"-"+(e.data.obj.oprice/100-e.data.obj.price/100)+"="+e.data.obj.price/100):(c.openMsgDialog({msg:e.data.msg}),t.curentCount=i)})}}]),angular.module("app.usercenter.tab",["usercenter.account","usercenter.member","usercenter.trash","usercenter.apply","usercenter.companyinfo","usercenter.invoice","usercenter.invoicelist","usercenter.children"]),function(e){e.fn.fixMe=function(){return this.each(function(){function t(){s.wrap('<div class="container" />'),a=s.clone(),a.find("tbody").remove().end().addClass("fixed").insertBefore(s),e(".fixed").find(".version-info").remove(),i()}function i(){a.find("th").each(function(t){e(this).css("width",s.find("th").eq(t).outerWidth()+"px")})}function n(){var t=e(this).scrollTop(),i=s.offset().top-60,n=i+s.height()-s.find("thead").height();t<i||t>n?a.hide():t>=i&&t<=n&&a.is(":hidden")&&a.show()}var a,s=e(this);e(window).resize(i),e(window).scroll(n),t()})}}(jQuery),angular.module("usercenter.trash",[]),angular.module("usercenter.trash").controller("TrashCtrl",["$location","$rootScope","$scope","usercenterService","ModalService","fileService","MineService","sceneService","dataCacheService",function(e,t,i,n,a,s,o,r,l){i.myScenes=[],i.images=[];var c=""+i.currentUser.type;i.PREFIX_CLIENT_HOST=PREFIX_HOST;var d=t.branchid;i.scene={type:null},i.pageSize=12,i.sceneCurrent={page:"",total:""},i.imageCurrent={page:"",total:""},i.historyTab={page:{}};var p=function(e){i.sceneHistory=e,"scene"===e?i.historyTab={pages:{currentPage:i.sceneCurrent.page,totalItems:i.sceneCurrent.total||0,pageSize:12}}:i.historyTab={pages:{currentPage:i.imageCurrent.page,totalItems:i.imageCurrent.total||0,pageSize:24}}};i.getMyScenes=function(e,t){if(i.sceneHistory=t,"1"!==c&&("2"!==c&&"21"!==c||i.currentUser.memberType)){var n=0;if(""+i.currentUser.type=="2"||""+i.currentUser.type=="21"){if(!i.currentUser.memberType)return;switch(i.currentUser.memberType){case 1:case 2:case 3:case 4:n=3;break;case 6:case 7:n=7;break;case 8:n=15;break;case 9:n=30}}else""+i.currentUser.type!="5"&&""+i.currentUser.type!="51"||(n=15);o.getMyHistoryScenes(e,i.pageSize,d).then(function(e){if(e.data.list&&e.data.list.length>0){i.myScenes=e.data.list;for(var a=0;a<i.myScenes.length;a++)i.myScenes[a].time=new Date(i.myScenes[a].delTime).getTime()+24*n*60*60*1e3,i.myScenes[a].history=Math.floor((i.myScenes[a].time-(new Date).getTime())/1e3/60/60/24),i.myScenes[a].history<1&&(i.myScenes[a].history="不足1");i.sceneCurrent.total=e.data.map.count,i.sceneCurrent.page=e.data.map.pageNo}else i.sceneTotalItems=0,i.sceneCurrent.total=0,i.sceneCurrent.page>1?i.getMyScenes(--i.sceneCurrent.page,"scene"):i.myScenes=[];p(t)})}},i.getMyScenes(1,"scene"),i.deleteScene=function(e,t){a.openConfirmDialog({msg:"确定彻底删除此场景?"},function(){r.deleteSceneById(e,t).then(function(){i.getMyScenes(i.historyTab.pages.currentPage,"scene")})})},i.revoke=function(e){r.revoke(e).then(function(){l.clear("sceneList"),i.getMyScenes(i.historyTab.pages.currentPage,"scene")})},i.$on("images.update",function(e,t,n){if(""+i.currentUser.type!="1"){var a,s=0;[2,21].indexOf(i.currentUser.type)!==-1?[6,7,8,9].indexOf(i.currentUser.memberType)!==-1?(a=""+i.currentUser.memberType,"6"===a||"7"===a?s=7:"8"===a?s=15:"9"===a&&(s=30)):[1,2,3,4].indexOf(i.currentUser.memberType)!==-1&&(s=3):[5,51].indexOf(i.currentUser.type)!==-1&&(s=3),i.images=t.list;for(var o=0;o<i.images.length;o++)i.images[o].time=new Date(i.images[o].delTime).getTime()+24*s*60*60*1e3,i.images[o].history=Math.round((i.images[o].time-(new Date).getTime())/1e3/60/60/24);i.imageCurrent.total=t.map.count,i.imageCurrent.page=t.map.pageNo,p(n)}}),i.getImages=function(e,n){i.sceneHistory=n,""+i.currentUser.type!="1"&&("2"!==c&&"21"!==c||i.currentUser.memberType)&&s.userRecycle(e,24).success(function(e){e.success?t.$broadcast("images.update",e,n):a.openMsgDialog({msg:e.msg})}).error(function(){a.openMsgDialog({msg:"网络连接超时，请稍后重试"})})},i.$on("file.delete",function(){i.getImages(i.historyTab.pages.currentPage,"image")}),i.deleteImg=function(e,t){a.openConfirmDialog({msg:"确定彻底删除此图片?"},function(){i.deleteFile(e,t);
})},i.deleteFile=function(e,i){s.deleteFile1(e,i).success(function(e){e.success?t.$broadcast("file.delete"):a.openMsgDialog({msg:e.msg})}).error(function(){a.openMsgDialog({msg:"网络连接超时，请稍后重试"})})},i.imageRevoke=function(e){s.fileRevoke(e).success(function(e){e.success?(i.getImages(i.historyTab.pages.currentPage,"image"),l.clear("fileService")):a.openMsgDialog({msg:e.msg})}).error(function(){a.openMsgDialog({msg:"网络连接超时，请稍后重试"})})},i.pageChanged=function(e){return e<1||e>i.historyTab.pages.totalItems/10+1?void a.openMsgDialog({msg:"此页超出范围"}):void("scene"===i.sceneHistory?i.getMyScenes(e,"scene"):i.getImages(e,"image"))}}]),angular.module("usercenter.transfer",["services.usercenter"]),angular.module("usercenter.transfer").controller("UsercentertransferCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","username",function(e,t,i,n,a,s,o,r,l,c){t.currentXd={toUser:"",xdCount:""},t.xdCount=a.xdCount,t.checkEmailFormat=function(e){return e.toUser?e.toUser===c?(t.mailFormatErr="不能把秀点转送给自己",$(".username").addClass("error"),!1):(t.mailFormatErr="",!0):(t.mailFormatErr="账号不能为空",$(".username").focus(),!1)},t.checkXdFormat=function(e){return/^\+?[1-9][0-9]*$/.test(e.xdCount)?t.currentXd.xdCount>t.userXd?(t.xdFormatErr="秀点不足",!1):(t.xdFormatErr="",!0):(t.xdFormatErr="正确填写秀点数目",!1)};var d=!0;t.confirm=function(){t.checkEmailFormat(t.currentXd)&&t.checkXdFormat(t.currentXd)&&d&&(d=!1,a.getgiveXd(t.currentXd).then(function(e){200===e.data.code?t.$close():1003===e.data.code?t.mailFormatErr=e.data.msg:1010===e.data.code&&(t.xdFormatErr=e.data.msg),d=!0}))},t.cancel=function(){t.$close()}}]),angular.module("usercenter",["usercenter.transfer","userCenter.department","usercenter.upgrade","usercenter.request","services.usercenter","services.localizedMessages","security.service","app.directives.addelement","services.modal","usercenter.relAccount","usercenter.branch","services.i18nNotifications","security.thirdparty","usercenter.branch.reset","usercenter.checkMobil","usercenter.relRegisterAccount","userCenter.userGuide","app.usercenter.tab","usercenter.privilege","userCenter.add.branch","userCenter.add.department"]),angular.module("usercenter").controller("UserCenterCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","$filter","fixnumFilter","i18nNotifications","thirdpartyService","$timeout",function(e,t,i,n,a,s,o,r,l,c,d,p,u,h){t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_SERVER_HOST=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.isActive="usercenter",t.isVendorUser=s.isVendorUser(),t.editInfo={isEditable:!1},t.password={},t.pageSize=5,t.XdpageNo=1,t.XdtoPage="",t.pageNo=1,t.toPage=t.XdcurrentPage=1,t.branchToPage=1,t.accessOrderTask=s.isAllowToAccess(s.accessDef.ACCESS_ORDER_TASK),t.viewControl={tab:n.id},t.showTab=function(e){l.path("/usercenter/"+e,!1),t.viewControl.tab=e},t.currentUser=s.currentUser,t.getUserInfo=function(){a.getUserInfo().then(function(e){t.userinfo=e.data.obj,t.master=angular.copy(t.userinfo),t.url="我做的企业秀，用的是易企秀，免费好用，你试试吧：\r\n"+PREFIX_HOST+"/#/home/register?u="+t.userinfo.id,t.userinfo.headImg&&t.userinfo.headImg.indexOf("http://")>=0&&(t.thirdHead=!0),/qq/gi.test(t.userinfo.relType)&&(t.qqRel=!0),/weixin/gi.test(t.userinfo.relType)&&(t.wxRel=!0),/weibo/gi.test(t.userinfo.relType)&&(t.wbRel=!0),l.search().bindemail&&t.relAccount()})},t.getUserInfo(),t.getUserXd(),t.getCash=function(){r.openMsgDialog({msg:"即将开通，敬请期待",btn:"知道了"})},t.transferXd=function(){o.open({windowClass:"six-contain",templateUrl:"usercenter/transfer.tpl.html",controller:"UsercentertransferCtrl",resolve:{username:function(){return t.userinfo.loginName}}}).result.then(function(){t.getUserXd(),e.$broadcast("buyXd"),t.getXdStatNum()},function(){})},t.getXdStatNum=function(){a.getXdStat().then(function(e){t.getXdStat=e.data.map})},t.getXdStatNum(),t.openInvoice=function(){t.openInvoiceListModal()},t.openInvoiceListModal=function(){o.open({windowClass:"console seven-contain",templateUrl:"usercenter/console/invoice-list.tpl.html",controller:"GetInvoiceListCtrl"}).result.then(function(){})},t.editMessage=function(){var e,i,n;4===t.userinfo.type?(e="usercenter/console/serverinfo.tpl.html",i="ApplyCtrl",n="服务会员基本信息"):(e="usercenter/console/companyinfo.tpl.html",i="companyInfoCtrl"),o.open({windowClass:"six-contain",templateUrl:e,controller:i,scope:t,resolve:{userinfo:function(){return{nick:t.userinfo.nick,type:t.userinfo.type,id:t.userinfo.id,title:n,name:t.userinfo.name}}}}).result.then(function(e){4===t.userinfo.type?(t.applyInfo=e.status,t.userinfo.nick=e.applyInfoNew.nick):e&&(t.userinfo.nick=e.nick)})},t.copyCode=function(){var e,t;e=$(".invitation-contain span"),t=e.html(),clipboard.setData("text/plain",t)},t.tabid=n.id,t.customerUpload=function(){o.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(i){if(i.width/i.height===1){t.userinfo.headImg=i.data;var n={headImg:i.data,id:t.userinfo.id};return void a.saveUserInfo(n).then(function(n){n.data.success&&(t.editInfo.isEditable=!1,e.$broadcast("headImg.change",i.data))})}o.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:i.data}}}}}).result.then(function(i){t.userinfo.headImg=i.src;var n={headImg:i.src,id:t.userinfo.id};a.saveUserInfo(n).then(function(i){i.data.success&&(t.editInfo.isEditable=!1,e.$broadcast("headImg.change",i.data.obj.headImg))})})})},t.domain=function(){o.open({windowClass:"six-contain",templateUrl:"usercenter/tab/domain.tpl.html",controller:"UserCenterCtrl",resolve:{param:function(){return{value:t.domainMess}}}}).result.then(function(){getDomainMess()})},t.applyShow=function(){o.open({windowClass:"six-contain",templateUrl:"usercenter/console/serverinfo.tpl.html",controller:"ApplyCtrl",backdrop:"static",invoice:!0,resolve:{userinfo:function(){return{status:t.applyInfo,id:t.userinfo.id,title:"申请成为秀客获取服务商账号",invoice:!0}}}}).result.then(function(e){t.applyInfo=e})},h(function(){4!==s.currentUser.type&&1!==s.currentUser.type||a.getUserStatus().then(function(e){200===e.data.code&&(t.applyInfo=e.data.map.status)})},400),t.know=function(){t.xiudian=!1}}]).controller("BuyXdController",["$scope","$modal","usercenterService","ModalService","getUserXd",function(e,t,i,n,a){e.confirm=function(){i.xdBuyService(e,a,!1)},e.cancel=function(){e.$close()}}]),function(){angular.module("userCenter.userGuide",[]).controller("userCenterGuideCtrl",["$rootScope","$scope","security","$routeParams","$location","$timeout",function(e,t,i,n,a,s){function o(e,i){var n=sessionStorage.getItem(d.id);e&&e[d.id]?e[d.id+"_isShow_"+d.type]?t.isFirstLogin=!1:(n||(t.isCompanyVip=i,t.isFirstLogin=!0,sessionStorage.setItem(d.id,!0)),i&&setTimeout(function(){t.isShow()},100)):(t.isFirstLogin=!0,t.isCompanyVip=i,c=c||{},c[d.id]=d.type,c[d.id+"_isShow_"+d.type]=2===d.type,l(p,c),sessionStorage.setItem(d.id,!0))}function r(e){return window.localStorage?(c=JSON.parse(localStorage.getItem(e)),!!c&&c):null}function l(e,t){return window.localStorage?void localStorage.setItem(p,JSON.stringify(t)):null}var c,d=i.currentUser,p="userCenterGuide",u=null,h=a.path();if(1===d.type&&h.indexOf("/account")>=0&&(u=r(p),o(u,!1),$("#companyVip").css("background","rgba(0,0,0,0.8")),2===d.type){u=r(p),o(u,!0);var g=JSON.parse(sessionStorage.getItem("emailGuide"));g&&$("#companyVip").css("background","rgba(0,0,0,0.8")}t.showNextGuide=function(){t.isFirstLogin=!1,$("#companyVip").css("background","rgba(0,0,0,0"),s(function(){e.$broadcast("companyVip")})},t.isShow=function(){c=r(p),c[d.id+"_isShow_"+d.type]=!c[d.id+"_isShow_"+d.type],localStorage.setItem(p,JSON.stringify(c))}}])}(),angular.module("app.directives.addelement",[]).directive("addElement",["$compile",function(e){return{restrict:"EA",link:function(t,i){var n=$("#emailAddress"),a=$("#emailAddress").size()+1;i.bind("click",function(){var i=angular.element('<div><input type="text" id="p_scnt" style="width:100%; height: 30px; margin-top: 15px;" ng-model="attrs.addElement" name="p_scnt_'+a+'" placeholder="Input Value" /></div>');n.append(i);var s=i.find("input");e(s)(t),a++})}}}]).directive("showIcon",["$compile",function(e){return{restrict:"EA",require:"ngModel",scope:{check:"&callbackFn"},link:function(t,i,n,a){var s,o,r=e('<a><span class = "glyphicon glyphicon-ok-circle" ng-show="enabled" style = "margin-top: 8px; color: #9ad64b; font-size: 15px;"></span></a>')(t);t.update=function(){i[0].blur(),t.check({arg1:{name:a.$name}})},i.bind("focus",function(){s=a.$viewValue,i.parent().after(r),t.enabled=!0,"email"!==n.name&&"mobile"!==n.name&&"tel"!==n.name||(t.enabled=!1),t.$apply()}).bind("blur",function(){t.enabled=!1,o=a.$viewValue;var e=new RegExp(/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/g);if("mobile"===n.name&&o&&!e.test(i.val()))return alert("手机号码格式错误"),$('input[name="mobile"]').addClass("error"),void $('input[name="mobile"]').change(function(){$(this).removeClass("error")});if("email"===n.name&&o){var r=new RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/g);if(!r.test(i.val()))return alert("邮箱格式错误！"),$('input[name="email"]').addClass("error"),void $('input[name="email"]').change(function(){$(this).removeClass("error")})}(o||s)&&s!==o&&t.update(),t.$apply()})}}}]).directive("ngHover",function(){return{restrict:"EA",scope:{resource:"="},link:function(e,t){t.hover(function(){e.$apply(function(){e.resource.show=!0})},function(){e.$apply(function(){e.resource.show=!1})})}}}).directive("imgClick",function(){return{restrict:"EA",link:function(e,t){$(t).bind("click",function(){$(t).find("img").css("border","4px solid #F60"),$(t).siblings().find("img").css("border",0)})}}}).directive("customFocus",function(){return{restrict:"EA",link:function(e,t){$(t).siblings().bind("click",function(){t[0].focus()})}}}).directive("blurChildren",function(){return{restrict:"EA",link:function(e,t){$(t).on("click",function(e){(e.target===t[0]||$(e.target).hasClass("badge"))&&$(".blurClass").find("input:visible").blur()})}}}).directive("forbiddenClose",function(){return{restrict:"EAC",link:function(e,t){$(t).on("click",function(e){e.stopPropagation()})}}}).directive("customeImage",function(){return{restrict:"EA",link:function(e,t){$(t).hover(function(){$("<div><a></a></div>")})}}}).directive("fluxSlide",[function(){return{restrict:"EA",link:function(e,t,i){function n(e){this.contains(e.originalEvent.fromElement)||s.stop()}function a(e){this.contains(e.originalEvent.toElement)||s.play()}var s,o=i.effect?i.effect:"slide",r="false"!==i.paginav&&{effect:o},l={navigation:!1,pagination:r,effect:{fade:{speed:1e3}},play:{auto:!0,pauseOnHover:!0,interval:5e3,effect:o}};i.width&&(l.width=i.width),i.height&&(l.height=i.height),i.pauseOnHover&&(t.on("mouseover",i.pauseOnHover,n),t.on("mouseout",i.pauseOnHover,a)),e.$on("ngRepeatFinished",function(){t.children(".slides-content").length>1&&(t.slidesjs(l),s=t.data("plugin_slidesjs")),"true"===i.autoSize&&(t.find(".slides-content").first().find("img").on("load",function(){t.find(".slidesjs-control").height($(".slides-content").height()),t.find(".slidesjs-container").height($(".slides-content").height())}),$(window).on("resize",function(){t.find(".slidesjs-control").height($(".slides-content").height()),t.find(".slidesjs-container").height($(".slides-content").height())}))})}}}]).directive("onFinishRenderFilter",[function(){return{restrict:"EA",link:function(e){e.$last===!0&&e.$emit("ngRepeatFinished")}}}]).directive("addClass",function(){return{restrict:"EA",link:function(e,t){$(t).closest(".textbox-wrap").find("[autofocus]").focus(),$(t).on("blur",function(){$(t).closest(".textbox-wrap").removeClass("focused")}).on("focus",function(){$(t).closest(".textbox-wrap").addClass("focused")})}}}).directive("loadScript",["$http","$timeout","$rootScope",function(e){return{link:function(t,i){var n=function(){t.captchaLoaded=!0};t.$watch(function(){return i[0].getAttribute("src")},function(t){t&&e.jsonp(i[0].getAttribute("src")).success(n).error(n)}),t.$on("$destroy",function(){angular.element(".gt_widget").remove()})}}}]),angular.module("angularEffects",[]).directive("slideToggle",function(){return{restrict:"A",link:function(e,t,i){var n=document.querySelector(i.slideToggle);$(n).hide(),t.bind("click",function(){$(n).slideToggle(),t.toggleClass("toggle")})}}}).directive("tableHeaderFix",function(){return{restrict:"A",link:function(e,t,i){var n=document.querySelector(i.tableHeaderFix);$(n).fixMe()}}}).directive("tableCollapse",function(){return{restrict:"A",link:function(e,t,i){["subAccount","editFacility","share","visitor","pageStatis","dataProfile","visitStatis"].forEach(function(e){$("#"+e).on("show.bs.collapse",function(){$("#"+e+"Td").addClass("expand"),"editFacility"===e?$("#subAccountCol1").attr("rowspan",parseInt($("#subAccountCol1").attr("rowspan"))+1):("subAccount"!==e&&"share"!==e||($("#"+e+"Col1").attr("rowspan",parseInt($("#"+e+"Col1").attr("rowspan"))+1),$("#"+e+"Col2").attr("rowspan",parseInt($("#"+e+"Col2").attr("rowspan"))+1)),["visitor","pageStatis","dataProfile","visitStatis"].indexOf(e)!==-1&&($("#shareCol1").attr("rowspan",parseInt($("#shareCol1").attr("rowspan"))+1),$("#"+e+"Col2").attr("rowspan",parseInt($("#"+e+"Col2").attr("rowspan"))+1)))}),$("#"+e).on("hidden.bs.collapse",function(){$("#"+e+"Td").removeClass("expand"),"editFacility"===e?$("#subAccountCol1").attr("rowspan",parseInt($("#subAccountCol1").attr("rowspan"))-1):("subAccount"!==e&&"share"!==e||($("#"+e+"Col1").attr("rowspan",parseInt($("#"+e+"Col1").attr("rowspan"))-1),$("#"+e+"Col2").attr("rowspan",parseInt($("#"+e+"Col2").attr("rowspan"))-1)),["visitor","pageStatis","dataProfile","visitStatis"].indexOf(e)!==-1&&($("#shareCol1").attr("rowspan",parseInt($("#shareCol1").attr("rowspan"))-1),$("#"+e+"Col2").attr("rowspan",parseInt($("#"+e+"Col2").attr("rowspan"))-1)))})})}}}),angular.module("app.directives.autoclose",[]).directive("autoClose",function(){return{restrict:"EA",link:function(e){$(document).click(function(t){t.target.className;return!$(event.target).closest(".drop-area").length&&(e.showObj={showGroup:!1},void e.$apply())})}}}),angular.module("ot.bar.chart",[]),angular.module("ot.bar.chart").directive("orderTaskBarChart",function(){function e(e,t,i){var n=echarts.init(t.get(0)),a=e.option;n.setOption(a)}return{restrict:"EA",scope:{option:"="},link:e}}),angular.module("ot.map.chart",[]),angular.module("ot.map.chart").directive("orderTaskMapChart",function(){function e(e,t,i){var n=echarts.init(t.get(0));n.setOption(e.option)}return{restrict:"EA",scope:{option:"="},link:e}}),angular.module("colorpicker.module",[]).factory("Helper",function(){return{closestSlider:function(e){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return t.bind(e)("I")?e.parentNode:e},getOffset:function(e,t){for(var i=0,n=0,a=0,s=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)i+=e.offsetLeft,n+=e.offsetTop,t||"BODY"!==e.tagName?(a+=e.scrollLeft,s+=e.scrollTop):(a+=document.documentElement.scrollLeft||e.scrollLeft,s+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:n,left:i,scrollX:a,scrollY:s}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,t,i,n){e/=255,t/=255,i/=255;var a,s,o,r;return o=Math.max(e,t,i),r=o-Math.min(e,t,i),a=0===r?null:o===e?(t-i)/r:o===t?(i-e)/r+2:(e-t)/r+4,a=(a+360)%6*60/360,s=0===r?0:r/o,{h:a||1,s:s,b:o,a:n||1}},setColor:function(t){t=t.toLowerCase();for(var i in e.stringParsers)if(e.stringParsers.hasOwnProperty(i)){var n=e.stringParsers[i],a=n.re.exec(t),s=a&&n.parse(a);if(s)return this.value=this.RGBtoHSB.apply(null,s),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,i,n){e||(e=this.value.h,t=this.value.s,i=this.value.b),e*=360;var a,s,o,r,l;return e=e%360/60,l=i*t,r=l*(1-Math.abs(e%2-1)),a=s=o=i-l,e=~~e,a+=[l,r,0,0,r,l][e],s+=[r,l,l,r,0,0][e],o+=[0,0,r,l,l,r][e],{r:Math.round(255*a),g:Math.round(255*s),b:Math.round(255*o),a:n||this.value.a}},toHex:function(e,t,i,n){var a=this.toRGB(e,t,i,n);return"#"+(1<<24|parseInt(a.r,10)<<16|parseInt(a.g,10)<<8|parseInt(a.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){var t={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},i={};return{getSlider:function(){return t},getLeftPosition:function(e){return Math.max(0,Math.min(t.maxLeft,t.left+((e.pageX||i.left)-i.left)))},getTopPosition:function(e){return Math.max(0,Math.min(t.maxTop,t.top+((e.pageY||i.top)-i.top)))},setSlider:function(n,a){var s=e.closestSlider(n.target),o=e.getOffset(s,a);t.knob=s.children[0].style,t.left=n.pageX-o.left-window.pageXOffset+o.scrollX,t.top=n.pageY-o.top-window.pageYOffset+o.scrollY,i={left:n.pageX,top:n.pageY}},setSaturation:function(e,i){t={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,i)},setHue:function(e,i){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(e,i)},setAlpha:function(e,i){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,i)},setKnob:function(e,i){t.knob.top=e+"px",t.knob.left=i+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper","editService",function(e,t,i,n,a,s){return{scope:{disable:"@",y:"@"},require:"?ngModel",restrict:"A",link:function(s,o,r,l){var c,d={x:parseInt(r.x,10)||0,y:parseInt(s.y,10)||0},p=r.colorpicker?r.colorpicker:"hex",u=angular.isDefined(r.colorpickerPosition)?r.colorpickerPosition:"bottom",h=!!angular.isDefined(r.colorpickerInline)&&r.colorpickerInline,g=!!angular.isDefined(r.colorpickerFixedPosition)&&r.colorpickerFixedPosition,m=angular.isDefined(r.colorpickerParent)?o.parent():angular.element(document.body),f=!!angular.isDefined(r.colorpickerWithInput)&&r.colorpickerWithInput,v=f?'<input type="text" name="colorpicker-input">':"",b=h?"":'<button type="button" class="close close-colorpicker">&times;</button>',y='<div class="colorpicker dropdown" ng-click="$event.stopPropagation();"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+v+b+"</div></div>",w=angular.element(y),x=i,k=w.find("colorpicker-hue"),S=w.find("colorpicker-saturation"),T=w.find("colorpicker-preview"),C=w.find("i");if(t(w)(s),s.disable&&s.$watch("disable",function(e,t){e!==t&&"false"===e&&A()}),s.$watch("y",function(e,t){e&&e!==t&&(d.y=parseInt(e,10))}),f){var E=w.find("input");E.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(e){var t=this.value;o.val(t),l&&s.$apply(l.$setViewValue(t)),e.stopPropagation(),e.preventDefault()}),o.on("keyup",function(){E.val(o.val())})}var P=function(){e.on("mousemove",_),e.on("mouseup",L)};"rgba"===p&&(w.addClass("alpha"),c=w.find("colorpicker-alpha"),c.on("click",function(e){n.setAlpha(e,g),_(e)}).on("mousedown",function(e){n.setAlpha(e,g),P()})),k.on("click",function(e){n.setHue(e,g),_(e)}).on("mousedown",function(e){n.setHue(e,g),P()}),S.on("click",function(e){n.setSaturation(e,g),_(e)}).on("mousedown",function(e){n.setSaturation(e,g),P()}),g&&w.addClass("colorpicker-fixed-position"),w.addClass("colorpicker-position-"+u),"true"===h&&w.addClass("colorpicker-inline"),m.append(w),l&&(l.$render=function(){o.val(l.$viewValue)},s.$watch(r.ngModel,function(){M()})),o.on("$destroy",function(){w.remove()});var I=function(){try{T.css("backgroundColor",x[p]())}catch(e){T.css("backgroundColor",x.toHex())}S.css("backgroundColor",x.toHex(x.value.h,1,1,1)),"rgba"===p&&(c.css.backgroundColor=x.toHex())},_=function(e){var t=n.getLeftPosition(e),i=n.getTopPosition(e),a=n.getSlider();n.setKnob(i,t),a.callLeft&&x[a.callLeft].call(x,t/100),a.callTop&&x[a.callTop].call(x,i/100),I();var r=x[p]();return o.val(r),l&&s.$apply(l.$setViewValue(r)),f&&E.val(r),!1},L=function(){e.off("mousemove",_),e.off("mouseup",L)},M=function(){x.setColor(o.val()),C.eq(0).css({left:100*x.value.s+"px",top:100-100*x.value.b+"px"}),C.eq(1).css("top",100*(1-x.value.h)+"px"),C.eq(2).css("top",100*(1-x.value.a)+"px"),I()},R=function(){var e,t=a.getOffset(o[0]);return angular.isDefined(r.colorpickerParent)&&(t.left=0,t.top=0),"top"===u?e={top:t.top-147+d.y,left:t.left+d.x}:"right"===u?e={top:t.top+d.y,left:t.left+126+d.x}:"bottom"===u?(e={top:t.top+o[0].offsetHeight+2+d.y,left:t.left+d.x},"grid.color"===r.ngModel&&(e.top=$(o[0]).offset().top+30,e.left=$(o[0]).offset().left)):"left"===u?e={top:t.top+d.y,left:t.left-150+d.x}:"sceneToobar"===u&&(e={top:t.top+d.y-110,left:t.left-150+d.x+40}),{top:e.top+"px",left:e.left+"px"}},q=function(){A()};h===!1?o.on("click",function(){M(),w.addClass("colorpicker-visible").css(R()),e.on("mousedown",q)}):(M(),w.addClass("colorpicker-visible").css(R())),w.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()});var D=function(e){l&&s.$emit(e,{name:r.ngModel,value:l.$modelValue})},A=function(){w.hasClass("colorpicker-visible")&&(w.removeClass("colorpicker-visible"),D("colorpicker-closed"),e.off("mousedown",q))};w.find("button").on("click",function(){A()})}}}]),angular.module("app.directives.rightclick",[]).directive("rightClick",["$compile",function(e){return{restrict:"EA",link:function(t,i){var n;$(i).on("contextmenu",function(a){if(a.preventDefault(),n&&n[0]&&n.remove(),""+t.categoryId=="0"){n=$('<ul class="right-menu dropdown-menu"></ul>'),n.appendTo($(i)),n.css({left:a.pageX-$(i).offset().left,top:a.pageY-$(i).offset().top}).show();for(var s in t.myTags){var o='<li class="tag_list" ng-class="{selected: dropTagIndex == '+s+'}" ng-click="selectTag('+t.myTags[s].id+","+s+')">'+t.myTags[s].name+"</li>",r=e(o)(t);n.append(r)}var l=e('<li class="tag_list add_cate clearfix" style="border-top:1px solid #ccc;margin-bottom:0px;" ng-click="createCategory()"><em>+</em><span>创建分类</span></li>')(t);n.append(l);var c=e('<li class="btn-main" style="width:100%; padding:0px; border: 0;margin:0px;height:25px; line-height:25px;"><a style="height:25px;line-height:25px;text-indent:0;color:#FFF;padding:0px;text-align:center;" ng-click="setCategory('+t.dropTagIndex+","+t.img.id+')">确定</a></li>')(t);n.append(c),$(c).on("click",function(){n.hide()}),$(document).mousemove(function(e){(e.pageX<n.offset().left-20||e.pageX>n.offset().left+n.width()+20||e.pageY<n.offset().top-20||e.pageY>n.offset().top+n.height()+20)&&(n.hide(),$(this).unbind("mousemove"))})}})}}}]),angular.module("app.directives.copyButton",[]).directive("copyButton",[function(){return{restrict:"EA",scope:{url:"@"},link:function(e,t,i){var n=new ZeroClipboard(t);n.on("copy",function(e){var t=e.clipboardData;t.setData("text/plain",i.url.replace(PREFIX_HOST,PREFIX_HOST_ARRAY[Math.floor(12*Math.random())%12]))}),n.on("ready",function(){n.on("aftercopy",function(){alert("复制成功")})})}}}]),angular.module("app.directives.customer",[]).directive("forbiddenListClose",function(){return{restrict:"A",link:function(e,t){$(t).click(function(){return!1})}}}),angular.module("app.directives.dataDraggable",[]).directive("itemDraggable",function(){return{restrict:"A",link:function(e,t){$(t).draggable({zIndex:2700,scroll:!1,iframeFix:!1,revert:!1,helper:"clone"})}}}).directive("itemDroppable",function(){return{restrict:"A",link:function(e,t){$(t).droppable({hoverClass:"active",out:function(){},drop:function(t,i){delete e.$parent.associateData[i.draggable.parent().attr("item-id")],e.$parent.associateData[$(t.target).attr("item-id")]=i.draggable.attr("item-id");var n=$(t.target).find(".list_darggable");n.length>0&&$(".item-remove-droppable").append(n),i.draggable.css({left:0,top:0}).prependTo(this)}})}}}).directive("itemRemoveDroppable",function(){return{restrict:"A",link:function(e,t){$(t).droppable({hoverClass:"active",drop:function(t,i){$(i.draggable).parents(".list-attribute").length>0&&delete e.associateData[$(i.draggable).parents(".list-attribute").attr("item-id")],i.draggable.css({left:0,top:0}).appendTo(this)}})}}}),angular.module("app.directives.disableKeydown",[]).directive("disableEdit",function(){function e(e,t){var i={37:"arrow-left",38:"arrow-up",39:"arrow-right",40:"arrow-down",9:"tab",27:"esc"};t.keydown(function(e){i[e.which]||e.preventDefault()})}return{restrice:"EA",link:e}}),angular.module("eqx.colorpicker",[]).factory("colorService",function(){function e(){return r}function t(e){return r=e}function i(){return angular.copy(l)}function n(e){o.indexOf(e)>-1&&o.splice(o.indexOf(e),1),o.unshift(e),o.length>7&&o.pop(),localStorage.setItem("historyColor",o.join(","))}function a(){return o?o:(o=localStorage.getItem("historyColor"),o=o?o.split(","):[])}function s(e,t){var i=e.$root.$$phase;"$apply"===i||"$digest"===i?t&&"function"==typeof t&&t():e.$apply(t)}var o=null,r="",l=["eef1f6","ffcbd0","bde6ff","97ecb9","ffc36d","95f4e2","ccd0ff","eccaf1","ffbed0","ffffff","a8b8d0","e87474","59c7f9","56b786","ea9924","2ecbbe","8d91ff","c277d0","ff79a2","000000","7a90b2","c4433c","2196ed","48916c","d67b03","23a193","696cb4","a158b3","bf4c76"];return{getCustomColor:e,setCustomColor:t,safeApply:s,getColors:i,setHistoryColors:n,getHistoryColors:a}}).directive("eqdColorpicker",["$compile","colorService","$timeout",function(e,t,i){function n(n,o){var r=angular.element(document.getElementById("btn-toolbar"));n.direction=n.direction||"right",n.x=n.x||0,n.y=n.y||0;var l=t.getColors();n.greyColors=l.slice(0,9),n.richColors=l.slice(9),n.historyColors=t.getHistoryColors(),$("body").append(e(s)(n)),o.click(function(){if(!n.visible){t.safeApply(n,function(){n.visible=!0}),n.colorpicker.css("transform",""),n.picker.colorpicker("setValue",n.selectColor||"transparent"),n.setColorpickerPos(n,o,n.colorpicker),a.bind("mousedown",function(){t.safeApply(n,function(){n.visible=!1;var e=t.getCustomColor();e&&t.setHistoryColors(e.slice(1))}),a.unbind("mousedown")}),r.bind("mousedown",function(){t.safeApply(n,function(){n.visible=!1;var e=t.getCustomColor();e&&t.setHistoryColors(e.slice(1))})});var e=$(".eqc-colorpicker .content input");e.keydown(function(e){8!==e.keyCode&&37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode&&46!==e.keyCode||e.stopPropagation(),i(function(){e.target.focus()},200)})}})}var a=$(document),s='<div class="eqc-colorpicker {{isToolbarColorPicker}}" ng-show="visible" ><div class="content"><div class="color" ng-click="chooseColor($event)"><div class="select"><ul><li class="clear"></li><li ng-repeat="color in greyColors" ng-style="{backgroundColor: \'#\' + color}" color="{{color}}"></li><li ng-repeat="color in richColors" ng-style="{backgroundColor: \'#\' + color}" color="{{color}}"></li></ul></div><div class="history"><ul><div class="more">最近使用</div><li ng-repeat="color in historyColors" ng-style="{backgroundColor: \'#\' + color}" color="{{color}}" ></li></ul></div><input eqd-color-more /><div class="subHistory"><li ng-style="{backgroundColor: \'#\' + selectColor}" color="{{selectColor}}" ></li><li ng-style="{backgroundColor: \'#\' + historyColors[0]}" color="{{historyColors[0]}}" ></li></div></div></div></div>';return{scope:{selectColor:"=",notify:"@",direction:"@",isToolbarColorPicker:"=",x:"@",y:"@",isConvertTransparent:"@"},link:n}}]).directive("eqdColorMore",["$rootScope","colorService",function(e,t){function i(i,a){var s=i.colorpicker=a.closest(".eqc-colorpicker");s.mousedown(function(e){if(e.stopPropagation(),$(e.target).hasClass("eqc-colorpicker")){var t=s.get(0).style.transform;t=/translate3d/.test(t)?t:"translate3d(0,0,0)",t=/translate3d\((-?\d+)(px)?,\s*(-?\d+)(px)?,\s*(-?\d+)(px)?\)/.exec(t);var i={pageX:e.pageX,pageY:e.pageY,translateX:parseInt(t[1],10),translateY:parseInt(t[3],10)};n.mousemove(function(e){var t=e.pageX-i.pageX,n=e.pageY-i.pageY;s.css("transform","translate3d("+(i.translateX+t)+"px,"+(i.translateY+n)+"px,0")}),n.mouseup(function(){n.unbind("mousemove mouseup")})}});var o=i.picker=a.colorpicker({inline:!0,format:"rgba",container:s.children(".content"),customClass:"colorpicker-2x",sliders:{saturation:{maxLeft:150,maxTop:150},hue:{maxTop:150},alpha:{maxTop:150}}});s.click(function(e){e.stopPropagation()}),o.on("changeColor",function(e){t.safeApply(i,function(){var t=e.color.toRGB();i.selectColor="rgba("+t.r+","+t.g+","+t.b+","+t.a+")"})}),o.on("completeColor",function(n){e.$broadcast("completeColor",i.notify);var a=n.color.toHex();t.setCustomColor(a)}),a.on("$destroy",function(){o.colorpicker("destroy")}),i.$on("colorpicker.hide",function(){t.safeApply(i,function(){i.visible=!1})}),i.chooseColor=function(n){n.stopPropagation();var a=$(n.target);if(a.is("li")){var s=a.attr("color");if(s){var r="#"+s;i.selectColor=r,t.setCustomColor(r),o.colorpicker("setValue",r)}else i.selectColor="",o.colorpicker("setValue","transparent");setTimeout(function(){e.$broadcast("completeColor",i.notify),i.$apply()},10)}},i.setColorpickerPos=function(e,t,i){var n={},a={width:234,height:425},s=t.offset(),o={top:s.top,left:s.left,width:t.width(),height:t.height()};switch(e.direction){case"top":n.top=o.top-a.height,n.left=o.left;break;case"bottom":n.top=o.top+o.height,n.left=o.left;break;case"left":n.top=o.top,n.left=o.left-a.width;break;case"right":n.top=o.top,n.left=o.left+o.width}n.top+a.height>window.screen.availHeight&&(n.top=window.screen.availHeight-a.height),n.left+a.width>document.body.clientWidth&&(n.left=document.body.clientWidth-a.width),i.css({top:n.top+parseInt(e.y,10),left:n.left+parseInt(e.x,10)})}}var n=$(document);return{restrict:"EA",link:i}}]),angular.module("scene.create.hoverElement",[]).directive("hoverElement",["triggerSourceService",function(e){function t(t,n){var a,s=$('<div class="blink-element"></div>');$("#tip_"+t.id).html(e.get(t.id)),n.hover(function(){i=$("#inside_"+t.id),i.find(".blink-element").length||s.appendTo(i),a=setInterval(function(){s.toggleClass("red-border")},1e3)},function(){s.remove(),clearInterval(a)})}var i;return{restrict:"EA",scope:{id:"="},link:t}}]),angular.module("common.directives.inputColor",[]).controller("InputColorCtrl",["$scope","$attrs",function(e,t){e.x=t.x||151,e.y=t.y||-2,e.w=t.w||144,e.h=t.h||28,e.colorMode=t.colorMode||"rgba",e.direction=t.direction||"right",e.theme=t.theme||"",e.notify=t.notify||"",e.idName=t.toolcolorpicker||"normalColorPicker",e.isConvertTransparent=t.isconverttransparent||"false"}]).directive("eqdInputColor",function(){return{restrict:"E",templateUrl:"directives/inputColor.tpl.html",replace:!0,controller:"InputColorCtrl",scope:{selectColor:"=",defaultColor:"=",theme:"@"}}}),angular.module("app.directives.keymap",["services.scene","services.history","services.select"]).directive("eqxKeymap",["sceneService","historyService","selectService",function(e){return{restrict:"A",link:function(t){var i=$(document);t.$on("$destroy",function(){i.unbind("keydown")}),i.unbind("keydown").keydown(function(i){if((i.ctrlKey||i.metaKey)&&90===i.keyCode&&e.historyBack(),
(i.ctrlKey||i.metaKey)&&89===i.keyCode&&e.historyForward(),(i.ctrlKey||i.metaKey)&&86===i.keyCode){if($("#btn-toolbar").length||$(".modal-dialog").length)return;e.getCopy()&&e.pasteElement()}if((i.ctrlKey||i.metaKey)&&67===i.keyCode){if($("#btn-toolbar").length||$(".modal-dialog").length)return;e.copyElement()}t.$apply()})}}}]),angular.module("app.directives.limitInput",[]).directive("limitInput",function(){return{require:"ngModel",link:function(e,t,i,n){"transform"===i.cssItem&&e.$on("updateTransform",function(t,i,a){a===e.elemDef.id&&(n.$setViewValue(parseInt(i,10)),n.$render())}),"borderRadius"===i.cssItem&&e.$on("updateMaxRadius",function(t,i){e.maxRadius=parseInt(Math.min($(i).outerWidth(),$(i).outerHeight())/2+10,10),e.maxRadius<e.model.borderRadius&&(n.$setViewValue(e.maxRadius),n.$render()),e.$apply()}),e.$watch(function(){return $(t).val()},function(e){Math.abs(e)>i.max&&(n.$setViewValue(i.max),n.$render()),Math.abs(e)<i.min&&(n.$setViewValue(i.min),n.$render())})}}}),angular.module("app.directives.lineChart",[]).directive("lineChart",function(){return{restrict:"EA",link:function(e,t,i){var n,a;e.$watch(function(){return i.data},function(){i.data&&(n=JSON.parse(i.data)),a?(a.destroy(),a=new Chart(t[0].getContext("2d")).Line(n,{scaleFontColor:"#fff"})):a=new Chart(t[0].getContext("2d")).Line(n,{scaleFontColor:"#fff"})})}}}),angular.module("app.directives.loading",[]).directive("loginLoading",function(){return{restrict:"EA",link:function(e,t){e.$on("loginLoading",function(){var e=$('<div class="homeMask" style="position: absolute;width: 100%;top:0;bottom:0;background-color:#ccc;opacity:0.8;">正在跳转，请稍后...</div>');e.appendTo($(t))})}}}),angular.module("app.directives.comp.editor",[]).directive("mapEditor",function(){return{restrict:"AE",templateUrl:"directives/mapeditor.tpl.html",link:function(e){var t=new BMap.Map("l-map");t.centerAndZoom(new BMap.Point(116.404,39.915),15);var i={onSearchComplete:function(e){if(n.getStatus()===BMAP_STATUS_SUCCESS){for(var t=[],i=0;i<e.getCurrentNumPois();i++)t.push(e.getPoi(i).title+", "+e.getPoi(i).address);document.getElementById("r-result").innerHTML=t.join("<br/>")}}},n=new BMap.LocalSearch(t,i);e.searchAddress=function(){n.search(e.address)}}}}),angular.module("app.directives.notification",[]).directive("notificationFadeout",["i18nNotifications",function(e){return{restrict:"EA",link:function(t,i){var n=$(i);n.fadeOut(4e3,function(){e.remove(t.notification)})}}}]),angular.module("app.directives.pageTplTypes",[]).directive("pageTplTypes",["pageTplService",function(e){return{restrict:"EA",replace:!0,templateUrl:"directives/page-tpl-types.tpl.html",link:function(t){e.getPageTplTypes().then(function(e){e.data.list&&e.data.list.length>0?t.pageTplTypes=e.data.list:t.pageTplTypes=[]})}}}]),angular.module("app.directives.pieChart",[]).directive("pieChart",function(){return{restrict:"EA",link:function(e,t,i){var n,a;e.$watch(function(){return i.data},function(){i.data&&(a=JSON.parse(i.data)),n?(n.destroy(),n=new Chart(t[0].getContext("2d")).Pie(a)):n=new Chart(t[0].getContext("2d")).Pie(a)})}}}),angular.module("order.task.preview",[]).controller("OrderTaskPreviewCtrl",["$scope","pageTpl",function(e,t){e.pageTpl=t,e.cancel=function(){e.$dismiss()}}]).directive("orderTaskPreview",["$modal",function(e){function t(t,i){i.on("$destroy",function(){i.unbind("click")}),i.click(function(){e.open({windowClass:"order-task-preview",templateUrl:"directives/preview.tpl.html",controller:"OrderTaskPreviewCtrl",resolve:{pageTpl:function(){return t.pageTpl}}})})}return{restrict:"EA",scope:{pageTpl:"="},link:t}}]),angular.module("app.directives.qrcode",[]).directive("qrCode",function(){return{restrict:"A",scope:{qrUrl:"@"},link:function(e,t,i){var n=new RegExp("^"+PREFIX_HOST+"/s/");e.$watch("qrUrl",function(e){$("canvas",t).length>0&&$("canvas",t).remove(),e&&(n.test(e)&&(e=e.replace(PREFIX_HOST,PREFIX_HOST_ARRAY[Math.floor(12*Math.random())%12])),$(t).qrcode({render:"canvas",width:180,height:180,text:e+(/\?/.test(e)?"&":"?")+"eqrcode=1"}))})}}}).directive("qrCodeSize",function(){return{restrict:"A",scope:{qrUrl:"@"},link:function(e,t,i){var n=parseInt(i.qrCodeSize,10);e.$watch("qrUrl",function(e){$("canvas",t).length>0&&$("canvas",t).remove(),e&&$(t).qrcode({render:"canvas",width:n,height:n,text:e+(/\?/.test(e)?"&":"?")+"eqrcode=1"})})}}}).directive("downloadCanvas",function(){return{restrict:"EA",link:function(e,t){e.$on("download.canvas",function(i,n){var a,s="png";$.each($(t).find(".qr-size"),function(e,t){$(t).attr("qr-code-size")===n&&(a=$(t).find("canvas").get(0))}),n===$(t).find(".qr-size").attr("qrCodeSize")&&console.log(n);var o=document.createElement("a"),r=document.createEvent("MouseEvents"),l=a.toDataURL("image/png"),c=function(e){e=e.toLowerCase().replace(/jpg/i,"jpeg");var t=e.match(/png|jpeg|bmp|gif/)[0];return"image/"+t};l=l.replace(c(s),"image/octet-stream"),r.initEvent("click",!0,!0),o.download=e.scene.code+".png",o.href=l,o.dispatchEvent(r)})}}}),angular.module("app.directives.responsiveImage",[]).directive("responsiveImage",function(){return{restrict:"EA",scope:{file:"="},link:function(e,t){""+e.fileType!="0"&&(t.find("img").length?$element=t.find("img"):"IMG"===t.get(0).nodeName.toUpperCase()&&($element=t),$element.bind("load",function(){$(this).removeAttr("style");var t=$(this).parent("li").width(),i=$(this).parent("li").height();e.file&&(e.file.shape={width:$(this).width(),height:$(this).height()}),this.width<=t&&this.height<=i?(this.style.top="50%",this.style.marginTop="-"+this.height/2+"px",this.style.left="50%",this.style.marginLeft="-"+this.width/2+"px"):this.width>this.height?(this.style.width=t+"px",this.height=this.height*t/this.width,this.style.top="50%",this.style.marginTop="-"+this.height/2+"px"):(this.style.height=i+"px",this.width=this.width*i/this.height,this.style.left="50%",this.style.marginLeft="-"+this.width/2+"px")}))}}}),angular.module("common.directives.scroll",[]).directive("eqdScroll",function(){var e={mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0,click:!0,bounce:!1};return function(t,i,n){i.css({position:"relative",overflow:"hidden"}),i.hasClass("scroll_showTp")&&i.css({overflow:"visible",marginTop:"48px",height:"calc(100% - 76px)"}),delete e.disableMouse,delete e.preventDefaultException,n.preventException&&(e.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|DIV|SPAN|EM|A|LI|B|IMG)$/}),"true"===n.disableMouse&&(e.disableMouse=!0);var a,s=new IScroll(i.get(0),e),o=t.$watch(function(){clearTimeout(a),a=setTimeout(function(){s.refresh()},100)});n.refresh&&(s.on("scrollStart",function(){i.children().on("mousewheel",function(){s.y<=s.maxScrollY+200&&t.$eval(n.refresh)})}),s.on("scrollEnd",function(){i.children().unbind("mousewheel")})),n.changePos&&s.on("scrollEnd",function(){t.pos={y:s.y},t.$eval(n.changePos)}),i.on("$destroy",function(){s.destroy(),s=null,o(),clearTimeout(a)}),t.$on("scroll.refresh."+n.scroll,function(){a=setTimeout(function(){s.refresh()},100)}),t.$on("scroll.scrollTo",function(e,t,i){s.scrollTo(t,i)})}}),angular.module("common.directives.dropDown",[]).directive("eqdSelect",["$rootScope","$timeout",function(e,t){function i(i,n){function a(){o.unbind("click",a),i.inputVisabel=!1,r.removeClass("visible")}function s(e){index=e.index(),i.current=i.list[index],r.removeClass("visible")}var o=$(document),r=n.find(".eqc-drop-down-list"),l=r.find(".iScrollIndicator"),c=n.find(".select-input");i.inputModel={name:"",value:""},n.on("$destroy",function(){o.unbind("click",a)}),i.showList=function(t){return t.stopPropagation(),r.hasClass("visible")?void a():(e.$broadcast("iscroll.refresh."+i.scrollType),$(".eqc-drop-down-list").removeClass("visible"),r.addClass("visible"),o.click(function(){i.$apply(function(){a()})}),void l.click(function(e){e.stopPropagation()}))},i.selectItem=function(e){e.stopPropagation();var t=e.target,i=t.tagName.toLowerCase(),n=$(t);"li"===i?s(n):"div"===i&&(n=n.closest("li"),s(n))},i.changeInput=function(){i.inputModel.name=i.inputModel.value,i.current=i.inputModel},i.showInput=function(e){i.canInput&&(e.stopPropagation(),i.inputVisabel=!0,i.inputModel.name=i.current.name,i.inputModel.value=i.current.value,t(function(){c.focus(),c.select()}))},i.blurInput=function(){a()}}return{restrict:"E",replace:!0,templateUrl:"directives/select.tpl.html",scope:{list:"=",current:"=",scrollType:"@",fontFamily:"=",isBorder:"@",x:"@",canInput:"@"},link:i}}]).controller("SimpleSelectController",["$scope","$element","$attrs","$parse","$timeout",function(e,t,i,n,a){var s=this;e.list=[],e.current=null,s.addSelectChoice=function(t){e.list.push(t)},s.removeSelectChoice=function(t){var i=e.list.indexOf(t);i!==-1&&e.list.splice(i,1)};var o;s.setObjectConfig=function(e){void 0===o&&(o=e)},e.setDefaultSelectedValue=function(){angular.forEach(e.list,function(t){t.value==e.model&&(e.current=t)})};var r=e.$watchCollection("list",function(){e.setDefaultSelectedValue()}),l=e.$watch("current",function(t){t&&e.model!=t.value&&(e.model=t.value,a(function(){i.change&&e.$parent.$eval(i.change)},100))},!0),c=e.$watch("model",function(t){t&&e.setDefaultSelectedValue()});e.$on("$destroy",function(){r(),l(),c()}),e.$watch("model",function(t,i){i!=t&&angular.forEach(e.list,function(t){t.value==e.model&&(e.current=t)}),e.canInput&&(e.current&&e.current.value===t||(e.current={name:t,value:t}))})}]).directive("eqxSelect",["$compile",function(e){var t='<eqd-select can-input="{{canInput}}" list="list" class="select-contain" current="current"></eqd-select>';return{restrict:"E",scope:{model:"=",canInput:"@"},controller:"SimpleSelectController",compile:function(i,n){var a=n["class"];return i.removeClass(a),function(i,n){n.append(e(angular.element(t).addClass(a))(i))}}}}]).directive("eqxSelectOption",["$parse","$interpolate",function(e,t){return{restrict:"E",require:"^eqxSelect",compile:function(i,n){var a,s;return n.ngRepeat&&(a=e(n.value),s=t(i.html())),function(e,t,i,n){t.css("display","none");var o;if(a){var r=a(e);n.setObjectConfig(angular.isObject(r)),o={name:s(e),value:r}}else o={name:t.html(),value:e.$parent.$eval(i.value)};n.addSelectChoice(o),t.on("$destroy",function(){n.removeSelectChoice(o)})}}}}]),angular.module("app.directives.numChangeAnim",[]).directive("numChangeAnim",["$filter",function(e){return{restrict:"A",scope:{content:"@"},link:function(t,i){function n(e,t){return Math.floor(e+Math.random()*(t-e))}function a(e,t){e=e>0?e:1;for(var i=Math.floor(Math.log10(e)),a=Math.floor(e/Math.pow(10,i)),s=0,o=10,r=function(r){setTimeout(function(){if(o<10)s=r;else{var l=r<i?r:i,c=Math.pow(10,l)*a;c=c.toString().length==e.toString().length?e:c,s=n(s,c)}t(s,9==r)},(r*r+r+2)/2*30)},l=0;l<o;l++)r(l)}function s(t,i){$(t).children("span").text(e("number")(i))}t.$watch("content",function(e){if(e){var t=parseInt(e,10);a(t,function(e,n){s(i,e),n&&(s(i,t),$(i).addClass("heartbeat").css({"animation-duration":"1s"}))})}})}}}]),angular.module("app.directives.style",[]).directive("panelDraggable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable(),$(window).bind("resize",function(){$(t).css({left:$(document).width()-444,top:50})})}}}),function(){var e={};angular.forEach(["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke"],function(t){e[t]=["$rootScope","$location","$interpolate","$sniffer","urlResolve","computeSVGAttrValue","svgAttrExpressions",function(e,i,n,a,s,o,r){return{restrict:"A",link:function(n,s,l){function c(){var e=o(d);e&&l[t]!==e&&l.$set(t,e)}var d;r.SVG_ELEMENT.test(s[0]&&s[0].toString())&&i.$$html5&&a.history&&(d=l[t],l.$observe(t,c),e.$on("$locationChangeSuccess",c))}}}]}),angular.module("ngSVGAttributes",[]).factory("urlResolve",[function(){var e=document.createElement("a");return function(t){return e.setAttribute("href",t),e}}]).value("svgAttrExpressions",{FUNC_URI:/^url\((.*)\)$/,SVG_ELEMENT:/SVG[a-zA-Z]*Element/,HASH_PART:/#.*/}).factory("computeSVGAttrValue",["$location","$sniffer","svgAttrExpressions","urlResolve",function(e,t,i,n){return function(t){var a,s;return(a=i.FUNC_URI.exec(t))&&(s=0===a[1].indexOf("#")?e.absUrl().replace(i.HASH_PART,"")+a[1]:n(a[1])),s?"url("+s+")":null}}]).directive(e).directive("use",["$rootScope",function(e){return{restrict:"E",link:function(t,i){function n(){var e=i.attr("xlink:href"),t=e.split("#")[1];t&&i.attr("xlink:href",document.location+"#"+t)}n(),e.$on("$locationChangeSuccess",n)}}}])}(),angular.module("app.directives.switchInput",[]).directive("switchInput",function(){function e(e,t){t.hover(function(){e.obj.showinput=!0;var i=t.find("input");setTimeout(function(){i.focus(),i.select()},0),e.$apply()},function(){e.obj.showinput=!1,e.$apply()})}return{restrict:"EA",scope:{obj:"="},link:e}}),angular.module("app.directives.component",["services.scene","services.select","scene.create.console.pictures","scene.edit.trigger"]).directive("compDraggable",function(){return{restrict:"A",link:function(e,t,i){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable({revert:!1,stack:".comp-draggable",helper:"panel"===i.compDraggable||"page"===i.compDraggable?"clone":"",appendTo:"parent",containment:"panel"==i.compDraggable||"page"===i.compDraggable?"":"parent",zIndex:1049,opacity:.35,stop:function(e){$(e.toElement).one("click",function(e){e.stopImmediatePropagation()})}})}}}).directive("compDroppable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),t.on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null});var i=t.height(),n=i/2-260+50,a=t.width(),s=a/2-187+288+27;$(t).droppable({accept:".comp-draggable",hoverClass:"drop-hover",drop:function(t,i){if(3!=i.draggable.attr("ctype")&&"trigger"!=i.draggable.attr("ctype")){var a={left:i.offset.left-s+"px",top:i.offset.top-n+"px"};"panel"===i.draggable.attr("comp-draggable")?e.createComp(i.draggable.attr("ctype"),i.draggable.attr("font"),a):e.updateCompPosition(i.draggable.attr("id"),null,a)}else"trigger"===i.draggable.attr("ctype")?e.openTriggerMode():e.createComp(3)}})}}}).directive("compSortable",function(){return{restrict:"A",link:function(e,t){$(t).sortable({axis:"y",update:function(){}})}}}).directive("compResizable",function(){return{restrict:"A",link:function(e,t){$(t).resizable({autoHide:!1,containment:"parent",stop:function(t,i){if("4"===$(i.element).attr("ctype").charAt(0)||"n"===$(i.element).attr("ctype").charAt(0)){var n={width:i.size.width,height:i.size.height,imgStyle:{width:i.element.find("img").width(),height:i.element.find("img").height(),marginTop:i.element.find("img").css("marginTop"),marginLeft:i.element.find("img").css("marginLeft")}};e.updateCompSize(i.element.attr("id"),n)}else e.updateCompSize(i.element.attr("id"),i.size);$(t.toElement).one("click",function(e){e.stopImmediatePropagation()})},resize:function(e,i){var n=$(t).find("img").width()/$(t).find("img").height();if("4"===$(i.element).attr("ctype").charAt(0)||"n"===$(i.element).attr("ctype").charAt(0)){var a=i.size.width/i.size.height,s=i.element.find("img");n>=a?(s.outerHeight(i.size.height),s.outerWidth(i.size.height*n),s.css("marginLeft",-(s.outerWidth()-i.size.width)/2),s.css("marginTop",0)):(s.outerWidth(i.size.width),s.outerHeight(i.size.width/n),s.css("marginTop",-(s.outerHeight()-i.size.height)/2),s.css("marginLeft",0))}else i.element.find(".element").outerWidth(i.size.width),i.element.find(".element").outerHeight(i.size.height)}})}}}).directive("photoDraggable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable({revert:!1,helper:"clone",appendTo:".img_list",zIndex:1049,opacity:.35,stop:function(e){$(e.toElement).one("click",function(e){e.stopImmediatePropagation()})}})}}}).directive("cropDroppable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),t.on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),$(t).droppable({accept:"li",hoverClass:"drop-hover",drop:function(t,i){e.preSelectImage(i.draggable.attr("photo-draggable"))}})}}}).service("Point",function(){function e(e,t){this.x=e,this.y=t}return e.prototype.add=function(t,i){return new e(this.x+t,this.y+i)},e.prototype.middle=function(t){return new e((this.x+t.x)/2,(this.y+t.y)/2)},e.prototype.detectionPointA=function(e){this.x=e.x<this.x?e.x:this.x,this.y=e.y<this.y?e.y:this.y},e.prototype.detectionPointB=function(e){this.x=e.x>this.x?e.x:this.x,this.y=e.y>this.y?e.y:this.y},e}).factory("DetectionBox",["Point","editService",function(e,t){function i(e){this.element=e,this.init()}return i.prototype.init=function(){var i=this.element.position(),n=$("div[edit-workspace]").attr("scale");this.startPointA=new e(Math.ceil(i.left),Math.ceil(i.top)),this.originPointA=new e(Math.ceil(i.left/n),Math.ceil(i.top/n));var a=this.element.get(0);this.startPosition={top:parseInt(a.style.top,10)||0,left:parseInt(a.style.left,10)||0};var s=/[0-9]*[.]*[0-9]*deg/.exec(a.style.transform||a.style.webkitTransform||a.style.mozTransform||a.style.msTransform||a.style.oTransform||""),o=s&&s.length?s[0]:"0";this.angle=parseInt(o,10),this.radian=2*this.angle*Math.PI/360;var r=this.element.width()*t.currentScale,l=this.element.height()*t.currentScale;this.elementWidth=r,this.elementHeight=l,this.left=this.startPosition.left,this.top=this.startPosition.top,this.ratio=r/l,this.width=Math.abs(r*Math.cos(this.radian))+Math.abs(l*Math.sin(this.radian)),this.height=Math.abs(r*Math.sin(this.radian))+Math.abs(l*Math.cos(this.radian)),this.startPointB=this.startPointA.add(this.width,this.height),this.originPointB=this.originPointA.add(this.width/t.currentScale,this.height/t.currentScale),this.startPointO=this.startPointA.middle(this.startPointB)},i.prototype.getID=function(){return this.element.attr("id")},i.prototype.measure=function(){return{x:this.startPointA.x,y:this.startPointA.y,width:this.width,height:this.height}},i}]).service("panStateTracker",function(){var e={},t={};return e.clear=function(){t={}},e.register=function(e){t[e.attr("id")]=e},e.isElementHasBeenRegisted=function(e){return!!t[e.attr("id")]},e.remove=function(e){delete t[e.attr("id")]},e.forEach=function(e){angular.forEach(t,e)},e}).controller("MouseCompSelectController",["$scope","$element","Point","DetectionBox","panStateTracker","selectService","editService",function(e,t,i,n,a,s,o){function r(e,n,a,s,o){t.get(0).style.position="relative",this.startPositionX=e,this.startPositionY=n,this.width=a,this.height=s,this.selectAreaPointA=new i(e,n),this.selectAreaPointB=new i(e+a,n+s),this.startFlag=o,this.selectAreaTemplate=t.find(".edit-area-select-container"),this.selectAreaTemplate.length||(this.selectAreaTemplate=$('<div class="edit-area-select-container"></div>'),t.append(this.selectAreaTemplate));var r=t.offset(),l=$("#nr").offset();this.offset=r,this.containerOffset=l,$(window).resize(function(){angular.extend(r,t.offset()),angular.extend(l,$("#nr").offset())})}t.css("user-select","none");var l=this;l.allComponents=[],l.selectedComponents=[],r.prototype.selectStart=function(e,i){angular.extend(this.offset,t.offset()),angular.extend(this.containerOffset,$("#nr").offset()),l.allComponents=[],a.forEach(function(e){l.allComponents.push(e)}),this.startPositionX=e,this.startPositionY=i,this.startFlag=!0,this.updateSelectedElements()},r.prototype.isSelectStarted=function(){return this.startFlag},r.prototype.selectMove=function(e){this.width=e.clientX-this.startPositionX,this.height=e.clientY-this.startPositionY,this.updateCurrentPosition(),this.width>4&&this.height>4&&(this.updateSelectArea(),this.updateSelectedElements())},r.prototype.selectEnd=function(){this.startPositionX=this.startPositionY=this.width=this.height=0,this.startFlag=!1,this.updateCurrentPosition(),this.updateSelectArea()},r.prototype.getLocalPoint=function(e){return new i(e.x-this.offset.left,e.y-this.offset.top)},r.prototype.updateSelectArea=function(){var e=this.getLocalPoint(this.selectAreaPointA);this.selectAreaTemplate.css("left",e.x),this.selectAreaTemplate.css("top",e.y),this.selectAreaTemplate.height(this.height),this.selectAreaTemplate.width(this.width)},r.prototype.updateCurrentPosition=function(){this.selectAreaPointA.x=this.width>0?this.startPositionX:this.width+this.startPositionX,this.selectAreaPointA.y=this.height>0?this.startPositionY:this.height+this.startPositionY,this.width=Math.abs(this.width),this.height=Math.abs(this.height),this.selectAreaPointB.x=this.selectAreaPointA.x+this.width,this.selectAreaPointB.y=this.selectAreaPointA.y+this.height},r.prototype.updateSelectedElements=function(){l.selectedComponents=[];var e=this,t=s.getElements();angular.forEach(l.allComponents,function(i){var n=i.attr("id").split("_")[1];return e.contains(i)?(i.children(".bar").show(),void(t.indexOf(n)===-1&&s.addElement(n))):(t.indexOf(n)!==-1&&s.deleteElement(n),void i.children(".bar").hide())})},r.prototype.contains=function(e){var t=new n(e),a=new i(this.containerOffset.left+t.startPointO.x*o.currentScale,this.containerOffset.top+t.startPointO.y*o.currentScale);return a.x>=this.selectAreaPointA.x&&a.x<=this.selectAreaPointB.x&&a.y>=this.selectAreaPointA.y&&a.y<=this.selectAreaPointB.y};var c=new r(0,0,0,0,(!1));t.bind("mousedown",function(e){var t=$(e.target);$("#nr").find(".mask-trigger").length||t.hasClass("comp-resize")||t.parents("li.comp-resize").length||t.hasClass("ui-draggable")||t.parents(".ui-draggable").length||t.parents("#containment").length||t.parents(".create_left").length||($("body").css({"user-select":"none",cursor:"default"}),c.selectStart(e.clientX,e.clientY))}),t.bind("mousemove",function(e){c.isSelectStarted()&&c.selectMove(e)}),t.bind("mouseup",function(){c.isSelectStarted()&&($("body").css({"user-select":"initial",cursor:"default"}),c.selectEnd())})}]).directive("mouseCompSelect",[function(){return{restrict:"A",controller:"MouseCompSelectController"}}]).factory("editAreaBorderCollisionDetector",["DetectionBox","Point","editService",function(e,t,i){function n(){this.editAreaWidth=320,this.editAreaHeight=486,this.detectionBoxs=[]}function a(){this.editArea=new n}return n.prototype.initDetectBoxWithElements=function(t){this.detectionBoxs=[];var i=this;angular.forEach(t,function(t){i.detectionBoxs.push(new e(t))})},a.prototype.initWithElements=function(e){this.editArea.initDetectBoxWithElements(e),this.initBigDetectionBoxPoints()},a.prototype.initBigDetectionBoxPoints=function(){this.bigDetectionBoxPointA=new t(this.editArea.editAreaWidth,this.editArea.editAreaHeight),this.bigDetectionBoxPointB=new t(0,0),this.minimumWidth=this.editArea.editAreaWidth,this.minimumHeight=this.editArea.editAreaHeight;var e=this;angular.forEach(this.editArea.detectionBoxs,function(t){e.bigDetectionBoxPointA.detectionPointA(t.startPointA),e.bigDetectionBoxPointB.detectionPointB(t.startPointB),e.minimumWidth=t.elementWidth,e.minimumHeight=t.elementHeight});var i=(this.bigDetectionBoxPointA.x+this.bigDetectionBoxPointB.x)/2,n=(this.bigDetectionBoxPointA.y+this.bigDetectionBoxPointB.y)/2;this.bigDetectionBoxPointO=new t(i,n)},a.prototype.refreshBoxInfo=function(){angular.forEach(this.editArea.detectionBoxs,function(e){e.init()}),this.initBigDetectionBoxPoints()},a.prototype.translateIntoProperMoveDelta=function(e){var t={x:e.deltaX/i.currentScale,y:e.deltaY/i.currentScale};return t},a.prototype.compDragMoveDelta=function(e){return this.translateIntoProperMoveDelta(e)},new a}]).controller("MultiCompDragController",["selectService","$scope","$element","editAreaBorderCollisionDetector","panStateTracker","gridGuide","$rootScope",function(e,t,i,n,a,s,o){a.clear();var r=this;r.selectedComponents=[],r.initCollisionDetectorWithElements=function(){r.selectedComponents=[];var t=$("#nr");angular.forEach(e.getElements(),function(e){r.selectedComponents.push(t.find("#inside_"+e))}),n.initWithElements(r.selectedComponents)},r.isKeyboard=!1,r.compDragStart=function(t){e.getElements().length&&(r.initCollisionDetectorWithElements(),s.guide.start({action:"move"}),r.isKeyboard=!!t,r.isKeyboard||angular.forEach(r.selectedComponents,function(e){e.css("opacity",.35)}))},r.compDragMove=function(t){if(e.getElements().length){var i=n.compDragMoveDelta({deltaX:t.deltaX,deltaY:t.deltaY});!r.isKeyboard&&s.guide.options.snap&&s.guide.enforceGuides(i),angular.forEach(n.editArea.detectionBoxs,function(e){var t="translate3d("+i.x+"px, "+i.y+"px, 0) rotateZ("+e.angle+"deg)";e.element.css("transform",t)}),s.guide.sync(i),o.$broadcast("boxOuter")}},r.compDragEnd=function(i){if(e.getElements().length){angular.forEach(r.selectedComponents,function(e){e.attr("compOpacity")?e.css("opacity",e.attr("compOpacity")):e.css("opacity",1)});var a=n.compDragMoveDelta({deltaX:i.deltaX,deltaY:i.deltaY});!r.isKeyboard&&s.guide.options.snap&&s.guide.enforceGuides(a);var l=n.editArea.detectionBoxs.length;angular.forEach(n.editArea.detectionBoxs,function(e,i){var n="translate3d(0, 0, 0) rotateZ("+e.angle+"deg)";e.element.css("transform",n);var s={top:e.startPosition.top+a.y,left:e.startPosition.left+a.x};e.element.css("top",s.top),e.element.css("left",s.left),t.updateCompPosition(e.element.attr("id"),s,i<l-1)}),s.guide.stop(),o.$broadcast("boxOuter")}},s.grid.init(i),s.guide.init(i)}]).directive("multiCompDrag",function(){return{restrict:"A",controller:"MultiCompDragController"}}).directive("compDrag",["panStateTracker","$rootScope",function(e){return{require:"^multiCompDrag",restrict:"A",link:function(t,i,n,a){if(!e.isElementHasBeenRegisted(i)){if(e.register(i),i.on("$destroy",function(){e.remove(i)}),i.find("img").length){var s=$('<div class="dragTemplate" style="position: absolute;left: 0;top: 0;right: 0;bottom: 0;background-color: #fff;opacity: 0;"></div>');s.bind("dblclick",function(){s.siblings(".element").trigger("dblclick")}),i.find(".element-box-contents").append(s)}var o=new Hammer(i.find(".element-box").get(0));o.get("pan").set({threshold:0}),o.on("panstart",function(e){return!$(".edit_area").find(".switch").length&&(!i.hasClass("inside-active")&&(e.preventDefault(),e.srcEvent.preventDefault(),$("body").css({"user-select":"none",cursor:"default"}),void a.compDragStart()))}),o.on("panmove",function(e){return e.preventDefault(),!$(".edit_area").find(".switch").length&&(!i.hasClass("inside-active")&&void a.compDragMove(e))}),o.on("panend",function(e){return!$(".edit_area").find(".switch").length&&(!i.hasClass("inside-active")&&(a.compDragEnd(e),$("body").css({"user-select":"initial",cursor:"default"}),void $(e.srcEvent.target).one("click",function(e){return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1})))})}}}}]).directive("compRotate",["$rootScope","editService",function(e,t){return{restrict:"A",link:function(i,n){var a=$(n),s=$('<div class="bar bar-rotate bar-radius radius-s'+t.scaleIndex+" rotate"+t.scaleIndex+'">');a.append(s).append('<div class="bar bar-line">');var o,r={},l=new Hammer(s.get(0));l.get("pan").set({threshold:0}),l.on("panstart",function(){$("body").css({"user-select":"none",cursor:'url("/assets/images/mouserotate.ico"), default'}),r={x:a.offset().left+a.width()/2*t.currentScale,y:a.offset().top+a.height()/2*t.currentScale}}),l.on("panmove",function(t){var i=t.center,n=i.x-r.x,s=i.y-r.y,l=Math.abs(n/s);o=Math.atan(l)/(2*Math.PI)*360,n>0&&s<0?o=360+o:n>0&&s>0?o=180-o:n<0&&s>0?o=180+o:n<0&&s<0&&(o=360-o),o>360&&(o-=360),a.css({transform:"rotateZ("+o+"deg)"}),e.$broadcast("boxOuter")}),l.on("panend",function(){$("body").css({"user-select":"initial",cursor:"default"}),i.updateCompAngle(a.attr("id"),o),i.$broadcast("updateTransform",o,a.attr("id").split("_")[1]),e.$broadcast("boxOuter","rotateEnd")})}}}]).directive("compResize",["selectService","picturesService","triggerService","panStateTracker","multiCompResize","Cursor","gridGuide","$rootScope","sceneService","editService",function(e,t,i,n,a,s,o,r,l,c){function d(e,t,i,n,s,l){i.css("cursor",n);var c=new Hammer(i.get(0));c.get("pan").set({threshold:0,direction:Hammer.DIRECTION_ALL}),c.on("panstart",function(){$("body").css({"user-select":"none",cursor:"default"}),a.resizeStart(t),o.guide.start({action:"resize"})}),c.on("panmove",function(e){var i=a.resizeMove(t,n,e,s,l);o.guide.sync(i),r.$broadcast("boxOuter")}),c.on("panend",function(){$("body").css({"user-select":"initial",cursor:"default"}),a.resizeEnd(e,t),o.guide.stop(),r.$broadcast("boxOuter")})}return{restrict:"A",link:function(t,i,n){var a=n.minH,o=n.minW,p=c.scaleIndex,u=$('<div class="bar bar-n bar-n'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),h=$('<div class="bar bar-s bar-s'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),g=$('<div class="bar bar-e bar-e'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),m=$('<div class="bar bar-w bar-w'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),f=$('<div class="bar bar-ne'+p+" bar-radius radius-s"+p+'">'),v=$('<div class="bar bar-nw'+p+" bar-radius radius-s"+p+'">'),b=$('<div class="bar bar-se'+p+" bar-radius radius-s"+p+'">'),y=$('<div class="bar bar-sw'+p+" bar-radius radius-s"+p+'">');i.append(u).append(h).append(g).append(m).append(v).append(b).append(y).append(f).unbind("mousedown").mousedown(function(i){var n=!!$("#nr").find(".mask-trigger").length;if(!n){var a=$(this).attr("id").split("_")[1];if(l.currentElemDef=l.getElementsMap()[a],"p"!==l.currentElemDef.type){if($("#comp_setting").length&&"n"!==l.currentElemDef.type&&!i.ctrlKey&&!i.shiftKey){if("none"!==$(this).children(".bar").first().css("display"))return;r.$broadcast("showStylePanel")}}else $("#comp_setting").hide();if(i.ctrlKey||i.shiftKey)"none"!==$(this).children(".bar").first().css("display")?($(this).children(".bar").hide(),e.deleteElement(a)):($(this).children(".bar").show(),e.addElement(a)),1===e.getElements().length&&(l.currentElemDef=l.getElementsMap()[e.getElements()[0]],"z"===l.currentElemDef.type?r.$broadcast("showStylePanel",{activeTab:"dropdown"}):r.$broadcast("showStylePanel",{activeTab:"style"}));else{if("none"!==$(this).children(".bar").first().css("display"))return;$(this).children(".bar").show().end(),$.each(e.getElements(),function(e,t){a!==t&&$("#inside_"+t).children(".bar").hide()}),e.clearElements(),e.addElement(a)}t.safeApply(function(){})}}),i.find(".element-box").unbind("click").bind("click",function(e){(e.ctrlKey||e.shiftKey)&&e.stopPropagation()}),i.parent().unbind("mousedown").mousedown(function(i){$(i.target).closest("li").length||($(this).children("li").children(".bar").hide(),t.$emit("hideStylePanel"),e.clearElements(),t.safeApply(function(){}))}),d(t,i,g,s.RESIZE_E,a,o),d(t,i,m,s.RESIZE_W,a,o),d(t,i,u,s.RESIZE_N,a,o),d(t,i,h,s.RESIZE_S,a,o),d(t,i,f,s.RESIZE_NE,a,o),d(t,i,v,s.RESIZE_NW,a,o),d(t,i,b,s.RESIZE_SE,a,o),d(t,i,y,s.RESIZE_SW,a,o)}}}]).service("Cursor",function(){var e={RESIZE_W:"w-resize",RESIZE_E:"e-resize",RESIZE_N:"n-resize",RESIZE_S:"s-resize",RESIZE_SE:"se-resize",RESIZE_SW:"sw-resize",RESIZE_NE:"ne-resize",RESIZE_NW:"nw-resize"};return e}).factory("multiCompResize",["selectService","picturesService","Cursor","editAreaBorderCollisionDetector","sceneService","editService",function(e,t,i,n,a,s){var o,r,l=1,c=1,d=(n.editArea.editAreaWidth,n.editArea.editAreaHeight,null),p=null,u={};return u.selectedComponents=[],u.initCollisionDetectorWithElements=function(){u.selectedComponents=[];var t=$("#nr");angular.forEach(e.getElements(),function(e){u.selectedComponents.push(t.find("#inside_"+e))}),n.initWithElements(u.selectedComponents)},u.resizeStart=function(){u.initCollisionDetectorWithElements(),d=n.bigDetectionBoxPointA,p=n.bigDetectionBoxPointB,o=n.minimumWidth,r=n.minimumHeight},u.checkTopBorder=function(){
return this},u.checkRightBorder=function(){return this},u.checkLeftBorder=function(){return this},u.checkBottomBorder=function(){return this},u.checkMinHeight=function(e,t,i,n){var a=Math.floor(i-n);return e.deltaY*t>a&&(e.deltaY=a*t),this},u.checkMinWidth=function(e,t,i,n){var a=Math.floor(i-n);return e.deltaX*t>a&&(e.deltaX=a*t),this},u.compResizeWithRatio=function(e,t,a,s){switch(t){case i.RESIZE_SE:angular.forEach(n.editArea.detectionBoxs,function(t){var i=parseInt(e.deltaY*t.ratio,10),n=e.deltaY,o={deltaX:i,deltaY:n};u.checkMinHeight(o,-1,t.elementHeight,a||c).checkMinWidth(o,-1,t.elementWidth,s||l),i!==o.deltaX&&(n=o.deltaX/t.ratio,o.deltaY=Math.abs(n)<Math.abs(o.deltaY)?n:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX});break;case i.RESIZE_SW:angular.forEach(n.editArea.detectionBoxs,function(t){var i=parseInt(-e.deltaY*t.ratio,10),n=e.deltaY,o={deltaX:i,deltaY:n};u.checkMinHeight(o,-1,t.elementHeight,a||c).checkMinWidth(o,1,t.elementWidth,s||l),i!==o.deltaX&&(n=-o.deltaX/t.ratio,o.deltaY=Math.abs(n)<Math.abs(o.deltaY)?n:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX});break;case i.RESIZE_NE:angular.forEach(n.editArea.detectionBoxs,function(t){var i=parseInt(-e.deltaY*t.ratio,10),n=e.deltaY,o={deltaX:i,deltaY:n};u.checkMinHeight(o,1,t.elementHeight,a||c).checkMinWidth(o,-1,t.elementWidth,s||l),i!==o.deltaX&&(n=-o.deltaX/t.ratio,o.deltaY=Math.abs(n)<Math.abs(o.deltaY)?n:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX});break;case i.RESIZE_NW:angular.forEach(n.editArea.detectionBoxs,function(t){var i=parseInt(e.deltaY*t.ratio,10),n=e.deltaY,o={deltaX:i,deltaY:n};u.checkMinHeight(o,1,t.elementHeight,a||c).checkMinWidth(o,1,t.elementWidth,s||l),i!==o.deltaX&&(n=o.deltaX/t.ratio,o.deltaY=Math.abs(n)<Math.abs(o.deltaY)?n:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX})}return this},u.resizeMove=function(e,t,a,d,p){var h={deltaX:a.deltaX/s.currentScale,deltaY:a.deltaY/s.currentScale},g=null;switch(t){case i.RESIZE_W:u.checkMinWidth(h,1,o,p||l),g={x:h.deltaX,y:0,width:-h.deltaX,height:0},angular.forEach(n.editArea.detectionBoxs,function(e){e.element.css({left:e.left+h.deltaX,width:e.elementWidth-h.deltaX})});break;case i.RESIZE_E:u.checkMinWidth(h,-1,o,p||l),g={x:0,y:0,width:h.deltaX,height:0},angular.forEach(n.editArea.detectionBoxs,function(e){e.element.css("width",e.elementWidth+h.deltaX)});break;case i.RESIZE_N:u.checkMinHeight(h,1,r,d||c),g={x:0,y:h.deltaY,width:0,height:-h.deltaY},angular.forEach(n.editArea.detectionBoxs,function(e){e.element.css({top:e.top+h.deltaY,height:e.elementHeight-h.deltaY})});break;case i.RESIZE_S:u.checkMinHeight(h,-1,r,d||c),g={x:0,y:0,width:0,height:h.deltaY},angular.forEach(n.editArea.detectionBoxs,function(e){e.element.css("height",e.elementHeight+h.deltaY)});break;case i.RESIZE_SE:u.compResizeWithRatio(h,t,d,p),g={x:0,y:0,width:h.deltaX,height:h.deltaY},angular.forEach(n.editArea.detectionBoxs,function(e){var t=e.elementHeight+h.deltaY,i=t*e.ratio;e.element.css({height:t,width:i})});break;case i.RESIZE_SW:u.compResizeWithRatio(h,t,d,p),g={x:h.deltaX,y:0,width:-h.deltaX,height:h.deltaY},angular.forEach(n.editArea.detectionBoxs,function(e){var t=e.elementHeight+h.deltaY,i=t*e.ratio;e.element.css({left:e.left-(i-e.elementWidth),height:t,width:i})});break;case i.RESIZE_NE:u.compResizeWithRatio(h,t,d,p),g={x:0,y:h.deltaY,width:h.deltaX,height:-h.deltaY},angular.forEach(n.editArea.detectionBoxs,function(e){var t=e.elementHeight-h.deltaY,i=t*e.ratio;e.element.css({top:e.top+h.deltaY,height:t,width:i})});break;case i.RESIZE_NW:u.compResizeWithRatio(h,t,d,p),g={x:h.deltaX,y:h.deltaY,width:-h.deltaX,height:-h.deltaY},angular.forEach(n.editArea.detectionBoxs,function(e){var t=e.elementHeight-h.deltaY,i=t*e.ratio;e.element.css({top:e.top+h.deltaY,left:e.left-(i-e.elementWidth),height:t,width:i})})}return angular.forEach(u.selectedComponents,function(e){u.setChildrenSizeMove(e)}),g},u.setChildrenSizeMove=function(e){var t=e.children(".element-box"),i={width:t.width(),height:t.height()};if("4"===e.attr("ctype").charAt(0)||"n"===e.attr("ctype").charAt(0)){var n=e.find("img"),a=n.width()/n.height(),s=i.width/i.height;a>=s?(n.outerHeight(i.height),n.outerWidth(i.height*a),n.css("marginLeft",-(n.outerWidth()-i.width)/2),n.css("marginTop",0)):(n.outerWidth(i.width),n.outerHeight(i.width/a),n.css("marginTop",-(n.outerHeight()-i.height)/2),n.css("marginLeft",0))}else"p"===e.attr("ctype").charAt(0)?e.find(".fluxslider, .images, .image1, .image2").css({width:i.width,height:i.height}):(e.find(".element").css({width:i.width,height:i.height}),"i"===e.attr("ctype")||"d"===e.attr("ctype")?e.find(".comp_counter").css({"line-height":i.height+"px"}):"w01"!==e.attr("ctype")&&"w02"!==e.attr("ctype")||e.find(".element").css({"line-height":i.height+"px"}))},u.resizeEnd=function(e){angular.forEach(u.selectedComponents,function(t,i){u.setChildrenSizeEnd(e,t,i<u.selectedComponents.length-1),e.$broadcast("updateMaxRadius",t)})},u.setChildrenSizeEnd=function(e,i,n){var s=i.position(),o={width:i.width(),height:i.height(),left:s.left,top:s.top};if("i"!==i.attr("ctype")&&"d"!==i.attr("ctype")&&"w01"!==i.attr("ctype")&&"w02"!==i.attr("ctype")||(o.lineHeight=o.height+"px"),"4"===i.attr("ctype").charAt(0)||"n"===i.attr("ctype").charAt(0)){var r=i.find("img"),l={width:o.width,height:o.height,left:o.left,top:o.top,imgStyle:{width:r.width(),height:r.height(),marginTop:r.css("marginTop"),marginLeft:r.css("marginLeft")}};a.updateCompSize(i.attr("id"),l,n)}else if("p"===i.attr("ctype").charAt(0)){var c=t.getProperties();if(!c||!c.children)return;var d=i.find(".slider"),p=d.attr("id");d.empty();for(var u=0;u<c.children.length;u++)d.append('<img src="'+PREFIX_FILE_HOST+c.children[u].src+'">');utilPictures.deleteInterval(p),new flux.slider("#nr #"+p,{autoplay:c.autoPlay,delay:c.interval,pagination:!1,transitions:[utilPictures.getPicStyle(c.picStyle).name],width:o.width,height:o.height,bgColor:c.bgColor,onStartEnd:function(e){utilPictures.addInterval(p,e)}}),a.updateCompSize(i.attr("id"),o,n)}else a.updateCompSize(i.attr("id"),o,n)},u}]).factory("gridGuide",["panStateTracker","DetectionBox","selectService","editAreaBorderCollisionDetector","editService",function(e,t,i,n,a){var s={init:function(e){this.color=this.getColor()?this.getColor():"rgba(150, 150, 150, 0.2)",this.$container=e,this.render(),setTimeout(function(){"disable"!==s.getVisable()&&s.show()},1)},len:1,render:function(){this.domElement=$('<div class="eq-block-grid">'),this.canvasElement=$('<canvas class="eq-block-grid-inner">').appendTo(this.domElement)},show:function(){this.domElement.appendTo(this.$container),this.paint(),this.enabled=!0},hide:function(){this.domElement.remove(),this.enabled=!1},setVisable:function(e){window.localStorage&&localStorage.setItem("sceneGridVisable",e)},getVisable:function(){if(window.localStorage)return localStorage.getItem("sceneGridVisable")},setColor:function(e){window.localStorage&&localStorage.setItem("sceneGridColor",e)},getColor:function(){if(window.localStorage)return localStorage.getItem("sceneGridColor")},getGuideState:function(){if(window.localStorage)return localStorage.getItem("sceneGridState")},setGuideState:function(e){window.localStorage&&localStorage.setItem("sceneGridState",e)},getSnapState:function(){if(window.localStorage)return localStorage.getItem("sceneSnapState")},setSnapState:function(e){window.localStorage&&localStorage.setItem("sceneSnapState",e)},paint:function(){var e=320,t=Math.ceil(30/a.currentScale),i=this.len?486*this.len:486,n=Math.ceil(i/t),s=this.getCols(),o=Math.round(e/s),r=0;this.canvasElement.css({left:0,top:0}),this.canvasElement.attr({width:e,height:i});var l=this.canvasElement.get(0).getContext("2d");l.clearRect(0,0,e,i);for(var c=1;s>c;c++)l.fillStyle=this.color,l.fillRect(Math.floor(c*o),0,1,i);for(var d=1;n>=d;d++)l.fillStyle=this.color,l.fillRect(0,Math.floor(d*t)+r,e,1)},getRows:function(){return 16*this.len},getCols:function(){var e=10;switch(a.scaleIndex+""){case"1":e=5;break;case"2":e=8;break;case"3":e=10;break;case"4":e=12;break;case"5":e=16;break;case"6":e=20;break;case"7":e=30;break;case"8":e=40;break;default:e=10}return e},refreshGrid:function(e){e>1?(this.domElement.css("top",0),r.domElement.css("top",0)):(this.domElement.css("top","17px"),r.domElement.css("top","17px")),e!==this.len&&(this.len=e,r.slideBounds.height=486*e,this.paint())}},o={snap:!s.getSnapState()||s.getSnapState(),action:"move",threshold:1,enabled:!s.getGuideState()||s.getSnapState()},r={init:function(e){this.guides={h:[],v:[]},this.slideBounds={width:320,height:486,x:0,y:0},this.render(),e.append(this.domElement),this.options=o},render:function(){this.domElement=$('<div class="eq-block-guides">')},start:function(n){if(this.options.enabled){this.allBlocks=[],e.forEach(function(e){r.allBlocks.push(new t(e))}),this.targetBlocks=[],angular.forEach(i.getElements(),function(e){r.allBlocks.forEach(function(t){t.element.attr("id")=="inside_"+e&&r.targetBlocks.push(t)})}),this.gridLines=[];var l=Math.ceil(30/a.currentScale),c=s.getCols(),d=Math.round(this.slideBounds.height/l),p=Math.round(this.slideBounds.width/c),u=0;if(s.enabled){for(var h=1;c>h;h++)this.gridLines.push(this.getCenterEdge({x:h*p,y:0,width:0,height:this.slideBounds.height},"grid-col-"+h,"horizontal"));for(var g=1;d>g;g++)this.gridLines.push(this.getCenterEdge({x:0,y:g*l+u,width:this.slideBounds.width,height:0},"grid-row-"+g,"vertical"))}1===s.len?(this.gridLines.push(this.getCenterEdge({x:0,y:0,width:this.slideBounds.width,height:0},"grid-row-top","vertical")),this.gridLines.push(this.getCenterEdge({x:0,y:this.slideBounds.height,width:this.slideBounds.width,height:0},"grid-row-bottom","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:-17,width:this.slideBounds.width+54,height:0},"grid-row-top1","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:this.slideBounds.height+17,width:this.slideBounds.width+54,height:0},"grid-row-bottom1","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:-19,width:0,height:this.slideBounds.height+34},"grid-col-left1","horizontal")),this.gridLines.push(this.getCenterEdge({x:this.slideBounds.width+27,y:-19,width:0,height:this.slideBounds.height+34},"grid-col-right1","horizontal"))):(this.gridLines.push(this.getCenterEdge({x:-27,y:0,width:this.slideBounds.width+54,height:0},"grid-row-top1","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:this.slideBounds.height,width:this.slideBounds.width+54,height:0},"grid-row-bottom","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:0,width:0,height:this.slideBounds.height},"grid-col-left1","horizontal")),this.gridLines.push(this.getCenterEdge({x:this.slideBounds.width+27,y:0,width:0,height:this.slideBounds.height},"grid-col-right1","horizontal"))),this.gridLines.push(this.getCenterEdge({x:-1,y:0,width:0,height:this.slideBounds.height},"grid-col-left","horizontal")),this.gridLines.push(this.getCenterEdge({x:this.slideBounds.width,y:0,width:0,height:this.slideBounds.height},"grid-col-right","horizontal")),this.options=$.extend(o,n)}},stop:function(){this.clearGuideElements()},sync:function(e){this.options.enabled&&(this.findGuides(e),this.renderGuides())},findGuides:function(e){e=angular.extend({x:0,y:0,width:0,height:0},e),this.guides.h.length=0,this.guides.v.length=0;var t={x:n.bigDetectionBoxPointA.x+e.x,y:n.bigDetectionBoxPointA.y+e.y,width:n.bigDetectionBoxPointB.x-n.bigDetectionBoxPointA.x+e.width,height:n.bigDetectionBoxPointB.y-n.bigDetectionBoxPointA.y+e.height},i=this.getEdges(t,"target-bounds","resize"===this.options.action);this.combinedBounds=t,this.allBlocks.forEach(function(e){-1===r.targetBlocks.indexOf(e)&&r.compageEdges(i,r.getEdges(e.measure(),e.getID()),r.options.threshold)}),this.gridLines.forEach(function(e){r.compageEdges(i,e,r.options.threshold)}),this.guides.h.sort(function(e,t){return e.distance-t.distance}),this.guides.v.sort(function(e,t){return e.distance-t.distance})},enforceGuides:function(e){if(this.options.enabled){var t=this.options.threshold;this.options.threshold=3,this.findGuides(e),this.options.threshold=t;var i,n=0,a=0;this.guides.h.length&&(i=this.guides.h[0],n=i.compareEdge.x-i.targetEdge.x),this.guides.v.length&&(i=this.guides.v[0],a=i.compareEdge.y-i.targetEdge.y),e.x+=n,e.y+=a}},compageEdges:function(e,t,i){var n;e.h.forEach(function(e){t.h.forEach(function(t){n=Math.abs(e.x-t.x),i>n&&r.guides.h.push({distance:n,targetEdge:e,compareEdge:t})})}),e.v.forEach(function(e){t.v.forEach(function(t){n=Math.abs(e.y-t.y),i>n&&r.guides.v.push({distance:n,targetEdge:e,compareEdge:t})})})},renderGuides:function(){var e=[];this.guides.h.forEach(function(t){e.push(r.renderGuide(t))}),this.guides.v.forEach(function(t){e.push(r.renderGuide(t))}),this.clearGuideElements(e)},renderGuide:function(e){var t=e.targetEdge,i=e.compareEdge,n=$('[data-guide-id="'+i.id+'"]');0===n.length&&(n=$('<div data-guide-id="'+i.id+'">').appendTo(this.domElement),setTimeout(function(){n.addClass("show")},1));var a={top:Math.min(i.bounds.y,this.combinedBounds.y),right:Math.max(i.bounds.x+i.bounds.width,this.combinedBounds.x+this.combinedBounds.width),bottom:Math.max(i.bounds.y+i.bounds.height,this.combinedBounds.y+this.combinedBounds.height),left:Math.min(i.bounds.x,this.combinedBounds.x)};if("number"==typeof i.y){var s="s"===t.direction?-1:0;n.addClass("guide-h"),n.css({top:Math.floor(i.y+s),left:a.left,width:a.right-a.left})}else{var o="e"===t.direction?-1:0;n.addClass("guide-v"),n.css({left:Math.floor(i.x+o),top:a.top,height:a.bottom-a.top})}return i.id},getEdges:function(e,t,i){var n={h:[{id:t+"-h1",bounds:e,x:e.x,offset:0,direction:"w"},{id:t+"-h2",bounds:e,x:e.x+e.width/2,offset:-e.width/2,direction:"hc"},{id:t+"-h3",bounds:e,x:e.x+e.width,offset:-e.width,direction:"e"}],v:[{id:t+"-v1",bounds:e,y:e.y,offset:0,direction:"n"},{id:t+"-v2",bounds:e,y:e.y+e.height/2,offset:-e.height/2,direction:"vc"},{id:t+"-v3",bounds:e,y:e.y+e.height,offset:-e.height,direction:"s"}]};return i&&(n.h.splice(1,1),n.v.splice(1,1)),n},getCenterEdge:function(e,t,i){var n={h:[],v:[]};return"vertical"===i?n.v.push({id:t+"-v2",bounds:e,y:e.y+e.height/2,offset:-e.height/2,direction:t}):n.h.push({id:t+"-h2",bounds:e,x:e.x+e.width/2,offset:-e.width/2,direction:t}),n},clearGuideElements:function(e){var t=this.domElement.find(".guide-v, .guide-h");e&&e.length&&(t=t.filter(function(t,i){return-1===e.indexOf(i.getAttribute("data-guide-id"))})),t.remove()}};return{grid:s,guide:r}}]).directive("pasteElement",["sceneService",function(e){function t(){var t=$('<ul id="pasteMenu" class="dropdown-menu" style="min-width: 100px; display: block;" role="menu" aria-labelledby="dropdownMenu1"><li class="paste" style="text-align:center;" role="presentation"><a role="menuitem" tabindex="-1"><div class="fa fa-paste"></div>&nbsp;&nbsp;粘贴</a></li></ul>').css({position:"absolute","user-select":"none"});return t.find(".paste").on("click",function(){e.pasteElement(),t.hide()}),t}return{restrict:"EA",link:function(i,n){var a=$(n);a.on("contextmenu",function(i){if(e.getCopy()){var n=t(),a=$("#eq_main"),s=$("#pasteMenu");s.length>0&&s.remove(),a.append(n),n.css({left:i.pageX+a.scrollLeft()+15,top:i.pageY+a.scrollTop()}).show(),a.mousemove(function(e){var t=$("#pasteMenu");(e.pageX<t.offset().left-20||e.pageX>t.offset().left+t.width()+20||e.pageY<t.offset().top-20||e.pageY>t.offset().top+t.height()+20)&&(t.hide(),$(this).unbind("mousemove"))})}return!1})}}}]).directive("eqxEditDestroy",["selectService",function(e){return{link:function(t,i){i.on("$destroy",function(){e.clearElements(),utilPictures.clearInterval()})}}}]).directive("elementAnim",["selectService",function(){function e(t,i,n,a,s){if(i.length&&a<i.length)if(""+s.type=="2"&&"typer"===i[a].type)t=t=$("#inside_"+s.id+" .element"),t.typed({strings:[s.content],contentType:"html",showCursor:!1,typeSpeed:1e3*i[a].interval||0,startDelay:1e3*i[a].delay||0,callback:function(){clearInterval(t.data("typed").timeout),t.removeData("typed"),a++,e(t,i,n,a,s)}});else{t=t=$("#inside_"+s.id+" .element-box");var o=t.get(0);t.css("animation",""),o.offsetWidth=o.offsetWidth,t.css("animation",n[a]+" "+i[a].duration+"s ease 0s").css("animation-fill-mode","backwards"),t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a++,e(t,i,n,a,s)})}}return{restrict:"EA",link:function(t){var i;t.$on("previewCurrentChange",function(e,t){var n=t.elemDef,a=t.anim;if(""+n.type=="2"&&"typer"===a.type)i=i=$("#inside_"+t.elemId+" .element"),i.typed({strings:[n.content],contentType:"html",showCursor:!1,typeSpeed:1e3*a.interval||0,startDelay:1e3*a.delay||0,callback:function(){clearInterval(i.data("typed").timeout),i.removeData("typed")}});else{i=i=$("#inside_"+t.elemId+" .element-box");var s=i.get(0);s.offsetWidth=s.offsetWidth,i.css("animation",t.animClasses[t.count]+" "+t.anim.duration+"s ease 0s").css("animation-fill-mode","backwards")}}),t.$on("previewAllChanges",function(t,n){i=i=$("#inside_"+n.elemId+" .element-box"),e(i,n.animations,n.animClasses,n.count,n.elemDef)})}}}]).directive("outerBox",["DetectionBox","i18nNotifications","storageService",function(e,t,i){return{restrict:"AE",link:function(n,a){function s(e){"red"===e?(o.show(),o.css("background-color","#ff5548"),a.find(".internal-box").toggleClass("out-warning",!1),c=!0):"yellow"===e?(o.show(),c=!1,o.css("background-color","#F2A653"),l&&a.find(".internal-box").toggleClass("out-warning",!0)):(c=!1,a.find(".internal-box").toggleClass("out-warning",!1),o.hide()),l&&a.toggleClass("on",c)}var o=$("#warn"),r="";o.click(function(){"red"===r?(t.removeAll(),t.pushForCurrentRoute("outbox.warning","notify.warning")):"yellow"===r&&(t.removeAll(),t.pushForCurrentRoute("outbox.tip","notify.warning"))});var l="false"===i.get("create.phoneView");l||(a.css("border-color","transparent"),a.find(".internal-box").css("border-color","transparent")),n.$on("switchBox",function(e,t){l=!t,t?(a.css("border-color","transparent"),a.find(".internal-box").css("border-color","transparent")):(a.css("border-color",""),a.find(".internal-box").css("border-color",""),s(r))});var c=!1;n.$on("boxOuter",function(i,a){c=!1;for(var o="",d=n.pageLength,p=n.tpl.obj.elements,u=0;u<p.length;u++)if(""+p[u].type!="3"){var h=p[u].id,g=$("#inside_"+h);if(0!==g.length){var m=g.position(),f=new e(g);if(1!=d){if(m.left<-29||m.top<-1||f.originPointB.y>486*d||f.originPointB.x>345){o="red";break}(m.left<-1||f.originPointB.x>320)&&(o="yellow")}else{if(l&&(m.left<-29||m.top<-19||f.originPointB.y>501||f.originPointB.x>345)){o="red";break}(m.left<-1||m.top<-1||f.originPointB.y>486||f.originPointB.x>320)&&(o="yellow")}}}r===o||a||("red"===o?(t.removeAll(),t.pushForCurrentRoute("outbox.warning","notify.warning")):"yellow"===o?(t.removeAll(),t.pushForCurrentRoute("outbox.tip","notify.warning")):t.removeAll()),r=o,s(o)})}}}]),angular.module("app.directives.editor",["scene.create.console.font"]).directive("toolbar",["$rootScope","$modal","$compile","sceneService","$timeout","security","storageService","fontService","$q",function(e,t,i,n,a,s,o,r,l){return{restrict:"EA",replace:!0,templateUrl:"directives/toolbar.tpl.html",scope:{pages:"=",dbclickEvent:"="},link:function(t,i,c){function d(){var e=l.defer(),i=JSON.parse(sessionStorage.getItem("toolbarFonts"))||[];return 0===i.length?r.getMyFontFamily().then(function(n){n.data.success?(i=n.data.list,t.fontNames=i,sessionStorage.setItem("toolbarFonts",JSON.stringify(i))):alert("网络加载失败,请稍后再试!"),e.resolve()}):(t.fontNames=i,e.resolve()),e.promise}function p(e){var i=JSON.parse(o.get("editTextId"))||[];$.inArray(q.id,i)===-1&&i.push(q.id),o.push("editTextId",JSON.stringify(i)),q.css.fontFamily=e.fontFamily,q.fonts||(q.fonts={}),q.fonts[e.fontFamily]=e.woffPath;var n=JSON.parse(o.get("shoppingFontFamily"))||{};n[e.fontFamily]||(document.getElementsByTagName("style")[0].appendChild(document.createTextNode("@font-face{font-family:"+e.fontFamily+";src: url("+PREFIX_FILE_HOST+e.woffPath+") format(woff);}")),n[e.fontFamily]=!0,o.push("shoppingFontFamily",JSON.stringify(n))),E("fontName",e.fontFamily),t.selectedFontName=e.name}function u(e){var i=null;e?(t.selectStyle.fontSize=e,i=e):t.selectStyle.fontSize&&!isNaN(t.selectStyle.fontSize)?t.selectStyle.fontSize>196?(t.selectStyle.fontSize=196,i=t.selectStyle.fontSize):i=t.selectStyle.fontSize<12?12:t.selectStyle.fontSize:(t.selectStyle.fontSize=null,i=12),E("fontSize",i+"px"),t.targetField&&t.targetField.focus()}function h(){t.selectStyle.fontSize<12&&(t.selectStyle.fontSize=12)}function g(e){E(e,"")}function m(i){i?t.selectStyle.lineHeight=i:t.selectStyle.lineHeight&&!isNaN(t.selectStyle.lineHeight)?t.selectStyle.lineHeight>3&&(t.selectStyle.lineHeight=3):t.selectStyle.lineHeight=null,q.css.lineHeight=parseFloat(t.selectStyle.lineHeight).toFixed(2),D.parent().parent().css("lineHeight",t.selectStyle.lineHeight),e.$broadcast("adjust.line.height")}function f(e){e?t.selectStyle.letterSpacing=e.replace("em",""):t.selectStyle.letterSpacing&&!isNaN(t.selectStyle.letterSpacing)?t.selectStyle.letterSpacing>100&&(t.selectStyle.letterSpacing=100):t.selectStyle.letterSpacing=null,E("subscript",""),E("letterSpacing",t.selectStyle.letterSpacing/100+"em"),t.targetField&&t.targetField.focus()}function v(e){null!==e.target&&(t.targetField=e.target)}function b(){a(function(){if(R&&R.endContainer.parentElement.getAttribute("href")){var e=R.endContainer.parentElement.getAttribute("href");/^http:|^https:|^ftp:/.test(e)?t.externalLink=e:(t.link="internal",document.getElementById("linkInternalPage").value=e)}$("#addLinkInputToggle").click()})}function y(){var e="";"external"===t.link?(/^http:|^https:|^ftp:/.test(t.externalLink)||t.externalLink&&(t.externalLink="http://"+t.externalLink),e=t.externalLink,R.toString().length>0&&E("CreateLink",e)):(e=document.getElementById("linkInternalPage").value,R.toString().length>0&&E("internalLink",e))}function w(){E("Unlink")}function x(){E("RemoveFormat"),D.parent().parent().css("lineHeight",1),q.css.lineHeight="1",e.$broadcast("adjust.line.height")}function k(e){8!==e.keyCode&&46!==e.keyCode||e.stopPropagation()}function S(i,n){function a(){function i(e){return"SPAN"!==e.tagName&&"A"!==e.tagName||"rgba(0, 0, 0, 0)"!==window.getComputedStyle(e,null).backgroundColor?e:i(angular.element(e).parent()[0])}"DIV"===s.tagName?"DIV"===s.tagName&&s.getAttribute("id")&&parseInt(s.getAttribute("id"))===q.id?(s.style.fontSize?t.selectStyle.fontSize=window.getComputedStyle(s,null).fontSize.replace("px",""):t.selectStyle.fontSize="24",t.selectStyle.fontFamily=window.getComputedStyle(s,null).fontFamily,t.selectStyle.showColor=window.getComputedStyle(s,null).color,t.selectStyle.showBackgroundColor=window.getComputedStyle(s,null).backgroundColor,"normal"===window.getComputedStyle(s,null).letterSpacing?t.selectStyle.letterSpacing=0:t.selectStyle.letterSpacing=100*window.getComputedStyle(s,null).letterSpacing.replace("px","")/24):(t.selectStyle.fontFamily=window.getComputedStyle(s,null).fontFamily,t.selectStyle.fontSize="24",t.selectStyle.showColor="rgb(118, 131, 143)",t.selectStyle.showBackgroundColor="rgba(0,0,0,0)",t.selectStyle.letterSpacing=0):(t.selectStyle.fontFamily=window.getComputedStyle(s,null).fontFamily,t.selectStyle.fontSize=window.getComputedStyle(s,null).fontSize.replace("px",""),t.selectStyle.showColor=window.getComputedStyle(s,null).color,t.selectStyle.showBackgroundColor=window.getComputedStyle(i(s),null).backgroundColor,"normal"===window.getComputedStyle(s,null).letterSpacing?t.selectStyle.letterSpacing=0:t.selectStyle.letterSpacing=100*window.getComputedStyle(s,null).letterSpacing.replace("px","")/24),t.selectStyle.lineHeight=(window.getComputedStyle(D.parent().parent()[0],null).lineHeight.replace("px","")/24).toFixed(2),e.$broadcast("adjust.line.height"),C()}var s=null;s=i?"outOfEdit"===n?R.endContainer.parentElement:R.startContainer.parentElement:D[0].children.length>0&&D[0].childNodes[0].innerText===D[0].innerText?D[0].childNodes[0]:D[0],i?t.$apply(a()):a()}function T(){r.openFontShopping()}function C(){var e=0;angular.forEach(t.fontNames,function(i){i.fontFamily===t.selectStyle.fontFamily&&(t.selectedFontName=i.name,e++)}),e||(t.selectedFontName="默认字体")}function E(e,t){L(),document.execCommand(e,0,t),"fontSize"!==e&&"letterSpacing"!==e&&"internalLink"!==e||P(e,t),_(),L()}function P(e,t){var i={};i[e]=t;var n=null;"fontSize"===e&&(n=D.find('[style*="font-size: -webkit-xxx-large"]'),$(n).css(i),$(n).find("span").length>0&&$(n).find("span").css(i)),"letterSpacing"===e&&(n=D.find('[style*="vertical-align: sub;"]'),$(n).css("vertical-align","baseline"),$(n).css(i)),"internalLink"===e&&(document.execCommand("CreateLink",0,t),i={data:t},n=D.find("[href="+t+"]"),n.attr(i))}function I(){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}function _(){R=I()}function L(){var e=window.getSelection();if(R){try{e.removeAllRanges()}catch(t){document.body.createTextRange().select(),document.selection.empty()}e.addRange(R)}else e.selectAllChildren(D[0]),R=I()}function M(){t.isAccessInput=s.isAllowToAccess(s.accessDef.TEMPLATE_PAYMENT),D[0].setAttribute("contenteditable","true"),D[0].focus(),document.execCommand("styleWithCSS",0,!0),d().then(function(){C()}),angular.element(document.querySelector("[edit-workspace]")).bind("mouseup",function(){$("#btn-toolbar").length>0&&("A"===window.getSelection().baseNode.tagName&&"inputSelection"===window.getSelection().baseNode.getAttribute("class")||(R=I(),S(!0,"outOfEdit")))}),D.bind("mouseup",function(e){$("#btn-toolbar").length>0&&a(function(){R=I(),S(!0,e),e.stopPropagation()})}),D.bind("keydown",function(e){if((e.ctrlKey||e.metaKey)&&(65===e.keyCode||97===e.keyCode)){var t=window.getSelection();t.selectAllChildren(D[0]),R=I()}}),S(!1,t.dbclickEvent),t.selectStyle.color=t.selectStyle.showColor,t.selectStyle.backgroundColor=t.selectStyle.showBackgroundColor,c.top<100?$("#btn-toolbar").css("top",parseInt(c.top)+parseInt(c.height)+30):$("#btn-toolbar").css("top",c.top-50),a(function(){$('div[isToolbarColor="toolbarColor"]').bind("click",function(){t.$watch("selectStyle.color",function(e,i){e!==i&&(t.selectStyle.showColor=e,E("ForeColor",e))}),t.$watch("selectStyle.backgroundColor",function(e,i){e!==i&&(t.selectStyle.showBackgroundColor=e,E("BackColor",e))})}),a(function(){R=I()},100)}),D.bind("paste",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain")||prompt("Paste something..");document.execCommand("insertText",!1,t)})}t.upclass=!1;var R,q=n.currentElemDef,D=angular.element(document.getElementById(q.id)),A=[{name:"fontSizeList1",value:"96"},{name:"fontSizeList2",value:"64"},{name:"fontSizeList3",value:"48"},{name:"fontSizeList4",value:"32"},{name:"fontSizeList5",value:"24"},{name:"fontSizeList6",value:"20"},{name:"fontSizeList7",value:"18"},{name:"fontSizeList8",value:"16"},{name:"fontSizeList9",value:"14"},{name:"fontSizeList10",value:"13"},{name:"fontSizeList11",value:"12"}],F=[{name:"0%",scale:"0"},{name:"10%",scale:"10em"},{name:"25%",scale:"25em"},{name:"50%",scale:"50em"},{name:"75%",scale:"75em"},{name:"100%",scale:"100em"}],z=[{name:"0.25",scale:.25},{name:"0.50",scale:.5},{name:"0.75",scale:.75},{name:"1.00",scale:1},{name:"1.50",scale:1.5},{name:"1.75",scale:1.75},{name:"2.00",scale:2},{name:"2.50",scale:2.5},{name:"3.00",scale:3}],N={fontFamily:"",fontSize:"",color:"",backgroundColor:"",fontWeight:"",fontStyle:"",textDecoration:"",letterSpacing:"",lineHeight:"",showColor:"",showBackgroundColor:""};angular.extend(t,t,{isAccessInput:!1,fontNames:[],selectedFontName:"",targetField:null,isShowCreateLink:!1,link:"external",internalLink:t.pages[0].id,selectStyle:N,fontSizeLists:A,wordLineLists:F,lineHeightLists:z,changeFontFamily:p,changeFontSize:u,revokeFontSize:h,lineHeight:m,letterSpace:f,focusCallback:v,changeStyle:g,stopBackSpace:k,openAddLinkDialog:b,addLink:y,removeLink:w,clearStyle:x,openFontMarket:T}),M()}}}]).directive("downUpSelect",[function(){return{restrict:"EA",link:function(e,t){t.on("click",function(){var i=t.next().eq(0),n=$(".btn-toolbar").offset().top,a=i.height(),s=$(window).height()-n+$(document).scrollTop()-40,o=n-$(document).scrollTop();a>s&&a<o?e.$apply(function(){e.upclass=!0}):e.$apply(function(){e.upclass=!1})})}}}]),angular.module("app.directives.uislider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(e,t){return e=e||{},{require:"ngModel",compile:function(){return function(i,n,a,s){function o(e,t){return t?parseFloat(e):parseInt(e,10)}function r(){n.slider("destroy")}var l=angular.extend(i.$eval(a.uiSlider)||{},e),c={min:null,max:null},d=["min","max","step"],p=!angular.isUndefined(a.useDecimals),u=function(){angular.isArray(s.$viewValue)&&l.range!==!0&&(console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true."),l.range=!0),angular.forEach(d,function(e){angular.isDefined(a[e])&&(l[e]=o(a[e],p))}),n.slider(l),u=angular.noop};angular.forEach(d,function(e){a.$observe(e,function(t){t&&(u(),l[e]=o(t,p),n.slider("option",e,o(t,p)),s.$render())})}),a.$observe("disabled",function(e){u(),n.slider("option","disabled",!!e)}),i.$watch(a.uiSlider,function(e){u(),void 0!==e&&n.slider("option",e)},!0),t(u,0,!0),n.bind("slide",function(e,t){s.$setViewValue(t.values||t.value),i.$apply()}),s.$render=function(){u();var e=l.range===!0?"values":"value";l.range||!isNaN(s.$viewValue)||s.$viewValue instanceof Array?l.range&&!angular.isDefined(s.$viewValue)&&(s.$viewValue=[0,0]):s.$viewValue=0,l.range===!0&&(angular.isDefined(l.min)&&l.min>s.$viewValue[0]&&(s.$viewValue[0]=l.min),angular.isDefined(l.max)&&l.max<s.$viewValue[1]&&(s.$viewValue[1]=l.max),s.$viewValue[0]>s.$viewValue[1]&&(c.min>=s.$viewValue[1]&&(s.$viewValue[0]=c.min),c.max<=s.$viewValue[0]&&(s.$viewValue[1]=c.max)),c.min=s.$viewValue[0],c.max=s.$viewValue[1]),n.slider(e,s.$viewValue)},i.$watch(a.ngModel,function(){l.range===!0&&s.$render()},!0),n.bind("$destroy",r);var h=$('<div class="ui-slider-progress-bar"></div>');n.append(h);var g=i.$watch(a.ngModel,function(){setTimeout(function(){h.css("width",$(".ui-slider-handle",n).css("left"))})},!0);n.bind("$destroy",function(){g()})}}}}]).directive("uiSliderT",["$rootScope",function(e){var t=$(document);return{require:"ngModel",template:'<div class="slider-con"></div>',link:function(i,n,a,s){n.on("$destroy",function(){n.unbind("mousedown")});var o="string"==typeof a.min?a.min:-Number.MAX_VALUE,r="string"==typeof a.max?a.max:Number.MAX_VALUE,l="string"==typeof a.step?a.step:1,c=r/100,d="string"==typeof a.max?a.fixed:0;s.$render=function(){n.find(".slider-con").css("width",100*(s.$modelValue||0)/r+"%")},n.mousedown(function(n){n.stopPropagation();var p,u=n.offsetX,h=n.pageX,g=function(e){e.stopPropagation(),p=e.pageX-h;var t=Math.abs(((u+p)*c/l).toFixed(d))*l;t>r?t=Math.abs(r):t<o&&(t=Math.abs(o)),s.$viewValue!==t&&(s.$setViewValue(t),s.$render(),i.$apply())},m=function(){t.unbind("mouseup",m),t.unbind("mousemove",g),a.hisRecords&&e.$broadcast("hisChange")};t.mousemove(g),t.mouseup(m)}),n.click(function(t){t.stopPropagation();var n=Math.abs(t.offsetX*r/100/l).toFixed(d)*l;n>r?n=Math.abs(r):n<o&&(n=Math.abs(o)),s.$setViewValue(n),s.$render(),i.$apply(),a.hisRecords&&e.$broadcast("hisChange")})}}}]),angular.module("filters.transformDate",[]),angular.module("filters.transformDate").filter("transformDate",function(){return function(e){var t=e/864e5,i=e%864e5/36e5,n=e%36e5/6e4;return t+"天"+i+"时"+n+"分"}}),angular.module("common.resources.print",["common.services.print"]).factory("printResource",["$rootScope","printService","$q",function(e,t,i){function n(){return k}function a(){return S}function s(n){if(n.type&&n.width&&n.height&&n.unit)return t.addPrint(n).then(function(t){return e.$broadcast("print.add",t.data),t.data})["catch"](function(e){i.reject(e)})}function o(i,n,a,s,o){t.getPrintList(i,n,a,s,o).success(function(t){t.success&&e.$broadcast("printList.get",t)})}function r(n){return t.getPrint(n).then(function(t){var i=t.data||{};return e.$broadcast("printBase.get",i.obj),
i.obj})["catch"](function(e){i.reject(e)})}function l(n,a){return t.getPrint(n,1).then(function(t){var i=t.data||{};return e.$broadcast("printDetail.get",i.obj),i.obj})["catch"](function(t){e.$broadcast("printDetail.get.fail"),i.reject(t)})}function c(i){t.deletePrint(i).success(function(t){t.success&&e.$broadcast("print.delete")})}function d(i){t.copyPrint(i).success(function(t){t.success&&e.$broadcast("print.copy",t)})}function p(i,n){t.transferPrint(i,n).success(function(t){t.success?e.$broadcast("print.transfer","success",t):e.$broadcast("print.transfer","fail",t)})}function u(i){t.applyTpl(i).success(function(t){t.success?e.$broadcast("print.apply","success",t):e.$broadcast("print.apply","fail",t)})}function h(i,n,a,s){t.getTemplateList(i,n,a,s).success(function(t){t.success&&e.$broadcast("templateList.get",t)})}function g(){t.getHotList().success(function(t){t.success&&e.$broadcast("hotList.get",t)})}function m(){t.getScenePicGroup().success(function(t){t.success&&e.$broadcast("scenePic.group.get",t.list)})}function f(i,n){t.saveToH5(i,n).success(function(t){t.success&&e.$broadcast("saveToH5.success")})}function v(){return t.getAds().then(function(t){var i=t.data;return e.$broadcast("ads.get",i),i})["catch"](function(e){i.reject(e)})}function b(n,a,s){return t.getOrderInfo(n,a,s).then(function(t){var i=t.data;return e.$broadcast("orderInfo.get",i),i})["catch"](function(e){i.reject(e)})}function y(e,n){return t.getDetailsURL(e,n).then(function(e){var t=e.data;return t})["catch"](function(e){i.reject(e)})}function w(n,a,s,o){return t.getPngPrint(n,a,s,o).then(function(t){var i=t.data;return e.$broadcast("pngPrint.get",i),i})["catch"](function(e){i.reject(e)})}function x(){return t.getOrderCount().then(function(e){return e.data})["catch"](function(e){i.reject(e)})}var k=[{name:"名片",value:"1",width:90,height:54,unit:"mm"},{name:"邀请函",value:"2",width:140,height:210,unit:"mm"},{name:"贺卡",value:"3",width:140,height:210,unit:"mm"},{name:"海报",value:"4",width:420,height:570,unit:"mm"},{name:"宣传单",value:"5",width:210,height:285,unit:"mm"},{name:"淘宝商品主图",value:"6",width:800,height:800,unit:"px"},{name:"微信公众号首图",value:"7",width:900,height:500,unit:"px"},{name:"长图",value:"8",width:800,height:2400,unit:"px"},{name:"GIF动图",value:"9",width:600,height:800,unit:"px"},{name:"自定义",value:"0"}],S={onlineMarketing:[{name:"长图",value:"8"},{name:"淘宝商品主图",value:"6"},{name:"微信公众号首图",value:"7"},{name:"GIF动图",value:"9"}],adPrint:[{name:"宣传单",value:"5"},{name:"邀请函",value:"2"},{name:"海报",value:"4"},{name:"贺卡",value:"3"},{name:"名片",value:"1"}]};return{addPrint:s,getPrintList:o,getPrintBase:r,getPrintDetail:l,deletePrint:c,copyPrint:d,transferPrint:p,applyTpl:u,getTemplateList:h,getAllTypes:n,getTplTypes:a,getHotList:g,getScenePicGroup:m,saveToH5:f,getAds:v,getOrderInfo:b,getDetailsURL:y,getPngPrint:w,getOrderCount:x}}]),angular.module("common.services.print",[]).factory("printService",["$http",function(e){function t(t){var i="m/print/create";return e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+i,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})}function i(t,i,n,a,s){var o="m/print/list?";return o+="pageNo="+(t||1),o+="&pageSize="+(i||10),"string"==typeof n&&(o+="&type="+n),"string"==typeof a&&(o+="&width="+a),"string"==typeof s&&(o+="&height="+s),e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+o})}function n(t,i){var n="m/print/info?id="+t;return i&&(n+="&page=1"),e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+n})}function a(t){var i="m/print/delete?id="+t;return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+i})}function s(t){var i="m/print/copy?id="+t;return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+i})}function o(t,i){var n="m/print/transfer";return n+="?loginName="+i,n+="&id="+t,e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+n})}function r(t){var i="m/print/tpl/apply?id="+t;return e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+i})}function l(t,i,n,a){var s="m/print/tpl/page/list";return s+="?pageNo="+(t||1),s+="&pageSize="+(i||10),"number"==typeof n&&(s+="&type="+n),"number"==typeof a&&a&&(s+="&tag="+a),e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+s})}function c(){var t="m/print/hot/list";return e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+t})}function d(){var t="m/base/file/tag/my";return e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})}function p(t,i){var n="m/print/save/file",a={list:i,tagId:t};return e({withCredentials:!0,method:"POST",headers:{"Content-Type":"text/plain; charset=UTF-8"},url:PRINT_HOST_SERVER+n,data:a})}function u(){var t="eqs/banners?pageCode=print_ads";return e({method:"GET",url:PREFIX_S2_URL+t})}function h(t,i,n){var a="m/print/printshop/order",s={pageNo:t,pageSize:i};return"all"!=n&&$.extend(s,{status:n}),e({withCredentials:!0,method:"GET",params:s,url:PRINT_HOST_SERVER+a})}function g(t,i){var n="m/print/printshop/order/details",a={orderNumber:t,shopId:i};return e({withCredentials:!0,method:"POST",params:a,url:PRINT_HOST_SERVER+n})}function m(t,i,n,a){var s="m/print/printshop/exp/pdf",o={printId:t,shopId:i,pages:n,version:a};return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+s,params:o})}function f(){var t="m/print/printshop/order/count";return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+t})}return{addPrint:t,getPrintList:i,getPrint:n,deletePrint:a,copyPrint:s,transferPrint:o,applyTpl:r,getTemplateList:l,getHotList:c,getScenePicGroup:d,saveToH5:p,getAds:u,getOrderInfo:h,getDetailsURL:g,getPngPrint:m,getOrderCount:f}}]),angular.module("common.resources.print.template",["common.services.print.template"]).factory("templateResource",["$rootScope","templateService",function(e,t){function i(i){t.getTagCategory(i).success(function(t){t.success&&e.$broadcast("TagCategory.get",t)})}return{getTagCategory:i}}]),angular.module("common.services.print.template",[]).factory("templateService",["$http",function(e){function t(t){var i="base/class/print_size_list";return"0"!=t&&(i+="_"+t),e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+i})}return{getTagCategory:t}}]),angular.module("print.directives.validate",[]).directive("eqdValidate",function(){function e(e,t,i){t.on("$destroy",function(){t.unbind("keydown")}),t.keydown(function(e){var t=e.keyCode;return!/number/.test(i.eqdValidate)||!e.shiftKey&&!!(t>=48&&t<=57||t>=96&&t<=105||36==t||35==t||37==t||39==t||8==t||46==t)})}return{link:e}}),angular.module("security.authority",[]).factory("authority",[function(){var e={GROUP_CUSTOMER:1,SCENE_HIDE_LASTPAGE_SETTING:2,TRANSFER_SCENE:4,SCENE_EDIT_TRIGGER:8,EXPAND_WEBSITE:16,SCENE_EDIT_SOUND:32,ACCESS_NEW_PAGEFLIP:64,COMP_ANIMATION:128,RADIO_CHECKBOX_RATING:256,ACCESS_DOMAIN_BIND:1024,LOADING_LOGO:2048,TEMPLATE_PAYMENT:4096,SCENE_PASSWORD:16384,USERCENTER_HISTORY:32768,APPLY_XIUKE:65536,SHAKE_TRIGGER:131072,ACCESS_PSD_UPLOAD:524288,ACCESS_CUSTOMER_SERVICE:1048576,ACCESS_QCLOUD:2097152,ACCESS_COMP_MANAGE:4194304,SERVICE_TIME:8388608,HOME_SPREAD_STATISTICS:16777216,ACCESS_ORDER_TASK:33554432},t={1:{code:16843069,name:"普通账号"},2:{code:19975679,name:"企业账号"},21:{code:19974655,name:"企业子账号"},5:{code:3198463,name:"公共账号"},51:{code:3197439,name:"公共子账号"},3:{code:4903423,name:"高级用户"},4:{code:21616127,name:"服务商用户"},99:{code:39440895,name:"超级用户"},98:{code:1,name:"代理商"},201:{code:11587071,name:"旧基础"},202:{code:11587071,name:"旧体验"},203:{code:11587071,name:"旧高级版"},204:{code:11587071,name:"旧畅想版"},206:{code:11587071,name:"体验版"},207:{code:11587071,name:"基础版"},208:{code:11587071,name:"标准版"},209:{code:11587071,name:"高级版"},211:{code:11586047,name:"旧基础"},212:{code:11586047,name:"旧体验"},213:{code:11586047,name:"旧高级版"},214:{code:11586047,name:"旧畅想版"},216:{code:11586047,name:"体验版"},217:{code:11586047,name:"基础版"},218:{code:11586047,name:"标准版"},219:{code:11586047,name:"高级版"}};return{accessDef:e,userRoleDef:t}}]),angular.module("security.authorization",["security.service"]).provider("securityAuthorization",{requireAdminUser:["securityAuthorization",function(e){return e.requireAdminUser()}],requireAuthenticatedUser:["securityAuthorization",function(e){return e.requireAuthenticatedUser()}],$get:["security","securityRetryQueue","$location",function(e,t,i){var n={requireAuthenticatedUser:function(){var a=e.requestCurrentUser().then(function(){if(!e.isAuthenticated()&&"/upgrade/"!==i.path().substring(0,9)&&"/xdBuy"!==i.path()&&"/privilege"!==i.path())return t.pushRetryFn("unauthenticated-client",n.requireAuthenticatedUser)});return a},requireAdminUser:function(){var i=e.requestCurrentUser().then(function(){if(!e.isAdmin())return t.pushRetryFn("unauthorized-client",n.requireAdminUser)});return i}};return n}]}),angular.module("security",["security.service","security.interceptor","security.authorization"]),angular.module("security.interceptor",["security.retryQueue"]).factory("securityInterceptor",["$injector","$q","securityRetryQueue","$location",function(e,t,i,n){return{responseError:function(a){var s=null;return 401===a.status?s=i.pushRetryFn("unauthorized-server",function(){return e.get("$http")(a.config)}):(403===a.status&&(alert("对不起，您没有查看此内容的权限"),n.path("/home")),t.reject(a))}}}]).config(["$httpProvider",function(e){e.interceptors.push("securityInterceptor"),e.interceptors.push(["$q",function(e){var t=0;return{request:function(i){return i.loading&&($("#loading").show(),t++),i||e.when(i)},responseError:function(i){return i.config.loading&&(t--,t||$("#loading").hide()),e.reject(i)},response:function(i){return i.config.loading&&(t--,t||$("#loading").hide()),i||e.when(i)}}}])}]),angular.module("security.login.toolbar",["services.usercenter"]).directive("loginToolbar",["security","$rootScope","usercenterService","$location","dataCacheService",function(e,t,i,n,a){var s={templateUrl:"security/login/toolbar.tpl.html",restrict:"E",replace:!0,scope:!0,link:function(i){i.PREFIX_FILE_HOST=PREFIX_FILE_HOST,i.isAuthenticated=e.isAuthenticated,i.login=e.showLogin,i.logout=e.logout,i.requestResetPassword=e.requestResetPassword,i.isAdvancedUser=t.isAdvancedUser,i.isEditor=t.isEditor,i.isVendorUser=t.isVendorUser,i.accessOrderTask=e.isAllowToAccess(e.accessDef.ACCESS_ORDER_TASK),i.$watch(function(){return e.currentUser},function(e){i.currentUser=e,i.currentUser.headImg?/^http.*/.test(e.headImg)&&(i.headImg=e.headImg):i.headImg=CLIENT_CDN+"assets/images/defaultuser.jpg"}),i.$on("headImg.change",function(e,t){i.currentUser.headImg=t}),i.changeCurrent=function(){a.clear("sceneList"),t.branchid="",n.search("branchid",null),n.path("/usercenter/children")},i.openMsgPanel=function(){!$(".mes_con").hasClass("open")}}};return s}]),angular.module("security.register.company",[]),angular.module("security.register.company").controller("companyRegsterCtrl",["$scope","security","$timeout",function(e,t,i){function n(){0===a?(e.isCodeAccessiable=!1,e.codeTip="获取验证码",a=60):(e.isCodeAccessiable=!0,e.codeTip="重新发送("+a+")",i(function(){a--,n()},1e3))}config.product="popup",e.checkName=function(t){return t.name?countCharacters(t.name)>40?(e.nameError="企业名称不能超过40个字符",!1):(e.nameError="",!0):(e.nameError="请填写企业名称",!1)},e.checkEmail=function(t){var i=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return t.email&&!i.test(t.email)?(e.emailError="请正确填写邮箱",!1):t.email?(e.emailError="",!0):(e.emailError="请填写企业邮箱",!1)},e.checkcontacts=function(t){return t.contacts?countCharacters(t.contacts)>30?(e.contactsError="联系人不能超过30个字符",!1):(e.contactsError="",!0):(e.contactsError="请填写联系人",!1)},e.checkAddress=function(t){return t.address?countCharacters(t.address)>50?(e.addressError="联系地址不能超过50个字符",!1):(e.addressError="",!0):(e.addressError="请填写联系地址",!1)},e.checkCode=function(t){return t.code?(e.codeError="",!0):(e.codeError="请输入手机验证码",!1)},e.checkPassword=function(t){if(t.password){if(/^[a-zA-Z0-9]{6,16}$/g.test(t.password))return e.pwdError=null,!0;e.pwdError="密码为6~16个字符(英文字母或数字，区分大小写)"}else e.pwdError="密码不能为空";return!1},e.getImageCode=function(){challenge&&validate&&seccode&&e.getCode()},e.getCode=function(){var i=e.companyInfo;if(!i||!i.mobile)return e.telError="请填写手机号码",!1;e.telError="";var a={phone:i.mobile,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};t.getCode($.param(a)).success(function(t){challenge="",validate="",seccode="",200===t.code?n():e.telError=t.msg})},e.isCodeAccessiable=!1;var a=60;e.checkFormFormat=function(t){return!!(e.checkName(t)&&e.checkPassword(t)&&e.checkEmail(t)&&e.checkcontacts(t)&&e.checkAddress(t))};var s=!1;e.register=function(i){if(!i)return void(e.regErr="请填写注册信息");e.regErr="";var n={phone:i.mobile,password:i.password,code:i.code,name:i.name,email:i.email,contacts:i.contacts,address:i.address};e.checkFormFormat(i)&&(s||(s=!0,t.register($.param(n),"",i.mobile,!0).then(function(t){s=!1,t&&(e.regErr=t.msg)})))}}]),angular.module("security.retryQueue",[]).factory("securityRetryQueue",["$q","$log",function(e,t){var i=[],n={onItemAddedCallbacks:[],hasMore:function(){return i.length>0},push:function(e){i.push(e),angular.forEach(n.onItemAddedCallbacks,function(i){try{i(e)}catch(n){t.error("securityRetryQueue.push(retryItem): callback threw an error"+n)}})},pushRetryFn:function(t,i){1===arguments.length&&(i=t,t=void 0);var a=e.defer(),s={reason:t,retry:function(){e.when(i()).then(function(e){a.resolve(e)},function(e){a.reject(e)})},cancel:function(){a.reject()}};return n.push(s),a.promise},retryReason:function(){return n.hasMore()&&i[0].reason},cancelAll:function(){for(;n.hasMore();)i.shift().cancel()},retryAll:function(){for(;n.hasMore();)i.shift().retry()}};return n}]),angular.module("security.service",["security.retryQueue","security.authority","security.login.toolbar","ui.bootstrap.modal"]).factory("security",["$rootScope","$http","$q","$location","securityRetryQueue","$modal","ModalService","authority","dataCacheService","authService","accountTypeService",function(e,t,i,n,a,s,o,r,l,c,d){function p(e){e=e||"/",window.location.href=e}function u(){var t="/upgrade/"===n.path().substring(0,9)||"/xdBuy"===n.path();m||(m=c.showAuth({type:"login"}).then(function(i){"registerEnterprise"===i.type?(t?localStorage.setItem("upgradeUrl",n.path()):localStorage.removeItem("upgradeUrl"),n.path("/reg/guide/company"),a.cancelAll()):"register"===i.type?(t?v.requestCurrentUser(function(){e.$broadcast("toAppUpgrade")}):n.path("/reg/guide/person"),a.cancelAll()):"login"===i.type?(v.currentUser=null,v.requestCurrentUser(function(){var i=l.get("currentuser","currentuser");return t?void e.$broadcast("toAppUpgrade"):void(i!==v.currentUser.id?(n.path("/homepage"),a.cancelAll()):a.retryAll())})):"reset"===i.type&&(n.path("/homepage"),a.cancelAll())},function(){a.cancelAll(),t||p()})["finally"](function(){m=null}))}function h(e){f=e}function g(){return f}var m=null;a.onItemAddedCallbacks.push(function(){a.hasMore()&&v.showLogin()});var f={},v={showLogin:function(){u()},getUserDetail:function(e,i,n){var a=PREFIX_URL+"base/relUserInfo?type="+e+"&openId="+i+"&accessToken="+n,s=new Date;return a+="&date="+s.getTime(),t({method:"GET",url:a,withCredentials:!0})},checkUniquenessNew:function(e){var i=PREFIX_URL+"m/u/check/loginid?username="+e,n=new Date;return i+="&date="+n.getTime(),t({method:"GET",url:i,withCredentials:!0})},addRegisterInfo:h,getRegisterInfo:g,getCode:function(e){var i=PREFIX_URL+"eqs/register/code";return t({method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,data:e})},hasRel:function(e){registerDialog&&closeUserDialog(registerDialog,!1);var i=new Date,a=PREFIX_URL+"base/user/hasRel?type="+e.type+"&openId="+e.openId+"&time="+i.getTime(),s=t.get(a,{withCredentials:!0});s.then(function(t){200===t.status?t.data.success===!0?("/home"!==n.path()&&"/home/login"!==n.path()||n.path("homepage"),v.requestCurrentUser()):"未关联账号"===t.data.msg&&openOtherRegisterDialog(e):v.isAuthenticated()},function(){v.isAuthenticated()})},logout:function(i,a){t({withCredentials:!0,method:"GET",url:PREFIX_URL+"logout"}).then(function(){v.currentUser=null,window.KF5SupportBoxAPI.close(),a?(e.$broadcast("toAppUpgradeLogout"),u(n.path())):p(i)},function(){v.currentUser=null,window.KF5SupportBoxAPI.close(),a?u():p(i)})},userPromise:null,requestCurrentUser:function(n){if(v.isAuthenticated())return i.when(v.currentUser);var a=new Date;return v.userPromise?v.userPromise:(v.userPromise=t.get(PREFIX_URL+"eqs/login?time="+a.getTime(),{withCredentials:!0}).then(function(t){if(v.userPromise=null,t.data.success){if(d.userPower(t.data.obj),t.data.obj?e.userPermit=","+t.data.obj.extPermi+",":e.userPermit=null,v.currentUser=t.data.obj,e.$broadcast("currentUserDns",v.currentUser),n)n();else{var i=l.get("currentuser","currentuser");i!==v.currentUser.id&&(l.clear(),l.push("currentuser","currentuser",v.currentUser.id))}(!v.currentUser.roleIdList||v.currentUser.roleIdList.length<=0)&&(v.currentUser.roleIdList=[2])}return v.currentUser},function(){v.userPromise=null}),v.userPromise)},isAuthenticated:function(){return!!v.currentUser},isAllowToAccess:function(e){if(!v.currentUser)return!1;var t=r.userRoleDef[d.accountType];return!!t&&(t.code&e)>0},accessDef:r.accessDef,isEditor:function(){if(!v.currentUser)return!1;var e=v.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if(4===e[t])return!0;return!1},isTplEditor:function(){if(!v.currentUser)return!1;var e=v.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if(4===e[t]||12===e[t]||13===e[t])return!0;return!1},isPcEditor:function(){if(!v.currentUser)return!1;var e=v.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if(12===e[t])return!0;return!1},isAdvancedUser:function(){return!!v.currentUser&&3===v.currentUser.type},isVendorUser:function(){return!!v.currentUser&&4===v.currentUser.type},requestResetPassword:function(e){openResetPasswordDialog(e)},validateToken:function(e){var i="changepw?token="+e;return t.get(PREFIX_URL+i,{withCredentials:!0})},resetPassword:function(e,i){var n=PREFIX_URL+"m/base/user/changePwd",a={oldPwd:e,newPwd:i};return t.post(n,$.param(a),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}};return v}]),angular.module("security.thirdparty",["security.service"]).factory("thirdpartyService",["$rootScope","$http","$location","$window","security","i18nNotifications","ModalService",function(e,t,i,n,a,s,o){function r(e){var t="https://graph.qq.com/oauth2.0/authorize?",i="101149132",n=["client_id="+i,"redirect_uri="+e,"scope=get_user_info","response_type=token"],a=n.join("&");return c=t+a}function l(e){var t="https://open.weixin.qq.com/connect/qrconnect?",i="wxc5f1bbae4bb93ced",n=["appid="+i,"redirect_uri="+e,"scope=snsapi_login","response_type=code","state=WECHAT_STATE#wechat_redirect"],a=n.join("&");return d=t+a}var c,d,p={qqUrl:r,wxUrl:l,referrer:"http://eqxiu.com/home",cookieId:eqShow.getCookieId(),qqLogin:function(e,t){p.getThirdPartyInfo(e).then(function(i){var n=i.openid,a=(i.client_id,{email:"",password:"",openId:n,accessToken:e,type:"qq",expires:t,cookieId:p.cookieId,referrer:p.referrer});p.thirdPartLogin(a)})},getThirdPartyInfo:function(e){var t="https://graph.qq.com/oauth2.0/me?access_token="+e;return $.ajax({type:"get",url:t,dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:"callback",xhrFields:{withCredentials:!0}})},weiChatLogin:function(e){return t.post(PREFIX_URL+"eqs/relWechatAccount?code="+e+"&type=weixin&cookieId="+p.cookieId+"&referrer="+p.referrer+"&isMobile=1&time="+(new Date).getTime(),{},{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},unbindRelation:function(i){var n={type:i},a="m/u/unRelation";t({withCredentials:!0,method:"POST",url:PREFIX_URL+a,data:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){t.data.success&&e.$broadcast("mail.unbind.success",i)})},wxBindAccount:function(e){p.bindAccountCommon(e)},qqBindAccount:function(e){p.getThirdPartyInfo(e.access_token).then(function(t){var i=t.openid,n=(t.client_id,{openId:i,accessToken:e.access_token,expires:e.expires_in,type:"qq"});p.bindAccountCommon(n)},function(){})},bindAccountCommon:function(i){var n="m/u/bind/third";t({withCredentials:!0,method:"POST",url:PREFIX_URL+n,data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){t.data.success?e.$broadcast("rel.success",i.type):s.pushForCurrentRoute("already.bind.error","notify.success",{msg:t.data.msg})},function(){o.openMsgDialog({msg:"服务器异常！"})})},openThirtyPartyWindow:function(e){p.referrer=document.referrer;var t,i=eqShow.getDomain(window.location.href),a=encodeURIComponent("http://"+i+"/passport.html");"qq"==e?t=p.qqUrl(a):"weixin"==e&&(t=p.wxUrl(a));var s=(window.outerHeight-600)/2,o=(window.outerWidth-600)/2;n.open(t,"_blank","width=600,height=600,menubar=no,toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,top="+s+",left="+o)}};return p}]),angular.module("services.account.type",[]).factory("accountTypeService",[function(){function e(e){if(e){if(1===e.type)t=1,i="普通用户";else if(2===e.type&&null===e.memberType)t=2,i="企业用户";else if(21===e.type&&null===e.memberType)t=21,i="企业子用户";else if(2===e.type&&e.memberType)switch(e.memberType){case 1:t=201,i="企业体验版";break;case 2:t=202,i="企业高级版";break;case 3:t=203,i="企业专业版";break;case 4:t=204,i="企业畅享版";break;case 6:t=206,i="企业体验版";break;case 7:t=207,i="企业基础版";break;case 8:t=208,i="企业标准版";break;case 9:t=209,i="企业高级版"}else if(21===e.type&&e.memberType)switch(e.memberType){case 1:t=211,i="企业体验版";break;case 2:t=212,i="企业高级版";break;case 3:t=213,i="企业专业版";break;case 4:t=214,i="企业畅享版";break;case 6:t=216,i="企业体验版";break;case 7:t=217,i="企业基础版";break;case 8:t=218,i="企业标准版";break;case 9:t=219,i="企业高级版"}else 5===e.type?(t=5,i="公共用户"):51===e.type?(t=51,i="公共子用户"):3===e.type?(t=3,i="高级用户"):4===e.type?(t=4,i="服务商用户"):98===e.type?(t=98,i="代理商用户"):99===e.type&&(t=99,i="超级用户");this.accountType=t,this.accountName=i}}var t,i;return{userPower:e}}]),angular.module("services.active",[]).factory("activeService",["$rootScope","$http",function(e,t){var i={};return i.getActiveList=function(e,i,n){var a=PREFIX_S1_URL+"eqs/activity/scene";return e&&(a+=/\?/.test(a)?"&":"?",a+="promId="+e),i&&(a+=/\?/.test(a)?"&":"?",a+="pageNo="+i),n&&(a+=/\?/.test(a)?"&":"?",a+="pageSize="+n),t({withCredentials:!0,method:"GET",url:a})},i}]),angular.module("services.breadcrumbs",[]),angular.module("services.breadcrumbs").factory("breadcrumbs",["$rootScope","$location",function(e,t){var i=[],n={};return e.$on("$routeChangeSuccess",function(){var e,n=t.path().split("/"),a=[],s=function(e){return"/"+n.slice(0,e+1).join("/")};for(n.shift(),e=0;e<n.length;e++)a.push({name:n[e],path:s(e)});i=a}),n.getAll=function(){return i},n.getFirst=function(){return i[0]||{}},n}]),angular.module("service.codeMessage",[]).factory("codeMessageService",function(){var e={200:"操作成功",500:"服务器异常",403:"未授权 禁止访问",1001:"未登录",1002:"登录超时",1003:"账号不存在",1004:"密码错误",1005:"验证码错误",1006:"重复注册",1007:"当前账号被冻结，请联系客服处理",1008:"邮箱不能为空",1009:"手机号不能为空",1010:"数据不合法",1011:"不存在该数据",1012:"重复请求",1013:"超过有效期",1014:"验证码错误",1015:"已验证过邮箱",1016:"发送验证码失败,请明天再试!",1017:"发送验证码过于频繁,请稍候重试!",1018:"手机验证码输入错误",1019:"请求太频繁, 请稍候再试",1020:"请获取验证码",110001:"未关联账号",110002:"密码不能为空",110003:"旧密码不正确",110004:"无效的邮件地址",110005:"该链接已失效!",110006:"子账号数量已超过限制",110007:"手机号格式不合法",110008:"不可重复请求！",110010:"更新失败！",110011:"您尚未绑定保密邮箱，无法申请，请在用户中心--账号安全中绑定保密邮箱",110012:"没有权限",110013:"短信验证码失效，请重新获取",110014:"子账号不能添加子账号，请刷新浏览器",110015:"您的短信已用完，请充值",110016:"短信数量不足，请充值",110017:"短信发送失败,请检查客户手机号是否正确",110018:"发送失败,请稍后重试",110019:"账号被冻结，请在企业管理员账号中重新启用",110201:"绑定id不是临时用户id",110202:"用户已经存在",110203:"无效的账号",110204:"用户不存在",110205:"用户名与密码不匹配",110206:"输入邮箱已经关联qq",110207:"输入邮箱已经关联微信",110208:"输入邮箱已经关联微博",110209:"code为空或者不存在",110210:"绑定第三方账号失败，请稍候再试！",110211:"此微信已经绑定过易企秀账号",110212:"call api map is null",110213:"账号未关联",110214:"域名不能为空",110215:"邮箱格式不合法",110216:"3分钟内不可重复请求！",110217:"每天发送量已达上限",110218:"邮件发送失败!",110220:"邮件已发送",110222:"请求已过期，请重新发送短信进行验证！",110223:"无效用户",110224:"与绑定手机号码不符！",110225:"有效期已过，请重新发送验证邮件",110226:"验证邮箱不存在!",110227:"此QQ已经绑定过易企秀账号",110228:"该邮箱已经被绑定，请更换其他邮箱",110229:"此用户名已被其它用户绑定",110301:"请求参数不合法",110302:"appid不存在",110303:"请求地址与注册信息不符",110304:"参数p2不合法",110305:"token不合法",110306:"域名不合法",110307:"该场景信息不存在",110401:"手机号码已被占用，请更换其它手机号码！",110402:"请更换其它手机号码！",110403:"请输入手机验证码！",110501:"主账号不存在！",110502:"从账号不存在！",110503:"添加部门重复请重新输入",120001:"页面不存在或已删除",120101:"场景保存失败，请稍后重试",120102:"场景不能转送给自已",120103:"保存失败，服务器忙碌请稍后重试",120104:"请为场景起个名字!",120105:"场景创建中，请耐心等待",120106:"添加微信组件或访问密码的场景，无法申请场景保障服务",120107:"您的场景保障服务剩余天数不足",120108:"场景不存在",120109:"审核中或审核不通过的场景，无法申请场景保障服务",120201:"参数不正确",120202:"请重新设置场景标签！",120203:"付费样例免费使用次数已用尽",120204:"企业帐号会员到期",120301:"您今天的前置场景审核次数已用尽",120302:"您今天的驳回加急审核次数已用尽",120303:"前置场景审核每次间隔1小时",120304:"请先重新编辑场景",120305:"场景已在审核队列中，请耐心等待",120306:"请先验证手机号",120307:"当前场景在审核中，无法编辑",120401:"只有企业用户可以查询场景设备和地域浏览量",120402:"免费升级企业会员可使用",130001:"秀点不足",130002:"操作过于频繁，请稍候再试！",130003:"当前要使用的样例价格已被用户修改，请刷新重新选择使用！",130004:"您的秀点余额不足，无法使用该样例，请先购买或参与活动获取秀点",130005:"秀点转送失败",130006:"当前样例价格为：",140101:"申请失败！",140102:"作品不能相同",140103:"服务领域不能超过3个",140104:"擅长领域不能超过5个",140105:"申请成功,请等待审核!",140106:"企业账号与企业子账号不可申请成为秀客！",140107:"秀客信息不存在！",140108:"标签项不能为空！",140109:"秀客作品不能为空！",140110:"申请审核中不可修改信息！",140111:"服务领域不可为空",140112:"擅长领域不可为空",140113:"支付方式不可为空",140001:"删除失败",140002:"修改失败！",150101:"您不是企业会员,请先申请企业会员后再进行操作！",150102:"请先验证手机号",150103:"定制活动申请已在审核中，请耐心等待",150104:"定制活动已通过审核，请等待活动发布",160001:"二级分类不能为'全部'",160002:"add tag size more than 50",160003:"delete tag size more than 50",160004:"请选择业务类型！",160005:"无效的参数",160006:"该图片格式不支持裁切",160007:"裁剪失败",160008:"tagid is all",160009:"tagid is null",160010:"路径不能为空！",160011:"文件地址不正确！",160012:"文件格式不正确",160013:"文件超过最大限制",160014:"不支持该图片格式",160015:"无效的图片",160016:"无效的文件",160017:"文件数据不正确",160018:"文件名有误，请获取客户模板，并按要求填写内容后再次上传",170001:"轻印刷作品不存在！",170101:"复制轻印刷作品失败！",170102:"普通用户无法接收轻印刷作品！",180001:"未能成功获取秉钧token",180002:"未能登录到秉钧",970101:"您不是企业会员,请先申请企业会员后再进行升级！",970102:"会员未到期,不可购买其他会员服务!",970103:"专业版会员只能续费专业版会员服务!",970104:"畅享版会员只能续费畅享版会员服务!",970105:"每次最多只能购买两次会员服务！",970106:"基础版或高级版会员不可升级为畅享版、专业版或渠道专享版会员！",970107:"渠道专享版会员只能续费渠道专享版会员服务！",970108:"请购买更高级别的会员！",970109:"您的会员有效期超过两年或续费后超过两年，无法续费或升级！",970110:"您暂时无法升级该级别会员，请联系客服：010-83035157",970111:"新版会员与原有会员体系不可交叉购买",970112:"您购买后，会员有效期超过服务终止期限，无法购买！",970113:"企业体验版一次最多只能购买6个月",970201:"所选订单中存在已开发票订单！",990001:"android临时关闭qq注册功能，详情请看论坛(bbs.eqxiu.com)通知！",990002:"get ticket error",990003:"请选择要审核的场景记录",990004:"未支持的审核类型",990005:"请选择要审核的场景！",990006:"无效的参数",990007:"无效的appid和secre！",990008:"secre为空",990009:"appid为空",990010:"请选择要审核的轻印刷产品记录！",990010:"创建分组失败",990011:"请选择要删除的用户！",990012:"请选择要删除的词语！",990013:"用户邮箱不能为空！"};return{getMsg:function(t,i){return 200===t.code&&angular.isFunction(i)?void i.apply():200===t.code?"":t.msg||e[t.code]}}}),angular.module("services.config",[]).factory("configService",["$http",function(e){var t=function(){var t=PREFIX_S2_URL+"eqs/image/pc/logo";return e({method:"GET",url:t})},i=function(){var t=PREFIX_S2_URL+"eqs/image/pc/banner";return e({method:"GET",url:t})},n=function(){var t=PREFIX_S2_URL+"eqs/friendlinks";return e({method:"GET",url:t})};return{getBanners:i,getFriendLinks:n,getLogo:t}}]),angular.module("services.crud",["services.crudRouteProvider"]),angular.module("services.crud").factory("crudEditMethods",function(){return function(e,t,i,n,a){var s={};return s[e]=t,s[e+"Copy"]=angular.copy(t),s.save=function(){this[e].$saveOrUpdate(n,n,a,a)},s.canSave=function(){return this[i].$valid&&!angular.equals(this[e],this[e+"Copy"])},s.revertChanges=function(){this[e]=angular.copy(this[e+"Copy"])},s.canRevert=function(){return!angular.equals(this[e],this[e+"Copy"])},s.remove=function(){this[e].$id()?this[e].$remove(n,a):n()},s.canRemove=function(){return t.$id()},s.getCssClasses=function(e){var t=this[i][e];return{error:t.$invalid&&t.$dirty,success:t.$valid&&t.$dirty}},s.showError=function(e,t){return this[i][e].$error[t]},s}}),angular.module("services.crud").factory("crudListMethods",["$location",function(e){return function(t){var i={};return i["new"]=function(){e.path(t+"/new")},i.edit=function(i){e.path(t+"/"+i)},i}}]),function(){function e(e){this.$get=angular.noop,this.routesFor=function(t,i,n){var a=t.toLowerCase(),s="/"+t.toLowerCase();n=n||i,angular.isString(i)&&""!==i&&(a=i+"/"+a),null!==n&&void 0!==n&&""!==n&&(s="/"+n+s);var o=function(e){return a+"/"+t.toLowerCase()+"-"+e.toLowerCase()+".tpl.html"},r=function(e){return t+e+"Ctrl"},l={whenList:function(e){return l.when(s,{templateUrl:o("List"),controller:r("List"),resolve:e}),l},whenNew:function(e){return l.when(s+"/new",{templateUrl:o("Edit"),controller:r("Edit"),resolve:e}),l},whenEdit:function(e){return l.when(s+"/:itemId",{templateUrl:o("Edit"),controller:r("Edit"),resolve:e}),l},when:function(t,i){return e.when(t,i),l},otherwise:function(t){return e.otherwise(t),l},$routeProvider:e};return l}}e.$inject=["$routeProvider"],angular.module("services.crudRouteProvider",["ngRoute"]).provider("crudRoute",e)}(),angular.module("services.dataCache",[]),angular.module("services.dataCache").factory("dataCacheService",["$timeout","$rootScope",function(e,t){var i={};this.asyncUrl="",i.clear=function(e){window.sessionStorage&&(e||sessionStorage.clear(),delete sessionStorage[e])},i.push=function(e,t,i){if(window.sessionStorage){var n=sessionStorage.getItem(e);n=n?JSON.parse(n):{},n[t]=i,sessionStorage.setItem(e,JSON.stringify(n))}},i.get=function(e,t){if(!window.sessionStorage)return null;var i=sessionStorage.getItem(e);return i?(i=JSON.parse(i),i[t]):null},i.asyncGet=function(t,i){var n=sessionStorage.getItem(t);n=JSON.parse(n);var a=e(function(){return n[i]});return a},i.contains=function(e,t){if(!window.sessionStorage)return!1;var i=sessionStorage[e];return!!i&&(i=JSON.parse(i),!!i[t])},i.setAsyncUrl=function(e){this.asyncUrl=e},i.getAsyncUrl=function(){return this.asyncUrl};var n={photo:[],audio:[],shapes:[]};return i.pushUsedFile=function(e,t){var i;switch(e){case 1:i=n.photo;break;case 2:i=n.audio;break;case 7:i=n.shapes}i.indexOf(t)<=-1&&i.push(t)},i.removeUsedFile=function(e,t){var i;switch(e){case 1:i=n.photo;break;case 2:i=n.audio;break;case 7:i=n.shapes}var a=i.indexOf(t);a!==-1&&i.splice(a,1)},i.getUsedFiles=function(){for(var e=[],t=[],i=0;i<n.photo.length;i++)n.photo[i]&&(e.push(n.photo[i]),t.push(1));for(var a=0;a<n.audio.length;a++){if(!n.audio[a])return;e.push(n.audio[a]),t.push(2)}for(var s=0;s<n.shapes.length;s++){if(!n.shapes[s])return;e.push(n.shapes[s]),t.push(7)}if(0!==e.length)return{file:e.join(","),type:t.join(",")}},i.clearUsedFiles=function(){n={photo:[],audio:[],shapes:[]}},t.$watch("user",function(e,t){if(e!==t){var n=i.get("currentuser","currentuser");n!==e.id&&(i.clear(),i.push("currentuser","currentuser",e.id))}}),i}]),angular.module("services.data",[]),angular.module("services.data").factory("dataService",["$http","$rootScope",function(e,t){var i={};return i.getDatas=function(i){var n="m/scene/stat/sum";return i&&(n+=(/\?/.test(n)?"&":"?")+"user="+i),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n}).then(function(e){if(e.data.success){var i=e.data.obj;t.$broadcast("sceneDatas",i)}})},i.getCustomDatas=function(i){var n="m/c/stat/sum";return i&&(n+=(/\?/.test(n)?"&":"?")+"user="+i),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n}).then(function(e){if(e.data.success){var i=e.data.obj;t.$broadcast("customDatas",i)}})},i.getDataBySceneId=function(t,i,n,a){i=i||1,n=n||10;var s="m/scene/data/"+t+"?pageNo="+i+"&pageSize="+n;a&&(s+=(/\?/.test(s)?"&":"?")+"user="+a);var o=new Date;return s+="&time="+o.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},i.getDataBySceneId=function(t,i,n,a){i=i||1,n=n||10;var s="m/scene/data/"+t+"?pageNo="+i+"&pageSize="+n;a&&(s+=(/\?/.test(s)?"&":"?")+"user="+a);var o=new Date;return s+="&time="+o.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},i.getDataDetail=function(t,i){var n="m/c/detail/"+t;i&&(n+=(/\?/.test(n)?"&":"?")+"user="+i);var a=new Date;return n+=(/\?/.test(n)?"&":"?")+"date="+a.getTime(),
e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},i.getDataMessage=function(t){var i="m/scene/dataScene";t&&(i+=(/\?/.test(i)?"&":"?")+"user="+t);var n=new Date;return i+=(/\?/.test(i)?"&":"?")+"date="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.getAllData=function(t,i,n,a){var s="m/c/data?pageSize=10&pageNo="+t;i&&(s+=(/\?/.test(s)?"&":"?")+"user="+i),a&&(s+=(/\?/.test(s)?"&":"?")+"origin="+a),n&&(s+=(/\?/.test(s)?"&":"?")+"groupId="+n);var o=new Date;return s+=(/\?/.test(s)?"&":"?")+"time="+o.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},i.getProspectDataAccount=function(t){var i="m/c/prospectCount?time="+(new Date).getTime();return t&&(i+=(/\?/.test(i)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.deleteDataById=function(t){var i="m/c/delete/"+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.saveData=function(t,i){var n=i?"m/c/create":"m/c/save";return e({withCredentials:!0,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},url:PREFIX_URL+n,data:t})},i.getSceneField=function(t){var i="m/c/formField/"+t,n=new Date;return i+="?time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.getPremergeScenes=function(t){var i="m/scene/newDataScene";t&&(i+=(/\?/.test(i)?"&":"?")+"user="+t);var n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.mergeSceneData=function(t,i){var n="m/c/imps/"+t;return e({withCredentials:!0,method:"POST",url:PREFIX_S3_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)})},i.getOrigin=function(t){var i="m/c/origin";return t&&(i+=(/\?/.test(i)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.getGroups=function(t){var i="m/c/group/list";return t&&(i+=(/\?/.test(i)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.assignGroup=function(t){var i="m/c/group/set?cIds="+t.cIds+"&gIds="+t.gIds;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},i.deleteAssociation=function(t){var i="m/c/group/unset?cId="+t.cId+"&gId="+t.gId;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},i.createGroup=function(t){var i="m/c/group/create";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},i.updateSceneGroup=function(t,i){var n="m/scene/group/update";n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime();var a={id:t,name:i};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,data:$.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},i.createSceneGroup=function(t){var i="m/scene/group/create";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,data:$.param({name:t.name}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},i.deleteCustomer=function(t){var i="m/c/delete?ids="+t.ids;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},i.deleteGroup=function(t){var i={id:t},n="m/c/group/delete";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},i.modelMess=function(t){var i="m/c/tpl/list?sceneId="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.messageNumber=function(){var t="m/u/user/param/msg";return e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},i.getMessModel=function(t){var i="m/u/list/goods?type="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.buyMess=function(t){var i="m/u/user/msg/save",n={id:t};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,data:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},i.sendMess=function(t,i,n,a){var s="m/c/msg/batch/scend",o={ids:t,id:i,mobiles:n,sceneId:a};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+s,data:$.param(o),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},i.sendTatolDetail=function(t){var i="m/c/msg/list";return i+="?pageNo="+t+"&pageSize=10",e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.sendDetail=function(t,i){var n="m/c/msg/details/"+t;return n+="?pageNo="+i+"&pageSize=10",e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},i.getOpenedScenes=function(){var t="m/scene/publish/count";return t+=(/\?/.test(t)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},i}]),angular.module("services.effect",[]),angular.module("services.effect").factory("effectService",["$rootScope","$http",function(e,t){function i(i,n,a){var s="api/eqx/p/order/total/"+i+"/"+n+"/"+a+"/stat.json";t({withCredentials:!0,method:"GET",url:BIG_DATA_HOST+s}).then(function(t){200===t.data.code&&e.$broadcast("get.pvs.receivers",t.data.obj)})}function n(i,n,s){var o=eqShow.DateFormat(new Date(n),"yyyyMMdd"),r=eqShow.DateFormat(new Date(s),"yyyyMMdd"),l="api/eqx/p/order/daily/"+i+"/"+o+"/"+r+"/stat.json";t({withCredentials:!0,method:"GET",url:BIG_DATA_HOST+l}).then(function(t){if(200===t.data.code&&t.data.list&&t.data.list.length){for(var i,o=t.data.list,r=a(n,s),l=[],c=0;c<r.length;c++){l[c]=0;for(var d=0;d<o.length;d++)r[c]===o[d].statTime&&(l[c]=o[d].pv)}i={dateList:r,pvList:l},e.$broadcast("get.pvs.daily",i)}})}function a(e,t){for(var i=new Date(e).getTime(),n=new Date(t).getTime(),a=(n-i)/864e5,s=[],o=0;o<a+1;o++)s.push(eqShow.DateFormat(new Date(i+1e3*o*60*60*24),"yyyyMMdd"));return s}function s(i,n,a){var s="api/eqx/p/order/area/"+i+"/"+n+"/"+a+"/stat.json",o=[];t({withCredentials:!0,method:"GET",url:BIG_DATA_HOST+s}).then(function(t){200===t.data.code&&(t.data.obj&&$.each(t.data.obj[0].regionPvMap,function(e,t){o.push({name:e,value:t})}),e.$broadcast("get.pv.region",o))})}var o={getOrderTotalPvsAndReceivers:i,getOrderDailyPv:n,getOrderRegionPv:s};return o}]),angular.module("services.exceptionHandler",["services.i18nNotifications"]),angular.module("services.exceptionHandler").factory("exceptionHandlerFactory",["$injector",function(e){return function(t){return function(i,n){var a=e.get("i18nNotifications");t(i,n),a.pushForCurrentRoute("error.fatal","error",{},{exception:i,cause:n})}}}]),angular.module("services.exceptionHandler").config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","exceptionHandlerFactory",function(e,t){return t(e)}])}]),angular.module("services.file",["services.i18nNotifications","services.staticRes"]),angular.module("services.file").factory("fileService",["$rootScope","$http","i18nNotifications","staticResService","dataCacheService",function(e,t,i,n,a){function s(e){var i="m/base/file/recently/used?fileType="+e;return i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function o(e,i){var n="m/base/file/history/save?fileIds="+e+"&fileTypes="+i;return n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function r(){var e=[{color:"#6366C3"},{color:"#29A1D6"},{color:"#332E42"},{color:"#DBF3FF"},{color:"#434A54"},{color:"#000000"},{color:"#F1F03E"},{color:"#FCF08E"},{color:"#972D53"},{color:"#724192"},{color:"#967BDC"},{color:"#EC87C1"},{color:"#D870AF"},{color:"#F6F7FB"},{color:"#666C78"},{color:"#ABB1BD"},{color:"#CCD0D9"},{color:"#E6E9EE"},{color:"#48CFAE"},{color:"#36BC9B"},{color:"#3BAEDA"},{color:"#50C1E9"},{color:"#AC92ED"},{color:"#4B89DC"},{color:"#4B89DC"},{color:"#5D9CEC"},{color:"#8DC153"},{color:"#ED5564"},{color:"#DB4453"},{color:"#FB6E52"},{color:"#FFCE55"},{color:"#F6BB43"},{color:"#E9573E"},{color:"#9FF592"},{color:"#A0D468"}];return e}function l(){var i="m/base/dict/list?type=tpType&pageNo=0&pageSize=20",n=i,s=a.get("picbgTotal",i);if(s)return L.sysCategoryList=s.data.rows,void e.$broadcast("sysCategory.update");var o=new Date;i+="&time="+o.getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(t){200===t.status&&(L.sysCategoryList=t.data.rows,a.push("picbgTotal",n,t),e.$broadcast("sysCategory.update"))})}function c(t){L.sysMusicList=""+t=="2"?n.getAudioTypes():n.getSoundTypes(),e.$broadcast("sysMusic.update")}function d(i){var n="m/base/file/tag/sys";i&&(n+="?bizType="+i);var s=n,o=a.get("sysTag",n);return o?(L.sysTagList=o.list,void e.$broadcast("sysTag.update")):(n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),void t({withCredentials:!0,method:"GET",url:PREFIX_URL+n}).then(function(t){t.data.success&&(L.sysTagList=t.data.list,a.push("sysTag",s,t.data),e.$broadcast("sysTag.update"))}))}function p(e,i,n,s,o,r,l){return e+="pageNo="+(i?i:1),e+="&pageSize="+(n?n:10),e+="&fileType="+s,(o||0===o)&&(e+="&bizType="+o),r&&(e+="&tagId="+r),l&&(e+="&delete=1"),a.contains("fileService1",e)?a.asyncGet("fileService1",e):(a.setAsyncUrl(e),e+="&time="+Date.now(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+e}))}function u(i,n,s,o,r,l){if("pure"!==r&&"pure"!==l){""+o=="1"&&(s=18),i+="pageNo="+(n?n:1),i+="&pageSize="+(s?s:10),i+="&fileType="+o,(r||0===r)&&(i+="&bizType="+r),l&&(i+="&tagId="+l);var c=a.get("fileService",i);if(c)return L.imgList=c.list,L.totalItems=c.map.count,L.pageNo=c.map.pageNo,void e.$broadcast("imgList.update");var d=i;i+="&time="+Date.now(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(t){t.data.success&&(L.imgList=t.data.list,L.totalItems=t.data.map.count,L.pageNo=t.data.map.pageNo,a.push("fileService",d,t.data),e.$broadcast("imgList.update"))})}else n*s<=M.length?L.imgList=M.slice((n-1)*s,n*s):L.imgList=M.slice((n-1)*s,M.length),L.totalItems=M.length,L.pageNo=n,e.$broadcast("imgList.update")}function h(e,t,i,n,a){var s="m/base/file/sysList?";return p(s,e,t,i,n,a)}function g(e,t,i,n,a){var s="m/base/file/sysList?";u(s,e,t,i,n,a)}function m(e,t,i,n,a,s){var o="m/base/file/userList?";return p(o,e,t,i,n,a,s)}function f(e,t,i,n,a){var s="m/base/file/userList?";u(s,e,t,i,n,a)}function v(i){var n="m/base/file/delete",a={id:i};t({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)}).then(function(t){t.data.success&&e.$broadcast("files.delete")})}function b(e,i){var n,a="m/base/file/delete";return n=i?{id:e,backup:i}:{id:e},t({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})}function y(e,i){var n="m/base/file/recycle/list?pageNo="+e+"&pageSize="+i;return t({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function w(e){var i="m/base/file/revoke?id="+e;return t({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function x(i){var n="m/base/file/tag/create",a={tagName:i};t({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)}).then(function(t){L.tagList.push({id:t.data.obj,name:i}),e.$broadcast("tagList.update")},function(){$scope.authError="创建失败"})}function k(){var i="m/base/file/tag/my?time"+(new Date).getTime();t({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(t){t.data.success&&(L.tagList=t.data.list,e.$broadcast("tagList.update"))})}function S(i,n){var a="m/base/file/tag/delete",s={id:i};t({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)}).then(function(t){t.data.success&&(L.tagList.splice(n,1),e.$broadcast("tagList.delete"))})}function T(i,n){var a="m/base/file/tag/set",s={tagId:i,fileIds:n};t({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)}).then(function(t){t.data.success&&e.$broadcast("tag.assign")})}function C(i,n){var a="m/base/file/tag/unset",s={tagId:i,fileIds:n};t({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)}).then(function(t){t.data.success&&e.$broadcast("tag.unbind")})}function E(e,i,n,s){var o="m/base/file/sysList?";if("0"===n&&""+s=="2"&&(o="m/base/file/list?"),o+="pageNo="+(e?e:1),o+="&pageSize="+(i?i:12),n&&"all"!==n&&(o+="&bizType="+(n?n:-1)),o+="&fileType="+(s?s:-1),a.contains("mySounds",o))return a.asyncGet("mySounds",o);a.setAsyncUrl(o);var r=new Date;return o+="&time="+r.getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+o})}function P(e){var i="m/base/file/crop";return t({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(e)})}function I(i){var n=PREFIX_URL+"m/base/file/info/save";return t({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)}).then(function(t){return t.data.success&&e.$broadcast("get.file.list",t.data.obj),t})}function _(){e.$broadcast("backto.my.list")}var L={pageNo:1,totalItems:0,sysCategoryList:[],getSysCategory:l,sysTagList:[],getSysMusicCategory:c,userRecycle:y,fileRevoke:w,sysMusicList:[],getSysTagByCatId:d,imgList:[],getSystemFiles:h,getUserFiles:m,getSystemFiles1:g,getUserFiles1:f,tagList:[],createTag:x,getTagList:k,deleteTag:S,assignTag:T,unbindTag:C,deleteFile:v,deleteFile1:b,getFileByCategory:E,getBgColorList:r,cropImage:P,getFilesHistory:s,saveFilesHistory:o,saveFileInfo:I,backToMyList:_},M=r();return L}]),angular.module("services.font",[]),angular.module("services.font").factory("fontService",["$http","$q",function(e,t){function i(i){var n=t.defer(),a=PREFIX_URL+"m/scene/toll/font";return e({method:"GET",url:a,withCredentials:!0,params:{id:i}}).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}var n={checkBoughtFonts:i};return n}]),angular.module("services.guide",[]),angular.module("services.guide").factory("guideService",["$rootScope","$modal","storageService","security","$timeout","newVersionService",function(e,t,i,n,a,s){function o(){var e=[],t=!0;s.getVersionInfo().then(function(a){var s=a.data,o=s.obj;JSON.parse(i.get("newVersionsFrame"))?(e=JSON.parse(i.get("newVersionsFrame")),$.each(e,function(e,i){i.username===n.currentUser.loginName&&i.newversion===o.version&&(t=!1)}),t&&r(e,o)):r(e,o)})}function r(e,s){e.push({username:n.currentUser.loginName,newversion:s.version}),a(function(){t.open({windowClass:"login-container version_frame",keyboard:!1,templateUrl:"main/newVersionFrame.tpl.html",controller:"newVersionFrame",resolve:{versionInfo:function(){return s}}}).result.then(function(e){},function(){})}),i.push("newVersionsFrame",JSON.stringify(e))}var l={newVersionFrameFn:o};return l}]).factory("newVersionService",["$rootScope","$http",function(e,t){function i(){var e="m/u/update/notice";return t({withCredentials:!0,method:"POST",url:PREFIX_URL+e})}var n={getVersionInfo:i};return n}]),angular.module("services.history",[]).factory("historyService",["$rootScope",function(e){var t={},i={},n={};return t.addPage=function(n,a){return i[n]||(i[n]={currentPos:0,inHistory:!1,pageHistory:[]},t.addPageHistory(n,a)),e.$broadcast("history.changed"),JSON.parse(i[n].pageHistory[i[n].currentPos])},t.addPageHistory=function(t,a){if(n=i[t]){n.inHistory&&(n.inHistory=!1,n.pageHistory.length=n.currentPos+1);var s=JSON.stringify(a);s!==n.pageHistory[n.pageHistory.length-1]&&n.pageHistory.push(s),n.currentPos=n.pageHistory.length-1,e.$broadcast("history.changed")}},t.clearHistory=function(){i={}},t.canBack=function(e){return n=i[e],n.currentPos>0},t.canForward=function(e){return n=i[e],n.currentPos<n.pageHistory.length-1},t.back=function(t){if(n=i[t],n.pageHistory.length){n.inHistory=!0;var a=0===n.currentPos?n.pageHistory[0]:n.pageHistory[--n.currentPos];return e.$broadcast("history.changed"),JSON.parse(a)}},t.forward=function(t){if(n=i[t],n.pageHistory.length){n.inHistory=!0;var a=n.currentPos===n.pageHistory.length-1?n.pageHistory[n.currentPos]:n.pageHistory[++n.currentPos];return e.$broadcast("history.changed"),JSON.parse(a)}},t}]),angular.module("services.httpRequestTracker",[]),angular.module("services.httpRequestTracker").factory("httpRequestTracker",["$http",function(e){var t={};return t.hasPendingRequests=function(){return e.pendingRequests.length>0},t}]),angular.module("services.i18nNotifications",["services.notifications","services.localizedMessages"]),angular.module("services.i18nNotifications").factory("i18nNotifications",["localizedMessages","notifications",function(e,t){var i=function(t,i,n,a){return angular.extend({message:e.get(t,n),type:e.get(i,n)},a)},n={pushSticky:function(e,n,a,s){return t.pushSticky(i(e,n,a,s))},pushForCurrentRoute:function(e,n,a,s){return t.pushForCurrentRoute(i(e,n,a,s))},pushForNextRoute:function(e,n,a,s){return t.pushForNextRoute(i(e,n,a,s))},getCurrent:function(){return t.getCurrent()},remove:function(e){return t.remove(e)},removeAll:function(){return t.removeAll()}};return n}]),angular.module("services.localizedMessages",[]).factory("localizedMessages",["$interpolate","I18N.MESSAGES",function(e,t){var i=function(e,t){return e||"?"+t+"?"};return{get:function(n,a){var s=t[n];return s?e(s)(a):i(s,n)}}}]),angular.module("services.mine",[]),angular.module("services.mine").factory("MineService",["$http","$rootScope","dataCacheService",function(e,t,i){var n={};return n.getNewSample=function(){var t="m/scene/lable/new";return t+=(/\?/.test(t)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+t})},n.getMyGroup=function(i){var n="m/scene/group/mygroup?param="+i;return n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+n}).then(function(e){200===e.data.code&&t.$broadcast("get.my.group",e.data.list)})},n.editGroup=function(i,n){var a="m/scene/group/update";a+=(/\?/.test(a)?"&":"?")+"time="+(new Date).getTime();var s={groupId:i,groupName:n};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)}).then(function(e){200===e.data.code&&t.$broadcast("update.my.group",e.data.list)})},n.deleteGroup=function(i,n){var a="m/scene/group/delete?id="+i;return a+=(/\?/.test(a)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+a}).then(function(e){200===e.data.code&&t.$broadcast("delete.my.group",n)})},n.moveGroupScene=function(t,i){var n="m/scene/group/set";n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime();var a={id:t,sIds:i};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},n.getMyScenes=function(i,a,s,o,r,l,c){var d;d=i?"m/scene/my/"+i:"m/scene/my";var p={showData:l,pageNo:a,pageSize:s,user:o,name:r,groupId:c};return d+=(/\?/.test(d)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,loading:!0,method:"POST",url:PREFIX_URL+d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(p)}).then(function(e){return 200===e.data.code&&(n.scenes=e.data,t.$broadcast("get.my.scene.list")),e.data})},n.deleteSceneById=function(t,i){var n="m/scene/delete?id="+t;return i&&(n+="&backup="+i),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.getMyHistoryScenes=function(t,i,n){var a="m/scene/recycle/list";return a+="?pageNo="+(t?t:1),a+="&pageSize="+(i?i:12),n&&(a+="&user="+n),a+=(/\?/.test(a)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},n}]),angular.module("services.modal",["confirm-dialog","message-dialog","bindemail-dialog"]).factory("ModalService",["$modal",function(e){var t={};return t.openBindEmailDialog=function(){e.open({keyboard:!1,backdropClick:!0,windowClass:"confirm-dialog",templateUrl:"dialog/bindemail.tpl.html",controller:"BindEmailDialogCtrl"})},t.openConfirmDialog=function(t,i,n){e.open({backdrop:"static",keyboard:!1,backdropClick:!1,windowClass:"confirm-dialog",templateUrl:"dialog/confirm.tpl.html",controller:"ConfirmDialogCtrl",resolve:{confirmObj:function(){return t}}}).result.then(i,n)},t.openMsgDialog=function(t,i,n){e.open({backdrop:"static",keyboard:!1,backdropClick:!1,windowClass:"message-dialog",templateUrl:"dialog/message.tpl.html",controller:"MessageDialogCtrl",resolve:{msgObj:function(){return t}}}).result.then(i,n)},t}]),angular.module("I18N.MESSAGES",[]).service("I18N.MESSAGES",["$rootScope",function(){var e={"notify.success":"success","notify.info":"info","notify.danger":"danger","notify.warning":"warning","notify.tip":"tip","errors.route.changeError":"Route change error","crud.user.save.success":"A user with id '{{id}}' was saved successfully.","crud.user.remove.success":"A user with id '{{id}}' was removed successfully.","crud.user.remove.error":"Something went wrong when removing user with id '{{id}}'.","crud.user.save.error":"Something went wrong when saving a user...","crud.project.save.success":"A project with id '{{id}}' was saved successfully.","crud.project.remove.success":"A project with id '{{id}}' was removed successfully.","crud.project.save.error":"Something went wrong when saving a project...","login.reason.notAuthorized":"离开久了，麻烦再登录一次吧！","login.reason.notAuthenticated":"为了保障您的账号安全，请登录！","login.error.invalidCredentials":"登录失败，请检查邮箱和密码是否正确。","login.error.serverError":"There was a problem with authenticating: {{exception}}.","register.error.serverError":"There was a problem with authenticating: {{exception}}.","login.reset.notmatch":"新密码和重复密码不匹配","register.error.match":"两次输入密码不一致","register.error.agreement":"请先同意注册协议再完成注册","file.bg.pageSize":"12","scene.save.success.published":"场景已保存成功！","scene.save.success.nopublish":"保存成功，还需要发布哦！","scene.save.success.companyTpl":"成功生成企业样例","scene.clear.success.companyTpl":"成功取消企业样例","companytpl.setting.success":"成功生成企业模板","mytpl.setting.success":"成功生成我的模板","scene.publish.success":"场景发布成功","account.success":"提交成功！","branch.open.success":"账号打开成功！","branch.close.success":"账号关闭成功！","dept.create.success":"部门创建成功！","dept.del.success":"部门删除成功！","dept.edit.success":"部门修改成功！","dept.update.success":"修改成功！","branch.create.success":"账号创建成功！","branch.update.success":"账号修改成功！","scene.setting.success":"场景设置成功！","data.assign.success":"分组成功！","data.delete.success":"数据删除成功！","group.delete.data":"分组内素材移除成功！","custom.data.delete":"此条客户数据删除成功！","group.delete.success":"分组删除成功！","group.create.success":"分组创建成功！","group.edit.success":"分组修改成功！","group.scene.success":"成功将此场景移动至分组","rel.tip":"您的账号还没有绑定邮箱，去用户中心->账号管理，马上绑定","page.change.success":"页面名称修改成功！","email.save.success":"邮箱绑定成功！","bbs.save.success":"论坛账号绑定成功！","reset.psw.success":"密码修改成功！","save.success":"保存成功！","upload.success":"上传成功！","mail.rel.success":"关联成功！","mail.unbind.success":"解除关联成功！","file.assign.success":"分组成功！","already.rel":"此账号已经关联过邮箱","branch.reset.success":"子账号密码重置成功！","already.bind.error":"{{msg}}","reject.crop.image":"不支持裁剪GIF格式图片！","visitor.apply":"信息已经提交审核，审核通过后会更新秀客信息，请耐心等待。","select.trigger.source":"请选择触发源","scratch.percentage.overflow":"涂抹比例不能大于100%","invitation.sendemail.success":"邮件发送成功!","invitation.sendemail.error":"邮件发送失败!","outbox.warning":"红色警告：超出虚线外边框的内容，将无法在手机中被看到","outbox.tip":"橙色警告：超出虚线内边框的内容，在部分老机型手机中将无法看到","already.apply.discovery":"您已申请加入秀场，暂时不能再申请！","already.apply.sample":"您已申请过成为样例，暂时不能再申请！","already.apply.activity":"您已申请过成为活动，暂时不能再申请！","phone.message":"成功开通短信提醒","scene.apply.success":"申请成功","xd.insufficient":"秀点余额不足，去用户中心－>会员服务进行充值","customer.name.overflow":"姓名不能超过50个字符","scene.deny.apply":"审核未通过的场景不能申请活动","scene.incheck.apply":"审核中的场景不能申请活动","scene.accessCode.apply":"加密设置的场景不能加入活动","scene.accessClose.apply":"关闭的场景不能加入活动","spread.share.messagecustomer":"请选择收件人","spread.share.messageless":"可用短信数量不足,请兑换短信","spread.share.messagecontent":"请先选择短信内容!","spread.share.messagesendsuccess":"发送成功","spread.share.messagebuylayout":"请选择购买类型","spread.share.messagebuyxdless":"秀点余额不足,请先购买秀点!","spread.share.guaranteeSucc":"申请保障服务成功","spread.share.guaranteeClose":"取消保障服务成功","print.scene.images.fail":"请先保存预览图","print.shop.images.fail":"印刷需保存预览图","print.images.number":"只能选择两张图片","print.images.null":"未选择任何图片","print.images":"敬请期待！","spread.share.guaranteeBuyXd":"购买保障服务成功","spread.share.guaranteeApplyError":"您的场景保障服务剩余次数不足,请先购买","spread.share.guaranteeApplyUnPublice":"场景未发布,不能参加保障服务","spread.share.guaranteeApplyCheck":"审核关闭的场景,不能参加保障服务","spread.share.guaranteeApplyUnCheck":"审核驳回的场景,不能参加保障服务","delete.scene.guarantee":"场景已经静态化,不能删除","transfer.scene.guarantee":"场景已经静态化,不能转送","usercenter.buybranch.success":"子帐号购买成功","usercenter.removebranch.success":"成功移除子账号","usercenter.buybranch.notcompany":"{{errMsg}}","rel.register.account.success":"设置成功","buy.success":"购买成功","allocation.succcess":"分配成功","lead.customer":"你已成功导入客户","order.cancel.success":"订单取消成功"};return e}]),angular.module("services.notifications",[]).factory("notifications",["$rootScope",function(e){var t={STICKY:[],ROUTE_CURRENT:[],ROUTE_NEXT:[]},i={},n=function(e,t){if(!angular.isObject(t))throw new Error("Only object can be added to the notification service");return e.push(t),t};return e.$on("$routeChangeSuccess",function(){t.ROUTE_CURRENT.length=0,t.ROUTE_CURRENT=angular.copy(t.ROUTE_NEXT),t.ROUTE_NEXT.length=0}),i.getCurrent=function(){return[].concat(t.STICKY,t.ROUTE_CURRENT)},i.pushSticky=function(e){return n(t.STICKY,e)},i.pushForCurrentRoute=function(e){return n(t.ROUTE_CURRENT,e)},i.pushForNextRoute=function(e){return n(t.ROUTE_NEXT,e)},i.remove=function(e){angular.forEach(t,function(t){var i=t.indexOf(e);i>-1&&t.splice(i,1)})},i.removeAll=function(){angular.forEach(t,function(e){e.length=0})},i}]),angular.module("services.order",[]),angular.module("services.order").factory("orderService",["$rootScope","$http","$q","ModalService","i18nNotifications",function(e,t,i,n,a){function s(e){var i=PREFIX_URL+"m/promotion/order/my";return i+="?time="+(new Date).getTime(),t({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(e)})}function o(e){var n="m/promotion/order/detail",a={orderId:e,time:(new Date).getTime()},s=i.defer();return t({withCredentials:!0,method:"GET",url:PREFIX_URL+n,params:a}).then(function(e){200===e.data.code&&s.resolve(e)}),s.promise}function r(e,t,i,n){t?l(e,i,n):c(e)}function l(i,n,a){var s="m/promotion/order/official/xb/list",o={orderId:i,pageNo:n||1,pageSize:a||1,time:(new Date).getTime()};t({withCredentials:!0,method:"GET",url:PREFIX_URL+s,params:o}).then(function(t){if(200===t.data.code&&t.data.list&&t.data.list.length){var i={count:t.data.map.count,orderTpl:a?t.data.list:t.data.list[0]};e.$broadcast("template.get.success",i)}})}function c(i){var n="m/promotion/order/xb",a={orderId:i,time:(new Date).getTime()};t({withCredentials:!0,method:"GET",url:PREFIX_URL+n,params:a}).then(function(t){if(200===t.data.code){var i={orderTpl:t.data.obj};e.$broadcast("template.get.success",i)}})}function d(e){var i="m/promotion/order/cancel",n={orderId:e};return t({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})}function p(){var e="m/promotion/order/recommand/list";return t({withCredentials:!0,method:"GET",url:PREFIX_URL+e})}function u(t){n.openConfirmDialog({msg:"确定取消订单?"},function(){d(t).then(function(t){200===t.data.code?(a.pushForCurrentRoute("order.cancel.success","notify.success"),e.$broadcast("cancel.order")):n.openMsgDialog({msg:t.data.msg})})})}function h(e){var i="m/promotion/order/create";return t({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(e)})}function g(e){var i="m/promotion/order/list";return t({withCredentials:!0,method:"GET",url:PREFIX_URL+i,params:e})}function m(e){var i="m/promotion/order/commit",n={orderId:e};return t({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})}function f(e){var i="m/accept/task/create",n={orderId:e};return t({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})}function v(e){var i="m/promotion/order/official/create";return t({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(e)})}function b(i,a,s){var o="m/promotion/order/budget/extract",r={orderId:i};t({withCredentials:!0,method:"POST",url:PREFIX_URL+o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(r)}).then(function(t){if(200===t.data.code)n.openMsgDialog({msg:"您的剩余预算"+a+"秀点已提取成功！您可以去秀点余额中查看"}),e.$broadcast("budget.extract.success");else{var i=t.data.msg;if(190008===t.data.code){var o=new Date(s).getTime()+3456e5,r=eqShow.DateFormat(new Date(o),"yyyy年MM月dd日");i="平台正在结算中,请于"+r+"(包含该天)之后来提取您的收益!"}n.openMsgDialog({msg:i})}},function(){n.openMsgDialog({msg:"服务器异常"})})}function y(){var e="m/promotion/order/price";return t({withCredentials:!0,method:"GET",url:PREFIX_URL+e})}function w(e){var i="m/promotion/order/statistics";return t({withCredentials:!0,method:"GET",url:PREFIX_URL+i,params:{orderId:e}})}function x(e){var i="m/promotion/order/delete",n={orderId:e};return t({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})}function k(i){var n="m/promotion/order/statistics",a={orderId:i,time:(new Date).getTime()};t({withCredentials:!0,method:"GET",url:PREFIX_URL+n,params:a}).then(function(t){200===t.data.code&&e.$broadcast("get.available.count",t.data.obj)})}function S(){var i="m/promotion/order/count";t({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(t){200===t.data.code&&e.$broadcast("count.num",t.data.map)})}function T(e){switch(e){case 1:return"待付款";case 2:return"审核中";case 3:return"推广中";case 4:return"审核失败";case 5:return"已结束"}}function C(e){switch(e){case 1:return"单页任务模板嵌入推广"}}function E(e){switch(e){case 1:return"任务页实际有效浏览量(PV)"}}var P={getOrderDetail:o,saveOrder:h,saveOfficialOrder:v,commitOrder:m,getOrderPrices:y,getOrderTemplate:r,cancelOrder:u,extractBudget:b,getRecommand:p,acceptTask:f,getAllOrderList:g,getOrderStatis:w,getOrderList:s,deleteOrder:x,getAvailableCount:k,showOrderStatus:T,showOrderType:C,showOrderPayType:E,getCountNum:S};return P}]),angular.module("services.pagetpl",[]),angular.module("services.pagetpl").factory("pageTplService",["$http","$rootScope","$modal","$q","dataCacheService",function(e,t,i,n,a){function s(t){var i="m/scene/page/custom/list";return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i,params:t})}function o(t){var i="m/scene/pageTplList/"+t,n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function r(t){var i="/m/scene/pageList/"+t,n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function l(){var t="base/class/tpl_page",i=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})}function c(t){var i="/m/scene/tag/sys/list?type=1";(t||0===t)&&(i+=(/\?/.test(i)?"&":"?")+"bizType="+t);var n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function d(t){var i="/m/scene/tag/sys/list?type=2";(t||0===t)&&(i+=(/\?/.test(i)?"&":"?")+"bizType="+t);var n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function p(t){var i="m/scene/show/tag?bizType="+t,n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,
method:"GET",url:PREFIX_URL+i})}function u(t){var i="/m/scene/tag/page/list?id="+t,n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function h(t,i,n,s){var o,r,l,c={};return i?(r=o="search/template/",l=SEARCH_SERVER_HOST,c.keyword=i,r+=(/\?/.test(o)?"&":"?")+"name="+i):(r=o="m/scene/tpl/page/list/",l=PREFIX_URL),(t||0===t)&&(r+=(/\?/.test(o)?"&":"?")+"tagId="+t,c.tagId=t),n&&(r+=(/\?/.test(o)?"&":"?")+"pageSize="+n,c.pageSize=n),s&&(r+=(/\?/.test(o)?"&":"?")+"pageNo="+s,c.pageNo=s),a.contains("pageTpl",r)?a.asyncGet("pageTpl",r):(a.setAsyncUrl(r),e({withCredentials:!0,method:"POST",url:l+o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(c)}))}function g(t,i){var n="m/scene/tag/page/set/?ids="+t;(i||0===i)&&(n+=(/\?/.test(n)?"&":"?")+"pageId="+i);var a=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+n})}function m(t){var i=new Date,n=PREFIX_URL+"m/scene/tpl/tags?id="+t+"&time="+i.getTime();return e({withCredentials:!0,method:"GET",url:n})}function f(t){var i=new Date,n=PREFIX_URL+"m/scene/related/tpl?tagId="+t+"&time="+i.getTime();return e({withCredentials:!0,method:"GET",url:n})}var v={getPageTpls:o,getMyTplList:r,getPageTplTypes:l,getPageTagLabel:c,getTagSysListWithType:d,getRandomTagWithType:p,getPageTagLabelCheck:u,getPageTplTypestemp:h,updataChildLabel:g,getExemplarTags:m,getSimilarTagExemplar:f,getCustomPageTpls:s};return v}]),angular.module("services.psdUpload",[]).factory("psdUploadService",["ModalService","uploaderService","fileService","dataCacheService","sceneService","$rootScope",function(e,t,i,n,a,s){function o(t){if(t.length>1)return e.openMsgDialog({msg:"您每次上传只能添加一个PSD格式的图片！"}),!1;if(t.length<1)return e.openMsgDialog({msg:"您还没有添加PSD格式的图片！"}),!1;var i=t[0].name.substr(t[0].name.lastIndexOf(".")).toLowerCase();return".psd"===i||(e.openMsgDialog({msg:"您上传的不是PSD格式图片，请添加PSD格式的图片！"}),!1)}function r(){$("#psdLoading").hide(),e.openMsgDialog({msg:"您上传的可视图层超过了30个，请您上传可视图层不要超过30个！"})}function l(e,n){var s=$.Deferred();return t.getUploadToken("image").then(function(o){function r(){var p=null;l>=e.length?s.resolve(d):(c=e[l],p=c.layer.image.toBase64().substring(22),p.length>5242880?(d.push(c.name),c=null,p=null,l++,r()):t.uploadBase64(o.data.map.token,p).then(function(t){var s={fileType:"1",bizType:0,path:t.key,tmbPath:t.key,tagId:0,name:c.name,size:Math.ceil(t.size/1024)};i.saveFileInfo(s),c.layer.src=t.key,c.layer.top=c.layer.top/2,c.layer.left=c.layer.left/2,c.layer.adjustWidth=c.layer.width/2,c.layer.adjustHeight=c.layer.height/2,l+1===e.length&&(c.layer.lastOne=!0),a.createComp("4",void 0,void 0,void 0,c.layer),n.currentNum=l+1,l++,c=null,p=null,r()}))}var l=0,c=null,d=[];r()}),s.promise()}function c(e,t){var i=$.Deferred();return eqxPSDDecompose.decompose(e[0]).then(function(e){t.total=e.length,e.length>30?r():$.when(l(e,t)).then(function(e){i.resolve(e)})}),i.promise()}return{validationPSDFile:o,psdDecompose:c}}]),angular.module("services.qCloud",[]).factory("qCloudService",["$http",function(e){function t(t,i,n){var a=STATISTICS_HOST+"m/sa/enable",s=n?1:0;return e({method:"POST",withCredentials:!0,url:a,data:$.param({sceneId:t,partner:i,enable:s}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}return{QCloudOpenOrClosed:t}}]),angular.module("services.scene",["scene.create.console","services.history","services.select","scene.create.console.pictures","scene.edit.trigger","services.dataCache","scene.create.console.font"]),angular.module("services.scene").factory("sceneService",["$http","$rootScope","$modal","$q","$timeout","security","$cacheFactory","historyService","selectService","picturesService","ModalService","triggerService","dataCacheService","editService","fontService","setCompService",function(e,t,i,n,a,s,o,r,l,c,d,p,u,h,g,m){function f(e){he.splice(he.indexOf(ge[e]),1),delete ge[e]}function v(e){ue.obj.elements=e,$("#nr").empty(),pe.parse({def:ue.obj,appendTo:"#nr",mode:"edit"});for(var i in e)if(3==e[i].type){var n="";e[i].properties.imgSrc&&(n=e[i].properties.imgSrc),t.$broadcast("show.edit.bg",n);break}t.$broadcast("dom.changed")}function b(e){angular.copy({},ge),$.each(e,function(e,t){ge[t.id]=t})}function y(e,t){var i={},n=$("#nr .edit_area"),a=0;if(ce)a=ce+=1;else{var s=n.children().last(),o=n.children(".maxIndex");ce=a=o.length>0?parseInt(o.css("z-index"),10)+1:s.length>0?parseInt(s.css("z-index"),10)+1:101}if(t)return t.zIndex=a,parseInt(t.top,10)>$("#nr .edit_area").outerHeight()-20?t.top=$("#nr .edit_area").outerHeight()-20+de.comPosition.top+"px":t.top=parseInt(t.top,10)+de.comPosition.top+"px",t;var r=$("#nr .edit_area").outerWidth(),l=r;return"v"==e?l=50:"4"==e?l=80:5==(""+e).charAt(0)||"6"==e||"r"==e||"c"==e||"a"==e||"z"===e?l=200:"m"==e?l=100:"t"==e?l=300:"b"==e&&(l=240),i={top:100+de.comPosition.top+"px",left:(r-l)/2+"px"},i.zIndex=a,i}function w(e,t,i,n){var a=parseInt(e.css.top,10)+10*me,s=parseInt(e.css.left,10);a+34>$("#nr .edit_area").outerHeight()?(t.css.top=a+"px",t.css.left=s+10+"px"):(t.css.top=a+34+"px",t.css.left=e.css.left,i==n&&me++)}function x(){return Math.ceil(1e10*Math.random())}function k(e,t,i){var n,a=x(),s={};if(e+="",3==e.charAt(0)){var o,r=[];for(o=0;o<he.length;o++)3==he[o].type&&r.push(he[o]);if(r.length>0)return r[0];s={content:null,css:{},id:a,num:0,pageId:ue.obj.id,properties:{bgColor:null,imgSrc:null},sceneId:ue.obj.sceneId,title:null,type:3}}else 1==e.charAt(0)?s={id:a,properties:{title:"提交"},type:1,pageId:ue.obj.id,sceneId:ue.obj.sceneId}:8==e.charAt(0)?(n=y(e,t),$.extend(!0,n,{color:"rgb(255, 255, 255)",width:"100px",height:"30px",lineHeight:"30px",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"rgb(244, 113, 31)"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{title:"一键拨号",number:""},sceneId:ue.obj.sceneId,title:null,type:8}):"l"==e?(n=y(e,t),$.extend(!0,n,{color:"rgb(255, 255, 255)",width:"100px",height:"40px",lineHeight:"40px",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"rgb(244, 113, 31)"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{title:"点我购买"},sceneId:ue.obj.sceneId,title:null,type:"l"}):"s"==e?(n=y(e,t),$.extend(!0,n,{color:"rgb(255, 255, 255)",width:"100px",height:"30px",lineHeight:"30px",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"rgb(244, 113, 31)"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{title:"有惊喜"},sceneId:ue.obj.sceneId,title:null,type:"s"}):2==e.charAt(0)||"x"==e.charAt(0)?(n=y(e,t),$.extend(!0,n,{width:320,height:38,fontSize:24}),s={content:"点击此处进行编辑",css:n,id:a,num:1,pageId:ue.obj.id,properties:{},sceneId:ue.obj.sceneId,title:null,type:(""+e).charAt(0)}):"x"==e.charAt(0)?s.properties={dataUrl:""}:4==e.charAt(0)||"wp"==e?(n=y(e,t),n.width="100px",n.height="100px",s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{width:"100px",height:"100px",src:""},sceneId:ue.obj.sceneId,title:null,type:4},"wp"==e&&(s.type="403",n.width="135px",n.height="240px",s.properties.width="135px",s.properties.height="240px",s.properties.src=CLIENT_CDN+"assets/images/wechat_image.png")):"h"==e?(n=y(e,t),$.extend(!0,n,{color:"#555",width:"100px",height:"100px"}),s={content:"",css:n,id:a,pageId:ue.obj.id,properties:{type:"rect"},sceneId:ue.obj.sceneId,title:null,type:"h"}):5==e.charAt(0)?(n=y(e,t),n.width="200px",$.extend(!0,n,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",borderRadius:"0",backgroundColor:"#ffffff"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{placeholder:"请命名"},isInput:1,sceneId:ue.obj.sceneId,title:"请命名",type:5}):"r"==e?(n=y(e,t),n.width="200px",delete n.height,$.extend(!0,n,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",borderRadius:"0",backgroundColor:"#ffffff"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{titleStyle:{backgroundColor:"#08a1ef",color:"#ffffff"},optionStyle:{borderBottomWidth:"1",borderBottomStyle:"solid",borderBottomColor:"#08a1ef"}},choices:'{"seq":3,"options":[{"id":1,"label":"选项1"},{"id":2,"label":"选项2"},{"id":3,"label":"选项3"}]}',isInput:1,sceneId:ue.obj.sceneId,title:"",type:"r"}):"c"==e?(n=y(e,t),n.width="200px",delete n.height,$.extend(!0,n,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",borderRadius:"0",backgroundColor:"#ffffff"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{titleStyle:{backgroundColor:"#08a1ef",color:"#ffffff"},optionStyle:{borderBottomWidth:"1",borderBottomStyle:"solid",borderBottomColor:"#08a1ef"}},choices:'{"seq":3,"options":[{"id":1,"label":"选项1"},{"id":2,"label":"选项2"},{"id":3,"label":"选项3"}]}',isInput:1,sceneId:ue.obj.sceneId,title:"",type:"c"}):"a"==e?(n=y(e,t),n.width="200px",delete n.height,$.extend(!0,n,{color:"#676767",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"#f9f9f9"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{icon:"eqf-star",size:"rating-m",color:"#ff9307"},isInput:1,sceneId:ue.obj.sceneId,title:"",type:"a"}):"i"==e?(n=y(e,t),$.extend(!0,n,{width:"100%",height:"55px",lineHeight:"55px",color:"#676767",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"#f9f9f9"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{layout:"counter-lr",size:"counter-m",color:"#08a1ef",icon:"eqf-love"},sceneId:ue.obj.sceneId,title:"",type:"i"}):"d"==(""+e).charAt(0)?(n=y(e,t),$.extend(!0,n,{width:"100%",height:"55px",lineHeight:"55px",color:"#676767",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"#f9f9f9"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{layout:"counter-lr",size:"counter-m",color:"#76838f",icon:"eqf-eye3"},sceneId:ue.obj.sceneId,title:"",type:"d"}):6==e.charAt(0)?(n=y(e,t),n.width="200px",$.extend(!0,n,{color:"#fff",borderRadius:"0",backgroundColor:"#08a1ef"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{text:"",link:"",src:"",layout:"rating-l",title:"提交"},sceneId:ue.obj.sceneId,title:null,type:6}):"p"==e?(n=y(e,t),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{title:"图集"},sceneId:ue.obj.sceneId,title:null,type:"p"}):"v"==e?(n=y(e,t),n.width="50px",n.height="48px",s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{src:""},sceneId:ue.obj.sceneId,title:null,type:"v"}):"n"==e?(n=y(e,t),s={content:"",css:n,id:a,pageId:ue.obj.id,properties:{pics:[]},sceneId:ue.obj.sceneId,title:null,type:"n"}):"m"==e?(n=y(e,t),$.extend(!0,n,{height:"100px",width:"210px"}),s={content:"",css:n,id:a,pageId:ue.obj.id,properties:{address:"设置位置"},sceneId:ue.obj.sceneId,title:null,type:"m"}):"w01"==e||"w02"==e?(n=y(e,t),$.extend(!0,n,{width:"180px",height:"40px",lineHeight:"40px",borderRadius:"5px",backgroundColor:"rgba(255,255,255,1)",borderColor:"rgba(0,0,0,1)",borderWidth:"1px",borderStyle:"solid"}),s={content:"",css:n,id:a,pageId:ue.obj.id,properties:{title:"微信音频"},sceneId:ue.obj.sceneId,title:null,type:e}):"t"==e?(n=y(e,t),$.extend(!0,n,{height:"380px",width:"304px"}),s={content:"图表组件",css:n,id:a,num:1,pageId:ue.obj.id,properties:{title:"图表组件",chartTitle:"数据统计详情"},sceneId:ue.obj.sceneId,title:null,type:e}):"b"===e?(n=y(e,t),$.extend(!0,n,{height:"360px",width:"280px",backgroundColor:"#F0F3F4"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{morelabel:"更多留言",meslabel:"我要留言",style:"default"},sceneId:ue.obj.sceneId,title:null,type:e}):"g"===e?(n=y(e,t),$.extend(!0,n,{height:"300px",width:"250px"}),s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{size:4},sceneId:ue.obj.sceneId,title:null,type:e}):"z"===e&&(n=y(e,t),n.width="200px",n.height="38px",s={content:"",css:n,id:a,num:1,pageId:ue.obj.id,properties:{},choices:'{"seq":3,"options":[{"id":1,"label":"请输入内容"},{"id":2,"label":"请输入内容"},{"id":3,"label":"请输入内容"}]}',isInput:1,sceneId:ue.obj.sceneId,title:"下拉列表",type:e,showText:"请选择",placeholderText:"请选择",require:!1});return i&&$.extend(!0,s,i),he.push(s),ge[s.id]=s,s}function S(e,i,n){var a=pe.wrapComp(i,"edit",i),o=s.isAllowToAccess(s.accessDef.ACCESS_COMP_MANAGE);o&&3!==i.type&&m.addModel(i),$("#nr .edit_area").append(a);for(var l=pe.getInterceptors(),c=0;c<l.length;c++)l[c](a,i);return pe.getEventHandlers()[(""+e).charAt(0)](a,i),n||(r.addPageHistory(ue.obj.id,ue.obj.elements),t.$broadcast("dom.changed"),("psd"!==i.subType||i.lastOne)&&a.trigger("mousedown")),"n"!=i.type&&"p"!=i.type&&a.trigger("click"),a}function T(e,t){var i=[];if("g101"==e)i.push(we("501")),i.push(we("502")),i.push(we("503")),i.push(we("601"));else if("w"==e)i.push(we("201")),i.push(we("401"));else if("wr"==e){var n=x();i.push(we("w01",t,n)),i.push(we("w02",t,n))}return i}function C(){ce=0,angular.forEach(he,function(e){e.css.zIndex>ce&&(ce=e.css.zIndex)})}function E(e,t){if(""+t.type=="201")return void $(e).trigger("click");var i=JSON.parse(sessionStorage.getItem("toolbarFonts"))||[];0===i.length?g.getMyFontFamily().then(function(n){n.data.success?(i=n.data.list,sessionStorage.setItem("toolbarFonts",JSON.stringify(i)),P(i,e,t)):d.openMsgDialog({msg:"网络加载失败,请稍后再试!"})}):P(i,e,t)}function P(e,t,n){for(var a,s=[],o=/font-family:(.*?);/g,r=n.content,l=[],c=[];null!=(a=o.exec(r));)s.push(a[1].trim());for(var p=0;p<e.length;p++)c.push(e[p].fontFamily);for(p=0;p<s.length;p++)"defaultFont"!==s[p]&&"'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif"!==s[p]&&"moren"!==s[p]&&c.indexOf(s[p])===-1&&l.push(s[p]);l.length?g.getFontNames(l.join()).then(function(e){if(200==e.data.code&&e.data.list&&e.data.list.length){for(var a=[],s=0;s<e.data.list.length;s++)a.push(e.data.list[s].name);var o='当前字体<span class="color-blue">'+a.join()+"</span>未经授权，请先购买字体。";d.openConfirmDialog({msg:o,confirmName:"购买字体",cancelName:"暂不购买"},function(){i.open({windowClass:"console img_console",templateUrl:"scene/font/font-shopping.tpl.html",controller:"fontShoppingCtrl",resolve:{}})},function(){d.openConfirmDialog({msg:"确定要恢复默认字体吗？",confirmName:"确认",cancelName:"取消编辑"},function(){n.content=$("#"+n.id).html(),n.fonts={},I(t,n,!0)},function(){})})}}):I(t,n)}function I(e,i,n){de.currentElemDef=i;var a=i.css.height||0;$(e).css({"min-height":a,cursor:"text"}),$(e).parents("li").hasClass("inside-active")||($(e).bind("click",function(e){e.stopPropagation()}),$(document).bind("mousedown",function(){t.$broadcast("convert.html.canvas",i,e),$(e).css({"min-height":"inherit",cursor:"default"}),$("#btn-toolbar").find("input[type=text][data-edit]").blur(),$("#btn-toolbar")&&($("#btn-toolbar").remove(),$(e).unbind("paste"),$(".toolbarColor").remove(),t.$broadcast("cancelbind")),$(e).unbind("click");var n=i.content;i.content=$(e).html(),n!=i.content&&t.$broadcast("hisChange");var s=parseInt($(e).parent().height(),10);s>a&&(i.css.height=s,$(e).parents("li").height(s)),$(e).parents("li").removeClass("inside-active").css("user-select","none"),$(e).removeAttr("contenteditable"),window.getSelection&&window.getSelection().modify("move","right","line"),$(document).unbind("mousedown")}),$(e).parents("li").addClass("inside-active").css("user-select","text"),t.$broadcast("text.click",e,n))}function _(e){Y(e,null,function(t){var i=t.data,n="";e.properties.src=i,e.properties.id=t.id;var a=t.width/t.height;e.properties.originSrc&&(delete e.properties.originSrc,delete e.properties.cropSize,delete e.properties.radioValue);var s=$("#"+e.id);if(s.length>0){var o=$("#inside_"+e.id).width(),r=$("#inside_"+e.id).height(),l=o/r;a>=l?(s.outerHeight(r),s.outerWidth(r*a),s.css("marginLeft",-(s.outerWidth()-o)/2),s.css("marginTop",0)):(s.outerWidth(o),s.outerHeight(o/a),s.css("marginTop",-(s.outerHeight()-r)/2),s.css("marginLeft",0));var c=/.svg/;if(e.properties&&e.properties.cropSize){var d=e.properties.cropSize;n="?imageMogr2/auto-orient/crop/!"+d.w+"x"+d.h+"a"+d.x+"a"+d.y,i+=n}c.test(i)||(i=eqShow.qiniuZoom(e,i)),s.attr("src",PREFIX_FILE_HOST+i),e.properties.imgStyle={},e.properties.imgStyle.width=s.outerWidth(),e.properties.imgStyle.height=s.outerHeight(),e.properties.imgStyle.marginTop=s.css("marginTop"),e.properties.imgStyle.marginLeft=s.css("marginLeft")}else t.width>$("#nr .edit_area").width()&&(t.width=$("#nr .edit_area").width(),t.height=t.width/a),t.height>$("#nr .edit_area").height()&&(t.height=$("#nr .edit_area").height(),t.width=t.height*a),e.css.width=t.width,e.css.height=t.height,e.properties.imgStyle={},e.properties.imgStyle.width=t.width,e.properties.imgStyle.height=t.height,e.properties.imgStyle.marginTop="0",e.properties.imgStyle.marginLeft="0",S(e.type,e)},function(){e.properties.src||f(e.id)})}function L(e){xe||i.open({windowClass:"console img_console",templateUrl:"scene/console/shape.tpl.html",controller:"ShapeConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){var i=$("#"+e.id);if(e.properties.src=t.data,e.properties.id=t.id,e.properties.type=t.type,e.css.height=t.height,e.css.width=t.width,e.properties.items=t.items,i.length){var n=$("#nr").find("#inside_"+e.id);n.remove()}S(e.type,e)},function(){$("#"+e.id).length||f(e.id)})}function M(e){i.open({windowClass:"console seven-contain",templateUrl:"scene/console/button.tpl.html",controller:"ButtonConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){e.properties=angular.copy(t),$.extend(!0,e.css,t.btnStyle);var i=$("#"+e.id,$("#nr"));i.length>0&&i.parents("li").remove(),S(e.type,e)},function(){$("#"+e.id).length||f(e.id)})}function R(e){xe||(xe=i.open({windowClass:"console six-contain",templateUrl:"scene/console/tel.tpl.html",controller:"TelConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.properties.title=t.title,e.properties.number=t.number;t.title.replace(/ /g,"&nbsp;");$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function q(e){xe||(xe=i.open({windowClass:"console seven-contain",templateUrl:"scene/console/input.tpl.html",controller:"InputConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,t.type&&(e.type=t.type),e.properties.placeholder=t.title,e.properties.required=t.required,e.title=t.title,$.extend(!0,e.css,t.btnStyle);var i=$("#"+e.id);i.length>0&&i.parents("li").remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function D(e){i.open({windowClass:"img_console",templateUrl:"scene/console/map.tpl.html",controller:"MapCtrl",resolve:{elemDef:function(){return e}}}).result.then(function(t){e.properties.zoom=t.zoom,e.properties.lat=t.center.lat,e.properties.lng=t.center.lng,t.label&&(e.content=t.label,e.properties.address=t.label);var i=$("#"+e.id);if(i.length){var n=i.data("map");if(n.panTo(t.center),n.setZoom(t.zoom),i.data("label")){var a=i.data("label");a.setPosition(t.center);var s=i.data("marker");s.setPosition(t.center)}}else S(e.type,e)})}function A(e){xe||(xe=i.open({windowClass:"console seven-contain",templateUrl:"scene/console/radio-checkbox.tpl.html",controller:"RadioCheckboxConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.title=t.title,e.type=t.type;var i=$("#nr").find("#inside_"+e.id);i.length&&i.remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function F(e){xe||(xe=i.open({windowClass:"console seven-contain",templateUrl:"scene/console/rating.tpl.html",controller:"RatingConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(){xe=null;var t=$("#nr").find("#inside_"+e.id);t.length&&t.remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function z(e){xe||(xe=i.open({windowClass:"console six-contain",templateUrl:"scene/console/counter.tpl.html",controller:"CounterConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function N(e){xe||(xe=i.open({windowClass:"console six-contain",templateUrl:"scene/console/statistics-component.tpl.html",controller:"StatisticsConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function O(e){xe||(xe=i.open({windowClass:"console six-contain",templateUrl:"scene/console/link-component.tpl.html",controller:"LinkComponentConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,isNaN(e.properties.url)&&e.properties.url&&(e.properties.url=PREFIX_S1_URL+"eqs/link?id="+e.sceneId+"&url="+encodeURIComponent(e.properties.url)),$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function U(e){xe||(xe=i.open({windowClass:"console six-contain",templateUrl:"scene/console/sound-component.tpl.html",controller:"SoundComponentConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null;t.title.replace(/ /g,"&nbsp;");$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function H(e){xe||(xe=i.open({windowClass:"console seven-contain pictures1",backdrop:"static",templateUrl:"scene/console/pictures1.tpl.html",controller:"pictures1Ctrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.properties=t;var i=$("#inside_"+e.id);i.length&&i.remove(),S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function j(){var e=ae;X(e,2,function(t){e.bgAudio&&u.pushUsedFile(2,t.id),t.url||t.src?(u.removeUsedFile(2,t.id),e.bgAudio=t):e.bgAudio=null},function(){xe=null})}function B(e){X(e,4,function(t){var i=$("#inside_"+e.id);t.src?(e.sound=t,i.children(".sound").length||$('<div class="sound eqf-music">').click(function(){B(e)}).appendTo(i)):(delete e.sound,i.children(".sound").remove())},function(){xe=null})}function X(e,t,n){xe||(xe=i.open({windowClass:"console img_console",templateUrl:"scene/console/sound.tpl.html",controller:"soundCtrl",resolve:{obj:function(){return{elemDef:e,type:t}}}}).result.then(function(e){xe=null,n(e)},function(){xe=null}))}function V(e){xe||(xe=i.open({windowClass:"console six-contain",templateUrl:"scene/console/video.tpl.html",controller:"VideoCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.properties.src=t,$("#"+e.id).length||S(e.type,e)},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function W(e,i){Y(e,i,function(n){if("imgSrc"==n.type){var a={type:3,properties:{src:n.data,id:n.id,pageLength:i,name:n.name}};n.height/n.width>=1008/642&&n.height/n.width<=1.578125&&(1==i||n.isSys)?(e.properties.originSrc&&(delete e.properties.originSrc,delete e.properties.cropSize),t.$broadcast("scene.bg.replace",{type:"imgSrc",src:n.data,id:n.id,longPage:i},e),r.addPageHistory(ue.obj.id,ue.obj.elements)):(e.properties.croptype&&(a.properties.croptype=e.properties.croptype),ee(a,function(n){1!=i&&(e.properties.pageLength=i,e.properties.croptype=n.type),t.$broadcast("scene.bg.replace",{type:"imgSrc",src:n.src,id:n.id,originSrc:n.originSrc,cropSize:n.cropSize},e),r.addPageHistory(ue.obj.id,ue.obj.elements)},function(){$("#"+e.id).length||f(e.id)}))}"backgroundColor"==n.type&&(1!=i&&(e.properties.croptype=1,e.properties.pageLength=i),t.$broadcast("scene.bg.replace",n,e),r.addPageHistory(ue.obj.id,ue.obj.elements))},function(){$("#"+e.id).length||f(e.id)})}function G(e){xe||(xe=i.open({windowClass:"console six-contain randomevent-console",templateUrl:"scene/console/randomevent.tpl.html",controller:"RandomEventCtrl",resolve:{obj:function(){return e}}}).result.then(function(i){xe=null,i&&0!==i.length&&(e.properties.pics=i,$("#"+e.id).length||S(e.type,e),t.$broadcast("create.randomevent.trigger",e))},function(){xe=null,$("#"+e.id).length||f(e.id)}))}function Y(e,t,n,a,s){if(!xe){var o="0";3==e.type&&(o="0"),"4"==(""+e.type).charAt(0)&&(o="1"),s||(s=""),xe=i.open({windowClass:"console img_console "+s,templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:o,elemDef:e,longPage:t}}}}).result.then(function(e){xe=null,n(e)},function(e){xe=null,a(e)})}}function Q(e){de.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"style"})}function Z(e){de.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"anim"})}function J(e){de.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"trigger"})}function K(e){de.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"dropdown"})}function ee(e,t,n){xe=i.open({windowClass:"console seven-contain pictures1",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return e}}}).result.then(function(e){xe=null,"function"==typeof t&&t(e)},function(e){xe=null,"function"==typeof n&&n(e)})}function te(){$(".content").trigger("mousedown"),de.currentElemDef=null,t.$broadcast("showStylePanel",{activeTab:"trigger"})}function ie(e){e.sceneId=ue.obj.sceneId,i.open({windowClass:"console six-contain",templateUrl:"scene/console/link.tpl.html",controller:"LinkConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){t&&"http://"!=t?(isNaN(t)?e.properties.url=PREFIX_S1_URL+"eqs/link?id="+e.sceneId+"&url="+encodeURIComponent(t):e.properties.url=t,$("#inside_"+e.id).find(".fa-link").removeClass("fa-link").addClass("fa-anchor")):(delete e.properties.url,$("#inside_"+e.id).find(".fa-anchor").removeClass("fa-anchor").addClass("fa-link"))})}function ne(e,t){var i=$(".element",e)[0];$(i).mousedown(function(e){$(this).parents("li").hasClass("inside-active")&&e.stopPropagation()}),$(i).bind("contextmenu",function(e){$(this).parents("li").hasClass("inside-active")?e.stopPropagation():$(this).blur()}),$(i).bind("dblclick",function(e){return!$("#nr").find(".mask-trigger").length&&(E(i,t),$("#popMenu").hide(),void e.stopPropagation())}),$(i).bind("keydown",function(e){$(".btn-toolbar").length>0&&e.stopPropagation()}),$(i).find("a").bind("click",function(e){e.preventDefault()})}var ae,se,oe,re,le,ce,de={},pe=eqShow.templateParser("jsonParser"),ue=null,he=null,ge={},me=0,fe=!1,ve=!1,be=!1;de.historyBack=function(){r.canBack(ue.obj.id)&&(he=r.back(ue.obj.id),b(he),v(he),t.$broadcast("close.style.panel"),t.$broadcast("refreshPageBg"),t.$broadcast("refreshSetComps"))},de.historyForward=function(){r.canForward(ue.obj.id)&&(he=r.forward(ue.obj.id),b(he),v(he),t.$broadcast("close.style.panel"),t.$broadcast("refreshPageBg"),t.$broadcast("refreshSetComps"))};var ye=de.createCompGroup=function(e,i){for(var n=T(e),a=[],s=0;s<n.length;s++){var o=k(n[s].type,i,n[s]);i?(i={left:i.left,top:parseInt(i.top,10)+50+"px"},0!==s&&(i.top=parseInt(i.top,10)-de.comPosition.top+"px")):i={left:"60px",top:"150px"},S(n[s].type,o),"w"==e&&a.push(o)}0!==a.length&&(a[0].properties.comid=a[1].id,a[0].properties.type="share",a[1].properties.type="share",a[1].properties.comid=a[0].id),r.addPageHistory(ue.obj.id,ue.obj.elements),t.$broadcast("dom.changed")},we=function(e,t,i){var n;return"501"==e&&(n={properties:{placeholder:"姓名"},title:"姓名",type:501}),"502"==e&&(n={properties:{placeholder:"电话"},title:"电话",type:502}),"503"==e&&(n={properties:{placeholder:"邮箱"},title:"邮箱",type:503}),"601"==e&&(n={properties:{title:"提交"},type:601}),"201"==e&&(n={properties:{title:"我的微信昵称"},css:{fontSize:24,textAlign:"center"},content:"我的微信昵称",type:e}),"401"==e&&(n={properties:{title:"我的微信头像",src:CLIENT_CDN+"assets/images/create/wx_default.png"},type:e}),"w01"==e&&(n={id:"wxp"+i,properties:{title:"播放录音",icon:"eqf-nosy",src:CLIENT_CDN+"assets/audio/wexin_sound.mp3"},type:e}),"w02"==e&&(n={id:"wxr"+i,properties:{title:"按住 说话"},type:e}),n};de.createComp=function(e,t,i,n,a){if(be)return void d.openMsgDialog({msg:"秀版页不支持编辑"});var s;if(e=""+e,"g101"===e)return void ye(e,t);if("w"===e.charAt(0)&&("w"===e||"wr"===e))return void ye(e,t);if("9"===e.charAt(0))return void j(s,2);if(s=k(e,t),"4"===e.charAt(0)){if(!a)return void _(s);s.subType="psd",s.lastOne=a.lastOne,s.css.width=a.adjustWidth,s.css.height=a.adjustHeight,s.css.top=a.top,s.css.left=a.left,s.properties.src=a.src,s.css.opacity=a.opacity/255,s.css["mix-blend-mode"]=a.blendMode.mode}if("h"===e)return void L(s);if("5"===(""+e).charAt(0))return void q(s);if("6"===(""+e).charAt(0))return void M(s);if("8"===(""+e).charAt(0))return void R(s);if("p"==e)return void H(s);if("v"==e)return V(s),s;if("3"==(""+e).charAt(0))return void W(s,n);if("r"==e||"c"==e)return void A(s);if("a"==e)return void F(s);if("i"==e)return i&&(s.properties.icon=i,"eqf-love"==i?s.properties.color="#ff5448":"eqf-good"==i?s.properties.color="#f2a653":"eqf-flower2"==i?s.properties.color="#ea1f64":"eqf-vote"==i&&(s.properties.color="#08a1ef")),void z(s);if("d"==e)return i&&(s.properties.icon=i),void N(s);if("l"==e)return void O(s);if("s"==e)return void U(s);if("n"==e)return void G(s);if("m"==e)return void D(s);if("wp"==e)return void S("403",s);if("t"==e)return s.properties.chartType=i,void S(e,s);if("2"==(""+e).charAt(0)||"x"==(""+e).charAt(0)||"z"===e){"x"==(""+e).charAt(0)&&(s.properties.newXiuziti=!0);var o=S(e,s);$(".element",o).trigger("dblclick").focus(),setTimeout(function(){if(window.getSelection){var e=window.getSelection();e.modify("move","left","line"),e.modify("extend","right","line")}})}else S(e,s)},de.updateCompPosition=function(e,i,n){for(var a=0;a<he.length;a++)"inside_"+he[a].id==e&&(he[a].css?(he[a].css.left=i.left,he[a].css.top=i.top,n||r.addPageHistory(ue.obj.id,he)):(he[a].css=i,n||r.addPageHistory(ue.obj.id,he)));t.$$phase||t.$apply()},de.updateCompAngle=function(e,i){for(var n=0;n<he.length;n++)"inside_"+he[n].id==e&&(he[n].css?he[n].css.transform="rotateZ("+i+"deg)":he[n].css={},r.addPageHistory(ue.obj.id,he));t.$apply()},de.setCopy=function(e){fe=e,t.$broadcast("copyState.update",e)},de.setFormat=function(e){ve=e},de.getCopy=function(){return fe},de.getPageNames=function(t){var i="m/scene/pageList/"+t+"?date="+(new Date).getTime();return e({withCredentials:!0,loading:!0,method:"GET",url:PREFIX_URL+i})},de.changePageSort=function(t,i){var n="m/scene/pageSort?id="+i+"&pos="+t+"&date="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},de.updateCompSize=function(e,i,n){for(var a=0;a<he.length;a++)"inside_"+he[a].id==e&&(he[a].css||(he[a].css={}),he[a].css.width=i.width,he[a].css.height=i.height,i.lineHeight&&(he[a].css.lineHeight=i.lineHeight),he[a].css.top=i.top,he[a].css.left=i.left,he[a].properties.width=i.width,he[a].properties.height=i.height,i.imgStyle&&(he[a].properties.imgStyle=i.imgStyle),n||r.addPageHistory(ue.obj.id,he));t.$$phase||t.$apply()},de.savePageNames=function(t){var i="m/scene/savePage",n={id:t.id,sceneId:t.sceneId,name:t.name};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})},de.resetCss=function(){$("#nr .edit_area li").each(function(e,t){var i=ge[t.id.replace(/inside_/g,"")];i&&(i.css||(i.css={}),"g"===i.type?i.css.zIndex=999:i.css.zIndex=e)})},de.copyElement=function(){me=0,le=ue.obj.id;var e=l.getElements(),t=[];$.each(e,function(e,i){var n=ge[i];"w01"!=n.type&&"w02"!=n.type&&t.push(n)}),oe=angular.copy(t),re=angular.copy(t),de.setCopy(!0)},de.formatElement=function(){var e=l.getElements(),i=[];$.each(e,function(e,t){var n=ge[t];i.push(n)}),t.formatElemDefs=angular.copy(i),de.setFormat(!0)},de.pasteElement=function(){var e=0,i=[],n=de.isCurrentPageSubmitButtonAlreadyExist();ce||C();for(var a=0;a<oe.length;a++)if(6!==oe[a].type&&601!==oe[a].type||!n){oe[a].pageId=ue.obj.id,oe[a].id=x(),le==oe[a].pageId?(e++,w(re[a],oe[a],e,oe.length)):(me=0,oe[a].css=angular.copy(re[a].css));var s=angular.copy(oe[a]),o=ce+=1;s.css.zIndex=o,he.push(s),ge[s.id]=s,i.push(S(s.type,s,!0))}le=ue.obj.id,r.addPageHistory(ue.obj.id,ue.obj.elements),
t.$broadcast("dom.changed"),angular.forEach(l.getElements(),function(e){$("#inside_"+e).children(".bar").hide()}),l.clearElements(),$.each(i,function(e,t){t.children(".bar").show(),l.addElement(t.attr("id").split("_")[1])})},de.isCurrentPageSubmitButtonAlreadyExist=function(){var e=!1;return angular.forEach(ue.obj.elements,function(t){6==(""+t.type).charAt(0)&&(e=!0)}),e},de.openCropModal=function(e,t,i){ee(e,t,i)},de.replaceBgImage=function(e,i,n){var a=e;i.style.backgroundImage="url("+PREFIX_FILE_HOST+a+")",n.properties.bgColor=null,n.properties.imgSrc=a,t.$broadcast("show.edit.bg")};var xe=null;de.openConsoleModal=Y;utilTrigger.getSendType(),utilTrigger.getHandleType();return de.openTriggerMode=te,pe.addInterceptor(function(e,i,n){function o(){var n=$('<ul id="popMenu" class="dropdown-menu" style="min-width: 150px; display: block;" role="menu" aria-labelledby="dropdownMenu1"><li class="edit" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-write"></div>编辑</a></li><li class="style" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-type"></div>样式</a></li><li class="animation" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-move"></div>动画</a></li><li class="sound" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-music"></div>音效</a></li><li class="trigger" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-chufa"></div>触发</a></li><li class="link" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-link"></div>链接</a></li><li class="copy" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-scene-copy"></div>复制</a></li><li class="cut" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-cut"></div>裁切</a></li><li class="format" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-copy-animation"></div>复制动画</a></li><li role="presentation" class="bottom_bar"><a title="置顶"><div class="eqf-top up-all"></div></a><a title="上移一层"><div class="eqf-up up"></div></a><a title="下移一层"><div class="eqf-down down"></div></a><a title="置底"><div class="eqf-under down-all"></div></a><a title="删除"><div class="eqf-scene-delete remove"></div></a></li></ul>').css({position:"absolute","user-select":"none"});return fe&&n.find(".copy").after($('<li class="paste" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-print"></div>粘贴</a></li>')),ve&&n.find(".format").after($('<li class="pasteformat" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-paste-animation"></div>粘贴动画</a></li>')),n.find(".edit").click(function(t){switch(t.stopPropagation(),i.type.toString().charAt(0)){case"1":break;case"2":E(e.find(".element").get(0),i);break;case"x":E(e.find(".element").get(0),i);break;case"3":break;case"4":_(i);break;case"h":L(i);break;case"5":q(i);break;case"6":M(i);break;case"7":break;case"8":R(i);break;case"9":break;case"g":break;case"p":H(i);break;case"v":V(i);break;case"r":case"c":A(i);break;case"a":F(i);break;case"l":O(i);break;case"s":U(i);break;case"i":z(i);break;case"d":N(i);break;case"n":G(i);break;case"m":D(i)}n.hide()}),n.find(".style").click(function(t){t.stopPropagation(),"z"===i.type?K(i):Q(i,function(t){if(1==i.type)for(var n in i.properties.labels)t.backgroundColor&&(i.properties.labels[n].color.backgroundColor=t.backgroundColor,$(".label_content").css("background-color",t.backgroundColor)),t.color&&(i.properties.labels[n].color.color=t.color,$(".label_content").css("color",t.color));else $(".element-box",e).css(t),$.extend(!0,i.css,t)}),n.hide()}),n.find(".animation").click(function(e){e.stopPropagation(),Z(i,function(e){i.properties.anim=e}),n.hide()}),n.find(".link").click(function(e){e.stopPropagation(),ie(i),n.hide()}),n.find(".remove").click(function(e){e.stopPropagation(),t.$broadcast("element.delete")}),n.find(".sound").click(function(e){e.stopPropagation(),B(i,4),n.hide()}),n.find(".trigger").click(function(e){e.stopPropagation();var t=utilTrigger.getHandleType();$.each(t,function(e,t){p.getSendIds(t.value,i.id)}),J(i,function(e){i.properties.trigger=e}),n.hide()}),n.find(".down").click(function(){var i=e.prev();if(!(i.length<=0)){var n=e.css("zIndex");e.css("zIndex",i.css("zIndex")),i.css("zIndex",n),i.before(e),t.$broadcast("changeCss",{changZindex:"true"})}}),n.find(".up").click(function(){var i=e.next();if(!(i.length<=0)){var n=e.css("zIndex");e.css("zIndex",i.css("zIndex")),i.css("zIndex",n),i.after(e),t.$broadcast("changeCss",{changZindex:"true"})}}),n.find(".up-all").click(function(){var i=e.siblings("li"),n=i.last();n.after(e),e.css("zIndex",i.length+1),i.each(function(e,t){$(t).css("zIndex",e+1)}),t.$broadcast("changeCss",{changZindex:"true"})}),n.find(".down-all").click(function(){var i=e.siblings("li"),n=i.first();n.before(e),e.css("zIndex",1),i.each(function(e,t){$(t).css("zIndex",e+2)}),t.$broadcast("changeCss",{changZindex:"true"})}),n.find(".copy").click(function(e){e.stopPropagation(),$(".modal-dialog")[0]||de.copyElement(),n.hide()}),n.find(".format").click(function(t){t.stopPropagation(),$(".modal-dialog")[0]||(de.formatElement(),de.currentTab="anim",e.trigger("click")),n.hide()}),n.find(".pasteformat").click(function(i){i.stopPropagation(),$(".modal-dialog")[0]||a(function(){var i=l.getElements();if(1===i.length){if(de.getComponent(i[0]).id==t.formatElemDefs[0].id)return;de.getComponent(i[0]).properties.anim=angular.copy(t.formatElemDefs[0].properties.anim),de.currentTab="anim",e.trigger("click");var n=[];if(de.getComponent(i[0]).properties.anim&&(de.getComponent(i[0]).properties.anim.length?n=de.getComponent(i[0]).properties.anim:n.push(de.getComponent(i[0]).properties.anim)),0===n.length)return;t.$broadcast("formatAnim",n),r.addPageHistory(ue.obj.id,ue.obj.elements)}}),n.hide()}),n.find(".paste").click(function(e){e.stopPropagation(),$(".modal-dialog")[0]||de.pasteElement(),n.hide()}),n.find(".cut").click(function(e){e.stopPropagation(),ee(i,function(){r.addPageHistory(ue.obj.id,ue.obj.elements)}),n.hide()}),2!=i.type&&4!=i.type&&401!=i.type&&402!=i.type&&"h"!=i.type&&"x"!=i.type&&n.find(".trigger").hide(),2!=i.type&&4!=i.type&&5!=i.type&&"h"!=i.type&&"x"!=i.type&&501!=i.type&&502!=i.type&&503!=i.type&&401!=i.type&&402!=i.type&&n.find(".sound").hide(),s.isAllowToAccess(s.accessDef.SCENE_EDIT_TRIGGER)||n.find(".trigger").hide(),s.isAllowToAccess(s.accessDef.SCENE_EDIT_SOUND)||n.find(".sound").hide(),4!=i.type&&"401"!=i.type&&"402"!=i.type&&"h"!=i.type&&"x"!=i.type&&n.find(".link").hide(),(4!=i.type&&"401"!=i.type&&"402"!=i.type||"w01"==i.type||"w02"==i.type)&&n.find(".cut").hide(),"p"==i.type&&(n.find(".animation").hide(),n.find(".style").hide(),n.find(".format").hide(),n.find(".pasteformat").hide()),6!=i.type&&601!=i.type&&"w01"!=i.type&&"w02"!=i.type||n.find(".copy").hide(),"g"===i.type&&(n.find(".animation").hide(),n.find(".format").hide(),n.find(".edit").hide(),n.find(".up-all").parent().hide(),n.find(".up").parent().hide(),n.find(".down-all").parent().hide(),n.find(".down").parent().hide()),n}if("view"!=n){i.trigger&&p.setTrigger(i.id,i.trigger);var c=$("#eq_main");i.sound&&$('<div class="sound eqf-music">').click(function(){B(i)}).appendTo(e),e.on("contextmenu",".element-box",function(n){function a(e,t){if($("#"+t).remove(),be)return void n.preventDefault();var i;e.appendTo(c),i=n.pageY+c.scrollTop()+e.height()>document.documentElement.clientHeight?n.pageY+c.scrollTop()-e.height()<0?n.pageY+c.scrollTop()-e.height()/2:n.pageY+c.scrollTop()-e.height():n.pageY+c.scrollTop(),e.css({left:n.pageX+c.scrollLeft()+15,top:i,zIndex:10001}),c.mousemove(function(i){e=$("#"+t),(i.pageX<e.offset().left-20||i.pageX>e.offset().left+e.width()+20||i.pageY<e.offset().top-20||i.pageY>e.offset().top+e.height()+20)&&(e.hide(),$(this).unbind("mousemove"))})}if(n.stopPropagation(),"x"==i.type&&!i.properties.newXiuziti)return d.openMsgDialog({msg:"秀字体功能已全面升级,为保证统一的体验,原有组件已无法再次编辑,请您使用新组件重新编辑"}),$("#comp_setting").attr("style","display:none"),!1;if("none"!=$(".select-panel").css("display"))return!1;if($("#nr").find(".mask-trigger").length){if(de.currentElemDef&&t.$broadcast("create.trigger.menu",e,n),!$(".edit_area").find(".switch-original").length){var s=$('<div class="switch">');e.append(s).children(".bar").hide()}return!1}$("#comp_setting:visible").length>0&&"p"!=i.type&&(de.currentElemDef=i,t.$broadcast("showStylePanel"));var r=o();return a(r,"popMenu"),!1}),"p"!=i.type&&e.on("click",function(t){if(t.stopPropagation(),!$("#nr").find(".mask-trigger").length){if("x"==i.type&&!i.properties.newXiuziti)return d.openMsgDialog({msg:"秀字体功能已全面升级,为保证统一的体验,原有组件已无法再次编辑,请您使用新组件重新编辑"}),void $("#comp_setting").attr("style","display:none");if(!t.ctrlKey&&!t.shiftKey){if(void 0===de.currentTab||null===de.currentTab)"z"!==i.type?Q(i,function(t){if(1==i.type)for(var n in i.properties.labels)t.backgroundColor&&(i.properties.labels[n].color.backgroundColor=t.backgroundColor,$(".label_content").css("background-color",t.backgroundColor)),t.color&&(i.properties.labels[n].color.color=t.color,$(".label_content").css("color",t.color));else $(".element-box",e).css(t),$.extend(!0,i.css,t)}):K(i);else if("style"===de.currentTab)"z"!==i.type?Q(i,function(t){if(1==i.type)for(var n in i.properties.labels)t.backgroundColor&&(i.properties.labels[n].color.backgroundColor=t.backgroundColor,$(".label_content").css("background-color",t.backgroundColor)),t.color&&(i.properties.labels[n].color.color=t.color,$(".label_content").css("color",t.color));else $(".element-box",e).css(t),$.extend(!0,i.css,t)}):K(i);else if("anim"===de.currentTab)Z(i,function(e){i.properties.anim=e});else if("trigger"==de.currentTab){var n=utilTrigger.getHandleType();$.each(n,function(e,t){p.getSendIds(t.value,i.id)}),J(i,function(e){i.properties.trigger=e})}else"dropdown"===de.currentTab&&K(i);return!1}}}),e.attr("title","按住鼠标进行拖动，点击鼠标进行编辑")}}),de.openLinkModal=ie,pe.bindEditEvent("2",function(e,t){ne(e,t)}),pe.bindEditEvent("x",function(e,t){ne(e,t)}),pe.bindEditEvent("3",function(){}),pe.bindEditEvent("v",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){V(t),$("#popMenu").hide()})}),pe.bindEditEvent("4",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){return!$("#nr").find(".mask-trigger").length&&(_(t),void $("#popMenu").hide())})}),pe.bindEditEvent("n",function(e,t){var i=$(".element",e)[0];$(i).bind("dblclick",function(){return!$("#nr").find(".mask-trigger").length&&(G(t),void $("#popMenu").hide())})}),pe.bindEditEvent("h",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){return!$("#nr").find(".mask-trigger").length&&(L(t),void $("#popMenu").hide())})}),pe.bindEditEvent("5",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){q(t),$("#popMenu").hide()})}),pe.bindEditEvent("r",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){A(t),$("#popMenu").hide()})}),pe.bindEditEvent("c",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){A(t),$("#popMenu").hide()})}),pe.bindEditEvent("a",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){F(t),$("#popMenu").hide()})}),pe.bindEditEvent("p",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){H(t),$("#popMenu").hide()}),c.setProperties(t.properties)}),pe.bindEditEvent("6",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){M(t),$("#popMenu").hide()})}),pe.bindEditEvent("8",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){R(t),$("#popMenu").hide()})}),pe.bindEditEvent("l",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){O(t),$("#popMenu").hide()})}),pe.bindEditEvent("s",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){U(t),$("#popMenu").hide()})}),pe.bindEditEvent("i",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){z(t),$("#popMenu").hide()})}),pe.bindEditEvent("d",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){N(t),$("#popMenu").hide()})}),pe.bindEditEvent("7",function(e,t){var n=$(".element",e)[0];n.addEventListener("click",function(){xe||i.open({windowClass:"",templateUrl:"scene/console/map.tpl.html",controller:"MapConsoleCtrl"}).result.then(function(e){var i=new BMap.Map("map_"+t.id);i.clearOverlays();var n=new BMap.Point(e.lng,e.lat),a=new BMap.Marker(n);i.addOverlay(a);var s=new BMap.Label(e.address,{offset:new BMap.Size(20,(-10))});a.setLabel(s),i.centerAndZoom(n,12),t.properties.pointX=e.lng,t.properties.pointY=e.lat,t.properties.x=e.lng,t.properties.y=e.lat,t.properties.markTitle=e.address})})}),pe.bindEditEvent("m",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick"),$(i).bind("dblclick",function(){D(t),$("#popMenu").hide()})}),pe.bindEditEvent("w",function(e){var t=$(".element",e)[0];$(t).unbind("dblclick"),$(t).bind("dblclick",function(){$("#popMenu").hide()})}),pe.bindEditEvent("t",function(){}),pe.bindEditEvent("b",function(e){}),pe.bindEditEvent("g",function(e){}),pe.bindEditEvent("z",function(e,t){var i=$(".element",e)[0];$(i).unbind("dblclick")}),de.templateEditor=pe,de.getTplById=function(t){var i="m/scene/select?id="+t,n=new Date;return i+="&time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.getUserNum=function(){var t=PREFIX_URL+"m/scene/free/tpl/num",i=new Date;return t+="?time="+i.getTime(),e({withCredentials:!0,method:"GET",url:t})},de.createByTpl=function(t){var i=PREFIX_URL+"m/scene/createByTpl";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},de.getSceneDetail=function(t,i){var n="m/scene/detail/"+t;return i&&(n+=(/\?/.test(n)?"&":"?")+"user="+i),se=e({withCredentials:!0,method:"GET",url:PREFIX_URL+n}),ae=null,se.then(function(e){ae=e.data.obj}),se},de.getCurrentScene=function(){return ae},de.getCurrentScenePromise=function(){return se},de.saveSceneSettings=function(t){t=angular.copy(t),angular.isObject(t.bgAudio)&&(t.bgAudio=JSON.stringify(t.bgAudio)),t.image=null;var i="m/scene/saveSettings";return e({withCredentials:!0,loading:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},de.publishScene=function(t,i){var n="m/scene/publish?id="+t;i&&(n+=(/\?/.test(n)?"&":"?")+"checkType="+i);var a=new Date;return n+="&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},de.closeScene=function(t){var i="/m/scene/off?id="+t,n=new Date;return i+="&time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.openScene=function(t){var i="/m/scene/on?id="+t,n=new Date;return i+="&time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.createBlankScene=function(t,i,n){var a={name:t,type:i,pageMode:n},s="m/scene/create";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+s,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},de.copySceneById=function(t){var i="m/scene/copyScene?id="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.deleteSceneById=function(t,i){var n="m/scene/delete?id="+t;return i&&(n+="&backup="+i),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},de.getCoverImages=function(){var t="m/base/file/list?bizType=99&fileType=1&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},de.revoke=function(t){var i="m/scene/revoke?id="+t+"&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.getSceneByPage=function(t,i,a,s){var o="";i||a?(o="m/scene/createPage/"+t,a&&(o+="?copy=true"),s&&(o+="?longPage="+s)):o="m/scene/design/"+t;var r=n.defer(),l=new Date;return o+=(/\?/.test(o)?"&":"?")+"time="+l.getTime(),e({withCredentials:!0,loading:!0,method:"GET",url:PREFIX_URL+o}).then(function(e){r.resolve(e),ue=e.data,ue.obj.elements||(ue.obj.elements=[]),be=!!(e.data.obj&&e.data.obj.properties&&e.data.obj.properties.xb),he=ue.obj.elements;for(var t=0;he&&t<he.length;t++)ge[he[t].id]=he[t]},function(e){r.reject(e)}),r.promise},de.previewSceneTpl=function(t){var i="m/scene/pageTpl/"+t,n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.recentlyUsedTpls=function(){var t="m/scene/tpl/recently/used";return t+=(/\?/.test(t)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},de.recordTplUsage=function(t){var i={id:t},n="m/scene/usePageTpl",a=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)})},de.getSceneTpl=function(t){var i=o.get("tplCache")?o.get("tplCache"):o("tplCache"),a=n.defer();if(i.get(t)){var s=$.extend(!0,{},i.get(t));s.data.obj.scene&&s.data.obj.scene.bgAudio&&(ae.bgAudio=s.data.obj.scene.bgAudio);for(var r={},l=0;l<s.data.obj.elements.length;l++){var c=s.data.obj.elements[l];c.type+""=="w01"||c.type+""=="w02"?(r[c.id.substr(3)]||(r[c.id.substr(3)]=x()),c.id=c.id.substr(0,3)+r[c.id.substr(3)]):c.id=x(),c.sceneId=ue.obj.sceneId,c.pageId=ue.obj.id}he=s.data.obj.elements;for(var d=0;d<he.length;d++)ge[he[d].id]=he[d];a.resolve(s)}else{var p="m/scene/pageTpl/"+t,u=new Date;p+=(/\?/.test(p)?"&":"?")+"time="+u.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+p}).then(function(e){i.put(e.data.obj.id,$.extend(!0,{},e)),e.data.obj.scene&&e.data.obj.scene.bgAudio&&(ae.bgAudio=e.data.obj.scene.bgAudio),e.data.obj.elements||(e.data.obj.elements=[]);for(var t=0;t<e.data.obj.elements.length;t++){var n=e.data.obj.elements[t];n.id=x(),n.sceneId=ue.obj.sceneId,n.pageId=ue.obj.id}he=e.data.obj.elements;for(var s=0;s<he.length;s++)ge[he[s].id]=he[s];a.resolve(e)},function(e){a.reject(e)})}return a.promise},de.saveScene=function(t){var i="m/scene/save";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},de.deletePage=function(t){var i="m/scene/delPage/"+t;return e({withCredentials:!0,loading:!0,method:"GET",url:PREFIX_URL+i})},de.getBgImages=function(t){var i="m/scene/gallery/"+t,n=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.createCustomComp=we,de.openAudioModal=j,de.openBgModal=W,de.getElements=function(){return he},de.getElementsMap=function(){return ge},de.getComponent=function(e){return ge[e]},de.deleteElement=f,de.getSceneObj=function(){return ue},de.getTpls=function(t,i,n,a){var s="m/scene/listTpl";null!=t&&(s+=(/\?/.test(s)?"&":"?")+"sceneType="+t),s+=(/\?/.test(s)?"&":"?")+"pageNo="+(i?i:1),s+=(/\?/.test(s)?"&":"?")+"pageSize="+(n?n:12),a&&(s+=(/\?/.test(s)?"&":"?")+"orderBy="+a);var o=new Date;return s+=(/\?/.test(s)?"&":"?")+"time="+o.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},de.getCompanyTpls=function(t,i,n){var a="/m/scene/tpl/company/list",s={pageNo:t,pageSize:i,sort:n};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)})},de.getSceneById=function(t){var i="/m/scene/tpl/detail/"+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},de.createCompanyTpls=function(t){var i="/m/scene/tpl/company/set?id="+t;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i})},de.clearCompanyTpls=function(t){var i="/m/scene/tpl/company/unset?id="+t;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i})},de.getPageTpls=function(i){var n,a;i.keyword?(n="search/scene",a=SEARCH_SERVER_HOST):(n="m/scene/tpl/scene/list",a=PREFIX_URL);var s=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+s.getTime(),e({withCredentials:!0,loading:!0,method:"POST",url:a+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)}).then(function(e){200===e.data.code&&(de.scenes=e.data,t.$broadcast("getSampleList"))})},de.getPageTplTypesTwo=function(t,i){var n="/m/scene/tag/sys/list?type=2&bizType="+i,a=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},de.saveMyTpl=function(t){var i="m/scene/page/mytpl/save";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},de.saveCompanyTpl=function(t){var i="m/scene/page/companytpl/save";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},de.getShowMyTask=function(t,i){var n="m/accept/task/my",a={pageNo:t,pageSize:i};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(a)})},de.getShowAllTask=function(t,i,n){var a="m/promotion/order/list",s={status:t,pageNo:i,pageSize:n};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)})},de.getXBPage=function(t){var i="m/promotion/order/xb/"+t,a=n.defer();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(e){e.data.obj.scene&&e.data.obj.scene.bgAudio&&(ae.bgAudio=e.data.obj.scene.bgAudio),be=!0,e.data.obj.elements||(e.data.obj.elements=[]);for(var t=0;t<e.data.obj.elements.length;t++){var i=e.data.obj.elements[t];i.id=x(),i.sceneId=ue.obj.sceneId,i.pageId=ue.obj.id}he=e.data.obj.elements;for(var n=0;n<he.length;n++)ge[he[n].id]=he[n];a.resolve(e)},function(e){a.reject(e)})},de.previewScene=function(t){var i="m/scene/page/custom/list/?id="+t+"&pageNo=1&pageSize=1000",a=new Date;i+=(/\?/.test(i)?"&":"?")+"time="+a.getTime();var s=n.defer();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(e){for(var t=o.get("tplCache")?o.get("tplCache"):o("tplCache"),i=0;i<e.data.list.length;i++){var n={data:{obj:{elements:e.data.list[i].elements,scene:e.data.obj}}};t.put(e.data.list[i].id,$.extend(!0,{},n))}s.resolve(e)}),s.promise},de.transferScene=function(t,i,n){var a=PREFIX_URL+"m/scene/transfer";return a+="?loginName="+i,a+="&id="+t,a+="&platform="+n,a+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:a})},de.getActivities=function(){var t=PREFIX_S1_URL+"eqs/activity?all=1";return e({withCredentials:!0,method:"GET",url:t})},de.getSceneTemplatePrices=function(){var t=PREFIX_URL+"base/class/scene_template_prices";return e({withCredentials:!0,method:"GET",url:t})},de.soundLink=function(t,i){var n="m/base/file/link/save?url="+t+"&fileType="+i,a=new Date;return n+="&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},de.getPageTplByAll=function(){var t=PREFIX_URL+"m/scene/tpl/scene/recommendTag/list",i=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"POST",url:t})},de.comPosition={top:0},de.createScene=function(e,t,n){if(1===s.currentUser.type&&t)return void d.openConfirmDialog({msg:"免费升级企业会员可使用 会员专属场景",confirmName:"免费升级",cancelName:"再看看"},function(){window.open("/privilege")});if(e&&e.price){var a=e.disCountPrice||parseFloat(e.price)||0,o={tplPrice:a,userXd:n,scene:e};[7,8,9].indexOf(s.currentUser.memberType)!==-1&&[2,21].indexOf(s.currentUser.type)!==-1?o.bFlagMember=!0:o.bFlagMember=!1,i.open({windowClass:"login-container six-contain",templateUrl:"scene/buySample.tpl.html",controller:"SceneBuySample",resolve:{buySampleObject:function(){return o}}}).result.then(function(t){i.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return t}}})})}else i.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return null}}})},de.getAvailableScene=function(i,n){var a="m/scene/available/my?time="+Date.now(),s={pageNo:i,pageSize:n};return e({withCredentials:!0,loading:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)}).then(function(e){return 200===e.data.code&&t.$broadcast("get.available.scene",e.data),e.data})},de}]),angular.module("services.select",[]).factory("selectService",["$rootScope","security",function(e,t){var i={},n=[];return i.addElement=function(i){i+="";var a=t.isAllowToAccess(t.accessDef.ACCESS_COMP_MANAGE);n.indexOf(i)>=0||(n.push(i),n.length>1?(e.$broadcast("select.more"),e.$broadcast("hideStylePanel")):a&&(1===n.length?e.$broadcast("comps.select",i):e.$broadcast("comps.select")))},i.deleteElement=function(i){e.$broadcast("select.less.id",i);var a=t.isAllowToAccess(t.accessDef.ACCESS_COMP_MANAGE),s=n.indexOf(i+"");s<0||(n.splice(s,1),n.length<=1?(e.$broadcast("select.less"),0===n.length&&(e.$broadcast("close.style.panel"),a&&e.$broadcast("comps.select"))):e.$broadcast("hideStylePanel"))},i.clearElements=function(){e.$broadcast("select.less",n),n=[]},i.getElements=function(){return n},i}]),angular.module("services.staticRes",[]),angular.module("services.staticRes").factory("staticResService",[function(){var e={},t=[{name:"行业",value:"101"},{name:"个人",value:"102"},{name:"企业",value:"103"},{name:"节假",value:"104"},{name:"风格",value:"105"},{name:"品牌",value:"106"}];e.getSceneType=function(){return t};var i=[{name:"版式",value:"1101"},{name:"风格",value:"1103"},{name:"互动",value:"1102"}];e.getBigTab=function(){return i};var n={1101:[{id:1,name:"图文",bizType:1101},{id:2,name:"图集",bizType:1101},{id:4,name:"文字",bizType:1101},{id:5,name:"图表",bizType:1101}],1102:[{id:6,name:"报名表",bizType:1102},{id:8,name:"留言",bizType:1102},{id:9,name:"联系",bizType:1102}],1103:[{id:15,name:"黑白",bizType:1103},{id:16,name:"红色",bizType:1103},{id:17,name:"怀旧",bizType:1103},{id:18,name:"现代",bizType:1103},{id:19,name:"扁平化",bizType:1103},{id:120,name:"黄色",bizType:1103},{id:121,name:"绿色",bizType:1103},{id:122,name:"紫色",bizType:1103},{id:123,name:"黑色",bizType:1103},{id:124,name:"白色",bizType:1103},{id:125,name:"其他",bizType:1103},{id:260,name:"English",bizType:1103},{id:262,name:"Android",bizType:1103}]};e.getPageTpls=function(e){return e?n[e]:n[1101].concat(n[1102]).concat(n[1103])};var a=[{id:13076,name:"风格",value:"203",remark:"group1/M00/61/89/yq0KA1T2vXqAH3MxAAAdfvrWmmM009.png"},{id:13078,name:"节日",value:"205",remark:"group1/M00/61/89/yq0KA1T2vXqAGI-4AAAWKIt1ceE158.png"},{id:13075,name:"企业",value:"202",remark:"group1/M00/61/89/yq0KA1T2vXqAdp7RAAAOCH36lkY788.png"},{id:13074,name:"行业",value:"201",remark:"group1/M00/61/89/yq0KA1T2vXqARMyQAAASI6ZG0zM493.png"},{id:13077,name:"个人",value:"204",remark:"group1/M00/61/89/yq0KA1T2vXqAIorQAAAVuqdCoU4830.png"},{id:15162,name:"正版授权",value:"206",remark:null}];e.getBgTypes=function(){return a};var s=[{id:13084,name:"图标",value:"106",remark:"group1/M00/61/89/yq0KA1T2vXqAOVqkAAAX-MAtU0A633.png"},{id:13085,name:"动画",value:"107",remark:"group1/M00/61/89/yq0KA1T2vXqANcAcAAATIr_b2OM515.png"},{id:13083,name:"节日",value:"105",remark:"group1/M00/61/89/yq0KA1T2vXqAGI-4AAAWKIt1ceE158.png"},{id:13081,name:"风格",value:"103",remark:"group1/M00/61/89/yq0KA1T2vXqAH3MxAAAdfvrWmmM009.png"},{id:13080,name:"企业",value:"102",remark:"group1/M00/61/89/yq0KA1T2vXqAdp7RAAAOCH36lkY788.png"},{id:13079,name:"行业",value:"101",remark:"group1/M00/61/89/yq0KA1T2vXqARMyQAAASI6ZG0zM493.png"},{id:13082,name:"个人",value:"104",remark:"group1/M00/61/89/yq0KA1T2vXqAIorQAAAVuqdCoU4830.png"},{id:15161,name:"正版授权",value:"109",remark:null}];e.getTpTypes=function(){return s};var o=[{id:12918,name:"安静",value:"2"},{id:12919,name:"欢快",value:"3"},{id:12920,name:"甜蜜",value:"4"},{id:48372,name:"伤感",value:"5"},{id:48373,name:"励志",value:"6"},{id:48374,name:"美好",value:"7"},{id:48375,name:"轻松",value:"8"}];e.getAudioTypes=function(){return o};var r=[{id:29331,name:"交通",value:"2"},{id:48376,name:"人物",value:"3"},{id:48377,name:"生活",value:"4"},{id:48378,name:"自然",value:"5"},{id:48379,name:"动物",value:"6"},{id:48380,name:"科技",value:"7"},{id:48381,name:"卡通",value:"8"},{id:48382,name:"其它",value:"9"}];return e.getSoundTypes=function(){return r},e}]),angular.module("services.dataCache").factory("storageService",[function(){var e={};return e.clear=function(){window.localStorage&&localStorage.clear()},e.push=function(e,t){window.localStorage&&localStorage.setItem(e,t)},e.get=function(e){if(window.localStorage)return localStorage.getItem(e)},e}]),angular.module("services.task",["task.select.scene"]).factory("taskService",["$http","$q","ModalService","$modal","$location","$rootScope",function(e,t,i,n,a,s){function o(i){var n="m/accept/task/"+i,a=t.defer();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n,params:{time:(new Date).getTime()}}).then(function(e){a.resolve(e)}),a.promise}function r(t,n,a){var s={status:"",pageNo:n,pageSize:a};t&&$.extend(s,{status:t});var o=PREFIX_URL+"m/accept/task/my";return o+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)}).then(function(e){return e.data.success?e.data:void i.openMsgDialog({msg:e.data.msg})})}function l(t,n){var a=PREFIX_URL+"m/accept/task/earnings/extract",o={taskId:t,endDate:n};return e({withCredentials:!0,method:"POST",url:a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(o)}).then(function(e){var t=e.data,n=e.config.data,a=parseInt(n.split("&")[0].split("=")[1],10),o=n.split("&")[1].split("=")[1],r=t.msg,l=864e5,c=new Date(o.replace(/-/g,"/")),d=new Date(c.getTime()+4*l);t.success?i.openMsgDialog({msg:"您的收益"+t.map.earnings+"秀点已提取成功！您可以去秀点余额中查看",btn:"确定"},function(e){s.$broadcast("getIncome.success",a)}):(190019==t.code&&(r="平台正在结算中，请于"+d.getFullYear()+"年"+(d.getMonth()+1)+"月"+d.getDate()+"日（包含该天）来提取您的收益！"),i.openMsgDialog({msg:r,btn:"知道了"}))})}function c(e){n.open({windowClass:"console select-scene-console",templateUrl:"orderTask/task/list/selectScene.tpl.html",controller:"SelectSceneCtrl"}).result.then(function(e){a.path("scene/create/"+e).search("pageId",1)})}function d(t){var i=PREFIX_URL+"m/accept/task/delete",n={taskId:t};return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})}function p(e){switch(e){case 1:return"我还没开始推广的任务";case 2:return"我正在推广中的任务";case 3:return"已结束"}}var u={getTaskDetail:o,getTaskList:r,deleteTask:d,getIncome:l,promoteTask:c,showTaskStatus:p};return u}]),angular.module("service.upgradeAccount",[]).factory("upgradeAccountService",["ModalService","security","$modal",function(e,t,i){var n=function(n){var a=t.currentUser;return 1===a.type?void i.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:a.id}}}}).result.then(function(){t.currentUser.type=2}):2!==a.type?void e.openMsgDialog({msg:"尊敬的用户，您当前账号类型无法升级为企业用户！"}):void i.open({windowClass:"six-contain console",templateUrl:"usercenter/upgrade.tpl.html",controller:"UpgradeCtrl",resolve:{type:function(){return n}}})},a=function(e){if(e.buyBtnValue="立即购买",!t.currentUser)return void(e.disBuyTip="");if(t.currentUser.memberType&&[1,2,3,4].indexOf(t.currentUser.memberType)!==-1)e.disBuyTip="您的会员版本为早期版本，请待到期后再购买！",e.disBuyFlag=!0;else if(t.currentUser&&t.currentUser.memberType===e.memberType){var i=new Date;i.setFullYear(i.getFullYear()+1),i.getTime()>t.currentUser.expiryTime?(e.buyBtnValue="立即续费",e.disBuyFlag=!1):(e.disBuyTip="用户自身版本与页面中版本相同，但用户当前版本有效期还超过1年！",e.disBuyFlag=!0)}else t.currentUser.memberType>e.memberType?(e.disBuyTip="用户自身版本比页面中版本级别更高！",
e.disBuyFlag=!0):(e.disBuyTip="",e.disBuyFlag=!1)};return{upgradeAccountFunc:n,buyBtnValueFunc:a}}]),angular.module("services.file.upload",["angularFileUpload","services.file"]).factory("uploaderService",["$rootScope","$http","$interval","$q","FileUploader","ModalService",function(e,t,i,n,a,s){var o={};o.getUploadToken=function(e){var i=PREFIX_URL+"m/base/file/uptokens?type="+e,a=n.defer();return t({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){a.resolve(e)}),a.promise},o.uploadBase64=function(e,t){return $.ajax({type:"POST",url:"http://up.qiniu.com/putb64/-1",contentType:"application/octet-stream",beforeSend:function(t){t.setRequestHeader("Authorization","UpToken "+e)},data:t})};var r;return o.uploader=function(t,n,o){r=PREFIX_URL+"m/c/import";var l=new a({url:r,withCredentials:!0,onAfterAddingAll:function(e){l.uploadAll()},onSuccessItem:function(t,n){if(200==n.code)var a=i(function(){t.progress>=100&&(e.$broadcast("thumbnailList.update",n.obj),s())},100),s=function(){i.cancel(a)};else e.$broadcast("upload.fail",n.msg)}});return l.filters.push({name:"fileNameFilter",fn:function(e){return e.name.length>50&&s.openMsgDialog({msg:"文件名应限制在50字符以内"}),e.name.length<=50}}),l},o}]),angular.module("services.usercenter",["services.i18nNotifications"]).factory("usercenterService",["$http","$rootScope","$location","security","$modal","ModalService","i18nNotifications",function(e,t,i,n,a,s,o){var r={};return r.getUserInfo=function(){var t=PREFIX_URL+"m/u/info";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getCompanyScale=function(){var t=PREFIX_URL+"/base/class/company_scale";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getCompanyIndustry=function(){var t=PREFIX_URL+"/base/class/company_industry";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getCompanyInfo=function(){var t=PREFIX_URL+"m/u/company/info";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.saveCompanyInfo=function(t,i){var n=i?"m/u/company/upgrade":"m/u/company/save";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.savePublicInfo=function(t){var i=PREFIX_URL+"m/u/organiz/save";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.saveUserInfo=function(t){var i=PREFIX_URL+"m/u/save";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.phoneMessage=function(){var t=PREFIX_URL+"m/scene/buy/remind/sms";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getUserXd=function(){var t=PREFIX_URL+"m/u/xd";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getgiveXd=function(t){var i=PREFIX_URL+"m/u/giveXd";return i+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:i,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.getUserInvoice=function(){var t=PREFIX_URL+"m/order/user/invoice";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.saveUserInvoice=function(t){var i=PREFIX_URL+"m/order/user/save/invoice";return i+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},r.saveOrderInvoice=function(t){var i=PREFIX_URL+"m/order/invoice/save";return i+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:i,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.getXdlog=function(t,i,n){var a=PREFIX_URL+"m/u/xdlog?pageNo="+i+"&pageSize="+n;return a+="?time="+(new Date).getTime(),t&&(a+=(/\?/.test(a)?"&":"?")+"type="+t),a+=(/\?/.test(a)?"&":"?")+"pageNo="+i,a+=(/\?/.test(a)?"&":"?")+"pageSize="+n,e({withCredentials:!0,method:"POST",url:a})},r.getXdStat=function(){var t=PREFIX_URL+"m/u/xdStat";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.thirdSettingLogName=function(t,i){var n={loginName:t,password:i},a=PREFIX_URL+"m/u/set/login/info";return e({withCredentials:!0,method:"POST",url:a,data:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.relAccount=function(t,i,n,a){var s={loginName:i,loginPassword:n},o=PREFIX_URL+"m/u/bind/email";return a&&(o+=(/\?/.test(o)?"&":"?")+"register=1"),o+=(/\?/.test(o)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:o,data:$.param(s),headers:{"Content-Type":"text/plain; charset=UTF-8"}})},r.relEmail=function(t,i,n){var a={email:t,pass:i,resend:n},s=PREFIX_URL+"m/u/bind/user/email";return e({withCredentials:!0,method:"POST",url:s,data:$.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.verifyEmail=function(){var t=PREFIX_URL+"m/u/email/verify";return e({withCredentials:!0,method:"GET",url:t,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},r.relMobile=function(t,i,n){var a=PREFIX_URL+"m/u/phone/verify?phone="+t+"&pass="+i+"&code="+n;return a+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:a,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},r.relMobileCode=function(t,i){var n=PREFIX_URL+"m/u/bind/user/phone";return i&&(n+=(/\?/.test(n)?"&":"?")+"type="+i),n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.companyMobile=function(t){var i=PREFIX_URL+"m/u/company/smscode/send";return i+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:i,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.setRead=function(t){var i=PREFIX_URL+"m/u/markRead?ids=";return t&&(i+=t),i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:i,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},r.changeBranch=function(t){var i={msgId:t},n=PREFIX_URL+"m/u/sub/join";return n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n,data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.getNewMessage=function(t,i,n,a){var s=PREFIX_URL+"m/u/msgList?pageNo="+t+"&pageSize="+i;return n&&(s+="&unread="+n),a&&(s+="&system="+a),s+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:s})},r.getBranches=function(t,i){var n=PREFIX_URL+"m/u/sub/list";return t&&(n+=(/\?/.test(n)?"&":"?")+"pageSize="+t),i&&(n+=(/\?/.test(n)?"&":"?")+"pageNo="+i),n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:n})},r.addBranch=function(t){var i=PREFIX_URL+"m/u/sub/add";return e({withCredentials:!0,method:"POST",url:i,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.removeBranch=function(t){var i={id:t},n=PREFIX_URL+"m/u/sub/remove";return e({withCredentials:!0,method:"POST",url:n,data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.getDepts=function(){var t=PREFIX_URL+"m/u/tag/list";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.addDept=function(t){var i=PREFIX_URL+"m/u/tag/create";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.deleteDepartment=function(t){var i=PREFIX_URL+"m/u/tag/del",n={id:t};return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})},r.updateBranch=function(t){var i=PREFIX_URL+"m/u/sub/save";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.createBranch=function(t){var i=PREFIX_URL+"m/u/sub/create";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.openBranch=function(t,i){var n=PREFIX_URL;return n+=i?"m/u/sub/turnOn?id="+t:"m/u/sub/turnOff?id="+t,e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},r.getDomain=function(){var t=PREFIX_URL+"m/u/domain";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getPhoneMessageTime=function(){var t=PREFIX_URL+"m/scene/remind/sms/time";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},r.resetBranchPass=function(i){var n=PREFIX_URL+"m/u/sub/pwd/reset",a={id:i};e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)}).then(function(e){e.data.success&&t.$broadcast("reset.branch.success")},function(){})},r.saveApplyInfo=function(t){var i=PREFIX_URL+"m/u/showker/apply";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.resetApplyInfo=function(t){var i=PREFIX_URL+"m/u/showker/apply";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.getVisitorMsg=function(){var t=PREFIX_URL+"m/u/showker/detail",i=new Date;return t+="?time="+i.getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getAPPlyMessage=function(t){var i=PREFIX_S2_URL+"showker/tag?type="+t;return e({method:"GET",url:i})},r.getUserScene=function(){var t=PREFIX_URL+"m/u/scene/list",i=new Date;return t+="?time="+i.getTime(),e({withCredentials:!0,method:"GET",url:t})},r.getUserStatus=function(){var t=PREFIX_URL+"m/u/showker/status";return e({withCredentials:!0,method:"GET",url:t})},r.getCompanyQrCode=function(t,a,s,o){var r=PREFIX_URL+"m/u/pay/member/url?goodsId="+t+"&type="+a;s&&(r+="&amount="+s);var l="/upgrade/"===i.path().substring(0,9)||"/xdBuy"===i.path();return l&&!o&&(r+="&userId="+n.currentUser.id),e({withCredentials:!0,method:"GET",url:r})},r.getUserMemberDetail=function(t){var i=PREFIX_URL+"m/u/member/detail?userId="+t;return e({withCredentials:!0,method:"GET",url:i})},r.getPayXdQrCode=function(t,a,s){var o=PREFIX_URL+"m/u/pay/xd/url?goodsId="+t+"&type="+a,r="/upgrade/"===i.path().substring(0,9)||"/xdBuy"===i.path();return r&&!s&&(o+="&userId="+n.currentUser.id),e({withCredentials:!0,method:"GET",url:o})},r.sendEmail=function(t){var i=PREFIX_URL+"m/u/invite/user/email";return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},r.getInvoiceList=function(i,n){var a=PREFIX_URL+"m/order/can/invoice/list";n&&(a+=(/\?/.test(a)?"&":"?")+"pageSize="+n),i&&(a+=(/\?/.test(a)?"&":"?")+"pageNo="+i),e({withCredentials:!0,method:"GET",url:a}).then(function(e){e.data.success&&t.$broadcast("get.invoice.list",e.data)})},r.relForum=function(t,i,n){var a=PREFIX_URL+"m/u/bind/user/bbs",s={userName:t,passWord:i,eqXiuPassWord:n};return e({withCredentials:!0,method:"POST",url:a,data:$.param(s),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.myPrivilege=function(){var t=PREFIX_URL+"m/u/privilege/profile";return e({withCredentials:!0,method:"GET",url:t})},r.companyProfile=function(){var t=PREFIX_URL+"m/u/company/profile";return e({withCredentials:!0,method:"GET",url:t})},r.buyBranchDlg=function(e,i){var n,a,l=i||"",c=500,d=r.xdCount||0;d>=c?(n=l+"即将消费"+c+'秀点获取10个子帐号一年使用权<div class="text-center pt20">当前秀点余额<span class="color-red">'+d+"</span>个</div>",a="购买"):(n=l+'当前选择需要消耗500秀点/10个子帐号一年使用权<div class="text-center pt20">当前秀点余额<span class="color-red">'+d+"</span>个</div>",a="充值"),s.openConfirmDialog({msg:n,confirmName:a,cancelName:"否"},function(){d>=c?r.buyBranch().then(function(i){if(i.data.success)o.pushForCurrentRoute("usercenter.buybranch.success","notify.success"),e.getUserXd(),t.$broadcast("buyXd");else if(150101===i.data.code){var n="您不是企业会员,请先申请企业会员后再进行操作！";o.pushForCurrentRoute("usercenter.buybranch.notcompany",n)}}):t.buyXdQ()})},r.userXd=function(){return function(){r.getUserXd().then(function(e){r.xdCount=e.data.obj||0,t.$broadcast("userXdNum",r.xdCount)})}},r.buyBranch=function(){var t=PREFIX_URL+"m/u/buy/sub/user";return e({withCredentials:!0,method:"POST",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},r.upgradeAccountDlg=function(e,t){return 1!==n.currentUser.type||t.companyInfo&&0===t.companyInfo.status?1===n.currentUser.type&&t.companyInfo?void s.openMsgDialog({msg:"您不是企业会员,请先申请企业会员后再进行升级！"}):2!==n.currentUser.type?void s.openMsgDialog({msg:"尊敬的用户，您当前账号类型无法升级为企业用户！"}):void a.open({windowClass:"six-contain console",templateUrl:"usercenter/upgrade.tpl.html",controller:"UpgradeCtrl",resolve:{type:function(){return e}}}):void s.openMsgDialog({msg:"尊敬的用户，请您先申请免费企业用户，通过审核后再次升级",btn:"我知道了"},function(){a.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:t.user.id}}}}).result.then(function(){n.currentUser.type=2})})},r.xdBuyService=function(e,o,l){r.getPayXdQrCode(10,1,l).then(function(r){if(e.$close(),r.data.success){var l=r.data.obj;a.open({windowClass:"console",templateUrl:"usercenter/payment.tpl.html",controller:"PayMentCtrl",resolve:{qrCodeUrl:function(){return l.url},type:function(){return 10},money:function(){return l.price/100},oprice:function(){return l.oprice/100},method:function(){return"buyXd"},counts:function(){}}}).result.then(function(){o()})}else{var c="/upgrade/"===i.path().substring(0,9)||"/xdBuy"===i.path();970301===r.data.code&&c?(n.currentUser=null,n.requestCurrentUser().then(function(){t.$broadcast("toAppUpgrade"),a.open({windowClass:"console updateDlg refuseDlg",templateUrl:"upgrade/buyRefuseDlg.tpl.html",controller:"buyRefuseDlgCtrl",resolve:{type:function(){return 0}}})})):s.openMsgDialog({msg:r.data.msg})}})},r.openInvoice=function(){s.openConfirmDialog({msg:"是否开具发票？",confirmName:"是",cancelName:"否"},function(){r.openInvoiceListModal()},function(){"/upgrade/"===i.path().substring(0,9)?i.path("/usercenter/member"):i.path("/privilege")})},r.openInvoiceListModal=function(){a.open({windowClass:"console seven-contain",templateUrl:"usercenter/console/invoice-list.tpl.html",controller:"GetInvoiceListCtrl"}).result.then(function(){})},r.upgradeVersionService=function(e,o,l){r.getCompanyQrCode(o,1,null,l).then(function(l){e.$close();var c;if(6===o?c=[{name:"1个月",value:1},{name:"2个月",value:2},{name:"3个月",value:3},{name:"4个月",value:4},{name:"5个月",value:5},{name:"6个月",value:6}]:7===o?c=[{name:"1年",value:1}]:8===o?c=[{name:"1年",value:1}]:9===o&&(c=[{name:"1年",value:1}]),l.data.success){var d=l.data.obj;a.open({windowClass:"console",templateUrl:"usercenter/payment.tpl.html",controller:"PayMentCtrl",resolve:{qrCodeUrl:function(){return d.url},type:function(){return o},money:function(){return d.price/100},oprice:function(){return d.oprice/100},method:function(){return"member"},counts:function(){return c}},size:"lg"}).result.then(function(){r.getUserInfo().then(function(e){e.data.success&&(n.currentUser=e.data.obj)}),s.openMsgDialog({msg:"因网络原因，部分用户开通会有延迟",btn:"确定"},function(){r.openInvoice()})})}else{var p="/upgrade/"===i.path().substring(0,9)||"/xdBuy"===i.path();970301===l.data.code&&p?(n.currentUser=null,n.requestCurrentUser().then(function(){t.$broadcast("toAppUpgrade"),a.open({windowClass:"console updateDlg refuseDlg",templateUrl:"upgrade/buyRefuseDlg.tpl.html",controller:"buyRefuseDlgCtrl",resolve:{type:function(){return o}}})})):s.openMsgDialog({msg:l.data.msg})}})},r}]),angular.module("services.validate",[]).factory("validateService",function(){var e={},t=function(e,t,i,n){var a="";return e?angular.isFunction(t)&&!t()?a=n:t instanceof RegExp&&!t.test(e)&&(a=n):a=i,a};return e.checkEmail=function(e){var i=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;return t(e,i,"邮箱不能为空！","邮箱格式不正确！")},e.checkAccountName=function(e){var i=/^[a-z0-9-\.\_@]{6,40}$/;return t(e,i,"账号名称不能为空！","6-40个字符(英文或数字，只支持小写)以及-_@.的组合！")},e.checkPassword=function(e){var i=/^[a-zA-Z0-9]{6,16}$/g;return t(e,i,"密码不能为空！","密码6~16个字符(英文字母或数字 区分大小写)！")},e.checkName=function(e){var i=function(){return countCharacters(e)<=30};return t(e,i,"用户名不能为空！","用户名不能超过30个字符！")},e}),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("about.tpl.html",'<div id="home" class="about-contain"><header style="background-color:#fff;width:100%;height:60px;"><div class="we_nav content_center same-content"><div class="link_list"><ul class="clearfix about-nav"><li><a target="_blank" href="/show/visitor">场景定制</a></li><li><a target="_blank" href="/show">秀场中心</a></li><li><a href="/privilege">会员特权</a></li><li ng-hide="isAuthenticated()"><a ng-click="openLogin()">登录</a></li><li ng-hide="isAuthenticated()" class=""><a ng-click="openRegister()" id="registerFormBtn">注册</a></li><li ng-show="isAuthenticated()"><a href="/homepage">进入</a></li></ul></div><a href="/homepage" class="hint--bottom hint--rounded" id="logo"><img ng-src="{{logoSrc}}"></a></div></header><div class="content_center about-main"><div class="about-eqx box-shadow about-bg shuoming"><h1>关于易企秀</h1><p>“易企秀”成立于2014年7月，隶属于 “北京中网易企秀科技有限公司”。 “易企秀”致力于成为中小企业社会化自营销服务平台，提供基于场景的自营销闭环服务，方便中小企业制作展示场景、数据收集、二次营销。</p><p>“易企秀”团队秉持互联网精神，坚持以用户为中心，以产品为核心，共邀广大中小企业一起投身互联网大潮。</p><p>客服咨询：vip#eqxiu.com (联系请#改成@)；<br>客服电话：010-83035157；<br>商务合作：BD#eqxiu.com (联系请#改成@)；<br>公司地址：北京市海淀区中关村南四街紫金数码四号楼201</p></div><div class="box-shadow about-bg product about-eqx clearfix"><h1>易企秀的产品</h1><div class="list pro-one"><div class="product-img"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/item.svg"></div><p>场景制作营销工具：是一款针对移动互联网营销的手机幻灯片、H5场景应用制作工具，将原来只能在PC端制作和展示的各类复杂营销方案转移到更为便携和展示的手机上，用户随时随地根据自己的需要在PC端、手机端进行制作和展示，随时随地营销。</p></div><div class="list"><div class="product-img pro-two"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/item2.svg"></div><p>轻设计在线设计工具：是一款针对传单、图片设计的轻型设计工具，方便不懂photoshop制图的企业营销人员设计出精美的企业宣传图片。</p></div></div><div class="box-shadow about-bg about-eqx meiti-content clearfix"><h1>媒体报道</h1><div class="meiti"><div class="meiti-list clearfix"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/pic1.svg" width="120px" height="88px"><div class="meiti-jieshao"><h2>猎云网</h2><p>易企秀：免费移动场景应用，并提供移动端客户管理</p><p><a href="http://www.lieyunwang.com/archives/63304" target="_blank">http://www.lieyunwang.com/archives/63304</a></p></div></div><div class="meiti-list clearfix"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/pic3.svg" width="120px" height="88px"><div class="meiti-jieshao"><h2>搜狐焦点</h2><p>易企秀成为搜狐焦点家居微场景类产品合作伙伴</p><p><a href="http://home.focus.cn/newshtml/426979.html" target="_bkank">http://home.focus.cn/newshtml/426979.html</a></p></div></div></div><div class="meiti line"><div class="meiti-list clearfix"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/pic2.svg" width="120px" height="88px"><div class="meiti-jieshao"><h2>光明网</h2><p>光明日报采用易企秀报道两会</p><p><a href="http://epaper.gmw.cn/gmrb/html/2015-03/04/nw.D110000gmrb_20150304_3-04.htm" target="_blank">http://epaper.gmw.cn/gmrb/html/2015-03/04/nw.D110000gmrb_20150304_3-04.htm</a></p></div></div><div class="meiti-list clearfix"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/pic4.svg" width="120px" height="88px"><div class="meiti-jieshao"><h2>企业网D1Net</h2><p>VC的钱都砸到哪里去了：云计算云存储大数据安全</p><p><a href="http://www.d1net.com/bigdata/news/294287.html" target="_blank">http://www.d1net.com/bigdata/news/294287.html</a></p></div></div></div><div class="more"><a href="http://news.baidu.com/ns?word=易企秀" target="_blank">查看更多新闻</a></div></div><div class="about-eqx box-shadow about-bg clearfix fuli"><h1>公司福利</h1><div class="fuli-slide"><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/1.svg"> <span>餐补、交通补、电脑补贴</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/3.svg"> <span>丰厚的过节费(元旦/春节/五一/中秋/国庆/元宵/端午/三八)</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/5.svg"> <span>全年健身游泳卡（高档健身会所）</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/7.svg"> <span>年度体检</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/9.svg"> <span>优秀员工无息贷款买房买车</span></div></div><div class="fuli-slide line"><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/2.svg"> <span>七险一金（补充医疗保险和意外保险）</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/4.svg"> <span>年度春游、秋游（可带家属）、优秀员工境外游</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/6.svg"> <span>员工集体生日会（抽奖环节100%中奖）</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/8.svg"> <span>优秀员工出国游</span></div><div class="fuli-list"><img ng-src="{{CLIENT_CDN}}assets/images/aboutfont/10.svg"> <span>免费水果零食饮料无限供应.......</span></div></div><div class="more"><a href="http://www.lagou.com/gongsi/93527.html" target="_blank">马上加入我们</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("error.tpl.html",'<div class="error"><div class="header"><div class="content"><div class="logo"><img ng-src="{{CLIENT_CDN}}assets/images/logo.png" alt=""></div></div></div><div class="error_contain"><div class="error_con"><img ng-src="{{CLIENT_CDN}}assets/images/404_03.png" alt=""><p style="font-size:24px;margin-top:30px;margin-bottom:15px;"><span>对不起，您想要进入的页面已经去火星了！</span></p><p style="text-align:left;"><a href="/home" target="_blank"><span>返回地球</span></a></p></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("footer.tpl.html",'<div class="buy-seek" ng-if="privilegePage"><a href="http://kf.eqxiu.com/kchat/15039?from=%E5%9C%A8%E7%BA%BF%E6%94%AF%E6%8C%81&group=25584#livechat" target="_blank"><span>购买咨询</span></a></div><div class="scroll" data-ng-init="load2()"><a class="scroll_top" ng-click="goTop()"><span class="eqf-clickmore2"></span> <span>顶部</span></a></div><div class="app-download"><div style="position:relative;height:40px;width:40px;"><a class="scroll_top bgScroll" ng-click="downApp()" ng-show="appIconDown"><span class="eqf-phone"></span> <span>APP</span></a></div><div ng-hide="appIconDown" class="qrcode-download"><div class="closedown eqf-wrong" ng-click="closeDown()" title="关闭"></div><div qr-code="" qr-url="{{PREFIX_CLIENT_HOST + \'/appdown.html\'}}"></div></div></div><div class="video-user"><a target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=278"><span class="eqf-top-video"></span> <span>教程</span></a> <a target="_blank" ng-click="customerService()"><span class="eqf-top-contact"></span> <span>客服</span></a></div><footer><div class="help-contain"><div class="same-content clearfix"><div class="home-help fl"><h6><em>易企秀</em></h6><ul><li><a href="/about" target="_blank">关于我们</a></li><li><a href="http://www.lagou.com/gongsi/93527.html" target="_blank">人才招聘</a></li><li><a href="/agreement" target="_blank">服务协议</a></li><li><a href="http://hypefolio.com" target="_blank">Hypefolio</a></li></ul></div><div class="home-help fl"><h6><em>设计制作帮助</em></h6><ul><li><a href="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=278" target="_blank">制作场景教程</a></li><li><a href="http://eqxiu.com/show" target="_blank">找场景案例</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13104" target="_blank">轻设计制作教程</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23004" target="_blank">QQ群交流</a></li></ul></div><div class="home-help fl"><h6><em>审核问题</em></h6><ul><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=890" target="_blank">场景审核及被关闭</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=8293" target="_blank">样例审核</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13174" target="_blank">秀客及审核被驳回</a></li></ul></div><div class="home-help fl"><h6><em>企业服务</em></h6><ul><li><a href="http://eqxiu.com/privilege" target="_blank">免费升级企业账号</a></li><li><a href="http://www.eqxiu.com/privilege" target="_blank">升级付费会员获得更多功能</a></li><li><a href="http://detail.koudaitong.com/show/goods?alias=2omo4zcvnb62r&reft=1465720910775" target="_blank">购买秀点去易企秀标识</a></li><li><a href="http://eqxiu.com/show/visitor" target="_blank">场景定制</a></li></ul></div><div class="home-help fl" style="width:140px;"><h6><em>联系我们</em></h6><ul><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=17931" target="_blank">易企秀产品开放合作</a></li><li><a href="/region" target="_blank">区域服务商招募</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=8103" target="_blank">申请主办品牌H5大赛</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=258&filter=typeid&typeid=632" target="_blank">公共帐号申请及其他</a></li></ul></div></div></div><div class="contact-friend same-content" ng-if="friendLinks.length > 0"><ul class="clearfix"><li ng-repeat="link in friendLinks"><a target="_blank" ng-href="{{link.url}}">{{link.name}}</a></li></ul></div><div class="same-content clearfix pt20 pb20"><div class="fr" style="width:280px;"><div class="fr" style="background-color:#fff;"><img ng-src="{{CLIENT_CDN}}assets/images/home/QRcode.svg" width="80px" height="80px;"></div><p>微信：扫描二维码咨询在线客服</p><p ng-if="isPay">邮箱：svip@eqxiu.com</p><p ng-if="isPay">电话：010-56591888</p><p ng-if="isPay">时间：9:00-20:00</p><p ng-if="!isPay">邮箱：vip@eqxiu.com</p><p ng-if="!isPay">电话：010-83035157</p><p ng-if="!isPay">时间：9:00-18:00</p></div><div class="fl"><p>© 2015 eqxiu.com. All rights reserved 北京中网易企秀科技有限公司</p><p>电信与信息服务业务经营许可证：京ICP证160037号 | 京ICP备15056244号-5 | 京公网安备11010802018300</p><div class="renzheng" style="padding-top:10px;"><a href="https://ss.knet.cn/verifyseal.dll?sn=e14082111011652865izip000000&amp;ct=df&amp;a=1&amp;pa=0.5974755212664604" target="_blank"><img ng-src="{{CLIENT_CDN}}assets/images/kexin.svg" width="80px" height="30px"></a> <span id="ppbVerify" logo_size="83x30" logo_type="business"></span><script src="http://static.anquan.org/static/outer/js/aq_auth.js"></script><a href="http://bbs.eqxiu.com/portal.php" class="btn btn-main" target="_blank">官方论坛</a> <a><em class="eqf-wechat btn btn-primary"></em><div class="weixin" style="background-color:#fff;"><img ng-src="{{CLIENT_CDN}}assets/images/home/weixin_qrcode.svg" width="120px" height="120px"></div></a> <a href="http://weibo.com/eqxiu" target="_blank"><em class="eqf-weibo btn out-red"></em></a> <a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23004" target="_blank" style="padding:0;" class="qq-group btn-main background-color-width-change clearfix"><em class="eqf-qq btn"></em> <span>QQ群交流</span></a></div></div></div></footer>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("header.tpl.html",'<div class="header-wap"><div class="header-contain"><div class="same-content clearfix"><div class="head_nav" ng-if="showToolBar();"><ul class="clearfix head_navs tab-line" ng-if="user && isActive!=\'order\'"><li class="background-color-width-change design"><a href="http://eqxiu.cn.wqdian.com/eqd.html" target="_blank">易庆典</a> <span>hot</span></li><li class="background-color-width-change"><a href="/homepage" ng-class="{active: isActive == \'homepage\'}">首页</a></li><li class="background-color-width-change"><a href="/main" ng-class="{active: isActive == \'main\'}">H5场景</a></li><li class="background-color-width-change design" ng-class="{isActive: isActive == \'channel\'}"><a href="/promotion/channel" target="_self">场景推广</a> <span>new</span></li><li class="background-color-width-change"><a href="/main/print/create" ng-class="{active: isActive == \'print\'}">轻设计</a></li><li ng-if="(user.type == 21 && userPermit.indexOf(\',1101,\') >= 0) || user.type !=21" class="background-color-width-change"><a href="/main/customer" ng-class="{active: isActive == \'customer\'}">客户</a></li><li class="background-color-width-change"><a href="/show" target="_blank" ng-class="{active: isActive == \'show\'}">秀场</a></li><li class="background-color-width-change"><a href="/privilege" ng-class="{active: isActive == \'privilege\'}">会员特权</a></li><li><a href="http://bbs.eqxiu.com" target="_blank">帮助</a></li></ul><ul class="clearfix head_navs tab-line" ng-if="!user"><li class="background-color-width-change design"><a href="http://eqxiu.cn.wqdian.com/eqd.html" target="_blank">易庆典</a> <span>hot</span></li><li><a class="background-color-width-change" target="_blank" href="/show/visitor">场景定制</a></li><li><a class="background-color-width-change" target="_blank" href="/show">秀场</a></li><li><a ng-class="{active: isActive == \'privilege\'}" class="background-color-width-change" href="/privilege">会员特权</a></li><li><a class="background-color-width-change" href="http://bbs.eqxiu.com/" target="_blank">帮助中心</a></li><li class="login" ng-hide="isAuthenticated()"><a class="background-color-width-change" ng-click="openAuth(\'login\')">登录</a></li><li ng-hide="isAuthenticated()" class="register"><a class="background-color-width-change" ng-click="openAuth(\'register\')" id="registerFormBtn">注册</a></li><li ng-show="isAuthenticated()"><a class="background-color-width-change" href="/main">进入</a></li></ul><login-toolbar></login-toolbar></div><div id="logo"><a href="/homepage" class="hint--bottom hint--rounded"><img ng-src="{{logoSrc}}"></a> <span ng-if="user" class="free-version" ng-class="{\'basis-version\': user.memberType === 7, \'standard-version\': user.memberType === 8, \'advanced-version\': user.memberType === 9}">{{currentName}}</span></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("help.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="usercenter" class="min_contain"><div class="main clearfix"><div class="help_content"><h1>快速获得秀点</h1><p><span>1.场景展示得秀点</span></p><table><tr><th class="col-sm-3"><span>账号属性</span></th><th class="col-sm-3"><span>获取秀点条件</span></th><th class="col-sm-8"><span>秀点计算</span></th></tr><tr><td><span>普通账号</span></td><td><span>分享尾页展示</span></td><td><span>5000展示=100秀点</span></td></tr><tr><td><span>高级账号</span></td><td><span>末页底标展示</span></td><td><span>10000展示=100秀点</span></td></tr><tr><td><span>服务账号</span></td><td><span>末页底标展示</span></td><td><span>10000展示=100秀点</span></td></tr></table><p><span>2.推荐会员得秀点</span></p><table><tr><td class="col-sm-3"><span>推荐会员</span></td><td class="col-sm-3"><span>注册会员</span></td><td class="col-sm-8"><span>推荐一个会员，可以获得20个秀点</span></td></tr></table><h1 style="margin:20px 0;"><span>秀点使用</span></h1><table><tr><th class="col-sm-3"><span>账号属性</span></th><th class="col-sm-3"><span>使用内容</span></th><th class="col-sm-8"><span>所需秀点</span></th></tr><tr><td><span>普通账号</span></td><td><span>去除分享尾页</span></td><td><span>100个</span></td></tr><tr><td><span>高级账号</span></td><td><span>去除末页底标</span></td><td><span>100个</span></td></tr><tr><td><span>服务账号</span></td><td><span>去除末页底标/修改载入logo</span></td><td><span>100个/500个</span></td></tr></table></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("notifications.tpl.html",'<div ng-class="[\'alert\', \'alert-\'+notification.type]" ng-repeat="notification in notifications.getCurrent()" notification-fadeout=""><button class="close" ng-click="removeNotification(notification)">×</button> {{notification.message}}</div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("sysmessage.tpl.html",'<div class="sys-contain myMove" ng-if="!!sysMsgs.length && openSysMsgDialog"><div class="same-content sys-msg"><div class="sys-msg-container" ng-class="{\'is-closed\': !openSysMsg}"><ul class="messages"><li class="message" ng-repeat-start="sysMsg in sysMsgs"><span>{{($index + 1) + "."}}</span><span ng-bind-html="sysMsg.content" data-event="2201"></span></li><li class="separator" ng-if="!$last" ng-repeat-end=""></li></ul></div><a class="eqf-wrong msg-close" ng-click="closeSysMsgDialog()" data-event="2202"></a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("data/editData.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="main" class="min_contain" ng-if="!hideOpea"><div ng-include="\'data/edit/canedit.tpl.html\'"></div></div><div id="main" class="min_contain" ng-if="hideOpea"><div ng-include="\'data/edit/canread.tpl.html\'"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("dialog/bindemail.tpl.html",'<div class="email-account"><h1>您的账号还没有绑定邮箱</h1><p><span>去用户中心>账号管理，</span> <a ng-href="/usercenter/account?bindemail"><span>马上绑定</span></a></p></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("dialog/confirm.tpl.html",'<div class="modal-body" ng-if="confirmObj.msg"><div class="confirm-msg" ng-bind-html="confirmObj.msg"></div></div><div class="btn-contain btn-small"><a ng-click="ok();" class="btn-main" ng-class="{deletePage:insistDelete}">{{confirmObj.confirmName || (\'确定\')}}</a> <a ng-click="cancel();" class="btn-grey0" ng-class="{cancelDeletePage:cancelDelete}">{{confirmObj.cancelName || (\'取消\')}}</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("dialog/message.tpl.html",'<div class="modal-header"><span class="glyphicon glyphicon-exclamation-sign"></span> <span>{{msgObj.title || (\'提示\')}}</span></div><div class="modal-body" ng-if="msgObj.msg"><div class="msg" ng-class="msgObj.title ? \'\' : \'msg-padding\'" ng-bind-html="msgObj.msg"></div></div><div class="modal-footer"><a ng-click="close();" class="btn btn-primary" style="width: 88px;">{{msgObj.btn || (\'关闭\')}}</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("error/error.html",'<div class="error" custom-body-height=""><div class="error_contain"><div class="error_con pb20"><img src="{{CLIENT_CDN}}assets/images/error/404.svg" alt=""></div><p class="mt20">您所访问的页面找不到了</p><div class="mb20"><a href="/home" target="_blank">返回易企秀首页</a></div><div class="ad-sec mt20"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-6732945441110091" data-ad-slot="5416211364"></ins><script>\n                (adsbygoogle = window.adsbygoogle || []).push({});\n            </script></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("fillscene/fillscene.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div class="fillscene same-content tab-box-shadow"><div class="fill-left"><div class="backbtn"><a href="/scene/list/fill"><em class="eqf-left"></em>返回样例列表</a></div><div eqd-scroll="" style="height: 520px;" prevent-exception="true" disable-mouse="true"><ul class="page-uls" id="pageList" ui-sortable="sortableOptions" ng-model="pageList"><li class="page-li" ng-repeat="page in pageList track by $index" ng-click="selectPage($index)" ng-class="{current: curPage.id == page.id}"><span class="number"><em class="number-em">{{$index+1}}</em></span> <img class="page-thumbnail" ng-if="page.properties.thumbSrc" ng-src="{{PREFIX_FILE_HOST + page.properties.thumbSrc}}"> <a class="change-tpl all-change" ng-click="deletePage($event)" ng-if="curPage.id == page.id"><em class="eqf-scene-delete"></em></a></li></ul></div><div class="add-page" ng-click="addPage()"><div class="page-thumbnail all-change"><em class="eqf-plus2"></em></div></div></div><div class="fill-content" fill-scene-len="" len="{{pageLen}}"><div class="phone"><div class="phone-view nr"></div><div class="comp-view"><div ng-repeat="editComp in editCompList" edit-component="" ele="{{editComp}}" content="{{editComp.content}}"></div></div></div><div class="replace-btn"><a class="btn btn-primary" ng-click="replaceTpl()">替换模板</a></div></div><div class="fill-right"><div eqd-scroll="" style="height: 520px;" prevent-exception="true" disable-mouse="true" ng-if="showSetting"><div><h5 class="set-title mb20" ng-if="picCompList.length!=0">设置图片</h5><ul class="clearfix"><li class="img-item" id="container{{$index}}" ng-repeat="picComp in picCompList" ng-click="uploadImg(picComp)"><img class="set-img" ng-src="{{PREFIX_FILE_HOST + picComp.content}}"> <span class="number"><em class="number-em">{{$index+1}}</em></span><div class="action all-change"><div class="left-btn"><a class="icon-img all-change" ng-click="replaceImg(picComp)" style="font-size:16px;"><em class="icon-font eqf-change"></em></a> <span class="action-label">换图</span></div><div class="right-btn"><a class="icon-img all-change" id="pickfiles{{$index}}" qiniu-upload-directive="" resource-type="\'jpg,gif,png\'" token-type="\'image\'" resources="[]" tag-id="" upload-con="container{{$index}}" upload-btn="pickfiles{{$index}}" file-type="1"><em class="icon-font eqf-update"></em></a> <span class="action-label">上传</span></div></div></li></ul><h5 class="set-title mb20" ng-if="textCompList.length!=0" style="margin-top: 30px;">设置文本</h5><div class="set-text" ng-repeat="textComp in textCompList"><div class="textlabel">{{textComp.setlabel}}</div><textarea placeholder="{{textComp.descrip}}" class="textinput" ng-model="textComp.content"></textarea></div><h5 class="set-title mb20" ng-if="showCompList.length!=0" style="margin-top: 30px;">设置装饰元素</h5><ul class="show-list clearfix"><li class="show-li" ng-repeat="showComp in showCompList"><div class="checkbox-square" comp-show-hide="" value="{{showComp.checked}}" ele-id="{{showComp.id}}" ng-class="{checked: showComp.checked}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="showComp.checked"></div><em>{{showComp.setlabel}}</em></li></ul></div></div><div eqd-scroll="" style="height: 560px;" prevent-exception="true" disable-mouse="true" ng-if="!showSetting"><div><h5 class="set-title mb20">模板选择</h5><ul style="margin-right: 150px;" class="clearfix"><li class="page-tpl-item animation-zoom ng-scope" ng-repeat="pageTpl in pageTpls" ng-click="selectPageTpl(pageTpl.id);" ng-style="{\'animation-delay\': $index%42 * 50 + \'ms\'}"><img class="page-tpl-img" ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src="assets/images/create/pic.svg" load-err=""></li></ul></div></div><div class="backset-btn" ng-if="!showSetting" ng-click="backset()"><em class="eqf-left"></em> 返回</div><div class="complete-con" ng-if="showSetting"><a class="page-btn" ng-class="{\'disable\':pageNum==0}" ng-click="prePage()"><em class="eqf-left"></em></a> <a class="page-btn ml20" ng-class="{\'disable\':pageNum==pageList.length-1}" ng-click="nextPage()"><em class="eqf-right"></em></a> <a class="btn btn-primary" ng-click="saveScene()">完成制作</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("home/home.tpl.html",'<div id="home" login-loading=""><header style="background-color:#fff;width:100%;height:60px;"><div class="we_nav content_center"><div class="link_list"><ul class="clearfix tab-line"><li><a class="background-color-width-change" target="_blank" href="http://eqxiu.cn.wqdian.com/eqd.html">易庆典</a> <span>hot</span></li><li><a class="background-color-width-change" target="_blank" href="/show/visitor">场景定制</a></li><li><a class="background-color-width-change" target="_blank" href="/show">秀场</a></li><li><a class="background-color-width-change" href="/privilege">会员特权</a></li><li><a class="background-color-width-change" href="http://bbs.eqxiu.com/" target="_blank">帮助中心</a></li><li class="login" ng-hide="isAuthenticated()"><a class="background-color-width-change" ng-click="openAuth(\'login\')">登录</a></li><li ng-hide="isAuthenticated()" class="register"><a class="background-color-width-change" ng-click="openAuth(\'register\')" id="registerFormBtn">注册</a></li><li ng-show="isAuthenticated()"><a class="background-color-width-change" href="/homepage">进入</a></li></ul></div><div id="logo"><img class="eqf-logo" ng-src="{{logoSrc}}"></div></div></header><div id="example_con"><div flux-slide="" auto-size="true" class="slidesjs-con"><div class="slides-content" ng-repeat="banner in banners" on-finish-render-filter=""><a target="_blank" href="{{banner.url}}" data-banner="9201" data-bid="{{banner.id}}"><img ng-src="{{banner.path}}" width="100%" height="100%"></a></div><a class="slidesjs-previous slidesjs-navigation"><i class="eqf-left"></i></a> <a class="slidesjs-next slidesjs-navigation"><i class="eqf-right"></i></a></div></div><div class="active-banner"><ul class="clearfix"><li ng-repeat="ad in homeAd"><a class="all-change" ng-href="{{ad.url}}" target="_blank" data-banner="9201" data-bid="{{ad.id}}"><img src="{{ad.path}}"><div class="bg"></div></a></li></ul></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("home/homePage.html",'<div ng-include="\'header.tpl.html\'"></div><div class="homepage"><div remind-create=""></div><div class="card-content" section-panel="" ng-controller="MySectionController" ng-include="\'home/section/mySection.html\'"></div><div class="privilege" ng-controller="MyPrivilegeController" ng-include="\'home/privilege/myPrivilege.tpl.html\'"></div><eqd-home-ads></eqd-home-ads></div><div ng-include="\'footer.tpl.html\'"></div><div ng-if="currentTpl.exemplarPreview ===true" preview-exemplar="" current-tpl="currentTpl" create-scene="createScene(tpl);" biztype="{{childcat}}" tagid="{{categoryId}}"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/customer.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="main" class="customer min_contain"><div ng-include="\'sysmessage.tpl.html\'"></div><div class="info-show"><div class="same-content"><div class="cus-title">我的客户</div></div></div><div class="same-content min_contain"><div class="cus-bar clearfix" ng-show="dataShow == \'message\'"><div class="group-action fl clearfix" ng-show="!hideOpea"><div class="group-cat btn-group dropdown" ng-show="!branchid"><a class="dropdown-toggle">添加到组 <span class="eqf-more pl20"></span></a><div class="dropdown-menu transform-change"><ul role="menu"><li ng-repeat="group in groups" forbidden-close=""><div class="select-group"><div class="checkbox-square customer-check fr" ng-class="{checked: group.selected}"><em class="eqf-clickmore"></em> <input class="check-box" type="checkbox" ng-model="group.selected" name="iCheck"></div><div class="group-name"><span class="ellipsis">{{group.name}}</span> <a class="fr" ng-click="deleteGroup(group, $index);">删除</a></div></div></li></ul><div class="select-group add-group text-center" forbidden-close="" ng-click="addGroup();"><em>+</em> <span class="add-group">添加分组</span></div><div class="text-center" style="padding-top:10px;"><a class="btn btn-primary" ng-click="assignGroup();">确定</a></div></div><div class="confirm-group"></div></div></div><div class="fr"><eqx-select class="select-sm select-contain border-width" model="customer.group" change="getDataBySceneId(pageNo,branchid,customer.group.id,customer.origin.ID)"><eqx-select-option value="null">全部群组</eqx-select-option><eqx-select-option value="mygroup" ng-repeat="mygroup in groups">{{mygroup.name}}</eqx-select-option></eqx-select><eqx-select class="select-sm select-contain border-width" model="customer.origin" change="getDataBySceneId(pageNo,branchid,customer.group.id,customer.origin.ID)"><eqx-select-option value="null">全部来源</eqx-select-option><eqx-select-option value="myorigin" ng-repeat="myorigin in origins">{{myorigin.TITLE}}</eqx-select-option></eqx-select><div class="add-data btn-group dropdown" ng-if="!branchid && ((user.type ==21 && userPermit.indexOf(\',1102,\') >=0) || user.type !=21)"><a class="btn btn-border dropdown-toggle"><span class="eqf-plus2"></span> 添加数据</a><div class="dropdown-menu"><ul role="menu"><li ng-click="createData()" forbidden-close=""><a>新建数据</a></li><li ng-click="sceneData()" forbidden-close=""><a>场景数据</a></li><li ng-click="uploadData()" forbidden-close=""><a>上传数据</a></li></ul></div></div><a ng-if="(user.type == 21 && userPermit.indexOf(\',3,\')>=0) || user.type !=21" class="btn btn-border hint--bottom hint--rounded" ng-click="downLoad(customer.group.id,customer.origin.ID)" data-hint="将数据导出为excel文件"><span class="eqf-download"></span> 导出数据</a></div></div><div ng-show="dataShow == \'message\' && customerDatas.length" class="cus-table mt20"><table class="table table-hover customer-data-table" style="background-color:#fff;"><thead><tr><th ng-if="!hideOpea" class="col-sm-1 check-line"><div class="checkbox-square customer-check" ng-class="{checked: allImages.selected}"><em class="eqf-clickmore"></em> <input class="check-box" type="checkbox" ng-change="selectAll()" ng-model="allImages.selected" name="iCheck"></div></th><th>姓名</th><th>手机</th><th>客户群组</th><th>客户来源</th><th ng-if="!branchid">管理</th></tr></thead><tbody><tr ng-repeat="customerData in customerDatas"><td ng-if="!hideOpea" class="check-line"><div class="checkbox-square" ng-class="{checked: customerData.selected}"><em class="eqf-clickmore"></em> <input type="checkbox" ng-model="customerData.selected" name="iCheck" ng-change="selectCustomer(customerData)"></div></td><td>{{customerData.name}}</td><td>{{customerData.mobile}}</td><td>{{customerData.groupName}}</td><td>{{customerData.originName}}</td><td ng-if="!branchid"><span ng-show="(user.type == 21 && userPermit.indexOf(\',1,\') >= 0) || user.type !=21" class="hint--bottom hint--rounded" data-hint="编辑"><a class="eqf-write" ng-click="editCustom(customerData, $index)"></a></span> <span ng-show="(user.type == 21 && userPermit.indexOf(\',2,\') >= 0) || user.type !=21" class="hint--bottom hint--rounded" data-hint="删除"><a style="margin-left: 30px;" class="eqf-scene-delete" ng-click="removeCustomer(customerData)" ng-if="!hideOpea"></a></span></td></tr></tbody></table><div ng-show="totalItems > 10" class="clearfix page-turn"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="10" total-items="totalItems" ng-model="model.currentPage" ng-change="pageChanged(model.currentPage,branchid,customer.group.id,customer.origin.ID)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="model.toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(model.toPage,branchid,customer.group.id,customer.origin.ID) : null"><span class="fl">页</span> <a ng-click="pageChanged(model.toPage,branchid,customer.group.id,customer.origin.ID)" class="go">确定</a></div></div></div><div ng-show="dataShow == \'dataIn\' && !hideOpea"><div class="new-export new-import clearfix"><div class="custom-data"><em>可导入数据：</em> <span>{{customCount.unImp}}</span> <span style="cursor:pointer" ng-show="customCount.unImp < 1" ng-click="dataShow = \'message\'"><em>返回</em></span></div></div><div class="import-container clearfix" style="text-align:center;" ng-show="importDatas"><div class="select-scene fl" style="text-align:left;"><h2>1.选择新数据场景</h2><ul style="height:489px;overflow-y:auto;"><li ng-repeat="importData in importDatas" ng-click="selectScene(importData.ID,$index)" ng-class="{active: select == $index}"><span>{{importData.TITLE}}</span></li></ul></div><div class="data-column ml20 mr20 fl"><h2>2.拖拽导入的数据</h2><ul class="item-remove-droppable" style="height:489px;overflow-y:auto;width:210px;" item-remove-droppable=""><li item-draggable="" item-id="{{field.id}}" class="list_darggable" ng-repeat="field in fields"><span>{{field.title}}</span></li></ul></div><div class="name-to-name fl"><h2>3.拖入对应名称</h2><div class="clearfix drag" style="height:489px;"><div><ul><li style="border-bottom:none;" class="clearfix" ng-repeat="staticFiled in staticFileds"><div class="list-attribute fl" item-droppable="" item-id="{{staticFiled.id}}">拖拽到此处</div><div class="list-field fr">{{staticFiled.name}}</div></li></ul></div></div></div></div><div class="action" style="text-align:right" ng-show="importDatas"><span style="padding-right:60px;">拖拽名称标签放到右侧对应名称中</span> <span style="padding-right:182px;">导入后原场景数据不会删除</span> <a type="button" class="btn btn-grey0" ng-click="dataShow = \'message\'"><em>取消</em></a> <a type="button" class="btn btn-primary" ng-click="confirm()">导入</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/downApp.tpl.html",'<div class="login-form-section"><div class="login-content"><div class="section-title" style="margin-bottom:20px;"><a class="bbs-help-tip eqf-wrong fr" ng-click="$dismiss()"></a><h3>易企秀APP</h3></div><div class="down-code"><p qr-code="" qr-url="http://a.app.qq.com/o/simple.jsp?pkgname=cn.knet.eqxiu"></p><p style="padding-bottom:40px;padding-top:10px;">一键生成H5，随时随地查数据</p></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/main.tpl.html",'<div><div ng-include="\'header.tpl.html\'"></div><div id="main" class="min_contain"><div ng-include="\'sysmessage.tpl.html\'"></div><div class="entrance"><div class="same-content"><div class="info-title">开始创建</div><div class="info"><div class="scene-example" ng-show="!branchid"><a href="/scene/list/sample" data-event="2234"><span class="scene-btn"><em class="eqf-plus2"></em> 场景样例</span></a></div><div ng-show="user.type !== 1 && !branchid" class="create-button"><a href="/scene/list/fill" data-event="2235"><span class="scene-btn"><em class="eqf-plus2"></em> 填空样例</span></a> <span class="hot">hot</span></div><div class="create-button"><a href="/main/print/create" data-event="2236"><span class="scene-btn"><em class="eqf-plus2"></em> 广告印刷</span></a></div><div class="create-button"><a href="main/print/create" data-event="2237"><span class="scene-btn"><em class="eqf-plus2"></em> 线上营销</span></a></div><div class="create-button"><a href="https://wap.koudaitong.com/v2/feature/18vgikwd5?ps=760" target="_blank"><span class="scene-btn"><em class="eqf-plus2"></em> 场景定制</span></a> <span class="new">new</span></div><div class="create-button" target="_blank" ng-show="accessOrderTask"><a ng-href="order/new"><span class="scene-btn"><em class="eqf-plus2"></em> 推广任务</span></a></div><div class="create-button" ng-if="isPcEditor"><a ng-href="order/new/official" target="_blank"><span class="scene-btn"><em class="eqf-plus2"></em> 易企秀官方推广任务</span></a></div></div></div></div><div class="same-content"><div class="ad mt20" ng-init="showAd= true;" ng-show="showAd== true" style="position:relative;"><a style="position:absolute;right:0;z-index:11;top:0;font-size:12px;height:40px;width:40px;background-color:rgba(0,0,0,0.3);display:block;text-align:center;line-height:40px;" ng-click="showAd = false;" data-event="2206"><em class="eqf-wrong"></em></a><div slidesjs-con="" flux-slide="" paginav="false" width="1180" height="40"><div class="slides-content" ng-repeat="banner in banners" on-finish-render-filter=""><a target="_blank" href="{{banner.url}}" data-banner="2205" data-bid="{{banner.id}}"><img ng-src="{{banner.path}}" alt="{{banner.title}}" title="{{banner.title}}" width="1180px" height="40px"></a></div></div></div><div class="scene-type clearfix"><div class="search-tab"><div ng-if="user.type == 2 || user.type == 5 || (user.type == 21 && userPermit.indexOf(\',1405,\') >=0)" class="select-branch fl"><eqx-select class="select-contain select-sm" model="branchCurrent" change="selectBranch(branchCurrent)"><eqx-select-option value="null">当前账号</eqx-select-option><eqx-select-option value="branch" ng-repeat="branch in branches">{{branch.loginName}}</eqx-select-option></eqx-select></div><div class="search fl" ng-class="{hover:name}"><input type="text" maxlength="40" placeholder="请输入搜索内容" ng-model="name" ng-change="changeName(name)" ng-keypress="EnterPress(event,name)" ng-keydown="EnterPress(name)"> <span ng-if="searchButton" class="search-icon eqf-search" ng-click="submit(name)" data-event="2211"></span> <span ng-if="!searchButton" class="search-icon eqf-wrong" ng-click="clearSearch()"></span></div><div class="list-toggle" ng-click="listToggle()"><span ng-if="listType == false" class="hint--right hint--rounded" data-hint="橱窗展示" data-event="2212"><em class="eqf-top-background"></em></span> <span ng-if="listType == true" class="hint--right hint--rounded" data-hint="列表展示" data-event="2212"><em class="eqf-scene-list"></em></span></div></div><ul class="jiaoxue" style="width:500px;position: static;"><li class="pr20 myscenemmore" ng-class="{active:sceneList == currentGroup.activeName}" ng-mouseover="showGroud = true" ng-mouseleave="showGroud = false"><span ng-click="currentNameGroup(currentGroup.clickName,currentGroup.currentId)">{{currentGroup.currentName}} <em class="eqf-more"></em></span><ul class="jiaoxue scene-tag-grounp zoomIn-change" ng-if="groups.length > 0 && showGroud == true && switchChild" style="transform-origin: 0 0;"><li class="pr20" ng-class="{active:currentGroup.clickId === null}"><a ng-click="currentNameGroup()" data-event="2210">我的场景</a> <i></i></li><li class="pr20" ng-class="{active: currentGroup.clickId == group.id}" ng-repeat="group in groups"><a ng-click="currentNameGroup(group.groupName,group.id)" data-event="2210">{{group.groupName}}</a> <i></i></li><li style="padding-right:15px;" ng-class="{active: currentGroup.clickId === \'0\'}" ng-if="showWeiGroup"><a ng-click="currentNameGroup(\'\',0)" data-event="2210">未分组</a></li></ul><ul class="jiaoxue scene-tag-grounp zoomIn-change" ng-if="groups.length == 0 && showGroud == true && switchChild" style="transform-origin: 0 0;"><li>还没有分组,去管理分组创建吧!</li></ul></li><li ng-show="!manageGroupName && switchChild" ng-init="showcreate=false"><a ng-click="manageGroup();showcreate = !showcreate" class="hint--right hint--rounded manage-ground-setting" data-hint="管理分组">管理分组<em class="eqf-scene-settingII"></em></a></li><li ng-show="manageGroupName && switchChild"><a ng-click="manageGroup();showcreate=false" class="manage-ground-setting manage-ground-complete" data-event="2209">完成</a></li></ul><div class="grouddetail zoomIn-change" ng-if="showcreate" style="transform-origin: 0 0;"><ul class="jiaoxue addgroup"><li style="padding-right:15px;" ng-show="manageGroupName"><a ng-click="addGroup()" class="hint--right hint--rounded" data-hint="添加分组"><em class="eqf-plus" style="margin-right: 8px;"></em>添加分组</a></li></ul><ul class="jiaoxue editdelete" ng-if="groups.length > 0"><li class="pr20" ng-class="{active: sceneList == group.id}" ng-repeat="group in groups"><span class="bottomborder"><a ng-click="currentNameGroup(group.groupName,group.id)">{{group.groupName}}</a> <span ng-show="manageGroupName" class="hint--right hint--rounded" data-hint="编辑分组" style="margin-right:4px;"><em class="eqf-xiuziti" ng-click="editGroup(group.id,group.groupName)"></em></span> <span ng-show="manageGroupName" class="hint--right hint--rounded" data-hint="删除分组"><em class="eqf-wrong2" ng-click="deleteGroup(group.id,$index)"></em></span></span> <i></i></li><li style="padding-right:15px;" ng-class="{active: sceneList == 0}" ng-if="showWeiGroup"><div><a ng-click="currentNameGroup(\'\',0)">未分组</a></div></li></ul></div></div><div style="text-align:center;margin:50px 0;" ng-if="myScenes.length < 1"><h2 class="pb20">暂无场景<a href="/scene/list/sample" ng-if="!branchid" style="color:#08a1ef;font-size:14px;display:block;" class="pl20 pb20 pt20">创建场景</a></h2><img ng-src="{{CLIENT_CDN}}assets/images/notfound.svg"></div><div class="mask"><div ng-include="\'main/squareSceneList.tpl.html\'" ng-show="listType == true"></div><div ng-include="\'main/recSceneList.tpl.html\'" ng-show="listType == false"></div></div><div class="clearfix page-turn" ng-show="(sceneList != \'system\') && totalItems > 12"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="page.currentPage" ng-change="pageChanged(page.currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div></div><div ng-if="currentTpl.exemplarPreview ===true && sceneList == \'sample\'" preview-exemplar="" current-tpl="currentTpl" create-scene="createScene(tpl, \'isComp\');"></div><div ng-if="currentTpl.exemplarPreview ===true && sceneList != \'sample\'" preview-exemplar="" current-tpl="currentTpl" create-scene="createScene(tpl);"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/mobileTansform.tpl.html",'<div class="mobile"><div class="header"><a class="eqf-wrong fr" style="margin-top:25px;" ng-click="$dismiss()"></a>提示</div><div class="content clearfix"><img class="mobile-img fl" ng-src="{{CLIENT_CDN}}assets/images/phone.jpg"><div class="mobile-text pt20"><h2 class="mt20">一旦编辑它就变成电脑场景了</h2><p class="mt20">手机场景一旦编辑，就会变为电脑场景。<br>显示在APP中的电脑列表下（如左图）。<br>此后，就永远是电脑场景了，没有办法再变回来。<br>电脑场景的状态和编辑相对于手机更灵活，也会复杂，请谨慎操作。</p></div></div><div class="footer clearfix"><a class="submit" ng-click="$close()">继续</a> <a class="cancel btn-primary" ng-click="$dismiss()">取消</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/newVersionFrame.tpl.html",'<div class="login-form-section new-version"><div class="section-title"><a class="bbs-help-tip eqf-wrong fr" ng-click="cancel()" data-event="2204"></a><h3>更新说明</h3></div><div class="new-version-box"><h4>易企秀更新啦</h4><div class="new-version-content"><p>本次更新秀秀为您带来了：</p><ul class="new-version-list" ng-bind-html="versionInfo.content"></ul></div><div class="new-version-button" ng-click="cancel()" data-event="2203"><a class="green" ng-href="{{versionInfo.url}}" target="_blank">查看详情</a></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/recSceneList.tpl.html",'<ul class="rec-scene"><li ng-repeat="scene in myScenes" ng-init="sceneIndex = $index" class="mb20 clearfix tab-box-shadow animation-opacity" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="scene-img scene_contain" style="overflow:hidden" ng-hover="" resource="scene"><a ng-click="showDetail(scene.id)" style="display:block;"><div class="ribbon ribbon-badge" ng-if="scene.bizType !=30 && !scene.show && !scene.publishTime"><span class="ribbon-inner unpublish">未发布</span></div><div ng-if="scene.bizType !=30 && !scene.show && scene.publishTime && scene.updateTime > scene.publishTime" class="ribbon ribbon-badge"><span class="ribbon-inner new">有修改</span></div><div ng-if="!scene.show && scene.isExpedited == 1" class="ribbon ribbon-badge"><span class="ribbon-inner check">加急审核中</span></div><div ng-if="!scene.show && scene.status == -1" class="ribbon ribbon-badge"><span class="ribbon-inner check">未通过审核</span></div><div ng-if="!scene.show && scene.status == -2" class="ribbon ribbon-badge"><span class="ribbon-inner check">审核中</span></div><div ng-show="scene.bizType ==30" class="ribbon ribbon-badge" style="z-index:3"><span class="ribbon-inner new" style="background-color:#44cb83">手机场景</span></div><div class="f1-card"><div ng-show="!scene.show" class="front face" ng-style="getStyle(scene.cover)"></div><div ng-show="scene.show && scene.staticStatus !== 1" class="face front qrcode" qr-code="" qr-url="{{canvasUrl + \'/s/\' + scene.code}}" data-event="{{scene.bizType==30?2222:2213}}"></div><div ng-show="scene.show && scene.staticStatus === 1" class="face front qrcode" qr-code="" qr-url="{{canvasUrlStatic + \'s/\' + scene.code}}" data-event="{{scene.bizType==30?2222:2213}}"></div></div></a></div><div class="scene-data"><div class="scene-data-header"><div ng-show="manageGroupName" class="scene-group fr" ng-mouseover="moveGroup = true" ng-mouseleave="moveGroup = false"><a class="move">移动至<em class="eqf-clickmore" style="padding-left:5px;"></em></a><div class="group-list zoomIn-change clearfix" ng-show="moveGroup== true"><div eqd-scroll="" style="position:relative;overflow:hidden;max-height:150px;"><div><a class="ellipsis" ng-repeat="group in groups" ng-click="moreGroup(group.id,scene.id,sceneIndex)">{{group.groupName}}</a> <a ng-show="groups.length > 0" class="ellipsis" ng-click="moreGroup(0,scene.id,sceneIndex)">未分组</a> <a class="ellipsis" ng-click="addGroup(scene.id)"><em class="eqf-plus2" style="padding-right:5px;"></em>添加分组</a></div></div></div></div><div class="scene-info"><span class="item-title">{{scene.name}}</span><p class="item_title" ng-class="{\'scene-description\': scene.description}" ng-model="scene.description">{{scene.description?scene.description:("未添加场景描述")}}</p></div></div><div class="scene-data-footer clearfix"><div class="user-param"><a ng-click="showStatistics(scene.id);" class="background-color-width-change button" data-event="{{scene.bizType==30?2225:2216}}"><em class="eqf-eye" style="font-size:12px;"></em><span>{{scene.showCount | fixnum}}</span></a> <a class="background-color-width-change button" ng-show="scene.dataCount > 0" ng-click="showData(scene.id);"><em class="eqf-date" style="font-size:12px;"></em><span>{{scene.dataCount | fixnum}}</span></a></div><div class="user-operate-site set" role="menu" ng-if="!branchid"><a class="button background-color-width-change delete" ng-if="(user.type == 21 && userPermit.indexOf(\',1204,\') >= 0) || user.type != 21" ng-click="deleteScene($event,scene.id,scene.staticStatus)" data-event="{{scene.bizType==30?2227:2218}}"><em class="eqf-scene-delete"></em><span>删除</span></a> <a class="button background-color-width-change operation" ng-if="scene.bizType !=30 && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1203,\') >= 0) || user.type !=21)" ng-click="copyScene($event,scene.id)" data-event="2219"><em class="eqf-scene-copy"></em><span>复制</span></a> <a class="button background-color-width-change" ng-if="scene.bizType !=30 && isAllowedToAccessTransfer && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1205,\') >= 0) || user.type !=21)" ng-click="transferScene($event,scene.id,scene.staticStatus)" data-event="2220"><em class="eqf-scene-gift"></em><span>转送</span></a> <a class="button background-color-width-change sample" ng-if="scene.bizType !=30 && scene.isTpl == 3 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2" ng-click="clearCompanyTpl($event,scene.id,$index)"><em class="eqf-scene-company"></em><span>取消企业样例</span></a> <a class="button background-color-width-change sample" ng-if="scene.bizType !=30 && scene.isTpl == 0 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2" ng-click="creatCompanyTpl($event,scene.id,$index)"><em class="eqf-scene-company"></em><span>生成企业样例</span></a> <a class="button background-color-width-change operation" ng-if="scene.bizType !=30 && (!scene.publishTime || scene.updateTime > scene.publishTime) && scene.status != -1 && scene.status != -2" ng-click="publishScene($event,scene)"><em class="eqf-scene-send"></em><span>发布</span></a> <a class="button background-color-width-change" ng-click="sceneSettings($event,scene.id,scene)" data-event="{{scene.bizType==30?2228:2221}}"><em class="eqf-scene-setting"></em><span>设置</span></a> <a class="button background-color-width-change" ng-click="editScene($event,scene.id,scene)" data-event="{{scene.bizType==30?2223:2214}}"><em class="eqf-xiuziti"></em><span>编辑</span></a></div></div></div></li></ul>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/squareSceneList.tpl.html",'<ul class="square-scene clearfix" ng-show="sceneList != \'system\' && sceneList != \'sample\'"><li ng-repeat="scene in myScenes" ng-init="sceneIndex = $index" class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div ng-show="manageGroupName" class="scene-group" ng-mouseover="moveGroup = true" ng-mouseleave="moveGroup = false"><a class="move">移动至<em class="eqf-clickmore" style="padding-left:5px;"></em></a><div class="group-list zoomIn-change clearfix" ng-show="moveGroup == true"><div eqd-scroll="" style="position:relative;overflow:hidden;max-height:180px;"><div><a class="ellipsis" ng-repeat="group in groups" ng-click="moreGroup(group.id,scene.id,sceneIndex)">{{group.groupName}}</a> <a ng-show="groups.length > 0" class="ellipsis" ng-click="moreGroup(0,scene.id,sceneIndex)">未分组</a> <a class="ellipsis" ng-click="addGroup(scene.id)"><em class="eqf-plus2" style="padding-right:5px;"></em>添加分组</a></div></div></div></div><div class="ribbon ribbon-badge" ng-if="!scene.show && !scene.publishTime && scene.bizType !=30"><span class="ribbon-inner unpublish">未发布</span></div><div ng-show="scene.bizType ==30" class="ribbon ribbon-badge" style="z-index:3"><span class="ribbon-inner new" style="background-color:#44cb83;">手机场景</span></div><div ng-show="scene.bizType !=30 && !scene.show && scene.publishTime && scene.updateTime > scene.publishTime" class="ribbon ribbon-badge"><span class="ribbon-inner new">有修改</span> <span class="ribbon-inner new hint--bottom hint--rounded" data-hint="内容有修改，新修改未发布" style="transform: rotate(0deg);background:none;"></span></div><div ng-if="!scene.show && scene.isExpedited == 1 && scene.status == -2" class="ribbon ribbon-badge"><span class="ribbon-inner check">加急审核中</span></div><div ng-if="!scene.show && scene.isExpedited == 1 && scene.status == 1" class="ribbon ribbon-badge"><span class="ribbon-inner check">前置审核中</span></div><div ng-if="!scene.show && scene.status == -1" class="ribbon ribbon-badge"><span class="ribbon-inner check">未通过审核</span></div><div ng-if="!scene.show && scene.status == -2 && scene.isExpedited != 1" class="ribbon ribbon-badge"><span class="ribbon-inner check">审核中</span></div><div class="image"><div ng-if="!scene.show" class="front face" ng-style="getStyle(scene.cover)"></div><div ng-if="scene.show && scene.staticStatus !== 1" class="ercode" qr-code="" qr-url="{{canvasUrl + \'/s/\' + scene.code}}"></div><div ng-if="scene.show && scene.staticStatus ===1" class="ercode" qr-code="" qr-url="{{canvasUrlStatic + \'s/\' + scene.code}}"></div><div class="overlay" ng-show="!scene.show"><div class="edit"><a class="edit-same" ng-click="showDetail(scene.id)" data-event="{{scene.bizType==30?2222:2213}}"><em class="eqf-eye background-color-width-change" style="font-size:18px"></em> <span>预览</span></a> <a class="edit-same" ng-if="!branchid" ng-click="editScene($event,scene.id,scene)" data-event="{{scene.bizType==30?2223:2214}}"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>编辑</span></a> <a class="edit-same" ng-click="showDetail(scene.id)" data-event="{{scene.bizType==30?2224:2215}}"><em class="eqf-date background-color-width-change" style="font-size:18px;"></em> <span>详情</span></a></div><div class="sample" ng-if="scene.bizType !=30 && !branchid && scene.isTpl == 0 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2 && scene.bizType !=30"><a ng-click="creatCompanyTpl($event,scene.id,$index)">成为企业样例</a></div><div class="sample" ng-if="scene.bizType !=30 && scene.isTpl == 3 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2 && scene.bizType !=30"><a ng-click="clearCompanyTpl($event,scene.id,$index)">取消企业样例</a></div></div></div><div class="project-info"><p class="ellipsis">{{scene.name}}</p><a class="show-count" ng-click="showStatistics(scene.id);" data-event="{{scene.bizType==30?2225:2216}}"><em class="eqf-eye"></em>{{scene.showCount | fixnum}}</a> <a ng-click="showData(scene.id);" class="show-count" ng-if="scene.dataCount > 0"><em class="eqf-date"></em><span>{{scene.dataCount | fixnum}}</span></a><div class="buttons clearfix"><div class="set" ng-if="!branchid"><a class="delete background-color-width-change button" ng-if="(user.type == 21 && userPermit.indexOf(\',1204,\') >= 0) || user.type != 21" ng-click="deleteScene($event,scene.id,scene.staticStatus)" data-event="{{scene.bizType==30?2227:2218}}"><em class="eqf-scene-delete"></em><span>删除</span></a> <a ng-if="scene.bizType !=30 && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1203,\') >= 0) || user.type !=21)" ng-click="copyScene($event,scene.id)" class="button background-color-width-change operation" data-event="2219"><em class="eqf-scene-copy"></em><span>复制</span></a> <a class="button background-color-width-change" ng-if="scene.bizType !=30 && isAllowedToAccessTransfer && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1205,\') >= 0) || user.type !=21)" ng-click="transferScene($event,scene.id,scene.staticStatus)" data-event="2220"><em class="eqf-scene-gift"></em><span>转送</span></a> <a ng-if="scene.bizType !=30 && (!scene.publishTime || scene.updateTime > scene.publishTime) && scene.status != -1 && scene.status != -2" ng-click="publishScene($event,scene)" class="button background-color-width-change operation"><em class="eqf-scene-send"></em><span>发布</span></a> <a class="button background-color-width-change" ng-click="sceneSettings($event,scene.id,scene)" data-event="{{scene.bizType==30?2228:2221}}"><em class="eqf-scene-setting"></em><span>设置</span></a></div><a class="erweima button" ng-hover="" resource="scene" data-event="{{scene.bizType==30?2226:2217}}"><em class="eqf-QRcode"></em></a></div></div></li></ul><ul class="square-scene clearfix" ng-show="sceneList == \'system\' || sceneList == \'sample\'"><li ng-repeat="scene in myScenes track by $index" class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="ribbon ribbon-badge" ng-if="!!scene.price && sceneList == \'system\' && !scene.disCountFlag"><span class="ribbon-inner check">{{scene.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="!!scene.price && sceneList == \'system\' && scene.disCountFlag"><div class="discount-red discount-bg"><span class="discount-del">&nbsp{{scene.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{scene.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="sceneList == \'sample\' && !scene.price && !scene.disCountFlag"><span class="ribbon-inner isCompany">企业专属</span></div><div class="ribbon discount-detail" ng-if="sceneList == \'sample\' && scene.price && scene.disCountFlag"><div class="discount-bg"><span class="discount-del">&nbsp{{scene.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{scene.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="sceneList == \'sample\' && scene.price && !scene.disCountFlag"><span class="ribbon-inner isCompany">{{scene.price}}秀点</span></div><div class="image"><div ng-if="!scene.show" class="front face" ng-style="getStyle(scene.cover)"></div><div ng-if="scene.show" class="ercode" qr-code="" qr-url="{{canvasSampleUrl + \'/s/\' + scene.code}}"></div><div class="overlay" ng-show="!scene.show"><div class="edit"><a class="edit-same" target="_blank" ng-click="openPreview(scene);"><em class="eqf-eye background-color-width-change" style="font-size:18px"></em> <span>预览</span></a> <a ng-if="sceneList == \'sample\'" class="edit-same" ng-click="createScene(scene,\'isComp\')"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>就这个</span></a> <a ng-if="sceneList != \'sample\'" class="edit-same" ng-click="createScene(scene)"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>就这个</span></a></div></div></div><div class="project-info"><p class="ellipsis">{{scene.name}}</p><p class="ellipsis discount-overdue" ng-if="scene.disCountFlag">限时打折,距离活动结束还有{{scene.disCountTime}}天</p><div class="buttons clearfix"><div class="set sample-scene"><span class="scene-name">{{scene.userName}}</span></div><a class="erweima button" ng-hover="" resource="scene"><em class="eqf-QRcode"></em></a></div></div><div class="head-img"><img ng-if="scene.avatar" ng-src="{{scene.avatar}}"> <span ng-if="!scene.avatar" class="scene-headimg"><em class="eqf-top-contact"></em></span></div></li></ul>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/uploadData.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">上传数据</h4></div><div class="modal-body"><div class="upload-data">请下载“客户模板”并填写要上传的客户信息后，使用“上传数据”功能上传数据至客户列表中。</div></div><div class="modal-footer customer-upload-data"><a class="btn btn-primary" ng-href="{{PREFIX_FILE_HOST + \'客户模板.xls\'}}"><em class="eqf-down"></em>客户模板</a> <span class="btn btn-primary data"><span class="button"><em class="eqf-up"></em>上传数据</span> <input type="file" nv-file-select="" uploader="uploader" options="" accept="application/vnd.ms-excel"></span></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/userGuide.tpl.html",'<div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0; background: rgba(0,0,0,0.8);z-index:10000" ng-click="showGuide()" ng-show="firstLogin" ng-controller="userGuideCtrl"><div class="bind-email-guide"><h1><em>必读：帮您更好地使用易企秀：</em><span ng-click="showNextGuide()">&times;</span></h1><p>感谢您使用易企秀，为了更好的使用易企秀，您可以：</p><ul class="guide-describe"><li class="guide-list"><em>① 绑定邮箱，密码忘记时可取回密码</em><ul class="item"><li><a href="/usercenter/account" class="text-primary" target="_blank">立即验证</a></li></ul></li><li class="guide-list"><em>② 获得更多免费功能：申请企业帐号免费版</em><ul class="item"><li><a href="/privilege" class="text-primary" target="_blank">马上申请</a></li></ul></li><li class="guide-list"><em>③ 获得“去掉场景上的易企秀品牌标识”等增值服务</em><ul class="item"><li><a href="/privilege" class="text-primary" target="_blank">付费版会员帐号</a></li></ul></li></ul><div class="user-select"><span>不会使用易企秀？</span> <a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=72" class="text-primary" target="_blank">操作指南</a><p><input type="checkbox" style="margin: 4px; font-size:14px" ng-click="isShow()"><em>不再提示</em></p><button class="btn btn-primary" ng-click="showNextGuide()">知道了</button></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/orderTask.html",'<div ng-include="\'header.tpl.html\'"></div><div class="order-task same-content min_contain clearfix mb20"><div class="task-side-bar"><h3><em class="eqf-glyphicon-list"></em>订单管理</h3><span class="all-change" ng-class="{active: manageType === \'order\'}" ng-click="switchTag(\'order\')">推广任务订单</span> <span class="all-change" ng-class="{active: manageType === \'scene\'}" ng-click="switchTag(\'scene\')">场景推广订单</span><div class="text-border"></div><h3 class="tab-border"><em class="eqf-top-list"></em>任务管理</h3><span class="all-change tab-border" ng-class="{active: manageType === \'task\'}" ng-click="switchTag(\'task\')">我参与的任务</span><div class="text-border"></div></div><eqd-orders ng-if="manageType === \'order\'"></eqd-orders><eqd-scene ng-if="manageType === \'scene\'"></eqd-scene><eqd-task ng-if="manageType === \'task\'"></eqd-task></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("reg/agreement.tpl.html",'<div class="about"><div class="header"><a href="/main" class="pl20" id="logo"><img ng-src="{{logoSrc}}"></a></div><div class="main clearfix mt20"><div class="reg_xy_Box same-content p20"><h1>易企秀注册协议</h1><div class="reg_xy"><p>甲方：北京中网易企秀科技有限公司</p><p>乙方：“易企秀”的注册用户（以下简称用户或“您”）</p><p class="para">您确认：在您开始“易企秀”产品试用或购买前，您已充分阅读、理解并接受本协议的全部内容，一旦您开始使用本服务或完成购买流程，即表示您同意遵循本协议之所有约定。不具备前述条件的，您应立即终止注册或停止使用本服务。</p><p class="para">甲方有权随时对协议内容进行单方面的变更，并在eqxiu.com上公布，无需另行单独通知；若您在本协议内容公告变更后继续使用本服务，表示您已充分阅读、理解并接受修改后的协议内容，也将遵循修改后的协议内容使用本服务；若您不同意修改后的协议内容，您应停止使用本服务。您可以访问 http://www.eqxiu.com来了解最新版本的服务条款。</p><p></p><p>帐户注册及条款</p><p>1. 您保证具有法律规定的完全民事权利能力和民事行为能力，能够独立承担民事责任的自然人、法人或其他组织；本协议内容不会被您所属国家或地区的法律禁止。</p><p>2. 具体操作使用人应该是自然人。不允许采用注册机或者其他类似的自动化方式注册账户。</p><p>3. 当您注册时应当按网站要求填写您真实的信息及其他必要的信息以完成注册。</p><p>4. 您的登录信息只能用于一个人，不允许多人共享登录信息。</p><p>5. 您应当保护好自己的用户名及密码信息不被泄露。“易企秀”无法也不能保护因为您泄露用户名或密码导致的数据信息权益。</p><p>6. 同一个用户只能拥有一个免费账户。</p><p>7. 您应当对您的账户及所创建的内容负责，当您创建的不仅限于帐户、内容等数据，违反法律、法规及基本相关规则规定的，易企秀不承担相关法律责任。</p><p>8. 您不得恶意攻击“易企秀”服务器。</p><p>9. 您不得复制、转售或转授权任何部分或者全部的”易企秀”服务。</p><p>10. 甲方有权但并非义务关闭或删除以下内容：非法、歧视、恐吓、诽谤、色情、淫秽或者违反中国法律的。</p><p>11. 您不得以口头或者文字方式攻击（包括恐吓、报复等）甲方客户、员工、成员或本产品及服务的其他使用者。</p><p>12. 您不得上传或者发布垃圾邮件，短信，或上传计算机病毒程序或者恶意代码。</p><p>13. 如果您的账户流量恶意使用或明显超过平均用户带宽使用，我们保留停用您的账户的权利。</p><p>14. 您在本协议期间应遵守全部中国法律、法规和规章。</p><p>15. 如果甲方因乙方的任何触犯中国法律法规的行为或违反本协议的行为而承受任何损失或损害，乙方应该采取所有行动使甲方免于承担责任，并对由此产生的全部损失和损害承担赔偿责任。</p><p>16. 如果乙方存在任何触犯中国法律法规的行为或违反本协议的行为，甲方有权根据行为的严重性自行决定立即暂停或终止乙方对本服务的使用，甲方无须就服务暂停或终止对乙方承担任何责任，并且无须返还乙方已支付的费用。</p><p>付费相关条款</p><p>1. “易企秀”产品目前提供免费和付费产品供您使用，甲方有权依据市场需求调整或新推出付费产品、功能或服务。</p><p>2. 您有权自由选择决定是否使用“易企秀”中的付费产品、功能或服务。</p><p>产品服务条款</p><p>1. 甲方将以专业的方式提供产品及服务，但并不保证：1) 产品及服务满足您的所有需求或您的所有期待； 2) 产品及服务没有任何失误或缺陷，或产品及服务中的所有错误都会被修正。</p><p>2. 甲方保留不断修改调整这项服务的权利，而无需事先通知乙方。</p><p>知识产权条款</p><p>1. 您提交的各种内容版权归属于您。</p><p>2. 您应当了解并授权“易企秀”及“易企秀”许可的用户可以传播、二次编辑、分享您通过易企秀编辑生成的共享作品。</p><p>3. 甲方提供的服务及产品（包括但不限于观感、设计、图标、代码等）的版权、商标权、专利权及其他知识产权均归属于甲方。除非获得甲方明确书面允许，您不得复制、重用任何HTML/CSS, JavaScript或者任何视觉设计，也不得对甲方产品进行反向工程、分解或进行编译或其他修改。</p><p>4. 本协议中未明确授予您的权利将由甲方保留。</p><p>责任限制 在任何情况下，甲方均无须对任何间接性、后果性、惩戒性、偶然性、特殊性或刑罚性的损害(包括但不限于乙方因使用甲方服务而遭受的利润、收入损失、或预期的节约成本损失或商誉损失等）承担责任。甲方对乙方承担的全部责任总额，无论因何原因（基于合同法、侵权法或其他法规）或何种行为方式产生，始终不超过乙方在当月服务期内因使用甲方服务而已经支付给甲方的费用。</p><p>服务取消与终止条款</p><p>1. 您清楚的了解终止服务的后果。无需邮件或者电话确认，您可以在任何时候通过点击账户链接并执行相应操作来终止您的账户及删除相应的所有信息。</p><p>2. 一旦终止，所有隶属于这个账户的数据及信息将由甲方作删除处理，并且无法恢复。</p><p>3. 一旦终止账户，账户之下的用户将无法访问任何相关的服务。</p><p>其他条款</p><p>1. 您了解甲方使用第三方的运营商和网络提供商提供必要的硬件、软件、存储或网络来运行易企秀服务。甲方无需因为第三方的、或者不在甲方控制范围内的原因（如不可抗力）造成的运行问题（如服务中断、停顿、中止等）负责。</p><p>2. 如果本协议的某一条款或某一条款的一部分无效或不可执行，不影响本协议其他条款的有效性，无效或不可执行的条款将被视作已从本协议中删除。</p><p>3. 本协议受中华人民共和国法律管辖。 在执行本协议过程中如发生纠纷，双方应及时协商解决。协商不成时，任何一方均应向甲方所在地人民法院提起诉讼。</p><p>4. 若有任何疑问，请通过浏览http://www.eqxiu.com网站下方的联系方式与我们联系。</p></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("regSuccess/guide.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div class="reg-upgrade company" id="main"><h1 ng-if="type == \'company\' && !regSuccess" class="fill-mes">还差一步，就成为企业用户了！</h1><div class="clearfix company guide-layout" ng-if="type == \'company\' && !regSuccess"><div class="fl same-img"><img ng-src="{{CLIENT_CDN}}assets/images/reg-sus/conpany.svg" width="420px;" height="520px"></div><div class="fill-msg fl"><eqd-reg-company change-location="false"></eqd-reg-company></div></div><div class="reg-success guide-layout" ng-show="regSuccess || type == \'person\'"><h1 class="tips-suc"><em class="eqf-yes2 icon-big"></em>恭喜，注册成功</h1><div class="guide-list clearfix" ng-show="regSuccess"><div class="img"><img ng-src="{{CLIENT_CDN}}assets/images/reg-sus/phone.svg" alt=""></div><div class="guide-decoration"><h2>海量企业专属样例，供您选择</h2><h2 class="next-title">简单替换，立即生成炫酷场景</h2><a href="/scene/list/sample" class="submit-button">马上制作</a></div></div><div class="guide-list clearfix" ng-if="type == \'person\'"><div class="img"><img ng-src="{{CLIENT_CDN}}assets/images/reg-sus/phone.svg" alt=""></div><div class="guide-decoration"><h2>海量样例 轻松制作</h2><h2 class="next-title">一键分享 玩转朋友圈</h2><a href="/scene/list/sample" class="submit-button">马上制作</a></div></div><div class="guide-list clearfix" ng-if="type == \'person\'"><div class="img"><img ng-src="{{CLIENT_CDN}}assets/images/reg-sus/conpany2.svg" alt=""></div><div class="guide-decoration service"><h2>免费升级企业会员，体验更多优质服务</h2><p>企业专属样例免费用/精准营销渠道任意挑/推广数据+传播效果轻松查</p><a href="/privilege" class="submit-button">免费升级企业会员</a></div></div><div class="guide-list clearfix"><div class="img"><div class="mt20" qr-code="" qr-url="http://a.app.qq.com/o/simple.jsp?pkgname=cn.knet.eqxiu"></div></div><div class="guide-decoration sao-ma"><h2>扫码下载易企秀APP</h2><h2 class="next-title">轻松制作 随时分享</h2></div></div><div class="verson" ng-show="regSuccess"><em class="eqf-huangguan icon-big"></em><div class="verson-title"><h1 class="mb20">易企秀为企业准备了更多高级版本，快来升级体验吧！</h1><p>因为优秀，所以不同</p></div><ul class="verson-list clearfix"><li class="mr20 verson{{$index + 2}}" ng-repeat="ver in verson"><div class="verson-msg"><p>{{ver.name}}</p><p class="price">{{ver.price}}</p><p>{{ver.time}}</p></div><div class="decoration"><p ng-bind-html="ver.decoration"></p></div><a class="submit-button" ng-click="upgradeCompany(ver.type)">升级</a></li></ul></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("region/region.tpl.html",'<div id="region"><header class="text-center"></header><div class="same-content text-center pt90 pb90"><h1 class="text-color">市场需求</h1><p class="mt20">错过楼市，错过股市，错过电商，还要错过H5吗？！<br>全民低头玩手机的时代，H5在中国火到爆的现在，移动场景自营销管家横空出世！<br>移动互联网的快速发展、微信类社交产品用户的爆发式增长为企业营销提供了自我营销成长的土壤；企业对于自营销的视觉、交互和营销效果需求也发生了井喷式的增长，一款简单易用，便于管理的自营销工具恰恰成为企业刚需。易企秀0代码0设计+极速制作+多渠道推广，立即上手，分分钟搞定。</p></div><div class="area pt90 pb90"><h1 class="text-center same-content"><em>易企秀地位</em><span></span></h1><p class="text-center" style="margin-top:30px;">行业的领先地位，用户的好评口碑，易企秀在移动互联网的大潮中乘风破浪、大展身手，俨然取得了有目共睹的成绩和赞许。</p><ul class="item clearfix same-content pt20"><li><em>1</em><span></span>注册用户1000万。</li><li><em>4</em><span></span>《互联网周刊》2015年度APP排行榜：创新APP榜眼。</li><li><em>2</em><span></span>Alexa中国排名前1000名。</li><li><em>5</em><span></span>App store排行榜：稳居免费商业应用前十。</li><li><em>3</em><span></span>模板样例3000+，图片素材7000+，音乐素材400+，版权素材3000+。</li><li><em>6</em><span></span>获得千万美元级别A轮融资。</li></ul></div><div class="mt20 mb20"><div class="same-content request"><h1 class="text-color">易企秀合作伙伴资质要求</h1><p>市场广阔，品牌优秀，产品领先，易企秀邀您成为战略合作伙伴，合作发展，互利共赢。<br>（1） 注册资金100万以上，从事互联网产品经营3年以上，年营业额2000万以上。<br>（2） 拥有易企秀产品的专职销售人员30人以上。<br>（3） 具备一定的行业、区域人脉资源、客户资源，具有长期合作发展的前瞻意识，与易企秀共同成长<br>（4） 将易企秀产品列为主要经营项目，具有规范的公司管理制度。良好的经营信誉，无不良记录。</p></div></div><div class="product text-center"><img ng-src="{{CLIENT_CDN}}assets/images/area/area_06.png"></div><div class="support same-content text-center"><h1 class="text-center">销售支持</h1><ul class="clearfix teach"><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_10.png"><p>产品基础操作视频培训<br>不定期远程视频会议培训<br>行业及产品培训<br>销售交流分享会/精英集训<br>优秀服务商交流会</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_12.png"><p>公司介绍及产品宣传册<br>宣传海报/易拉宝/名片{电子模板）<br>公司装修标准指导手册<br>销售工具包/销售合同模板<br>授权服务商牌匾</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_14.png"><p>用户活动操作标准<br>活动执行步骤指导手册<br>秀客认证标准/证书模板<br>活动前期宣传支持<br>活动后期新媒体宣传</p></li></ul><ul class="clearfix jigou"><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_20.png"><p>协助推荐二级代理机构<br>成功销售模式推广</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_22.png"><p>5X8客服咨询<br>专属销售支持人员</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_24.png"><p>产品对接API开放<br>场景设计技术研讨</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_26.png"><p>销售目标指导/激励<br>销售行为规范</p></li></ul></div><div class="user text-center"><div class="same-content"><h1>易企秀用户</h1><p>他们都选择了易企秀</p><ul class="clearfix"><li><img ng-src="{{CLIENT_CDN}}assets/images/area/China Daily.png" width="145px" height="145px"><p>China Daily</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/china.png" width="145px" height="145px"><p>中国银行</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/shunfeng.png" width="145px" height="145px"><p>顺丰</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/wangyi.png" width="145px" height="145px"><p>网易</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/tengxun.png" width="145px" height="145px"><p>腾讯</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/baoma.png" width="145px" height="145px"><p>宝马</p></li></ul></div></div><div class="contact same-content text-center"><h1>联系方式</h1><p>来电垂询：010-56187707<br>有意者请下载申请书发送至sales@eqxiu.com<br>我们期待与您合作！</p><a class="btn btn-primary" target="_blank" ng-href="{{CLIENT_CDN}}download/shenqingshu.doc" download="易企秀服务商申请书">下载申请书</a></div><div id="activeTwo" style="padding-bottom:0;"><div class="backHome ng-scope"><a href="http://eqxiu.com" target="_blank"><span class="eqf-scene-company"></span> <span>官网首页</span></a></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/buySample.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">购买样例</h4></div><div class="dialog-contain pay-sample-content"><div class="dialog-content pay-XD" ng-if="!modal.bFlagMember"><p>当前选择消耗{{modal.tplPrice}}秀点，账户持有{{modal.userXd || 0}}秀点</p><p class="pay-XD-explain"><span>购买企业会员，尊享免费使用当前样例特权</span>，<span>点击</span><a target="_blank" href="/privilege">了解详情</a></p></div><div class="dialog-content pay-count" ng-if="modal.bFlagMember"><form name="resetForm" novalidate="" class="form-horizontal"><div class="pay-select"><ul class="pay-select-list"><li ng-init="modal.sampleType = 1"><div class="radio-square" ng-class="{checked:modal.sampleType == 1}"><em></em> <input type="radio" name="sampleType" id="XDCast" ng-model="modal.sampleType" value="1"></div><label for="XDCast">当前选择消耗1次,剩余免费使用次数{{modal.sampleCount || 0}}次</label></li><li><div class="radio-square" ng-class="{checked:modal.sampleType == 0}"><em></em> <input type="radio" id="donate" name="sampleType" ng-model="modal.sampleType" value="0"></div><label for="donate">当前选择消耗{{modal.tplPrice}}秀点,账户持有{{modal.userXd || 0}}秀点</label></li></ul></div></form></div></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()" ng-disabled="form.$invalid">取消</a> <a class="btn btn-primary" ng-click="confirm()" ng-disabled="form.$invalid">立即购买</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console.tpl.html",'<div><div ng-show="comp_type==\'bg\'" ng-include="\'scene/console/bg.tpl.html\'" ng-controller="BgConsoleCtrl"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/create.tpl.html",'<div id="psdLoading"><div class="loading-con"><img ng-src="{{CLIENT_CDN}}assets/images/puff.svg"><div id="psdUploadStatus" ng-show="psdUpload.total>0">{{psdUpload.currentNum}} / {{psdUpload.total}}</div><p>上传中，请稍后</p></div><div class="loading-bg"></div></div><div class="create-bg" style="position: fixed;top: 0;left: 0;right: 0;bottom: 0;background-color: #d0cfd8"></div><div class="creat_head" conver-to-image=""><div class="creat_head_con clearfix"><div class="creat_logo"><a href="/main" ng-click="stopCopy()"><em class="eqf-logo"></em></a></div><div class="creat_con clearfix"><ul class="comp_panel clearfix"><li comp-draggable="panel" ctype="2" class="comp-draggable text" ng-click="createComp(\'2\');" data-event="12002"><span class="eqf-text-word eqf-btn"></span> <span class="tip">文本</span></li><li comp-draggable="panel" ctype="3" class="comp-draggable bg" ng-click="createComp(\'3\');" data-event="12003"><span class="eqf-top-background eqf-btn"></span> <span class="tip">背景</span></li><li comp-draggable="panel" ctype="9" class="comp-draggable music" ng-click="createComp(\'9\');" data-event="12004"><span class="eqf-top-music eqf-btn"></span> <span class="tip">音乐</span></li><li comp-draggable="panel" ctype="v" class="comp-draggable vedio" ng-click="createComp(\'v\');" data-event="12005"><span class="eqf-top-video eqf-btn"></span> <span class="tip">视频</span></li><li comp-draggable="panel" ctype="4" class="comp-draggable image" ng-click="createComp(\'4\');" data-event="12006"><span class="eqf-top-pic eqf-btn"></span> <span class="tip">图片</span></li><li comp-draggable="panel" ctype="h" class="comp-draggable image" ng-click="createComp(\'h\');" data-event="12007"><span class="eqf-shape eqf-btn"></span> <span class="tip">形状</span></li><li comp-draggable="panel" ctype="p" class="comp-draggable images" ng-click="createComp(\'p\');" data-event="12008"><span class="eqf-top-pics eqf-btn"></span> <span class="tip">图集</span></li><li class="interaction hint--bottom hint--rounded"><span class="eqf-refresh eqf-btn"></span><div class="form-menus"><div class="popover bottom"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li comp-draggable="panel" ctype="l" class="menu-item comp-draggable button hint--right hint--rounded" data-hint="点击添加链接" ng-click="createComp(\'l\');" data-event="12009"><span class="eqf-link"></span> <span class="menu-item-name">链接</span></li><li comp-draggable="panel" ctype="g" class="menu-item comp-draggable button hint--right hint--rounded" data-hint="点击添加链接" ng-click="createComp(\'g\');" data-event="120045" ng-if="isTplEditor"><span class="eqf-link"></span> <span class="menu-item-name">广告</span></li><li comp-draggable="panel" ctype="8" class="menu-item comp-draggable phone hint--right hint--rounded" data-hint="点击添加电话" ng-click="createComp(\'8\');" data-event="12009"><span class="eqf-glyphicon-earphone"></span> <span class="menu-item-name">电话</span></li><li comp-draggable="panel" ctype="trigger" class="menu-item comp-draggable button hint--right hint--rounded" data-hint="点击添加触发" ng-click="openTriggerMode()" data-event="12009"><span class="eqf-chufa"></span> <span class="menu-item-name">触发</span></li><li comp-draggable="panel" ctype="m" class="menu-item comp-draggable button hint--right hint--rounded" data-hint="点击添加地图" ng-click="createComp(\'m\');" data-event="12009"><span class="eqf-map"></span> <span class="menu-item-name">地图</span></li><li comp-draggable="panel" ctype="s" class="menu-item comp-draggable button hint--right hint--rounded" data-hint="点击添加音效" ng-click="createComp(\'s\');" data-event="12009"><span class="eqf-music"></span> <span class="menu-item-name">音效</span></li><li class="menu-item"><span class="eqf-clock-o"></span> <span class="menu-item-name">计数</span> <span class="caret"></span><div class="menu-item-menu"><div class="popover right"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li comp-draggable="panel" ctype="i" class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint="点击添加计数器" font="eqf-love" ng-click="createComp(\'i\', \'eqf-love\');" data-event="12009"><span class="eqf-love"></span> <span class="menu-item-name">喜欢</span></li><li comp-draggable="panel" ctype="i" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加计数器" font="eqf-good" ng-click="createComp(\'i\', \'eqf-good\');" data-event="12009"><span class="eqf-good"></span> <span class="menu-item-name">顶起</span></li><li comp-draggable="panel" ctype="i" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加计数器" font="eqf-flower2" ng-click="createComp(\'i\', \'eqf-flower2\');" data-event="12009"><span class="eqf-flower2"></span> <span class="menu-item-name">送花</span></li><li comp-draggable="panel" ctype="i" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加计数器" font="eqf-vote" ng-click="createComp(\'i\', \'eqf-vote\');" data-event="12009"><span class="eqf-vote"></span> <span class="menu-item-name">投票</span></li></ul></div></div></div></li><li class="menu-item"><span class="eqf-date2"></span> <span class="menu-item-name">统计</span> <span class="caret"></span><div class="menu-item-menu"><div class="popover right"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li comp-draggable="panel" ctype="d" class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint="点击添加计数器" ng-click="createComp(\'d\', \'eqf-eye3\');" data-event="12009"><span class="eqf-eye3"></span> <span class="menu-item-name">阅读量</span></li></ul></div></div></div></li><li class="menu-item"><span style="font-size: 10px;" class="eqf-wechat"></span> <span class="menu-item-name">微信 <span style="position: absolute;top: 1px;transform: scale(0.8);color: red;">beta</span></span> <span style="margin-left: 1px;" class="caret"></span><div class="menu-item-menu"><div class="popover right"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li comp-draggable="panel" ctype="w" class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint="点击添加微信昵称和头像" ng-click="showFirstTimeTip(\'w\');hideHeartTip(\'wechatWTip\');" data-event="12009"><span class="eqf-top-contact"></span> <span class="menu-item-name">头像</span></li><li comp-draggable="panel" ctype="wp" class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint="点击添加微信图片" ng-click="showFirstTimeTip(\'wp\');hideHeartTip(\'wechatWTip\');" data-event="12009"><span class="eqf-top-pic"></span> <span class="menu-item-name">照片</span></li><li comp-draggable="panel" ctype="wr" class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint="点击添加微信音频组件" ng-click="showFirstTimeTip(\'wr\');hideHeartTip(\'wechatWTip\');" data-event="12009"><span class="eqf-voice"></span> <span class="menu-item-name">声音</span></li></ul></div></div></div></li></ul></div></div></div><em ng-if="wechatWTip" class="effect-tip heart ng-scope"></em> <span class="tip">互动</span></li><li class="form hint--bottom hint--rounded"><span class="eqf-top-list eqf-btn"></span><div class="form-menus"><div class="popover bottom"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li class="menu-item"><span class="eqf-glyphicon-list"></span> <span class="menu-item-name">快捷表单</span> <span class="caret"></span><div class="menu-item-menu"><div class="popover right"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li comp-draggable="panel" ctype="g101" class="menu-item comp-draggable contact hint--right hint--rounded" data-hint="点击添加联系人" ng-click="createCompGroup(\'g101\');" data-event="12010"><span class="eqf-top-contact"></span> <span class="menu-item-name">联系人</span></li></ul></div></div></div></li><li class="menu-item"><span class="eqf-option"></span> <span class="menu-item-name">选项</span> <span class="caret"></span><div class="menu-item-menu"><div class="popover right"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li comp-draggable="panel" ctype="5" class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint="点击添加输入框" ng-click="createComp(\'5\');" data-event="12010"><span class="eqf-write"></span> <span class="menu-item-name">输入框</span></li><li ng-if="isRadioCheckboxRatingAccessable" comp-draggable="panel" ctype="r" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加单选按钮" ng-click="createComp(\'r\');" data-event="12010"><span class="eqf-single"></span> <span class="menu-item-name">单选</span></li><li ng-if="isRadioCheckboxRatingAccessable" comp-draggable="panel" ctype="c" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加多选按钮" ng-click="createComp(\'c\');" data-event="12010"><span class="eqf-morechoice"></span> <span class="menu-item-name">多选</span></li><li ng-if="isRadioCheckboxRatingAccessable" comp-draggable="panel" ctype="c" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加多选按钮" ng-click="createComp(\'z\');" data-event="12010"><span class="eqf-select"></span> <span class="menu-item-name">下拉列表</span></li><li ng-if="isRadioCheckboxRatingAccessable" comp-draggable="panel" ctype="a" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加评分组件" ng-click="createComp(\'a\');" data-event="12010"><span class="eqf-star"></span> <span class="menu-item-name">评分</span></li></ul></div></div></div></li><li class="menu-item"><span class="eqf-chart"></span> <span class="menu-item-name">图表</span> <span class="caret"></span><div class="menu-item-menu"><div class="popover right"><div class="arrow"></div><div class="popover-content"><ul class="menus"><li comp-draggable="panel" ctype="t" class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint="点击添加饼状图" font="pie" ng-click="createComp(\'t\', \'pie\'); hideHeartTip(\'showAddFormTip\');" data-event="12010"><span class="eqf-pie"></span> <span class="menu-item-name">饼状图</span></li><li comp-draggable="panel" ctype="t" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加柱状图" font="bar" ng-click="createComp(\'t\', \'bar\'); hideHeartTip(\'showAddFormTip\');" data-event="12010"><span class="eqf-bar-chart"></span> <span class="menu-item-name">柱状图</span></li><li comp-draggable="panel" ctype="t" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加折线图" font="line" ng-click="createComp(\'t\', \'line\'); hideHeartTip(\'showAddFormTip\');" data-event="12010"><span class="eqf-line2"></span> <span class="menu-item-name">折线图</span></li><li comp-draggable="panel" ctype="t" class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint="点击添加曲面图" font="curve" ng-click="createComp(\'t\', \'curve\'); hideHeartTip(\'showAddFormTip\');" data-event="12010"><span class="eqf-circle-line"></span> <span class="menu-item-name">曲面图</span></li></ul></div></div></div></li><li comp-draggable="panel" ctype="b" class="menu-item comp-draggable button hint--right hint--rounded" data-hint="一个场景建议只添加一个" ng-click="createComp(\'b\'); hideHeartTip(\'showAddFormTip\');" data-event="12010"><span class="eqf-boards"></span> <span class="menu-item-name">留言板</span></li><li comp-draggable="panel" ctype="6" class="menu-item comp-draggable button hint--right hint--rounded" data-hint="一个场景建议只添加一个" ng-click="createComp(\'6\');" data-event="12010"><span class="eqf-top-button"></span> <span class="menu-item-name">提交按钮</span></li></ul></div></div></div><em ng-if="showAddFormTip" class="effect-tip heart ng-scope"></em> <span class="tip">表单</span></li><li ng-click="openPageEffectModal(tpl.obj.properties);showPage=true;hideEffTip()" class="comp-draggable images" data-event="12011"><span class="eqf-top-star eqf-btn"></span> <span class="tip">特效</span></li></ul></div><div style="position:absolute;top:16px;right:200px;color:#FFFFFF;" ng-if="isScenesaving.status"><span>{{isScenesaving.value}}</span></div><div class="create-action"><ul><li class="act-border setting gray-dark all-change" ng-click="openSetting()" data-event="12012"><span class="tip">设置</span></li><li class="act-border save gray-dark all-change" ng-click="saveScene(true)" data-event="12013"><span class="tip">保存</span></li><li class="publish gray-dark all-change" ng-click="publishScene()" data-event="12014"><span class="tip">发布</span></li><li class="act-border quit out-red" ng-click="exitScene()" data-event="12015"><span class="tip">退出</span></li></ul></div><div ng-hide="showToolBar();"><div ng-show="isEditor" style="position:absolute;right:290px;top:15px;"><select ng-model="scene.isTpl"><option value="0">非模板</option><option value="1">保存为pc模板</option><option value="2">保存为移动端模板</option></select></div></div></div></div><div class="create_scene"><div class="main clearfix" mouse-comp-select=""><div class="content"><div class="create_left" conver-to-image=""><div style="position: absolute;z-index: 100;width: 288px;"><ul class="nav nav-tabs"><li ng-class="{active:tabid==\'template\'}"><a ng-click="setTplTab(\'template\')" class="all-change" data-event="12016">模板中心</a></li><li ng-class="{active:tabid==\'TotalmyCollection\'}"><a ng-click="setTplTab(\'TotalmyCollection\')" class="all-change" data-event="12017">我的模板</a></li><li ng-class="{active:tabid==\'showTpl\'}" ng-if="userProperty.type==99"><a ng-click="setTplTab(\'showTpl\')" class="all-change" data-event="12016">我的任务</a></li></ul><div class="tab-panel tag-tpl-tab" ng-show="tabid==\'showTpl\'" style="height:50px;padding-top:10px;margin-top:0;"><ul class="nav nav-tabs"><li ng-class="{active:tagTplTab==\'myTask\'}"><a ng-click="setTagTplTab(\'myTask\');getShowMyTask(3, 1, 21);" class="all-change">我的任务</a></li><li ng-class="{active:tagTplTab==\'allTask\'}"><a ng-click="setTagTplTab(\'allTask\');getShowAllTask(3,1,21);" class="all-change">所有任务</a></li></ul></div></div><div class="tab-panel tag-tpl-tab" ng-show="tabid==\'TotalmyCollection\'" style="height:50px;padding-top:10px;margin-top: 38px;"><ul class="nav nav-tabs"><li ng-class="{active:tagTplTab==\'myCollection\'}"><a ng-click="setTagTplTab(\'myCollection\');getPageTplsByMyType();" class="all-change" data-event="12017">我的模板</a></li><li ng-class="{active:tagTplTab==\'recentlyUsed\'}"><a ng-click="setTagTplTab(\'recentlyUsed\');getRecentlyUsedTpls();" class="all-change" data-event="12018">最近使用</a></li><li ng-class="{active:tagTplTab==\'company\'}"><a ng-click="setTagTplTab(\'company\');getPageTplsByCompanyType();" ng-show="userProperty.type ==2 || userProperty.type ==21 || userProperty.type ==5 || userProperty.type ==51" class="all-change">企业模板</a> <a ng-show="userProperty.type ==1" class="all-change" ng-click="tagTplTab=\'company\'">企业模板</a></li></ul></div><div class="tab-panel" style="height:100%;" ng-show="tabid==\'template\'"><div class="sel-contain all-change" style="left:10px;"><eqx-select class="select-great" model="pageTpl.format" change="getPageTpls()"><eqx-select-option value="null">用途</eqx-select-option><eqx-select-option value="type.id" ng-repeat="type in tplFormatList">{{type.name}}</eqx-select-option></eqx-select></div><div class="sel-contain all-change" style="left:103px;"><eqx-select class="select-great" model="pageTpl.style" change="getPageTpls()"><eqx-select-option value="null">功能</eqx-select-option><eqx-select-option value="type.id" ng-repeat="type in tplStyleList">{{type.name}}</eqx-select-option></eqx-select></div><div class="sel-contain all-change" style="left:196px;"><eqx-select class="select-great" model="pageTpl.interaction" change="getPageTpls()"><eqx-select-option value="null">风格</eqx-select-option><eqx-select-option value="type.id" ng-repeat="type in tplInteractionList">{{type.name}}</eqx-select-option></eqx-select></div><div ng-if="pageTpl.showColorPanel" ng-change="getPageTpls()" ng-click="$event.stopPropagation()" ng-model="pageTpl.color" page-tpl-color="" class="page-color-panel zoomIn-change"></div><div style="left:10px;top:50px;position:absolute;"><input class="search" placeholder="输入名称搜索模板" ng-keypress="enterPress($event)" type="text" ng-model="pageTpl.name"><span ng-if="showSearch" class="eqf-search search-icon" ng-click="getPageTpls()"></span> <span ng-if="!showSearch" class="eqf-wrong search-icon" ng-click="resetTplFilter()"></span></div><div class="page_tpl_container clearfix"><div eqd-scroll="" style="height: 100%;" refresh="refreshTpl()"><ul class="tpl-container"><li class="page_tpl_item comp-draggable animation-zoom ng-scope" ng-repeat="pageTpl in pageTpls track by $index" ng-click="insertPageTpl(pageTpl.id);" ng-style="{\'animation-delay\': $index%42 * 50 + \'ms\'}" tooltip-placement="right" tooltip="{{pageTpl.name}}"><img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src="assets/images/create/pic.svg" load-err=""> <span class="bFlag_longPage" ng-if="pageTpl.properties.longPage">长<i>{{pageTpl.properties.longPage}}</i></span></li></ul></div></div></div><div class="tab-panel" ng-show="tagTplTab==\'myCollection\'" style="height:100%;padding-top:10px;margin-top: 0;"><div class="empty-collection" ng-if="!myPageTpls || myPageTpls.length==0"><p class="pb20">暂无模板</p><img ng-src="{{CLIENT_CDN}}assets/images/create/collection.svg"></div><div eqd-scroll="" style="height: 100%;" ng-if="myPageTpls && myPageTpls.length!=0"><ul class="page_tpl_container clearfix" style="position:relative;top:0;"><li thumb-tpl="" my-tpl="pageTpl" hide-del-btn="hideDelBtn" un-transform="unTransform" class="nr page_tpl_item comp-draggable my-tpl animation-zoom" ng-repeat="pageTpl in myPageTpls" title="点击使用" id="my-tpl" ng-click="insertPageTpl(pageTpl.id);" ng-style="{\'animation-delay\': $index * 50 + \'ms\'}"></li></ul></div></div><div class="tab-panel" ng-show="tagTplTab==\'allTask\'" style="height:100%;padding-top:10px;"><div class="empty-collection" ng-if="!showAllLists || showAllLists.length==0"><p class="pb20">暂无任务</p><img ng-src="{{CLIENT_CDN}}assets/images/create/collection.svg"></div><div eqd-scroll="" style="height: 100%;" ng-if="showAllLists && showAllLists.length!=0" class="scroll_showTp" refresh="refreshTotalShow()"><ul class="page_tpl_container clearfix" style="top:0;position:relative;margin-bottom:200px;"><li thumb-tpl="" my-tpl="showAllList.scenePages[0]" hide-del-btn="hideDelBtn" show-tpl="showAllList" style="position: relative;" id="company-tpl" class="nr page_tpl_item comp-draggable my-tpl animation-zoom XB-all" ng-repeat="showAllList in showAllLists" ng-style="{\'animation-delay\': $index * 50 + \'ms\'}" ng-click="showAllDetail(showAllList.id);" ng-if="showAllList.status===3"></li></ul></div></div><div class="tab-panel" ng-show="tagTplTab==\'myTask\'" style="height:100%;padding-top:10px;margin-top: 88px;"><div class="empty-collection" ng-if="!showMyLists || showMyLists.length==0"><p class="pb20">暂无任务</p><img ng-src="{{CLIENT_CDN}}assets/images/create/collection.svg"></div><div eqd-scroll="" style="height: calc(100% - 76px);" ng-if="showMyLists && showMyLists.length!=0" refresh="refreshMyShow()"><ul class="page_tpl_container clearfix" style="top:0;position:relative;"><li thumb-tpl="" my-tpl="showMyList.scenePages[0]" show-tpl="showMyList" hide-del-btn="hideDelBtn" style="position: relative;" id="company-tpl" class="nr page_tpl_item comp-draggable my-tpl animation-zoom" ng-repeat="showMyList in showMyLists" ng-style="{\'animation-delay\': $index * 50 + \'ms\'}" ng-click="insertPageTpl(showMyList.scenePages[0].id, \'isXB\', showMyList.taskId, showMyList.id, showMyList.scenePages[0].sceneId);"></li></ul></div></div><div class="tab-panel" style="height:100%;padding-top:10px;margin-top: 0;" ng-show="tagTplTab==\'recentlyUsed\'"><div ng-if="!myRecentlyTpls" class="empty-recent"></div><div eqd-scroll="" style="height: 100%;" ng-if="myRecentlyTpls"><ul class="page_tpl_container clearfix" style="position:relative;top:0;"><li class="nr page_tpl_item comp-draggable animation-zoom" ng-repeat="pageTpl in myRecentlyTpls track by $index" ng-style="{\'animation-delay\': $index * 50 + \'ms\'}" ng-click="insertPageTpl(pageTpl.id);"><img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src="assets/images/create/pic.svg" load-err=""> <span class="bFlag_longPage" ng-if="pageTpl.properties.longPage">长<i>{{pageTpl.properties.longPage}}</i></span></li></ul></div></div><div class="tab-panel" style="height:100%;padding-top:10px;margin-top: 0;" ng-show="tagTplTab==\'company\'" ng-if="userProperty.type ==1"><div class="empty-collection"><div class="pb20 pl20 pr20"><a class="text-primary" target="_blank" href="/privilege">免费升级</a>企业会员尊享该功能</div><img ng-src="{{CLIENT_CDN}}assets/images/create/collection.svg"></div></div><div class="tab-panel" style="height:100%;padding-top:10px;margin-top: 0;" ng-show="tagTplTab==\'company\'" ng-if="userProperty.type ==2 || userProperty.type ==21 || userProperty.type ==5 || userProperty.type ==51"><div eqd-scroll="" ng-if="myCompanyTpls && myCompanyTpls.length>0" style="height: 100%;"><ul class="page_tpl_container clearfix" style="top:0;position:relative;"><li thumb-tpl="" my-tpl="pageTpl" style="position: relative;" id="company-tpl" class="nr page_tpl_item comp-draggable my-tpl animation-zoom" ng-repeat="pageTpl in myCompanyTpls" ng-style="{\'animation-delay\': $index * 50 + \'ms\'}" ng-click="insertPageTpl(pageTpl.id);"></li></ul></div></div></div><div class="workspace" style="overflow: auto;" page-scroll="" page-h="{{pageLength}}" comp-droppable="" ng-class="{\'auto-flow\':pageLength!=1}"><div class="scaleTips">100%</div><div style="transform-origin: 0 0;" edit-workspace="" scale="{{scale}}"><div class="container" multi-comp-drag=""><div edit-common="" edit-keymap=""><div class="nr sortable" ng-style="{\'true\': {\'top\':0}, false: {}}[isLong]" id="nr" element-anim="" paste-element=""></div><div ng-if="showPhone" class="phone"><h4 class="name">{{scene.name}}</h4></div><div ng-class="{box1:pageLength==1,box2:pageLength==2,box3:pageLength==3,box4:pageLength==4,box5:pageLength==5}" class="box" outer-box="" page-h="{{pageLength}}"><div class="internal-box"></div></div><div class="history" ng-class="{history2:showPhone}" ng-show="!isXB"><a data-hint="撤消(ctrl+z)" ng-class="{active: canBack}" class="hint--right hint--rounded" ng-click="back()" data-event="12027"><i class="eqf-bg" style="font-size:12px;"></i></a> <a data-hint="恢复(ctrl+y)" ng-class="{active: canForward}" class="hint--right hint--rounded" ng-click="forward()" data-event="12028"><i class="eqf-back" style="font-size:12px;"></i></a> <a data-hint="刷新预览" class="active hint--right hint--rounded" ng-click="refreshPage(tpl.obj, pageNum, $event)" data-event="12029"><i class="eqf-play2"></i></a> <a data-hint="复制当前页" style="margin-bottom:1px;" class="active hint--right hint--rounded" ng-click="duplicatePage()" data-event="12030"><i class="eqf-scene-copy"></i></a> <a data-hint="背景" ng-click="closeOtherPanel(\'showBackgroundPanel\');openBgPanel();" close-panel="" model="showBackgroundPanel" pause="{{!controlView.showBgTag}}" class="hint--right hint--rounded" ng-class="{active:controlView.showBgTag}" data-event="12031"><i class="eqf-top-background" style="font-size:13px;"></i></a> <a data-hint="音乐" close-panel="" model="showMusicPanel" pause="{{!scene.bgAudio}}" class="hint--right hint--rounded" ng-click="openAudioPanel();closeOtherPanel(\'showMusicPanel\');" ng-class="{active:scene.bgAudio}" data-event="12032"><i class="eqf-top-music"></i></a> <a data-hint="特效" close-panel="" model="showEffectsPanel" pause="{{!(tpl.obj.properties.scratch || tpl.obj.properties.finger || tpl.obj.properties.fallingObject || tpl.obj.properties.effect)}}" class="hint--right hint--rounded" style="margin-bottom:1px;" ng-click="openEffects();closeOtherPanel(\'showEffectsPanel\');" ng-class="{active:(tpl.obj.properties.scratch || tpl.obj.properties.finger || tpl.obj.properties.fallingObject || tpl.obj.properties.effect)}" data-event="12033"><i class="eqf-top-star" style="font-size:16px;"></i></a> <a data-hint="网格设置" class="hint--right hint--rounded grid-guide" ng-click="$event.stopPropagation();closeOtherPanel(\'gridGuideSetting.showFlag\');" ng-class="{active: (gridGuideSetting.showFlag || gridGuideSetting.isGridEnabled)}" data-event="12034"><i class="eqf-wangge" style="font-size:13px;"></i></a> <a data-hint="编辑区域缩放" ng-show="userScale" ng-click="closeOtherPanel(\'showZoomPanel\');hideHeartTip(\'scaleTip\');" close-panel="" pause="false" model="showZoomPanel" class="hint--right hint--rounded active"><em class="imp heart" ng-if="scaleTip"></em> <i class="eqf-search" style="font-size:15px;"></i></a> <a data-hint="手机边框" class="hint--right hint--rounded" ng-click="switchPhone(isLong)" ng-class="{active: showPhone}" data-event="12035"><em class="imp heart" ng-if="showPhoneTip"></em> <i class="eqf-phone" style="font-size:15px;"></i></a><div data-hint="psd文件上传" class="hint--right hint--rounded psdUploadButton" ng-if="isPsdUploadAccessable"><div psd-upload="psdUpload"></div></div><a id="warn" data-hint="警告" class="hint--right hint--rounded" style="display:none;"><i class="eqf-exclamation-sign"></i></a><div class="grid-guide-container" ng-click="$event.stopPropagation();" ng-class="{\'on\': gridGuideSetting.showFlag}" grid-guide-setting=""></div><div ng-controller="editBgCtrl" ng-include="\'scene/edit/editbg/editbg.tpl.html\'"></div><div class="effects-container" ng-class="{\'on\':showEffectsPanel}"><div class="effects-panel"><div class="setting-group" ng-click="openPageEffectModal(tpl.obj.properties)" data-event="12033"><div class="setting-btn"><span class="eqf-refresh"></span></div><span>更换</span></div><div class="setting-group" ng-click="removeScratch($event);showEffectsPanel=false;" data-event="12033"><div class="setting-btn"><span class="eqf-scene-delete"></span></div><span>删除</span></div></div></div><div class="music-container" ng-class="{\'on\':showMusicPanel}"><div class="music-panel"><div class="setting-group" ng-click="openAudioModal()" data-event="12032"><span>更换</span><div class="setting-btn"><span class="eqf-refresh" ng-click="openPageEffectModal(tpl.obj.properties)"></span></div></div><div class="setting-group" ng-click="removeAudio($event);showMusicPanel=false;" data-event="12032"><span>删除</span><div class="setting-btn"><span class="eqf-scene-delete"></span></div></div></div></div><div class="zoom-container" ng-class="{\'on\':showZoomPanel}"><div class="zoom-panel"><a ng-click="zoom(true)"><i class="eqf-bigger"></i></a> <a ng-click="zoom(false)"><i class="eqf-small"></i></a> <a ng-click="recovery()">默认</a></div></div></div></div></div></div></div><div id="containment" class="create_right" ng-init="pagetab=\'page\'" conver-to-image=""><ul class="nav nav-tabs" ng-show="isCompMange"><li ng-class="{active:pagetab==\'page\'}"><a ng-click="pagetab=\'page\'">页面模板</a></li><li ng-class="{active:pagetab==\'comp\'}"><a ng-click="pagetab=\'comp\'">组件管理</a></li></ul><div class="nav_top" ng-show="pagetab==\'page\'" ng-style="{true:{\'background-color\':\'#f0f3f4\'},false:{}}[isCompMange]"><div class="nav_top_list"><div class="save_template" ng-include="\'scene/saveTemplate.tpl.html\'" ng-controller="saveTemplateCtrl"></div></div></div><div class="nav_content" ng-style="{true: {\'top\':\'78px\'}, false: {}}[isCompMange]" ng-show="pagetab==\'page\'"><div eqd-scroll="" style="height: 100%;" prevent-exception="true" disable-mouse="true"><ul class="page-uls" id="pageList" ui-sortable="sortableOptions" ng-model="pages"><li class="blurClass" ng-repeat="page in pages track by $index" ng-click="navTo(page, $index, $event);" ng-init="setEditableStatus($index,false)" ng-class="{current: pageNum-1 == $index,createLongPage:page.properties.longPage}" blur-children=""><span class="number"><em>{{$index+1}}</em></span> <span class="page-name" ng-click="pageNum-1 == $index?setEditableStatus($index,true,$event):return;" ng-show="!editableStatus[$index]">{{page.name}}</span> <input style="width: 110px;display:inline-block; height: 25px; line-height: 25px; color: #999;margin-top:22px;margin-left:2px;box-shadow:none;" type="text" ng-model="page.name" ng-show="editableStatus[$index]" ng-blur="setEditableStatus($index,false);savePageNames(page, $index)" ng-focus="getOriginPageName(page)" check-count="30" custom-focus="" stop-propagation=""></li></ul></div><div class="page-list-label" ng-show="isTplEditor && controlView.pageList == true" panel-draggable=""><div ng-include="\'scene/page/page-tpl.tpl.html\'" ng-controller="PageTplController"></div></div><div class="tpl-option"></div></div><div class="nav_content" ng-if="pagetab==\'comp\'" ng-include="\'scene/edit/workspace/compsManage.tpl.html\'" ng-controller="CompsManageCtrl"></div><div class="nav_bottom"><a class="eqf-more" close-panel="" model="showPage" pause="false" ng-click="showPage=true;hidePageTip();"><em class="imp heart" ng-if="showAddPageTip"></em></a> <a ng-click="longAction()" class="insert hint--top hint--rounded fade-color" data-hint="添加一页" data-event="12022">+</a><div ng-show="showPage"><ul><li ng-click="insertPage();showPage=false;" data-event="12022">新建页面</li><li ng-click="addLongPage()" data-event="12023">新建纵向长页面</li></ul></div></div><div ng-show="isTplEditor" style="position: absolute;bottom: 20px;right: 268px;width: 100px;"><div class="btn-main" style="width: 100px;" ng-click="chooseThumb()">选择本页缩略图</div><img width="100" ng-src="{{PREFIX_FILE_HOST + tpl.obj.properties.thumbSrc}}"></div></div><div ng-include="\'scene/edit/select/select.tpl.html\'" ng-controller="selectCtrl" ng-if="!isXB"></div></div></div><div ng-class="{showin:showHeadTip}" class="showxiu"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="showHeadTip=false;"><span aria-hidden="true">×</span></button><h4 class="modal-title">头像</h4></div><div class="modal-body"><p style="line-height: 30px;">可轻松显示浏览者或分享者的微信昵称和头像（属性栏中选择）。仅在微信中浏览时有效，非微信环境浏览时，将显示默认文字和图片（双击设置默认内容）</p></div><div class="modal-footer"><input type="checkbox" style="margin-top:0;margin-right:5px;" ng-model="hideHeadTip" ng-change="switchShowFontTip(hideHeadTip,\'w\')"><span style="margin-right:10px;">不再提示</span> <a type="button" class="btn btn-primary" ng-click="createComp(\'w\');showHeadTip=false;">确定</a></div></div><div ng-class="{showin:showImageTip}" class="showxiu"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="showImageTip=false;"><span aria-hidden="true">×</span></button><h4 class="modal-title">照片</h4></div><div class="modal-body"><p style="line-height: 30px;">在微信中浏览时，轻触图片即可更换图片，更换后再分享，朋友就能看到您的美图。赶快试一试，同一场景，不同人分享，图片内容可以完全不一样哟！！仅在微信中浏览时有效，分享后的图片可在微信中保留三天，三天将会显示您的默认图片；非微信环境浏览时，将显示默认图片（双击设置默认内容）。</p></div><div class="modal-footer"><input type="checkbox" style="margin-top:0;margin-right:5px;" ng-model="hideImageTip" ng-change="switchShowFontTip(hideImageTip,\'wp\')"><span style="margin-right:10px;">不再提示</span> <a type="button" class="btn btn-primary" ng-click="createComp(\'wp\');showImageTip=false;">确定</a></div></div><div ng-class="{showin:showVoiceTip}" class="showxiu"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="showVoiceTip=false;"><span aria-hidden="true">×</span></button><h4 class="modal-title">声音</h4></div><div class="modal-body"><p style="line-height: 30px;">在微信中浏览时，点击组件可听声音。长按“按住说话”即可录制声音，更换后再分享，朋友就能听到您的声音。赶快试一试，同一场景，不同人分享，声音内容可以完全不一样哟！！仅在微信中浏览时有效，分享后的声音可在微信中保留三天，三天将会播放默认声音；非微信环境浏览时，将播放默认声音。</p></div><div class="modal-footer"><input type="checkbox" style="margin-top:0;margin-right:5px;" ng-model="hideVoiceTip" ng-change="switchShowFontTip(hideVoiceTip,\'wr\')"><span style="margin-right:10px;">不再提示</span> <a type="button" class="btn btn-primary" ng-click="createComp(\'wr\');showVoiceTip=false;">确定</a></div></div><div ng-class="{showin:addLong}" class="showxiu"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="addLong=false;"><span aria-hidden="true">×</span></button><h4 class="modal-title">长页面</h4></div><div class="modal-body"><p style="line-height: 30px;">新增超长单页，可通过右下角“<span class="eqf-more"></span>”按钮创建</p></div><div class="modal-footer"><input type="checkbox" style="margin-top:0;margin-right:5px;" ng-model="hideLong" ng-change="switchShowFontTip(hideLong,\'long\')"><span style="margin-right:10px;">不再提示</span> <a type="button" class="btn btn-primary" ng-click="insertPage();addLong=false;">确定</a></div></div><div class="scene-setting" ng-if="sceneSetting.showFlag" scene-setting-component=""></div></div><div class="creat-feedback"><div class="video-user" style="position:relative;bottom:23px;"><a target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=278" data-event="12024"><span class="eqf-top-video"></span> <span>教程</span></a> <a target="_blank" ng-click="customerService()" data-event="12025"><span class="eqf-top-contact"></span> <span>客服</span></a></div><div class="feedback" style="position:relative;"><a ng-href="http://eqxiu.com/s/QblumX2x" target="_blank" style="padding-top:6px;" data-event="12026"><span class="eqf-scene-send"></span> <span class="feedback-word">反馈</span></a><div class="feedback-bg"></div></div></div><div ng-class="{showin:psdUpload.showPsdWarn}" class="showxiu"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="psdUpload.showPsdWarn=false;"><span aria-hidden="true">×</span></button><h4 class="modal-title">PSD上传</h4></div><div class="modal-body"><p style="line-height: 30px;">1. 建议上传单页PSD尺寸为640*1008px。<br>2. 为保证上传速度，PSD文件大小不超过30M，图层不能超过30个，且每个图层不能够超过5M。<br>3. 为保证图片质量，建议上传前尽量将效果合并至图层中。</p></div><div class="modal-footer"><a type="button" class="btn btn-primary" ng-click="psdUpload.openPsdFileChooseBox();">确定</a></div></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/createNew.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">新建场景 <span class="action" ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain"><div class="dialog-content" style="margin-top:40px;"><form name="resetForm" novalidate="" class="form-horizontal"><div class="form-group"><label class="text-right col-sm-2" style="padding-top:10px;margin-left:80px;">选择分类：</label><div class="col-sm-6"><eqx-select class="select-contain select-great border-width" model="scene.type" change="selectBranch(global.branch)"><eqx-select-option value="scenetype" ng-repeat="scenetype in scene.types">{{scenetype.name}}</eqx-select-option></eqx-select></div></div><div class="form-list" ng-show="false"><select ng-model="scene.pageMode" ng-options="pagemode.name for pagemode in pagemodes"></select></div><p style="font-size:12px;text-align:center;margin-bottom:20px;margin-top:20px;"><em style="color:red;">注意：</em><span>禁止发布有奖转发、诱导关注、医药、色情、不良风气等场景，查看</span>，<span>详情</span><a target="_blank" style="color:red" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=890&extra=">审核规则</a></p></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()" ng-disabled="form.$invalid">取消</a> <a class="btn btn-primary" ng-click="create()" ng-disabled="form.$invalid">创建</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/newLongPage.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">选择页面长度</h4></div><div class="dialog-contain"><div class="dialog-content" style="margin-top:40px;margin-bottom:40px;"><form name="resetForm" novalidate="" class="form-horizontal"><div class="form-group"><label class="text-right col-sm-2" style="padding-top:10px;margin-left:80px;">页面长度：</label><div class="col-sm-6"><eqx-select class="select-great select-great border-width" model="newPageLength" change="changePageLength(newPageLength)"><eqx-select-option value="len.value" ng-repeat="len in pageLengths">{{len.name}}</eqx-select-option></eqx-select></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="create()">确定</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/preview.tpl.html",'<div id="audio_btn"><audio id="media"></audio></div><div class="loading"><div class="loadbox"><div class="loadlogo"></div><div class="loadbg"></div></div></div><div class="wechat-share"><div class="scene-title-box"><em class="scene-title">{{sceneName}}</em></div><img class="scene-img" ng-src="{{PREFIX_FILE_HOST + sceneCover}}"> <em class="scene-des">{{sceneDescription}}</em> <em class="scene-talk">我用易企秀做的，你看一看吧</em> <em class="scene-talk2">做的真好！我也去试一试</em></div><div class="verifyCode"><div class="container"><div class="scene-cover"><img class="cover-img" ng-src="{{PREFIX_FILE_HOST + sceneCover}}"></div><div class="scene-name">{{sceneName}}</div><div class="confirm-password"><div class="verify-label">请输入访问密码</div><div class="verify-tips" id="verifyTip"><ul class="password-indicator"><li></li><li></li><li></li><li></li></ul></div><div class="password-numbers"><span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>0</span></div><div class="password-operation"><span class="btn-clear" id="btnClear">清空</span> <span class="btn-cancel" id="btnCancel">取消</span></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/saveTemplate.tpl.html",'<div class="fr"><a class="hint--left hint--rounded delete all-change" data-hint="删除当前页" ng-click="deletePage($event)" ng-show="pages.length != 1" data-event="12021"><i class="eqf-scene-delete"></i></a> <a ng-click="duplicatePage()" class="hint--left copy hint--rounded all-change" data-hint="复制当前页" data-event="12020"><i class="eqf-scene-copy"></i></a></div><div class="my-tpl-title" ng-style="{true:{\'color\':\'#76838f\'},false:{}}[isCompMange]">存为</div><div class="btn-group" ng-show="userProperty.type ==2 || userProperty.type ==5"><button type="button" class="btn" style="border-right: 0;"><a ng-click="creatMyTemplate()" ng-show="btnGroup.selectItem == 2" class="hint&#45;&#45;left hint&#45;&#45;rounded" data-hint="当前页存为我的模板" data-event="12019" ng-style="{true:{\'color\':\'#76838f\'},false:{}}[isCompMange]"><span>我的模板</span></a> <a ng-click="creatCompanyTemplate()" ng-show="btnGroup.selectItem == 1" class="hint&#45;&#45;left hint&#45;&#45;rounded" data-hint="当前页存为企业模板" data-event="12036" ng-style="{true:{\'color\':\'#76838f\'},false:{}}[isCompMange]"><span>企业模板</span></a></button> <button type="button" class="btn dropdown-toggle" style="border-left: 0;" ng-click="openMenu()" ng-style="{true:{\'color\':\'#76838f\'},false:{}}[isCompMange]"><span class="caret"></span></button><ul class="dropdown-menu" ng-show="btnGroup.caretSwitch"><li ng-click="creatCompanyTemplate();selectedTemplate(\'companyTemplate\');btnGroup.selectItem = 1;btnGroup.caretSwitch = false" data-event="12036"><a class="hint--left hint--rounded" ng-class="{\'template-active\':btnGroup.selectItem == 1}"><span>企业模板</span></a></li><li ng-click="creatMyTemplate();selectedTemplate(\'myTemplate\');btnGroup.caretSwitch = false" data-event="12019"><a class="hint--left hint--rounded" ng-class="{\'template-active\':btnGroup.selectItem == 2}"><span>我的模板</span></a></li></ul></div><div class="btn-group" ng-show="userProperty.type !=2 && userProperty.type !=5"><div class="btn"><a ng-click="creatMyTemplate()" ng-style="{true:{\'color\':\'#76838f\'},false:{}}[isCompMange]" ng-show="userProperty.type!==2 && userProperty.type!==5" class="hint--left hint--rounded" data-hint="保存到我的模板" data-event="12019">我的模板</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/scene.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="main" class="min-contain"><div ng-include="\'sysmessage.tpl.html\'"></div><div class="info-show"><div class="same-content"><div class="info-title" style="padding-bottom:80px;" ng-if="!fillSceneAuth"><span ng-class="{active: true}">场景样例</span></div><div class="info-title" style="padding-bottom:80px;" ng-if="fillSceneAuth"><span ng-click="switchSample(\'sample\')" ng-class="{active:isActive == \'sample\'}">场景样例</span> <span ng-click="switchSample(\'fill\')" ng-class="{active:isActive == \'fill\'}">填空样例</span></div><div class="info" ng-if="isActive == \'sample\'"><div class="creat-scene" ng-if="isActive == \'sample\'"><a ng-click="createScene()" class="clearfix background-color-width-change"><em class="eqf-plus2"></em><span class="opacity-width-change">点击创建空白场景</span></a></div><ul class="clearfix tab-line"><li><a ng-class="{active : 0 == childcat}" ng-click="allPage(null,null)">全部</a></li><li ng-repeat="pageTplType in pageTplTypesList"><a ng-click="getPageTplsByType(pageTplType.type)" ng-class="{active : pageTplType.type == childcat}">{{pageTplType.name}}</a></li><li ng-show="[2,21,5,51].indexOf(userProperty.type) !== -1"><a ng-click="getCompanyTpl(1,11)" ng-class="{active: 1 == childcat}">企业样例</a></li></ul></div><div class="info" ng-if="isActive == \'fill\'"><ul class="clearfix tab-line"><li ng-repeat="fill in fillTypeList"><a ng-click="getPageTplsByType(fill.type)" ng-class="{active : fill.type == childcat}">{{fill.name}}</a></li></ul></div></div></div><div class="same-content"><div class="sample-childcat clearfix mt20" ng-if="newArrayGroupCat"><ul class="cat-list tab-box-shadow" ng-repeat="childGroup in newArrayGroupCat"><li ng-repeat="cat in childGroup" ng-click="getPageTpls(cat.bizType,cat.id,1,11)" ng-class="{active:cat.id == categoryId}"><a>{{cat.name}}</a><span>|</span></li></ul></div><div class="sample-childcat clearfix mt20" ng-if="0 == childcat && childAllList"><ul class="cat-list tab-box-shadow all-tab" ng-repeat="childList in childAllList"><li ng-click="getPageTpls(childList.bizType,childList.tagId,1,11)"><a data-banner="12201" data-bid="{{childList.tagId}}"><img ng-src="{{childList.bgImage}}"><div class="bg" ng-class="{imgOpa:childList.tagId == categoryId}"></div></a></li></ul></div><div class="scene-type clearfix"><div class="search-tab" ng-if="isActive == \'sample\' && childcat != 1"><div class="search" ng-class="{hover:name}" style="right:0;"><input type="text" maxlength="40" placeholder="请输入搜索内容" ng-model="$parent.name" ng-change="changeName(name)" ng-keypress="EnterPress(event,name)" ng-keydown="EnterPress(name)"> <span ng-if="searchButton" class="search-icon eqf-search" ng-click="submit(name)"></span> <span ng-if="!searchButton" class="search-icon eqf-wrong" ng-click="clearSearch()"></span></div></div><eqx-select class="scene-select select-sm select-contain" model="type" change="filterTpl(type.type)"><eqx-select-option value="null">默认排序</eqx-select-option><eqx-select-option value="type" ng-repeat="type in sorts">{{type.name}}</eqx-select-option></eqx-select><eqx-select ng-show="childcat !== 1" class="scene-select select-sm select-contain" model="sample" change="selectPrice(sample.type)"><eqx-select-option value="null">全部样例</eqx-select-option><eqx-select-option value="sample" ng-repeat="sample in samples">{{sample.name}}</eqx-select-option></eqx-select><div class="scene-select company-scene" ng-show="childcat !== 1"><div class="checkbox-square" ng-class="{checked: companySample.selected}"><em class="eqf-yes2"></em> <input type="checkbox" id="company" ng-model="companySample.selected" name="iCheck" ng-change="selectCompany(companySample.selected)"></div><label for="company">企业专属</label></div></div><div style="position:relative"><ul class="square-scene clearfix"><li class="tab-box-shadow creat-blank all-change" ng-if="blankSample" ng-click="createScene()" style="cursor:pointer;"><div class="creat-content background-color-width-change"><i class="eqf-plus2"></i><span>创建一个空白场景</span></div></li><li ng-repeat="tpl in tpls" class="tab-box-shadow animation-zoom all-change" ng-show="tpls" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="ribbon ribbon-badge" ng-if="tpl.isCompanyTemp == 1 && !tpl.price"><span class="ribbon-inner isCompany">企业专属</span></div><div class="ribbon ribbon-badge" ng-if="tpl.isCompanyTemp == 1 && tpl.price && !tpl.disCountFlag"><span class="ribbon-inner isCompany">{{tpl.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="tpl.isCompanyTemp == 1 && tpl.price && tpl.disCountFlag"><div class="discount-bg"><span class="discount-del">&nbsp{{tpl.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><div class="ribbon discount-detail" ng-if="!!tpl.price && tpl.isCompanyTemp !=1 && tpl.disCountFlag"><div class="discount-red discount-bg"><span class="discount-del">&nbsp{{tpl.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="!!tpl.price && tpl.isCompanyTemp !=1 && !tpl.disCountFlag"><span class="ribbon-inner check">{{tpl.price}}秀点</span></div><div class="image"><div ng-show="!tpl.show" class="front face" ng-style="getStyle(tpl.cover)" style="background-size:cover"></div><div ng-show="tpl.show" class="ercode" qr-code="" qr-url="{{canvasUrl + \'/s/\' + tpl.code}}"></div><div class="overlay" ng-show="!tpl.show"><div class="edit"><a class="edit-same" ng-click="openPreview(tpl);"><em class="eqf-eye" style="font-size:20px;"></em> <span>预览</span></a> <a class="edit-same" ng-click="createScene(tpl)"><em class="eqf-xiuziti" style="font-size:18px;"></em> <span>就这个</span></a></div></div></div><div class="project-info"><p class="ellipsis">{{tpl.name}}</p><p class="ellipsis discount-overdue" ng-if="tpl.disCountFlag">限时打折,距离活动结束还有{{tpl.disCountTime}}天</p><div class="buttons sample clearfix" ng-if="!branchid"><div class="set sample-scene"><span class="scene-name">{{tpl.userName}}</span></div><a class="erweima button" ng-hover="" resource="tpl"><em class="eqf-QRcode"></em></a></div></div><div class="head-img"><img ng-if="tpl.avatar" ng-src="{{tpl.avatar}}"> <span ng-if="!tpl.avatar" class="scene-headimg"><em class="eqf-top-contact"></em></span></div></li></ul><div style="text-align:center;margin:50px 0;" ng-if="tpls.length < 1"><h2 class="mb20">该条件下暂无样例，您可以：</h2><p style="font-size:12px;padding-bottom:10px;">1.更换关键词重新搜索</p><p style="padding-bottom:10px;"><a href="/show/visitor" target="_blank"><ins>2.找秀客定制场景</ins></a></p><p style="padding-bottom:10px;"><a ng-click="openCustomActive()"><ins>3.发起设计活动</ins></a></p><img ng-src="{{CLIENT_CDN}}assets/images/notfound.svg"></div></div><div class="clearfix page-turn" style="margin-top:10px;" ng-show="totalItems > 11 && tpls.length"><div class="fl"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="12" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div><span class="fl" style="padding-top:12px;padding-left:10px;">没有喜欢的？<a href="/show/visitor" target="_blank"><ins>找秀客定制</ins></a></span></div></div></div><div ng-include="\'footer.tpl.html\'"></div><div ng-if="currentTpl.exemplarPreview ===true" preview-exemplar="" current-tpl="currentTpl" create-scene="createScene(tpl);" biztype="{{childcat}}" tagid="{{categoryId}}"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/scenePreviewExemplar.tpl.html",'<section class="exemplarPreview" ng-click="cancel();"><div class="reviewCancel" ng-click="cancel();"><em class="eqf-wrong"></em></div><div class="review" ng-click="$event.stopPropagation();"><div class="reviewScene"><div class="author"><span class="authorPic"><img ng-if="avatar!== undefined && avatar!== null" src="{{avatar}}"><em ng-if="!(avatar!== undefined && avatar!== null)" class="eqf-top-contact"></em></span> <span class="authorName">{{currentTpl.tpl.userName}}</span></div><div class="scene"><div class="sceneContent"><iframe id="reviewFrame" frameborder="0" ng-src="{{reviewForIframe}}"></iframe></div></div></div><div class="exemplar-info"><div class="title"><span>{{currentTpl.tpl.}}</span></div><div class="description"><span ng-if="currentTpl.tpl.description.length<=70">{{currentTpl.tpl.description}}</span> <span ng-if="currentTpl.tpl.description.length>70 && !openDescription">{{currentTpl.tpl.description.substring(0,67)}}...<a ng-click="showMoreDescription(true);">更多</a></span> <span ng-if="openDescription">{{currentTpl.tpl.description}}<a ng-click="showMoreDescription(false);">收起</a></span></div><div class="tag"><span ng-repeat="tag in tags">{{tag.name}}</span></div><div class="price"><div ng-if="currentTpl.tpl.price > 0" class="priceShow"><span class="activePrice">{{currentTpl.tpl.disCountFlag ? currentTpl.tpl.disCountPrice : currentTpl.tpl.price}}</span> <span class="measureUnit">秀点</span><div ng-if="currentTpl.tpl.disCountFlag" class="origin-price"><span>原价{{currentTpl.tpl.price}}秀点</span></div></div><div ng-if="currentTpl.tpl.price == 0 || currentTpl.tpl.price ==null" class="priceShow"><span class="freePrice">免费使用</span></div><div ng-if="currentTpl.tpl.disCountFlag" class="activity"><div class="info">距离活动结束</div><div class="leftDay"><span>{{currentTpl.tpl.disCountTime}}</span>天</div></div></div><div class="createScene"><a class="btn btn-sm green" ng-click="newScene();">使用该样例</a></div><div ng-show="copySuccess" class="copySuccessMessage"><span>复制成功，快去分享吧！</span></div><div class="link"><input type="text" class="form-control" value="{{reviewUrl}}" ng-readonly="true" ng-mouseover="inputSelected($event,true);" ng-mouseleave="inputSelected($event,false);"> <a class="btn btn-sm" url="{{canvasUrl + \'/s/\' + currentTpl.tpl.code}}" ng-click="copy($event.target)">复制链接</a></div><div ng-if="qrCodeShow" class="ercode qrcodeShow" qr-code-size="120" qr-url="{{reviewUrl}}"></div><div class="QRCode"><a class="btn btn-sm" ng-mouseover="qrCodeShow = true;" ng-mouseleave="qrCodeShow = false;"><em class="eqf-QRcode"></em>扫描二维码查看</a></div></div></div><div class="exemplarList" ng-click="$event.stopPropagation();"><div class="headText">你可能喜欢...</div><div class="exemplar"><div class="subExemplar" ng-repeat="exemplar in similarExemplars" ng-mouseover="showName($event.target,true)" ng-mouseleave="showName($event.target, false)"><img src="{{fileDomain + exemplar.cover}}" ng-click="showAnotherExemplar(exemplar);"><div class="subExemplarName"><span ng-if="exemplar.name.length <= 11">{{exemplar.name}}</span> <span ng-if="exemplar.name.length > 11">{{exemplar.name.substring(0,9)}}...</span></div></div></div><div class="changeExemplar" ng-click="changeAnotherExemplars()"><em class="eqf-refresh"></em>&nbsp;&nbsp;换一批</div></div></section>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/tplOption.tpl.html",'<div class="popover bottom"><div class="arrow" style="left:70%;"></div><div class="popover-content"><ul class="menus"><li class="menu-item" ng-click="saveMyTemplate()"><span class="menu-item-name">存为我的模板</span></li><li class="menu-item" ng-click="saveCompanyTemplate()" ng-if="userProperty.type==2"><span class="menu-item-name">存为企业模板</span></li></ul></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/index.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="show-con same-content clearfix"><div class="hd-lunbo slidesjs-con" paginav="false" flux-slide=""><div class="slides-content" ng-repeat="banner in banners" on-finish-render-filter=""><a target="{{banner.target}}" data-banner="4201" href="{{banner.url}}" data-bid="{{banner.id}}"><img ng-src="{{banner.path}}" alt="{{banner.title}}" title="{{banner.title}}" width="650px" height="256px"></a></div><a class="slidesjs-previous slidesjs-navigation"><i class="eqf-left"></i></a> <a class="slidesjs-next slidesjs-navigation"><i class="eqf-right"></i></a></div><aside><h2><a href="/show/active" class="apply_showker">更多</a><i>活动</i><span>ACTIVITY</span></h2><ul><li ng-repeat="hdList in activeList"><a ng-click="join(hdList.id)" title="{{hdList.title}}"><img ng-src="{{PREFIX_FILE_HOST + hdList.image}}"> {{hdList.title}}</a></li></ul></aside></div><eqd-common-recommend filter="false" category="{{category}}" change-location="false"></eqd-common-recommend><div class="hezuo same-content" ng-show="friendLinks.length>0"><h2><em>合作</em><span>FRIEND</span></h2><ul class="clearfix"><li ng-repeat="list in friendLinks"><a href="{{list.url}}" target="_blank"><img ng-src="{{list.logo }}" alt="{{list.name}}" title="{{list.name}}"></a></li></ul></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("upgrade/accountDlg.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">更换账号</h4></div><div class="modal-body"><p>您确定退出本账号并更换其他账号吗？</p></div><div class="modal-footer"><a class="modal-confirm" ng-click="confirm();">确定</a><a class="modal-cancle" ng-click="cancel()">取消</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("upgrade/buyRefuseDlg.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">购买失败</h4></div><div class="modal-body"><p>系统检测到，您当前登录的账号已变更<br>当前登录账号:<span class="loginName" ng-bind="infoName"></span>是否继续购买？</p></div><div class="modal-footer"><a class="modal-confirm" ng-click="changeAccount()">更换账号</a> <a class="modal-confirm btn-disabled hint--top hint--rounded manage-ground-setting" ng-if="disBuyFlag" data-hint="{{disBuyTip}}">继续购买</a> <a class="modal-confirm" ng-if="!disBuyFlag" ng-click="continueBuy()">继续购买</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("upgrade/updateDlg.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">升级企业免费版</h4></div><div class="modal-body"><p>您当前的账户类型为个人用户，想要购买企业高级账号<br>需先升级为企业免费版才可，是否立即免费升级？</p></div><div class="modal-footer"><a class="modal-confirm" ng-click="confirm()">前往升级</a><a class="modal-cancle" ng-click="cancel()">再看看</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("upgrade/upgrade.tpl.html",'<div id="upgrade-container"><div class="main"><div class="buy"><h2 ng-bind="title"></h2><form role="form" ng-class="upgradeFlag?\'\':\'xd-buy\'"><div ng-show="upgradeFlag"><div class="form-item"><label for="versionType">购买账号版本</label><div id="versionType"><span class="input-val" ng-bind="version"></span> <span ng-click="changeVersion();" class="operation" slide-toggle="#slideVersion" id="changVersion" ng-class="showChangVersionFlag ? \'eqf-clickmore2\' : \'eqf-clickmore\'">更换版本</span></div></div><div class="form-item version-item" id="slideVersion"><ul class="clearfix"><li ng-class="$parent.version === versionItem.version?\'eqf-yes2\':\'\'" ng-repeat="versionItem in versionList" slide-toggle="#slideVersion" ng-click="selectVersion($event,versionItem);"><span>{{versionItem.version}}</span> <span>{{versionItem.money}}</span> <span>元/每年</span></li></ul></div><div class="form-item"><label for="serviceTime">购买年限</label><div id="serviceTime"><span class="version-name">1年</span></div></div><div class="form-item"><label for="payMoney">支付费用</label><div id="payMoney"><span class="input-val"><em ng-bind="payMoney"></em> <i>元</i></span></div></div></div><div class="form-item"><label for="account">当前账号</label><div id="account"><span class="input-val nickname" ng-bind="nickname" ng-class="loginFlag?\'\':\'red-color\'"></span> <span class="input-val" ng-bind="username" ng-show="loginFlag"></span> <span class="operation eqf-refresh" ng-click="changeAccount()" ng-show="loginFlag">更换账号</span> <button class="to-login" ng-click="toLogin()" ng-show="!loginFlag">去登录</button></div></div><div ng-show="!upgradeFlag"><div class="form-item"><label for="XDCount">购买数量</label><div id="XDCount"><span class="input-val"><em ng-bind="XDCount"></em> <i>秀点</i></span></div></div><div class="form-item"><label for="XDPayMoney">支付费用</label><div id="XDPayMoney"><span class="input-val"><em ng-bind="XDPayMoney"></em> <i>元</i></span></div></div><div class="XDDesc"><img ng-src="assets/images/svg/xiudian.svg" alt="秀点描述"></div></div><div class="form-bottom"><button class="btn-disabled" ng-if="disBuyFlag" ng-bind="buyBtnValue"></button> <button ng-click="buy();" ng-if="!disBuyFlag" ng-bind="buyBtnValue"></button> <a ng-show="disBuyFlag" class="hint--right hint--rounded manage-ground-setting" data-hint="{{disBuyTip}}">为什么无法购买？</a></div></form><div class="contact"><label for="contactMobile">联系电话：</label> <span id="contactMobile">010-83035157</span><a target="_blank" ng-click="customerService()">在线客服</a></div></div><div class="info" ng-show="upgradeFlag"><h2 ng-bind="infoList[memberType][\'title\']"></h2><h3><a target="_blank" href="/privilege">查看版本详解</a></h3><div class="info-item clearfix" ng-repeat="infoDetail in infoList[memberType][\'infoDetail\']"><div class="info-img"><img ng-src="assets/images/svg/{{infoDetail[\'image\']}}.svg" alt="{{infoDetail[\'title\']}}"></div><div class="info-message"><h4 ng-bind="infoDetail[\'title\']"></h4><p ng-bind-html="infoDetail[\'info\']"></p></div></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/buyXd.tpl.html",'<div class="modal-body"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><div class="confirm-msg"><h4 class="text-left">尊敬的易企秀用户</h4><p class="mt20 text-left ml20 mr20" style="line-height: 1.5em;">感谢您对易企秀的支持，您即将购买500个秀点。购买、发票等相关问题，请<a class="text-primary" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324">查看详情</a>。<br>1.暂仅支持一次购买500秀点，费用500元；<br>2.包年购买、优惠购买，请先<a class="text-primary" href="/privilege" target="_blank">升级企业账号</a>；<br>3.购买需要发票的，请联系fapiao@eqxiu.com；</p></div></div><div class="text-right pb20 btn-small"><a class="btn btn-primary mr20" ng-click="confirm()">立即购买</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/invoiceNotice.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">发票须知</h4></div><div class="modal-body invoice-notice"><p class="text-red">1、自购买之日一个月内必须提交发票申请，过期将不予开具；发票申请提交后，易企秀将在一个月内开具发票并寄出；外国用户仅能提供发票扫描件。</p><p>2、易企秀发票项目为：技术服务费。（目前仅开具此项内容，不能开具其他项目）。</p><p>3、如果一个月内多次购买，建议一次性提交发票申请，多个订单可合并。</p><p>4、如发票信息填写错误造成发票无法报销，易企秀不予退换发票，请认真填写，确保无误。</p></div><div class="modal-footer"><a ng-click="cancel()" class="btn btn-primary">知道了</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/message.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="main" class="min_contain same-content message-contain"><div class="u-content"><div class="m-title"><div class="m-icon fl red-bg"><span class="eqf-music"></span></div><div class="m-detail"><div class="m-type ng-binding">站内消息</div><div class="pt20 clearfix"><span style="float:right" class="message"><a class="ml20" ng-show="Msgs.length > 0" ng-click="setRead()">全部标记为已读</a> <a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=890" target="_blank">审核问题</a></span> <span class="mr20"><em>消息总数：{{msgCount}}</em></span> <span><em>未读消息：{{newMsgCount}}</em></span></div></div></div><div class="account-contain"><table class="table table-hover" ng-show="Msgs.length > 0"><thead><tr><th class="col-sm-3">类型</th><th class="col-sm-6">内容</th><th class="col-sm-3">日期</th></tr></thead><tr ng-repeat="newMsg in Msgs" ng-click="setRead(newMsg)"><td>{{newMsg.type}}<em ng-class="{new_msg: newMsg.status == 1}"></em></td><td ng-bind-html="newMsg.content"></td><td>{{newMsg.sendTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</td></tr></table><div class="mt20" ng-show="Msgs.length == 0">您暂时还没有消息！</div><div class="clearfix page-turn" ng-show="msgCount> 10"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="5" items-per-page="pageSize" total-items="msgCount" ng-model="currentPage.msgCurrentPage" boundary-links="true" rotate="true" num-pages="msgNumPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage, \'msgCurrentPage\') : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage, \'msgCurrentPage\')" class="go">确定</a></div></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/payment.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">请选择喜欢的支付方式进行支付</h4></div><div><ul class="nav nav-bg"><li ng-class="{active:payWay==\'alipay\'}"><a ng-click="getWeChatUrl(\'alipay\');">支付宝</a></li><li ng-class="{active:payWay==\'wechat\'}"><a ng-click="getWeChatUrl(\'wechat\');" ng-hide="type==3 || money === 6800 || money === 15600">微信</a></li><li ng-class="{active:payWay==\'remit\'}"><a ng-click="getWeChatUrl(\'remit\');">汇款支付</a></li><li ng-class="{active:payWay==\'unionpay\'}"><a ng-click="getWeChatUrl(\'unionpay\');">银联支付</a></li></ul><div class="tab-content"><div class="tab-pane" ng-class="{active:payWay==\'alipay\'}"><h4 class="text-center mt20">扫码支付</h4><h3 class="text-center" style="color:red;margin-top:15px;">{{money}}元</h3><div class="qrcode text-center" style="width:100%;padding:12px 0" qr-code="" qr-url="{{qrCodeUrl}}"></div></div><div class="tab-pane" ng-class="{active:payWay==\'wechat\'}"><h4 class="text-center mt20">扫码支付</h4><h3 class="text-center" style="color:red;margin-top:15px;">{{money}}元</h3><div class="qrcode text-center" style="width:100%;padding:12px 0" qr-code="" qr-url="{{qrCodeUrl}}"></div></div><div class="tab-pane" ng-class="{active:payWay==\'remit\'}"><h4 class="text-center mt20">需支付</h4><h3 class="text-center" style="color:red;margin-top:15px;">{{money}}元</h3><div class="remit-contain p20"><p>对公支付请按照下列步骤进行：</p><p style="padding-top:15px;">步骤1：打款<br>公司名称：北京中网易企秀科技有限公司<br>开户行全称：中国工商银行股份有限公司北京海淀支行<br>银行账号：0200049609201083655</p><p style="padding-top:15px;"><span class="action">重要说明！！！</span><br>步骤2：发邮件到fapiao@eqxiu.com,以便易企秀更快捷给你提供相关服务。邮件内容如下：<br>购买项目：（秀点，企业体验版，企业基础版，企业标准版，企业高级版等）<br>购买金额，购买数量，易企秀账号，联系电话。</p></div></div><div class="tab-pane" ng-class="{active:payWay==\'unionpay\'}" ng-init="paying = true;"><div ng-show="paying"><h4 class="text-center mt20">需支付</h4><h3 class="text-center" style="color:red;margin-top:15px;margin-bottom:20px;">{{money}}元</h3><div style="text-align:center;margin-bottom:20px;width: 180px;position: relative;margin-left: -90px;left:50%;" ng-show="counts.length>0 && payWay==\'unionpay\'"><eqx-select class="select-great select-contain border-width" model="count" ng-init="count = counts[0]" change="setCount(count.value,$index)"><eqx-select-option value="count" ng-repeat="count in counts track by $index">{{count.name}}</eqx-select-option></eqx-select></div><div class="text-center" style="padding-bottom:20px"><a ng-click="paying = false" ng-href="{{PREFIX_SERVER_HOST + \'m/u/union/pay?goodsId=\' + type + \'&amount=\' + curentCount}}" target="_blank">立即支付</a></div></div><div ng-show="!paying" class="p20 text-center"><p>请在新开启的支付页面中完成支付后，点击完成支付按钮关闭对话框。<br>未完成支付，可点击重新支付按钮再次进行支付</p><p style="margin-top:20px;"><a class="btn btn-primary" ng-href="{{PREFIX_SERVER_HOST + \'m/u/union/pay?goodsId=\' + type + \'&amount=\' + curentCount}}" target="_blank">重新支付</a></p></div></div></div><div style="text-align:center;margin-bottom:20px;width: 180px;position: relative;margin-left: -90px;left:50%;" ng-show="counts.length>0 && payWay!=\'unionpay\'"><eqx-select class="select-great select-contain border-width" model="count" ng-init="count = counts[0]" change="setCount(count.value,$index)"><eqx-select-option value="count" ng-repeat="count in counts track by $index">{{count.name}}</eqx-select-option></eqx-select></div><div ng-show="payWay==\'alipay\'" style="padding-bottom:10px;" class="text-center"><a ng-href="{{PREFIX_SERVER_HOST +\'m/u/alipay/direct?goodsId=\' + type + \'&amount=\' + curentCount+ \'&goodsType=\' + goodsType}}" target="_blank">支付宝网页支付</a></div></div><div class="modal-footer pay-invoice"><a class="btn btn-primary fr" ng-click="paymented()">完成支付</a> <a ng-click="invoiceNotice()">发票须知</a></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/paymentxd.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">请使用微信扫一扫二维码进行</h4></div><div class="modal-body"><div class="qrcode" style="width:100%" qr-code="" qr-url="{{qrCodeUrl}}"></div></div><div class="modal-footer"><a class="btn btn-primary" ng-click="paymented()">完成支付</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/request_reg.tpl.html",'<div class="request_reg"><div class="close" ng-click="cancel()">x</div><div class="erwei" qr-code="" qr-url="{{PREFIX_CLIENT_HOST + \'/m/#/wxLogin?id=\' + currentUser.id}}"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/transfer.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">转送秀点</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label class="col-sm-3 text-right">我的秀点</label><div class="col-sm-7"><span>{{xdCount}}</span><span>个</span></div></div><div class="form-group"><label for="inputMail" class="col-sm-3 control-label">转送账号</label><div class="col-sm-7"><input id="inputMail" type="text" class="form-control" ng-model="currentXd.toUser" placeholder="请填写要转送的账号" ng-class="{error: mailFormatErr}" ng-blur="checkEmailFormat(currentXd)"><p class="error" ng-show="mailFormatErr">{{mailFormatErr}}</p></div></div><div class="form-group"><label for="inputPass" class="col-sm-3 control-label">转送数目</label><div class="col-sm-7"><input id="inputPass" type="text" class="form-control" maxlength="12" ng-model="currentXd.xdCount" placeholder="请填写转送秀点数目" ng-class="{error: xdFormatErr}" ng-blur="checkXdFormat(currentXd)"><p class="error" ng-show="xdFormatErr">{{xdFormatErr}}</p><p class="error" ng-show="relErr">{{relErr}}</p></div></div><div class="action" style="text-align:center;"><a class="textUnder" style="font-size:12px;" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1959&extra=page%3D1" target="_blank">秀点转送是用户个人行为，请注意防范风险！</a></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a type="button" class="btn btn-primary" ng-click="confirm()">确认</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/upgrade.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">购买方式选择</h4></div><div class="modal-body"><div style="font-size: 16px;" class="text-center pb20">请选择购买方式</div><div class="pt20 pb20">选择线上购买，简单快捷</div><div style="padding-bottom: 50px;"><a style="width: 110px;" type="button" class="btn btn-primary" ng-click="confirm()">在线购买</a></div><div style="padding-bottom: 30px;"><div style="width:200px;border-bottom: 1px solid #ccd5db;margin-top: 8px;" class="fl"></div><div style="position: absolute;margin-left: 250px;">线下支付</div><div style="width:200px;border-bottom: 1px solid #ccd5db;margin-top: 8px;" class="fr mt10"></div></div><div class="pt20 pb20">选择所在地服务商，获得更多本地支持／服务</div><ul style="height: 100px;width: 520px;"><li class="fl" style="width:130px; margin-bottom: 20px;" ng-repeat="agent in agents"><a style="width:110px;" type="button" class="btn btn-border" ng-click="openAgentModal(agent);">{{agent.area}}</a></li></ul></div><div class="modal-footer"><div class="fl">更多服务商正在招募中，<a style="color: #08a1ef;" href="/region" target="_blank"><ins>了解详情</ins></a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/upgradeTip.tpl.html",'<div class="modal-header"><span class="glyphicon glyphicon-exclamation-sign"></span> <span>{{msgObj.title || \'提示\'}}</span></div><div class="modal-body"><div class="msg">由于涉及到的会员权益较多、金额较大，为保障会员利益请联系我们进行线下支付并升级!联系电话：010-58813666</div></div><div class="btn-contain btn-small"><a class="btn btn-primary" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324&extra=page%3D1" target="_blank">了解详情</a> <a ng-click="cancel();" class="btn btn-primary">我知道了</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/userCenterGuid.tpl.html",'<div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0;z-index:10000" ng-click="showGuide()" ng-show="isFirstLogin" ng-controller="userCenterGuideCtrl" id="companyVip"><div class="bind-email-guide" ng-if="isCompanyVip"><h1><em>亲爱的易企秀会员：</em><span ng-click="showNextGuide()">&times;</span></h1><p>恭喜您成为易企秀企业成员，现在您将尊享以下特权：</p><ul class="guide-describe"><li><ul><li style="list-style:disc;padding-bottom:15px;">创建子账号、管理子账号，做好企业场景安全</li><li style="list-style:disc;padding-bottom:15px;">创建企业独享的场景模板、页面模板</li><li style="list-style:disc;padding-bottom:15px;">15秀点“易企秀技术支持”底标免费用</li><li style="list-style:disc;padding-bottom:15px;">30秀点品牌联合底标免费用</li><li style="list-style:disc;padding-bottom:15px;">场景加载LOGO自定义（100秀点付费）</li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=77" target="_blank">了解详情</a></li></ul></li></ul><div class="user-select"><p><input type="checkbox" style="margin: 4px; font-size:14px" checked="checked" ng-click="isShow()"><em>不再提示</em></p><button class="btn btn-primary" style="line-height: 20px;" ng-click="showNextGuide()">知道了</button></div></div><div class="bind-email-guide" ng-if="!isCompanyVip"><h1><em>亲爱的易企秀会员：</em><span ng-click="showNextGuide()">&times;</span></h1><p>感谢您成为易企秀会员，现在您可以免费升级为企业会员，升级后您将尊享以下特权：</p><ul class="guide-describe"><li><ul><li style="list-style:disc;padding-bottom:15px;">创建子账号、管理子账号，做好企业场景安全</li><li style="list-style:disc;padding-bottom:15px;">创建企业独享的场景模板、页面模板</li><li style="list-style:disc;padding-bottom:15px;">15秀点“易企秀技术支持”底标免费用</li><li style="list-style:disc;padding-bottom:15px;">30秀点品牌联合底标免费用</li><li style="list-style:disc;padding-bottom:15px;">场景加载LOGO自定义（100秀点付费）</li><li class="pb20"><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=77" target="_blank">了解详情</a></li></ul></li></ul><div class="user-select"><p><input type="checkbox" style="margin: 4px; font-size:14px" ng-click="isShow()"><em>不再提示</em></p><button class="btn btn-primary" style="line-height: 20px;" ng-click="showNextGuide()">知道了</button></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/usercenter.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="main" class="min_contain"><div ng-include="\'sysmessage.tpl.html\'"></div><div class="info-whiter"><div class="same-content"><div class="info-area"><div class="u-photo fl" ng-mouseenter="showMask=true" ng-mouseleave="showMask=false"><div class="p-mask" ng-show="showMask && ((user.type == 21 && userPermit.indexOf(\',1406,\')>=0) || user.type !=21)"><a ng-click="customerUpload()"><em class="eqf-top-pic background-color-width-change" style="font-size:18px;"></em> <span>更换</span></a></div><div ng-class="{\'p-svg\': !userinfo.headImg}"><span class="eqf-top-contact" ng-show="!userinfo.headImg"></span></div><img ng-src="{{thirdHead ? userinfo.headImg : PREFIX_FILE_HOST + userinfo.headImg}}" ng-show="userinfo.headImg"></div><div class="u-detail"><div class="u-name"><span><em class="pr20 big">{{userinfo.nick}}</em> <em class="pr20">{{userinfo.loginName}}</em></span> <span class="scene-oper" ng-if="userinfo.type == 4 && (applyInfo == 4 || applyInfo == 2)">服务商账号审核中</span> <a ng-if="applyInfo != 4 && ((user.type == 21 && userPermit.indexOf(\',1406,\')>=0) || user.type !=21)" ng-click="editMessage()" class="btn-border opa-btn all-change"><span class="eqf-xiuziti"></span> &nbsp;编辑信息</a></div><div class="u-col pt20">账号类型：{{currentName}}</div><div class="u-col pt20">未读消息：<a href="/message" target="_blank">{{newMsgCount}}&nbsp;&nbsp;</a>条</div><div class="u-col"><a target="_blank" ng-if="userinfo.type==1 || (userinfo.type==2 && userinfo.memberType != 3)" class="hint--right hint--rounded" data-hint="获得适合企业使用的功能" href="/privilege" data-event="7203"><ins>免费升级企业账号</ins></a> <span class="pl20" ng-if="userinfo.type == 1"><a ng-show="applyInfo == 0" ng-click="applyShow()" style="padding-left:0" class="hint--right hint--rounded" data-hint="适合提供场景定制服务的用户升级，可在易企秀平台接订单挣钱" data-event="7204"><ins>免费升级秀客服务商账号</ins></a> <span ng-if="applyInfo == 2">秀客服务商账号审核中</span> <span ng-if="applyInfo == 3"><em>秀客服务商账号升级未通过</em> <a ng-click="applyShow()" style="padding-left:10px" data-event="7204"><ins>再次升级秀客服务商账号</ins></a></span></span> <span ng-show="userinfo.type == 21 || userinfo.type == 51">{{userinfo.companyName}}</span></div></div><div class="user-set"><div class="user-xd clearfix mb20"><div class="xd"><em class="big">{{getXdStat.add | fixnum}}</em><br>收入（秀点）</div><div class="xd"><em class="big">{{getXdStat.pay | fixnum}}</em><br>支出（秀点）</div><div class="xd"><em class="big">{{userXd | fixnum}}</em><br>余额（秀点）</div></div><a class="btn-main" ng-click="transferXd()" ng-if="user.type == 21 && userPermit.indexOf(\',1402,\')>=0 || user.type !=21" data-event="7209">转送秀点</a> <a class="btn-main" ng-click="buyXd()" ng-if="user.type == 21 && userPermit.indexOf(\',1401,\')>=0 || user.type !=21" data-event="7208">充值秀点</a> <a class="line-border" ng-click="openInvoice()" ng-if="user.type == 21 && userPermit.indexOf(\',1403,\')>=0 || user.type !=21" data-event="7210">开具发票</a> <a ng-show="accessOrderTask" class="line-border" ng-click="getCash()">提现</a></div></div><div class="spread-tab"><ul class="clearfix tab-line"><li><a ng-class="{active: viewControl.tab == \'member\'}" ng-click="showTab(\'member\');" data-event="7206">会员服务</a></li><li><a ng-class="{active: viewControl.tab == \'account\'}" ng-click="showTab(\'account\');" data-event="7211">账号安全</a></li><li ng-show="userinfo.type == 2 || userinfo.type == 5 || (userinfo.type == 21 && userPermit.indexOf(\',1405,\')>=0)"><a ng-class="{active: viewControl.tab == \'children\'}" ng-click="showTab(\'children\');">账号管理</a></li><li><a ng-class="{active: viewControl.tab == \'trash\'}" ng-click="showTab(\'trash\');" data-event="7220">回收站</a></li></ul></div></div></div><div class="same-content u-content min_contain"><div ng-if="viewControl.tab == \'member\'" ng-controller="MemberCtrl"><div ng-include="\'usercenter/tab/member.tpl.html\'"></div></div><div ng-if="viewControl.tab == \'account\'" ng-controller="UsercenterAccountCtrl"><div ng-include="\'usercenter/tab/account.tpl.html\'"></div></div><div ng-if="viewControl.tab == \'children\'" ng-controller="ChildrenCtrl"><div ng-include="\'usercenter/tab/children.tpl.html\'"></div></div><div ng-if="viewControl.tab == \'trash\'" ng-controller="TrashCtrl"><div ng-include="\'usercenter/tab/trash.tpl.html\'"></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("data/edit/canedit.tpl.html",'<div class="main clearfix"><div class="panel panel-default same-content" style="margin-top:20px;"><div class="return"><a ng-href="/main/customer"><span class="fa fa-mail-reply">返回</span></a></div><div class="custom-detail"><table width="100%"><tr><td><span>姓名</span>：{{dataDetail.name}}</td><td><span>电话</span>：{{dataDetail.tel}}</td><td><span>来源</span>：{{dataDetail.originName}}</td></tr><tr ng-if="isAllowedToAccessGrouping && sceneId != \'create\'"><td colspan="3"><span>分组</span>：<span class="userList" ng-repeat="groupName in groupNames">{{groupName.name}}<em class="delete" ng-click="deleteAssociation(dataDetail.id,groupName.id)">x</em></span><div class="group-cat btn-group dropdown"><em class="add dropdown-toggle" title="添加分组">+</em><div class="dropdown-menu"><ul class="group-list group-over" role="menu"><li class="group-menu" ng-repeat="group in groups" forbidden-close=""><div class="select-group"><span class="eqf-no" style="color:#ff0000" ng-click="deleteGroup(group, $index);"></span><div class="checkbox-square" ng-class="{checked: group.selected}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="group.selected" name="iCheck"></div><span>{{group.name}}</span></div></li></ul><div class="select-group addGroup" forbidden-close="" ng-click="addGroup();" style="cursor:pointer;"><em>+</em> <span class="add-group">添加分组</span></div><div style="text-align:center;padding-top:10px;"><a class="btn btn-primary" ng-click="assignGroup();">确定</a></div></div><div class="confirm-group"></div></div></td></tr></table></div><div class="panel-body"><form name="formName" class="form-horizontal" role="form"><div class="form-group"><label for="userName" class="col-sm-3 control-label">姓名</label><div class="col-sm-7"><input type="text" name="name" ng-model="dataDetail.name" class="form-control" id="userName" placeholder="姓名" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="sex" class="col-sm-3 control-label">性别</label><div class="col-sm-7"><eqx-select class="customer-edit border-width select-contain select-great" model="sex" change="updateSex(sex)"><eqx-select-option value="null">请选择性别</eqx-select-option><eqx-select-option value="sexOption" ng-repeat="sexOption in sexOptions">{{sexOption.name}}</eqx-select-option></eqx-select></div></div><div class="form-group" ng-repeat="mobile in formMobiles track by $index"><label for="mobile" class="col-sm-3 control-label" ng-show="$index==0">手机</label> <label class="col-sm-3 control-label" ng-show="$index!=0"></label><div class="col-sm-7" id="mobileAddress"><div class="input-group"><input type="text" name="mobile" ng-model="formMobiles[$index]" class="form-control" placeholder="手机" show-icon="" callback-fn="updateData(arg1,formMobiles)"> <span class="input-group-btn"><button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'mobile\', formMobiles)" type="button"><span class="fa fa-minus"></span></button></span></div></div><div class="col-sm-1"><span ng-click="addInputs(formMobiles)" ng-show="$index==0" class="fa fa-plus add-inputs"></span></div></div><div class="form-group" ng-repeat="email in formEmails track by $index"><label for="email" class="col-sm-3 control-label" ng-show="$index==0">邮箱</label> <label for="email" class="col-sm-3 control-label" ng-show="$index!=0"></label><div class="col-sm-7" id="emailAddress"><div class="input-group"><input type="text" name="email" ng-model="formEmails[$index]" class="form-control" placeholder="邮箱" show-icon="" callback-fn="updateData(arg1,formEmails, formName.emial.$invalid)"> <span class="input-group-btn"><button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'email\', formEmails)" type="button"><span class="fa fa-minus"></span></button></span></div></div><div class="col-sm-1"><span ng-click="addInputs(formEmails)" ng-show="$index==0" class="fa fa-plus add-inputs"></span></div></div><div class="form-group"><label for="company" class="col-sm-3 control-label">公司</label><div class="col-sm-7"><input type="text" name="company" ng-model="dataDetail.company" class="form-control" id="company" placeholder="公司" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="job" class="col-sm-3 control-label">职务</label><div class="col-sm-7"><input type="text" name="job" ng-model="dataDetail.job" class="form-control" id="job" placeholder="职务" show-icon="" callback-fn="updateData(arg1)" required=""></div></div><div class="form-group" ng-repeat="tel in formTels track by $index"><label for="tel" class="col-sm-3 control-label" ng-show="$index==0">电话</label> <label for="tel" class="col-sm-3 control-label" ng-show="$index!=0"></label><div class="col-sm-7" id="tel"><div class="input-group"><input type="text" name="tel" ng-model="formTels[$index]" class="form-control" placeholder="电话" show-icon="" callback-fn="updateData(arg1,formTels)"> <span class="input-group-btn"><button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'email\', formTels)" type="button"><span class="fa fa-minus"></span></button></span></div></div><div class="col-sm-1"><span ng-click="addInputs(formTels)" ng-show="$index==0" class="fa fa-plus add-inputs"></span></div></div><div class="form-group"><label for="address" class="col-sm-3 control-label">地址</label><div class="col-sm-7"><input type="text" name="address" ng-model="dataDetail.address" class="form-control" id="address" placeholder="地址" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="website" class="col-sm-3 control-label">个人网址</label><div class="col-sm-7"><input type="text" name="website" ng-model="dataDetail.website" class="form-control" id="website" placeholder="个人网址" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="qq" class="col-sm-3 control-label">QQ号</label><div class="col-sm-7"><input type="text" name="qq" ng-model="dataDetail.qq" class="form-control" id="qq" placeholder="QQ号" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="weixin" class="col-sm-3 control-label">微信号</label><div class="col-sm-7"><input type="text" name="weixin" ng-model="dataDetail.weixin" class="form-control" id="weixin" placeholder="微信号" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="yixin" class="col-sm-3 control-label">易信号</label><div class="col-sm-7"><input type="text" name="yixin" ng-model="dataDetail.yixin" class="form-control" id="yixin" placeholder="易信号" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="weibo" class="col-sm-3 control-label">微博号</label><div class="col-sm-7"><input type="text" name="weibo" ng-model="dataDetail.weibo" class="form-control" id="weibo" placeholder="微博号" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="laiwang" class="col-sm-3 control-label">来往号</label><div class="col-sm-7"><input type="text" name="laiwang" ng-model="dataDetail.laiwang" class="form-control" id="inputEmail3" placeholder="来往号" show-icon="" callback-fn="updateData(arg1)"></div></div><div class="form-group"><label for="remark" class="col-sm-3 control-label">其它</label><div class="col-sm-7"><input type="text" name="remark" ng-model="dataDetail.remark" class="form-control" id="remark" placeholder="其他" show-icon="" callback-fn="updateData(arg1)"></div></div></form><div class="btn-contain btn-big"><a class="btn btn-primary login" ng-click="saveData(dataDetail)">保存</a> <a ng-click="cancel()" class="btn-grey0 btn">取消</a></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("data/edit/canread.tpl.html",'<div class="main clearfix"><div class="panel panel-default"><div class="return"><a ng-href="/main/customer"><span class="fa fa-mail-reply">返回</span></a></div><div class="custom-detail"><table width="100%"><tr><td><span>姓名</span>：{{dataDetail.name}}</td><td><span>电话</span>：{{dataDetail.tel}}</td><td><span>来源</span>：{{dataDetail.originName}}</td></tr><tr ng-if="isAllowedToAccessGrouping"><td colspan="3"><span>分组</span>：<span class="userList" ng-repeat="groupName in groupNames">{{groupName.name}}</span></td></tr></table></div><div class="panel-body"><form name="formName" class="form-horizontal data-detail" role="form"><div class="form-group form-group-sm"><label for="userName" class="col-sm-3 control-label">姓名：</label><div class="col-sm-7"><span>{{dataDetail.name}}</span></div></div><div class="form-group form-group-sm"><label for="sex" class="col-sm-3 control-label">性别：</label><div class="col-sm-7"><span>{{sex.id ? sex.name : \'\'}}</span></div></div><div class="form-group form-group-sm"><label for="mobile" class="col-sm-3 control-label">手机：</label><div class="col-sm-7" id="mobileAddress"><span>{{formMobiles.join()}}</span></div></div><div class="form-group form-group-sm"><label for="email" class="col-sm-3 control-label">邮箱：</label><div class="col-sm-7" id="emailAddress"><span>{{formEmails.join()}}</span></div></div><div class="form-group form-group-sm"><label for="company" class="col-sm-3 control-label">公司：</label><div class="col-sm-7"><span>{{dataDetail.company}}</span></div></div><div class="form-group form-group-sm"><label for="job" class="col-sm-3 control-label">职务：</label><div class="col-sm-7">{{dataDetail.job}}</div></div><div class="form-group form-group-sm"><label for="tel" class="col-sm-3 control-label">固定电话：</label><div class="col-sm-7" id="tel"><span>{{formTels.join()}}</span></div></div><div class="form-group form-group-sm"><label for="address" class="col-sm-3 control-label">地址：</label><div class="col-sm-7"><span>{{dataDetail.address}}</span></div></div><div class="form-group form-group-sm"><label for="website" class="col-sm-3 control-label">个人网址：</label><div class="col-sm-7"><span>{{dataDetail.website}}</span></div></div><div class="form-group form-group-sm"><label for="qq" class="col-sm-3 control-label">QQ号：</label><div class="col-sm-7"><span>{{dataDetail.qq}}</span></div></div><div class="form-group form-group-sm"><label for="weixin" class="col-sm-3 control-label">微信号：</label><div class="col-sm-7"><span>{{dataDetail.weixin}}</span></div></div><div class="form-group form-group-sm"><label for="yixin" class="col-sm-3 control-label">易信号：</label><div class="col-sm-7"><span>{{dataDetail.yixin}}</span></div></div><div class="form-group form-group-sm"><label for="weibo" class="col-sm-3 control-label">微博号：</label><div class="col-sm-7">{{dataDetail.weibo}}</div></div><div class="form-group form-group-sm"><label for="laiwang" class="col-sm-3 control-label">来往号：</label><div class="col-sm-7"><span>{{dataDetail.laiwang}}</span></div></div><div class="form-group form-group-sm"><label for="remark" class="col-sm-3 control-label">其它：</label><div class="col-sm-7"><span>{{dataDetail.remark}}</span></div></div></form></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("home/ads/homeAds.html",'<div class="home-ads"><div class="ads-img item"><a href="{{adsImageInfo.url}}" target="_blank"><img src="" ng-src="{{adsImageInfo.path}}" data-event="14251" alt=""></a></div><div class="qrcode item"><h2>扫一扫下载易企秀APP</h2><p>一键生成H5场景，随时随地查看数据</p><div class="content"></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("home/privilege/myPrivilege.tpl.html",'<h4>我的特权</h4><div ng-if="accountType !== 1"><ul class="clearfix company"><li class="version free-version" ng-class="{\'basis-version\': accountType === 207 || accountType === 217, \'standard-version\': accountType === 208 || accountType === 218, \'advanced-version\': accountType === 209 || accountType === 219}"><div class="eqf-companyuser"></div><div class="version-name" ng-bind="versionName"></div><div class="desc" ng-bind-html="versionDesc"></div><div class="hover-mask"><div ng-bind="versionTip"></div><a class="btn" ng-if="[1, 2].indexOf(accountType) !== -1" href="/privilege" target="_blank" data-event="14225">升级账号</a><div class="btnGroup" ng-if="[207,208].indexOf(accountType) !== -1"><a class="btn" href="/privilege" target="_blank" data-event="14225">升级账号</a> <a class="btn" ng-click="upgradeAccount();" data-event="14226">续费</a></div><a class="btn" ng-if="accountType === 209" ng-click="upgradeAccount();" data-event="14226">续费</a> <a class="btn" ng-if="[4, 5, 3, 98, 99, 51,201,206,202,203,204,21].indexOf(accountType) !== -1 || (accountType>= 211 && accountType <= 219)" target="_blank" href="/usercenter/member" data-event="14227">用户中心</a></div></li><li class="xiudian"><h5 ng-bind="userXd"></h5><div class="desc" ng-if="(userXd| gt0)">剩余秀点</div><div class="privilege-item">我的秀点</div><div class="hover-mask"><div class="hover-desc">秀点是易企秀的虚拟货币，可在整站用来购买样例及各类付费高级服务，秀点可通过充值获得。</div><a class="btn" ng-click="xdBuy();" data-event="14228">秀点充值</a></div></li><li class="sample"><h5 ng-bind="sampleLabel" ng-class="{\'text\': (sampleLabel | isNaNum)}"></h5><div class="desc" ng-if="(sampleLabel| gt0)">剩余次数</div><div class="privilege-item">免费使用付费样例</div><div class="hover-mask"><div class="hover-desc">易企秀官方或用户提供的可套用性高的精品样例，可购买使用，升级付费账号也可获得多次免费使用特权。</div><a class="btn" href="/scene/list/sample" target="_blank" data-event="14229">查看付费样例</a></div></li><li class="sub-account" ng-if="!([4,3,99,51,21].indexOf(accountType) !== -1 || (accountType>= 211 && accountType <= 219))"><h5 ng-bind="subAccountLabel" ng-class="{\'text\': (subAccountLabel | isNaNum),\'no-permission\': subAccountLabel === \'无权限\'}"></h5><div class="desc" ng-if="(subAccountLabel | gte0)">剩余数目</div><div class="privilege-item">子账号数量</div><div class="hover-mask"><div class="hover-desc">企业专属特权，主账号可通过权限分配对子账号实现服务共享及企业营销管理。</div><a class="btn" ng-click="buyBranch()" ng-if="accountType !== 1" data-event="14231">立即购买</a></div></li><li class="logo" ng-if="[4,3,98].indexOf(accountType) === -1"><h5 ng-bind="LOGOLabel" ng-class="{\'text\': (LOGOLabel | isNaNum),\'no-permission\': LOGOLabel === \'无权限\'}"></h5><div class="desc" ng-if="(LOGOLabel| gt0)">剩余次数</div><div class="privilege-item">自定义加载LOGO</div><div class="hover-mask"><div class="hover-desc">将场景加载时的易企秀logo更换为企业自有logo，提升企业品牌宣传曝光度。</div><a class="btn" href="/main" data-event="14233">我的场景</a></div></li><li class="end-page" ng-if="accountType !== 5 && accountType !== 51"><h5 ng-bind="endPageLabel" ng-class="{\'text\': (endPageLabel | isNaNum)}"></h5><div class="desc" ng-if="(endPageLabel| gt0)">剩余次数</div><div class="privilege-item">去除尾页和底标</div><div class="hover-mask"><div class="hover-desc">去除场景尾页及底部宣传标识，提高场景及品牌展示的聚焦度。</div><a class="btn" href="/main" data-event="14234">我的场景</a></div></li><li class="support"><h5 ng-bind="supportLabel" ng-class="{\'text\': (supportLabel | isNaNum),\'no-permission\': supportLabel === \'无权限\'}"></h5><div class="desc" ng-if="(supportLabel| gt0)">剩余次数</div><div class="privilege-item">场景保障服务</div><div class="hover-mask" ng-show="!sceneOperate"><div class="hover-desc">易企秀专门为用户打造的专属CDN加速及专属服务器服务，开启后可缩短场景打开时间及提高场景访问稳定性。</div><div class="btnGroup" ng-if="openSceneFlag"><a class="btn" href="/promotion/channel/guarantee" target="_blank" data-event="14236">立即购买</a> <a class="btn" href="/promotion/channel/guarantee?showTab=intro" target="_blank">了解详情</a></div><div class="btnGroup" ng-if="!openSceneFlag"><a class="btn" href="/promotion/channel/guarantee" target="_blank" data-event="14237">开启服务</a> <a class="btn" href="/promotion/channel/guarantee?showTab=intro" target="_blank">了解详情</a></div></div></li><li class="short-message"><h5 ng-bind="shortMessageLabel" ng-class="{\'text\': (shortMessageLabel | isNaNum),\'no-permission\': shortMessageLabel === \'无权限\'}"></h5><div class="desc" ng-if="(shortMessageLabel| gt0)">剩余次数</div><div class="privilege-item">短信推广数量</div><div class="hover-mask"><div class="hover-desc">用户可以给您的客户以发送短信的方式推广自己的场景，可以自定义文案，让场景推广更便捷。</div><a class="btn" href="/promotion/channel/messagePost" target="_blank" data-event="14239">立即购买</a></div></li><li class="domain-name" ng-if="accountType !== 51 && accountType !== 21 && !(accountType>=211 && accountType <= 219)" ng-class="{\'li-text\': !(domainNameLabel | isDate),\'date-not-expire\': (domainNameLabel | dateNotExpire)}"><h5 ng-class="{\'text\': !(domainNameLabel | isDate), \'no-permission\': domainNameLabel === \'无权限\'}" ng-bind="domainNameLabel | date:\'MM/dd\'"></h5><div class="desc" ng-if="domainNameLabel | isDate" ng-bind="domainNameLabel | date:\'yyyy\'"></div><div class="privilege-item">域名自定义</div><div class="hover-mask"><div class="hover-desc">用户可以定义自己场景的专属域名，提高场景的归属感及品牌宣传。</div><a class="btn" ng-if="domainSatus === 0" href="/promotion/channel/domainBind" target="_blank" data-event="14241">申请域名</a> <a class="btn" ng-if="domainSatus === 2" href="/promotion/channel/domainBind" target="_blank" data-event="14242">查看审核内容</a> <a class="btn" ng-if="domainSatus === 3" href="/promotion/channel/domainBind" target="_blank" data-event="14243">重新申请</a> <a class="btn" ng-if="domainSatus === 1" href="/promotion/channel/domainBind" target="_blank" data-event="14244">修改微信信息</a><div class="btnGroup" ng-if="domainSatus === 4 || domainSatus === 5"><a class="btn" href="/promotion/channel/domainBind" data-event="14245">我要续费</a> <a class="btn" href="/promotion/channel/domainBind" target="_blank">重新申请</a></div></div></li><li class="SMS-alert" ng-if="accountType !== 4" ng-class="{\'li-text\': !(SMSAlertLabel | isDate),\'date-not-expire\': (SMSAlertLabel | dateNotExpire)}"><h5 ng-class="{\'text\': !(SMSAlertLabel | isDate)}" ng-bind="SMSAlertLabel | date:\'MM/dd\'"></h5><div class="desc" ng-if="SMSAlertLabel | isDate" ng-bind="SMSAlertLabel | date:\'yyyy\'"></div><div class="privilege-item">审核关闭短信提醒</div><div class="hover-mask"><div class="hover-desc">开启此功能后，一旦发现场景有违规现象，易企秀会第一时间发送短信提醒您，避免给您带来不必要的损失。</div><a class="btn" ng-if="!(SMSAlertLabel | isDate)" href="/main" data-event="14246">我的场景</a> <a class="btn disabled" ng-if="SMSAlertLabel | isDate">已开通</a></div></li><li class="pre-audit" ng-if="[4,201,3,98,99,211,206,216,202,212,21].indexOf(accountType) === -1" ng-class="{\'li-text\': (preAuditLabel | isNaNum)}"><h5 ng-bind="preAuditLabel" ng-class="{\'text\': (preAuditLabel | isNaNum),\'no-permission\': preAuditLabel === \'无权限\'}"></h5><div class="desc" ng-if="(preAuditLabel | gte0)">剩余次数</div><div class="privilege-item">场景前置审核</div><div class="hover-mask"><div class="hover-desc">分享前优先审核，避免在传播中因内容违规而被关闭造成不必要的损失。每天最多可申请3次,每次间隔1小时。</div><a class="btn" ng-if="accountType === 2" href="/privilege" target="_blank" data-event="14247">升级企业付费版</a> <a class="btn" ng-if="accountType !== 2" href="/main" data-event="14248">我的场景</a></div></li><li class="urgent-review" ng-if="[4,201,3,98,99,211,206,216,21].indexOf(accountType) === -1" ng-class="{\'li-text\': (urgentReviewLabel | isNaNum)}"><h5 ng-bind="urgentReviewLabel" ng-class="{\'text\': (urgentReviewLabel | isNaNum),\'no-permission\': urgentReviewLabel === \'无权限\'}"></h5><div class="desc" ng-if="(urgentReviewLabel | gte0)">剩余次数</div><div class="privilege-item">驳回加急审核</div><div class="hover-mask"><div class="hover-desc">一旦发现场景违规被关闭，（调整后）可申请加急审核，系统会优先处理。每天最多可申请3次。</div><a class="btn" ng-if="accountType === 2" href="/privilege" target="_blank" data-event="14249">升级企业付费版</a> <a class="btn" ng-if="accountType !== 2" href="/main" data-event="14250">我的场景</a></div></li></ul></div><div class="personal" ng-if="accountType === 1"><ul class="clearfix personal"><li class="version account-type1"><div class="eqf-nomarluser"></div><div class="version-name" ng-bind="versionName"></div><div class="desc" ng-bind-html="versionDesc"></div><div class="hover-mask"><div ng-bind="versionTip"></div><a class="btn" href="/privilege" target="_blank" data-event="14225">升级账号</a></div></li><li class="xiudian"><h5 ng-bind="userXd"></h5><div class="desc" ng-if="(userXd | gt0)">剩余秀点</div><div class="privilege-item">我的秀点</div><div class="hover-mask"><div class="hover-desc">秀点是易企秀的虚拟货币，可在整站用来购买样例及各类付费高级服务，秀点可通过充值获得。</div><a class="btn" ng-click="xdBuy();" data-event="14228">秀点充值</a></div></li><li class="sample"><h5 ng-bind="sampleLabel" ng-class="{\'text\': (sampleLabel | isNaNum)}"></h5><div class="desc" ng-if="(sampleLabel | gt0)">剩余次数</div><div class="privilege-item">免费使用付费样例</div><div class="hover-mask"><div class="hover-desc">易企秀官方或用户提供的可套用性高的精品样例，可购买使用，升级付费账号也可获得多次免费使用特权。</div><a class="btn" href="/scene/list/sample" target="_blank" data-event="14229">查看付费样例</a></div></li><li class="end-page"><h5 ng-bind="endPageLabel" ng-class="{\'text\': (endPageLabel | isNaNum)}"></h5><div class="desc" ng-if="(endPageLabel| gt0)">剩余次数</div><div class="privilege-item">去除尾页和底标</div><div class="hover-mask"><div class="hover-desc">去除场景尾页及底部宣传标识，提高场景及品牌展示的聚焦度。</div><a class="btn" href="/main" data-event="14234">我的场景</a></div></li><li class="SMS-alert" ng-class="{\'li-text\': !(SMSAlertLabel | isDate)}"><h5 ng-class="{\'text\': !(SMSAlertLabel | isDate)}" ng-bind="SMSAlertLabel | date:\'MM/dd\'"></h5><div class="desc" ng-if="SMSAlertLabel | isDate" ng-bind="SMSAlertLabel | date:\'yyyy\'"></div><div class="privilege-item">审核关闭短信提醒</div><div class="hover-mask"><div class="hover-desc">开启此功能后，一旦发现场景有违规现象，易企秀会第一时间发送短信提醒您，避免给您带来不必要的损失。</div><a class="btn" ng-if="!(SMSAlertLabel | isDate)" href="/main" data-event="14246">我的场景</a> <a class="btn disabled" ng-if="SMSAlertLabel | isDate">已开通</a></div></li><li class="support"><h5 ng-bind="supportLabel" ng-class="{\'text\': (supportLabel | isNaNum),\'no-permission\': supportLabel === \'无权限\'}"></h5><div class="desc" ng-if="(supportLabel| gt0)">剩余次数</div><div class="privilege-item">场景保障服务</div><div class="hover-mask"><div class="hover-desc">易企秀专门为用户打造的专属CDN加速及专属服务器服务，开启后可缩短场景打开时间及提高场景访问稳定性。</div><a class="btn" href="/privilege" target="_blank" data-event="14235">升级账号</a></div></li></ul><ul class="clearfix personal" id="slidePersion"><li class="logo"><h5 ng-bind="LOGOLabel" ng-class="{\'text\': (LOGOLabel | isNaNum),\'no-permission\': LOGOLabel === \'无权限\'}"></h5><div class="desc" ng-if="(LOGOLabel| gt0)">剩余次数</div><div class="privilege-item">自定义加载LOGO</div><div class="hover-mask"><div class="hover-desc">将场景加载时的易企秀logo更换为企业自有logo，提升企业品牌宣传曝光度。</div><a class="btn" href="/privilege" target="_blank" data-event="14232">升级账号</a></div></li><li class="short-message"><h5 ng-bind="shortMessageLabel" ng-class="{\'text\': (shortMessageLabel | isNaNum),\'no-permission\': shortMessageLabel === \'无权限\'}"></h5><div class="desc" ng-if="(shortMessageLabel| gt0)">剩余次数</div><div class="privilege-item">短信推广数量</div><div class="hover-mask"><div class="hover-desc">用户可以给您的客户以发送短信的方式推广自己的场景，可以自定义文案，让场景推广更便捷。</div><a class="btn" href="/privilege" target="_blank" data-event="14238">升级账号</a></div></li><li class="domain-name" ng-class="{\'li-text\': !(domainNameLabel | isDate)}"><h5 ng-class="{\'text\': !(domainNameLabel | isDate), \'no-permission\': domainNameLabel === \'无权限\'}" ng-bind="domainNameLabel | date:\'MM/dd\'"></h5><div class="desc" ng-if="domainNameLabel | isDate" ng-bind="domainNameLabel | date:\'yyyy\'"></div><div class="privilege-item">域名自定义</div><div class="hover-mask"><div class="hover-desc">用户可以定义自己场景的专属域名，提高场景的归属感及品牌宣传。</div><a class="btn" href="/privilege" target="_blank" data-event="14240">升级账号</a></div></li><li class="sub-account"><h5 ng-bind="subAccountLabel" ng-class="{\'text\': (subAccountLabel | isNaNum),\'no-permission\': subAccountLabel === \'无权限\'}"></h5><div class="desc" ng-if="(subAccountLabel | gte0)">剩余数目</div><div class="privilege-item">子账号数量</div><div class="hover-mask"><div class="hover-desc">企业专属特权，主账号可通过权限分配对子账号实现服务共享及企业营销管理。</div><a class="btn" href="/privilege" target="_blank" data-event="14230">升级账号</a></div></li><li class="pre-audit" ng-class="{\'li-text\': (preAuditLabel | isNaNum)}"><h5 ng-bind="preAuditLabel" ng-class="{\'text\': (preAuditLabel | isNaNum),\'no-permission\': preAuditLabel === \'无权限\'}"></h5><div class="desc" ng-if="(preAuditLabel | gte0)">剩余次数</div><div class="privilege-item">场景前置审核</div><div class="hover-mask"><div class="hover-desc">分享前优先审核，避免在传播中因内容违规而被关闭造成不必要的损失。每天最多可申请3次,每次间隔1小时。</div><a class="btn" href="/privilege" target="_blank" data-event="14247">升级企业付费版</a></div></li><li class="urgent-review" ng-class="{\'li-text\': (urgentReviewLabel | isNaNum)}"><h5 ng-bind="urgentReviewLabel" ng-class="{\'text\': (urgentReviewLabel | isNaNum),\'no-permission\': urgentReviewLabel === \'无权限\'}"></h5><div class="desc" ng-if="(urgentReviewLabel | gte0)">剩余次数</div><div class="privilege-item">驳回加急审核</div><div class="hover-mask"><div class="hover-desc">一旦发现场景违规被关闭，（调整后）可申请加急审核，系统会优先处理。每天最多可申请3次。</div><a class="btn" href="/privilege" target="_blank" data-event="14249">升级企业付费版</a></div></li></ul><div class="slideToggle eqf-clickmore" slide-toggle="#slidePersion"></div></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("home/section/mySection.html",'<div class="card-list"><div class="card-list-item all-change"><div class="item-top"><h4><span class="item-tip"></span>为您推荐</h4></div><div class="item-content"><div flux-slide="" pause-on-hover=".pic-con" class="slidesjs-con" effect="fade" width="280" height="350"><div class="slides-content" ng-repeat="sysRecommend in getSysRecommend" on-finish-render-filter=""><div class="pic-con"><div class="ribbon ribbon-badge" ng-if="sysRecommend.price"><span class="ribbon-inner check">{{sysRecommend.price}}秀点</span></div><img class="banner-img" id="banner{{$index}}" ng-src="{{PREFIX_FILE_HOST+sysRecommend.cover}}"><div class="overlay all-change"><a class="view-same" ng-click="openPreview(sysRecommend)" data-event="14201"><em class="eqf-eye view-icon"></em> <span>预览</span></a> <a class="view-same" ng-click="createScene(sysRecommend)" data-event="14202"><em class="eqf-xiuziti view-icon"></em> <span>就这个</span></a></div></div><h4 class="promote-name">{{sysRecommend.name}}</h4></div></div></div><div class="item-bottom"><a class="item-btn all-change" style="width:100%" ng-href="/scene/list/sample" data-event="14203">更多样例</a></div></div><div class="card-list-item"><div class="item-top"><h4><span class="item-tip"></span>推广统计</h4></div><div class="item-content"><div ng-class="{\'persion-bgcolor\':!isCompany,\'company-bgcolor\':isCompany}" class="totle-item">场景总浏览量(PV)<span class="totle-value">{{dataStatistics.pvTotal}}</span></div><div ng-class="{\'persion-bgcolor\':!isCompany,\'company-bgcolor\':isCompany}" class="totle-item">场景总访问人数(UV)<span class="totle-value">{{dataStatistics.uvTotal}}</span></div><div class="totle-item" ng-class="{\'persion-bgcolor\':!isCompany,\'company-bgcolor\':isCompany}">表单与留言总数据<span class="totle-value">{{dataStatistics.dataTotal}}</span></div><div class="last-scene mt20"><div class="scene-imgcon" ng-class="{\'scene-default\':!newScene}"><img class="scene-img" ng-src="{{PREFIX_FILE_HOST+newScene.cover}}" ng-if="newScene"> <em class="eqf-logo" ng-if="!newScene"></em><div class="overlay opacity-width-change" ng-if="newScene"><span class="edit-same view-icon" ng-click="editScene($event,newScene.id,newScene)" data-event="14204"><em class="eqf-xiuziti"></em></span> <span class="edit-same view-icon" ng-click="showShareDetail(newScene.id)" data-event="14205"><em class="eqf-date"></em></span></div></div><div class="scene-des"><div class="fcolor1 scene-last-name" ng-if="newScene"><a ng-click="showShareDetail(newScene.id)" data-event="14206">{{newScene.name}}</a></div><div class="fcolor1 scene-last-name" ng-if="!newScene">最新发布的场景数据</div><div class="scene-last-pv scene-anim all-change" ng-click="showDetail(newScene.id)" ng-if="newScene" data-event="14207"><h4 class="fcolor1"><span count-up-anim="" start="0" end="{{dataStatistics.yesterdayPv}}"></span><em class="eqf-right opacity-width-change"></em></h4><h6 class="mt10">当前场景昨日PV</h6></div><div class="scene-last-pv" ng-if="!newScene"><h4 class="fcolor1"><span>0</span></h4><h6 class="mt10">当前场景昨日PV</h6></div></div></div><div class="scene-data mt20" ng-if="newScene"><div class="scene-pv all-change scene-anim" ng-click="showDetail(newScene.id)" data-event="14208"><h4 class="fcolor1"><span count-up-anim="" start="0" end="{{dataStatistics.pv}}"></span><em class="eqf-right opacity-width-change"></em></h4><h6 class="mt10">当前场景总PV</h6></div><div class="scene-pv all-change scene-anim" ng-click="showDetail(newScene.id)" data-event="14209"><h4 class="fcolor1"><span count-up-anim="" start="0" end="{{dataStatistics.uv}}"></span><em class="eqf-right opacity-width-change"></em></h4><h6 class="mt10">当前场景总UV</h6></div></div><div class="scene-data mt20" ng-if="!newScene"><div class="scene-pv"><h4 class="fcolor1"><span>0</span></h4><h6 class="mt10">当前场景总PV</h6></div><div class="scene-pv"><h4 class="fcolor1"><span>0</span></h4><h6 class="mt10">当前场景总UV</h6></div></div></div><div class="item-bottom"><a class="item-btn all-change" style="width:100%;" href="/promotion/channel" data-event="14210" target="_self">推广场景</a></div></div><div class="card-list-item"><div class="item-top"><h4><span class="item-tip"></span>场景概况</h4></div><div class="item-content"><h6 ng-if="!sceneGeneral.loginTime">近一周内场景概况</h6><h6 ng-if="!!sceneGeneral.loginTime">上次登录时间：{{sceneGeneral.loginTime|date:\'yyyy-MM-dd HH:mm:ss\'}}</h6><a ng-href="/main" data-event="14211"><div class="account mt20 all-change scene-move" ng-class="{\'persion-bgcolor\':!isCompany,\'company-bgcolor\':isCompany}"><div class="scene-total"><h2 count-up-anim="" start="0" end="{{sceneGeneral.total}}"><em class="eqf-right"></em></h2><h5 style="margin-top:5px;">我的场景总数</h5></div><div class="scene-total2"><h5 class="data">{{sceneGeneral.total - sceneGeneral.mobile}}/{{sceneGeneral.mobile}}</h5><h5 class="mt10">PC/移动</h5></div><div class="arrow"><em class="eqf-right all-change"></em></div></div></a><div class="materals mt20"><div class="materal-item tpl-move all-change" style="padding-right:0;" ng-click="addSceneTpl()" data-event="14212"><h3 class="fcolor1"><span style="display:inline-block;width: 70px;" count-up-anim="" start="0" end="{{sceneGeneral.sceneTpl}}"></span><em class="eqf-right all-change"></em></h3><h5 class="materal-des">新增样例</h5></div><div class="materal-item"><h3 class="fcolor1" count-up-anim="" start="0" end="{{sceneGeneral.img}}"></h3><h5 class="materal-des">新增图片</h5></div><div class="materal-item"><h3 class="fcolor1" count-up-anim="" start="0" end="{{sceneGeneral.scenePageTpl}}"></h3><h5 class="materal-des">新增模板</h5></div><div class="materal-item"><h3 class="fcolor1" count-up-anim="" start="0" end="{{sceneGeneral.svg}}"></h3><h5 class="materal-des">新增图形</h5></div></div></div><div class="item-bottom"><a class="item-btn all-change" ng-href="/main" data-event="14213">我的场景</a> <a class="item-btn btn-lb all-change" ng-href="scene/list/sample" data-event="14214">立即制作</a></div></div><div class="card-list-item" ng-if="isCompany"><div class="item-top"><h4><span class="item-tip"></span>账号管理</h4></div><div class="item-content"><div class="account company-bgcolor"><h2>{{accountGeneral.useNum}} <span class="tip">（剩余{{accountGeneral.remainNum}}）</span></h2><h5 class="des">已使用企业子账号个数</h5></div><div class="account company-bgcolor"><h2>{{accountGeneral.subUserSceneCount}}</h2><h5 class="des">子账号场景总数</h5></div><div class="branchs mt10"><h3 class="fcolor1">{{accountGeneral.subUserScenePv}}</h3><h5 class="des">子账号场景总PV</h5></div><div class="branchs" style="border-top: none;"><h3 class="fcolor1">{{accountGeneral.subUserSceneData}}</h3><h5 class="des">子账号收集总数据</h5></div></div><div class="item-bottom"><a class="item-btn all-change" style="width:100%;" ng-href="/usercenter/children" data-event="14215">账号管理</a></div></div><div class="card-list-item" style="margin-right: 50px;vertical-align: top;"><div class="item-top"><h4><span class="item-tip"></span>消息中心</h4></div><a ng-href="{{messBanner.url}}" target="_blank"><img class="item-advertise ml20" ng-src="{{messBanner.path}}" data-event="14216"></a><div class="item-msgs"><h5><span class="title">[消息通知]</span> <a class="more-msg" ng-href="/message" data-event="14218"><em class="eqf-right"></em></a></h5><div class="msg-content" style="min-height: 83px;"><ul ng-if="NewMessageList.length" data-event="14217"><li class="msg" ng-repeat="NewMessageItem in NewMessageList" ng-bind-html="NewMessageItem.content"></li></ul><span ng-if="!NewMessageList.length">您暂时还没有消息！</span></div><h5><span class="title">[更新说明]</span><a class="more-msg" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=245" data-event="14220"><em class="eqf-right"></em></a></h5><div class="msg-content"><ul data-event="14219"><li class="msg" ng-repeat="newVersionItem in newVersionList"><a ng-href="{{newVersionItem.url}}" target="_blank">{{newVersionItem.name}}</a></li></ul></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("home/section/remind.html",'<div class="remind"><div class="title">亲爱哒，你还没有制作任何场景噢，马上开始制作吧！</div><div class="description">我们精心为你挑选了好多炫酷的样例，赶紧选一个试试吧，简单拖拉拽，轻松创建场景无阻碍！</div><div class="buttonGroup"><button class="btn createButton" ng-click="createScene()" data-event="14223">空白创建</button><a class="btn moreExample" href="/scene/list/sample" data-event="14224">更多样例</a></div><div class="sceneList"><div class="scene" ng-repeat="example in examples"><div class="cover"><div class="ribbon ribbon-badge" ng-if="example.price && !example.disCountFlag && example.isCompanyTemp != 1"><span class="ribbon-inner check">{{example.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="example.price && example.disCountFlag && example.isCompanyTemp != 1"><div class="discount-red discount-bg"><span class="discount-del">&nbsp{{example.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{example.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="!example.price && !example.disCountFlag && example.isCompanyTemp == 1"><span class="ribbon-inner isCompany">企业专属</span></div><div class="ribbon discount-detail" ng-if="example.price && example.disCountFlag && example.isCompanyTemp == 1"><div class="discount-bg"><span class="discount-del">&nbsp{{example.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{example.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="example.price && !example.disCountFlag && example.isCompanyTemp == 1"><span class="ribbon-inner isCompany">{{example.price}}秀点</span></div><div class="coverImage" style="background: url({{PREFIX_FILE_HOST + example.cover}}); background-size: cover;"></div><div class="hoverBack"><a class="preview" target="_blank" ng-click="openPreview(example);" data-event="14221"><div><em class="eqf-eye" style="font-size:18px"></em></div><span>预览</span></a> <a class="use" target="_blank" ng-click="openPreview(example);" data-event="14222"><div><em class="eqf-xiuziti" style="font-size:18px"></em></div><span>就这个</span></a></div></div><div class="sceneName">{{example.name}}</div></div></div><div class="cancel" ng-click="cancel()"><em class="eqf-wrong"></em></div></div><div ng-if="currentTpl.exemplarPreview ===true" preview-exemplar="" current-tpl="currentTpl" create-scene="createScene(currentTpl.tpl);" tpltype="{{1}}"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/console/group.tpl.html",'<div class="modal-header"><span ng-show="!title">新建组</span> <span ng-show="title">{{title}}</span></div><div class="modal-body add-new-cat" forbidden-list-close=""><input type="text" class="form-control" ng-model="group.name" placeholder="设置名称"></div><p ng-show="authError" style="text-align:center;">{{authError}}</p><div class="btn-contain btn-small"><a class="btn-main login" ng-click="confirm()">确认</a> <a class="btn-grey0 cancel" ng-click="cancel()">取消</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/console/oldVersionTip.tpl.html",'<div style="position: absolute;top: 300px;left: 50%;z-index: 100;"><div class="bind-email-guide"><h1><em>易企秀会员账号改版通知</em><span ng-click="$parent.showOldVersion = false;">&times;</span></h1><p style="padding-bottom: 0">尊敬的易企秀会员{{currentUser.loginName}}，您好！</p><p style="padding-bottom: 0">有您的陪伴，我们才不断成长！</p><p style="padding-bottom: 0">易企秀发布新的会员账号体系啦！</p><p style="line-height: 34px;padding-top: 10px;">但为了保障您的权益，您此前已购买的{{versionName}}账号，在有效期内({{currentUser.joinTime | date:\'yyyy年MM月dd日\'}}---{{currentUser.expiryTime | date:\'yyyy年MM月dd日\'}})，将继续享有原账号的功能和服务，请您放心使用！</p><div class="user-select"><button class="btn btn-primary" ng-click="$parent.showOldVersion = false;">知道了</button></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/console/transferscene.tpl.html",'<div class="modal-header" ng-show="transferScene"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" ng-click="cancel()">×</span></button><h4 class="modal-title">场景转赠</h4></div><div class="modal-body" ng-show="transferScene"><form class="form-horizontal"><div class="form-group"><label for="inputPassword3" class="col-sm-3 control-label">转赠账号</label><div class="col-sm-7"><input type="text" class="form-control" id="inputPassword3" ng-model="model.toUser" placeholder="受赠方的账号名称(可在用户中心查询)" ng-click="model.actionerrorFlag = false;"></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-3 control-label">选择平台</label><div class="col-sm-7"><div class="col-sm-6 platform-yqx" ng-click="selectPlatform(0)"><div class="radio-square" ng-class="{checked: (model.toPlatform === 0)}"><em></em></div><em>易企秀</em></div><div class="col-sm-6 platform-hyp" ng-click="selectPlatform(1);model.actionerrorFlag = false;"><div class="radio-square" ng-class="{checked: (model.toPlatform === 1)}"><em></em></div><em>海外版Hypefolio</em></div></div></div></form></div><div class="modal-footer transfer_tip_footer" ng-show="transferScene"><p class="transfer_tip"><span>*</span><em>转出后将不再拥有此场景</em></p><p class="error transfer_tip transfer_tip_error" ng-show="model.actionerrorFlag">{{actionerror}}</p><a class="modal-cancle" ng-click="cancel()">取消</a> <button type="button" class="btn btn-primary" ng-click="confirm()">确认</button></div><div ng-hide="transferScene" class="gift-success-tips" id="transfer_mes"><p><i>您已将此场景成功转送给</i><span style="padding:0 15px">{{model.toUser}}</span></p><a ng-click="submit()">x</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/ads.tpl.html",'<div id="ads_notice" ng-show="showAds"><span class="eqf-wrong" ng-click="close()"></span> <span class="arrow eqf-left" ng-show="showArrow" ng-click="toggle(\'left\')"></span> <span class="arrow eqf-right" ng-show="showArrow" ng-click="toggle(\'right\')"></span><div class="items"><ul ng-if="showAds"><li ng-repeat="ads in adsList" eqd-repeat-last="repeatOver"><img src="" ng-src="{{ads.path}}" alt=""></li></ul></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/print.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="main" class="eqc-print min_contain"><div class="info"><div class="content"><div class="title">轻设计</div><div class="items"><ul><li><a href="" ng-class="{active: tabView == \'create\'}" ng-click="showTab($event, \'create\')">开始设计</a></li><li><a href="" ng-class="{active: tabView == \'template\'}" ng-click="showTab($event, \'template\')">模板中心</a> <span class="point"></span></li><li><a href="" ng-class="{active: tabView == \'mine\'}" ng-click="showTab($event, \'mine\')">我的轻设计</a></li></ul></div><div class="create" ng-show="tabView != \'create\'"><a class="opacity-width-change" ng-click="showTab($event, \'create\')"><em class="eqf-plus2"></em> <span class="opacity-width-change">点击开始创建</span></a></div><div class="define" ng-show="tabView == \'create\'"><em class="eqf-plus2"></em> <a href="" ng-click="define()">自定义尺寸创建</a></div></div></div><eqd-create ng-show="tabView == \'create\'"></eqd-create><eqd-template ng-show="tabView == \'template\'"></eqd-template><eqd-mine ng-show="tabView == \'mine\'"></eqd-mine></div><div ng-include="\'footer.tpl.html\'"></div><div id="preview_wrap"><span class="eqf-wrong"></span><iframe id="pc_preview" width="100%" height="100%" scrolling="no" frameborder="0"></iframe></div><eqd-ads></eqd-ads>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/common/emptyList.html",'<div class="empty-list"><div class="pic" ng-class="{empty: (taskStatus && manageType !== \'task-scene\'), none: (!taskStatus || manageType === \'task-scene\') }"></div><div class="description"></div><div class="to-task"><p ng-if="manageType === \'task\'">去<a ng-href="show/task"><span>任务推广中心</span></a>看看正式发布的任务</p><p ng-if="manageType === \'order\'">去<a ng-href="order/new" target="_blank"><span>任务发布平台</span></a>发布我要推广的任务</p><p ng-if="manageType === \'task-scene\'">去<a ng-href="scene/list/sample"><span>样例中心</span></a>创建我的场景</p></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/common/orderTemplate.html",'<div class="detail-title pb20 highlight-color"><span class="order-name">{{orderDetail.taskName}}</span> <span ng-show="orderDetail.isOfficialTask === 1" class="official-logo">易企秀官方推广任务</span></div><div class="detail-left"><div class="detail-count p20"><div class="col fir-col"><p class="text-red"><span class="text-18">{{orderDetail.target ? orderDetail.budget : \'按推广量计算\'}}</span> <span ng-show="orderDetail.target">秀点</span></p><p class="pt10 highlight-color">推广预算</p></div><div class="col sec-col pl20"><p class="text-red"><span ng-show="orderDetail.isOfficialTask === 1">≈</span> <span>{{orderDetail.price}}PV/1秀点</span></p><p class="pt10 highlight-color">推广单价</p></div><div class="col third-col pl20"><p class="text-red"><span>{{orderDetail.target ? (orderDetail.target | fixnum ) + \'PV\' : \'上不封顶\'}}</span></p><p class="pt10 highlight-color">推广目标</p></div></div><div class="detail"><div class="p20 bb"><span>推广周期</span> <span ng-show="orderDetail.endDate" class="pl20 highlight-color">{{orderDetail.startDate | date:\'yyyy.MM.dd\'}}-{{orderDetail.endDate | date:\'yyyy.MM.dd\'}}</span> <span ng-show="!orderDetail.endDate" class="pl20 highlight-color">长期有效</span></div><div class="form p20"><div><span class="label">任务类型</span> <span class="text highlight-color">{{typeText}}</span></div><div><span class="label">其他需求</span> <span class="text highlight-color text-height">{{orderDetail.description}}</span></div><div><span class="label">推广类别</span> <span class="text highlight-color">{{payTypeText}}</span></div></div></div></div><div class="detail-right" ng-if="showTpl"><div thumb-tpl="" my-tpl="orderTpl" hide-del-btn="hideDelBtn" un-transform="unTransform" class="view-panel"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/common/panel.html","<div class=\"p-title\" ng-show=\"orderDetail.endDate\">{{orderDetail.startDate | date:'yyyy-MM-dd'}}至{{orderDetail.endDate | date:'yyyy-MM-dd'}}计划推广目标</div><div class=\"p-title\" ng-show=\"!orderDetail.endDate\">计划推广目标</div><div class=\"p-con p20\"><div>推广单价:&nbsp;<span ng-show=\"orderDetail.isOfficialTask === 1\">≈</span><span>{{orderDetail.price}}PV/1秀点</span></div><div>推广目标:&nbsp;<span>{{orderDetail.target ? (orderDetail.target | fixnum) + 'PV' : '上不封顶'}}</span></div><div>推广预算:&nbsp;<span>{{orderDetail.target ? orderDetail.budget + '秀点' : '按推广量计算'}}</span></div></div>")}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/common/panelEffect.html",'<div class="p-title">截止到{{orderDetail.remainBudgetUpdateTime | date: \'yyyy年MM月dd日\'}}的推广数据<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">免费使用易企秀提供的付费样例。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22514&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></div><div class="p-con p20"><div>参与人数: <span>{{receiverCount | fixnum}}人</span></div><div>总浏览量: <span>{{totalPvs | fixnum}}PV</span></div><div>剩余预算: <span>200秀点</span></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("regSuccess/console/applyComMes.tpl.html",'<div class="upgrad-mes"><div class="textbox-wrap"><label>企业名称</label> <input class="form-control" type="text" placeholder="企业名称" ng-model="companyInfo.name" ng-blur="checkName(companyInfo)" ng-class="{error:nameError}"> <span class="tips">必填</span> <span class="error_text"><em ng-show="nameError">{{nameError}}</em></span></div><div class="textbox-wrap"><label>企业邮箱</label> <input class="form-control" type="text" placeholder="企业邮箱" ng-class="{error:emailError}" ng-model="companyInfo.email" ng-blur="checkEmail(companyInfo)"> <span class="tips">必填</span> <span class="error_text"><em ng-show="emailError">{{emailError}}</em></span></div><div class="textbox-wrap"><label>联系人</label> <input class="form-control" type="text" placeholder="联系人" ng-class="{error:contactsError}" ng-model="companyInfo.contacts" ng-blur="checkcontacts(companyInfo)"> <span class="tips">必填</span> <span class="error_text"><em ng-show="contactsError">{{contactsError}}</em></span></div><div class="textbox-wrap"><label>联系地址</label> <input class="form-control" type="text" placeholder="联系地址" ng-class="{error:addressError}" ng-model="companyInfo.address" ng-blur="checkAddress(companyInfo)"> <span class="tips">必填</span> <span class="error_text"><em ng-show="addressError">{{addressError}}</em></span></div><div ng-if="userMobile != 1"><div class="textbox-wrap"><label>手机号码</label> <input class="form-control" type="text" placeholder="手机号码" ng-class="{error:telError}" ng-model="companyInfo.mobile"> <span class="tips">必填</span> <span class="error_text"><em ng-show="telError">{{telError}}</em></span></div><div><script type="text/javascript" load-script="" ng-src="{{validateCodeUrl}}"></script></div><div id="captcha-box"></div><div class="textbox-wrap"><label>验证码</label><div class="clearfix"><input type="type" class="form-control mobile fl" ng-class="{error:codeError}" placeholder="验证码" ng-model="companyInfo.code"> <span class="code" ng-show="!codeTip" ng-click="getImageCode()"><a id="submit-button">获取验证码</a></span> <span class="code enble" ng-show="codeTip">{{codeTip}}</span></div><span class="error_text"><em ng-show="codeError">{{codeError}}</em></span></div></div><a class="submit-button" ng-click="upgradeCompanyMessage(companyInfo)">提交信息</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/angle-knob.tpl.html",'<div class="sliderContainer"><div class="sliderKnob"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/anim.tpl.html",'<div ng-if="activeTab == \'anim\'" ng-controller="AnimConsoleCtrl"><div style="height:410px;"><div eqd-scroll="" style="height: 100%;" disable-mouse="true" prevent-exception="true"><div class="anim_area"><div class="anim-panels" style="padding-top:10px;" ng-if="animations.length"><section ng-repeat="animation in animations track by $index"><div class="style_list pr20 pl20 border-bottom" ng-class="{\'border-top\':($index==0 || opea.show),active:opea.show}" ng-init="opea.show=true" ng-click="opea.show=!opea.show"><em>动画</em>&nbsp;{{$index+1}}<div class="animation-opera fr"><span title="删除此动画" class="eqf-wrong" style="margin-right:10px;" ng-click="removeAnim($index, $event)"></span> <b class="caret" ng-if="opea.show"></b> <b class="caret off" ng-if="!opea.show"></b></div></div><div class="pl20 pr20" style="background-color:#fff;"><div ng-if="opea.show" class="style_list_angel clearfix"><label>方式</label><div class="flo_lef touming"><select style="width:100px;border:1px solid #C9C9C9;" ng-model="types[$index]" ng-change="animation.type=types[$index].id; changeAnimation(animation, $index)" ng-options="animType.name group by animType.cat for animType in animTypeEnum"><option value="-1">无</option></select></div></div><div ng-if="opea.show && animation.type == 7" class="style_list_angel clearfix"><label>速度</label><div class="clearfix touming"><div class="num" style="text-align:right;margin-top:4px;"><input type="checkbox" value="" ng-model="animation.linear" ng-true-value="1" onfocus="this.select()" style="margin-right:2px;margin-top:0px;"><em>匀速</em></div></div></div><div ng-if="animation.type != -1 && animation.type != null && opea.show"><form role="form"><div class="style_list_angel clearfix" ng-show="animation.type == 1 || animation.type == 2 || animation.type == 17 || animation.type == 19"><label style="padding-top:8px;">方向</label><div class="flo_lef touoming"><select style="color:#999" class="form-control" ng-model="directions[$index]" ng-change="animation.direction=directions[$index].id;changeAnimation(animation, $index)" ng-options="animDirection.name for animDirection in animDirectionEnum"></select></div></div><div class="style_list_angel" ng-show="animation.type != \'typer\'"><label>时间</label><div class="touming clearfix"><p class="num"><input limit-input="" class="input_kuang short" type="number" step="0.1" min="0" max="20" ng-model="animation.duration" onfocus="this.select()"></p><div class="slider" ui-slider-t="" ng-model="animation.duration" fixed="1" min="0" max="20"></div></div></div><div class="style_list_angel" ng-show="animation.type == \'typer\'"><label>间隔时间</label><div class="touming clearfix"><p class="num"><input limit-input="" class="input_kuang short" type="number" step="0.1" min="0" max="20" ng-model="animation.interval" onfocus="this.select()"></p><div class="slider" ui-slider-t="" ng-model="animation.interval" fixed="1" min="0" max="20"></div></div></div><div class="style_list_angel"><label>延迟</label><div class="touming clearfix"><p class="num"><input limit-input="" class="input_kuang short" type="number" step="0.1" min="0" max="20" onfocus="this.select()" ng-model="animation.delay"></p><div class="slider" ui-slider-t="" ng-model="animation.delay" fixed="1" min="0" max="20"></div></div></div><div class="style_list_angel" ng-show="animation.type != \'typer\'"><label>次数</label><div class="touming clearfix"><p class="num" style="float:left;margin-right:10px;"><input ng-disabled="animation.count" limit-input="" class="input_kuang short" type="number" min="1" max="10" ng-model="animation.countNum" onfocus="this.select()"></p><div class="checkbox-square" style="margin-left:50px;" ng-class="{checked: animation.count}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="animation.count"></div><em>循环</em></div></div></form></div></div></section></div><div class="add-anim"><a class="btn btn-sm green mr20" style="float:left;" ng-click="addAnim($event)"><span class="eqf-plus2"></span>添加动画</a> <a class="btn btn-sm blue" ng-click="previewAnim($event)"><span class="eqf-play2"></span>预览动画</a></div></div></div></div><div class="btn-option"><a class="btn btn-sm green" ng-click="cancel()">确定</a> <a class="btn btn-sm out-red" ng-click="clear()">清除动画</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/bg.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">素材库 <a ng-show="fileType ==\'0\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1921&page=1&extra=#pid6652"><span class="eqf-exclaquestion-sign"></span></a> <a ng-show="fileType ==\'1\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1934&page=1&extra=#pid6696"><span class="eqf-exclaquestion-sign"></span></a> <span ng-show="!authError" class="action">单击使用</span> <span ng-show="authError" class="action">{{authError}}</span></h4></div><div class="dialog-contain" id="container"><div class="dialog-content bg_console sound-flex clearfix"><div class="cate-title"><ul class="nav tabs-left" style="padding-top:0;"><li ng-class="{active: systemImages}"><a href="" ng-show="fileType == \'0\'" ng-click="switchToSystemImages(\'true\');getSystemFiles();" data-toggle="tab">背景库</a> <a href="" ng-show="fileType == \'1\'" ng-click="switchToSystemImages(\'true\');getSystemFiles();" data-toggle="tab">图片库</a></li><li ng-class="{active: !systemImages && !userTagId}"><a href="" ng-show="fileType == \'0\'" ng-click="switchToSystemImages(\'false\');getUserFiles(0)" data-toggle="tab">我的背景</a> <a href="" ng-show="fileType == \'1\'" ng-click="switchToSystemImages(\'false\');getUserFiles(0)" data-toggle="tab">我的图片</a></li><li class="add-tag clearfix" ng-if="type != \'p\' && type !=\'n\'"><a style="width:100px;" ng-click="createTag();"><span class="eqf-plus"></span>&nbsp;<em>添加分组</em></a> <a style="width:100px;" href="main/print/create" target="_blank"><span class="eqf-write"></span>在线制作</a></li><li class="my-bg-upload bg-img-upload blue" qiniu-upload-directive="" id="pickfiles" resource-type="resourceType" tag-id="saveTagId" file-type="fileType" max-file-size="3" token-type="\'image\'"><div class="hint--top hint--rounded" data-hint="{{dataHintPrev}}支持格式：jpg、gif、png、jpeg，一次最多上传6张"><span class="eqf-update"></span><em>上传</em></div></li></ul><ul class="nav tabs-left user-tabs" style="padding-top:0"><li ng-class="{active: userTagId == tag.id && !systemImages}" ng-repeat="tag in tagList" ng-click="switchToSystemImages(\'false\');getUserFiles(tag.id)" ng-hover="" resource="tag"><a href="" data-toggle="tab"><span class="eqf-wrong2 del-tag" ng-if="tag.show && type != \'p\' && type != \'n\'" style="float:right;margin-top:15px;opacity:0.8;" ng-click="deleteTag(tag.id, $index)"></span> {{tag.name}}</a></li><li ng-class="{active:userTagId==\'history\'}"><a href="" ng-click="switchToSystemImages(\'false\');getHistory();" data-toggle="tab">最近使用</a></li></ul></div><div class="cate-list bg-rig"><div id="bg_contain"><div class="tab-pane active tab-head" ng-show="systemImages"><div class="img_list"><div class="category_list clearfix"><ul class="category_list_container clearfix"><li class="category_item" ng-class="{\'active\': sysCatId == \'0\'}" ng-click="getSysCatAndList(\'0\')" data-event="1200601"><span>最新</span></li><li class="category_item" ng-class="{\'active\': sysCatId == sysCategory.value}" ng-repeat="sysCategory in sysCategoryList|filter:{\'lang\':\'zh_CN\'}" ng-click="getSysCatAndList(sysCategory.value)" data-event="{{1200601 + $index + 1}}">{{sysCategory.name}}</li></ul></div><div class="cat_two_list clearfix"><ul><li ng-repeat="sysTag in sysTagList" ng-class="{\'active\': sysTagId == sysTag.id}" ng-click="getSysImgByTag(sysTag.id);" style="cursor:pointer;">{{sysTag.name}}</li><li ng-if="bFlagType == \'3\' && sysCatId==\'1301\'" class="category_item" ng-class="{\'active\': sysTagId == \'pure\'}" ng-click="getSysImgByTag(\'pure\')"><span>纯色背景</span></li></ul></div></div></div><div ng-show="userTagId==\'history\'" class="tab-pane active tab-head"></div><div class="tab-pane active tab-head" ng-show="!systemImages && type != \'p\' && type != \'n\' && userTagId!=\'history\'"><div class="my-bg"><span style="float:right" ng-if="!userTagId"><a class="manage-all" ng-show="!mangeObj.manageAll" ng-click="mangeObj.manageAll = true;"><em>管理</em></a> <a class="mul-del" ng-show="mangeObj.manageAll" ng-click="deleteFile();"><em>删除</em></a> <a class="cancel-all" ng-show="mangeObj.manageAll" ng-click="cancelSelect();mangeObj.manageAll = false;"><em>取消选择</em></a></span> <span style="float:right" ng-if="userTagId"><span ng-if="userTagId && mangeObj.manageAll" style="cursor:pointer;" class="cancel-all" ng-click="unbindTag(userTagId);">移除</span> <a class="cancel-all" ng-show="mangeObj.manageAll" ng-click="cancelSelect();mangeObj.manageAll = false;"><em>取消选择</em></a> <a class="manage-all" ng-show="!mangeObj.manageAll" ng-click="mangeObj.manageAll = true;"><em>管理</em></a></span> <span><a class="assign-group drop-area" ng-click="showObj.showGroup=!showObj.showGroup"><em>分组</em>&nbsp;&nbsp;&nbsp; <span class="eqf-down2"></span></a></span></div><div class="group-panel" ng-if="showObj.showGroup && tagList.length" auto-close=""><ul><li ng-repeat="tag in tagList" ng-click="assignTag(tag.id)">{{tag.name}}</li></ul></div></div><div class="img_list"><div class="img_list_container photo_list"><ul class="img_box clearfix" ng-class="{\'img-box-his\':userTagId==\'history\'}"><li ng-if="!systemImages && uploader.queue.length" class="imgList" ng-repeat="item in uploader.queue.slice().reverse()"><div class="progress" style="position: absolute;top: 50%;margin-top: -10px;width: 90%;margin-left: 5%;"><div style="background-color:#08a1ef" class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></li><li id="userlist" ng-if="sysTagId != \'pure\'&& sysCatId != \'pure\'" class="imageList" ng-repeat="img in imgList" ng-click="replaceByClick(img, $shape, $event);switchSelect(img, $shape, $event);" resource="img" style="\'position: relative;"><span ng-if="img.libType == 1" class="imagesYiTo"><a href="http://www.yituw.com/searchs/DoSearch/?search=search&Srange_zh=chinese+new+year+2016&mode=&keyword=chinese+new+year+2016&Srange=" target="_blank" tooltip-placement="right" tooltip="亿图网正版授权" class="YiToLogo" ng-click="$event.stopPropagation();"><img ng-src="{{CLIENT_CDN}}assets/images/1tu.png"></a></span> <span ng-if="img.libType == 2" class="imagesYiTo"><a href="http://588ku.com/?m=element&keyword=qixi&h=eqxiu" target="_blank" tooltip-placement="right" tooltip="千库网正版授权" class="YiToLogo" ng-click="$event.stopPropagation();"><img ng-src="{{CLIENT_CDN}}assets/images/qianku.svg"></a></span> <img ng-src="{{PREFIX_FILE_HOST + img.tmbPath + img.rule}}" responsive-image="" file="img" ng-class="{\'add-shadow\': img.show && systemImages && type != \'p\' && type != \'n\'}"><div class="img-mask" ng-show="type == \'p\' || type == \'n\' || ((selectedImages.length || img.show || img.selected || mangeObj.manageAll) && !systemImages)"><a class="del-file ope-img" ng-if="!mangeObj.manageAll && !userTagId && type != \'p\' && type != \'n\'" ng-click="deleteFile(img.id)"><span class="eqf-wrong2 ope-icon"></span></a> <a class="sel-file ope-img" ng-class="{\'sel-active\': img.selected, \'hide-del\': mangeObj.manageAll || userTagId || type == \'p\' || type == \'n\'}"><span class="eqf-yes ope-icon"></span></a></div></li><li id="userlist" class="imageList" ng-repeat="img in imgList" ng-if="sysTagId == \'pure\'|| sysCatId == \'pure\'" resource="img" ng-click="replaceByClick(img)" ng-class="{\'add-shadow\': img.show && systemImages && type != \'p\' && type != \'n\'}"><div ng-style="{\'background-color\': img.color}" style="position: relative;height:100%;width:63px;margin: 0 auto;"></div></li></ul></div></div></div></div><div class="modal-footer bg-pagination clearfix no-line"><div class="fl mr20" ng-show="numPages > 1 && userTagId!=\'history\'"><pagination style="float: left" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="首页" last-text="尾页" max-size="5" items-per-page="pageSize" total-items="totalItems" ng-model="$parent.currentPage" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="$parent.toPage" ng-keyup="$event.keyCode == 13 ? getImgByPage() : null"><span class="fl">页</span> <a ng-click="getImgByPage()" class="go">确定</a></div></div><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="replaceImage();">确定</a></div></div></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/button.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">按钮名称 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=5051&extra="><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">每个场景只能添加一个提交按钮</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain"><div class="modify_area tel_title tab-same clearfix" style="padding-left:30px;"><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style="button.btnStyle" ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span></div><div class="dialog-content"><form class="form-contain" role="form"><div class="modify_area form-list clearfix" style=""><label class="form-label" style="width:106px;">按钮名称</label><div class="form-input" style="width: 400px;margin-left:10px;"><input type="text" check-count="40" ng-model="model.title" ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus="" stop-propagation="" style="width: 296px;"></div></div></form></div></div><div class="dialog-contain rating-content"><div class="form_console dialog-content rating-preview-design"><div class="modify_area rating rating-design"><div class="rating-group"><span class="title">提示类型</span><div class="rating-choice"><div class="btn-group"><label class="btn btn-rating" ng-model="model.layout" btn-radio="\'rating-l\'" style="line-height: 40px;width:80px;" ng-click="model.showPic=false;">纯文字</label> <label class="btn btn-rating" btn-radio="\'rating-m\'" style="line-height: 40px;width:80px;margin-left: 28px;" ng-click="model.showPic=true;" ng-model="model.layout">上图下文</label> <label class="btn btn-rating" ng-model="model.layout" btn-radio="\'rating-s\'" style="line-height: 40px;width:80px;margin-left: 28px;" ng-click="model.showPic=true;">上文下图</label></div></div></div><div class="rating-group"><span class="title">提示信息</span><div class="rating-choice"><input type="text" ng-model="model.text" class="form-control" check-count="50" id="ratingTitle" stop-propagation="" placeholder="谢谢您的参与!"></div></div><div class="rating-group" style="position: relative;"><div class="checkbox-square" ng-class="{checked: model.checkedLink}" style="position: absolute;left:-34px;"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="model.checkedLink" name="iCheck"></div><span class="title">文字外链</span><div class="rating-choice"><input type="text" class="form-control" ng-model="model.link" check-count="50" id="ratingTitle" stop-propagation="" placeholder="链接地址" ng-disabled="!model.checkedLink"></div></div><div class="rating-group" ng-show="model.showPic"><span class="title">提示图片</span><div class="rating-choice"><a class="btn blue mr20 upload" ng-click="openImageModal()">上传</a><div class="see-image" ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + model.imgSrc) + \')\',\'background-size\':\'cover\'}" style="top:340px;left:240px; width:120px;height: 120px;background-color:rgba(0,0,0,0);"></div></div></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()" ng-init="feedback=false">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/category.tpl.html",'<div class="modal-header"><span>创建分类</span></div><div class="modal-body add-new-cat"><input type="text" class="form-control" ng-model="category.name" placeholder="分类名称" autofocus="" stop-propagation=""></div><p ng-show="authError" style="text-align:center;font-size:12px;color:#ff0000">{{authError}}</p><div class="btn-contain btn-small"><a ng-click="confirm()" class="btn-main login">确定</a> <a ng-click="cancel();" class="btn-grey0">取消</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/chartStyle.tpl.html",'<div class="style_list_angel charts_group clearfix"><div ng-if="elemDef.properties.chartType==\'pie\'"><label>扇区个数</label><select class="chart-select" ng-model="charts.sectorNum"><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option></select></div><div class="style_list_angel clearfix"><label>标题名</label> <input type="text" ng-model="charts.chartTitle" style="width:150px;"></div><div class="style_list_angel clearfix"><label>图例设置</label><select legend-style="" class="chart-select" ng-model="charts.legPosition"><option value="position-align">横向排列</option><option value="position-left">纵向居左</option><option value="position-right">纵向居右</option><option value="position-none">不显示</option></select></div><div class="style_list_angel clearfix"><label style="width: 85px;">标签字体颜色</label><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.options.scaleFontColor}" ng-model="charts.options.scaleFontColor" colorpicker="rgba"></a> <input class="flo_right" style="width:90px;" style-input="" elem-id="{{elemDef.id}}" ng-model="charts.options.scaleFontColor" type="text"></div></div><table class="pie-table" ng-if="elemDef.properties.chartType==\'pie\'"><tr ng-repeat="segment in charts.segments"><td><input class="data-label" type="text" ng-model="segment.label" ng-change="maxLength20()"></td><td><input class="data-value" type="text" ng-model="segment.value"></td><td ng-if="elemDef.properties.chartType==\'pie\'"><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: segment.color}" ng-model="segment.color" colorpicker="rgba" y="{{scrollTop}}"></a></div></td></tr></table><a ng-if="elemDef.properties.chartType!=\'pie\'" class="btn btn-primary" ng-click="showEditDataView();" style="margin-top: 10px;">编辑表单数据</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/chartViewEdit.tpl.html",'<div class="viewData"><div class="explain">表格中的一行代表x轴上一个关键点数；一列代表一个类型的数据</div><table id="chart-table" ng-if="elemDef.properties.chartType!=\'pie\'"><tr><td>图例名</td><td><input type="text" ng-model="charts.lengends[0]" ng-change="maxLength20()"></td><td><input type="text" ng-model="charts.lengends[1]" ng-change="maxLength20()"></td><td><input type="text" ng-model="charts.lengends[2]" ng-change="maxLength20()"></td></tr><tr><td>填充色</td><td><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.fillColors[0]}" ng-model="charts.fillColors[0]" colorpicker="rgba"></a></div></td><td><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.fillColors[1]}" ng-model="charts.fillColors[1]" colorpicker="rgba"></a></div></td><td><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.fillColors[2]}" ng-model="charts.fillColors[2]" colorpicker="rgba"></a></div></td></tr><tr ng-repeat="segment in charts.segments"><td><input type="text" ng-model="segment.label" ng-change="maxLength20()"></td><td><input type="text" ng-model="segment.value1"></td><td><input type="text" ng-model="segment.value2"></td><td><input type="text" ng-model="segment.value3"></td></tr></table><a class="btn btn-sm btn-chart green" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/compstyle.tpl.html",'<div class="style_list border-bottom pl20" ng-click="openExpore(\'showSetting\')"><span>填空设置</span><b class="caret" ng-show="showSetting"></b><b class="caret off" ng-show="!showSetting"></b></div><div class="style_con_hei" ng-show="showSetting"><div class="style_list_angel clearfix"><label>名称</label><div class="color_select clearfix"><input class="flo_right" check-count="16" style="width:140px;" ng-model="setModel.setlabel" type="text"> <span class="countSpan">{{(setModel.setlabel?countCharacters(setModel.setlabel.trim()):0)}}/16</span></div></div><div class="style_list_angel clearfix"><label>状态</label><div class="color_select clearfix"><select style="width:140px;border:1px solid #C9C9C9;float: right;" ng-model="setModel.setstatus" ng-options="status.value as status.name for status in statusArr"></select></div></div><div class="style_list_angel clearfix"><label>备注</label><div class="color_select clearfix"><input class="flo_right" style="width:140px;" ng-model="setModel.setremark" type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type==2 || elemDef.type==201"><label>字间距</label><div class="color_select clearfix"><select style="width:140px;border:1px solid #C9C9C9;float: right;" ng-model="cssModel.letterSpacing" ng-options="wordLine.value as wordLine.name for wordLine in wordLineList"></select></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type==2 || elemDef.type==201" comp-style-set="" elem-id="{{elemDef.id}}" css-item="{{cssModel}}"><div class="css-font hint--bottom hint--rounded" data-hint="加粗" ng-click="bold();"><i class="eqf-b"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="倾斜" ng-click="italic()"><i class="eqf-I"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="下划线" ng-click="underLine();"><i class="eqf-U"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="删除线" ng-click="delLine();"><i class="eqf-del2"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="居左" ng-click="textAlign(\'left\');"><i class="eqf-leftword"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="居中" ng-click="textAlign(\'center\');"><i class="eqf-minddleword"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="居右" ng-click="textAlign(\'right\');"><i class="eqf-rightword"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="添加超链接" ng-click="addLink();"><i class="eqf-link"></i></div><div class="css-font hint--bottom hint--rounded" data-hint="清除超链接" ng-click="removeLink()"><i class="eqf-linkout"></i></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/counter.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">计数 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13239&page=1&extra=#pid104204"><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">可以更换自己的图标</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain counter"><div class="tab-same"><span ng-class="{\'spanborder\': model.properties.icon == \'eqf-love\'}"><a ng-click="chooseEqfont(\'eqf-love\')"><span class="eqf-love"></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-good\'}"><a ng-click="chooseEqfont(\'eqf-good\')"><span class="eqf-good"></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-flower2\'}"><a ng-click="chooseEqfont(\'eqf-flower2\')"><span class="eqf-flower2"></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-vote\'}"><a ng-click="chooseEqfont(\'eqf-vote\')"><span class="eqf-vote"></span></a></span><div ng-class="{\'spanborder\': model.properties.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint="上传图片大小不超过3M，支持上传格式：jpg、png、gif" ng-click="openImageModal()"><em class="eqf-top-pic" style="font-size:16px;"></em><em>自定义</em></div></div><div class="form_console dialog-content"><div class="modify_area"><div class="counter-group" ng-show="model.properties.imgSrc"><span class="title">计数图标</span><div class="form-image btn-small counter-choice"><img style="width: 115px;height: 115px;" ng-src="{{PREFIX_FILE_HOST + model.properties.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture" ng-click="openImageModal()">更换图片</a></div></div><div class="counter-group"><span class="title">颜色</span><div class="counter-choice"><div style="display: inline-block; height:20px; margin-right: 5px;"><eqd-input-color select-color="model.properties.color" direction="bottom" theme="flo_lef" notify="grid" x="-1" w="37" h="30"></eqd-input-color></div><input class="color-picker-input" ng-model="model.properties.color" type="text"></div></div><div class="counter-group"><span class="title">字号</span><div class="counter-choice"><div class="btn-group"><label class="btn btn-counter" ng-model="model.properties.size" btn-radio="\'counter-l\'">大</label> <label class="btn btn-counter" ng-model="model.properties.size" btn-radio="\'counter-m\'">中</label> <label class="btn btn-counter" ng-model="model.properties.size" btn-radio="\'counter-s\'">小</label></div></div></div><div class="counter-group"><span class="title">布局</span><div class="counter-choice"><div class="btn-group"><label class="btn btn-counter" ng-model="model.properties.layout" btn-radio="\'counter-lr\'">左右</label> <label class="btn btn-counter" ng-model="model.properties.layout" btn-radio="\'counter-tb\'">上下</label></div></div></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/cropimage.tpl.html",'<div class="dialog-contain cropimage"><div class="dialog-head"><h1>图片裁切</h1><p style="margin-top:0">请根据您的需要，点击自定义或匹配单签上方按钮进行裁切</p></div><div class="crop-content dialog-content"><div class="crop-control"><ul><li ng-class="{active: !fit}"><div class="pl"><div class="check" ng-click="fit = false"></div><div class="cha text-center">自定义</div></div><div class="pr"><div class="kuan cha" ng-show="!fit">宽度: <span class="cropWidth"></span></div><div class="kuan cha" ng-show="!fit">高度: <span class="cropHeight"></span></div><div class="kuan cha"><input type="checkbox" ng-disabled="fit" ng-model="lockRatio">锁定当前比例</div></div></li><li ng-class="{active: fit}"><div class="pl"><div class="check" ng-click="fit = true"></div><div class="cha text-center">匹配当前</div></div><div class="pr"><div class="kuan cha" ng-show="fit">宽度: <span class="cropWidth"></span></div><div class="kuan cha" ng-show="fit">高度: <span class="cropHeight"></span></div><div class="kuan cha">匹配当前图片框比例</div></div></li><li class="crop-btn fr"><a class="btn-main" href="" ng-click="crop()">确定</a> <a class="btn-grey0" style="margin-top:20px;" href="" ng-click="cancel()">取消</a></li></ul></div><div class="image_crop"><img id="target"></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/customActivities.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">企业定制活动</h4></div><div class="modal-body invoice" style="height:415px;overflow: hidden;padding:20px 20px 0 20px;"><form class="form-horizontal"><div class="form-group clearfix"><label style="line-height:30px;text-align:center;" class="col-sm-3">活动主题</label><div class="col-sm-8"><input type="text" ng-disabled="formDis" class="form-control" ng-model="active.title" maxlength="24" required=""></div></div><div class="form-group clearfix"><label style="line-height:30px;text-align:center;" class="col-sm-3">活动时间</label><div class="col-sm-4"><p class="input-group datepicker"><input type="text" class="form-control" datepicker-popup="yyyy/MM/dd" ng-model="active.startDate" is-open="opened1" max-date="active.endDate" datepicker-options="{\'formatYear\':\'yy\',startingDay:1}" ng-disabled="formDis" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-disabled="formDis" ng-click="opened1 = true;opened=false;$event.stopPropagation();$event.preventDefault();"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div style="float:left;line-height: 30px;">-</div><div class="col-sm-4" style="padding-left:10px;padding-right:20px;"><p class="input-group datepicker"><input type="text" class="form-control" ng-disabled="formDis" datepicker-popup="yyyy/MM/dd" ng-model="active.endDate" min-date="active.startDate" is-open="opened" datepicker-options="{\'formatYear\':\'yy\',startingDay:1}" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-disabled="formDis" ng-click="opened = true;opened1=false;$event.stopPropagation();$event.preventDefault();"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="form-group clearfix" id="container"><label style="line-height:30px;text-align:center;" class="col-sm-3">活动描述</label><div class="col-sm-8"><span class="mr20" ng-if="active.introductionName">{{active.introductionName}}<em class="eqf-wrong" style="margin-left:10px;cursor:pointer;" ng-click="removeIntro()"></em></span><div class="btn blue mr20 upload" style="cursor: pointer;position: relative;" ng-disabled="formDis" qiniu-upload-directive="" id="pickfiles" resource-type="resourceType" tag-id="userTagId" file-type="fileType" token-type="\'attach\'">上传</div></div></div></form></div><div class="modal-footer ml20 mr20"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="ok()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/dropdown.tpl.html",'<div ng-if="activeTab == \'dropdown\'" ng-controller="DropdownConsoleCtrl"><div class="styleDropdown"><section ng-show="elemDef.type ==\'z\'"><div class="mainAttribute"><div class="component" ng-show="isTplEditor"><label class="componentLabel">填空名称</label> <input class="flo_right" style="width: 165px;" check-count="16" ng-model="setModel.setlabel" type="text"> <span class="countSpan">{{(setModel.setlabel?countCharacters(setModel.setlabel.trim()):0)}}/16</span></div><div class="component" ng-show="isTplEditor"><label class="componentLabel">填空状态</label><select class="flo_right" style="border:1px solid #C9C9C9;width:165px;" ng-model="setModel.setstatus" ng-change="" ng-options="status.value as status.name for status in statusArr"></select></div><div class="component" ng-show="isTplEditor"><label class="componentLabel">填空备注</label> <input class="flo_right" style="width: 165px;" ng-model="setModel.setremark" type="text"></div><div class="component"><label class="componentLabel">默认选项</label><div><select class="componentSelect" ng-change="checkPlaceholder();" ng-model="currentParam.selectedOption" ng-options="option.label for option in model.choices.options"><option value="">空</option></select></div></div><div class="component"><label class="componentLabel">占位文本</label> <input class="flo_right placeHolderInput" type="text" check-count="20" ng-model="model.placeholderText" ng-disabled="currentParam.placeholderAvaiable ===false"> <span class="countSpan">{{(model.placeholderText?countCharacters(model.placeholderText.trim()):0)}}/20</span></div><div class="component" style="height:37px;"><label class="componentLabel">必填</label><div class="checkbox-square" ng-class="{checked: elemDef.required}" style="margin-top: 2px;"><em class="eqf-yes2"></em> <input type="checkbox" ng-true-value="required" ng-model="elemDef.required" name="iCheck"></div></div><div class="component" style="margin-right: 0px;border-bottom: 0px;"><div><div class="optionTitle"><span text="">选项</span></div><div><div eqd-scroll="" ng-style="{true:{\'height\':\'115px\'},false:{\'height\':\'220px\'}}[isTplEditor]" disable-mouse="true" prevent-exception="true"><div><div class="optionPart" ng-repeat="option in model.choices.options"><input class="optionInput" type="text" check-count="20" stop-propagation="" ng-model="option.label"> <span class="optionSpan">{{(option.label?countCharacters(option.label.trim()):0)}}/20</span><div class="iconPart"><a class="iconPlus"><span class="eqf-plus iconBlue" ng-click="addNewOption($index)"></span></a> <a class="iconMinus"><span class="eqf-delete2 iconRed" ng-click="deleteTheOption($index)"></span></a></div></div></div></div><div class="anim_area" style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px);"><div class="add-anim" style="padding-left: 0px;"><a class="btn btn-sm green mr20" style="float:left" ng-click="addNewOption(model.choices.options.length)"><span class="eqf-plus2"></span>增加选项</a></div></div></div></div></div></div></section></div><div class="btn-option"><a class="btn btn-sm green" ng-click="cancel()">确定</a> <a class="btn btn-sm out-red" ng-click="clear()">清除属性</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/gridGuideSetting.tpl.html",'<div class="grid-guide-setting"><div class="setting-group"><span>网格开关</span><div class="setting-choice"><switch-btn ng-model="config.gridState"></switch-btn></div></div><div class="setting-group"><laber style="height:24px;">网格颜色</laber></div><div class="setting-group" style="height: 44px;"><eqd-input-color select-color="grid.color" default-color="\'rgba(0,0,255,1)\'" direction="left" notify="grid" x="-18"></eqd-input-color></div><div class="setting-group"><span>智能参考</span><div class="setting-choice"><switch-btn ng-model="config.guideState"></switch-btn></div></div><div class="setting-group"><span>吸附效果</span><div class="setting-choice"><switch-btn ng-model="config.snapState"></switch-btn></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/imageCrop.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{cropOption.title}} <span class="action">{{cropOption.desc}}</span></h4></div><div class="dialog-contain cropimage"><div class="crop-content dialog-content clearfix"><div class="image_crop crop-img-cut" ctype="{{cropOption.type}}" ng-class="{\'bg-crop\': !cropOption.showItems}"><img id="target" eqx-crop-preview="" ng-src="{{PREFIX_FILE_HOST + cropOption.imgSrc}}"></div><div class="cut-size" ng-show="cropOption.showItems"><ul><li ng-repeat="item in cropOption.cropItems"><input type="radio" id="{{item.desc}}" name="cropSize" ng-model="cropOption.currentItem" ng-value="item" ng-change="cropItemChange(item)"> <label for="{{item.desc}}">{{item.desc}}</label> <span ng-if="item.lock != null"><input type="checkbox" id="lock" ng-model="item.lock" ng-change="cropItemChange(item)"> <label for="lock">锁定</label></span></li></ul></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="ok()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/input.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">输入框组件 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1935&page="><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">在场景中添加输入框可以用来收集数据信息</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain"><div class="modify_area tel_title tab-same change-title clearfix" style="padding-left:30px;"><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a style="border-width: 2px !important;" ng-style="button.btnStyle" ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span></div><div class="form_console dialog-content"><div class="modify_area"><form class="form-contain"><div class="form-list clearfix" style="margin-left:70px;"><label class="form-label">输入框名称：</label><div class="form-input"><input style="width:350px;float:left" type="text" ng-model="model.title" check-count="40" ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus="" stop-propagation=""><div class="checkbox-square" ng-class="{checked: model.required}"><em class="eqf-clickmore"></em> <input type="checkbox" ng-true-value="required" ng-model="model.required" name="iCheck"></div><label for="checkbox_required" class="ml20">必填</label></div></div></form><div class="customized_container clearfix"><div class="radio-square" ng-class="{checked: model.type==\'501\'}"><em></em> <input type="radio" id="input_name" ng-model="model.type" ng-change="model.title=\'姓名\'" value="501"></div><label for="input_name">姓名</label><div class="radio-square" ng-class="{checked: model.type==\'502\'}"><em></em> <input type="radio" id="input_phone" ng-model="model.type" ng-change="model.title=\'电话\'" value="502"></div><label for="input_phone">电话</label><div class="radio-square" ng-class="{checked: model.type==\'503\'}"><em></em> <input type="radio" id="input_email" ng-model="model.type" ng-change="model.title=\'邮箱\'" value="503"></div><label for="input_email">邮箱</label><div class="radio-square" ng-class="{checked: model.type==\'504\'}"><em></em> <input type="radio" id="input_text" ng-model="model.type" ng-change="model.title=\'文本\'" value="504"></div><label for="input_text">文本</label></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/link-component.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">链接组件 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13069&extra"><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">两种链接：可以跳转到场景外部的链接，或者内部导航链接</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain link-component"><div class="tab-same"><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style="button.btnStyle" ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span><div ng-class="{\'spanborder\': model.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint="上传图片大小不超过3M，支持上传格式：jpg、png、gif" ng-click="openImageModal()"><em class="eqf-top-pic"></em><em>自定义</em></div></div><div class="link-modal dialog-content"><form class="form-contain"><div class="form-list clearfix" ng-if="!model.imgSrc"><label for="buttonName" class="form-label">按钮名称：</label><div class="form-input"><input id="buttonName" class="btn-name" style="width:300px;" type="text" ng-model="model.title" check-count="40" ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus="" stop-propagation=""></div></div><div class="form-list clearfix" ng-if="model.imgSrc"><label class="form-label">按钮图片：</label><div class="form-image btn-small"><img ng-src="{{PREFIX_FILE_HOST + model.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture" style="text-align:center;font-size:12px;" ng-click="openImageModal()">更换图片</a></div></div><div class="form-list clearfix" style="position: relative;"><label for="externalRadio" class="form-label"><input type="radio" name="externalRadio" id="externalRadio" ng-model="model.url.link" value="external" ng-change="changed()" style="margin:0px 5px 0 0;"><span>网站地址：</span></label><div class="form-input"><input style="width:300px;" type="text" ng-model="model.url.externalLink" name="externalLink" id="externalLink" placeholder="网站地址" ng-disabled="url.link == \'internal\'" ng-change="selectRadio(\'external\')" limit-link-length="" stop-propagation=""> <a style="font-size: 16px;display: inline-block; margin-top: 5px;background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px;" ng-show="url.link == \'external\'" class="delete-link" ng-click="removeLink(\'external\')"></a></div><a href="http://dwz.cn/" style="text-decoration: underline;color: #08A1EF;position: absolute;top: 10px;right: -30px;font-size:12px;" target="_blank">生成短链接</a></div><div class="form-list clearfix"><label for="internalRadio" class="form-label"><input type="radio" name="internalRadio" id="internalRadio" value="internal" ng-model="model.url.link" ng-change="changed()" style="margin:0px 5px 0 0;"><span>场景页面：</span></label><div class="form-input"><eqx-select class="select-sm border-width select-contain" model="model.url.internalLink" change="selectRadio(\'internal\')"><eqx-select-option value="null">选择场景页面</eqx-select-option><eqx-select-option value="page.id" ng-repeat="page in pageList">{{page.name}}</eqx-select-option></eqx-select><a style="display: inline-block;font-size: 16px; background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px;" ng-show="url.link == \'internal\'" ng-click="removeLink(\'internal\')"></a></div></div></form></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/link.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">链接组件 <span class="action">可以链接到场景其他页面或者链接网站地址</span></h4></div><div class="dialog-contain"><div class="link-modal dialog-content"><form class="form-contain"><div class="form-list clearfix"><label for="externalRadio" class="form-label" ng-init="url.link=\'external\'"><div class="radio-square" ng-class="{checked:url.link==\'external\'}"><em></em> <input type="radio" name="externalRadio" id="externalRadio" ng-model="url.link" value="external" ng-change="changed()" style="margin:0px;"></div><em>网站地址：</em></label><div class="form-input"><input class="" style="height:35px;width:300px;" type="text" ng-model="url.externalLink" name="externalLink" id="externalLink" placeholder="http://" ng-disabled="url.link == \'internal\'" ng-change="selectRadio(\'external\')" limit-link-length=""> <a style="font-size: 16px;display: inline-block; margin-top: 5px;background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px;" ng-show="url.link == \'external\'" class="delete-link" ng-click="removeLink(\'external\')"></a></div><a href="http://dwz.cn/" style="text-decoration: underline;color: #08A1EF;position: absolute;top: 10px;right: -30px;" target="_blank">生成短链接</a></div><div class="form-list clearfix"><label for="internalRadio" class="form-label"><div class="radio-square" ng-class="{checked:url.link==\'internal\'}"><em></em> <input type="radio" name="internalRadio" id="internalRadio" value="internal" ng-model="url.link" ng-change="changed()" style="margin:0px;"></div><em>场景页面：</em></label><div class="form-input"><eqx-select class="select-sm select-contain border-width fl" model="url.internalLink" change="selectRadio(\'internal\')"><eqx-select-option value="page" ng-disabled="url.link == \'external\'" ng-repeat="page in pageList">{{page.name}}</eqx-select-option></eqx-select><a style="margin-left:10px;display: inline-block;font-size: 16px; background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px;" ng-show="url.link == \'internal\'" ng-click="removeLink(\'internal\')"></a></div></div></form></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/map.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">地图</h4></div><div class="map_console"><div class="search_area"><div class="input-group"><input type="text" class="form-control" ng-model="address" ng-keyup="$event.keyCode == 13 ? searchAddress(address) : null" placeholder="请输入地名"> <span class="input-group-btn"><button ng-click="searchAddress(address)" class="btn btn-default" type="button">搜索</button></span></div><h5 class="result-count" ng-if="pois">搜索结果：{{pois.length}}条</h5><div class="result"><div eqd-scroll="" style="height: 100%;"><ul><li ng-class="{active:choosePoi.id==poi.id}" ng-repeat="poi in pois" ng-click="choosePosition(poi)"><i class="circle">{{$index+1}}</i><h5 class="name">{{poi.name}}</h5><p class="address">{{poi.address}}</p></li></ul></div></div></div><div eqd-map="" class="map-contain" center="$parent.center" zoom="$parent.zoom" bounds="$parent.bounds"><eqd-map-mark position="markerP"></eqd-map-mark></div></div><div class="modal-footer ml20 mr20"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="ok()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/microweb.tpl.html",'<div class="button_console"><div class="modify_area"><div>导航样式:<ul><li ng-click="selectColor(color)" ng-class="{colorborder: model.color == color.backgroundColor}" style="display: inline-block; margin: 10px;" ng-repeat="color in backgroundColors"><div style="width: 50px; height: 30px; margin: 10px; cursor:pointer;" ng-style="color"></div></li></ul></div></div><div class="divider" style="margin-top: 10px; height: 1px; background: #ccc;"></div><div class="modify_area"><div><ul class="clearfix" style="left:50%;margin-left:-160px;position:relative;height:65px;"><li class="title_color" ng-class="{colorborder:labelIndex == $index && labelName.mousedown,selectedcolor: labelName.selected,whitecolor: labelName.color.backgroundColor == \'#fafafa\'}" ng-click="switchLabel(labelName, $index)" style="display: inline-block;float:left;" ng-repeat="labelName in labelNames"><div style="margin: 10px; width:50px; height: 30px;line-height:30px; border: 1px solid #ccc; cursor: pointer;" ng-style="labelName.color">{{labelName.title}}</div></li></ul></div><span class="label">导航名称：</span> <input type="text" ng-model="model.title" ng-change="changeLabelName()" ng-keyup="$event.keyCode == 13 ? confirm() : null" placeholder="导航名称" maxlength="4"></div><div class="modify_area"><span class="label">链接页面：</span><select style="width: 181px; height: 30px; display: inline-block;" ng-model="model.link" ng-options="page.name for page in pageList" ng-change="selectLink(model.link)"></select></div><div class="modify_area" style="color: #ff0000">至少选择两个标签，并分别添加链接</div></div><div class="modal-footer"><a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a> <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/pictures.tpl.html",'<div class="dialog-contain"><div class="dialog-head"><h1>图集组件</h1><p ng-show="!authError">图集中可以添加多张图片</p><p ng-show="authError">{{authError}}</p></div><div class="pic-contain"><div class="pic-head clearfix pic-same"><div class="select-img"><a ng-click="choosePic()">选择图片</a> <span>最多可选择6张图片</span></div><div class="select-style clearfix"><select ng-model="properties.picStyle" ng-options="pic.desc for pic in picStyles"></select><span class="bg-color" ng-style="{\'background-color\': properties.bgColor}"></span> <span class="select-bg-color" colorpicker="rgba" ng-model="properties.bgColor">背景颜色</span></div></div><div class="pic-img-list pic-same"><ul class="clearfix"><li eqx-pictures-image-click="" ng-class="{hover: currentImageIndex === $index}" ng-repeat="img in properties.children track by $index"><img class="pic-img" ng-src="{{PREFIX_FILE_HOST + img.src}}"> <i class="delete-img"><img ng-src="{{CLIENT_CDN}}assets/images/bg_07.png"></i></li></ul></div><div class="pic-preview" ng-style="{\'background-color\': properties.bgColor, width: position.width, height: position.height}"></div><div class="operation-pre"><a class="cut" eqx-pictures-image-crop="">裁切</a></div><div class="pic-same pic-play clearfix"><div class="set-play clearfix"><span ng-show="properties.autoPlay"><span class="button on" ng-click="properties.autoPlay = false"><i></i></span>已开启自动播放</span> <span ng-show="!properties.autoPlay"><span class="button off" ng-click="properties.autoPlay = true"><i></i></span>已关闭自动播放</span></div><div class="btn-content btn-contain" style="padding:0"><a class="btn-grey0 cancel" style="margin-right:8px;" ng-click="cancel()">取消</a> <a class="btn-main login" ng-click="ok()">确定</a></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/pictures1.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{imageOption.title}} <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1934&page=1&extra=#pid6696"><span class="eqf-exclaquestion-sign"></span></a> <span class="action">{{imageOption.desc}}</span></h4></div><div class="dialog-contain cropimage"><div class="crop-content dialog-content clearfix"><div class="image-con" style="width:100%" ng-hide="imageOption.showCrop"><div class="add-img" ng-click="addPictures($event, 0, \'first\')"><i>点击添加图片</i><p style="padding-top: 5px;font-size: 14px;"><i>（最多可添加6张图片）</i></p></div></div><div class="clearfix" ng-show="imageOption.showCrop"><div class="picture-img"><div class="image_crop" ng-class="{\'bg-crop\': !cropOption.showItems}"><img id="img_preview" eqx-pictures-crop-preview="" index="{{imageOption.currentImage.index}}" ng-src="{{imageOption.currentImage.originSrc ? PREFIX_FILE_HOST + imageOption.currentImage.originSrc : PREFIX_FILE_HOST + imageOption.currentImage.src}}"></div><div class="img-abbre"><ul class="clearfix"><li ng-repeat="child in properties.children" ng-class="{active: imageOption.currentImage.index === $index}" ng-style="{\'background-image\': child.originSrc ? \'url(\' + PREFIX_FILE_HOST + child.originSrc + \')\' : \'url(\' + PREFIX_FILE_HOST + child.src + \')\'}" ng-click="changePicture($index)"><div class="img-set" ng-show="child.src.length"><div class="delete-img hint--top hint--rounded" data-hint="删除图片" ng-click="delPicture($index)"><span class="eqf-wrong2"></span></div><div class="abbre hint--bottom hint--rounded" data-hint="更换图片" ng-click="addPictures($event, $index)"><span class="eqf-top-pic"></span></div></div><p class="eqf-plus2" ng-hide="child.src.length" ng-click="addPictures($event, $index, \'more\')"></p></li></ul></div></div><div class="cut-size picture-size" ng-show="cropOption.showItems"><ul><li ng-repeat="item in cropOption.cropItems"><div class="radio-square" style="margin-top:7px;" ng-class="{checked:cropOption.currentItem== item}"><em></em> <input type="radio" id="{{item.desc}}" name="cropSize" ng-model="cropOption.currentItem" ng-value="item" ng-change="cropItemChange(item)"></div><label for="{{item.desc}}">{{item.desc}}</label> <span ng-if="item.lock != null"><input type="checkbox" id="lock" ng-model="item.lock" ng-change="cropItemChange(item)"> <label for="lock">锁定</label></span></li></ul><ul style="margin-top:10px;" class="picture-set"><li class="clearfix"><span class="switch-circle on" ng-class="{on: properties.autoPlay, off: !properties.autoPlay}" ng-click="properties.autoPlay = !properties.autoPlay"><i></i></span>{{properties.autoPlay ? (\'自动切换\') : (\'手动切换\')}}</li><li><p><i>切换时间：</i>{{properties.interval / 1000}}<i>秒</i></p></li><li class="switch-time" style="padding-top: 5px;"><div ui-slider-t="" min="1000" max="5000" step="1000" class="slider" ng-model="properties.interval" ng-class="{disable: !properties.autoPlay}"></div><div class="time-mark" ng-hide="properties.autoPlay"></div></li><li><p>切换动画</p></li><li><eqx-select class="select-sm border-width select-contain" model="properties.picStyle" change="getMyScenes()"><eqx-select-option value="pic" ng-repeat="pic in picStyles">{{pic.desc}}</eqx-select-option></eqx-select></li></ul></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()" ng-style="{\'margin-left\': imageOption.showCrop ? 25 : 0}">取消</a> <a class="btn btn-primary" ng-click="ok()" ng-show="imageOption.showCrop">确定</a></div><div class="loading-mask" ng-show="imageOption.showLoading"><img ng-src="{{CLIENT_CDN}}assets/images/oval.svg"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/radio-checkbox.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{model.type ==\'r\' ? (\'单选框组件\'): (\'多选框组件\')}} <a ng-show="model.type ==\'r\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=9374&extra="><span class="eqf-exclaquestion-sign"></span></a> <a ng-show="model.type ==\'c\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=9375&extra="><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">{{model.type ==\'r\' ? (\'最多可以添加八个单选选项\') : (\'最多可以添加八个多选选项\')}}</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain"><div class="modify_area tel_title tab-same clearfix" style="padding-left:30px;"><span ng-repeat="button in buttons" ng-class="{spanborder: $index == btnIndex}"><a ng-style="button.btnStyle" ng-click="chooseTabButton(button, $index)"><span>{{model.type ==\'r\' ? (\'单选选项\'):(\'多选选项\')}}</span></a></span></div><div class="form_console dialog-content input-content"><div class="input-preview" style="border-color: {{buttons[btnIndex].btnStyle.borderColor}}"><div class="preview-title" ng-style="buttons[btnIndex].properties.titleStyle">{{model.title?model.title:(\'标题演示\')}}</div><div class="preview-options"><div class="preview-option" ng-repeat="option in model.options" ng-style="buttons[btnIndex].properties.optionStyle"><input type="radio" disabled="" ng-if="model.type == \'r\'" style="margin-top: -1px;"> <input type="checkbox" disabled="" ng-if="model.type == \'c\'" style="margin-top: -1px;"> <span>{{option.label}}</span></div></div></div><div class="modify_area input-design"><div class="input-title"><div><span class="title">标题</span></div><textarea class="form-control" ng-model="model.title" placeholder="请输入标题" id="radioTitle" rows="3" check-count="82" stop-propagation="" autofocus="" style="width: 400px;"></textarea> <span style="position: relative;display: inline-block;vertical-align: middle;height: 74px;line-height: 74px;"><label for="checkbox_required" style="font-weight: lighter; margin:0;font-size:12px;position: absolute;width: 60px;"><div class="checkbox-square" style="margin-top:30px;" ng-class="{checked: model.required}"><em class="eqf-clickmore"></em> <input type="checkbox" ng-true-value="required" ng-model="model.required" name="iCheck"></div>必填</label></span></div><div class="input-options"><div class="input-option"><span class="option">选项</span> <span class="option-tip">（您可以添加八个选项，每个选项最多请不要超过41字）</span></div><div id="optionGroupContainer" class="option-group-container" style="position:relative;"><div eqd-scroll="" style="height: 100%;"><div><div class="option-group" ng-repeat="option in model.options"><textarea class="option-label form-control" rows="2" ng-model="option.label" check-count="82" stop-propagation=""></textarea><div class="operations"><span class="eqf-delete2" ng-click="deleteTheOption($index)"></span> <span class="eqf-plus" ng-click="addNewOption($index)"></span></div></div></div></div></div><div class="input-tip clearfix"><span class="add-option" ng-click="addNewOption(model.options.length)"><span class="eqf-plus2"></span><i>增加选项</i></span> <span class="page-indicator">{{model.options.length}}/8</span></div></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/randomevent.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">随机事件 <span ng-show="!authError" class="action">可以从素材库中添加图片</span> <span ng-show="authError" class="action">{{authError}}</span></h4></div><div class="dialog-contain"><div class="dialog-content"><ul><li ng-click="choosePic()" ng-hide="picList.length >= 10"><a href="">添加</a></li><li ng-repeat="pic in picList"><div class="img-set"><div class="delete-img hint--top hint--rounded" data-hint="删除图片" ng-click="delImage($index)"><span class="eqf-wrong2"></span></div><div class="abbre hint--bottom hint--rounded" data-hint="更换图片" ng-click="replaceImage($index)"><span class="eqf-top-pic"></span></div></div><img ng-src="{{PREFIX_FILE_HOST + pic.src}}" responsive-image=""></li></ul></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/rating.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">评分 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=9376&extra="><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">请输入少于12个字的评分标题</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain rating-content"><div class="tab-same"><span ng-class="{\'spanborder\': model.properties.icon == \'eqf-star\'}"><a ng-click="chooseEqfont(\'eqf-star\')"><span class="eqf-star"></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-love\'}"><a ng-click="chooseEqfont(\'eqf-love\')"><span class="eqf-love"></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-roll\'}"><a ng-click="chooseEqfont(\'eqf-roll\')"><span class="eqf-roll"></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-flower\'}"><a ng-click="chooseEqfont(\'eqf-flower\')"><span class="eqf-flower"></span></a></span></div><div class="form_console dialog-content rating-preview-design"><div class="comp_rating rating rating-preview"><div class="rating-title ellipsis">{{model.title?model.title:(\'预览标题\')}}</div><div class="rating-icons"><span class="{{model.properties.icon}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span></div></div><div class="modify_area rating rating-design"><div class="rating-group"><span class="title">标题</span><div class="rating-choice"><input type="text" class="form-control" ng-model="model.title" placeholder="评分：" check-count="40" id="ratingTitle" stop-propagation="" autofocus=""><span style="display: inline-block;position: relative;vertical-align: middle;height: 35px;line-height: 35px;"><label for="checkbox_required" style="font-weight: lighter; margin:0;font-size:12px;position: absolute;width: 70px;"><div class="checkbox-square" ng-class="{checked: model.properties.required}"><em class="eqf-clickmore"></em> <input type="checkbox" ng-true-value="properties.required" ng-model="model.properties.required" name="iCheck"></div><span style="padding-left:5px;">必填</span></label></span></div></div><div class="rating-group"><span class="title" style="vertical-align: top;line-height: 28px;height: 28px;">颜色</span><div class="rating-choice"><eqd-input-color select-color="model.properties.color" theme="rating-choice-color" x="0" stop-propagation=""></eqd-input-color></div></div><div class="rating-group"><span class="title">大小</span><div class="rating-choice"><div class="btn-group"><label class="btn btn-rating" ng-model="model.properties.size" btn-radio="\'rating-l\'">大</label> <label class="btn btn-rating" ng-model="model.properties.size" btn-radio="\'rating-m\'">中</label> <label class="btn btn-rating" ng-model="model.properties.size" btn-radio="\'rating-s\'">小</label></div></div></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/scene-setting-component.tpl.html",'<div class="scene-setting-component"><div class="setting-bg"></div><div class="left-con" ng-mousedown="closeSetting($event)"><div class="phone-view nr" scene-view="" id="phoneView" scene-id="{{sceneId}}" scene-name="{{scene.name}}" scene-cover="{{PREFIX_FILE_HOST + coverUrl}}" scene-description="{{scene.description}}" ng-click="$event.stopPropagation()" ng-mousedown="$event.stopPropagation()"></div><div class="phone" ng-click="$event.stopPropagation()" ng-mousedown="$event.stopPropagation()"><h4 class="name">{{showPhoneTitle}}</h4></div><div class="ctrl-panel" ng-click="$event.stopPropagation()" ng-mousedown="$event.stopPropagation()"><a class="next-page" ng-click="nextPage()">下一页</a> <a class="pre-page" ng-click="prePage()">上一页</a></div></div><div class="scene-setting-info fade"><div class="form-contain"><ul class="nav nav-tabs"><li ng-class="{active:tabid==\'customset\'}"><a ng-click="changeTab(\'customset\')">常用设置</a></li><li ng-class="{active:tabid==\'shareset\'}"><a ng-click="changeTab(\'shareset\')">分享设置</a></li><li ng-class="{active:tabid==\'companyset\'}"><a ng-click="changeTab(\'companyset\')">高级设置</a></li></ul><div style="position: fixed;top: 40px;bottom: 80px;left: 0;right: 0;"><form class="form-horizontal" role="form" eqd-scroll="" style="height: 100%;" name="myForm" ng-show="tabid==\'customset\'" novalidate="" disable-mouse="true" prevent-exception="true"><div class="basic-setting clearfix"><div class="content clearfix"><div class="basic-info clearfix"><div class="left"><div class="cover-img"><a ng-click="openImageModal();"><img ng-src="{{PREFIX_FILE_HOST + coverUrl}}"> <em>更换封面</em></a></div></div><div class="right"><div class="setting-group setting-name"><em style="margin-bottom:5px;">标题</em><div class="setting-value"><input name="name" type="text" class="form-control name" ng-class="{redborder:(!scene.name || countCharacters(scene.name.trim())>48)}" id="name" placeholder="场景名称" ng-change="changeSceneName();maxLength24()" ng-focus="changeView()" ng-model="scene.name" stop-propagation=""> <span class="input-tip">{{(scene.name?countCharacters(scene.name.trim()):0)}}/48</span></div></div><div class="setting-group setting-description"><em style="line-height:48px;">描述</em><div class="setting-value"><textarea style="font-size:12px;" placeholder="点击添加描述即可在左侧同步看到最终分享时的效果" ng-model="scene.description" class="description form-control" rows="2" id="description" ng-focus="changeView()" name="description" ng-change="maxLength30()" stop-propagation=""></textarea></div></div></div></div><h6 class="des mt20">场景类型</h6><div class="setting-group setting-flip"><div class="setting-line"><div class="scene-type-contain select-up-show border"><eqx-select class="select-great select-contain" model="scene.type"><eqx-select-option value="type.value" ng-repeat="type in types">{{type.name}}</eqx-select-option></eqx-select></div></div><h6 class="des mt20">翻页方式</h6><div class="setting-line"><div class="scene-type-contain select-up-show border"><eqx-select class="select-great select-contain" change="changePageMode()" model="scene.pageMode"><eqx-select-option value="pagemode.id" ng-repeat="pagemode in pagemodes">{{pagemode.name}}</eqx-select-option></eqx-select></div><div class="music-cycle border" ng-class="{checkedbg: !scene.property.triggerLoop}"><div class="checkbox-square" ng-class="{checked: scene.property.triggerLoop}"><em class="eqf-yes2"></em> <input type="checkbox" ng-change="changeLoop()" ng-model="scene.property.triggerLoop" name="iCheck"></div><em>循环播放</em></div><div class="music-cycle border" ng-class="{checkedbg: !scene.property.autoFlip}"><div class="checkbox-square" ng-class="{checked: scene.property.autoFlip}"><em class="eqf-yes2"></em> <input type="checkbox" ng-change="changeAutoFlip()" ng-model="scene.property.autoFlip"></div><em>自动播放</em></div><div class="flip-num" style="width:120px;" ng-if="scene.property.autoFlip"><input type="number" ng-change="changeAutoFlip()" class="form-control" min="1" max="60" limit-input="" ng-model="scene.property.autoFlipTime" stop-propagation=""> <span class="speed">秒</span></div></div><div class="setting-line" ng-show="changePage"><div class="music-cycle border" style="margin-left:0;width:178px;" ng-class="{checkedbg: !scene.property.forbidHandFlip}"><div class="checkbox-square" ng-class="{checked: scene.property.forbidHandFlip}"><em class="eqf-yes2"></em> <input type="checkbox" ng-change="changeHandFlip()" ng-model="scene.property.forbidHandFlip" name="iCheck"></div><em>禁止滑动进入下一页</em></div></div><div><h6 class="des" style="float:left;">场景音乐</h6><h6 class="des mt20" style="margin-left:200px;">场景页码</h6></div><div class="setting-line" style="margin-bottom:50px;"><div class="scene-music" style="position:relative"><span class="form-control bg-music ellipsis" style="padding-top: 9px;" ng-click="openAudioModal()">{{(!!scene.bgAudio) ? (scene.bgAudio.name ? scene.bgAudio.name : (\'已添加\')) : (\'场景音乐\')}}</span> <span class="eqf-top-music music-icon" ng-click="openAudioModal()"></span></div><div class="music-cycle border" ng-class="{checkedbg: !scene.property.slideNumber,uncheckedbg:scene.property.slideNumber}"><div class="checkbox-square" ng-class="{checked: scene.property.slideNumber}"><em class="eqf-yes2"></em> <input type="checkbox" ng-change="changeProgess()" ng-model="scene.property.slideNumber"></div><em>显示</em></div></div></div></div></div></form><form class="form-horizontal" role="form" eqd-scroll="" style="height: 100%;" name="myForm" ng-show="tabid==\'shareset\'" novalidate=""><div class="basic-setting clearfix"><div class="content clearfix"><h6 class="des mt20">场景访问状态</h6><div class="setting-group setting-flip"><div class="setting-line"><div class="scene-type-contain border"><eqx-select class="select-great select-contain" change="changeSceneState()" model="sceneStatue"><eqx-select-option value="1">允许访问</eqx-select-option><eqx-select-option value="2">不允许访问</eqx-select-option><eqx-select-option value="3" ng-if="scene.applyTemplate!=2">加密访问</eqx-select-option></eqx-select></div><div class="flip-num" ng-if="sceneStatue == 3"><input type="text" maxlength="4" class="form-control password" id="accessCode" placeholder="请设置4位数字的密码" ng-change="fourNumberPassword();changeCode();" ng-model="scene.accessCode" stop-propagation="" ng-disabled="scene.applyPromotion == \'1\' || oldSceneApplyState.applyPromotion == \'1\' || oldSceneApplyState.applyPromotion == \'2\' || scene.applyTemplate == \'1\' || oldSceneApplyState.applyTemplate == \'1\' || oldSceneApplyState.applyTemplate == \'2\' || scene.isShow == \'1\' || scene.promIds"></div></div><h6 class="des mt20">微信分享时显示</h6><div class="setting-line mb20" style="height:100px;display:inline-block"><div class="wechatShareShow"><span class="title">标题显示内容</span> <a class="btn green" ng-click="addWeChatShare(true, false)" ng-show="!weChatShare.title.description">添加</a> <input name="name" type="text" placeholder="{{shareCountPlaceholder}}" ng-model="showWeChatShareTitle" ng-show="weChatShare.title.description" ng-disabled="true"> <a class="btn blue" ng-click="addWeChatShare(true, true)" ng-show="weChatShare.title.description">修改</a> <a class="btn out-red" ng-show="weChatShare.title.description" ng-click="clearWeChatShare(true)">删除</a></div><div class="wechatShareShow"><span class="title">描述显示内容</span> <a class="btn green" ng-click="addWeChatShare(false, false)" ng-show="!weChatShare.description.description">添加</a> <input name="name" type="text" placeholder="{{shareCountPlaceholder}}" ng-model="showWeChatShareDescription" ng-show="weChatShare.description.description" ng-disabled="true"> <a class="btn blue" ng-click="addWeChatShare(false, true)" ng-show="weChatShare.description.description">修改</a> <a class="btn out-red" ng-show="weChatShare.description.description" ng-click="clearWeChatShare(false)">删除</a></div><div class="form-col2" style="width:200px;padding-top:0px;padding-left:0px;"><div class="checkbox-square" ng-class="{checked: weChatShare.avatar}"><em class="eqf-yes2"></em> <input type="checkbox" class="option" ng-model="weChatShare.avatar"></div><em>将场景封面替换为微信头像</em></div></div><h6 class="des mt20">易企秀分享</h6><div class="setting-line"><div class="form-col2 border hint--right hint--rounded" data-hint="{{scene.publishTime?\'申请加入秀场\':\'发布后才能申请\'}}" ng-class="{checkedbg: scene.isShow!=1,uncheckedbg:scene.isShow==1}"><div class="checkbox-square" ng-class="{checked: scene.isShow==1}"><em class="eqf-yes2"></em> <input id="eqShowGround" type="checkbox" class="option" ng-true-value="1" ng-false-value="0" ng-model="scene.isShow" ng-disabled="sceneStatue==2 || sceneStatue==3 || !scene.publishTime || $parent.scene.isShow==1 || $parent.scene.isShow==2 || scene.status == -1 && scene.status == -2"></div><em>申请加入秀场</em></div><div class="scene-type-contain border ml20" ng-if="scene.isShow==1"><eqx-select class="select-great select-contain" change="changeTagId()" model="scene.tagId"><eqx-select-option value="null">选择类型</eqx-select-option><eqx-select-option value="sceneTag.id" ng-repeat="sceneTag in sceneTags">{{sceneTag.name}}</eqx-select-option></eqx-select></div><a class="logo-tip" target="_blank" href="/show" style="text-decoration:underline;position:absolute;right:20px;">访问秀场</a></div><div class="setting-line"><div class="form-col2 border hint--right hint--rounded" data-hint="{{applyTplTip}}" ng-class="{checkedbg: scene.applyTemplate==0,uncheckedbg:scene.applyTemplate==1}"><div class="checkbox-square hint--right hint--rounded" ng-class="{checked: scene.applyTemplate==1 || scene.applyTemplate==2}"><em class="eqf-yes2"></em> <input type="checkbox" class="option" checked="" disabled="" ng-if="scene.applyTemplate == 2"> <input id="eqTemplate" type="checkbox" class="option" ng-true-value="1" ng-false-value="0" ng-model="scene.applyTemplate" ng-if="scene.applyTemplate != 2 && scene.publishTime" ng-disabled="sceneStatue==3 || sceneStatue==2 || scene.status == -1 && scene.status == -2 || oldSceneApplyState.applyTemplate==1 || oldSceneApplyState.applyTemplate==2"> <input type="checkbox" ng-disabled="true" title="" ng-if="!scene.publishTime"> <input type="checkbox" ng-disabled="true" title="" ng-if="XBinScene"></div><em>申请为样例</em></div><div class="scene-type-contain border ml20" ng-if="(scene.applyTemplate == 1 || scene.applyTemplate == 2) && scene.price != -1"><eqx-select class="select-great select-contain" model="scene.price"><eqx-select-option value="null">设置样例价格</eqx-select-option><eqx-select-option value="price.value" ng-repeat="price in tplPrices">{{price.name}}</eqx-select-option></eqx-select></div><span class="option-tips" ng-switch="scene.applyTemplate"><span ng-switch-default="">未申请</span> <span class="eqf-clock-o" ng-switch-when="1">申请中</span> <span class="eqf-fobden2" ng-switch-when="2">审核通过</span> <span class="eqf-glyphicon-ban" ng-switch-when="-1">审核未通过</span></span> <a class="logo-tip" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=8293&page=1&extra=#pid59036" style="text-decoration:underline;position:absolute;right:20px;" ng-if="(user.type != 4 && user.type != 3) || scene.applyTemplate != 1">了解详情</a> <a class="logo-tip" target="_blank" href="http://h5.eqxiu.com/s/iQKINH7y" style="text-decoration:underline;position:absolute;right:20px;" ng-if="(user.type == 4 || user.type == 3) && scene.applyTemplate ==1">快速审核通道</a></div><div class="setting-line" ng-if="userProperty.type ==2 && scene.status != -1 && scene.status != -2"><div class="form-col2 border hint--right hint--rounded" data-hint="设为企业样例" ng-class="{checkedbg: scene.isTpl==0,uncheckedbg:scene.isTpl==3}"><div class="checkbox-square" ng-class="{checked: scene.isTpl==3}"><em class="eqf-yes2"></em> <input id="eqEnterpriseTemplate" type="checkbox" class="option" ng-true-value="3" ng-false-value="0" ng-model="scene.isTpl" ng-disabled="sceneStatue==2 || sceneStatue==3 || oldSceneApplyState.isTpl == 3 || XBinScene"></div><em>设为企业样例</em></div></div><div class="setting-line"><div class="form-col2 border hint--right hint--rounded" data-hint="参加活动" ng-class="{checkedbg: !appendActive,uncheckedbg:appendActive}"><div class="checkbox-square" ng-class="{checked: appendActive}"><em class="eqf-yes2"></em> <input type="checkbox" class="optiong" ng-change="changeAppendActive()" ng-model="appendActive" ng-disabled="sceneStatue==2 || sceneStatue==3 || scene.status == -1 && scene.status == -2 || oldAppendActive"></div><em>参加活动</em></div><div class="scene-type-contain border ml20" ng-if="appendActive"><eqx-select class="select-great select-contain" change="getActivityPageTpl(true)" model="scene.promIds"><eqx-select-option value="null">选择活动</eqx-select-option><eqx-select-option value="activity.id" ng-repeat="activity in activities">{{activity.title}}</eqx-select-option></eqx-select></div><a class="logo-tip" style="position:absolute;right:150px;" ng-if="activityObj && activityObj.promStatus == -1">审核未通过</a> <a class="logo-tip" style="position:absolute;right:150px;" ng-if="activityObj && activityObj.promStatus == 0">审核中</a> <a class="logo-tip" style="position:absolute;right:150px;" ng-if="activityObj && activityObj.promStatus == 1">审核通过</a> <a class="logo-tip" style="text-decoration:underline;position:absolute;right:20px;" ng-href="{{scene.promIds ? \'/show/active/\' + scene.promIds : \'/show/active\'}}" target="_blank">查看详情</a></div><div class="last-page-contain" ng-if="appendActive"><div eqd-scroll="" style="height: 100%;"><ul><li class="last-cover-img" ng-repeat="pageTpl in activityPageTpls" ng-click="chooseActivityPageTpl(pageTpl.id)"><img class="lp-list" ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}"><div class="checkbox-square" ng-class="{checked: scene.property.activityPageId == pageTpl.id}"><em class="eqf-yes2"></em></div></li></ul></div></div></div></div></div></form><form eqd-scroll="" style="height: 100%;" class="form-horizontal setting-group" role="form" name="myForm" ng-show="tabid==\'companyset\'" novalidate=""><div class="basic-setting clearfix"><h6 class="des mt20">加载设置</h6><div class="setting-line mr20" style="border-bottom:1px solid #ccd5db;height:56px;margin-top:20px;"><div class="form-col2 border" ng-class="{checked: !loadingLogo,uncheckedbg: loadingLogo}"><div class="checkbox-square" ng-click="changeLogo()" ng-class="{checked: loadingLogo}"><em class="eqf-yes2"></em> <input type="checkbox"></div><em>自定义加载logo</em></div><div class="setting-logo border" ng-if="loadingLogo" ng-click="uploadLoadingLogo()"><div class="load-logo-contain"><img ng-if="!scene.loadingLogo" ng-src="{{CLIENT_CDN}}assets/images/create/pic.svg"> <img ng-if="scene.loadingLogo" ng-src="{{PREFIX_FILE_HOST + scene.loadingLogo}}"></div><span class="des">设置加载logo</span></div><div class="logo-tip" ng-if="loadingLogo" style="position: absolute;right: 180px">118*118px</div><div class="logo-tip" ng-if="!user.memberType" style="position: absolute;right: 80px">需<span style="color:#ff5448;">{{logoPrice}}</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></div><div class="logo-tip" ng-if="user.memberType==1" style="position: absolute;right: 80px">需<span style="color:#ff5448;">95</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></div><div class="logo-tip" ng-if="user.memberType==2" style="position: absolute;right: 80px">需<span style="color:#ff5448;">90</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></div><div class="logo-tip" ng-if="user.memberType==3 && memberObj.loadingLogo!=\'0\'" style="position: absolute;right: 80px">免费<span style="color:#ff5448;">{{memberObj.loadingLogo}}</span>次</div><div class="logo-tip" ng-if="user.memberType==3 && memberObj.loadingLogo==\'0\'" style="position: absolute;right: 80px">需<span style="color:#ff5448;">100</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></div><div class="logo-tip" ng-if="user.memberType==4" style="position: absolute;right: 80px">需<span style="color:#ff5448;">70</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></div><div class="logo-tip" ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.loadingLogo < 1" style="position: absolute;right: 65px">需<del>100</del><span style="color:#ff5448;padding-left:3px;">{{memberObj.loadingLogo * 100}}</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></div><div class="logo-tip" ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.loadingLogo >= 1" style="position: absolute;right: 80px">免费<span style="color:#ff5448;">{{memberObj.loadingLogo}}</span>次</div></div><h6 class="des mt20">尾页与底标<a ng-if="user.type == 1" ng-click="freeUpgrade()" style="padding-left:10px;color:#a3afb7"><ins>免费</ins></a></h6><table class="bottom-table"><tr ng-click="switchToAdState($scope.eqADTypeChoice.FREEPAGE,true);" ng-class="{uncheckedbg:(eqShowType==\'eqFree\')}"><td class="choise"><div class="radio-square" ng-class="{checked: (eqShowType==\'eqFree\')}"><em></em></div><em>技术支持尾页</em></td><td class="price">免费</td></tr><tr ng-click="switchToAdState(eqADTypeChoice.DEFAULT_BOTTOM,true);" ng-class="{uncheckedbg:(scene.property.eqAdType == 2)}" ng-show="user.type!=5 && user.type!=51"><td class="choise"><div class="radio-square" ng-class="{checked: (scene.property.eqAdType == 2)}"><em></em></div><em>技术支持底标</em></td><td class="price" ng-if="!isVipUser">需<span style="color:#ff5448;">15</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="isVipUser">免费</td></tr><tr ng-click="switchToAdState(eqADTypeChoice.CUSTOM_BOTTOM,true);" ng-class="{uncheckedbg:(scene.property.eqAdType == 3)}"><td class="choise"><div class="radio-square" ng-class="{checked: (scene.property.eqAdType == 3)}"><em></em></div><em>品牌联合底标</em></td><td class="price" ng-if="!isVipUser">需<span style="color:#ff5448;">30</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="isVipUser">免费</td></tr><tr ng-click="switchToAdState(eqADTypeChoice.HIDE,true)" ng-class="{uncheckedbg:(eqShowType==\'eqHide\')}" ng-show="user.type!=5 && user.type!=51"><td class="choise"><div class="radio-square" ng-class="{checked: (eqShowType == \'eqHide\')}"><em></em></div><em>无尾页和底标</em></td><td class="price" ng-if="!user.memberType">需<span style="color:#ff5448;">{{memberPrice}}</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="user.memberType==1">需<span style="color:#ff5448;">95</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="user.memberType==2">需<span style="color:#ff5448;">90</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="user.memberType==3 && memberObj.tailPage!=\'0\'">免费<span style="color:#ff5448;">{{memberObj.tailPage}}</span>次</td><td class="price" ng-if="user.memberType==3 && memberObj.tailPage==\'0\'">需<span style="color:#ff5448;">100</span>秀点<a ng-click="buyXd()" ng-if="sceneBuyXd" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="user.memberType==4">需<span style="color:#ff5448;">70</span>秀点<a ng-if="sceneBuyXd" ng-click="buyXd()" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.tailPage < 1">需<del>100</del><span style="color:#ff5448;padding-left:3px;">{{memberObj.tailPage * 100}}</span>秀点<a ng-click="buyXd()" ng-if="sceneBuyXd" style="color:#a3afb7;padding-left:10px;"><ins>充值</ins></a></td><td class="price" ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.tailPage >= 1">免费<span style="color:#ff5448;">{{memberObj.tailPage}}</span>次</td></tr><tr ng-click="switchToAdState(eqADTypeChoice.DEEPSHARE_PAGE,true)" ng-class="{uncheckedbg:(eqShowType==\'eqApp\')}" ng-if="isTplEditor"><td class="choise"><div class="radio-square" ng-class="{checked: (eqShowType == \'eqApp\')}"><em></em></div><em>deepshare尾页</em></td><td class="price">免费</td></tr></table><div class="setting-line" ng-show="scene.property.eqAdType == 3"><div class="setting-logo" style="margin-left:0;"><input type="text" class="form-control" ng-model="scene.property.bottomLabel.name" ng-change="changeBottomLabel()" id="changeMessage" placeholder="名称" stop-propagation=""></div><div class="setting-logo" style="width:450px;"><input type="text" class="form-control" ng-model="scene.property.bottomLabel.url" ng-change="changeBottomLabel()" id="linkAddress" placeholder="http://eqxiu.com" stop-propagation=""></div></div><div class="last-page-contain" ng-if="eqShowType==\'eqFree\'"><div eqd-scroll="" style="height: 100%;" disable-mouse="true" prevent-exception="true"><ul><li class="last-cover-img" style="text-align:center;border-radius:4px;border:1px solid #ccd5db;" ng-click="chooseLastPage(null)"><span class="lp-list default-last-page" style="line-height:152px;" ng-class="{checked: !scene.property.lastPageId}">默认</span><div class="checkbox-square" ng-class="{checked:!scene.property.lastPageId}"><em class="eqf-yes2"></em></div></li><li class="last-cover-img" ng-repeat="pageTpl in pageTpls" ng-click="chooseLastPage(pageTpl.id)"><img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src="assets/images/create/pic.svg" load-err=""><div class="checkbox-square" ng-class="{checked:scene.property.lastPageId == pageTpl.id}"><em class="eqf-yes2"></em></div></li></ul></div></div><div class="last-page-contain" ng-if="eqShowType==\'eqLink\' && scene.property.eqAdType == 3"><div eqd-scroll="" style="height: 100%;" disable-mouse="true" prevent-exception="true"><ul><li ng-repeat="bottomPageTpl in bottomPageTpls" ng-click="chooseCustomBottomLabel(bottomPageTpl.id)"><img src="assets/images/create/pic.svg"> <img class="bottom-img" ng-src="{{PREFIX_FILE_HOST + bottomPageTpl.properties.thumbSrc}}"><div class="checkbox-square" ng-class="{checked: scene.property.eqAdType == 3 && scene.property.bottomLabel.id == bottomPageTpl.id}"><em class="eqf-yes2"></em></div></li></ul></div></div><h6 ng-if="false" class="des mt20">第三方统计</h6><div ng-if="false" class="setting-line"><div class="form-col3 border"><div class="checkbox-square" ng-click="openStatisticData()" ng-class="{checked: QCloudStatus}"><em class="eqf-yes2"></em> <input type="checkbox" ng-disabled="!isAllowedToAccessOpenQCloud"></div><em>开启腾讯云分析（次日可在场景详情中查看）</em></div><div class="logo-tip" style="position: absolute;right: 80px"><a href="/privilege" target="_blank" style="color:#a3afb7;padding-left:10px;"><ins>付费会员专享</ins></a></div></div><div ng-if="false" class="setting-line" style="color:red;">服务异常，请重新申请。</div></div></form></div></div><div class="setting-operations"><div class="option-box"><button ng-click="saveSceneSettings(scene)" class="btn green">确定</button> <button ng-click="cancelSceneSetting()" class="btn gray" style="margin-left:10px;">取消</button></div></div></div><div ng-class="{showin:showActiveTip}" class="showxiu" ng-init="hideActiveTip = true;"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="showActiveTip=false;"><span aria-hidden="true">×</span></button><h4 class="modal-title">参加活动</h4></div><div class="modal-body"><p style="line-height: 30px;">参加活动并保存场景后，不可取消或选择其他活动</p></div><div class="modal-footer"><input type="checkbox" style="margin-top:0;margin-right:5px;" ng-model="hideActiveTip"><span style="margin-right:10px;">不再提示</span> <a type="button" class="btn btn-primary" ng-click="changeAppendActive(true)">确定</a></div></div></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/setting.tpl.html",'<div panel-draggable="" id="comp_setting"><div class="cancel"><span class="set-title">组件设置</span><span class="set-close eqf-wrong" ng-click="cancel()"></span></div><ul class="nav nav-tabs"><li ng-class="{active:activeTab == \'style\' || activeTab ==\'dropdown\'}"><a class="all-change" ng-click="(elemDef.type !==\'z\') ? showSettingTab(\'style\'):showSettingTab(\'dropdown\');">样式</a></li><li ng-hide="elemDef.type == \'g\'" ng-class="{active:activeTab == \'anim\'}"><a class="all-change" ng-click="showSettingTab(\'anim\');">动画</a></li><li ng-hide="elemDef.type == \'w01\' || elemDef.type == \'w02\' ||elemDef.type === \'z\' || elemDef.type == \'t\' || elemDef.type == \'g\'" ng-class="{active:activeTab == \'trigger\'}"><a class="all-change" ng-click="showSettingTab(\'trigger\');">触发</a></li></ul><div class="style_content"><div ng-include="\'scene/console/anim.tpl.html\'"></div><div ng-include="\'scene/console/style.tpl.html\'"></div><div ng-include="\'scene/console/trigger.tpl.html\'"></div><div ng-include="\'scene/console/dropdown.tpl.html\'"></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/shape.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">形状库 <span ng-show="!authError" class="action">矢量素材，可更换颜色，放大不失真</span> <span ng-show="authError" class="action">{{authError}}</span></h4></div><div class="dialog-contain"><div class="dialog-content bg_console sound-flex clearfix"><div class="cate-title"><ul class="nav tabs-left" style="padding-top:0;"><li ng-class="{active: systemImages}"><a href="" ng-click="switchToSystemImages(\'true\');getSystemCategoryList();" data-toggle="tab">形状库</a></li></ul><ul class="nav tabs-left user-tabs" style="padding-top:0"><li ng-class="{active:userTagId==\'history\'}" ng-hide="longPage"><a href="" ng-click="switchToSystemImages(\'false\');getHistory();" data-toggle="tab">最近使用</a></li></ul></div><div class="cate-list bg-rig"><div id="bg_contain"><div class="tab-pane active tab-head" ng-show="systemImages"><div class="img_list"><div class="category_list clearfix"><ul class="category_list_container clearfix"><li class="category_item" ng-class="{\'active\': sysCatId == sysCategory.value}" ng-repeat="sysCategory in sysCategoryList" ng-click="getSysCatAndList(sysCategory.value)">{{sysCategory.name}}</li></ul></div><div class="cat_two_list clearfix"><ul><li ng-repeat="sysTag in sysTagList" ng-class="{\'active\': sysTagId == sysTag.id}" ng-click="getSysImgByTag(sysTag.id);" style="cursor:pointer;">{{sysTag.name}}</li></ul></div></div></div><div class="img_list"><div class="img_list_container photo_list"><ul class="img_box clearfix" ng-class="{\'img-box-his\':userTagId==\'history\'}" style="height:333px"><li ng-if="!systemImages" ng-repeat="img in imgList" style="width:100px;height:100px;position:relative;display: inline-block;background:#e6ebed no-repeat center/contain;" ng-style="{backgroundImage: \'url(\' + PREFIX_FILE_HOST + img.path + \')\'}" data-url="{{img.path}}" ng-click="selectSvg($event,img)"></li><li ng-if="systemImages" ng-repeat="img in imgList" style="width:100px;height:100px;position:relative;display: inline-block;background:#e6ebed no-repeat center/contain;" ng-style="{backgroundImage: \'url(\' + PREFIX_FILE_HOST + img.path + \')\'}" data-url="{{img.path}}" ng-click="selectSvg($event,img)"></li></ul></div></div></div></div><div class="modal-footer bg-pagination clearfix no-line"><div class="fl mr20" ng-show="numPages > 1 && userTagId!=\'history\'"><pagination style="float: left" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="首页" last-text="尾页" max-size="5" items-per-page="pageSize" total-items="totalItems" ng-model="$parent.currentPage" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="$parent.toPage" ng-keyup="$event.keyCode == 13 ? getImgByPage() : null"><span class="fl">页</span> <a ng-click="getImgByPage()" class="go">确定</a></div></div><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm();">确定</a></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/sound-component.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">音效组件 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=10990&extra="><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">音效不能大于100kb</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain"><div class="modify_area tel_title tab-same clearfix"><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style="button.btnStyle" ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span><div ng-class="{\'spanborder\': model.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint="上传图片大小不超过3M，支持上传格式：jpg、png、gif" ng-click="openImageModal()"><em class="eqf-upload" style="font-size:16px;"></em><em>自定义</em></div></div><div class="button_console dialog-content"><form class="form-contain" form="role"><div class="form-list clearfix" ng-if="!model.imgSrc"><label for="buttonName" class="form-label">按钮名称：</label><div class="form-input"><input id="buttonName" class="btn-name" type="text" ng-model="model.title" check-count="40" ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus="" stop-propagation=""></div></div><div class="form-list clearfix" ng-if="model.imgSrc"><label class="form-label">按钮图片：</label><div class="form-image btn-small"><img ng-src="{{PREFIX_FILE_HOST + model.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture text-center" ng-click="openImageModal()">更换图片</a></div></div><div class="form-list clearfix"><label for="btnSound" class="form-label">音效：</label><div class="form-input"><a id="btnSound" class="btn-main blue" ng-click="openSoundModal()">设置音效</a></div></div><div class="form-list clearfix" ng-show="model.sound.name"><label class="form-label">已选择：</label><div class="form-input"><span>{{model.sound.name}}</span></div></div></form></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/sound.tpl.html",'<div class="modal-header no-bottom-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title" ng-if="type == 4">音效设置 <span ng-show="selectSoundError" class="action">{{selectSoundError}}</span></h4><h4 class="modal-title" ng-if="type == 2">音乐素材 <span ng-show="selectSoundError" class="action">{{selectSoundError}}</span></h4></div><div class="dialog-contain" id="container"><div class="dialog-content bg_console clearfix"><div ng-show="soundAction" style="position:absolute;left:0;right:0;top:0;bottom:0;background-color:#000;z-index: 1;opacity: 0.2"></div><div class="sound-flex sound-panel"><div class="cate-title" style="width:200px;height:412px;background-color:#f7f7f7"><ul class="nav tabs-left" style="padding-top:0;"><li ng-class="{active: !isMySound}" ng-show="type == 2"><a ng-click="selectTab(false)">音乐库</a></li><li ng-class="{active: !isMySound}" ng-show="type == 4"><a ng-click="selectTab(false)">音效库</a></li><li ng-class="{active: isMySound && isMySound!=\'history\'}" ng-show="type == 2"><a ng-click="selectTab(true)">我的音乐</a></li><li ng-class="{active: isMySound && isMySound!=\'history\'}" ng-show="type == 4"><a ng-click="selectTab(true)">我的音效</a></li><li ng-class="{active: isMySound==\'history\'}"><a ng-click="selectTab(\'history\')">最近使用</a></li><li class="my-bg-upload"><div id="upload-progress"></div><div class="my-upload-action" ng-if="alertAction" ng-click="popSoundAction()"></div><div class="sound-upload form" style="z-index: 20;" nosave="true" qiniu-upload-directive="" id="pickfiles" resource-type="resourceType" limit="1" resources="sounds" tag-id="0" max-file-size="4" file-type="type" token-type="\'audio\'"><span class="eqf-update"></span><em>上传</em></div><div class="form-menus"><div class="popover right"><div class="arrow"></div><div class="popover-content" style="font-size:12px;"><i>通过本地电脑上传或者添加外链，大小不超过4M，格式为MP3。链接如何减少文件大小，请查看</i><a style="padding:0;font-size:12px;display:inline;margin:0;height:20px;line-height:20px;border:none;color:#08a1ef!important" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=7505" target="_blank">如何裁剪音乐</a></div></div></div></li><li class="add-tag blue"><a ng-click="urlLink()"><span class="eqf-link" style="padding-right:10px;"></span><span>添加外链</span></a></li></ul></div><div class="cate-list bg-rig" style="min-height:417px;"><div class="clearfix"><audio style="margin: 25px 0 0 20px;height:30px;" eqx-audio=""></audio><div style="font-size: 12px; width: 250px;height:40px;line-height:40px;overflow:hidden;float:right;"><span ng-show="sound.name"><i>已选择：</i>{{sound.name | maxLength: 16}} <a class="eqf-wrong2" style="margin-left: 10px;" title="清除" ng-click="clear()"></a></span></div><div class="music-cate"><ul class="clearfix" ng-init="$parent.sysCatId = \'0\'" ng-show="sysCate"><li ng-class="{\'active\': sysCatId == \'0\'}" ng-click="getSysMusicList(\'0\')">最新</li><li ng-repeat="music in sysMusicList" ng-class="{active:sysCatId == music.value}" ng-click="getSysMusicList(music.value)">{{music.name}}</li></ul></div></div><div class="tab-content" id="bg_contain"><div class="tab-pane tab-head active"><div class="tab-pane"><div class="img_list"><div class="sound-action" ng-show="actionContent"><p>通过本地电脑上传或者添加外链，大小不超过4M，格式为MP3.注意：音乐大小会影响打开速度。查看<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=7505" target="_blank">如何改变大小</a></p></div><div class="sound-list clearfix" ng-show="!actionContent"><ul><li style="cursor:pointer;" ng-class="{active: isSoundSelected(type, sound, s)}" ng-click="selectSound(s,type, isSoundSelected(type, sound, s))" ng-repeat="s in sounds track by $index"><span><em>{{s.size}}</em> <a class="del eqf-scene-settingII" title="裁切" ng-show="isMySound && isMySound!=\'history\' && !s.isValue" ng-click="soundMultiCrop($event, $index)"></a> <a class="sound eqf-play" title="{{s.isPlaying ? (\'暂停\') : (\'播放\')}}" ng-class="{\'eqf-play2\': !s.isPlaying, \'eqf-stop\': s.isPlaying}" ng-click="playSound($event, $index)"></a> <a class="del eqf-wrong2" title="删除" ng-show="isMySound && isMySound!=\'history\'" ng-click="deleteMySound($event, $index)"></a></span><div class="linkName" title="{{s.name}}">{{s.name}}<em style="padding-left:10px;" class="eqf-link3" ng-show="s.isValue"></em></div></li></ul></div></div></div></div></div></div></div></div><div class="modal-footer bg-pagination no-line"><div class="pagination_container fl" ng-show="pagination.totalItems > 10 && isMySound!=\'history\'"><pagination style="float: left" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="首页" last-text="尾页" max-size="5" items-per-page="pagination.pageSize" total-items="pagination.totalItems" ng-model="pagination.currentPage" ng-change="getSounds(pagination.currentPage)" boundary-links="true" rotate="true" num-pages="pagination.numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? getSounds(toPage) : null"><span class="fl">页</span> <a ng-click="getSounds(toPage)" class="go">确定</a></div></div><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="ok()">确定</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/soundCrop.tpl.html",'<div class="modal-header no-line"><h4 class="modal-title">音频裁切 <span class="action">音频裁切</span></h4></div><div class="dialog-contain cropimage"><div class="crop-content dialog-content clearfix"><div style="position:relative;" id="container-crop"><div style="font-size:24px;width:600px;float:left;">{{title}}</div><span style="border:1px solid #ccd5db;padding:5px;cursor:pointer;margin-left:166px;" nosave="true" qiniu-upload-directive="" id="pickfiles-crop" resource-type="resourceType" resources="[]" tag-id="0" max-file-size="4" upload-con="container-crop" upload-btn="pickfiles-crop" file-type="type" token-type="\'audio\'">重新选择音乐</span></div><div sound-crop-panel="" style="margin-top:30px;" last-crop-info="lastCropInfo" sound-type="type" start-time="$parent.startTime" end-time="$parent.endTime" state="$parent.state" current-time="$parent.currentTime" duration="$parent.duration" sound-src="{{soundSrc}}"></div><div style="padding-top:30px;width:600px;float:left;"><em ng-class="{\'eqf-play2\':state!=\'start\',\'eqf-stop\':state==\'start\'}" style="font-size:90px;float:left;cursor:pointer;" ng-click="play();"></em><div style="float:left;height:35px;margin-top:10px;margin-left:20px;padding-top:5px;"><span ng-click="setStartTime()" style="border: 1px solid #ccd5db;padding:5px;margin-right:10px;cursor:pointer;">设当前播放为起点</span> 起点：<input type="number" min="0" ng-change="changeStartTime()" ng-model="$parent.minuteS" style="height:24px;width:80px;margin-right:5px;">分<input ng-change="changeStartTime()" type="number" ng-model="$parent.secondS" max="59" min="0" style="height:24px;width:80px;margin-right:5px;margin-left:5px;">秒</div><div style="float: left;height: 35px;margin-top: 10px;margin-left:20px;padding-top:5px;"><span ng-click="setEndTime();" style="border: 1px solid #ccd5db;padding:5px;margin-right:10px;cursor:pointer;">设当前播放为终点</span> 终点：<input type="number" min="0" ng-model="$parent.minuteE" ng-change="changeEndTime()" style="height:24px;width:80px;margin-right:5px;">分<input type="number" ng-change="changeEndTime()" ng-model="$parent.secondE" max="59" min="0" style="height:24px;width:80px;margin-right:5px;margin-left:5px;">秒</div></div><div style="float:left;padding-top:35px;"><h6 style="padding-bottom:10px;">音乐长度</h6><h1>{{cropLen}}</h1><h6 style="padding-top:10px;">（建议长度控制在20秒内）</h6></div></div></div><div class="modal-footer no-line"><a class="btn btn-primary" ng-click="ok()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/soundCropPanel.tpl.html",'<div class="sound-crop-dire"><ul class="scale"><li ng-class="{\'s-scale\':($index+1)%5!=0,\'l-scale\':($index+1)%5==0}" ng-style="{\'width\':($index+1)!=scales.length?liW:endLi}" ng-repeat="scale in scales"><span ng-if="$index==0" style="top:-21px;left:5px;text-align: left;">0:00</span> <span ng-if="($index+1)%5==0">{{scale}}</span></li></ul><em class="bar-s" data-state="s"><em class="triangle" data-state="s"></em> <em class="line" data-state="s"></em></em> <em class="bar-c" data-state="c"><em class="triangle" data-state="c"></em> <em class="line" data-state="c"></em></em> <em class="bar-e" data-state="e"><em class="triangle" data-state="e"></em> <em class="line" data-state="e"></em></em><div class="left-dis"></div><div class="right-dis"></div></div><span>{{curT}}/<span>{{endT}}</span></span><audio></audio>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/soundLink.tpl.html",'<div class="modal-header no-bottom-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">外部链接 <span ng-show="!authError" class="action">可从外部使用链接添加音乐</span> <span ng-show="authError" class="action">{{authError}}</span></h4></div><div class="dialog-contain"><div class="dialog-content"><form class="form-contain" role="form"><div class="form-list audio_area clearfix"><lable class="form-label">链接地址：</lable><div class="form-input"><input type="text" class="link" ng-model="soundLink.src" ng-click="selectLink()" placeholder="请输入mp3格式的音乐链接"></div></div></form></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/statistics-component.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">统计 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=15676&page=1&extra=#pid122999"><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">记录并显示当前作品的展示次数</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain counter"><div class="tab-same"><span class="spanborder" ng-class="{\'spanborder\': model.properties.icon == \'eqf-eye3\'}"><a ng-click="chooseEqfont(\'eqf-eye3\')"><span class="eqf-eye3"></span></a></span></div><div class="form_console dialog-content"><div class="modify_area"><div class="counter-group"><span class="title">颜色</span><div class="counter-choice"><div style="display: inline-block; height:20px; margin-right: 5px;"><eqd-input-color select-color="model.properties.color" direction="bottom" theme="flo_lef" notify="grid" x="-1" w="37" h="30"></eqd-input-color></div><input class="color-picker-input" ng-model="model.properties.color" type="text"></div></div><div class="counter-group"><span class="title">字号</span><div class="counter-choice"><div class="btn-group"><label class="btn btn-counter" ng-model="model.properties.size" btn-radio="\'counter-l\'">大</label> <label class="btn btn-counter" ng-model="model.properties.size" btn-radio="\'counter-m\'">中</label> <label class="btn btn-counter" ng-model="model.properties.size" btn-radio="\'counter-s\'">小</label></div></div></div><div class="counter-group"><span class="title">布局</span><div class="counter-choice"><div class="btn-group"><label class="btn btn-counter" ng-model="model.properties.layout" btn-radio="\'counter-lr\'">左右</label> <label class="btn btn-counter" ng-model="model.properties.layout" btn-radio="\'counter-tb\'">上下</label></div></div></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/style.tpl.html",'<div ng-if="activeTab == \'style\'" ng-controller="StyleConsoleCtrl"><div class="yangshi"><section><div class="style_list border-bottom pl20" ng-show="elemDef.type!=\'m\' && elemDef.type!=\'b\'" ng-class="{active:showBasic}" ng-init="showBasic=true" ng-click="openExpore(\'showBasic\');"><span>基础样式</span><b class="caret" ng-show="showBasic"></b><b class="caret off" ng-show="!showBasic"></b></div><div class="style_con_hei" ng-show="elemDef.type==\'m\'"><div class="style_list_angel clearfix"><label>标签内容</label><div class="color_select clearfix"><input class="flo_right" style="width:140px;" style-input="" elem-id="{{elemDef.id}}" ng-model="model.content" css-item="content" type="text"></div></div><div style="border-bottom:none;" class="style_list_angel clearfix"><label>地图位置</label><div class="color_select clearfix" style="text-align:right;"><i class="eqf-map" style="margin-right:5px;"></i><a class="primary" style="text-decoration: underline;line-height: 20px;" ng-click="setPosition()">{{model.address}}</a></div></div></div><div class="style_con_hei" ng-if="elemDef.type==\'g\'" ng-show="showBasic"><div class="style_list_angel clearfix"><label>广告代码</label><div class="color_select clearfix"><textarea class="flo_right" style="height: 120px" advertisement-content="" content="{{proModel.content}}" target="{{elemDef.id}}" elem-id="{{elemDef.id}}" ng-model="proModel.content">\n\t\t\t\t\t\t</textarea> <input style="display:none" style-input="" elem-id="{{elemDef.id}}" ng-model="model.width" css-item="width" type="text"> <input style="display:none" style-input="" elem-id="{{elemDef.id}}" ng-model="model.height" css-item="height" type="text"></div></div><div class="style_list_angel clearfix"><label>广告尺寸</label><div class="color_select clearfix"><select class="flo_right" ng-change="changeSize(size)" ng-model="proModel.size" style="width:150px;border:1px solid #C9C9C9" ng-options="size.value as size.name for size in adSizes"></select></div></div></div><div class="style_con_hei" ng-if="elemDef.type==\'b\'"><div class="style_list_angel clearfix" ng-init="styles=[{name:\'默认\',value:\'default\'},{name:\'黑色\',value:\'black\'},{name:\'粉色\',value:\'pink\'}]"><label>配色风格</label><div class="color_select clearfix"><select class="flo_right" ng-model="boardsModel.style" style="width:140px;border:1px solid #C9C9C9" ng-options="style.value as style.name for style in styles"></select></div></div><div class="style_list_angel clearfix"><label>我要留言</label><div class="color_select clearfix"><input class="flo_right" style="width:140px;" style-input="" elem-id="{{elemDef.id}}" ng-model="boardsModel.meslabel" css-item="content" maxlength="10" type="text"> <span str="boardsModel.meslabel" strlen="" class="strlen" max="10">4/10</span></div></div><div style="border-bottom:none;" class="style_list_angel clearfix"><label>更多留言</label><div class="color_select clearfix"><input class="flo_right" style="width:140px;" style-input="" elem-id="{{elemDef.id}}" ng-model="boardsModel.morelabel" css-item="content" maxlength="10" type="text"> <span str="boardsModel.morelabel" strlen="" class="strlen" max="10">4/10</span></div></div></div><div ng-class="{\'h-scroll\':scrollShow && showBasic}"><div eqd-scroll="" style="height: 100%;" change-pos="changePos(pos)" disable-mouse="true" prevent-exception="true"><div ng-show="showBasic && elemDef.type!=\'m\'" class="style_con_hei"><div class="style_list_angel clearfix" ng-show="elemDef.type==\'201\' || elemDef.type==\'401\'"><label>文字内容</label><div class="color_select clearfix"><input class="flo_right" style="width:155px;" elem-id="{{elemDef.id}}" ng-model="model.content" type="text"></div></div><div class="style_list_angel clearfix" ng-if="(elemDef.type == \'201\' || elemDef.type == \'401\' || elemDef.type == \'2\') && isEditor"><label>文字大小</label><div class="touming clearfix"><p class="num"><input class="short" type="number" min="12" max="72" style-input="" elem-id="{{elemDef.id}}" css-item="fontSize" ng-model="model.fontSize"></p><div class="slider" ui-slider-t="" his-records="true" ng-model="model.fontSize" min="12" max="72"></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type!=\'t\' && elemDef.type!=\'b\' && elemDef.type != \'x\' && elemDef.type != \'g\'"><label ng-if="elemDef.type!=\'201\' && elemDef.type!=\'401\'">背景颜色</label> <label ng-if="elemDef.type==\'201\' || elemDef.type==\'401\'">文字背景</label><div class="color_select clearfix"><eqd-input-color select-color="model.backgroundColor" direction="left" theme="flo_lef" notify="grid" x="-1" w="37" h="20" toolcolorpicker="styleColorPicker" isconverttransparent="true"></eqd-input-color><input class="flo_right" style="width:100px;" style-input="" elem-id="{{elemDef.id}}" ng-model="model.backgroundColor" css-item="backgroundColor" type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'2\' || elemDef.type == \'201\' || elemDef.type == \'401\' ||elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'r\' || elemDef.type == \'c\' || (elemDef.type == \'h\' && !elemDef.properties.src) || elemDef.type == \'w01\' || elemDef.type == \'w02\'"><label ng-if="elemDef.type != \'h\'">文字颜色</label> <label ng-if="elemDef.type == \'h\'">形状颜色</label><div class="color_select clearfix"><eqd-input-color select-color="model.color" direction="left" theme="flo_lef" notify="grid" x="-1" w="37" h="20" toolcolorpicker="styleColorPicker"></eqd-input-color><input class="flo_right" style="width:100px;" style-input="" elem-id="{{elemDef.id}}" ng-model="model.color" css-item="color" type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'h\' && elemDef.properties.src" ng-repeat="shapeColor in shapeAttrs"><label>形状颜色{{$index+1}}</label><div class="color_select clearfix"><eqd-input-color select-color="shapeColor.fill" direction="left" theme="flo_lef" notify="grid" x="-1" w="37" h="20" toolcolorpicker="styleColorPicker"></eqd-input-color><input class="flo_right" style="width:100px;" style-input="" elem-id="{{elemDef.id}}" ng-model="shapeColor.fill" type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type!=\'b\' && elemDef.type!=\'201\' && elemDef.type!=\'401\' && elemDef.type!=\'t\' && elemDef.type != \'g\'"><label>透明度</label><div class="touming clearfix"><p class="num"><input class="short" type="number" min="0" max="100" limit-input="" style-input="" elem-id="{{elemDef.id}}" css-item="opacity" ng-model="model.opacity"></p><div class="slider" ui-slider-t="" his-records="true" ng-model="model.opacity" min="0" max="100"></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'2\' || (\'\'+elemDef.type).charAt(0) == \'5\'"><div><label>边距</label><div class="touming clearfix"><p class="num"><input class="short" min="0" max="20" limit-input="" type="number" style-input="" css-item="padding" ng-model="model.paddingTop"></p><div class="slider" his-records="true" ui-slider-t="" ng-model="model.paddingTop" min="0" max="20"></div></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'2\' || (\'\'+elemDef.type).charAt(0) == \'5\'"><div><label>行高</label><div class="touming clearfix"><p class="num"><input class="short" min="0" max="3" limit-input="" step="0.1" type="number" style-input="" css-item="lineHeight" ng-model="model.lineHeight" ng-blur="lineHeightEmpty();"></p><div class="slider" his-records="true" ui-slider-t="" fixed="1" ng-model="model.lineHeight" min="0" max="3"></div></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'201\' || elemDef.type == \'401\'"><label>昵称类型</label><div class="touming clearfix"><select style="border:1px solid #ccc;height:20px;width:155px;" ng-model="model.niketype"><option value="own">浏览者昵称头像</option><option value="share">分享者昵称头像</option></select></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'4\' || elemDef.type == \'2\' || elemDef.type == \'s\' || elemDef.type == \'v\' || elemDef.type == \'l\' || elemDef.type == \'8\' || elemDef.type == \'m\' || elemDef.type == \'i\' || elemDef.type == \'d\' || elemDef.type == \'401\' || elemDef.type == \'201\' || elemDef.type == \'403\' || elemDef.type == \'w02\' || elemDef.type == \'w01\'"><div><label>固定组件</label><div class="touming clearfix" ng-show="longPage"><input class="short" type="checkbox" ng-model="model.lock" style="float:left;width:20px;"><div style="padding-top:4px;">固定组件位置(长页面)</div></div><div ng-show="!longPage" class="touming clearfix" tooltip-placement="bottom" tooltip="固定组件只能在长页面内使用"><input disabled="true" class="short" type="checkbox" ng-model="model.lock" style="float:left;width:20px;"><div style="padding-top:4px;">固定组件位置(长页面)</div></div></div></div><div ng-if="elemDef.type == \'t\'" ng-controller="chartStyleCtrl"><div ng-include="\'scene/console/chartStyle.tpl.html\'"></div></div></div></div></div></section><section ng-show="elemDef.type!=\'g\' && elemDef.type!=\'b\' && elemDef.type!=\'m\' && elemDef.type!=\'201\' && elemDef.type!=\'401\'&& elemDef.type!=\'t\'"><div class="style_list border-bottom pl20" ng-click="openExpore(\'showBorder\');"><span>边框样式</span><b class="caret" ng-show="showBorder"></b><b class="caret off" ng-show="!showBorder"></b></div><div ng-show="showBorder" class="style_con_hei"><div class="style_list_angel clearfix"><label>尺寸</label><div class="touming clearfix"><p class="num"><input class="input_kuang short" limit-input="" type="number" min="0" max="20" style-input="" css-item="borderWidth" ng-model="model.borderWidth"></p><div class="slider hint--right" ui-slider-t="" his-records="true" ng-model="model.borderWidth" min="0" max="20"></div></div></div><div class="style_list_angel clearfix"><label>弧度</label><div class="touming clearfix"><p class="num"><input class="input_kuang short" type="number" min="0" max="{{maxRadius}}" limit-input="" style-input="" css-item="borderRadius" ng-model="model.borderRadius"></p><div class="slider" his-records="true" ui-slider-t="" ng-model="model.borderRadius" min="0" max="{{maxRadius}}"></div></div></div><div class="style_list_angel clearfix"><label>样式</label><div class="touming"><select style="border:1px solid #ccc;height:20px;width:155px;" style-input="" css-item="borderStyle" ng-model="model.borderStyle"><option value="solid">直线</option><option value="dashed">破折线</option><option value="dotted">点状线</option><option value="double">双划线</option><option value="groove">3D凹槽</option><option value="ridge">3D垄状</option><option value="inset">3D内嵌</option><option value="outset">3D外嵌</option></select></div></div><div class="style_list_angel clearfix"><label>颜色</label><div class="color_select clearfix"><input class="flo_right short" style="width:100px;" style-input="" ng-model="model.borderColor" css-item="borderColor" type="text"><eqd-input-color select-color="model.borderColor" direction="left" theme="flo_lef" notify="grid" x="-1" w="37" h="20" toolcolorpicker="styleColorPicker"></eqd-input-color></div></div><div class="style_list_angel clearfix"><div><label>旋转</label><div class="touming clearfix"><p class="num"><input min="0" max="360" limit-input="" style-input="" css-item="transform" class="input_kuang short" type="number" ng-model="model.transform"></p><div his-records="true" class="slider" ui-slider-t="" ng-model="model.transform" min="0" max="360"></div></div></div></div></div></section><section ng-show="elemDef.type!=\'g\' && elemDef.type!=\'b\' && elemDef.type!=\'m\' && elemDef.type!=\'201\' && elemDef.type!=\'401\'&& elemDef.type!=\'t\'"><div class="style_list border-bottom border-top pl20" ng-click="openExpore(\'showShadow\');"><span>阴影样式</span><b class="caret" ng-show="showShadow"></b><b class="caret off" ng-show="!showShadow"></b></div><div ng-show="showShadow" class="style_con_hei"><div class="style_list_angel clearfix"><label>大小</label><div class="touming clearfix"><div class="slider" his-records="true" ui-slider-t="" ng-model="tmpModel.boxShadowSize" min="0" max="20"></div><p class="num"><input limit-input="" class="input_kuang short" min="0" max="20" type="number" style-input="" css-item="boxShadow" ng-model="tmpModel.boxShadowSize"></p></div></div><div class="style_list_angel clearfix"><label>模糊</label><div class="touming clearfix"><div class="slider" his-records="true" ui-slider-t="" ng-model="tmpModel.boxShadowBlur" min="0" max="20"></div><p class="num"><input limit-input="" class="input_kuang short" min="0" max="20" type="number" style-input="" css-item="boxShadow" ng-model="tmpModel.boxShadowBlur"></p></div></div><div class="style_list_angel clearfix"><label>颜色</label><div class="clearfix color_select"><input class="flo_right short" style="width:100px;" style-input="" ng-model="tmpModel.boxShadowColor" css-item="boxShadow" type="text"><eqd-input-color select-color="tmpModel.boxShadowColor" direction="left" theme="flo_lef" notify="grid" x="-1" w="37" h="20" toolcolorpicker="styleColorPicker"></eqd-input-color></div></div><div class="style_list_angel clearfix"><label>方向</label><div class="touming clearfix"><div class="slider" his-records="true" ui-slider-t="" ng-model="tmpModel.boxShadowDirection" min="0" max="359"></div><p class="num"><input limit-input="" class="input_kuang short" min="0" max="359" type="number" style-input="" css-item="boxShadow" ng-model="tmpModel.boxShadowDirection"></p></div></div></div></section><section ng-if="isEditor && elemDef.type!=\'g\'" ng-include="\'scene/console/compstyle.tpl.html\'" ng-controller="CompStyleCtrl"></section></div><div class="btn-option"><a class="btn btn-sm green" ng-click="cancel()">确定</a> <a class="btn btn-sm out-red" ng-click="clear()" ng-if="elemDef.type!=\'t\'">清除样式</a></div></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/tel.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">电话组件 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13070&extra"><span class="eqf-exclaquestion-sign"></span></a> <span class="action" ng-show="!authError">填写按钮名称和联系号码，点击可以直接拨打</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain"><div class="modify_area tel_title tab-same clearfix"><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style="button.btnStyle" ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span><div ng-class="{\'spanborder\': model.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint="上传图片大小不超过3M，支持上传格式：jpg、png、gif" ng-click="openImageModal()"><em class="eqf-top-pic" style="font-size:12px;"></em><em>自定义</em></div></div><div class="button_console dialog-content"><form class="form-contain" form="role"><div class="form-list clearfix" ng-if="!model.imgSrc"><label for="buttonName" class="form-label">按钮名称：</label><div class="form-input"><input id="buttonName" ng-class="{error: butName}" class="btn-name" type="text" ng-model="model.title" check-count="40" ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus="" stop-propagation=""></div></div><div class="form-list clearfix" ng-if="model.imgSrc"><label class="form-label">按钮图片：</label><div class="form-image btn-small"><img ng-src="{{PREFIX_FILE_HOST + model.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture text-center" ng-click="openImageModal()">更换图片</a></div></div><div class="form-list clearfix"><label for="phoneNumber" class="form-label">手机/电话：</label><div class="form-input"><input id="phoneNumber" ng-class="{error: butInput}" check-count="40" class="tel-button" type="text" placeholder="010-88888888" ng-model="model.number" ng-keyup="$event.keyCode == 13 ? confirm() : null" stop-propagation=""></div></div></form></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/trigger.tpl.html",'<div ng-if="activeTab == \'trigger\'" ng-controller="TriggerConsoleCtrl"><div style="height:410px;"><div eqd-scroll="" style="height: 100%;" disable-mouse="true" prevent-exception="true"><div class="trigger-area" eqx-trigger=""><div class="trigger-panels"><div class="style_list_angel clearfix pl20"><label style="width: 100px;margin-top:5px;">浏览页面时，当</label><div class="flo_lef touming"><eqx-select class="select-sm border-width select-contain" model="sendType" change="changeTriggerType(v)"><eqx-select-option value="v" ng-repeat="v in sendTypes">{{v.title}}</eqx-select-option></eqx-select></div></div><div class="style_list_angel clearfix pl20" ng-show="sendType.value!=2"><label style="margin-top:5px;">页面元素</label><div class="flo_lef touming"><eqx-select class="select-sm border-width select-contain" model="sourceElem" change="getTriggerSources(sourceElem)"><eqx-select-option value="null">点击选择元素</eqx-select-option><eqx-select-option value="triggerSource" ng-repeat="triggerSource in triggerSources">{{triggerSource.name}}</eqx-select-option></eqx-select></div></div></div><div class="event-list"><div ng-repeat="triggerEvent in triggerEvents track by $index" ng-init="sendIndex = $index"><div class="select-exist-elem" ng-show="triggerEvent.value == 1"><section><div class="style_list pl20" ng-class="{active:opea.show}" ng-init="opea.show=true" ng-click="opea.show=!opea.show">{{triggerEvent.title}} <span ng-click="addTriggerItem(triggerEvent, $index, $event);opea.show=!opea.show;">&nbsp;&nbsp;&nbsp;&nbsp;编辑</span> <b class="caret" ng-if="opea.show"></b> <b class="caret off" ng-if="!opea.show"></b> <span style="margin-left:35px;" class="eqf-wrong" ng-click="removeTrigger($index, $event)"></span></div><div ng-if="opea.show"><form role="form"><div class="style_list_angel ml20 mr20"><label>延迟时间</label><div class="touming clearfix"><p class="num"><input limit-input="" class="input_kuang short" type="number" step="0.1" min="0" max="20" ng-model="triggerEvent.delay"></p><div class="slider" ui-slider-t="" ng-model="triggerEvent.delay" min="0" max="20"></div></div></div><div class="select-trigger-item ml20 mr20"><ul ng-show="triggerEvent.handles.length"><li ng-repeat="triggerElement in triggerEvent.triggerElements"><div style="padding: 10px 20px;" ng-if="sourceElem.id!=triggerElement.id || sendType.value==2"><span hover-element="" id="triggerElement.id" style="cursor: pointer;"><span id="{{\'tip_\' + triggerElement.id}}"></span></span><div class="fr"><span style="padding-right: 5px;" class="fl" ng-click="switchShow(triggerElement, sendIndex)" ng-show="triggerElement.handleType.type==1">显示</span> <span style="padding-right: 5px;" class="fl" ng-click="switchShow(triggerElement, sendIndex)" ng-show="triggerElement.handleType.type==2">隐藏</span><div class="switch" style="float:left;" ng-class="{\'switch-open\':triggerElement.handleType.type==1,\'switch-close\':triggerElement.handleType.type==2}" ng-click="switchShow( triggerElement, sendIndex)"><div class="circle-con"><i class="circle"></i></div></div><span style="padding-left: 10px;" class="eqf-wrong" ng-click="cancelTriggerElem(triggerElement.id, sendIndex);"></span></div></div><div style="padding: 10px 20px;" ng-if="sendType.value!=2 && sourceElem.id==triggerElement.id"><span hover-element="" id="triggerElement.id" style="cursor: pointer;"><span id="{{\'tip_\' + triggerElement.id}}"></span></span><div class="fr"><span style="padding-right: 45px;" class="fl">隐藏</span> <span style="padding-left: 10px;" class="eqf-wrong" ng-click="cancelTriggerElem(triggerElement.id, sendIndex);"></span></div></div></li></ul></div></form></div></section></div><div class="random-event" ng-show="triggerEvent.value == 2"><section><div class="style_list pr20 pl20" ng-class="{active:opea.show}" ng-init="opea.show=true" ng-click="opea.show=!opea.show">{{triggerEvent.title}} <b class="caret" ng-if="opea.show"></b> <b class="caret off" ng-if="!opea.show"></b> <span style="margin-left:34px;" class="eqf-wrong" ng-click="removeTrigger($index, $event)"></span></div><div ng-if="opea.show"><form role="form"><div class="style_list_angel ml20 mr20"><label>延迟时间</label><div class="touming clearfix"><p class="num"><input limit-input="" class="input_kuang short" type="number" step="0.1" min="0" max="20" ng-model="triggerEvent.delay"></p><div class="slider" ui-slider-t="" ng-model="triggerEvent.delay" min="0" max="20"></div></div></div><div class="select-trigger-item"><div ng-show="triggerEvent.handles.length"><div ng-repeat="handle in triggerEvent.handles"><div ng-repeat="id in handle.ids"><span style="cursor:pointer;padding: 10px 20px;" hover-element="" id="id"><span>随机图片</span> {{$index+1}}</span> <a style="display: inline;" ng-click="cancelTriggerElem(id, sendIndex);">取消</a></div></div></div></div></form></div></section></div></div></div><div class="trigger-btn pl20" leave-panel=""><div class="event-panel" style="margin-bottom: 5px;"><div class="add-trigger" ng-mousedown="$event.stopPropagation();" ng-click="obj.showTriggerPanel = true;$event.stopPropagation();">添加触发 <span class="clickmore"></span></div><div><ul ng-show="obj.showTriggerPanel"><li ng-repeat="eventType in eventTypes" ng-click="addTriggerEvent(eventType, triggerEvents.length || 0);obj.showTriggerPanel = false;">{{eventType.title}}</li></ul></div></div></div></div></div></div><div class="btn-option"><a class="btn btn-sm green" ng-click="confirm()">确定</a> <a class="btn btn-sm out-red" ng-click="clear()">清除</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/triggerelemlist.tpl.html",'<div class="trigger-list"><div class="modal-header"><h4 class="modal-title">选择触发哪些元素显示或隐藏</h4></div><div class="modal-body"><ul highlight-element=""><li class="trigger-elem" ng-repeat="triggerElement in triggerElements track by $index" id="{{\'trigger_\' + triggerElement.id}}"><div><div class="square one-line" ng-if="elemDef.id != triggerElement.id"><div class="checkbox-square" ng-class="{checked: triggerElement.checked}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="triggerElement.checked" ng-change="changed(triggerElement)"></div><label>{{triggerElement.name}}</label><div class="fr" ng-if="triggerElement.checked"><a style="padding-right: 5px;" class="fl" ng-click="switchShow(triggerElement, currentIndex);" ng-show="triggerElement.triggerType==1">显示</a> <a style="padding-right: 5px;" class="fl" ng-click="switchShow(triggerElement, currentIndex);" ng-show="triggerElement.triggerType==2">隐藏</a><div class="switch" style="float:left;" ng-class="{\'switch-open\':triggerElement.triggerType==1,\'switch-close\':triggerElement.triggerType==2}" ng-click="switchShow( triggerElement, currentIndex)"><div class="circle-con"><i class="circle"></i></div></div></div></div><div ng-if="elemDef.id == triggerElement.id"><div class="checkbox-square" ng-class="{checked: triggerElement.checked}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="triggerElement.checked" ng-change="changed(triggerElement,true)"></div><label>{{triggerElement.name}}</label><div class="fr" ng-if="triggerElement.checked"><a style="padding-right: 45px;" class="fl">隐藏</a></div></div></div></li></ul></div><div class="modal-footer"><a class="btn btn-primary" ng-click="confirmList()"><span>确定</span></a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/video.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">视频组件 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1926&extra="><span class="eqf-exclaquestion-sign"></span></a> <span ng-show="!authError" class="action">把视频通用代码复制到框中即可使用</span> <span ng-show="authError">{{authError}}</span></h4></div><div class="dialog-contain"><div class="video_console dialog-content"><div class="modify_area" style="height:auto"><div class="video_tip"><span>视频通用代码：</span> <span class="video_code"><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=678&page=1&extra=#pid2706" target="_blank"><ins>什么是视频通用代码？</ins></a></span></div><div class="video_tip"><textarea style="border-radius:0px;" class="video_src" ng-model="model.src" ng-keyup="$event.keyCode == 13 ? confirm() : null"></textarea></div><div class="video_tip"><span>将视频的通用代码粘贴到文本框里即可。</span><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=678&page=1&extra=#pid2706" target="_blank"><ins>查看帮助</ins></a></div><div class="video_tip"><span>支持的视频：</span><a href="http://www.youku.com/" target="_blank"><ins>优酷</ins></a>、<a href="http://www.tudou.com/" target="_blank"><ins>土豆</ins></a>、<a href="http://v.qq.com/" target="_blank"><ins>腾讯视频</ins></a></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/console/wechatModal.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">设置{{title}}显示内容</h4></div><div class="dialog-contain counter"><div class="weChatShare"><div class="subContent"><div><div class="radio-square" ng-class="{checked:style.type===\'myself\'}"><em></em> <input class="span2" name="link" ng-model="style.type" type="radio" value="myself"></div><span>我是XX，</span></div><input placeholder="这是我用易企秀制作的场景，你也来试试吧。" ng-model="style.myselfContent" ng-disabled="style.type !==\'myself\'" check-count="50"> <span class="optionSpan">{{(style.myselfContent ? countCharacters(style.myselfContent.trim()):0)}}/50</span></div><div class="subContent"><div><div class="radio-square" ng-class="{checked:style.type===\'position\'}"><em></em> <input class="span2" name="link" ng-model="style.type" type="radio" value="position"></div><span>我是第X位</span></div><input placeholder="分享的人，你也一起来吧！" ng-disabled="style.type !==\'position\'" ng-model="style.positionContent" check-count="50"> <span class="optionSpan">{{(style.positionContent?countCharacters(style.positionContent.trim()):0)}}/50</span></div><div class="subContent"><div><div class="radio-square" ng-class="{checked:style.type===\'selfAndPosition\'}"><em></em> <input class="span2" name="link" ng-model="style.type" type="radio" value="selfAndPosition"></div><span>我是XX, 我是第X位</span></div><input placeholder="分享的人，你也一起来吧！" ng-disabled="style.type !==\'selfAndPosition\'" ng-model="style.selfAndPositionContent" check-count="50"> <span class="optionSpan">{{(style.selfAndPositionContent?countCharacters(style.selfAndPositionContent.trim()):0)}}/50</span></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/effect/falling.tpl.html",'<div id="page_panel" ng-if="effectType == \'fallingObject\'" class="dropdown-menu1 panel panel-default"><div class="panel-heading">落物设置</div><div class="panel-body"><form class="form-horizontal" role="form"><div class="form-group form-group-sm" style="margin-bottom:10px;"><label class="col-sm-5 control-label">环境图片</label><div class="col-sm-7"><select ng-model="falling.src" ng-options="fallingObj.name for fallingObj in fallings"></select></div></div><div class="divider"></div><div class="well" style="margin-bottom:15px;text-align: center;background-color: #ddd"><img ng-src="{{falling.src.path}}" style="width:60px;height:60px;"></div><div class="divider"></div><div class="form-group form-group-sm" style="margin-bottom:10px;"><label class="col-sm-5 control-label">环境氛围</label><div class="col-sm-7"><div style="line-height: 24px;font-size: 12px;"><span style="margin-right:39px;">弱</span><span style="margin-right:37px;">中</span><span>强</span></div><div style="width: 100px;" ui-slider="" min="1" max="3" ng-model="falling.density"></div></div></div><div class="form-group form-group-sm" style="margin-bottom:0px;"><div class="modal-footer" style="padding-bottom:0px;"><a class="btn-main" dropdown-toggle="" type="button" ng-click="saveEffect(falling)" style="width:88px;">保存</a> <a dropdown-toggle="" type="button" ng-click="cancelEffect()" class="btn-grey0" style="width:88px;">取消</a></div></div></form></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/effect/snowfly.tpl.html","")}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/font/font-shopping.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">字体商城</h4></div><div class="dialog-contain font-nav-tag"><div class="font-type"><ul><li ng-click="getMyFontFamily();" ng-class="{active:modal.fontType == \'my\'}"><a href="">我的字库</a></li><li ng-click="getFontType(1);" ng-class="{active:modal.fontType == 1}"><a href="">易企秀字库</a></li><li ng-click="getFontType(2);" ng-class="{active:modal.fontType == 2}"><a href="">方正字库</a></li><li ng-click="getFontType(3);" ng-class="{active:modal.fontType == 3}"><a href="">汉仪字库</a></li><li ng-click="getFontType(5);" ng-class="{active:modal.fontType == 5}"><a href="">字体管家</a></li></ul></div><div class="dialog-content bg_console sound-flex clearfix" style="height: 470px;"><div class="cate-title"><div style="height:470px;"><div eqd-scroll="" style="height: 100%;" disable-mouse="true" prevent-exception="true"><ul class="nav tabs-left" style="padding-top:0;"><li ng-repeat="font in currentTypeFontLists" ng-click="tabViewFont(font, $index);" class="font-type-detail" ng-class="{active: fontIndex == $index}" tab-font=""><a href="" data-toggle="tab">{{font.name}} <span class="eqf-lock" ng-if="font.status === 0 && modal.fontType == \'my\' && (font.userId === user.id || font.userId === null || font.userId === undefined)" ng-click="openCloseFontStatus(font)"></span> <span class="eqf-lock-open" ng-if="font.status === 1 && modal.fontType == \'my\' && (font.userId === user.id || font.userId === null || font.userId === undefined)" ng-click="openCloseFontStatus(font)"></span> <span class="" ng-if="modal.fontType != \'my\' && font.status == 3"></span> <span class="eqf-buy" ng-if="modal.fontType != \'my\' && font.status != 3 && !(font.license == 0 && (user.type == 21 || user.type == 51))" ng-click="buyFont(font)"></span></a></li></ul></div></div></div><div class="cate-list bg-rig"><div class="tab-pane active tab-head"><span class="buy-font-btn" ng-if="currentTypeFontLists.length !== 0"><a class="btn btn-primary" ng-if="currentViewObj.status === 1 && modal.fontType == \'my\' && (currentViewObj.userId === user.id || currentViewObj.userId === null || currentViewObj.userId === undefined)" ng-click="openCloseFontStatus(currentViewObj)">关闭</a> <a class="btn btn-primary" ng-if="modal.fontType !== \'my\' && currentViewObj.status != 3 && !(currentViewObj.license == 0 && (user.type == 21 || user.type == 51))" ng-click="buyFont(currentViewObj)">{{currentViewObj.price != null ? currentViewObj.price : 0}}秀点 <i class="eqf-buy"></i></a> <a class="btn btn-primary" ng-if="currentViewObj.status === 0 && modal.fontType == \'my\' && (currentViewObj.userId === user.id || currentViewObj.userId === null || currentViewObj.userId === undefined)" ng-click="openCloseFontStatus(currentViewObj)">开启 <i class="eqf-lock-open"></i></a> <a class="btn btn-primary" ng-if="(currentViewObj.status === 3 || (currentViewObj.license === 0 && (user.type == 21 || user.type == 51))) && modal.fontType != \'my\'">已购买 <i class=""></i></a></span> <span><span class="assign-group drop-area" style="padding:0;"><em>字体预览</em>&nbsp;&nbsp;&nbsp;</span></span></div><div class="img_list"><font-face fontface="{{fontFaceStr}}"></font-face><div class="img_list_container photo_list font-style"><ul class="img_box clearfix" style=""><div id="view-font" ng-style="{\'font-family\' : modal.fontFamily}"><div class="yqx">易企秀</div><div class="adword"><span>免费</span> <em>/</em> <span>简单</span> <em>/</em> <span>好用</span></div></div></ul></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/font/fontPurpose.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">购买字体</h4></div><div class="dialog-contain font-nav-tag bug-font-modal"><div class="buy-font-info"><div ng-if="font.license == undefined"><input type="radio" ng-model="usage.type" value="personal"> <span>购买个人授权版本，仅用于个人非商业传播（{{font.personal.price}}秀点)</span></div><div ng-if="font.license == 0"><span>已购买个人授权版本,仅用于个人非商业传播</span></div><div ng-show="font.license !=1 && userType != 21 && userType != 51"><input type="radio" ng-model="usage.type" value="business" ng-checked="true"> <span>购买企业授权版本，可用于商业传播（{{font.business.price}}秀点）</span></div></div></div><div class="btn-contain btn-small"><a ng-show="font.license == null || ( font.license == 0 && userType != 21 && userType != 51)" ng-click="confirmBuyFont();" class="btn-main">立即购买</a> <a ng-click="cancel();" class="btn-grey0">取消</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/page/page-tpl.tpl.html",'<div ng-show="scene.isTpl==2 || isTplEditor"><h4>元素特性设置</h4><div><ul class="tpl-uls" ng-repeat="tplElement in textElements"><li hover-element="" id="tplElement.id"><span>文字&nbsp;{{$index+1}}</span> <span>类型</span><select ng-model="tplElement.properties.type"><option value="0">无</option><option value="1">收卡人</option><option value="2">发卡人</option><option value="3">祝福语</option></select></li></ul><ul class="tpl-uls" ng-repeat="tplElement in tplElements"><li hover-element="" id="tplElement.id"><span>图片&nbsp;{{$index+1}}</span> <span>可替换</span> <input type="checkbox" ng-model="tplElement.isEditable" ng-true-value="1" ng-false-value="-1" ng-checked="tplElement.isEditable == 1"></li></ul></div><div class="line"></div></div><div><label ng-repeat="allchild in pageLabelAll"><input type="checkbox" name="" value="" ng-model="allchild.ischecked">{{allchild.name}}</label></div><div class="select-labels"><a ng-click="pageChildLabel()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/fall.tpl.html",'<div class="effect-img" style="background-color:#ccc"><img ng-src="{{falling.src.bgpath}}"></div><div class="effect-form"><form class="form-contain" role="form"><div class="form-list clearfix"><lable class="form-label">环境图片：</lable><div class="form-input"><eqx-select class="select-sm border-width select-contain" model="falling.src"><eqx-select-option value="fallingObj" ng-repeat="fallingObj in fallings">{{fallingObj.name}}</eqx-select-option></eqx-select></div></div><div class="form-list clearfix" style="margin-top: 10px;"><lable class="form-label">环境氛围：</lable><div class="form-input"><div style="line-height: 24px;font-size: 12px;"><span style="margin-right:39px;">弱</span><span style="margin-right:37px;">中</span><span>强</span></div><div style="width: 100px;" ui-slider="" min="1" max="3" ng-model="falling.density"></div></div></div></form></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/finger.tpl.html",'<div class="effect-img"><img ng-src="{{finger.bgImage.path}}"> <img class="finger-zw" ng-src="{{finger.zwImage.path}}"> <img class="finger-line" ng-src="{{CLIENT_CDN + \'view/images/finger_line.png\'}}" finger-move=""></div><div class="effect-form"><form class="form-contain" role="form"><div class="form-list clearfix"><label class="form-label">背景图片：</label><div class="form-input"><eqx-select class="select-sm border-width select-contain" model="finger.bgImage" change="replaceImg(finger)"><eqx-select-option value="null">自定义</eqx-select-option><eqx-select-option value="bgImage" ng-repeat="bgImage in fingerBackgrounds">{{bgImage.name}}</eqx-select-option></eqx-select></div></div><div class="form-list clearfix"><label class="form-label">指纹图片：</label><div class="form-input"><eqx-select class="select-sm border-width select-contain" model="finger.zwImage"><eqx-select-option value="zwImage" ng-repeat="zwImage in fingerZws">{{zwImage.name}}</eqx-select-option></eqx-select></div></div></form></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/fireworks.tpl.html",'<div class="effect-img"><img ng-src="{{CLIENT_CDN + \'assets/images/create/firework.gif\'}}"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/money.tpl.html",'<div class="effect-img"><img ng-src="{{CLIENT_CDN + \'assets/images/create/money_thumb3.png\'}}"></div><div class="effect-form"><form class="form-contain" role="form"><div class="form-list clearfix"><label class="form-label">提示文字：</label><div class="form-input"><input type="text" ng-model="money.tip" placeholder="提示文字" check-count="40" ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus="" stop-propagation="" style="width: 290px;" ng-blur="checkCharLength()"><p style="color:red;" ng-show="tipError">{{tipError}}</p></div></div></form></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/none.tpl.html",'<div style="padding-top:100px;font-size:24px;">点击确定，即可去除特效。</div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/pageeffect.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">页面特效 <a class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1939&extra="><span class="eqf-exclaquestion-sign"></span></a> <span class="action">在设置界面可看到效果</span></h4></div><div class="dialog-contain"><div class="form_console dialog-content"><div class="modify_area"><div class="effect-list"><ul><li ng-class="{\'select-effect\': controlView.effectIndex == $index || controlView.effectType == effect.type}" ng-repeat="effect in effectList" ng-click="selectEffect(effect, $index)">{{effect.name}}</li></ul></div><div class="effect-detail"><div class="scratch-effect" ng-show="controlView.effectType == \'scratch\'" ng-include="\'scene/pageeffect/scratch.tpl.html\'" ng-controller="scratchEffectCtrl"></div><div class="finger-effect" ng-show="controlView.effectType == \'finger\'" ng-include="\'scene/pageeffect/finger.tpl.html\'" ng-controller="fingerEffectCtrl"></div><div class="fall-effect" ng-show="controlView.effectType == \'fallingObject\'" ng-include="\'scene/pageeffect/fall.tpl.html\'" ng-controller="fallEffectCtrl"></div><div class="snow-effect" ng-show="controlView.effectType == \'snowFly\'" ng-include="\'scene/pageeffect/snow.tpl.html\'" ng-controller="snowEffectCtrl"></div><div class="firework-effect" ng-show="controlView.effectType == \'fireWorks\'" ng-include="\'scene/pageeffect/fireworks.tpl.html\'" ng-controller="fireWorksCtrl"></div><div class="none-effect" ng-show="controlView.effectType == \'none\'" ng-include="\'scene/pageeffect/none.tpl.html\'" ng-controller="noneEffectCtrl"></div></div></div></div></div><div class="modal-footer no-line"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/scratch.tpl.html",'<div class="scratch-pre"><div class="effect-img scratch-img" scratch-effect=""><img ng-src="{{scratch.image.path}}"></div></div><div class="effect-form scratch-form" style="margin-left: 210px;"><form class="form-contain" role="form"><div class="form-list clearfix"><label class="form-label">覆盖效果</label><div class="form-input"><eqx-select class="select-sm border-width select-contain" model="scratch.image" change="replaceImage(scratch)"><eqx-select-option value="null">自定义</eqx-select-option><eqx-select-option value="scracthImage" ng-repeat="scracthImage in scratches">{{scracthImage.name}}</eqx-select-option></eqx-select></div></div><div class="form-list clearfix"><label class="form-label">透明度</label><div class="form-input"><eqd-input-number ng-model="scratch.opacity" min="0" max="100" unit="%" ng-mouseenter="currentTipsIndex = 1" ng-mouseleave="currentTipsIndex = 0"></eqd-input-number></div><div class="tooltip right" role="tooltip" ng-show="currentTipsIndex == 1"><div class="tooltip-arrow"></div><div class="tooltip-inner">双击鼠标可以输入数值，按住鼠标左键左右滑动可快速调整数值</div></div></div><div class="form-list clearfix"><label class="form-label">涂抹比例</label><div class="form-input"><eqd-input-number ng-model="scratch.percentage" min="0" max="100" unit="%" ng-mouseenter="currentTipsIndex = 1" ng-mouseleave="currentTipsIndex = 0"></eqd-input-number></div></div><div class="form-list clearfix"><label class="form-label">提示文字</label><div class="form-input"><input type="text" ng-model="scratch.tip" placeholder="提示文字" check-count="40" ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus="" stop-propagation="" style="width: 290px;"></div></div></form></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/pageeffect/snow.tpl.html",'<div class="effect-img"><img ng-src="{{CLIENT_CDN + \'assets/images/create/snowmove.gif\'}}"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/support/support.tpl.html",'<div class="support-contain"><div class="imgie"><img class="mt20" ng-src="{{CLIENT_CDN}}assets/images/support/HTML5.svg"></div><h3 class="h3ie">尊敬的易企秀用户：</h3><p><span>为了保证您在易企秀内的使用体验，建议您从下列浏览器中选择一款进行访问。若坚持使用该浏览器，请</span> <a class="text-primary" ng-click="continue()"><span>继续使用</span></a></p><ul><li><a id="download_Chorme" ng-href="{{download_Chorme}}" target="_blank"><img ng-src="{{CLIENT_CDN}}assets/images/support/chrome.svg"> <span>Chrome</span></a></li><li><a id="download_IE" ng-href="{{download_IE}}" target="_blank"><img ng-src="{{CLIENT_CDN}}/assets/images/support/IE11.svg"> <span>IE11</span></a></li><li><a id="download_360" ng-href="{{download_360fast}}" target="_blank"><img class="ml20" ng-src="{{CLIENT_CDN}}/assets/images/support/360fast.svg"> <span>360极速浏览器</span></a></li><li><a id="download_360" ng-href="{{download_360}}" target="_blank"><img ng-src="{{CLIENT_CDN}}/assets/images/support/360safe.svg"> <span>360浏览器</span><br><span>极速模式</span></a></li></ul></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/active/active-xq.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="cake"><div class="same-content"><a href="/show">秀场</a> > <a href="/show/active">活动</a> > {{activeMes.title}}</div></div><div class="same-content"><div id="{{\'ac_\' + activeId}}" class="active-lunbo mt slidesjs-con" paginav="false" flux-slide="" style="width:1000px;height:400px;"><div class="slides-content" ng-repeat="banner in banners" on-finish-render-filter=""><a target="{{banner.target}}" data-banner="{{bannerData}}" href="{{banner.url}}" data-bid="{{banner.id}}"><img ng-src="{{banner.path}}" alt="{{banner.title}}" title="{{banner.title}}" width="1000px" height="400px"></a></div><a class="slidesjs-previous slidesjs-navigation"><i class="eqf-left"></i></a> <a class="slidesjs-next slidesjs-navigation"><i class="eqf-right"></i></a></div><div class="show-list tuijian"><h2><em>推荐</em><a href="" ng-click="attend()">我要参加</a><span>RECOMMEND</span></h2><ul class="clearfix"><li ng-repeat="recList in recSceneList"><a href="{{PREFIX_SHOW_HOST + \'/s/\' + recList.code}}" target="_blank"><img ng-src="{{PREFIX_FILE_HOST + recList.cover}}"><p>{{recList.name}}</p><p><span class="auth"><img title="{{recList.userLoginName}}" ng-src="{{recList.headImg}}"></span> <span><em class="eqf-eye"></em>{{recList.showCount}}</span></p></a></li></ul></div><div id="introduction" ng-bind-html="activeMes.introduction"></div><div class="show-list"><h2><em>最新</em><span>NEW</span></h2><ul class="clearfix"><li ng-repeat="scene in sceneList"><a href="{{PREFIX_CLIENT_HOST + \'/s/\' + scene.code}}" target="_blank"><img ng-src="{{PREFIX_FILE_HOST + scene.cover}}"><p>{{scene.name}}</p><p><span class="auth"><img title="{{scene.userLoginName}}" ng-src="{{scene.headImg}}"></span> <span><em class="eqf-eye2"></em>{{scene.showCount}}</span></p></a></li></ul></div><div class="same-content clearfix" ng-show="totalItems > 16"><pagination style="float:left;" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="16" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div><div class="same-content hezuo" ng-show="friendLinks.length > 0"><h2><em>合作</em><span>FRIEND</span></h2><ul class="clearfix"><li ng-repeat="link in friendLinks"><a href="{{link.url}}" target="_blank"><img ng-src="{{link.logo}}" title="{{link.name}}" logo="{{link.name}}"></a></li></ul></div></div></div><div ng-include="\'footer.tpl.html\'"></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/active/active.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="same-content"><div class="active-lunbo mt slidesjs-con" paginav="false" flux-slide="" style="width:1000px;height:400px;"><div class="slides-content" ng-repeat="banner in banners" on-finish-render-filter=""><a target="{{banner.target}}" data-banner="4202" href="{{banner.url}}" data-bid="{{banner.id}}"><img ng-src="{{banner.path}}" alt="{{banner.title}}" title="{{banner.title}}" width="650px" height="256px"></a></div><a class="slidesjs-previous slidesjs-navigation"><i class="eqf-left"></i></a> <a class="slidesjs-next slidesjs-navigation"><i class="eqf-right"></i></a></div><div class="active-list mt"><h2><em>活动</em><span>ACTIVITY</span></h2><ul><li ng-repeat="hdList in activeList"><div class="join hdList"><span><em>作品</em>：{{hdList.joinNum}}</span><span><em>截止日期</em>：{{hdList.endDate | date:\'yyyy-MM-dd\'}}</span> <a ng-show="hdList.join" ng-click="attend(hdList.type)">参加</a> <a ng-show="!hdList.join" style="background-color:#ccc">结束</a></div><div><a ng-click="join(hdList.id)"><img ng-src="{{PREFIX_FILE_HOST + hdList.image}}">{{hdList.title}}</a></div></li></ul></div><div class="same-content clearfix pb20" ng-show="totalItems > 10"><pagination style="float:left;" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div><div class="same-content hezuo" ng-show="friendLinks.length > 0"><h2>合作<span>FRIEND</span></h2><ul class="clearfix"><li ng-repeat="link in friendLinks"><a href="{{link.url}}" target="_blank"><img ng-src="{{link.logo}}" title="{{link.name}}" alt="{{link.name}}"></a></li></ul></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/category/category.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="show-con same-content clearfix"><div class="hd-lunbo slidesjs-con" paginav="false" flux-slide=""><div class="slides-content" ng-repeat="banner in banners" on-finish-render-filter=""><a target="{{banner.target}}" data-banner="{{bannerData}}" href="{{banner.url}}" data-bid="{{banner.id}}"><img ng-src="{{banner.path}}" alt="{{banner.title}}" title="{{banner.title}}" width="650px" height="260px"></a></div><a class="slidesjs-previous slidesjs-navigation"><i class="eqf-left"></i></a> <a class="slidesjs-next slidesjs-navigation"><i class="eqf-right"></i></a></div><aside><h2><a class="apply_showker" href="/show/active">更多</a><em>活动</em><span>ACTIVITY</span></h2><ul><li ng-repeat="hdList in activeList" title="{{hdList.title}}"><a ng-click="join(hdList.id)"><img ng-src="{{PREFIX_FILE_HOST + hdList.image}}"> {{hdList.title}}</a></li></ul></aside></div><div class="show-list same-content"><h2>{{catName}}</h2><div class="category"><ul class="category_two clearfix"><li ng-repeat="child in childCatrgoryList" ng-class="{active:child.id == categoryId}" ng-click="getPageTpls(order,child.id)"><a title="{{child.name}}">{{child.name}}</a></li></ul></div></div><div class="show-list same-content"><ul class="clearfix" ng-show="tpls.length"><li ng-repeat="tpl in tpls"><a href="{{PREFIX_SHOW_HOST + \'/s/\' + tpl.code}}" target="_blank"><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class="eqf-eye2"></em>{{tpl.showCount}}</span> <span class="auth"><img title="{{tpl.userName}}" ng-src="{{tpl.headImg}}"></span></p></a> <a ng-if="tpl.isTemplate == 1" class="screen-use" target="_blank" ng-click="userTpl(tpl)">使用</a></li></ul><div style="margin:20px;" ng-hide="tpls.length">此分类下暂无场景</div></div><div class="same-content clearfix" ng-show="totalItems > 16" style="margin-bottom:20px;"><pagination style="float:left;" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="16" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/category/nav.tpl.html",'<div class="show-head"><div ng-include="\'header.tpl.html\'"></div><div class="banner"><div class="big-font"><img ng-src="{{CLIENT_CDN}}assets/images/show/faxian.png"></div><div class="input-search"><input class="search" type="text" value="" ng-model="val" ng-change="search(val)" ng-keypress="EnterPress(event,val)" ng-keydown="EnterPress(val)"> <span class="eqf-serach search-icon" ng-click="submit()" style="cursor:pointer"></span></div></div><nav><ul class="clearfix"><li><a href="/show/" ng-class="{active: childCat == \'index\'}">秀场</a></li><li><a href="/show/active" ng-class="{active: childCat == \'active\'}">活动</a></li><li ng-show="accessOrderTask || user.type === 99"><a href="/show/task" ng-class="{active: childCat == \'task\'}">任务推广</a></li><li><a href="/show/recommend/h5" ng-class="{active: childCat == \'recommend\'}">推荐</a></li><li ng-repeat="type in sceneType"><a ng-class="{active: childCat == type.value}" ng-click="getCategoryPage(type.value,type.id)">{{type.name}}</a></li><li><a href="/show/visitor" ng-class="{active: childCat == \'visitor\'}">秀客</a></li></ul></nav></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/recommend/commonRecommend.tpl.html",'<div class="show-list same-content"><h2><i>推荐</i><span>RECOMMEND</span><div class="nav"><a href="" ng-class="{active: recommendType == \'print\'}" ng-click="recommend(\'print\')">轻设计</a> <a href="" ng-class="{active: recommendType == \'h5\'}" class="mr55" ng-click="recommend(\'h5\')">H5场景</a></div></h2><ul class="clearfix"><li ng-repeat="tpl in recommendList" class="XC-scene"><div class="dis-tips-over all-change" ng-if="tpl.disCountFlag">限时打折,距离活动结束还有{{tpl.disCountTime}}天</div><div class="ribbon ribbon-badge" ng-if="!!tpl.price && tpl.isTemplate == 1 && recommendType == \'h5\' && !tpl.disCountFlag"><span class="ribbon-inner check">{{tpl.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="!!tpl.price && tpl.isTemplate == 1 && recommendType == \'h5\' && tpl.disCountFlag"><div class="discount-red discount-bg"><span class="discount-del">&nbsp{{tpl.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><a href="{{PREFIX_SHOW_HOST + \'/s/\' + tpl.code}}" target="_blank"><a href="" ng-click="preview(tpl.code)"><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class="eqf-eye2"></em>{{recommendType == \'h5\' ? tpl.showCount : tpl.pv}}</span> <span class="auth"><img title="{{tpl.userName}}" ng-src="{{tpl.headImg}}"></span></p></a> <a ng-if="tpl.isTemplate == 1" class="screen-use" target="_blank" ng-click="userTpl(tpl)">使用</a></a></li></ul><div class="more" ng-show="!filter"><a href="/show/recommend/h5" class="apply_showker1" ng-show="recommendType == \'h5\' && !filter">点击查看更多</a> <a href="/show/recommend/print" class="apply_showker1" ng-show="recommendType == \'print\' && !filter">点击查看更多</a></div></div><div class="same-content clearfix" style="margin-bottom:20px;" ng-show="totalItems > 16 && filter"><pagination style="float:left;" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div><div id="preview_wrap"><span class="eqf-wrong"></span><iframe id="pc_preview" width="100%" height="100%" scrolling="no" frameborder="0"></iframe></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/recommend/recommend.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><eqd-common-recommend filter="true" category="{{category}}" change-location="true"></eqd-common-recommend></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/search/search.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="cake"><div class="same-content"><a href="/show">首页</a> > <i>搜索</i>-{{name}}</div></div><div class="same-content" style="margin-bottom:20px;"><div class="show-list same-content"><h2><i>搜索</i><span><i>SEARCH</i></span></h2><div class="search clearfix"><input type="text" value="" id="search" ng-model="val" onchange="search(val)" ng-keypress="EnterPress(event,val)" ng-keydown="EnterPress(val)"> <a href="" ng-click="submit(val)"><em class="eqf-serach"></em><i>搜索</i></a></div><div class="search-con"><p><i>您搜索的关键词：</i><span class="key">{{name}}</span> <i>共有</i><span class="key">{{totalItems}}</span><i>条结果</i></p></div><ul class="clearfix"><li ng-repeat="tpl in searchList" class="XC-scene"><div class="dis-tips-over all-change" ng-if="tpl.disCountFlag">限时打折,距离活动结束还有{{tpl.disCountTime}}天</div><div class="ribbon ribbon-badge" ng-if="!!tpl.price && tpl.isTemplate == 1 && !tpl.disCountFlag"><span class="ribbon-inner check">{{tpl.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="!!tpl.price && tpl.isTemplate == 1 && tpl.disCountFlag"><div class="discount-red discount-bg"><span class="discount-del">&nbsp{{tpl.price}}秀点&nbsp</span> <span class="discount-normal"><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><a href="{{PREFIX_SHOW_HOST + \'/s/\' + tpl.code}}" target="_blank"><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class="eqf-eye2"></em>{{tpl.showCount}}</span> <span class="auth"><img title="{{tpl.userName}}" ng-src="{{tpl.headImg}}"></span></p></a> <a ng-if="tpl.isTemplate == 1" class="screen-use" target="_blank" ng-click="userTpl(tpl)">使用</a></li></ul></div><div class="same-content clearfix" ng-show="totalItems > 16"><pagination style="float:left;" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/visitor/visitor-xq.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="cake"><div class="same-content"><a href="/show">秀场</a> > <a href="/show/visitor">秀客</a> > {{visitorMsg.name}}</div></div><div class="visitor-xq same-content"><div class="clearfix"><img ng-show="visitorMsg.headImg" ng-src="{{visitorMsg.headImg}}" width="200px" height="200px"><div ng-show="!visitorMsg.headImg" style="width:200px;height:200px;background-color:#08a1ef;text-align:center;line-height:230px;float:left;margin-right:20px;"><em class="eqf-top-contact" style="color:#fff;font-size:50px;"></em></div><div class="visitor-dec"><h4>{{visitorMsg.name}}</h4><p class="des">{{visitorMsg.introduction}}</p><ul><li><span>擅长领域：</span><span ng-repeat="cate in cateTag">{{cate.name}}</span></li><li><span>服务地域：</span><span ng-repeat="server in serverTag">{{server.name}}</span></li><li><span>支付方式：</span><span ng-repeat="pay in payTag">{{pay.name}}</span></li></ul></div></div><div class="contact"><a class="qq hint--top hint--rounded" data-hint="{{qqAction}}{{visitorMsg.qq}}"><em class="eqf-qq"></em>&nbsp;&nbsp;{{visitorMsg.qq}}</a> <a class="hint--top hint--rounded weixin" data-hint="微信号：{{visitorMsg.wechat}}"><em class="eqf-wechat"></em>&nbsp;&nbsp;{{visitorMsg.wechat}}</a> <a class="phone hint--top hint--rounded" data-hint="手机号：{{visitorMsg.tel}}"><em class="eqf-glyphicon-earphone"></em>&nbsp;&nbsp;{{visitorMsg.tel}}</a> <a ng-if="visitorMsg.email" class="sixin hint--top hint--rounded" data-hint="邮箱：{{visitorMsg.email}}" ng-href="mailto:{{visitorMsg.email}}"><em class="eqf-envelope"></em>&nbsp;&nbsp;{{visitorMsg.email}}</a> <a ng-if="!visitorMsg.email" class="hui hint--top hint--rounded" data-hint="该秀客没有留下邮箱"><em class="eqf-envelope"></em>&nbsp;&nbsp;该秀客没有留下邮箱</a></div></div><div class="show-list same-content"><h2><i>作品</i><span>WORKS</span></h2><ul class="clearfix"><li ng-repeat="tpl in visitorWorks"><a href="{{PREFIX_CLIENT_HOST + \'/s/\' + tpl.code}}" target="_blank"><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class="eqf-eye2"></em>{{tpl.showCount}}</span> <span class="auth"><img title="{{tpl.userName}}" ng-src="{{tpl.headImg}}"></span></p></a></li></ul></div><div class="same-content clearfix pb20" ng-show="totalItems > 16"><pagination style="float:left;" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="pageSize" total-items="totalItems" max-size="10" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/visitor/visitor.tpl.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="visitor-contain"><div class="visitor same-content clearfix"><section><h2>场景定制找秀客<a class="zhinan" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=15436" target="_blank">指南</a><a class="apply_showker" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13168" target="_blank">申请成为秀客</a></h2><div class="select-list"><span>服务地域</span>|<a ng-class="{active:serverAll == \'all\'}" ng-click="serverWu(\'province\',\'serverAll\')">不限</a> <a ng-repeat="server in serverLabel | filter: getLimitedServeRegion" ng-click="subServer(server)" ng-class="{active:currentServer ==server}">{{server.name}}</a> <a ng-show="moreArea" class="more" data-toggle="dropdown">更多</a><div class="other-label dropdown-menu"><a ng-repeat="otherServer in serverLabel | filter: getOtherServeRegion" ng-click="subServer(otherServer)" ng-class="{active:currentServer == otherServer}">{{otherServer.name}}</a></div></div><div class="select-list" style="position:relative;"><span>擅长领域</span>|<a ng-class="{active:cateAll == \'all\'}" ng-click="serverWu(\'company_industry\',\'cateAll\')">不限</a> <a ng-repeat="tag in cateLabel | filter: getLimitedCateRegion" ng-click="subLabel(tag)" ng-class="{active:currentCate ==tag}">{{tag.name}}</a> <a data-toggle="dropdown" ng-show="moreLabel" class="more">更多</a><div class="other-label dropdown-menu"><a ng-repeat="otherCate in cateLabel | filter: getOtherCateRegion" ng-click="subLabel(otherCate)" ng-class="{active:currentCate == otherCate}">{{otherCate.name}}</a></div></div><div class="select-list"><span>付款方式</span>|<a ng-class="{active:payAll == \'all\'}" ng-click="serverWu(\'payType\',\'payAll\')">不限</a> <a ng-repeat="pay in payLabel" ng-click="subPay(pay)" ng-class="{active: currentPay == pay}">{{pay.name}}</a></div></section><aside class="visitor-list"><h2>本周之星<a class="apply_showker" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13804" target="_blank">申请本周之星</a></h2><div class="visitor-same"><div class="visitor-one clearfix"><a ng-click="visitorXq(recommendVisitor.userId)"><img ng-show="recommendVisitor.headImg" ng-src="{{recommendVisitor.headImg}}" width="80px" height="80px"><div ng-show="!recommendVisitor.headImg" style="width:80px;height:80px;text-align:center;line-height:80px;background-color:#08a1ef;float:left;margin-right:20px;padding-top:8px;"><em class="eqf-top-contact" style="color:#fff;font-size:30px;"></em></div></a><h3><a ng-click="visitorXq(recommendVisitor.userId)">{{recommendVisitor.name}}</a></h3><p class="dec" style="white-space:normal" title="{{recommendVisitor.introduction}}">{{recommendVisitor.introduction}}</p></div><div class="visitor-works"><ul><li class="ellipsis"><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/s/\' + work1Code}}" target="_blank">{{work1Name}}</a></li><li class="ellipsis"><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/s/\' + work2Code}}" target="_blank">{{work2Name}}</a></li><li class="ellipsis"><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/s/\' + work3Code}}" target="_blank">{{work3Name}}</a></li></ul></div></div></aside></div><div class="same-content visitor-item"><h2><a class="apply_showker" style="color:#08a1ef" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23517&extra=" target="_blank">委托易企秀找定制</a>秀客列表</h2><div class="visitor-content"><p ng-if="visitorList.length == 0" style="padding:20px 0;">暂无秀客列表</p><ul class="clearfix" ng-if="visitorList.length >0"><li class="visitor-list visitor-same" ng-repeat="visitor in visitorList"><div class="visitor-one clearfix"><a ng-click="visitorXq(visitor.userId)"><img ng-show="visitor.headImg" ng-src="{{visitor.headImg}}" width="80px" height="80px"><div ng-show="!visitor.headImg" style="width:80px;height:80px;text-align:center;line-height:80px;background-color:#08a1ef;float:left;margin-right:20px;padding-top:8px;"><em class="eqf-top-contact" style="color:#fff;font-size:30px;"></em></div></a><div><h3><a ng-click="visitorXq(visitor.userId)">{{visitor.name}}</a></h3><p class="dec" style="white-space:normal" title="{{visitor.introduction}}"><span>{{visitor.introduction}}</span></p></div></div><div class="visitor-works"><ul><li class="ellipsis"><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/s/\' + visitor.represent1Code}}" target="_blank">{{visitor.represent1Name}}</a></li><li class="ellipsis"><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/s/\' + visitor.represent2Code}}" target="_blank">{{visitor.represent2Name}}</a></li><li class="ellipsis"><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/s/\' + visitor.represent3Code}}" target="_blank">{{visitor.represent3Name}}</a></li></ul></div></li></ul></div></div><div class="same-content clearfix" ng-show="totalItems > 12" style="margin-bottom:20px;"><pagination style="float:left;" first-text="首页" previous-text="&lsaquo;" next-text="&rsaquo;" last-text="尾页" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/addBranch.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">添加子账号</h4></div><div class="modal-body"><form class="form-horizontal" role="form"><div class="form-group clearfix"><label class="control-label col-sm-3">账号名称</label><div class="col-sm-7"><input type="text" class="form-control" ng-class="{\'border-error\': nameError}" ng-model="user.loginName" placeholder="个人账号名称"><p class="action">提示：请在用户中心查看账号名称</p><p class="error add-branch">{{nameError}}</p></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm(user.name)">确认</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/addDepartment.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">{{title}}</h4></div><div class="modal-body"><div class="form-group clearfix"><div class="col-sm-offset-3 col-sm-7"><input class="form-control" type="text" ng-model="dept.name" placeholder="输入部门名称" ng-class="{error: deptFormatError}"><p class="error" ng-show="deptFormatError">{{deptFormatError}}</p></div></div></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/branch.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">{{diaTitle}}</h4></div><div class="modal-body"><form class="form-horizontal" role="form"><div class="form-group clearfix"><label class="control-label col-sm-3">账号名称</label><div class="col-sm-7"><input type="text" class="form-control" ng-model="branch.loginName" placeholder="建议使用邮箱作为账号名称" ng-disabled="originData" ng-class="{error: branchNameError}" ng-blur="checkBranchName()"><p class="error" ng-show="branchNameError">{{branchNameError}}</p></div></div><div class="form-group"><label class="control-label col-sm-3">账号密码</label><div class="col-sm-7" ng-show="!resetDefalt"><input type="text" class="form-control" placeholder="初始密码为eqxiu" disabled=""></div><div class="col-sm-2 tip" ng-show="resetDefalt"><a ng-click="openResetModal(branch);"><span class="enable">重置</span></a></div></div><div class="form-group"><label class="control-label col-sm-3">用户昵称</label><div class="col-sm-7"><input type="text" class="form-control" ng-model="branch.name" placeholder="请填写用户名" ng-class="{error: nameFormatErr}" ng-change="checkNameFormat()"><p class="error" ng-show="nameFormatErr">{{nameFormatErr}}</p></div></div><div class="form-group"><label class="control-label col-sm-3">所在部门</label><div class="col-sm-7"><eqx-select class="select-contain border-width select-base" model="branch.dept" change="selectDep(branch.dept)"><eqx-select-option value="null">全部</eqx-select-option><eqx-select-option value="dept" ng-repeat="dept in depts">{{dept.name}}</eqx-select-option></eqx-select></div><div class="col-sm-2 tip" style="padding-top: 10px;"><a ng-click="manageDepartment()">管理部门</a></div></div><div class="form-group"><div class="col-sm-offset-3 col-sm-7"><p class="error" ng-show="serverError">{{serverError}}</p></div></div><div class="form-group"><label class="col-sm-2 text-right"></label><div class="col-sm-9 permit" style="padding-left:0;"><ul class="clearfix"><li class="fl"><div class="checkbox-square" ng-class="{checked: sceneAllPro.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="sceneAllPro.check" ng-change="produceAll(sceneAllPro,\'scene\')"></div><label>场景相关</label></li><li class="fl" ng-repeat="scene in scenePermi"><div class="checkbox-square" ng-class="{checked: scene.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="scene.check" ng-change="productSelect(scene,\'scene\')"></div><label>{{scene.name}}</label></li></ul><ul class="clearfix"><li class="fl"><div class="checkbox-square" ng-class="{checked: spreadAllPro.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="spreadAllPro.check" ng-change="produceAll(spreadAllPro,\'spread\')"></div><label>推广相关</label></li><li class="fl" ng-repeat="spread in spreadPermi"><div class="checkbox-square" ng-class="{checked: spread.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="spread.check" ng-change="productSelect(spread,\'spread\')"></div><label>{{spread.name}}</label></li></ul><ul class="clearfix"><li class="fl"><div class="checkbox-square" ng-class="{checked: customerAllPro.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="customerAllPro.check" ng-change="produceAll(customerAllPro,\'customer\')"></div><label>客户相关</label></li><li class="fl" ng-repeat="customer in customerPermi"><div class="checkbox-square" ng-class="{checked: customer.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="customer.check" ng-change="productSelect(customer,\'customer\')"></div><label>{{customer.name}}</label></li></ul><ul class="clearfix"><li class="fl"><div class="checkbox-square" ng-class="{checked: userAllPro.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="userAllPro.check" ng-change="produceAll(userAllPro,\'user\')"></div><label>账号特权</label></li><li class="fl" ng-repeat="user in userPermi"><div class="checkbox-square" ng-class="{checked: user.check}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="user.check" ng-change="productSelect(user,\'user\')"></div><label>{{user.name}}</label></li></ul></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="confirm()">保存</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/checkMobile.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{title}}</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label class="control-label col-sm-3">手机号</label><div class="col-sm-7"><input class="form-control" type="text" ng-model="userinfo.phone" ng-blur="checkMobile();" placeholder="请输入手机号"><p class="error" ng-show="mobileError">{{mobileError}}</p></div></div><div class="form-group"><div class="clearfix"><label class="control-label col-sm-3">验证码</label><div class="col-sm-5"><input style="text-align:left;" type="text" class="form-control" maxlength="12" ng-model="userinfo.code" ng-blur="checkCode()" placeholder="请输入验证码"></div><div class="col-sm-2 tip" ng-show="!isCodeAccessiable"><a ng-click="showImageCode()" id="submit-button"><span class="enable">获取验证码</span></a></div><div class="col-sm-2 tip" ng-show="isCodeAccessiable"><a><span class="disable">{{codeTip}}</span></a></div></div><p style="padding-left:27%;" class="error" ng-show="codeError">{{codeError}}</p></div><div class="textbox-wrap validate clearfix mb20"><div><script type="text/javascript" load-script="" ng-src="{{validateCodeUrl}}"></script></div><div id="captcha-box"></div></div><div class="pt20 border-dashed"></div><div class="text-center" style="padding-bottom:10px;font-size:12px;color:#a3afb7;">为保障用户账号安全,您需要填写当前登录账号密码</div><div class="form-group"><label for="inputPass" class="control-label col-sm-3">密码</label><div class="col-sm-7"><input id="inputPass" type="password" class="form-control" maxlength="16" ng-model="userinfo.password" placeholder="请输入当前账号密码"><p class="error" ng-show="relErr">{{relErr}}</p></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <button type="button" class="btn btn-primary" ng-click="relAccount()" data-event="7216">确定</button></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/companyinfo.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{title}}</h4></div><div class="userinfo-contain"><form class="form-horizontal"><fieldset><div class="form-group cleafix"><label for="username" class="col-sm-3 control-label">{{contactName}}</label><div class="col-sm-7"><input type="text" ng-model="companyUserInfo.name" class="form-control" id="username" placeholder="填写{{contactName}}" maxlength="12"></div></div><div ng-if="type == 2 || type == 5"><div class="form-group cleafix"><label class="col-sm-3 control-label">联系人</label><div class="col-sm-7"><input type="text" ng-model="companyUserInfo.contacts" class="form-control" id="inputAddress" placeholder="请填写联系人"></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">联系电话</label><div class="col-sm-7"><input type="text" ng-model="companyUserInfo.mobile" class="form-control" id="inputAddress" placeholder="请填写联系电话"></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">联系邮箱</label><div class="col-sm-7"><input type="text" ng-blur="checkEmail(companyUserInfo)" class="form-control" ng-model="companyUserInfo.email" id="inputAddress" placeholder="请填写联系邮箱"></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">联系地址</label><div class="col-sm-7"><input type="text" class="form-control" ng-model="companyUserInfo.address" ng-blur="checkAdress(companyUserInfo)" id="inputAddress" placeholder="请填写公司地址"></div></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票信息</label><div class="col-sm-7"><a class="btn blue" ng-click="invoice()" style="color:#fff;">修改发票信息</a></div></div></fieldset></form><p ng-show="authError" style="text-align:center;color:#ff5448;">{{authError}}</p></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel();">取消</a> <a class="btn btn-primary" ng-if="type ==2 || type == 5" ng-click="saveCompanyInfo(companyUserInfo)" data-event="7201">保存提交</a> <a class="btn btn-primary" ng-if="type !=2 && type != 5" ng-click="saveUserInfo(companyUserInfo)" data-event="7201">保存提交</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/email_fail.tpl.html",'<!DOCTYPE html><html><head><meta charset="utf-8"><style>\n        *{margin:0;padding:0;}\n        body{\n            font-family: "Microsoft YaHei", Tahoma, Helvetica, Arial, sans-serif;\n        }\n        .content{\n            font-size: 18px;\n            height:200px;\n            width:400px;\n            position: absolute;\n            top:50%;\n            left:50%;\n            margin-top: -100px;\n            margin-left: -200px;\n        }\n        p{margin-top:15px;}\n        a{color:#08a1ef;font-size: 14px;}\n\n    </style></head><body><div class="content"><p>无效的请求，原因可能是：</p><p>1.无效的验证信息；</p><p>2.验证信息已经过期，请在获得链接后立即使用；</p><p>3.验证信息已经被使用，请重新申请；</p><p><a href="http://eqxiu.com/home" style="background-color:#08a1ef;padding:4px 8px;color:#fff;text-decoration:none;">进首页看看</a></p></div></body></html>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/email_succeed.tpl.html",'<!DOCTYPE html><html><head><meta charset="utf-8"><style>\n        *{margin:0;padding:0;}\n        body{\n            font-family: "Microsoft YaHei", Tahoma, Helvetica, Arial, sans-serif;\n        }\n        .content{\n            font-size: 18px;\n            height:80px;\n            width:400px;\n            position: absolute;\n            top:50%;\n            left:50%;\n            margin-top: -40px;\n            margin-left: -200px;\n        }\n        p{margin-top:15px;}\n        a{color:#08a1ef;}\n    </style><script src="http://code.jquery.com/jquery-1.11.0.min.js"></script><script language="javascript">\n\t\t$(document).ready(function() {\n\t\t\tfunction jump(count) {\n\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\tcount--;\n\t\t\t\t\tif(count > 0) {\n\t\t\t\t\t\t$(\'#num\').attr(\'innerHTML\', count);\n\t\t\t\t\t\tjump(count);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocation.href="http://eqxiu.com/#/usercenter/userinfo";\n\t\t\t\t\t}\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t\tjump(5);\n\t\t});\n\t</script></head><body><div class="content"><p>您的邮箱验证成功！</p><p style="margin-top:15p;"><a href="#">如果您的浏览器没有自动跳转，请点击此链接</a></p><p style="margin-top:25p;"><a href="#" style="background-color:#08a1ef;font-size:14px;padding:4px 8px;color:#fff;text-decoration:none;">进首页看看</a></p></div></body></html>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/invitation.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id="main" class="pt20 mb20"><div class="invitation-contain same-content text-center pt20 pb20"><h3>快快邀请小伙伴们一起来秀吧!</h3><div class="link-content clearfix"><div class="method fl"><div class="circle">1</div><div class="line"></div><div class="circle">2</div></div><div class="fl ml20"><div class="url-contaion"><div class="title">复制分享链接，通过微信、QQ等方式将链接分享给您的小伙伴，邀请他们加入易企秀</div><p class="copy-url mb20"><em>我的精美场景都是用易企秀做的，免费好用，你也来试试吧，官网地址：</em><br>{{showUrl}}</p><a ng-if="isSafari" class="text-primary copy-btn text-left" style="display:block;" ng-click="copyUrl()" data-event="2232">复制链接分享</a> <a ng-if="!isSafari" class="text-primary copy-btn text-left" style="display:block;" copy-button="" url="{{showUrl}}" data-event="2232">复制链接分享</a></div><div class="share-containt"><span class="tip mt20">也可以直接发送邮件给您的小伙伴或者扫一扫下面的二维码邀请他们加入易企秀</span><div class="tab-div"><ul class="nav nav-tabs"><li ng-class="{active: tabid == \'email\'}"><a ng-click="tabid = \'email\'"><i>Email</i></a></li><li ng-class="{active: tabid == \'wechat\'}"><a ng-click="tabid = \'wechat\'"><i>微信</i></a></li><li ng-class="{active: tabid == \'qq\'}"><a ng-click="tabid = \'qq\'"><i>QQ</i></a></li></ul><div><div class="tab-pane" ng-if="tabid == \'qq\'"><div class="view"><div class="info"><h2>QQ分享</h2><span>用QQ扫描右侧二维码</span></div><div class="qrcode" qr-code="" qr-url="{{showUrl}}"></div><img ng-src="{{CLIENT_CDN}}assets/images/usercenter/qq.png"></div></div><div class="tab-pane" ng-if="tabid == \'wechat\'"><div class="view"><div class="info"><h2>微信分享</h2><span>用微信扫描右侧二维码分享到朋友圈</span></div><div class="qrcode" qr-code="" qr-url="{{showUrl}}"></div><img ng-src="{{CLIENT_CDN}}assets/images/usercenter/pic.png"></div></div><div class="tab-pane" ng-if="tabid == \'email\'"><h2 class="ml20 mt20">发送邮件给你的小伙伴</h2><div class="form-group mt20"><div class="col-sm-9"><input type="text" ng-blur="checkEmailFormat(email)" class="form-control input-lg" placeholder="输入小伙伴的邮箱" ng-model="email"><p class="error" ng-show="emailFormatErr">{{emailFormatErr}}</p></div><a class="btn-primary btn colsm-2" ng-disabled="emailFormatErr" ng-click="sendEmail(email)" data-event="2233">发送邀请</a></div></div></div></div></div></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/invoice-list.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">我的订单</h4></div><div class="modal-body"><table class="table table-bordered table-hover"><thead><tr><th><div class="checkbox-square customer-check fr" ng-class="{checked: selectAll.selected}"><em class="eqf-clickmore"></em> <input class="check-box" type="checkbox" ng-model="selectAll.selected" name="iCheck" ng-change="switchSelectAll()"></div></th><th>订单号</th><th>所购商品</th><th>价格</th><th>购买时间</th><th>支付方式</th></tr></thead><tbody><tr ng-repeat="invoice in invoiceList"><td><div class="checkbox-square customer-check fr" ng-class="{checked: invoice.selected}"><em class="eqf-clickmore"></em> <input class="check-box" type="checkbox" ng-model="invoice.selected" name="iCheck" ng-change="switchSelect(invoice)"></div></td><td>{{invoice.id}}</td><td>{{invoice.name}}</td><td>{{invoice.totalFee}}</td><td>{{invoice.createTime}}</td><td>{{invoice.payType}}</td></tr></tbody></table><div class="clearfix" style="margin-top:10px;margin-bottom:0;" ng-show="totalItems > 5"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><input type="text" ng-model="obj.toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(obj.toPage) : null"> <a ng-click="pageChanged(obj.toPage)" class="go">确认</a></div></div></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a type="button" class="btn btn-primary" ng-click="ok()">开发票</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/invoice.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">发票信息</h4></div><div class="modal-body invoice" style="height:415px;overflow: hidden;padding:20px 20px 0 20px;"><div eqd-scroll="" style="height:100%;"><form class="form-horizontal" ng-class="{disabled:!editInfo.isEditable}"><div class="form-group clearfix"><label for="inputPassword3" class="col-sm-3 control-label">收件人</label><div class="col-sm-7"><span class="noEdit" ng-model="invoice.receiver">{{invoice.receiver}}</span> <input type="text" class="form-control" ng-model="invoice.receiver" placeholder="请填写收件人" maxlength="24"></div></div><div class="form-group clearfix"><label for="inputPassword3" class="col-sm-3 control-label">联系电话</label><div class="col-sm-7"><span class="noEdit" ng-model="invoice.phone">{{invoice.phone}}</span> <input type="text" class="form-control" ng-model="invoice.phone" placeholder="请填写联系电话" maxlength="24"></div></div><div class="form-group clearfix"><label for="inputPassword3" class="col-sm-3 control-label">收货地址</label><div class="col-sm-7"><span class="noEdit" ng-model="invoice.address">{{invoice.address}}</span> <input type="text" class="form-control" ng-model="invoice.address" placeholder="请填写收货地址" maxlength="40"></div></div><div class="form-group clearfix"><label for="inputPassword3" class="col-sm-3 control-label">发票类型</label><div class="col-sm-7"><div class="btn-group"><a class="btn btn-default background-color-width-change" ng-class="{active:invoiceStatus == 1}" ng-click="changeType(1)">增值税普票</a> <a class="btn btn-default background-color-width-change" ng-class="{active:invoiceStatus == 2}" ng-click="changeType(2)">增值税专票</a> <a class="btn btn-default background-color-width-change" ng-class="{active:invoiceStatus == 3}" ng-click="changeType(3)">个人普票</a></div></div></div><div ng-show="invoiceStatus == 1"><div class="form-group clearfix"><label for="inputPassword3" class="col-sm-3 control-label">发票抬头</label><div class="col-sm-7"><span class="noEdit" ng-model="invoiceListPu.title">{{invoiceListPu.title}}</span> <input type="text" class="form-control" ng-model="invoiceListPu.title" placeholder="请填写发票抬头" maxlength="24"></div><div class="col-sm-2 tips"><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324" target="_blank" style="text-decoration:underline;">了解详情</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票内容</label><div class="col-sm-7"><span class="">技术服务费</span></div></div></div><div ng-show="invoiceStatus == 2"><div class="form-group clearfix"><label for="inputPassword3" class="col-sm-3 control-label">发票抬头</label><div class="col-sm-7"><span class="noEdit" ng-model="invoiceListzhuan.title">{{invoiceListzhuan.title}}</span> <input type="text" class="form-control" ng-model="invoiceListzhuan.title" placeholder="请填写发票抬头" maxlength="24"></div><div class="col-sm-2 tips"><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324" target="_blank" style="text-decoration:underline;">了解详情</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票内容</label><div class="col-sm-7"><span class="">技术服务费</span></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">一般纳税人资质证明</label><div class="col-sm-7" style="position:relative;"><div class="see-image zoomIn-change" ng-show="people" ng-model="picture.people" ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + picture.people) + \')\',\'background-size\':\'contain\',\'background-repeat\': \'no-repeat\',\'background-position\':\'center\'}"><a class="eqf-wrong2" ng-click="people=false;" style="position:absolute;top:-5px;right:-5px;font-size:14px;"></a></div><a class="btn blue mr20 upload" ng-click="addPictures(\'people\')">上传</a> <a ng-if="picture.people" class="btn blue mr20" ng-init="$parent.people=false;" ng-click="$parent.people=!$parent.people">查看</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">开票信息加盖公章</label><div class="col-sm-7" style="position:relative;"><div class="see-image zoomIn-change" ng-show="mes" ng-model="picture.mes" ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + picture.mes) + \')\',\'background-size\':\'contain\',\'background-repeat\': \'no-repeat\',\'background-position\':\'center\'}"><a class="eqf-wrong2" ng-click="mes=false;" style="position:absolute;top:-5px;right:-5px;font-size:14px;"></a></div><a class="btn blue mr20 upload" ng-click="addPictures(\'mes\')">上传</a> <a ng-if="picture.mes" class="btn blue" ng-init="$parent.mes=false;" ng-click="$parent.mes=!$parent.mes">查看</a></div></div></div><div ng-show="invoiceStatus == 3"><div class="form-group clearfix"><label for="inputPassword3" class="col-sm-3 control-label">发票抬头</label><div class="col-sm-7"><span class="">个人</span></div><div class="col-sm-2"><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324" target="_blank" style="text-decoration:underline;">了解详情</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票内容</label><div class="col-sm-7"><span>技术服务费</span></div></div></div><p class="red-color text-center" ng-show="authError">{{authError}}</p><div class="invoice-action"><p class="text-red">1、自购买之日一个月内必须提交发票申请，过期将不予开具；发票申请提交后，易企秀将在一个月内开具发票并寄出；外国用户仅能提供发票扫描件。</p><p>2、易企秀发票项目为：技术服务费。（目前仅开具此项内容，不能开具其他项目）。</p><p>3、如果一个月内多次购买，建议一次性提交发票申请，多个订单可合并。</p><p>4、如发票信息填写错误造成发票无法报销，易企秀不予退换发票，请认真填写，确保无误。</p></div></form></div></div><div class="modal-footer mt20"><a class="modal-cancle" ng-if="editInfo.isEditable" ng-click="cancel();">取消</a> <a class="btn btn-primary" ng-if="editInfo.isEditable" ng-click="saveUserInvoice(userinfo)" data-event="7202">保存提交</a> <a class="modal-cancle" ng-if="!editInfo.isEditable" ng-click="reset();">修改发票信息</a> <a class="btn btn-primary" ng-if="!editInfo.isEditable" ng-click="submit(userinfo)" data-event="7202">提交</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/manageDepartment.tpl.html",'<div class="modal-header"><a class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></a><h4 class="modal-title">部门管理</h4></div><div class="modal-body dept" eqd-scroll=""><ul class="department" style=""><li ng-repeat="dept in depts" ng-class="{active: dept.selectDep}" ng-click="selectDept(dept.id)"><span class="fr"><em class="eqf-write" ng-click="setDepartment(dept)"></em> <em class="eqf-scene-delete" ng-click="delete($event, dept.id, $index)"></em></span> {{dept.name}}</li></ul></div><div class="modal-footer"><a class="modal-cancle" ng-click="setDepartment()">添加部门</a> <a class="btn btn-primary" ng-click="confirm()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/register.tpl.html",'<div class="modal-header"><h4 class="modal-title">设置账号-密码<span class="action" ng-show="relErr">{{relErr}}</span></h4></div><div class="modal-body registerForm"><form class="form-contain" role="form"><div class="form-list clearfix"><label for="inputPassword3" class="form-label">登录账号</label><div class="form-input"><input type="text" class="third-name" autofocus="" ng-model="thirdUser.loginName" ng-blur="checkUsername();" placeholder="设置邮箱账号"> <span ng-show="usernameError" class="error_text">{{usernameError}}</span></div></div><div class="form-list clearfix"><label for="inputPassword3" class="form-label">密码</label><div class="form-input"><input type="password" class="third-pwd" style="float:right;" maxlength="12" ng-model="thirdUser.password" ng-blur="checkPassword()" placeholder="密码6~16个字符(英文字母或数字 区分大小写)"> <span ng-show="passError" class="error_text">{{passError}}</span></div></div><div class="form-list clearfix"><label for="inputPassword3" class="form-label">确认密码</label><div class="form-input"><input type="password" class="third-pwd" style="float:right;" maxlength="12" ng-model="thirdUser.repeatPassword" ng-blur="checkRepeatPassword()" placeholder="确认密码"> <span ng-show="rPassError" class="error_text">{{rPassError}}</span></div></div><div class="login-form-action clearfix mt20"><div class="checkbox pull-left"><input type="checkbox" ng-model="thirdUser.agreement"> <span class="checkbox-text"><a href="/agreement" target="_blank">同意《用户注册协议》</a></span></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="registerAccount()">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/relAccount.tpl.html",'<div class="modal-header"><h4 class="modal-title">绑定账号 <span class="action" ng-show="relErr">{{relErr}}</span> <span class="action" ng-show="!relErr">绑定已有账号</span></h4></div><div class="modal-body"><form class="form-contain" role="form"><div class="form-list clearfix"><label for="inputPassword3" class="form-label">登录账号</label><div class="form-input"><input type="text" class="third-name" ng-model="user.email" ng-blur="checkUpperCase();" placeholder="输入要绑定的账号"></div></div><div class="pt20 mt20 border-dashed"></div><div class="text-center" style="padding-bottom:10px;font-size:12px;color:#a3afb7;">&nbsp;为保障用户账号安全，需要填写绑定账号密码</div><div class="form-list clearfix"><label for="inputPassword3" class="form-label">密码</label><div class="form-input"><input type="password" class="third-pwd" style="float:right;" ng-model="user.password" placeholder="输入该账号登录密码"></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="bindAccount()">立即绑定</a> <a class="btn btn-primary" ng-click="cancel();createAccount();">创建账号</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/relEmail.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{title || \'绑定邮箱\'}}</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label for="inputMail" class="col-sm-3 control-label">邮箱</label><div class="col-sm-7"><input id="inputMail" type="text" class="form-control" ng-model="userinfo.email" ng-class="{error: emailFormatErr}" ng-blur="checkUpperCase();checkEmailFormat(userinfo)" placeholder="输入邮箱"><p class="error" ng-show="emailFormatErr">{{emailFormatErr}}</p></div></div><div class="pt20 border-dashed"></div><div class="text-center" style="padding-bottom:10px;font-size:12px;color:#a3afb7;">为保障用户账号安全,您需要填写当前登录账号密码</div><div class="form-group"><label for="inputPass" class="col-sm-3 control-label">密码</label><div class="col-sm-7"><input id="inputPass" type="password" class="form-control" ng-model="userinfo.password" placeholder="请输入当前账号密码" ng-class="{error: passFormatErr}" ng-blur="checkPassFormat(userinfo)"><p class="error" ng-show="passFormatErr">{{passFormatErr}}</p><p class="error" ng-show="relErr">{{relErr}}</p></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a type="button" class="btn btn-primary" ng-click="relEmail(userinfo)" data-event="7213">立即绑定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/relForum.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">修改论坛</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label for="inputBbsName" class="control-label col-sm-3">论坛账号</label><div class="col-sm-7"><input id="inputBbsName" class="form-control" type="text" ng-model="userinfo.bbsId" ng-blur="checkBbsName();" placeholder="请输入论坛账号"><p class="error" ng-show="BbsNameError">{{BbsNameError}}</p></div></div><div class="form-group"><label for="inputBbsPwd" class="control-label col-sm-3">论坛密码</label><div class="col-sm-7"><input style="text-align:left;" id="inputBbsPwd" type="password" class="form-control code" ng-model="userinfo.bbsPwd" ng-blur="checkBbsPassword()" placeholder="请输入论坛密码"><p class="error" ng-show="bbsPwdError">{{bbsPwdError}}</p></div></div><div class="pt20 border-dashed"></div><div class="text-center" style="padding-bottom:10px;font-size:12px;color:#a3afb7;">为保障用户账号安全,您需要填写当前登录账号密码</div><div class="form-group"><label for="inputPass" class="control-label col-sm-3">密码</label><div class="col-sm-7"><input id="inputPass" type="password" class="form-control" ng-model="userinfo.eqxiuPwd" ng-blur="checkEqxiuPassword()" placeholder="请输入当前账号密码"><p class="error" ng-show="eqxiuPwdError">{{eqxiuPwdError}}</p></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <button type="button" class="btn btn-primary" ng-click="relForum()" data-event="7219">确定</button></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/resetbranchpass.tpl.html",'<div class="dialog-contain"><div class="dialog-head"><h1>重置密码</h1><p ng-show="!authError">在此修改密码，退出再登录后即成功</p><p ng-show="authError">{{authError}}</p></div><div class="dialog-content"><form class="form-contain" role="form"><div class="form-list clearfix"><label for="inputPassword3" class="form-label">子账号：</label><div class="form-input" style="top: 6px;">{{branch.loginName}}</div></div><div class="tip" style="padding-left: 30px;margin: 20px 0;"><span>重置密码后，密码将恢复为初始密码:</span> <span style="color: #ff0000;">eqxiu</span></div><div class="btn-contain btn-big"><a class="btn-main login" ng-click="reset()">重置为初始密码</a> <a class="btn-grey0 cancel" ng-click="cancel()">取消</a></div></form></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/serverinfo.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{title}}<a href="http://eqxiu.com/show/visitor" style="font-size:12px;padding-left:5px;" target="_blank">什么是秀客？</a></h4></div><div class="modal-body"><form class="form-horizontal upgrade"><div class="form-group"><label class="control-label col-sm-2">用户昵称</label><div class="col-sm-8"><input type="text" class="form-control" ng-model="applyInfo.nick" placeholder="30个字符"></div></div><div class="form-group"><label class="control-label col-sm-2">简短介绍</label><div class="col-sm-8"><input type="text" class="form-control" ng-model="applyInfo.shortIntroduction" placeholder="30个字符" ng-class="{error: introError}" ng-blur="checkIntroFormat(applyInfo)"><p class="error" ng-show="introError">{{introError}}</p></div><div class="col-sm-2 tips ng-scope">必填</div></div><div class="form-group"><label class="control-label col-sm-2">详细介绍</label><div class="col-sm-8"><textarea class="form-control" ng-model="applyInfo.introduction" placeholder="400个字符" ng-class="{error: introError1}" ng-blur="checkIntroFormat1(applyInfo)"></textarea><p class="error" ng-show="introError1">{{introError1}}</p></div><div class="col-sm-2 tips ng-scope">必填</div></div><div class="form-group"><label class="text-right col-sm-2">代表作品</label><div ng-show="myShowScene" class="clearfix"><div class="col-sm-7"><p ng-show="sceneSelected.length < 1" style="color:#999">请选择3个代表作品，作品默认会加入秀场</p><p ng-show="sceneSelected.length >0" class="select-icon"><span ng-repeat="scene in sceneSelected" class="ellipsis" title="{{scene.name}}">{{scene.name}}</span></p></div><div class="dropdown" style="width:50px;float:left;"><a ng-show="myShowScene.length > 0" class="more dropdown-toggle" style="color:#08a1ef">选择</a><div class="other-label dropdown-menu" style="width:500px;left:-400px;"><div class="select-contain"><div class="square col-sm-6 ellipsis" ng-repeat="scene in myShowScene" forbidden-close=""><div class="checkbox-square" ng-class="{checked: scene.ischecked}"><em class="eqf-yes2"></em> <input type="checkbox" id="{{scene.name + $index}}" class="area" ng-model="scene.ischecked" ng-value="other"></div><label for="{{scene.name + $index}}" title="{{scene.name}}">{{scene.name}}</label></div></div><div class="col-sm-12 text-right" forbidden-close=""><a class="modal-cancle" ng-click="scene_cancel($event)">取消</a> <a class="btn btn-primary" ng-click="sceneSelect(scene, $event,true)">确认</a><p class="error" style="float:left;" ng-show="sceneError">{{sceneError}}</p></div></div><div class="otherBg" forbidden-close=""></div></div><div class="col-sm-1 tips" style="padding-top:0;padding-bottom:0;">必填</div></div><div class="col-sm-8" style="color:#ff0000" ng-show="!myShowScene">您暂无代表作品，请先创建场景</div><p class="col-sm-8 error" style="padding-left:145px" ng-show="sceneNull">{{sceneNull}}</p></div><div class="form-group"><label class="col-sm-2 text-right">服务地域</label><div class="col-sm-7"><p style="color:#999" ng-show="serverSelected.length < 1">请选择1-3个服务的地域</p><p ng-show="serverSelected.length >0" class="select-icon"><span ng-repeat="server in serverSelected" class="ellipsis" title="{{server.name}}">{{server.name}}</span></p><p class="error" style="float:left;" ng-show="serverNull">{{serverNull}}</p></div><div class="dropdown" style="float:left;width:50px;"><a ng-show="moreArea" class="more dropdown-toggle" style="color:#08a1ef">选择</a><div class="other-label dropdown-menu" style="width:500px;left:-400px;"><div class="select-contain"><div class="square col-sm-4" ng-repeat="server in serverLabel" forbidden-close=""><div class="checkbox-square" ng-class="{checked: server.ischecked}"><em class="eqf-yes2"></em> <input type="checkbox" id="{{server.name + $index}}" class="area" ng-model="server.ischecked"></div><label for="{{server.name + $index}}">{{server.name}}</label></div></div><div class="col-sm-12 text-right" style="line-height:36px;" forbidden-close=""><a class="modal-cancle" ng-click="server_cancel($event)">取消</a> <a class="btn btn-primary" ng-click="serverSubmit(applyInfo,$event,true)">确认</a><p class="error" style="float:left;" ng-show="serverError">{{serverError}}</p></div></div><div class="otherBg" forbidden-close=""></div></div><div class="col-sm-1 tips" style="padding-top:0;padding-bottom:0;">必填</div></div><div class="form-group"><label class="col-sm-2 text-right">擅长领域</label><div class="col-sm-7"><p style="color:#999" ng-show="cateSelected.length < 1">请选择1-3类擅长的领域</p><p ng-show="cateSelected.length >0" class="select-icon"><span ng-repeat="cate in cateSelected" class="ellipsis" title="{{cate.name}}">{{cate.name}}</span></p><p class="error" ng-show="cateNull">{{cateNull}}</p></div><div class="dropdown" style="float:left;width:50px;"><a ng-show="moreLabel" class="more dropdown-toggle" style="color:#08a1ef">选择</a><div class="other-label dropdown-menu" style="width:550px;left:-420px;"><div class="select-contain"><div class="square col-sm-3" ng-repeat="otherCate in cateLabel" forbidden-close=""><div class="checkbox-square" ng-class="{checked: otherCate.ischecked}"><em class="eqf-yes2"></em> <input type="checkbox" id="{{otherCate.name + $index}}" class="area" ng-model="otherCate.ischecked" ng-value="other"></div><label for="{{otherCate.name + $index}}">{{otherCate.name}}</label></div></div><div class="col-sm-12 text-right" style="line-height:36px;" forbidden-close=""><a class="modal-cancle" ng-click="cate_cancel($event)">取消</a> <a class="btn btn-primary" ng-click="queren(applyInfo, $event,true)">确认</a><p class="error" style="float:left;" ng-show="cateError">{{cateError}}</p></div></div><div class="otherBg" forbidden-close=""></div></div><div class="col-sm-1 tips" style="padding-top:0;padding-bottom:0;">必填</div></div><div class="form-group" style="position:relative;"><label class="col-sm-2 text-right">支付方式</label><div style="float:left;width:380px;"><div class="square" style="width:90px;float:left;margin-left:15px;" ng-repeat="pay in payLabel"><div class="checkbox-square" ng-class="{checked: pay.ischecked}"><em class="eqf-yes2"></em> <input type="checkbox" id="{{pay.name + $index}}" ng-model="pay.ischecked" class="area"></div><label for="{{pay.name + $index}}">{{pay.name}}</label></div></div><div class="col-sm-1 tips" style="margin-left:12px;">必填</div><div class="col-sm-offset-2 col-sm-10" ng-show="payError"><p class="error">{{payError}}</p></div></div><div class="form-group"><label class="control-label col-sm-2">服务QQ</label><div class="col-sm-8"><input type="text" class="form-control" ng-model="applyInfo.qq" value="" ng-class="{error: qqError}" placeholder="服务QQ" ng-blur="checkQQFormat(applyInfo)" maxlength="20"><p class="error" ng-show="qqError">{{qqError}}</p></div><div class="col-sm-2 tips">必填</div></div><div class="form-group"><label class="control-label col-sm-2">微信号</label><div class="col-sm-8"><input type="text" class="form-control" ng-class="{error: wechatError}" ng-model="applyInfo.wechat" value="" placeholder="微信号" maxlength="20"><p class="error" ng-show="wechatError">{{wechatError}}</p></div><div class="col-sm-2 tips">必填</div></div><div class="form-group"><label class="control-label col-sm-2">联系邮箱</label><div class="col-sm-8"><input type="text" class="form-control" ng-model="applyInfo.email" value="" ng-class="{error: emailError}" ng-blur="checkEmailFormat(applyInfo)" placeholder="联系邮箱" maxlength="40"><p class="error" ng-show="emailError">{{emailError}}</p></div><div class="col-sm-2 tips">必填</div></div><div class="form-group"><label class="control-label col-sm-2">手机号</label><div class="col-sm-8"><input type="text" class="form-control" ng-model="applyInfo.phone" value="" ng-class="{error: telError}" placeholder="手机号" ng-change="changePhone(applyInfo.phone)" maxlength="20"><p class="error" ng-show="telError">{{telError}}</p></div><div class="col-sm-2 tips ng-scope">必填</div></div><div class="form-group clearfix" ng-show="showPhone"><label for="inputPassword3" class="col-sm-2 control-label">验证码</label><div class="col-sm-6"><input type="type" class="form-control" ng-class="{error:codeError}" placeholder="验证码" ng-model="applyInfo.code" ng-blur="checkCode(applyInfo)"><p class="error" ng-show="codeError">{{codeError}}</p></div><div class="col-sm-2" style="padding:0;" ng-show="showPhone"><span ng-show="!isCodeAccessiable"><a class="code" ng-click="getImageCode(applyInfo,1)" id="submit-button">验证码</a></span> <span class="code enble" ng-show="isCodeAccessiable">{{codeTip}}</span></div><div class="col-sm-2 tips">必填</div></div><div><script type="text/javascript" load-script="" ng-src="{{validateCodeUrl}}"></script></div><div id="captcha-box"></div><div class="form-group cleafix" ng-show="!invoiceStat"><label class="col-sm-2 control-label">发票信息</label><div class="col-sm-7"><a class="btn blue" ng-click="invoice()" style="color:#fff;">修改发票信息</a></div></div></form><p ng-show="authError" style="text-align:center;color:#ff5448;">{{authError}}</p></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <a class="btn btn-primary" ng-click="submit(applyInfo)" ng-show="applyXiuke" data-event="7201">提交申请</a> <a class="btn btn-primary" ng-click="reset(applyInfo)" ng-show="!applyXiuke" data-event="7201">确定</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/console/upgrade_company.tpl.html",'<div class="login-form-section"><div class="login-content"><form class="form-horizontal"><div class="section-title"><a class="bbs-help-tip eqf-wrong fr" ng-click="quXiao()"></a><h3>申请企业会员</h3></div><div class="company-user-modal"><eqd-reg-company change-location="true"></eqd-reg-company></div></form></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/account.tpl.html",'<div class="account-contain"><div class="m-title"><div class="m-icon fl" ng-class="{\'red-bg\':redColor, \'green-bg\':!redColor}"><span class="eqf-love"></span></div><div class="m-detail"><div class="m-type">{{progress}}</div><div class="pt20 clearfix"><span class="mr20">安全指数</span> <span class="mr20 progress"><span class="progress-bar background-color-width-change account-progress" ng-style="{\'width\':progress + \'%\'}" ng-class="{\'red-bg\':redColor, \'green-bg\':!redColor}"></span></span> <span class="mr20 red-color" ng-if="redColor">低</span> <span class="mr20 green-color" ng-if="!redColor">高</span> <span>建议您启动全部安全设置，以保障账号安全</span></div></div></div><div class="tab-box-shadow"><div class="account-items clearfix"><div class="item-one"><em ng-class="{\'eqf-yes green-color\':userinfo.email && userinfo.checkEmail == 1,\'eqf-exclamation-sign red-color\': userinfo.checkEmail != 1}"></em> <span>保密邮箱</span></div><div class="item-two"><span ng-if="userinfo.email &&( userinfo.checkEmail == 0 || userinfo.checkEmail==null)"><em style="font-weight:lighter;">您的邮箱：{{ userinfo.email}}尚未验证，请尽快登录邮箱进行验证。</em></span> <span ng-if="userinfo.email && userinfo.checkEmail == 1"><span class="action">您的邮箱：{{ userinfo.email}}已验证，请放心使用</span></span> <span ng-if="userinfo.email==null">未绑定</span></div><div class="item-three"><a ng-if="userinfo.email &&( userinfo.checkEmail == 0 || userinfo.checkEmail==null)" ng-click="verifyEmail()" class="text-primary pr20" data-event="7212">再次验证</a> <a ng-click="relEmail(\'绑定邮箱\')" ng-if="userinfo.email==null" class="text-primary" data-event="7212">绑定邮箱</a> <a ng-click="relEmail(\'修改邮箱\')" ng-if="userinfo.email" class="action text-primary">修改邮箱</a></div></div><div class="account-items clearfix"><div class="item-one"><em class="eqf-yes green-color"></em><span>账号类型</span></div><div class="item-two"><span ng-show="userinfo.type ==1">普通用户</span> <span ng-show="userinfo.type ==2 || userinfo.type ==5">企业用户</span> <span ng-show="userinfo.type ==21 || userinfo.type ==51">企业子用户</span> <span ng-show="userinfo.type ==3">高级用户</span> <span ng-show="userinfo.type ==4">服务用户</span> <span ng-show="userinfo.type ==99">运营用户</span> <span class="account-action">，升级账号可以尊享更多特权</span></div><div class="item-three"><span ng-show="userinfo.type ==1 && !emailAccount"><a ng-click="upgradeCompany()" class="text-primary" data-event="7214">升级为企业账号</a></span> <a href="/privilege" class="action text-primary" target="_blank">我的特权</a></div></div><div class="account-items clearfix"><div class="item-one"><em class="eqf-yes green-color"></em><span>登录密码</span></div><div class="item-two"><span class="account-action">建议使用6-16个字符，可包括大小写字母和数字</span></div><div class="item-three"><a class="text-primary" ng-click="goReset()">修改密码</a></div></div><div class="account-items clearfix tab-box-shadow" ng-if="userinfo.type ==2 || userinfo.type ==1 || userinfo.type ==5 || userinfo.type == 4"><div class="item-one"><em ng-class="{\'eqf-yes green-color\':userinfo.phone && userinfo.checkPhone == 1,\'eqf-exclamation-sign red-color\': userinfo.checkPhone != 1}"></em><span>手机验证</span></div><div class="item-two"><span class="red-color" ng-if="!userinfo.phone">未绑定</span> <span ng-if="userinfo.phone && userinfo.checkPhone == 0" class="red-color">未验证</span> <span ng-if="userinfo.phone && userinfo.checkPhone == 1"><em class="green-color">已验证</em> <span class="account-action action">您验证的手机：{{userinfo.phone}}，若已丢失或停用，请立即更换，避免账户被盗</span></span></div><div class="item-three"><a ng-if="!userinfo.phone" ng-click="checkMobile(\'绑定手机\')" class="text-primary">绑定手机</a> <a class="text-primary" ng-if="userinfo.phone && userinfo.checkPhone == 0" ng-click="checkMobile(\'手机验证\')">手机验证</a> <a ng-if="userinfo.phone" class="action text-primary" ng-click="checkMobile(\'修改手机号\')">修改手机号</a></div></div><div class="account-items clearfix" ng-if="weixinShow"><div class="item-one"><em ng-class="{\'eqf-exclamation-sign red-color\': !wxRel,\'eqf-yes green-color\':wxRel}"></em><span>微信账号</span></div><div class="item-two"><span ng-if="!wxRel" class="red-color">未绑定<em class="pl20" style="color:#76838f">绑定后，可使用微信账号进行快速登录</em></span> <span ng-if="wxRel" class="green-color">已绑定</span></div><div class="item-three"><a class="no-relate text-primary" ng-if="!wxRel && (user.type == 21 && userPermit.indexOf(\',1404,\') >=0 || user.type !=21)" ng-click="bindThirdAccount(\'weixin\');" data-event="7217">绑定微信</a> <a class="related text-primary" ng-if="wxRel && (user.type == 21 && userPermit.indexOf(\',1404,\') >=0 || user.type !=21)" ng-click="unbindRelation(\'weixin\')">解除绑定</a></div></div><div class="account-items clearfix" ng-if="qqShow"><div class="item-one"><em ng-class="{\'eqf-exclamation-sign red-color\':!qqRel,\'eqf-yes green-color\': qqRel}"></em><span>QQ账号</span></div><div class="item-two"><span ng-if="!qqRel" class="red-color">未绑定<em class="pl20" style="color:#76838f">绑定后，可使用QQ账号进行快速登录</em></span> <span ng-if="qqRel" class="green-color">已绑定</span></div><div class="item-three"><a class="no-relate text-primary" ng-if="!qqRel && (user.type == 21 && userPermit.indexOf(\',1404,\') >=0 || user.type !=21)" ng-click="bindThirdAccount(\'qq\');" data-event="7218">绑定QQ</a><a class="related text-primary" ng-if="qqRel && (user.type == 21 && userPermit.indexOf(\',1404,\') >=0 || user.type !=21)" ng-click="unbindRelation(\'qq\')">解除绑定</a></div></div><div class="account-items clearfix" ng-if="bbsShow"><div class="item-one"><em class="eqf-yes green-color"></em><span>论坛账号</span></div><div class="item-two"><span class="green-color">已绑定</span> <span ng-if="userinfo.bbsName" style="font-weight:lighter;">当前账号为：{{userinfo.bbsName}}。</span></div><div class="item-three"><a class="related text-primary" ng-if="bbsShow && (user.type == 21 && userPermit.indexOf(\',1404,\') >=0 || user.type !=21)" ng-click="relForum()">修改论坛</a></div></div></div></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/children.tpl.html",'<div class="children branches" ng-show="userinfo.type==2 || userinfo.type==5 || userinfo.type == 21"><h2 class="subhead mb20" style="margin-top:0"><em>子账号管理</em><div class="fr"><span ng-if="branchName.name" class="mr20">当前子账号：{{branchName.name}}<em class="eqf-wrong2 pl20" title="返回主账号" ng-click="changeCurrent()"></em></span> <a class="text-center" ng-if="user.type != 21" ng-click="manageBranch();"><em class="eqf-plus2"></em><i>新建子账号</i></a> <a class="text-center" ng-if="user.type != 21" ng-click="addBranch();"><em class="eqf-plus2"></em><i>添加子账号</i></a> <a class="text-center" ng-if="user.type != 21" ng-click="buyBranch();"><em class="eqf-buy"></em><i>购买子帐号</i></a></div></h2><div class="branch-list tab-box-shadow"><table class="table table-hover mb20"><tr><th class="col-sm-3">子账号</th><th class="col-sm-2">用户名</th><th class="col-sm-2">部门</th><th class="col-sm-2">创建时间</th><th class="col-sm-2">账号状态</th><th class="col-sm-2">管理</th></tr><tr ng-repeat="branch in branches track by $index"><td>{{branch.loginName}}</td><td>{{branch.name}}</td><td>{{branch.deptName}}</td><td>{{branch.regTime | date:\'yyyy-MM-dd\'}}</td><td><div class="status" ng-show="branch.status == 1"><div ng-show="user.type != 21" class="switch switch-open hint--bottom hint--rounded" data-hint="点击关闭子账号" ng-click="openBranch(branch, false);"><div class="circle-con"><i class="circle"></i></div></div><span>开放</span></div><div class="status" ng-show="branch.status == 2"><div ng-show="user.type != 21" class="switch switch-close hint--bottom hint--rounded" data-hint="点击开放子账号" ng-click="openBranch(branch, true);"><div class="circle-con"><i class="circle"></i></div></div><span>关闭</span></div><div class="status" ng-show="branch.status == 4"><div ng-show="user.type != 21" class="switch switch-close hint--bottom hint--rounded" data-hint="点击开放子账号" ng-click="openBranch(branch, true);"><div class="circle-con"><i class="circle"></i></div></div><span>冻结</span></div></td><td style="position:relative;"><a class="eqf-scene-settingII" ng-click="showEdit(branch,$index)"></a><div class="branch-edit zoomIn-change" style="transform-origin:0 0;" ng-show="branch.edit"><a class="branch-close" ng-click="manageBranch(branch,true)" ng-show="user.type !=21">修改</a> <a ng-click="selectBranch(branch)" ng-model="branch">查看</a> <a ng-click="removeBranch(branch)">移除</a></div></td></tr></table></div><div class="clearfix page-turn" ng-show="branchesCount > 10"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="5" items-per-page="XdpageSize" total-items="branchesCount" ng-model="page.currentPage" ng-change="pageChanged(page.currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/domain.tpl.html",'<div class="dialog-contain domain-xiudian"><div class="dialog-head"><h1>绑定域名</h1><p ng-show="!actionerror">请您输入正确的域名地址</p><p ng-show="actionerror">{{actionerror}}</p></div><div class="dialog-content"><form class="form-contain" role="form"><div class="form-list clearfix"><label class="form-label">绑定域名</label><div class="form-input"><input type="text" class="dns" ng-model="domainMess.url" placeholder="请输入要绑定的域名"></div></div></form><div class="clearfix xiudian-time" ng-init="someVariable = null"><span class="form-label" style="font-size:16px">选择有效期</span> <span ng-repeat="type in domainMess.typeList" style="padding-left:10px;"><input type="radio" ng-model="$parent.someVariable" id="\'{{type.value}}\'" ng-value="domainMess.type"> <label for="\'{{type.value}}\'">{{type.label}}<span>秀点</span>{{type.value}}<span>天</span></label></span></div><div class="btn-contain btn-big"><a class="btn-main login" ng-click="submit(domainMess.url,someVariable.value,someVariable.label)">确认</a> <a class="btn-grey0 cancel" ng-click="quXiao()">取消</a></div></div><div class="xiudian clearfix" ng-show="xiudian"><div class="chongzhi"><h1>秀点不足</h1><p>我的秀点：{{xdCounts}}，需消耗{{count}}秀点</p><div class="erweima"><span>微信扫描二维码，</span><br><span>关注易企秀微信账号，马上充值</span></div></div><img ng-src="{{CLIENT_CDN}}assets/images/111.jpg"><div class="know"><a class="btn-main" ng-click="know()">知道了</a></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/member.tpl.html",'<div class="m-title"><div class="m-icon fl" ng-switch="currentUser.type" ng-class="{normal: currentUser.type==1, vip: currentUser.type==3, server: currentUser.type==4, \'com-free\': (currentUser.type==2 || currentUser.type==5) && !currentUser.memberType, \'com-base\': (currentUser.type==2) && (currentUser.memberType == 1 || currentUser.memberType == 6), \'com-pri\': (currentUser.type==2) && (currentUser.memberType == 2 || currentUser.memberType == 7), \'com-tour\': (currentUser.type==2) && (currentUser.memberType == 3 || currentUser.memberType == 8), \'com-pro\': (currentUser.type==2) && (currentUser.memberType == 4 || currentUser.memberType == 9), \'com-base-child\': (currentUser.type==21 || currentUser.type==51)}"><span class="eqf-nomarluser" ng-switch-when="1"></span> <span class="eqf-vipuser" ng-switch-when="3"></span> <span class="eqf-companyuser" ng-switch-when="5"></span> <span class="eqf-companyuser free-companyuser" ng-show="!currentUser.memberType" ng-switch-when="2"></span> <span class="eqf-companyuser base-companyuser" ng-show="currentUser.memberType==\'1\' || currentUser.memberType==\'6\'" ng-switch-when="2"></span> <span class="eqf-companyuser pri-companyuser" ng-show="currentUser.memberType==\'2\' || currentUser.memberType==\'7\'" ng-switch-when="2"></span> <span class="eqf-companyuser pro-companyuser" ng-show="currentUser.memberType==\'3\' || currentUser.memberType==\'8\'" ng-switch-when="2"></span> <span class="eqf-companyuser pro-companyuser" ng-show="currentUser.memberType==\'4\' || currentUser.memberType==\'9\'" ng-switch-when="2"></span> <span class="eqf-companyuser free-companyuser" ng-switch-when="21"></span> <span class="eqf-companyuser free-companyuser" ng-switch-when="51"></span> <span class="eqf-serviceuser" ng-switch-when="4"></span></div><div class="m-detail"><div class="m-type"><a class="btn btn-primary btn-upgrade fr" ng-show="currentUser.type ==1 || (currentUser.type ==2 && !oldVersionUser)" ng-href="/privilege" target="_blank" data-event="7207">立即升级</a>{{userType}}&nbsp;&nbsp;{{userPay}} <span ng-show="currentUser.type == 1" style="float:none;font-size:12px;">可免费升级至企业账号，获得更多功能，自由设置场景上的易企秀品牌标记</span></div><div class="pt20"><span class="mr20">开通时间：{{currentUser.joinTime || currentUser.regTime | date:\'yyyy年MM月dd日 HH:mm\'}}</span> <span ng-show="currentUser.expiryTime && currentUser.memberType">到期时间：{{ currentUser.expiryTime | date:\'yyyy年MM月dd日 HH:mm\'}}</span></div></div></div><div class="m-cont"><div class="m-title xd-cont"><div class="xd-panel"><div class="xd-tab p20"><div class="btn-group"><a class="btn btn-default button-sm background-color-width-change" ng-class="{active: !xdType }" ng-click="getXdLog(null, 1)">秀点明细</a> <a class="btn btn-default button-sm background-color-width-change" ng-class="{active: xdType==2 }" ng-click="getXdLog(2, 1)">支出秀点</a> <a class="btn btn-default button-sm background-color-width-change" ng-class="{active: xdType==1 }" ng-click="getXdLog(1, 1)">收入秀点</a></div></div><table class="table table-hover"><thead><tr><th class="col-sm-4 text-left">时间</th><th class="col-sm-4 text-left" ng-show="!xdType">支出/收入</th><th class="col-sm-4 text-left" ng-show="xdType==2">支出</th><th class="col-sm-4 text-left" ng-show="xdType==1">收入</th><th class="col-sm-4 text-left">使用详情</th></tr></thead><tbody><tr ng-repeat="xd in xdLogs"><td class="text-left">{{xd.optTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</td><td class="text-left">{{xd.xd}}</td><td class="text-left">{{xd.remark}}</td></tr></tbody></table></div><div ng-show="totalItems>10" class="page-turn clearfix"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="10" total-items="totalItems" ng-model="$parent.currentPage" ng-change="pageChanged(xdType, currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(xdType, toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(xdType, toPage)" class="go">确定</a></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/message.tpl.html",'<div class="message-contain"><div class="mes-header text-right pb20"><a class="reject-issue" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=890" target="_blank">审核问题</a> <a ng-show="newMsgs.length > 0" ng-click="setRead(newMsgs)">全部设为已读</a></div><div class="message-panel clearfix" ng-repeat="newMsg in newMsgs"><div class="mes-content mes-type col-sm-2" ng-class="{new_msg: newMsg.status == 1,yidu_msg: newMsg.status == 2}"><span ng-class="{\'eqf-voice\': newMsg.bizType==1,\'eqf-fobden2\': newMsg.bizType==2, \'eqf-star\': newMsg.bizType == 3}"></span> {{newMsg.type}}</div><div class="mes-content col-sm-7" ng-bind-html="newMsg.content"></div><div class="mes-content col-sm-3 text-right">{{newMsg.sendTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</div></div><div class="mt20" ng-show="newMsgs.length == 0">您暂时还没有消息！</div><div class="clearfix mt20" ng-show="msgCount > 5"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="5" items-per-page="pageSize" total-items="msgCount" ng-model="currentPage.msgCurrentPage" boundary-links="true" rotate="true" num-pages="msgNumPages"></pagination><div class="current_page"><input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage, \'msgCurrentPage\') : null"> <a ng-click="pageChanged(toPage, \'msgCurrentPage\')" class="go">GO</a> <span>当前</span> : {{currentPage.msgCurrentPage}} / {{msgNumPages}} <span>页</span></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/privilege.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div class="privilege-contain"><div class="info"><ul><li class="free-version" ng-class="versionType === 2 ?\'current\':\'\'"><div class="header"><h3>企业免费版</h3><h4>免费</h4></div><p>基础的场景创建、分享推广及统计功能，仅能满足最基本的制作及传播需求。</p><div ng-show="oldVersonUser"><a class="btn btn-sm btn-primary" ng-disabled="true">暂停升级</a></div><div ng-show="!oldVersonUser"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type == 1" ng-click="upgradeCompany()">免费升级</a></div></li><li class="basis-version" ng-class="versionType === 207 ?\'current\':\'\'"><div class="header"><h3>企业基础版</h3><h4>3000 <span>元/年</span></h4></div><p>完善的场景制作、全面的推广渠道及基础的数据统计功能，初步满足企业自营销。</p><div ng-show="oldVersonUser"><a class="btn btn-sm btn-primary" ng-disabled="true">升级</a></div><div ng-show="!oldVersonUser"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a><div ng-if="[1, 2, 207].indexOf(versionType) != -1"><a class="btn btn-sm btn-primary" ng-disabled="true" ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click="upgradeCompany()">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && (!user.memberType || user.memberType==6)" ng-click="upgradeAccount(7)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && (user.memberType==8 || user.memberType==9)" ng-disabled="true">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==7" ng-click="upgradeAccount(7)">续费</a></div></div></li><li class="standard-version" ng-class="versionType === 208 ?\'current\':\'\'"><div class="header"><h3>企业标准版</h3><h4>6800 <span>元/年</span></h4></div><p>完善的场景创建、推广及数据统计功能，专属的企业服务，助力企业自营销。</p><div ng-show="oldVersonUser"><a class="btn btn-sm btn-primary" ng-disabled="true">升级</a></div><div ng-show="!oldVersonUser"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a><div ng-if="[1, 2, 207, 208].indexOf(versionType) != -1"><a class="btn btn-sm btn-primary" ng-disabled="true" ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click="upgradeCompany()">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType != 8 && user.memberType != 9" ng-click="upgradeAccount(8)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==9" ng-disabled="true">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==8" ng-click="upgradeAccount(8)">续费</a></div></div></li><li class="advanced-version" ng-class="versionType === 209 ?\'current\':\'\'"><div class="header"><h3>企业高级版</h3><h4>15600 <span>元/年</span></h4></div><p>高级的场景创建、推广及数据统计分析功能，至尊级专人服务，实现企业自营销闭环。</p><div ng-show="oldVersonUser"><a class="btn btn-sm btn-primary" ng-disabled="true">升级</a></div><div ng-show="!oldVersonUser"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a><div ng-if="[1, 2, 207, 208, 209].indexOf(versionType) != -1"><a class="btn btn-sm btn-primary" ng-disabled="true" ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click="upgradeCompany()">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType!=9" ng-click="upgradeAccount(9)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==9" ng-click="upgradeAccount(9)">续费</a></div></div></li><li class="group-version"><div class="header"><h3>集团定制版</h3><h4>联系销售</h4></div><p>专属定制功能及服务，满足可配化服务需求。</p><div class="bottom"><div class="eqf-glyphicon-earphone"></div><span>定制电话</span> <span>010-56187702</span></div></li></ul></div><div class="detail-con" id="OrderPackages"><table class="table table-bordered detail tab-box-shadow" table-collapse="" table-header-fix=".detail"><col style="width: 50px;"><col style="width: 120px;"><col style="width: 310px;"><thead><tr class="thead"><th colspan="3"><div class="version-info">版本信息</div><div class="service-type clearfix"><span>服务类型</span><span>服务内容</span></div></th><th><div class="version-name">个人会员</div><div class="version-detail-info">免费注册使用</div></th><th><div class="version-name">企业免费版</div><div class="version-detail-info">免费注册升级</div></th><th><div class="version-name">企业基础版</div><div class="version-detail-info"><i class="basis">3000</i><span>元/年</span></div></th><th><div class="version-name">企业标准版</div><div class="version-detail-info"><i class="standard">6800</i><span>元/年</span></div></th><th><div class="version-name">企业高级版</div><div class="version-detail-info"><i class="advanced">15600</i><span>元/年</span></div></th></tr></thead><tbody><tr><td class="col1 recent-action" rowspan="4">近期活动</td><td class="col2" rowspan="4">限时赠送</td><td class="action">免费使用付费样例<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">免费使用易企秀提供的付费样例。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22514&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td>不赠送</td><td>不赠送</td><td>赠送<span class="num">15</span>次</td><td>赠送<span class="num">25</span>次</td><td>赠送<span class="num">60</span>次</td></tr><tr class="transparent"><td class="action">去尾页和底标<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">去除场景尾页和宣传底标。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22383&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td>不赠送</td><td>不赠送</td><td>赠送<span class="num">10</span>个</td><td>赠送<span class="num">50</span>个</td><td>赠送<span class="num">200</span>个</td></tr><tr><td class="action">自定义加载logo<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">将场景载入时的易企秀logo替换为自定义图片。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22250&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>不赠送</td><td>赠送<span class="num">10</span>个</td><td>赠送<span class="num">50</span>个</td><td>赠送<span class="num">200</span>个</td></tr><tr class="transparent"><td class="action">场景保障服务<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">独立场景服务器，独立CND加速，保障场景更稳定、更快捷。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22529&page=1&extra=#pid164665" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>不赠送</td><td>赠送<span class="num">100</span>次</td><td>赠送<span class="num">200</span>次</td><td>赠送<span class="num">300</span>次</td></tr><tr><td id="subAccountCol1" class="col1" rowspan="12">基础服务</td><td id="subAccountCol2" class="col2" rowspan="2">企业专属</td><td id="subAccountTd" class="accordion-toggle eqf-more2" data-toggle="collapse" data-parent="#OrderPackages" data-target=".subAccountDetails"><div class="icon-sub">子账号（500秀点/10个/年）</div><div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">企业旗下子账号，可进行权限分配及分级管理。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22393&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>3个</td><td>10个</td><td>50个</td><td>100个</td></tr><tr class="collapse subAccountDetails"><td colspan="6" class="hiddenRow"><div class="accordion-body collapse subAccountDetails" id="subAccount"><table><col style="width: 310px;"><tr><td class="collapse-col1 service-content action">分级管理<div class="tip tip2"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">授予不同子账号相应权限，实现子账号的部门划分及级别管理。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22682&page=1&extra=#pid165314" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="collapse-col1 service-content action">授权管理<div class="tip tip2"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">企业主账号可对不同子账号分别授予不同权限。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22682&page=1&extra=#pid165314" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr></table></div></td></tr><tr class="transparent"><td class="action">企业专属样例<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">只有企业版才能使用的专属样例。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22524&extra=page%3D1" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>少量</td><td>不限量</td><td>不限量</td><td>不限量</td></tr><tr><td class="col2" rowspan="5">自有品牌展示</td><td class="action">去尾页和底标（100秀点/个）<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">去除场景尾页和宣传底标。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22383&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td>全价</td><td>全价</td><td>8折</td><td>7.5折</td><td>7折</td></tr><tr class="transparent"><td class="action">自定义加载logo（100秀点/个）<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">将场景载入时的易企秀logo替换为自定义图片。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22250&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>全价</td><td>8折</td><td>7.5折</td><td>7折</td></tr><tr><td class="action">域名自定义（100秀点/30天）<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">自定义场景链接中的一级域名。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22387&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>全价</td><td>免费</td><td>免费</td><td>免费</td></tr><tr class="transparent"><td class="action">使用技术支持底标（15秀点/次）<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">去除场景宣传尾页，并在原场景尾页添加“易企秀技术支持”字样。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22148&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td>全价</td><td>免费</td><td>免费</td><td>免费</td><td>免费</td></tr><tr><td class="action">使用品牌联合底标（30秀点/次）<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">去除场景宣传尾页，自定义品牌并与易企秀底标联合使用。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22149&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td>全价</td><td>免费</td><td>免费</td><td>免费</td><td>免费</td></tr><tr class="transparent"><td class="col2 eqf-more2 accordion-toggle" id="editFacilityTd" data-toggle="collapse" data-parent="#OrderPackages" data-target=".editFacilityDetails"><div class="icon-sub edit-facility">编辑功能</div></td><td>编辑功能</td><td>基础</td><td>基础</td><td>高级</td><td>高级</td><td>高级</td></tr><tr class="collapse editFacilityDetails"><td colspan="7" class="hiddenRow"><div class="accordion-body collapse editFacilityDetails" id="editFacility"><table><col style="width: 120px;"><col style="width: 310px;"><tr><td class="collapse-col1">高级功能</td><td class="action">场景加密<div class="tip tip2"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">为场景设置访问密码，正确后方可访问场景。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22521&page=1&extra=#pid164629" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="collapse-col1" rowspan="9">基础功能</td><td class="collapse-col1 action">一键导入PSD<div class="tip tip2"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">将PS中制作好的PSD文件一键导入至场景编辑器中。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=21330&highlight=PSD" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>禁止滑动翻页</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>添加长页面</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>编辑区缩放</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>填空模式创建</td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>外部链接</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>场景预览</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>添加动画</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>添加多媒体（音乐/视频）</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="collapse-col1" rowspan="6">丰富素材</td><td class="collapse-col1">图集轮播</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>一键复制页面</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>正版字体</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>正版图片</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>正版音乐</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>优秀模板</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="collapse-col1" rowspan="7">互动表单</td><td class="collapse-col1">互动组件（链接、电话、地图、音效）</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>计数器</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>阅读量统计</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>微信组件</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>表单图表</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>留言板</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>特效</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="collapse-col1">场景创建数量</td><td class="collapse-col1">场景创建数量</td><td>无限制</td><td>无限制</td><td>无限制</td><td>无限制</td><td>无限制</td></tr></table></div></td></tr><tr><td class="col2" rowspan="4">保障服务</td><td class="action">场景误删找回<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">被删除的场景将不会立即彻底删除，会在回收站中保存特定时间。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22504&extra=page%3D1" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td>7天</td><td>15天</td><td>30天</td></tr><tr class="transparent"><td class="action">素材误删找回<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">被删除的素材将不会立即彻底删除，会在回收站中保存特定时间。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22518&extra=page%3D1" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td>7天</td><td>15天</td><td>30天</td></tr><tr><td class="action">访问CDN加速<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">通过在全国部署服务器，提高场景打开速度。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22523&page=1&extra=#pid164642" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>普通加速</td><td>1.5倍加速</td><td>2倍加速</td><td>3倍加速</td></tr><tr class="transparent"><td class="action">场景保障服务（100秀点/30次）<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">独立场景服务器，独立CND加速，保障场景更稳定、更快捷。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22529&page=1&extra=#pid164665" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td>全价</td><td>全价</td><td>全价</td><td>全价</td></tr><tr><td id="shareCol1" class="col1" rowspan="7">数据统计与分析</td><td id="shareCol2" class="col2" rowspan="1">分享统计</td><td id="shareTd" class="accordion-toggle eqf-more2" data-toggle="collapse" data-parent="#OrderPackages" data-target=".shareDetails"><div class="icon-sub">分享统计</div><div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">详细展示分享次数、分享渠道及传播层级等方面数据。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23166&extra=" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td>基础</td><td>高级</td><td>高级</td></tr><tr class="collapse shareDetails"><td colspan="6" class="hiddenRow"><div class="accordion-body collapse shareDetails" id="share"><table><col style="width: 310px;"><tr><td>微信内传播层级跟踪（第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td></tr><tr><td>微信内分享去向分析 （第三方） 微信内来源 （第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>分享渠道统计跟踪</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>微信内分享走势分析（第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr></table></div></td></tr><tr class="transparent"><td id="visitorCol2" class="col2" rowspan="1">访客分析</td><td id="visitorTd" class="accordion-toggle eqf-more2" data-toggle="collapse" data-parent="#OrderPackages" data-target=".visitorDetails"><div class="icon-sub">访客分析</div><div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">详细展示实时访客、新老访客等方面数据，并提供访客画像构建。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23166&extra=" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td>基础</td><td>高级</td><td>高级</td></tr><tr class="collapse visitorDetails"><td colspan="6" class="hiddenRow"><div class="accordion-body collapse visitorDetails" id="visitor"><table><col style="width: 310px;"><tr><td>访客画像</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>新老访客对比</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>实时访客（第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr></table></div></td></tr><tr><td id="pageStatisCol2" class="col2" rowspan="1">页面统计</td><td id="pageStatisTd" class="accordion-toggle eqf-more2" data-toggle="collapse" data-parent="#OrderPackages" data-target=".pageStatisDetails"><div class="icon-sub">页面统计</div><div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">详细展示场景页面访问深度及性能监控等方面数据。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23166&extra=" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td>基础</td><td>高级</td><td>高级</td></tr><tr class="collapse pageStatisDetails"><td colspan="6" class="hiddenRow"><div class="accordion-body collapse pageStatisDetails" id="pageStatis"><table><col style="width: 310px;"><tr><td>访问深度</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>性能监控</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr></table></div></td></tr><tr class="transparent"><td id="dataProfileCol2" class="col2" rowspan="1">数据概况</td><td id="dataProfileTd" class="accordion-toggle eqf-more2" data-toggle="collapse" data-parent="#OrderPackages" data-target=".dataProfileDetails"><div class="icon-sub">数据概况</div><div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">展示场景流量、互动、渠道、地域等总数据概况。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23166&extra=" target="_blank">详情</a></div></div></div></td><td>基础</td><td>标准</td><td>高级</td><td>高级</td><td>高级</td></tr><tr class="collapse dataProfileDetails"><td colspan="6" class="hiddenRow"><div class="accordion-body collapse dataProfileDetails" id="dataProfile"><table><col style="width: 310px;"><tr><td>分享渠道（概况）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>访问设备（概述）</td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>地域访问量</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>累计互动次数</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>场景访问量(PV)</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr></table></div></td></tr><tr><td id="visitStatisCol2" class="col2" rowspan="1">访问统计</td><td id="visitStatisTd" class="accordion-toggle eqf-more2 action" data-toggle="collapse" data-parent="#OrderPackages" data-target=".visitStatisDetails"><div class="icon-sub">访问统计</div><div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">详细展示场景访问量、访问地域、访问设备、运营商、浏览器等方面数据。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23166&extra=" target="_blank">详情</a></div></div></div></td><td>基础</td><td>标准</td><td>高级</td><td>高级</td><td>高级</td></tr><tr class="collapse visitStatisDetails"><td colspan="6" class="hiddenRow"><div class="accordion-body collapse visitStatisDetails" id="visitStatis"><table><col style="width: 310px;"><tr><td>访问时间分布（第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td></tr><tr><td>访问设备（第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>运营商（第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>浏览器类型（第三方）</td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>访问设备（详细）</td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>场景访问量（UV）</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>访问地域</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td>场景访问量（PV）</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr></table></div></td></tr><tr class="transparent"><td class="col2">扩展网址统计</td><td>访问量</td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="col2">互动统计</td><td>点击量</td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr class="transparent"><td class="col1" rowspan="5">场景推广</td><td class="col2">扩展网址推广</td><td class="action">扩展网址推广<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">将场景分渠道推广，便于各渠道数据跟踪。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=21847&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="col2">短信推广</td><td class="action">短信推广<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">利用短信，将包含推广语及场景链接的内容发送给指定手机用户。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=21806&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr class="transparent"><td class="col2">社交分享</td><td class="action">社交分享<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">可将场景分享至微信、微博、QQ空间等各大社交媒体。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22516&page=1&extra=#pid164603" target="_blank">详情</a></div></div></div></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="col2" rowspan="2">广告推广</td><td class="action">人海战术<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">按人数计费的方式推广场景。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22530&page=1&extra=#pid164669" target="_blank">详情</a></div></div></div></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr class="transparent"><td class="action">红人直推<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">通过社交新媒体红人的方式进行场景推广。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22531&page=1&extra=#pid164670" target="_blank">详情</a></div></div></div></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="col1" rowspan="6">人工服务</td><td class="col2" rowspan="2">专属客服</td><td class="action">VIP专属客服电话<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">VIP专线，专人客服服务。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22493&extra=" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr class="transparent"><td class="action">VIP专属客服顾问<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">VIP专属客服，定期回访并提供专业指导。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22493&extra=" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="col2">培训</td><td class="action">培训<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">线上线下从场景制作、推广到数据分析全方位培训。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22499&extra=" target="_blank">详情</a></div></div></div></td><td class="action">基础培训<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">基础视频课程。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22499&extra=" target="_blank">详情</a></div></div></div></td><td class="action">基础培训<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">基础视频课程。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22499&extra=" target="_blank">详情</a></div></div></div></td><td class="action">标准培训<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">基础视频课程+定期社群直播培训/定期线下公开课。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22499&extra=" target="_blank">详情</a></div></div></div></td><td class="action">标准培训<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">基础视频课程+定期社群直播培训/定期线下公开课。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22499&extra=" target="_blank">详情</a></div></div></div></td><td class="action">定制培训<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">基础视频课程+定期社群直播培训/定期线下公开课+专属定制培训。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=22499&extra=" target="_blank">详情</a></div></div></div></td></tr><tr class="transparent"><td class="col2" rowspan="3">场景保障</td><td class="action">场景前置审核<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">场景发布后，将会被优先审核。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23136&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr><td class="action">驳回加急审核<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">申请驳回加急审核后，系统会优先处理因违规被关闭的场景。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23136&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td class="eqf-wrong"></td><td class="eqf-wrong"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td><td class="eqf-yes2"></td></tr><tr class="transparent"><td class="action">审核关闭短信提醒（100秀点/30天）<div class="tip"><i class="eqf-exclaquestion-sign"></i><div class="popover top"><div class="arrow"></div><div class="popover-content" style="font-size:12px;">当场景被关闭时，会第一时间收到易企秀的短信提醒。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=23136&extra=page%3D1%26filter%3Dtypeid%26typeid%3D650" target="_blank">详情</a></div></div></div></td><td>全价</td><td>5折</td><td>免费</td><td>免费</td><td>免费</td></tr><tr ng-show="oldVersonUser" class="tfooter"><td colspan="3">选择服务</td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-disabled="true">暂停升级</a></td><td class="no-bborder"><a class="btn btn-sm btn-primary" ng-disabled="true">升级</a></td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-disabled="true">升级</a></td><td class="no-rborder no-bborder"><a class="btn btn-sm btn-primary" ng-disabled="true">升级</a></td></tr><tr ng-show="!oldVersonUser" class="tfooter"><td colspan="3">选择服务</td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'register\')">立即注册</a></td><td class="no-bborder"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type == 1" ng-click="upgradeCompany()">免费升级</a></td><td class="no-bborder"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a><div ng-if="[1, 2, 207].indexOf(versionType) != -1"><a class="btn btn-sm btn-primary" ng-disabled="true" ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click="upgradeCompany()">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && (!user.memberType || user.memberType==6)" ng-click="upgradeAccount(7)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && (user.memberType==8 || user.memberType==9)" ng-disabled="true">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==7" ng-click="upgradeAccount(7)">续费</a></div></td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a><div ng-if="[1, 2, 207, 208].indexOf(versionType) != -1"><a class="btn btn-sm btn-primary" ng-disabled="true" ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click="upgradeCompany()">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType != 8 && user.memberType != 9" ng-click="upgradeAccount(8)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==9" ng-disabled="true">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==8" ng-click="upgradeAccount(8)">续费</a></div></td><td class="no-rborder no-bborder"><a class="btn btn-sm btn-primary" ng-if="!user" ng-click="openAuth(\'registerEnterprise\')">立即注册</a><div ng-if="[1, 2, 207, 208, 209].indexOf(versionType) != -1"><a class="btn btn-sm btn-primary" ng-disabled="true" ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click="upgradeCompany()">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType!=9" ng-click="upgradeAccount(9)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==9" ng-click="upgradeAccount(9)">续费</a></div></td></tr></tbody></table></div></div><div ng-include="\'footer.tpl.html\'"></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/reset.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="quXiao()"><span aria-hidden="true">×</span></button><h4 class="modal-title">{{title || \'修改密码\'}}</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label for="inputMail" class="col-sm-3 text-right">用户名</label><div class="col-sm-7"><span>{{userinfo.loginName}}</span></div></div><div class="form-group"><label for="inputPassword3" class="col-sm-3 control-label">原始密码</label><div class="col-sm-7"><input type="password" class="form-control" ng-model="password.old" placeholder="原始密码" ng-keyup="$event.keyCode == 13 ? reset() : null" ng-class="{error: oldPassError}" ng-blur="checkOldPassword()"><p class="error" ng-show="oldPassError">{{oldPassError}}</p></div></div><div class="form-group"><label for="inputNewPass" class="col-sm-3 control-label">新密码</label><div class="col-sm-7"><input id="inputNewPass" type="password" class="form-control" ng-model="password.newPw" placeholder="密码6~16个字符(英文字母或数字 区分大小写)" ng-keyup="$event.keyCode == 13 ? reset() : null" ng-class="{error: passError}" ng-blur="checkPassword()" required=""><p class="error" ng-show="passError">{{passError}}</p></div></div><div class="form-group"><label for="inputRepeatPassword" class="control-label col-sm-3">确认密码</label><div class="col-sm-7"><input id="inputRepeatPassword" type="password" class="form-control" ng-model="password.confirm" placeholder="确认密码" ng-keyup="$event.keyCode == 13 ? reset() : null" ng-blur="checkRepeatPassword()"><p class="error" ng-show="rPassError">{{rPassError}}</p></div></div></form></div><div class="modal-footer"><a class="modal-cancle" ng-click="quXiao()">取消</a> <a class="btn btn-primary" ng-click="reset()" data-event="7215">保存</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("usercenter/tab/trash.tpl.html",'<div class="m-title"><div class="m-icon fl red-bg"><span class="eqf-recele"></span></div><div class="m-detail"><div class="m-type">{{historyTab.pages.totalItems}}</div><div class="pt20 clearfix"><span style="float:right;"><em>该功能为企业付费用户专享，若需使用，请升级账号！</em> <a href="/privilege" class="green" data-event="7221">立即升级</a></span> <span class="mr20"><em ng-if="sceneHistory == \'scene\'">已删除场景</em><em ng-if="sceneHistory == \'image\'">已删除素材</em></span></div></div></div><ul class="nav nav-tabs clearfix history-nav"><li role="presentation" ng-class="{active:sceneHistory == \'scene\'}"><a ng-click="getMyScenes(1,\'scene\')">场景回收站</a></li><li role="presentation" ng-class="{active:sceneHistory == \'image\'}"><a ng-click="getImages(1,\'image\')">素材回收站</a></li></ul><div class="history-scene" ng-show="sceneHistory == \'scene\'"><ul class="clearfix" ng-show="myScenes && myScenes.length >0"><li ng-repeat="scene in myScenes track by $index"><div class="scene-cover"><img ng-src="{{PREFIX_FILE_HOST + scene.cover}}" width="235px" height="235px"><div class="scene-operate mask"><div class="operate"><span class="hint--top hint--rounded" ng-click="deleteScene(scene.id,\'false\')" data-hint="彻底删除"><em class="eqf-scene-delete"></em></span> <span class="hint--top hint--rounded" ng-click="revoke(scene.id)" data-hint="还原"><em class="eqf-bg"></em></span></div><div class="scene-time">{{scene.history}}天</div></div></div><div class="scene-name ellipsis">{{scene.name}}</div></li></ul><div style="text-align:center;" class="mt20 mb20" ng-show="myScenes.length <= 0"><h2 class="mb20 mt20">您的回收站目前为空</h2><img ng-src="{{CLIENT_CDN}}assets/images/kong.svg"></div></div><div class="history-image" style="min-height:300px" ng-show="sceneHistory == \'image\'"><ul class="clearfix" ng-show="images && images.length > 0"><li ng-repeat="img in images track by $index"><img ng-src="{{PREFIX_FILE_HOST + img.tmbPath}}" responsive-image=""><div class="image-operate mask"><div class="operate"><span class="hint--top hint--rounded" ng-click="deleteImg(img.id,\'false\')" data-hint="彻底删除"><em class="eqf-scene-delete"></em></span> <span class="hint--top hint--rounded" ng-click="imageRevoke(img.id)" data-hint="还原"><em class="eqf-bg"></em></span></div><div class="scene-time">{{img.history}}天</div></div></li></ul><div style="text-align:center;" class="mt20 mb20" ng-show="images.length <= 0"><h2 class="mb20 mt20">您的回收站目前为空</h2><img ng-src="{{CLIENT_CDN}}assets/images/kong.svg"></div></div><div class="clearfix page-turn" ng-show="historyTab.pages.totalItems > historyTab.pages.pageSize"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="historyTab.pages.pageSize" total-items="historyTab.pages.totalItems" ng-model="historyTab.pages.currentPage" ng-change="pageChanged(historyTab.pages.currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="historyTab.pages.currentPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/dialog/affirmPrint.tpl.html",'<div class="eqc-print-image"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">请选择需要印刷的图片</h4></div><div class="modal-body" ng-show="!showTips"><div class="pic" eqd-scroll="{{scrollType}}"><ul><li ng-repeat="pic in picker.coverArr"><label for="select_item_{{$index}}"><div class="print-cover" ng-style="{backgroundImage: pic.cover ? \'url(\' + PREFIX_FILE_HOST + pic.cover + \'?imageMogr2/auto-orient/thumbnail/180x180/strip)\' : null}"><div ng-if="!pic.cover"><span class="eqf-exclamation-sign"></span><span>预览图未生成</span></div></div></label><div class="checkbox-square" ng-class="{checked: pic.checked}"><em class="eqf-yes2"></em> <input type="checkbox" id="select_item_{{$index}}" ng-model="pic.checked" name="iCheck"></div></li></ul></div></div><div class="modal-footer" ng-show="!showTips"><p class="tips">提示：打印文件两页默认双面打印！</p><a class="modal-cancle" ng-click="cancel()">取消</a> <button data-event="3202" type="button" class="btn btn-primary" ng-click="confirm()">印刷</button></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/dialog/applyTpl.tpl.html",'<div class="modal-header" ng-show="!showTips"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">申请模板</h4></div><div class="modal-body eqc-apply-tpl" ng-show="!showTips"><p class="affirm">您确定申请提交该作品为模板吗？</p><p class="apply-tips">查看更多规则及版权须知 【<a ng-href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=14142&page=1&extra" target="_blank">点击查看</a>】</p></div><div class="modal-footer" ng-show="!showTips"><a class="modal-cancle" ng-click="cancel()">取消</a> <button type="button" class="btn btn-primary" ng-click="confirm()">确认</button></div><div ng-show="showTips" class="gift-success-tips" id="transfer_mes" style="text-align:center;"><p><i>您已提交该模板，我们正在审核中，请及时查看审核消息。</i></p><a ng-click="cancel()">x</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/dialog/define.tpl.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">创建自定义</h4></div><div class="modal-body eqc-define"><div class="input"><input placeholder="宽度" ng-model="size.width" eqd-validate="number" maxlength="4"> <span>&times;</span> <input placeholder="高度" ng-model="size.height" eqd-validate="number" maxlength="4"><select ng-model="size.unit"><option ng-selected="size.unit == mm" value="mm">mm（毫米）</option><option ng-selected="size.unit == px" value="px">px（像素）</option></select></div><div class="size-intro"><div>常见尺寸说明</div><span>A3: 3508 * 4961px (297 * 420mm)</span> <span>A4: 2480 * 3508px (210 * 297mm)</span> <span>A5: 1748 * 2480px (148 * 210mm)</span> <span>以上换算，皆基于300dpi</span></div></div><div class="modal-footer"><a class="modal-cancle" ng-click="cancel()">取消</a> <button type="button" class="btn btn-primary" ng-click="confirm()">创建</button></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/dialog/saveToH5.tpl.html",'<div class="eqc-print-image"><div class="modal-header" ng-show="!showTips"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">请选择需要保存的图片</h4></div><div class="modal-body" ng-show="!showTips"><div class="pic" eqd-scroll="{{scrollType}}"><ul><li ng-repeat="pic in picker.coverArr"><label for="select_item_{{$index}}"><div class="print-cover" ng-style="{backgroundImage: pic.cover ? \'url(\' + PREFIX_FILE_HOST + pic.cover + \'?imageMogr2/auto-orient/thumbnail/180x180/strip)\' : null}"><div ng-if="!pic.cover"><span class="eqf-exclamation-sign"></span><span>预览图未生成</span></div></div></label><div class="checkbox-square" ng-class="{checked: pic.checked}"><em class="eqf-yes2"></em> <input type="checkbox" id="select_item_{{$index}}" ng-change="changeItem()" ng-model="pic.checked" name="iCheck"></div></li></ul></div><div class="save-location"><span>保存位置</span><div class="scene-pic-group"><eqx-select class="select-great select-contain" change="saveLocation(scenePicGroup)" model="scenePicGroup"><eqx-select-option value="-1">我的图片</eqx-select-option><eqx-select-option value="picGroup.id" ng-repeat="picGroup in picGroupList">{{picGroup.name}}</eqx-select-option></eqx-select></div></div></div><div class="modal-footer" ng-show="!showTips"><div class="select-all" ng-click="selectAll()"><div class="checkbox-square" ng-class="{checked: picker.isAllCheck}"><em class="eqf-yes2"></em> <input type="checkbox" id="select_all" ng-change="changeLoop()" ng-model="picker.isAllCheck" name="iCheck"></div><label for="select_all" onselectstart="return false;">全部</label></div><a class="modal-cancle" ng-click="cancel()">取消</a> <button type="button" class="btn btn-primary" ng-click="confirm()" ng-disabled="isSave" data-event="3204">确认</button></div><div ng-show="showTips" class="gift-success-tips" id="transfer_mes" style="text-align:center;"><p><i>已成功保存的H5场景素材库</i></p><a ng-click="cancel()">x</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/dialog/transferPrint.tpl.html",'<div class="modal-header" ng-show="!showTips"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">×</span></button><h4 class="modal-title">转送作品</h4></div><div class="modal-body" ng-show="!showTips"><form class="form-horizontal"><div class="form-group"><label for="inputPassword3" class="col-sm-3 control-label">账号:</label><div class="col-sm-7"><input type="text" class="form-control" id="inputPassword3" ng-model="model.toUser" placeholder="请输入要转送的账号"><p class="scene-gift-tips pt20"><span>*</span><em>转出后将不再拥有此作品</em></p><p class="error" ng-show="activeError">{{activeError}}</p></div></div></form></div><div class="modal-footer" ng-show="!showTips"><a class="modal-cancle" ng-click="cancel()">取消</a> <button type="button" class="btn btn-primary" ng-click="confirm()">确认</button></div><div ng-show="showTips" class="gift-success-tips" id="transfer_mes" style="text-align:center;"><p><i>您已将此作品成功转送给</i><span style="padding:0 15px">{{model.toUser}}</span></p><a ng-click="cancel()">x</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/tab/create.tpl.html",'<div class="eqc-create"><div class="content"><div class="works ad-print"><div class="title">广告印刷</div><div class="category"><div class="h-225 animation-zoom" ng-style="{animationDelay: 4 * 50 + \'ms\'}"><p class="fs14">宣传单</p><p class="mm">210 * 285mm</p><p class="px">(2480 * 3366px)</p><div class="selected"><div class="item" ng-click="add(\'5\', 210, 285, \'mm\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div><div class="tag"><span>可下单印刷</span></div></div><div class="h-169 h-2 ml animation-zoom" ng-style="{animationDelay: 5 * 50 + \'ms\'}"><p class="fs14">邀请函</p><p class="mm">140 * 210mm</p><p class="px">(1654 * 2480px)</p><div class="selected"><div class="item" ng-click="add(\'2\', 140, 210, \'mm\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div></div><div class="h-255 ml animation-zoom" ng-style="{animationDelay: 6 * 50 + \'ms\'}"><p class="fs14">海报</p><p class="mm">420 * 570mm</p><p class="px">(4691 * 6732px)</p><div class="selected"><div class="item" ng-click="add(\'4\', 420, 570, \'mm\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div><div class="tag"><span>可下单印刷</span></div></div><div class="h-169 ml animation-zoom" ng-style="{animationDelay: 7* 50 + \'ms\'}"><p class="fs14">贺卡</p><p class="mm">140 * 210mm</p><p class="px">(1654 * 2480px)</p><div class="selected"><div class="item" ng-click="add(\'3\', 140, 210, \'mm\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div></div><div class="h-120 ml animation-zoom" ng-style="{animationDelay: 8 * 50 + \'ms\'}"><p class="fs14">名片</p><p class="mm">90 * 54mm</p><p class="px">(1063 * 638px)</p><div class="selected"><div class="item" ng-click="add(\'1\', 90, 54, \'mm\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div><div class="tag"><span>可下单印刷</span></div></div></div></div><div class="works online-marketing"><div class="title">线上营销</div><div class="category"><div class="w-98 animation-zoom" ng-style="{animationDelay: 0 * 50 + \'ms\'}"><p class="fs14">长图</p><p class="mm">800 * 2400px</p><div class="selected"><div class="item" ng-click="add(\'8\', 800, 2400, \'px\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div></div><div class="w-160 ml animation-zoom" ng-style="{animationDelay: 1 * 50 + \'ms\'}"><p class="fs14">淘宝商品主图</p><p class="mm">800 * 800px</p><div class="selected"><div class="item" ng-click="add(\'6\', 800, 800, \'px\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div></div><div class="w-270 ml animation-zoom" ng-style="{animationDelay: 2 * 50 + \'ms\'}"><p class="fs14">微信公众号首图</p><p class="mm">900 * 500px</p><div class="selected"><div class="item" ng-click="add(\'7\', 900, 500, \'px\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div></div><div class="w-120 ml animation-zoom" ng-style="{animationDelay: 3 * 50 + \'ms\'}"><p class="fs14">GIF动图</p><p class="mm">600 * 800px</p><div class="selected"><div class="item" ng-click="add(\'9\', 600, 800, \'px\')"><span class="eqf-xiuziti"></span> <a href="">创建</a></div></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/tab/hotZone.tpl.html",'<div id="hot_zone" class="eqc-hot-zone"><ul class="sort"><li>每日必做</li><li>翻牌子</li><li>大长图</li></ul><div class="content"><div class="every-day"><ul class="square-scene clearfix"><li class="tab-box-shadow animation-zoom" ng-repeat="list0 in hotList0"><div class="image"><div class="front face" ng-style="getStyle(list0.cover, 370)"></div><div class="overlay"><div class="edit"><a class="edit-same" eqd-preview="" view-id="{{list0.id}}" view-code="{{list0.code}}"><em class="eqf-eye background-color-width-change" style="font-size:18px;"></em> <span>预览</span></a> <a class="edit-same" ng-click="copyHotItem(list0.id)" target="_blank"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>我也做</span></a></div></div></div><div class="project-info"><p class="ellipsis">{{list0.title || \'无标题\'}}</p><span class="print-type">{{list0.type | printType}}</span> | {{list0.unit == \'px\' ? list0.width : ((list0.width / 300) * 25.4).toFixed()}}*{{list0.unit == \'px\' ? list0.height : ((list0.height / 300) * 25.4).toFixed()}}{{list0.unit}}</div></li></ul></div><div class="effects turn-brand"><ul class="square-scene clearfix"><li class="tab-box-shadow animation-zoom" ng-repeat="list1 in hotList1" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="image"><div class="front face" ng-style="getStyle(list1.cover, 170)"></div><div class="overlay"><div class="edit"><a class="edit-same" eqd-preview="" view-id="{{list1.id}}" view-code="{{list1.code}}"><em class="eqf-eye background-color-width-change" style="font-size:18px;"></em> <span>预览</span></a> <a class="edit-same" ng-click="copyHotItem(list1.id)" target="_blank"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>我也做</span></a></div></div></div><div class="project-info"><p class="ellipsis">{{list1.title || \'无标题\'}}</p><span class="print-type">{{list1.type | printType}}</span> | {{list1.unit == \'px\' ? list1.width : ((list1.width / 300) * 25.4).toFixed()}}*{{list1.unit == \'px\' ? list1.height : ((list1.height / 300) * 25.4).toFixed()}}{{list1.unit}}</div></li></ul></div><div class="effects long-image"><ul class="square-scene clearfix"><li class="tab-box-shadow animation-zoom" ng-repeat="list2 in hotList2" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="image"><div class="front face" ng-style="getStyle(list2.cover, 170)"></div><div class="overlay"><div class="edit"><a class="edit-same" eqd-preview="" view-id="{{list2.id}}" view-code="{{list2.code}}"><em class="eqf-eye background-color-width-change" style="font-size:18px;"></em> <span>预览</span></a> <a class="edit-same" ng-click="copyHotItem(list2.id)" target="_blank"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>我也做</span></a></div></div></div><div class="project-info"><p class="ellipsis">{{list2.title || \'无标题\'}}</p><span class="print-type">{{list2.type | printType}}</span> | {{list2.unit == \'px\' ? list2.width : ((list2.width / 300) * 25.4).toFixed()}}*{{list2.unit == \'px\' ? list2.height : ((list2.height / 300) * 25.4).toFixed()}}{{list2.unit}}</div></li></ul></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/tab/mine.tpl.html",'<div><div class="sub-nav"><ul class="content-list"><li><a href="" ng-class="{selected: showContent}" ng-click="getContent(\'works\')">我的设计</a></li><li><a href="" ng-class="{selected: !showContent}" ng-click="getContent(\'order\')">我的订单</a></li></ul></div><eqd-works ng-show="showContent"></eqd-works><eqd-order ng-if="!showContent"></eqd-order></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/tab/order.tpl.html",'<div class="eqf-order"><div class="status"><ul><li class="ml20"><a ng-class="{active: currentStatus == \'all\'}" ng-click="getOrderList(\'all\')">全部订单 <span>（{{count.all}}）</span></a></li><li><a ng-class="{active: currentStatus == \'0\'}" ng-click="getOrderList(0)">待付款订单 <span>（{{count.nonPayment}}）</span></a></li><li><a ng-class="{active: currentStatus == \'3\'}" ng-click="getOrderList(3)">已完成订单 <span>（{{count.completed}}）</span></a></li><li><a ng-class="{active: currentStatus == \'-1\'}" ng-click="getOrderList(-1)">无效订单 <span>（{{count.cancel}}）</span></a></li></ul></div><div class="order-info"><ul><li>订单编号</li><li>订购日期</li><li>订单金额</li><li>支付/配送方式</li><li>收货人</li><li>查看详情</li></ul><ul class="items" ng-repeat="list in orderList"><li>{{list.orderNumber}}</li><li>{{list.createTime}}</li><li>{{list.amount}}</li><li>{{list.payment}}</li><li>{{list.receiver}}</li><li><a class="order-detail" ng-click="getDetails(list.orderNumber, list.shopId)">查看订单详情</a></li></ul></div><div class="clearfix page-turn" style="margin-top:10px;" ng-show="totalItems > 8"><div class="fl"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="8" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/tab/template.tpl.html",'<div><div class="sub-nav"><ul class="content-list"><li><a href="" ng-class="{selected: selected == \'hot\'}" ng-click="getList(\'hot\')">热点专区</a></li><li><a href="" ng-class="{selected: selected == \'tpl\'}" ng-click="getList(\'tpl\')">模板分类</a></li></ul></div><div id="print_tpl" class="print-list"><eqd-tpl-sort ng-show="showList"></eqd-tpl-sort><div class="clearfix page-turn" style="margin-top:10px;" ng-show="tplTotalItems > 12 && showList"><div class="fl"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="12" total-items="tplTotalItems" ng-model="currentTplPage" ng-change="pageTplChanged(currentTplPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageTplChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageTplChanged(toPage)" class="go">确定</a></div></div></div><eqd-hot-zone ng-show="!showList"></eqd-hot-zone></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/tab/tplSort.tpl.html",'<div class="eqc-tpl-sort"><div class="tpl-sort-btn"><ul class="head-type"><li><a href="" ng-class="{active: activeTpl == 1}" ng-click="getTplList(1)">全部</a></li><li><a href="" ng-class="{active: activeTpl == 3}" ng-click="getTplList(3)">广告印刷</a></li><li><a href="" ng-class="{active: activeTpl == 2}" ng-click="getTplList(2)">线上营销</a></li></ul><ul class="type"><li>类型：</li><li ng-repeat="type in typeObj"><a href="" ng-class="{active: activeType == type.value}" ng-click="getTypeList(type.value)">{{type.name}}</a></li></ul><ul class="tag"><li>标签：</li><li ng-repeat="tag in tagCategory"><a href="" ng-class="{active: activeTag == tag.value}" ng-click="getTagList(tag.value)">{{tag.name}}</a></li></ul></div><ul class="square-scene clearfix"><li ng-repeat="template in templateList track by $index" pid="{{template.printId}}" class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="image"><div class="front face" ng-style="getStyle(template.cover, 280)"></div><div class="overlay"><div class="edit"><a class="edit-same" ng-click="intoTemplate(template.type, template.id, template.printId)" target="_blank"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>就这个</span></a></div></div></div><div class="project-info"><p class="ellipsis">{{template.printName || \'无标题\'}}</p><span class="print-type">{{template.type | printType}}</span> | {{template.unit == \'px\' ? template.width : ((template.width / 300) * 25.4).toFixed()}}*{{template.unit == \'px\' ? template.height : ((template.height / 300) * 25.4).toFixed()}}{{template.unit}}<div class="buttons sample clearfix"><div class="set sample-scene"><span class="scene-name">{{template.user}}</span></div></div></div><div class="head-img"><img ng-if="template.avatar" ng-src="{{template.avatar}}"> <span ng-if="!template.avatar" class="scene-headimg"><em class="eqf-top-contact"></em></span></div></li></ul></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/tab/works.tpl.html",'<div id="eqi_works" class="eqc-works"><div class="sort-btn"><ul class="head-type"><li><a href="" ng-class="{active: activeWorksType == 1}" ng-click="getWorksList(1)">全部</a></li><li><a href="" ng-class="{active: activeWorksType == 3}" ng-click="getWorksList(3)">广告印刷</a></li><li><a href="" ng-class="{active: activeWorksType == 2}" ng-click="getWorksList(2)">线上营销</a></li></ul><ul class="type"><li>类型：</li><li ng-repeat="type in typeOfWorks"><a href="" ng-class="{active: printType == type.value}" ng-click="getPrintList(type.value)">{{type.name}}</a></li></ul></div><div id="print_mine" class="print-list"><ul class="square-scene clearfix"><li ng-repeat="print in printList track by $index" pid="{{print.id}}" class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="image"><div class="front face" ng-style="getStyle(print.cover, 280)"></div><div class="overlay"><div class="edit"><a class="edit-same" eqd-preview="" view-id="{{print.id}}" view-code="{{print.code}}"><em class="eqf-eye background-color-width-change" style="font-size:18px;"></em> <span>预览</span></a> <a class="edit-same" href="print/create/{{print.id}}" target="_blank"><em class="eqf-xiuziti background-color-width-change" style="font-size:18px;"></em> <span>编辑</span></a> <a class="edit-same" ng-click="setPrint(print.id)" target="_blank"><em class="eqf-scene-setting background-color-width-change" style="font-size:18px;"></em> <span>设置</span></a></div><div class="sample applyTpl"><a onselectstart="return false;" ng-show="print.type != 0" ng-click="applyTpl(print.id, print.isTpl)" ng-style="{backgroundColor: (print.isTpl | statusBgFilter), color: (print.isTpl | statusColorFilter)}">{{print.isTpl | statusFilter}}</a> <a onselectstart="return false;" ng-click="saveToH5(print.id, print.type)" data-event="3203">保存到H5场景素材库</a></div><div class="buttons clearfix"><div class="set"><a class="delete background-color-width-change button" ng-click="delete(print.id)"><em class="eqf-scene-delete"></em><span>删除</span></a> <a class="operation background-color-width-change button" ng-click="copy(print.id)"><em class="eqf-scene-copy"></em><span>复制</span></a> <a class="background-color-width-change button" ng-click="transfer(print.id)"><em class="eqf-scene-gift"></em><span>转送</span></a></div></div></div></div><div class="project-info" ng-class="{\'no-print\': (print.type | isOnline)}"><p class="ellipsis">{{print.title || \'无标题\'}}</p><span class="print-type">{{print.type | printType}}</span> | {{print.unit == \'px\' ? print.width : ((print.width / 300) * 25.4).toFixed()}}*{{print.unit == \'px\' ? print.height : ((print.height / 300) * 25.4).toFixed()}}{{print.unit}} &nbsp;&nbsp;&nbsp; <span class="eqf-eye"></span> <span>{{print.pv || 0}}</span></div><div class="print-order" ng-if="!(print.type | isOnline)"><span>低至<i>{{print.price}}</i>元</span> <button data-event="3201" ng-style="{backgroundColor: print.type == 2 || print.type == 3 ? \'#aaa\' : \'\'}" ng-click="affirmPrint(print.id, print.type)"><span class="eqf-printmachine"></span>下单印刷</button></div></li></ul><div style="text-align:center;margin:50px 0;" ng-if="printList.length < 1"><h2 style="padding-bottom: 10px;">暂无作品</h2><a href="/main/print/create" ng-if="!branchid" style="color:#08a1ef;font-size:14px;display:block;" class="pb20 pt20">创建作品</a> <img ng-src="{{CLIENT_CDN}}assets/images/notfound.svg"></div><div class="clearfix page-turn" style="margin-top:10px;" ng-show="totalItems > 12"><div class="fl"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="12" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("main/print/transition/printShop.tpl.html",'<div class="eqc-shop" eqd-print-shop=""><form id="order_form" action="" method="post"><input type="hidden" name="data" id="hidden_data" value=""></form></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/create/agreement.html",'<div class="modal-header"><span class="glyphicon glyphicon-exclamation-sign"></span> <span>任务发布规则</span></div><div class="modal-body"><div class="argument-con"><div eqd-scroll="" style="height: 100%;"><div class="p20">任务取消问题：<br>1，审核中可以取消<br>2，未有人接单时可以取消，但会扣秀点<br>3，推广中可以取消，扣除秀点的同时会给与接单着相应的补偿<br>任务取消问题：<br>1，审核中可以取消<br>2，未有人接单时可以取消，但会扣秀点<br>3，推广中可以取消，扣除秀点的同时会给与接单着相应的补偿任务取消问题：<br>1，审核中可以取消<br>2，未有人接单时可以取消，但会扣秀点<br>3，推广中可以取消，扣除秀点的同时会给与接单着相应的补偿<br>任务取消问题：<br>1，审核中可以取消<br>2，未有人接单时可以取消，但会扣秀点<br>3，推广中可以取消，扣除秀点的同时会给与接单着相应的补偿<br>任务取消问题：<br>1，审核中可以取消<br>2，未有人接单时可以取消，但会扣秀点<br>3，推广中可以取消，扣除秀点的同时会给与接单着相应的补偿任务取消问题：<br>1，审核中可以取消<br>2，未有人接单时可以取消，但会扣秀点<br>3，推广中可以取消，扣除秀点的同时会给与接单着相应的补偿<br></div></div></div></div><div class="modal-footer" style="text-align:center;"><a ng-click="close();" style="width:240px;" class="btn btn-primary">阅读并同意《任务发布规则》</a></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/create/confirmOrder.html",'<div ng-include="\'header.tpl.html\'"></div><div ng-include="\'orderTask/order/create/orderState.html\'"></div><div class="order-new clearfix"><div class="confirm-form"><div class="order-title"><span>订单编号：{{order.id}}</span> <span style="margin-left:40px;">下单时间：{{order.createTime}}</span></div><div class="order-detail clearfix"><div class="tpl-view" ng-if="pageTpl"><span class="available-count" ng-if="orderCount">{{orderCount}}人可接单</span><div class="tpl-nr nr" thumb-tpl="" hide-del-btn="true" un-transform="true" my-tpl="pageTpl"></div></div><div class="order-items ml20"><h4 class="primary-color ellipsis task-name">{{order.taskName}}</h4><div class="promotion-detail mt20"><div class="item-control promotion-title"><h4 class="fail" ng-if="order.target">{{order.budget}}<span class="ft12">秀点</span></h4><h4 class="fail" ng-if="!order.target">按推广量计算</h4><div class="primary-color">推广预算</div></div><div class="item-control promotion-value"><h5 class="fail"><span ng-if="isOfficial">≈</span>{{order.price}}<span class="ft12">PV/1秀点</span></h5><div class="primary-color">推广单价</div></div><div class="item-control pl20" style="border-left:1px solid #e6ebed;"><h5 class="fail" ng-if="order.target">{{order.target}}<span class="ft12">PV</span></h5><h5 class="fail" ng-if="!order.target">上不封顶</h5><div class="primary-color">推广目标</div></div></div><div class="order-item" style="border-bottom:1px solid #e6ebed;line-height:50px;"><span>推广周期</span><span class="primary-color ml20">{{order.startDate}}-{{order.endDate}}</span></div><div class="order-item" style="margin-top:10px;"><span>任务类型</span><span class="primary-color ml20">单页秀板嵌入推广</span></div><div class="order-item clearfix"><div class="item-control">其他需求</div><div class="item-control primary-color ml20 other-item">{{order.description}}</div></div><div class="order-item"><span>推广类别</span><span class="primary-color ml20">任务页实际有效浏览量（PV）</span></div></div></div><div class="xd-detail clearfix" ng-if="!isOfficial"><span>账户余额：{{userXd}}秀点</span><a class="text-primary ml20" ng-click="buyXd()">充值</a><span class="fail ml20" ng-if="order.budget>userXd"><em class="eqf-exclamation-sign" style="margin-right:5px;"></em>秀点余额不足，请先充值</span><div class="fr"><span>推广预算：<span class="fail pay-xd">{{order.budget}}</span>秀点</span></div></div><div class="order-handel clearfix"><a class="btn btn-40 cancel background-color-width-change" style="width:160px;" ng-href="order/new/{{order.id}}" ng-if="order.status!=3 && order.status!=5">返回修改任务</a> <a ng-if="!order.isOfficial && (order.status==1 || order.status== 4)" class="btn btn-40 w160 confirm-btn fr background-color-width-change" ng-click="confirm()">确认并托管预算</a> <a ng-if="order.isOfficial && (order.status==1 || order.status== 4)" class="btn btn-40 confirm-btn fr background-color-width-change w160" ng-click="confirm()">确认</a> <a ng-if="order.status==2" ng-href="order/createSuc/{{order.id}}" class="btn btn-40 confirm-btn fr background-color-width-change w160">确认任务</a><h3 ng-if="order.status==2 || order.status==3 || order.status==5" class="fr pay-tip mr20">已支付</h3></div></div><div ng-include="\'orderTask/order/create/customerService.html\'"></div></div><div ng-include="\'footer.tpl.html\'"></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/create/createSuc.html",'<div ng-include="\'header.tpl.html\'"></div><div ng-include="\'orderTask/order/create/orderState.html\'"></div><div class="order-new clearfix"><div class="sucess-form clearfix"><div class="suc-img"><em class="eqf-clock-o"></em></div><div class="suc-info ml20"><h4 ng-if="!isOfficial">您发布的任务已经成功提交审核！</h4><h4 ng-if="isOfficial">您的推广任务已成功发布！</h4><h5 class="promotion-goal">推广目标：<span class="fail" ng-if="order.target">{{order.target}}PV</span> <span class="fail" ng-if="!order.target">上不封顶</span></h5><p class="review-info" ng-if="!isOfficial">审核时长为<span class="fail">1个工作日</span>，审核通过后，您的任务订单将会在秀场的任务列表中显示，请留意。</p><p class="review-info" ng-if="!isOfficial">如果您提交的任务内容有违规，审核将不会通过，我们会退回您的秀点。请关注我们推送给您的信息，祝您生活愉快！</p><div class="mt20">您还可以查看<a class="text-primary ml20 mr20" ng-href="list/order">我发布的推广任务</a>|<a class="text-primary ml20" ng-href="order/detail/content/{{order.id}}">订单详情</a></div></div></div><div ng-include="\'orderTask/order/create/customerService.html\'"></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/create/customerService.html",'<div class="customer"><h4 class="cus-title">易企秀客服</h4><h6 class="customer-item mt20">客服电话</h6><h6 class="customer-item" ng-if="isPay">电话：010-56591888</h6><h6 class="customer-item" ng-if="!isPay">010-83035157</h6><h6 class="mt20">工作时间</h6><h6 class="customer-item" ng-if="isPay">9:00-20:00</h6><h6 class="customer-item" ng-if="!isPay">9:00-18:00</h6><h6 class="customer-item mt20">扫码联系在线客服</h6><img class="qrcode-img" ng-src="{{CLIENT_CDN}}assets/images/home/QRcode.svg"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/create/newOrder.html",'<div ng-include="\'header.tpl.html\'"></div><div ng-include="\'orderTask/order/create/orderState.html\'"></div><div class="order-new clearfix"><div class="content"><div class="order-form"><h4 class="color-primary process1">1.请填写您的推广任务</h4><div class="item clearfix"><div class="error fr task-name" ng-style="{false:{\'opacity\':\'1\'}}[valida]">{{errText}}</div></div><div class="item clearfix" style="margin-top:10px;"><label class="item-label"><span class="fail">*</span>任务名称</label><div class="item-control task-name"><input ng-class="{\'valida-name\': validaitem==\'name\'}" type="text" ng-change="validaForm()" ng-model="order.taskName" class="item-input ft14" placeholder="一句话描述您的推广任务，例如：易企秀科技有限公司推广宣传"></div></div><div class="item clearfix mt20"><label class="item-label">任务类型</label><eqx-select class="item-control border-width select-contain select-lg" model="order.taskType"><eqx-select-option value="1">单页模板嵌入推广</eqx-select-option></eqx-select><div class="item-control"><a class="text-primary" style="margin-left:40px;">任务类型说明</a></div></div><div class="item clearfix mt20"><label class="item-label"><span class="fail">*</span>任务内容</label><div class="item-control"><a class="btn btn-sel-tpl" ng-click="selectTpl()">选择内容</a></div><div class="item-control" style="margin-left:40px;"><a class="text-primary mr20" ng-click="createTpl()">在线制作</a>|<a class="text-primary ml20">如何制作任务模板</a></div><div class="fr" ng-if="isOfficial && totalItems" style="line-height:36px;">已选择{{totalItems}}个模板</div></div><div class="item tpl-view clearfix"><ul class="page-tpl-container clearfix" style="position:relative;top:0;"><li class="page-tpl-item" ng-repeat="pageTpl in myPageTpls"><div thumb-tpl="" my-tpl="pageTpl" class="nr page-tpl-nr" hide-del-btn="true"></div><div class="overlay"><div class="tpl-preview" order-task-preview="" page-tpl="pageTpl">预览</div><div class="tpl-del" ng-click="deltpl(pageTpl.id)">删除</div></div></li></ul><div class="clearfix page-con" ng-show="totalItems > 4"><pagination class="fl" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="toPage" ng-change="pageChanged(toPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div></div><div class="item clearfix mt20"><label class="item-label"><span class="fail">*</span>推广周期</label><div class="item-control w160"><p class="input-group datepicker"><input type="text" class="form-control ft14" ng-disabled="formDis" datepicker-popup="yyyy.MM.dd" placeholder="{{datePlaceholder}}" min-date="minDate" ng-model="startDate" max-date="endDate" ng-click="opened = !opened;opened1=false;" is-open="opened" datepicker-options="{\'formatYear\':\'yy\',failtingDay:1,showWeeks:false}" date-disabled="disabled(date, mode)" ng-required="true" close-text="关闭" current-text="今天" clear-text="清空"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-disabled="formDis" ng-click="opened = !opened;opened1=false;$event.stopPropagation();$event.preventDefault();"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class="item-control" style="width:40px;text-align:center;">至</div><div class="item-control w160"><p class="input-group datepicker"><input type="text" class="form-control ft14" ng-disabled="formDis" datepicker-popup="yyyy.MM.dd" ng-model="endDate" min-date="startDate" is-open="opened1" datepicker-options="{\'formatYear\':\'yy\',failtingDay:1,showWeeks:false}" date-disabled="disabled(date, mode)" placeholder="{{datePlaceholder}}" ng-click="opened1 = !opened1;opened=false;" ng-required="true" close-text="关闭" current-text="今天" clear-text="清空"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-disabled="formDis" ng-click="opened1 = !opened1;opened=false;$event.stopPropagation();$event.preventDefault();"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class="item-control" style="width:20px;margin-left:10px;"><a class="hint--top hint--rounded" data-hint="按照推广周期内的有效推广量给接单者结算"><i class="eqf-exclaquestion-sign"></i></a></div><div class="item-control ml20" ng-show="isOfficial"><div class="checkbox-square" style="margin-top:10px;" ng-class="{checked: longTime}"><em class="eqf-yes2"></em> <input type="checkbox" ng-model="longTime"></div>长期有效</div></div><div class="item clearfix mt20"><label class="item-label">其他需求</label><div class="item-control task-name"><textarea ng-class="{\'valida-name\': validaitem==\'des\'}" class="item-input task-des" ng-model="order.description" ng-change="validaForm()" placeholder="请详细描述您的需求，不大于800个字符或400个汉字。"></textarea></div></div><h4 class="color-primary process2">2.您的预算是多少</h4><div class="item clearfix" style="margin-top:40px;"><label class="item-label">推广类别</label><eqx-select class="item-control border-width select-contain select-lg" model="order.promotionType"><eqx-select-option value="1">任务页实际有效浏览量（PV）</eqx-select-option></eqx-select><div class="item-control" style="margin-left:40px;"><a class="text-primary">推广目标设置指导</a></div></div><div class="item clearfix mt20"><label class="item-label"></label><div class="item-control promotion-price"><div class="clearfix"><div class="item-control ml20" style="width:170px;">推广目标</div><div class="item-control" style="width:200px;">推广单价</div><div class="item-control">推广预算</div></div><div class="clearfix" style="margin-bottom:30px;"><eqx-select ng-show="!order.status || order.status==1 || order.status==4" class="center-sel item-control border-width select-contain select-lg ml20" model="pvTarget" can-input="true" change="changeTarget()"><eqx-select-option value="pv.value" ng-repeat="pv in pvTypes">{{pv.name}}</eqx-select-option></eqx-select><div class="item-control ml20" ng-if="order.status && order.status!=1 && order.status!=4" style="width:100px;"><div class="pro-value text-center disable">{{pvTarget}}</div></div><div class="item-control ml10" style="width:60px;">KPV <span class="m10" style="font-size:18px;">÷</span></div><div class="item-control" style="width:100px;"><div class="pro-value text-center disable" ng-if="!isOfficial">{{order.price}}</div><input type="number" min="1" max="500" ng-if="isOfficial" ng-change="changeTarget()" ng-model="order.price" class="item-input text-center"></div><div class="item-control" style="width:70px;padding-left:15px;">PV/1秀点</div><div class="item-control ml10" style="width:20px;">=</div><div class="item-control text-center" style="width:150px;"><div class="pro-value fail disable" ng-if="pvTarget==0" style="font-size:18px;">按推广量计算</div><div class="pro-value fail disable" ng-if="pvTarget!=0" style="font-size:18px;">{{order.budget}}</div></div><div class="item-control ml10">秀点</div></div></div></div></div><div class="form-save" ng-if="!order.status || order.status==1 || order.status==2 || order.status==4"><a class="btn btn-40 confirm-btn" ng-click="publishTask()">发布任务</a></div></div><div ng-include="\'orderTask/order/create/customerService.html\'"></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/create/orderState.html",'<div class="order-sate clearfix"><div class="step complete-step"><div class="step-con"><em class="num">1</em> <span class="step-title">填写推广任务</span></div><div class="step-arrow"></div></div><div class="step ml20" ng-class="{\'complete-step\':step}"><div class="step-con"><em class="num">2</em> <span class="step-title">确认任务并托管预算</span></div><div class="step-arrow"></div></div><div class="step ml20" ng-class="{\'complete-step\':step==3}"><div class="step-con" style="width:380px;"><em class="num">3</em> <span class="step-title">提交成功</span></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/create/selectPageTpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="$dismiss()"><span aria-hidden="true">×</span></button><h4 class="modal-title">选择要推广的任务内容 <a ng-show="fileType ==\'0\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1921&page=1&extra=#pid6652"><span class="eqf-exclaquestion-sign"></span></a> <a ng-show="fileType ==\'1\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1934&page=1&extra=#pid6696"><span class="eqf-exclaquestion-sign"></span></a> <span ng-if="!isOfficialTask" class="action">提示：单次操作只能选择一个模板</span> <span ng-if="isOfficialTask" class="action">提示：可同时选择多个模板组成一个任务内容</span> <span ng-if="isOfficialTask" class="action">已选择{{tplLength}}个模板</span></h4></div><div class="dialog-contain page-tpl-contain" id="container"><div class="dialog-content clearfix"><ul class="nav nav-tpl tab-line"><li><a style="margin-left:10px;" class="active">我的模板</a></li></ul><div class="p20"><ul class="page-tpl-container clearfix" style="position:relative;top:0;" ng-if="totalItems"><li class="page-tpl-item" ng-class="{\'no-left-b\': !$index%4==0,\'left-b\':$index%4==0}" ng-repeat="pageTpl in myPageTpls"><div thumb-tpl="" my-tpl="pageTpl" class="nr page-tpl-nr" no-del="true"></div><div class="checkbox-square opacity-width-change" ng-if="!pageTpl.properties.longPage" ng-class="{checked: pageTpl.selected}"><em class="eqf-yes2"></em> <input type="checkbox" ng-change="selectTpl(pageTpl)" ng-model="pageTpl.selected"></div><div ng-if="pageTpl.properties.longPage" class="eqf-glyphicon-ban checkbox-square"></div></li></ul><div class="p20" ng-if="!totalItems"><div class="empty-list"><div class="pic none"></div><div class="description">抱歉，目前还没有模板！</div><div class="to-task"><p>去<a ng-click="createTpl()"><span>编辑器</span></a>创建我的模板</p></div></div></div></div><div></div></div><div class="modal-footer clearfix no-line"><div class="fl mr20" ng-show="numPages > 1"><pagination style="float: left" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="首页" last-text="尾页" max-size="5" items-per-page="$parent.pageSize" total-items="$parent.totalItems" ng-model="$parent.currentPage" boundary-links="true" ng-change="$parent.pageChanged(currentPage)" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? $parent.pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="$parent.pageChanged(toPage)" class="go">确定</a></div></div><a class="modal-cancle" ng-click="$dismiss()">取消</a> <a class="btn btn-primary" ng-if="tplLength" ng-click="ok();">确定</a> <a class="btn gray" ng-if="!tplLength">确定</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/detail/orderDetail.html",'<div ng-include="\'header.tpl.html\'"></div><div id="order-detail"><div class="detail-con"><div class="return-btn pt20 pb20"><a ng-href="list/order"><span class="eqf-left"></span> 返回推广任务订单</a></div><div class="detail min_contain"><ul class="clearfix tab-line pl20"><li><a ng-class="{active: tabid === \'content\'}" ng-click="switchTab(\'content\')">订单详情</a></li><li ng-if="orderDetail.status === 3 || (orderDetail.status === 5 && orderDetail.isCancelTask === 0)"><a ng-class="{active: tabid === \'effect\'}" ng-click="switchTab(\'effect\')">推广效果</a></li></ul><div class="p20" ng-show="tabid === \'content\'" ng-include="\'orderTask/order/detail/tab/content.html\'" ng-controller="orderDetailContentController"></div><div class="p20" ng-show="tabid === \'effect\'" ng-include="\'orderTask/order/detail/tab/effect.html\'" ng-controller="orderDetailEffectController"></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/list/orderList.tpl.html",'<div class="task-list content"><div class="top-btn"><div class="status-btn"><a class="all-change" ng-class="{active: orderStatus === null}" ng-click="getOrderList(null, 1)"><span>全部</span></a> <a class="all-change" ng-class="{active: orderStatus === 1}" ng-click="getOrderList(1, 1)"><span>待付款</span> <i class="count" ng-show="noPayMent">{{noPayMent}}</i></a> <a class="all-change" ng-class="{active: orderStatus === 2}" ng-click="getOrderList(2, 1)"><span>审核中</span></a> <a class="all-change" ng-class="{active: orderStatus === 3}" ng-click="getOrderList(3, 1)"><span>推广中</span></a> <a class="all-change" ng-class="{active: orderStatus === 5}" ng-click="getOrderList(5, 1)">已结束</a> <a class="all-change" ng-class="{active: orderStatus === 4}" ng-click="getOrderList(4, 1)"><span>审核失败</span> <i class="count" ng-show="reject">{{reject}}</i></a></div><a class="release-task all-change" ng-href="order/new">发布推广任务</a> <a class="promotion-center all-change" ng-href="show/task">任务推广中心</a></div><div class="list"><div class="task-category"><span class="w320 pl20 same-block">任务名称</span> <span class="w130 pl20 same-block">任务类型</span> <span class="w110 pl20 same-block">任务目标</span> <span class="w110 pl20 same-block">推广预算(秀点)</span> <span class="w120 pl20 same-block">推广周期</span> <span class="w110 pl20 same-block">订单状态</span> <span class="w80 pl20 same-block">操作</span></div><ul class="order-content"><li ng-repeat="list in orderList"><div class="task-title pr20 pl20"><span class="fr" ng-show="list.status === 5 && isCancelTask === 0 && list.target">截止到{{list.remainBudgetUpdateTime}}&nbsp;我的剩余预算：{{list.remainBudget}}秀点 <em class="no-aims" ng-show="list.remainBudget">未完成目标</em> <em class="aims" ng-show="!list.remainBudget">已完成目标</em></span> <span class="fr" ng-show="list.status === 1">还剩{{list.remainPaytime >= 1 ? list.remainPaytime : \'不足1\'}}天，&nbsp;总计：{{list.target ? (list.budget | fixnum) + \'秀点\' : \'按推广量计算\'}} <a class="pay" ng-href="order/confirm/{{list.id}}">去付款</a></span> <span class="pr20">订单编号：{{list.id}}</span> <span class="pr5">下单时间：{{list.createTime}}</span> <span class="official-tag" ng-show="!!list.isOfficialTask">易企秀官方推广任务</span></div><div class="order-data clearfix"><div class="w320 fl"><div class="preview-wrap"><div class="preview same-block nr" thumb-tpl="" my-tpl="list.scenePages[0]" hide-del-btn="true"></div><a class="all-change" order-task-preview="" page-tpl="list.scenePages[0]"><span>预览</span></a></div><span class="pl20 pt30 same-block order-name">{{list.taskName}}</span></div><span class="w130 pt30 pl20 fl">{{list.taskType | orderTypeFilter}}</span> <span class="w110 pt30 pl20 fl">{{list.target ? (list.target | fixnum) + \'PV\' : \'上不封顶\'}}</span> <span class="w110 pt30 pl20 fl">{{list.target ? (list.budget | fixnum) + \'秀点\' : \'按推广量计算\'}}</span> <span class="w120 pt30 pl20 fl">{{list.startDate}}<br>{{list.endDate}}</span> <span class="w110 pt30 pl20 fl"><em class="sta" ng-class="{\'sta-nopay\': list.status === 1,\'sta-check\': list.status === 2,\'sta-in\': list.status === 3, \'sta-fail\': list.status === 4, \'sta-end\': list.status === 5}">{{list.status | orderStatusFilter}}</em><div class="hint--bottom hint--rounded error-msg" data-hint="{{list.checkInfo}}" ng-show="list.status === 5 && list.checkInfo">失败原因</div></span> <span class="w80 pt30 pl20 fl operation"><a ng-show="list.status === 4" ng-href="order/new/{{list.id}}">重新发布</a> <a ng-show="list.isOfficialTask !== 1 && list.status === 5 && list.isCancelTask === 0 && (list.remainBudget && list.isExtractBudget === 0)" ng-click="extractBudget(list.id, list.remainBudget, list.endDate, $index)">提取预算</a> <a ng-show="list.isOfficialTask !== 1 && list.status === 5 && list.isExtractBudget === 1">已提预算</a> <a ng-show="list.status === 2" ng-href="order/new/{{list.id}}">修改任务</a> <a ng-show="list.status === 2" ng-click="cancelOrder(list, $index)">取消订单</a> <a ng-show="list.status === 3 || list.status === 5" ng-href="order/detail/effect/{{list.id}}">推广效果</a> <a ng-href="order/detail/content/{{list.id}}">订单详情</a> <a ng-show="list.status === 5 || list.status === 1 || list.status === 4" ng-click="deleteOrder(list)">删除订单</a></span></div></li></ul><div class="clearfix page-turn" ng-show="totalItems > 5"><pagination style="float: left" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="page.currentPage" ng-change="pageChanged(page.currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div><eqd-none-list ng-show="totalItems === 0" manage-type="order" task-status="orderStatus"></eqd-none-list></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/task/list/selectScene.tpl.html",'<div class="modal-header no-line"><button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="$dismiss()"><span aria-hidden="true">×</span></button><h4 class="modal-title">选择任务推广场景 <a ng-show="fileType ==\'0\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1921&page=1&extra=#pid6652"><span class="eqf-exclaquestion-sign"></span></a> <a ng-show="fileType ==\'1\'" class="bbs-help-tip-media" target="_blank" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1934&page=1&extra=#pid6696"><span class="eqf-exclaquestion-sign"></span></a> <span ng-show="!authError" class="action">提示：单次操作只能选择一个场景</span> <span ng-show="authError" class="action">{{authError}}</span></h4></div><div class="dialog-contain page-tpl-contain" id="container"><div class="dialog-content clearfix"><ul class="nav nav-tpl tab-line"><li><a style="margin-left: 22px;" class="active">我的场景</a></li></ul><div class="p20 scene-list"><ul class="page-tpl-container scene-container clearfix" style="position:relative;top:0;" ng-if="totalItems"><li class="page-tpl-item scene-item" ng-repeat="scene in scenePicker"><div class="cover" ng-click="selectItem(scene.id)" ng-style="{backgroundImage: scene.cover ? \'url(\' + PREFIX_FILE_HOST + scene.cover + \'?imageMogr2/auto-orient/thumbnail/180x180/strip)\' : null}"></div><div class="checkbox-square" ng-class="{checked: scene.checked, isShow: scene.checked}"><em class="eqf-yes2"></em> <input type="checkbox" ng-change="changeLoop(scene.id)" ng-model="scene.checked"></div><div class="title">{{scene.name}}</div></li></ul><eqd-none-list ng-if="!totalItems" manage-type="task-scene" task-status="taskStatus"></eqd-none-list></div></div><div class="modal-footer clearfix no-line">{{currentPage}}<div class="fl mr20" ng-show="totalItems > 10"><pagination style="float: left" ng-change="pageChanged(page.currentPage)" ng-model="page.currentPage" max-size="5" items-per-page="pageSize" total-items="totalItems" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="首页" last-text="尾页" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div><a class="modal-cancle" ng-click="$dismiss()()">取消</a> <a class="btn btn-primary" ng-click="ok();">确定</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/task/list/taskList.html",'<div class="task-list content"><div class="top-btn"><div class="status-btn"><a class="all-change" ng-class="{active: taskStatus === \'\'}" ng-click="getTaskList(\'\')"><span>全部任务</span></a> <a class="all-change" ng-class="{active: taskStatus === \'1\'}" ng-click="getTaskList(\'1\')"><span>我还没开始推广的任务</span> <i class="count" ng-show="noPromotion">{{noPromotion}}</i></a> <a class="all-change" ng-class="{active: taskStatus === \'2\'}" ng-click="getTaskList(\'2\')"><span>我正在推广中的任务</span></a> <a class="all-change" ng-class="{active: taskStatus === \'3\'}" ng-click="getTaskList(\'3\')"><span>已结束</span></a></div><a class="release-task all-change" ng-href="order/new" target="_blank">发布推广任务</a> <a class="promotion-center all-change" ng-href="show/task">任务推广中心</a></div><div ng-show="!isCloseRule && totalTasks" class="rule-intro">任务结算规则说明：平台只计算任务推广周期内产生的有效推广量<span ng-click="switchRule()" class="eqf-wrong"></span></div><div class="list"><div class="task-category"><span class="w320 pl20 same-block">任务名称</span> <span class="w130 pl20 same-block">任务类型</span> <span class="w110 pl20 same-block">任务目标</span> <span class="w110 pl20 same-block">推广单价</span> <span class="w120 pl20 same-block">推广周期</span> <span class="w110 pl20 same-block">订单状态</span> <span class="w80 pl20 same-block">操作</span></div><ul class="task-content" ng-if="totalTasks"><li ng-repeat="task in taskObj.list"><div class="task-title pr20 pl20"><span class="fr" ng-if="judgeStatus(task.status, task.sceneTotal) !== \'1\'">截止到{{task.earningsUpdateTime}}我的收益：{{task.earnings}}秀点</span> <span class="pr20">订单编号：{{task.id}}</span> <span class="pr5">下单时间：{{task.createTime}}</span> <span ng-if="task.isOfficialTask === 1" class="official-tag">易企秀官方推广任务</span></div><div class="task-data order-data clearfix"><div class="w320 fl"><div class="preview-wrap"><div class="preview same-block nr" thumb-tpl="" my-tpl="task.scenePages[0]" hide-del-btn="true"></div><a class="all-change" order-task-preview="" page-tpl="task.scenePages[0]"><span>预览</span></a></div><span class="pl20 pt30 same-block order-name">{{task.taskName}}</span></div><span class="w130 pt30 pl20 fl">{{task.taskType | orderTypeFilter}}</span> <span class="w110 pt30 pl20 fl target">{{task.target ? (task.target | fixnum) + \'PV\' : \'上不封顶\'}}</span> <span class="w110 pt30 pl20 fl budget">{{task.isOfficialTask === 1 ? \'≈ 1秀点 / \' + (task.price | fixnum) + \'PV\' : \'1秀点 / \' + (task.price | fixnum) + \'PV\'}}</span> <span class="w120 pt30 pl20 fl">{{task.startDate}}<br>{{task.endDate}}</span> <span class="w110 pt30 pl10 fl status"><i ng-if="judgeStatus(task.status, task.sceneTotal) == \'1\'" style="border-color: #ffc36d; color: #ffc36d">我还没开始推广的任务</i> <i ng-if="judgeStatus(task.status, task.sceneTotal) == \'2\'" style="border-color: #48d5b2; color: #48d5b2">我正在推广中的任务</i> <i ng-if="judgeStatus(task.status, task.sceneTotal) == \'3\'" class="task-over" style="border-color: #76838f; color: #76838f">已结束</i></span> <span class="w80 pt20 pl20 fl operate"><a ng-if="judgeStatus(task.status, task.sceneTotal) == \'1\'" ng-click="promoteTask()"><span>立即推广</span></a> <a ng-if="isShowGetIncomeBtn(task);" ng-click="getIncome(task.id, task.endDate)"><span>提取收益</span></a> <a ng-if="task.isExtractEarnings == 1"><span>收益已提</span></a> <a ng-if="judgeStatus(task.status, task.sceneTotal) == \'2\'" ng-click="promoteTask()"><span>继续推广</span></a> <a ng-href="{{\'task/detail/effect/\' + task.id}}" ng-if="task.status == 5 || judgeStatus(task.status, task.sceneTotal) == \'2\'"><span>推广效果</span></a> <a ng-href="{{\'task/detail/content/\' + task.id}}"><span>任务详情</span></a> <a ng-click="deleteTask(task.id)"><span>删除任务</span></a></span></div></li></ul><div class="fl mr20" style="margin: 20px 0;" ng-if="totalTasks > 5"><pagination style="float: left" ng-change="pageChanged(page.currentPage)" ng-model="page.currentPage" max-size="5" items-per-page="pageSize" total-items="totalTasks" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="首页" last-text="尾页" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class="fl">页</span> <a ng-click="pageChanged(toPage)" class="go">确定</a></div></div><eqd-none-list ng-if="!totalTasks" manage-type="task" task-status="taskStatus"></eqd-none-list></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/task/detail/taskDetail.html",'<div ng-include="\'header.tpl.html\'"></div><div id="order-detail"><div class="detail-con"><div class="return-btn pt20 pb20"><a ng-href="list/task"><span class="eqf-left"></span> 返回我参与的任务</a></div><div class="detail min_contain"><ul class="clearfix tab-line pl20"><li><a ng-class="{active: tabid === \'content\'}" ng-click="switchTab(\'content\')">订单详情</a></li><li><a ng-class="{active: tabid === \'effect\'}" ng-click="switchTab(\'effect\')">推广效果</a></li></ul><div class="p20" ng-show="tabid === \'content\'" ng-include="\'orderTask/task/detail/tab/content.html\'" ng-controller="taskDetailContentController"></div><div class="p20" ng-show="tabid === \'effect\'" ng-include="\'orderTask/task/detail/tab/effect.html\'" ng-controller="taskDetailEffectController"></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/edit/editbg/editbg.tpl.html",'<div class="background-container" ng-class="{\'on\':showBackgroundPanel}"><div class="background-panel"><div class="setting-group" ng-if="currentBgDef.properties.imgSrc" ng-mouseenter="switchBgOption(false);$event.stopPropagation()" ng-click="cropBg(currentBgDef);"><div class="setting-btn"><span class="eqf-cut"></span></div><span>裁剪</span></div><div class="setting-group" ng-mouseenter="switchBgOption(false);$event.stopPropagation()" ng-click="replaceBg(currentBgDef)"><div class="setting-btn"><span class="eqf-refresh"></span></div><span>更换</span></div><div class="setting-group" ng-show="currentBgDef.properties.croptype!=2" ng-mouseenter="switchBgOption(true);$event.stopPropagation()"><div class="setting-btn"><span class="eqf-xiaoguo"></span></div><span>效果</span></div><div class="setting-group" ng-mouseenter="switchBgOption(false);$event.stopPropagation()" ng-click="removeBG($event)"><div class="setting-btn"><span class="eqf-scene-delete"></span></div><span>删除</span></div></div></div><div class="bgoption-container" ng-class="{\'on\':(showBgOptionPanel&&showBackgroundPanel)}"><div class="bgoption-panel"><div class="setting-group" ng-class="{active:(currentBgDef.effect && currentBgDef.effect.type==\'scaleUp\')}" ng-click="scaleUpBg(currentBgDef);"><div class="setting-btn"><span class="eqf-bigger"></span></div><span>放大</span></div><div class="setting-group" ng-class="{active:(currentBgDef.effect && currentBgDef.effect.type==\'scaleDown\')}" ng-click="scaleDownBg(currentBgDef)"><div class="setting-btn"><span class="eqf-small"></span></div><span>缩小</span></div><div class="setting-group" ng-if="currentBgDef.effect" ng-click="removeBgEffect($event)"><div class="setting-btn"><span class="eqf-wrong"></span></div><span>删除</span></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/edit/select/select.tpl.html",'<div class="select-panel" ng-show="showSelectPanel" panel-draggable=""><div class="modal-header ng-scope"><span>多选操作</span></div><div class="select-content"><ul><li><a class="hint--bottom hint--rounded" data-hint="左对齐" eqx-align-left=""><span class="eqf-putleft"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="水平居中对齐" eqx-align-horizontal-center=""><span class="eqf-putmiddle"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="右对齐" eqx-align-right=""><span class="eqf-putright"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="上对齐" eqx-align-top=""><span class="eqf-puttop"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="垂直居中对齐" eqx-align-vertical-center=""><span class="eqf-putcenter"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="下对齐" eqx-align-bottom=""><span class="eqf-putunder"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="竖直均分" eqx-vertical-average=""><span class="eqf-chuizhijunfen"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="水平均分" eqx-horizontal-average=""><span class="eqf-shuipingjunfen"></span></a></li></ul><ul><li><a class="hint--bottom hint--rounded" data-hint="复制" eqx-copy=""><span class="eqf-scene-copy"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="粘贴" eqx-paste="" ng-style="{opacity: pasteOpacity}"><span class="eqf-print"></span></a></li><li><a class="hint--bottom hint--rounded" data-hint="删除" eqx-delete-more=""><span class="eqf-scene-delete"></span></a></li></ul></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("scene/edit/workspace/compsManage.tpl.html",'<div eqd-scroll="" style="height: 100%;" prevent-exception="true" disable-mouse="true"><ul class="page-uls" ng-mousedown="$event.stopPropagation()" ui-sortable="compSortOption" ng-model="setComps"><li class="blurClass compli" ng-repeat="comp in setComps track by $index" ng-class="{current: comp.id==curCompId}" blur-children=""><span class="page-name el-name" ng-click="setCompEditStatus($index,true,comp.id)" ng-show="!compEditStatus[$index]">{{comp.setlabel}}</span> <span class="page-name el-name" ng-if="isCompMange && !isEditor" ng-click="setCompEditStatus($index,true,comp.id)" ng-show="compEditStatus[$index]">{{comp.setlabel}}</span> <input ng-if="isTplEditor" style="width: 110px;display:inline-block; height: 25px; line-height: 25px; color: #999;margin-top:7px;margin-left:15px;box-shadow:none;" type="text" ng-model="comp.setlabel" ng-blur="setCompEditStatus($index,false,comp.id)" ng-show="compEditStatus[$index]" custom-focus="" stop-propagation=""> <i class="eqf-star-line" ng-if="isCompMange && comp.setstatus!=4"></i></li></ul></div>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/task/detail/selectTask.html",'<h4 style="line-height: 50px;margin-top:10px;">精选任务</h4><div class="select-tpl-list clearfix"><div class="recom-task fl all-change" ng-repeat="task in selectTasks"><div class="tpl-view"><div class="task-tpl-view nr" thumb-tpl="" my-tpl="task.scenePages[0]" hide-del-btn="true"></div><div class="overlay"><a class="previce-btn" order-task-preview="" page-tpl="task.scenePages[0]">预览</a></div></div><h5 class="text-center ellipsis">{{task.taskName}}</h5><div class="clearfix" style="margin-top: 12px"><div class="fl text-center" style="width:50%;"><h6 class="fail">{{price}}秀点/20PV</h6><h6 style="margin-top: 13px;">推广单价</h6></div><div class="fl text-center" style="width:50%;border-left: 1px solid #e6ebed;"><h6 class="fail" ng-if="task.target">{{task.budget}}秀点</h6><h6 class="fail" ng-if="!task.target">按推广量计算</h6><h6 style="margin-top: 13px;">推广预算</h6></div></div><a ng-click="receiveTask(task.id)" class="btn btn-primary receiving-btn opacity-width-change">立即接单</a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/task/detail/taskDetail.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="same-content clearfix task-detail"><div class="same-content"><a href="/show/task" style="line-height:50px;">任务推广</a> > {{order.taskName}}</div><div class="order-new clearfix"><div class="confirm-form"><div class="order-detail clearfix"><div class="tpl-view"><span class="available-count" ng-if="orderCount">{{orderCount}}人可接单</span><div class="tpl-nr nr" ng-if="orderTpl" thumb-tpl="" un-transform="true" my-tpl="orderTpl" hide-del-btn="true"></div></div><div class="order-items ml20"><h4 class="primary-color">{{order.taskName}}</h4><div class="promotion-detail mt20"><div class="item-control" style="width:180px;"><h4 class="fail" ng-if="order.target">{{order.budget}}<span class="ft12">秀点</span></h4><h4 class="fail" ng-if="!order.target">按推广量计算</h4><div class="primary-color">推广预算</div></div><div class="item-control" style="width:110px;"><h5 class="fail"><span ng-if="order.isOfficialTask">≈</span>{{order.price}}<span class="ft12">PV/1秀点</span></h5><div class="primary-color">推广单价</div></div><div class="item-control" style="border-left:1px solid #e6ebed;padding-left: 20px;"><h5 class="fail" ng-if="order.target">{{order.target}}<span class="ft12">PV</span></h5><h5 class="fail" ng-if="!order.target">上不封顶</h5><div class="primary-color">推广目标</div></div></div><div class="order-item" style="margin-top:10px;"><h5><span class="fail">{{orderStatis.total}}</span>人已参与</h5></div><div class="order-item" style="border-bottom:1px solid #e6ebed;line-height:50px;"><span>任务周期</span> <span class="primary-color ml20" ng-if="!order.endDate">长期有效</span> <span class="primary-color ml20" ng-if="order.endDate">{{getDate(order.startDate)}}-{{getDate(order.endDate)}}</span></div><div class="order-item clearfix"><div class="item-control">任务需求</div><div class="item-control primary-color ml20 other-item">{{order.description}}</div></div><div class="order-item"><span>推广类别</span><span class="primary-color ml20">任务页实际有效浏览量（PV）</span></div><div class="order-item"><span>完成方式</span><span class="primary-color ml20">按1000PV整数</span></div><a class="btn btn-40 btn-primary ml20 mt20" ng-if="!orderStatis.isAccepted && order.status==3 && !(orderStatis.availableTotal==0 && !order.target)" ng-click="receiveTask()" style="width:140px;">立即接单</a> <a class="btn btn-40 ml20 mt20 green" ng-if="orderStatis.isAccepted && order.status==3" style="width:140px;">已接单</a> <a class="btn btn-40 ml20 mt20 gray" ng-if="order.status==5" style="width:140px;">已结束</a> <a class="btn btn-40 ml20 mt20 gray" ng-if="orderStatis.availableTotal == 0 && !order.target && !orderStatis.isAccepted" style="width:140px;">抢光了</a></div></div></div><div ng-include="\'orderTask/order/create/customerService.html\'"></div></div><div class="help-center p20"><h4>帮助中心</h4><p class="mt20">回复@小奇葩找瓜瓜: 互联网人现在都喜欢简约的了[偷笑] //@小奇葩找瓜瓜:底色太花了 不然还挺好 //@易企秀:#有种你来晒##不怕评论狠，就怕不中肯#小伙伴们，赶快来点评这个H5[嘻嘻]</p></div><div class="select-task" ng-include="\'show/task/detail/selectTask.html\'"></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/task/list/taskList.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="same-content show-task-list clearfix mb20"><div class="fl" style="width:740px"><div class="clearfix filter-con"><div class="fl" style="width:200px;"><p class="input-group datepicker"><input type="text" placeholder="选择任务推广开始时间" class="form-control" datepicker-popup="yyyy.MM.dd" ng-model="startDate" ng-click="opened = !opened;" is-open="opened" datepicker-options="{\'formatYear\':\'yy\',startingDay:1,showWeeks:false}" ng-disabled="formDis" ng-change="changeDate()" date-disabled="disabled(date, mode)" ng-required="true" current-text="今天" clear-text="清除" close-text="关闭"> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-disabled="formDis" ng-click="opened=!opened;$event.stopPropagation();$event.preventDefault();"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div class="fl ml10 p10" ng-class="{checkedbg: !ongonging}"><div class="checkbox-square" ng-class="{checked: ongonging}"><em class="eqf-yes2"></em> <input type="checkbox" class="going-ch" ng-change="changeState()" ng-model="ongonging"></div><em class="green-label">正在进行的任务</em></div><div class="fl p10" ng-class="{checkedbg: !isOfficialTask}"><div class="checkbox-square" ng-class="{checked: isOfficialTask}"><em class="eqf-yes2"></em> <input type="checkbox" class="official-ch" ng-change="changeOffical()" ng-model="isOfficialTask"></div><em class="green-label">易企秀官方推广任务</em></div><eqx-select class="scene-select select-sm select-contain" model="sortType" change="changeSort()"><eqx-select-option value="null">默认排序</eqx-select-option><eqx-select-option value="type.value" ng-repeat="type in sorts">{{type.name}}</eqx-select-option></eqx-select></div><div class="task-list-con"><ul><li class="clearfix m20 task-item" ng-repeat="task in taskList"><div class="clearfix ml20 mr20"><div class="fl tpl-view"><div thumb-tpl="" my-tpl="task.scenePages[0]" class="nr task-tpl-view" hide-del-btn="true"></div><div class="overlay"><a class="previce-btn" order-task-preview="" page-tpl="task.scenePages[0]">预览</a></div></div><div class="fl ml20"><h5 class="task-name"><a ng-href="/show/task/{{task.id}}">{{task.taskName}}</a></h5><h6 class="mt20 mb10" ng-if="task.target">目标：{{task.target}}PV</h6><h6 class="mt20 mb10" ng-if="!task.target">目标：上不封顶</h6><h6 class="mb10" ng-if="task.endDate">周期：{{getDate(task.startDate)}}-{{getDate(task.endDate)}}</h6><h6 class="mb10" ng-if="!task.endDate">周期：长期有效</h6><h6 class="mb10">单价：<span class="fail"><span ng-if="task.isOfficialTask">≈</span>1秀点/{{task.price}}PV</span></h6></div><div class="fr"><h5 class="text-right" style="line-height:80px;" ng-if="!task.isOfficialTask">总预算<span class="fail ml10 mr10 ft24">{{task.budget}}</span><span class="fail">秀点</span></h5><h5 class="text-right" style="line-height:80px;" ng-if="task.isOfficialTask"><span class="fail ml10 mr10 ft24">{{task.availableTotal}}</span><span class="fail">人可接单</span></h5><div class="text-right"><span class="mr20"><span class="fail">{{task.total}}</span>人已参与</span> <a class="btn btn-primary" ng-click="receiveTask(task.id)" style="width:100px;" ng-if="task.status==3 && !task.isAcceptedTask">立即接单</a> <a class="btn green" ng-if="task.isAcceptedTask && task.status==3" style="width:100px;">已接单</a> <a class="btn gray" ng-if="task.status==5" style="width:100px;">已结束</a></div></div><div class="task-tip" ng-if="task.isOfficialTask">易企秀官方推广任务</div></div></li></ul><div class="empty-list" ng-if="totalItems==0"><div class="pic" ng-class="{empty: !taskFilter, none: taskFilter }"></div><div class="description" ng-if="!taskFilter">抱歉，目前还没有任务！</div><div class="to-task" ng-if="!taskFilter"><a ng-href="show">去秀场看看</a></div><div class="description" ng-if="taskFilter">哎呀，该筛选条件下没有对应的任务！</div><div class="to-task" ng-if="taskFilter"><a ng-click="clearFilter()" class="btn">清空筛选，重新刷新</a></div></div></div><div class="mt20 clearfix pb20" ng-show="totalItems > 10"><pagination style="float:left;" first-text="首页" last-text="尾页" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="10" items-per-page="filter.pageSize" total-items="totalItems" ng-model="filter.pageNo" ng-change="pageChanged(filter.pageNo)" boundary-links="true" rotate="true" num-pages="numPages"></pagination><div class="current_page"><span class="fl">到</span> <input type="text" ng-model="filter.pageNo" ng-keyup="$event.keyCode == 13 ? pageChanged(filter.pageNo) : null"><span class="fl">页</span> <a ng-click="pageChanged(filter.pageNo)" class="go">确定</a></div></div></div><div class="fl ml20 task-about" style="width:240px;"><div class="publish-task p20"><a class="btn btn-primary btn-40 mt10" ng-href="/order/new" target="_blank" style="width:200px;">发布推广任务</a><h5 class="mt10">如何发布/参与任务？</h5><h5 class="mt10">如何推广任务？</h5><div class="btn-con"><a class="published-btn" ng-href="/list/order">我发布的任务</a> <a class="involved-btn" ng-href="/list/task">我参与的任务</a></div></div><div class="select-task vector-task" ng-include="\'show/task/detail/selectTask.html\'"></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("show/task/receive/receiveTaskSuc.html",'<div id="show-contain"><div ng-include="\'show/category/nav.tpl.html\'" ng-controller="NavCtrl"></div><div class="same-content clearfix task-detail"><div class="same-content"><a href="/show/task" style="line-height:50px;">任务推广</a> > {{order.taskName}}</div><div class="order-new clearfix"><div class="revice-task"><div class="clearfix"><span class="suc-icon"><em class="eqf-yes2"></em></span> <span class="suc-tip">接单成功</span></div><div class="operation"><h5>请您尽快完成任务</h5><div><h5>您可以立即<a class="ml20 btn btn-complete" ng-click="promoteTask()">立即推广</a> <a class="text-primary ml20">如何推广任务</a></h5></div><div><h5>也可以查看<a class="ml20 mr20 text-primary" ng-href="/list/task">我参与的任务</a> |<a class="text-primary ml20" ng-href="/show/task/{{order.id}}">任务详情</a></h5></div></div></div><div ng-include="\'orderTask/order/create/customerService.html\'"></div></div><div class="select-task" ng-include="\'show/task/detail/selectTask.html\'"></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/detail/tab/content.html",'<div class="detail-top"><div class="left pb20" style="padding-top: 10px;"><div class="pb20"><span class="pr20">订单编号: &nbsp;{{orderDetail.id}}</span> <span class="pl20">下单时间: &nbsp;{{orderDetail.createTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</span></div><div class="detai-title pb20">您发布的任务 "{{orderDetail.taskName}}" 当前状态:&nbsp; <span class="sta" ng-class="{\'sta-nopay\': orderDetail.status === 1,\'sta-check\': orderDetail.status === 2, \'sta-in\': orderDetail.status === 3, \'sta-fail\': orderDetail.status === 4, \'sta-end\': orderDetail.status === 5}">{{statusText}}</span></div><div class="pb20" ng-show="orderDetail.status === 5 && orderDetail.isCancelTask === 0 && orderDetail.target !== 0">推广周期内任务完成情况：&nbsp; <span class="sta complete-sta no-comp" ng-show="orderDetail.remainBudget">未完成推广目标</span> <span class="sta complete-sta comp" ng-show="!orderDetail.remainBudget">已完成推广目标</span></div><div class="pb20" ng-if="orderDetail.status === 1"><span>还剩{{orderDetail.remainPaytime >= 1 ? orderDetail.remainPaytime : \'不足1\'}}天</span> <span class="ml20">总计:</span><span style="margin-left: 10px;" class="text-red">{{orderDetail.target ? orderDetail.budget + \'秀点\' : \'按推广量计算\'}}</span></div><div class="pb20" ng-if="orderDetail.status === 5 && orderDetail.isCancelTask === 0 && orderDetail.remainBudget && orderDetail.target !== 0"><span>截止到{{orderDetail.endDate | date: \'yyyy年MM月dd日\'}}我的剩余预算:</span> <span style="display:inline-block;margin-left: 10px;" class="text-red">{{orderDetail.remainBudget}}秀点</span></div><div class="pb20" ng-if="orderDetail.status === 4"><span>审核失败原因:</span> <span style="display:inline-block;margin-left: 10px;" class="text-red">{{orderDetail.checkInfo}}</span></div><div class="detail-act"><a class="btn btn-orange" ng-if="orderDetail.status === 1" ng-href="order/confirm/{{orderDetail.id}}">去付款</a> <a class="btn btn-main" ng-if="orderDetail.status === 2" ng-href="order/new/{{orderDetail.id}}">修改任务</a> <a class="btn btn-red" ng-if="orderDetail.status === 2" ng-click="cancelOrder();">取消订单</a> <a class="btn btn-main" ng-if="orderDetail.status === 4" ng-href="order/new/{{orderDetail.id}}">重新发布</a> <a class="btn btn-primary" ng-if="orderDetail.isOfficialTask === 0 && orderDetail.status === 5 && orderDetail.isCancelTask === 0 && (orderDetail.remainBudget && orderDetail.isExtractBudget === 0)" ng-click="extractBudget();">提取预算</a> <a class="btn btn-primary disabled" ng-if="orderDetail.isOfficialTask === 0 && orderDetail.status === 5 && orderDetail.isExtractBudget === 1">预算已提</a></div></div><div class="right fr"><div class="panel mr20" panel-effect-directive="" order-detail="orderDetail" ng-if="orderDetail.status === 3 || (orderDetail.status === 5 && orderDetail.isCancelTask === 0)"></div><div class="panel" panel-directive=""></div></div></div><div ng-if="orderDetail"><div class="detail-bottom" ng-include="\'orderTask/common/orderTemplate.html\'" ng-controller="orderTemplateController"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/order/detail/tab/effect.html",'<div class="effect-top"><div class="panel mr20" panel-effect-directive="" order-detail="orderDetail"></div><div class="panel" panel-directive=""></div></div><div class="effect-chart" ng-if="barChartOption"><div style="width: 1100px; height: 410px;" order-task-bar-chart="" option="barChartOption"></div></div><div class="scene-list ml20"></div><div class="pv-area" ng-if="mapChartOption"><div style="width: 480px; height: 480px;" order-task-map-chart="" option="mapChartOption"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/task/detail/tab/content.html",'<div class="detail-top"><div class="fl" style="padding-top: 10px;"><div class="pb20"><span class="pr20">任务编号: &nbsp;{{taskDetail.id}}</span> <span class="pl20">接单时间: &nbsp;{{taskDetail.createTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</span></div><div class="pb20"><span>当前状态:&nbsp;</span> <span class="sta" ng-class="{\'sta-noprom\': taskDetail.status === 1,\'sta-prom\': taskDetail.status === 2, \'sta-end\': taskDetail.status === 3}">{{statusText}}</span></div><div class="detail-act"><a class="btn btn-main" ng-if="taskDetail.status === 1" ng-click="promoteTask();">立即推广</a> <a class="btn btn-main" ng-if="taskDetail.status === 2" ng-click="promoteTask();">继续推广</a> <a class="btn btn-primary" ng-if="taskDetail.status === 3 && taskDetail.isExtractEarnings === 0" ng-click="extractEarnings();">提取收益</a> <a class="btn btn-primary disabled" ng-if="taskDetail.status === 3 && taskDetail.isExtractEarnings === 1" href="">收益已提</a></div></div><div class="fr"><div class="panel mr20 fl"><div class="p-title">截止到{{taskDetail.earningsUpdateTime | date: \'yyyy年MM月dd日\'}}的我的推广数据</div><div class="p-con p20"><div>参与人数:&nbsp;<span>15人</span></div><div>总浏览量:&nbsp;<span>80万人</span></div><div ng-show="taskDetail.status === 1 && orderDetail.target">剩余预算:&nbsp;<span>秀点</span></div><div ng-show="taskDetail.status === 2 || taskDetail.status === 3">我的收益:&nbsp;<span>200秀点</span></div></div></div><div class="panel" panel-directive=""></div></div></div><div ng-if="orderDetail"><div class="detail-bottom" ng-include="\'orderTask/common/orderTemplate.html\'" ng-controller="orderTemplateController"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("orderTask/task/detail/tab/effect.html",'<div class="effect-top"><div class="panel mr20"><div class="p-title">截止到2016年7月26日的推广数据</div><div class="p-con p20"><div>参与人数: <span>15人</span></div><div>总浏览量: <span>80万人</span></div><div>剩余预算: <span>200秀点</span></div></div></div><div class="panel" panel-directive=""></div></div><div class="effect-chart"><div style="width: 1100px; height: 410px;" order-task-bar-chart="" option="option"></div></div><div class="scene-list ml20"></div><div class="pv-area"><div style="width: 480px; height: 480px;" order-task-map-chart=""></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/inputColor.tpl.html",'<div class="eqc-input-color {{theme}}" ng-style="{backgroundColor: selectColor, width: w - 2,height: h}"><div x="{{x}}" y="{{y}}" ng-style="{width: w - 2, height: h}" select-color="selectColor" notify="{{notify}}" eqd-colorpicker="{{colorMode}}" direction="{{direction}}" colorpicker-with-input="true" is-toolbar-color-picker="idName" istoolbarcolor="{{idName}}" is-convert-transparent="{{isConvertTransparent}}"></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/lineChart.tpl.html",'<canvas id="chart-area" width="300" height="300"></canvas>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/mapeditor.tpl.html",'<div class="col-lg-6"><div class="input-group"><input type="text" class="form-control" ng-model="address" placeholder="请输入地名"> <span class="input-group-btn"><button ng-click="searchAddress()" class="btn btn-default" type="button"><span>搜索</span></button></span></div></div><div id="r-result"></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/page-tpl-types.tpl.html",'<div class="btn-group" style="padding: 0;"><div class="dropdown"><a class="btn dropdown-toggle first-child" data-toggle="dropdown" title="页面模板" style="color: #fff;">页面模板 &nbsp; <b class="caret"></b></a><ul class="dropdown-menu size-menu"><li ng-repeat="type in pageTplTypes"><a ng-href="/scene/create/{{type.value}}?pageId=1">{{type.name}}</a></li></ul></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/pieChart.tpl.html",'<canvas id="chart-area" width="300" height="300"></canvas>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/preview.tpl.html",'<div class="dialog-contain"><span class="eqf-wrong" ng-click="cancel()"></span><div class="wrap"><div class="content nr" thumb-tpl="" my-tpl="pageTpl" un-transform="true" hide-del-btn="true"></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/select.tpl.html",'<div class="clearfix"><div class="eqc-mask" ng-click="showList($event)"><div class="eqc-name" ng-show="!inputVisabel" ng-click="showInput($event)">{{current.name}}</div><div class="eqc-name" ng-show="inputVisabel"><input class="select-input" style="width:100%" ng-click="$event.stopPropagation()" ng-change="changeInput()" ng-blur="blurInput()" ng-model="inputModel.value" type="text"></div><span class="more eqf-more"></span></div><div class="eqc-drop-down-list transform-change"><div class="list"><div class="eqc-scroll" prevent-exception="true" disable-mouse="true" eqd-scroll="{{scrollType}}"><ul class="clearfix" ng-click="selectItem($event)"><li ng-repeat="item in list" ng-class="{active: item == current}" ng-style="{fontFamily: item.fontFamily}" class="eqc-target">{{item.name}}</li></ul></div></div></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("directives/toolbar.tpl.html",'<div class="btn-toolbar" id="btn-toolbar" data-role="editor-toolbar"><div id="fontFamily" class="btn-group"><div class="dropdown font-dropdown"><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border" data-toggle="dropdown" data-hint="字体" id="fontMenu" style="width:100px;font-size:12px;" down-up-select="">{{selectedFontName}} <b class="caret"></b></a><ul class="dropdown-menu fontname-menu font-size-menu family-size-setting" role="menu" aria-labelledby="fontMenu" style="max-height: 350px;overflow-y:auto;" ng-class="{upSelectShow:upclass}"><li ng-repeat="name in fontNames"><a ng-click="changeFontFamily(name);" dropdown-toggle="" class="btn" data-edit="fontName">{{name.name}}</a></li><li class="moreFont"><a class="btn context-gengduo" ng-click="openFontMarket()">更多字体</a></li></ul></div></div><div class="btn-group"><div class="dropdown" style="display:inline-block"><a class="dropdown-toggle first-child hint--bottom hint--rounded text-btn-border" data-toggle="dropdown" data-hint="字号" style="width: 45px;padding-left:8px;" ng-init="defaultSize = \'24px\'" down-up-select="">{{selectStyle.fontSize}} <b class="caret"></b></a><ul class="dropdown-menu size-menu font-size-menu" ng-class="{upSelectShow:upclass}"><li><a class="inputSelection"><input ng-if="isAccessInput" ng-change="changeFontSize()" ng-focus="focusCallback($event)" ng-click="$event.stopPropagation()" ng-keydown="stopBackSpace($event)" ng-keypress="stopBackSpace($event)" ng-blur="revokeFontSize()" type="text" ng-model="selectStyle.fontSize" value="{{selectStyle.fontSize}}"></a></li><li ng-repeat="list in fontSizeLists"><a dropdown-toggle="" ng-click="changeFontSize(list.value);">{{list.value}}px</a></li></ul></div></div><div class="btn-group intersected"></div><div class="btn-group"><div class="dropdown dropdown-toggle hint--bottom hint--rounded text-btn-border" data-hint="颜色" style="width: 28px;"><a class="" data-toggle="dropdown"><span class="text-btn-border-color" style="color: #828d98;">A <i class="change-font-btn" style="background-color: {{selectStyle.showColor}}; border: 1px solid #ccd5db;"></i></span></a><eqd-input-color select-color="selectStyle.color" direction="bottom" toolcolorpicker="toolbarColor" theme="text-btn-border-color-button" notify="grid" x="-1" w="30" h="28"></eqd-input-color></div></div><div class="btn-group"><div class="dropdown dropdown-toggle hint--bottom hint--rounded text-btn-border" data-hint="背景颜色" style="width:28px;"><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border" data-toggle="dropdown"><span ng-if="selectStyle.showBackgroundColor === \'rgba(0,0,0,0)\' || selectStyle.showBackgroundColor === \'rgba(0, 0, 0, 0)\'" class="text-btn-border-bg" style="border:1px solid #ccd5db;"></span> <span ng-if="selectStyle.showBackgroundColor !== \'rgba(0,0,0,0)\' && selectStyle.showBackgroundColor !== \'rgba(0, 0, 0, 0)\'" class="text-btn-border-bg" style="border:1px solid #ccd5db; background: {{selectStyle.showBackgroundColor}};"></span></a><eqd-input-color select-color="selectStyle.backgroundColor" direction="bottom" toolcolorpicker="toolbarColor" theme="text-btn-border-color-button" notify="gridTest" x="-1" w="30" h="28" isconverttransparent="true"></eqd-input-color></div></div><div class="btn-group intersected"></div><div class="btn-group"><div class="hint--bottom hint--rounded text-btn-border text-style" style="width: 90px;"><a class="hint--bottom hint--rounded bolded" data-hint="加粗" ng-click="changeStyle(\'bold\');"><i class="eqf-b"></i></a> <a class="hint--bottom hint--rounded italic" data-hint="倾斜" ng-click="changeStyle(\'Italic\');"><i class="eqf-I"></i></a> <a class="hint--bottom hint--rounded underline" data-hint="下划线" ng-click="changeStyle(\'underline\');"><i class="eqf-U"></i></a> <a class="hint--bottom hint--rounded strikeThrough" data-hint="删除线" ng-click="changeStyle(\'strikeThrough\');"><i class="eqf-del2 deleteline"></i></a></div></div><div class="btn-group intersected"></div><div class="btn-group"><div class="dropdown"><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border testalign" data-toggle="dropdown" data-hint="对齐方式" style="width: 45px;padding-left: 5px;" down-up-select=""><i ng-switch="classTextAlign" ng-class="{\'eqf-minddleword\': classTextAlign ==\'eqf-minddleword\',\'eqf-leftword\': (classTextAlign==\'eqf-leftword\' || classTextAlign === undefined), \'eqf-rightword\': classTextAlign==\'eqf-rightword\'}"></i> <b class="caret"></b></a><ul class="dropdown-menu size-menu font-size-menu" ng-class="{upSelectShow:upclass}"><li><a dropdown-toggle="" ng-click="changeStyle(\'justifyleft\')" data-hint="居左" class="btn hint--bottom hint--rounded"><i class="eqf-leftword"></i></a></li><li><a dropdown-toggle="" ng-click="changeStyle(\'justifycenter\')" data-hint="居中" class="btn hint--bottom hint--rounded"><i class="eqf-minddleword"></i></a></li><li><a dropdown-toggle="" ng-click="changeStyle(\'justifyright\')" data-hint="居右" class="btn hint--bottom hint--rounded"><i class="eqf-rightword"></i></a></li></ul></div></div><div class="btn-group"><div class="dropdown"><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border add-icon-font" data-toggle="dropdown" data-hint="行高" style="width: 55px; padding-left:10px;" ng-click="editLineHeight()" down-up-select=""><i class="eqf-linebig"></i> <b class="caret"></b></a><ul class="dropdown-menu size-menu font-size-menu" ng-class="{upSelectShow:upclass}"><li><a class="inputSelection"><input ng-if="isAccessInput" ng-change="lineHeight()" ng-focus="focusCallback($event)" ng-click="$event.stopPropagation()" ng-keydown="stopBackSpace($event)" ng-keypress="stopBackSpace($event)" type="text" ng-model="selectStyle.lineHeight" value="{{selectStyle.lineHeight}}"></a></li><li ng-repeat="lineHeightList in lineHeightLists" class="{{lineHeightList.value}}"><a dropdown-toggle="" class="btn hint--bottom hint--rounded" ng-click="lineHeight(lineHeightList.scale)">{{lineHeightList.name}}</a></li></ul></div></div><div class="btn-group"><div class="dropdown"><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border" data-toggle="dropdown" data-hint="调整字间距" style="width: 55px; padding-left:10px;" ng-click="editLetter();" down-up-select=""><i class="eqf-letter add-icon-font" style="line-height: 28px;"></i> <b class="caret"></b></a><ul class="dropdown-menu size-menu font-size-menu" ng-class="{upSelectShow:upclass}"><li><a class="inputSelection"><input ng-if="isAccessInput" ng-change="letterSpace()" ng-focus="focusCallback($event)" ng-click="$event.stopPropagation()" ng-keydown="stopBackSpace($event)" ng-keypress="stopBackSpace($event)" type="text" ng-model="selectStyle.letterSpacing" value="{{selectStyle.letterSpacing}}"></a></li><li ng-repeat="wordLineList in wordLineLists" class="{{wordLineList.value}}"><a dropdown-toggle="" class="btn hint--bottom hint--rounded" ng-click="letterSpace(wordLineList.scale)">{{wordLineList.name}}</a></li></ul></div></div><div class="btn-group intersected"></div><div class="btn-group"><div class="dropdown"><a class="dropdown-toggle createLink hint--bottom hint--rounded text-btn-border" data-toggle="dropdown" data-hint="添加超链接" style="width:55px; padding-left:10px;" down-up-select=""><i class="eqf-link"></i> <b class="caret"></b></a><ul class="dropdown-menu size-menu font-size-menu" ng-class="{upSelectShow:upclass}"><li><a class="btn hint--bottom hint--rounded" data-hint="添加超链接：先选中要加链接的文字" ng-click="openAddLinkDialog();"><i class="eqf-link" dropdown-toggle=""></i></a></li><li><a class="btn hint--bottom hint--rounded" data-hint="清除超链接" ng-click="removeLink()"><i class="eqf-linkout" dropdown-toggle=""></i></a></li></ul><div class="dropdown" id="toolbar-add-linkA"><a id="addLinkInputToggle" class="dropdown-toggle" style="width: 0;height: 0;" down-up-select=""></a><div class="dropdown-menu input-append" style="min-width: 335px;padding:4px 4px 14px 19px;" ng-class="{upSelectShowLink:upclass}"><div class="span4" style="margin-top:10px;"><div class="radio-square" ng-class="{checked:link==\'external\'}" style="margin-top:8px;"><em></em> <input class="span2" name="link" ng-model="link" type="radio" value="external"></div><span>网站地址：</span> <input class="span2" placeholder="http://" type="text" ng-model="externalLink" style="border-radius:0px;width:200px;height:35px;" ng-keydown="stopBackSpace($event)"></div><div class="span4" style="margin-top: 10px;text-align: right;"><a href="http://dwz.cn/" style="text-decoration: underline;color: #08A1EF;margin-right: 30px;" target="_blank"><span>生成短链接</span></a></div><div class="span4" style="margin-top: 10px;"><div class="radio-square" ng-class="{checked:link==\'internal\'}" style="margin-top:8px;"><em></em> <input class="span2" name="link" ng-model="link" type="radio" value="internal"></div><span>场景页面：</span><select id="linkInternalPage" class="span2" style="width: 200px;height:35px;"><option ng-repeat="page in pages" value="{{page.id}}">{{page.name}}</option></select></div><div style="text-align:center"><a class="btn btn-primary link-btn-priv" style="color:#FFF; margin-top:20px;" dropdown-toggle="" ng-click="addLink()">确定</a></div></div></div></div></div><div class="btn-group intersected"></div><div class="btn-group" style="margin-right: 0;"><a class="last-child hint--bottom hint--rounded text-btn-border" data-hint="清除样式" style="width: 30px; text-align:center;" ng-click="clearStyle()"><i class="eqf-clear"></i></a></div></div>')}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("security/login/toolbar.tpl.html",'<ul class="nav pull-right clearfix" style="margin-right:0px;position:relative;"><li class="" style="width:150px;margin-top:-2px;cursor:pointer;" ng-show="sendXd.state"><img ng-click="openReg()" ng-src="{{CLIENT_CDN}}assets/images/xiudianyaoqing.png"></li><li class="mes_con dropdown" ng-show="isAuthenticated()" style="position:static;"><div style="position:relative;padding-top:5px;" class="hint--right hint--rounded" data-hint="消息"><a class="mes_content eqf-music dropdown-toggle background-color-width-change" style="position: relative;" ng-click="openMsgPanel()" data-event="2229"></a> <span class="mes_count" ng-if="newMsgCount">{{newMsgCount}}</span></div><div class="dropdown-menu msg_pannel box-shadow zoomIn-change" role="menu" forbidden-close="" style="transform-origin: 100% 0;"><div class="msg-title clearfix"><div class="panel_title pull-left"><em>您有</em><span class="mes_new">{{newMsgCount}}</span><em>条新消息</em></div><div class="panel_title text-right" style="margin-left:0px;"><a ng-click="setRead()" ng-if="false">设为已读消息</a></div></div><div ng-if="newMsgs.length>0" class="panel_content head_list_newMsg ellipsis" ng-repeat="newMsg in newMsgs"><em ng-class="{new_msg: newMsg.status == 1}"></em><a href="/message" ng-bind-html="newMsg.content"></a></div><div class="panel_more text-center"><a href="/message" data-event="2230">查看全部消息 >></a></div></div></li><li ng-show="isAuthenticated()" ng-class="{\'border-img\': (user.type == 2 || user.type == 5) && showBranchSelect}" class="custom_img background-color-width-change" ng-mouseover="showCode = true" ng-mouseleave="showCode = false"><div class="head_hover"><div class="vip_c"><a ng-href="/usercenter/account"><em ng-if="!currentUser.headImg" class="eqf-top-contact"></em> <img ng-if="currentUser.headImg" ng-src="{{currentUser.headImg.indexOf(\'http\') < 0 ? (PREFIX_FILE_HOST + currentUser.headImg):headImg }}"></a></div><div class="head_click box-shadow" ng-show="showCode == true"><div class="itemList"><a href="/usercenter/member">用户中心</a></div><div ng-show="accessOrderTask" class="itemList"><a href="/list/order">订单管理</a></div><div ng-show="accessOrderTask" class="itemList"><a href="/list/task">任务管理</a></div><div class="itemList" ng-if="user.type == 2 || user.type == 5"><a href="/usercenter/children">账户管理</a></div><div class="itemList" ng-if="branchid"><a ng-click="changeCurrent()">返回主账号</a></div><div class="itemList"><a href="/invitation" data-event="2231">我的邀请</a></div><div class="itemList"><a ng-click="logout()">安全退出</a></div></div></div></li><li class="head-creat transform-change" ng-if="myScene && !branchid"><a href="/scene/list/sample" class=""><em class="eqf-plus2"></em></a></li></ul>');
}])}(),function(e){try{e=angular.module("templates-html")}catch(t){e=angular.module("templates-html",[])}e.run(["$templateCache",function(e){e.put("security/register/companyReg.tpl.html",'<div class="companyReg"><div class="login-form-section"><div class="login-content"><form class="form-horizontal" style="overflow:hidden"><div class="section-title"><h3>免费申请企业帐号获得更多功能&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3></div><div><script type="text/javascript" load-script="" ng-src="{{validateCodeUrl}}"></script></div><div id="captcha-box"></div><div class="company-user-modal"><div class="textbox-wrap"><input type="type" class="form-control" ng-model="companyInfo.mobile" placeholder="手机号" ng-class="{error:telError}" maxlength="20"> <span class="tips">必填</span> <span class="error_text"><em ng-show="telError">{{telError}}</em></span></div><div class="textbox-wrap"><input style="width:350px" type="type" class="form-control" ng-class="{error:codeError}" placeholder="验证码" ng-model="companyInfo.code" ng-blur="checkCode(companyInfo)"> <span class="text-center" ng-show="!isCodeAccessiable"><span class="code" ng-click="getImageCode()" id="submit-button">获取验证码</span></span> <span class="code enble text-center" ng-show="isCodeAccessiable">{{codeTip}}</span> <span class="tips">必填</span> <span class="error_text"><em ng-show="codeError">{{codeError}}</em></span></div><div class="textbox-wrap"><input type="type" class="form-control" ng-class="{error:pwdError}" placeholder="密码" ng-model="companyInfo.password" ng-blur="checkPassword(companyInfo)"> <span class="tips">必填</span> <span class="error_text"><em ng-show="pwdError">{{pwdError}}</em></span></div><div class="textbox-wrap"><input class="form-control" type="text" ng-model="companyInfo.name" placeholder="企业名称" ng-blur="checkName(companyInfo)" ng-class="{error:nameError}"> <span class="tips">必填</span> <span class="error_text clearfix"><em ng-show="nameError">{{nameError}}</em></span></div><div class="textbox-wrap"><input type="text" class="form-control" ng-model="companyInfo.email" placeholder="企业邮箱" ng-blur="checkEmail(companyInfo)" ng-class="{error:emailError}" maxlength="40"> <span class="tips">必填</span> <span class="error_text"><em ng-show="emailError">{{emailError}}</em></span></div><div class="textbox-wrap"><input type="text" class="form-control" ng-model="companyInfo.contacts" placeholder="联系人" ng-class="{error:contactsError}" ng-blur="checkcontacts(companyInfo)"> <span class="tips">必填</span> <span class="error_text"><em ng-show="contactsError">{{contactsError}}</em></span></div><div class="textbox-wrap"><input type="text" class="form-control" ng-model="companyInfo.address" placeholder="联系地址" ng-class="{error:addressError}" ng-blur="checkAddress(companyInfo)"> <span class="tips">必填</span> <span class="error_text"><em ng-show="addressError">{{addressError}}</em></span></div><span class="error_text"><em ng-show="regErr">{{regErr}}</em></span><div class="login-form-action clearfix pb40"><a style="width:500px;height:45px;line-height:33px;font-size:14px;" class="btn btn-success btn-main" ng-click="register(companyInfo)">注册</a><div class="clearfix" style="font-size:12px;padding-top:15px;padding-right:50px;"><a target="_blank" href="/privilege" style="color:#08a1ef;float:right;">了解企业账号详情>></a> <span>已注册过易企秀帐号，请至<a target="_blank" href="/privilege" style="color:#08a1ef;">会员页升级</a></span></div></div></div><div class="stars-active"><div class="stars" id="stars3"></div><div class="stars" id="stars4"></div></div></form></div><div style="height:200px;text-align:center;"><img ng-src="{{CLIENT_CDN}}assets/images/star3.svg"></div></div><footer><div class="same-content clearfix pt20 pb20"><div class="fr" style="width:280px;"><div class="fr" style="background-color:#fff;"><img ng-src="{{CLIENT_CDN}}assets/images/home/QRcode.svg" width="80px" height="80px;"></div><p>微信：扫描二维码咨询在线客服</p><p>邮箱：vip@eqxiu.com</p><p>电话：010-83035157</p><p>服务时间：9:00-18:00</p></div><div class="fl"><p>© 2015 eqxiu.com. All rights reserved 北京中网易企秀科技有限公司</p><p>电信与信息服务业务经营许可证：京ICP证160037号 | 京ICP备15056244号-5 | 京公网安备11010802018300</p><div class="renzheng" style="padding-top:10px;"><a href="https://ss.knet.cn/verifyseal.dll?sn=e14082111011652865izip000000&amp;ct=df&amp;a=1&amp;pa=0.5974755212664604" target="_blank"><img ng-src="{{CLIENT_CDN}}assets/images/kexin.svg" width="80px" height="30px"></a> <a href="http://bbs.eqxiu.com/portal.php" class="btn btn-main" target="_blank">官方论坛</a> <a><em class="eqf-wechat btn btn-primary"></em><div class="weixin" style="background-color:#fff;"><img ng-src="{{CLIENT_CDN}}assets/images/home/QRcode.svg" width="120px" height="120px"></div></a> <a href="http://weibo.com/eqxiu" target="_blank"><em class="eqf-weibo btn out-red"></em></a> <a href="http://bbs.eqxiu.com/plugin.php?id=ljqqqun:qq&amp;type=4" target="_blank" style="padding:0;" class="qq-group btn-main background-color-width-change clearfix"><em class="eqf-qq btn"></em> <span>QQ群交流</span></a></div></div></div></footer></div>')}])}();